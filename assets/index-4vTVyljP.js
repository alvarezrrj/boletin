const __vite__fileDeps=["assets/javascript-B50b1xvf.js","assets/typescript-3a6SNL6q.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function xM(n,e){const t=new Set(n.split(","));return r=>t.has(r)}const On={},vg=[],As=()=>{},rue=()=>!1,gE=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),DM=n=>n.startsWith("onUpdate:"),ni=Object.assign,LM=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},iue=Object.prototype.hasOwnProperty,Ut=(n,e)=>iue.call(n,e),lt=Array.isArray,mg=n=>vE(n)==="[object Map]",T7=n=>vE(n)==="[object Set]",yt=n=>typeof n=="function",ri=n=>typeof n=="string",kd=n=>typeof n=="symbol",Jn=n=>n!==null&&typeof n=="object",N7=n=>(Jn(n)||yt(n))&&yt(n.then)&&yt(n.catch),A7=Object.prototype.toString,vE=n=>A7.call(n),oue=n=>vE(n).slice(8,-1),O7=n=>vE(n)==="[object Object]",kM=n=>ri(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,T_=xM(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mE=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},sue=/-(\w)/g,Ag=mE(n=>n.replace(sue,(e,t)=>t?t.toUpperCase():"")),aue=/\B([A-Z])/g,Ev=mE(n=>n.replace(aue,"-$1").toLowerCase()),R7=mE(n=>n.charAt(0).toUpperCase()+n.slice(1)),vk=mE(n=>n?`on${R7(n)}`:""),Gc=(n,e)=>!Object.is(n,e),WC=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},M7=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},KN=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let eH;const P7=()=>eH||(eH=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function TM(n){if(lt(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=ri(r)?fue(r):TM(r);if(i)for(const o in i)e[o]=i[o]}return e}else if(ri(n)||Jn(n))return n}const uue=/;(?![^(]*\))/g,lue=/:([^]+)/,cue=/\/\*[^]*?\*\//g;function fue(n){const e={};return n.replace(cue,"").split(uue).forEach(t=>{if(t){const r=t.split(lue);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function NM(n){let e="";if(ri(n))e=n;else if(lt(n))for(let t=0;t<n.length;t++){const r=NM(n[t]);r&&(e+=r+" ")}else if(Jn(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const hue="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",due=xM(hue);function F7(n){return!!n||n===""}const pue=n=>ri(n)?n:n==null?"":lt(n)||Jn(n)&&(n.toString===A7||!yt(n.toString))?JSON.stringify(n,B7,2):String(n),B7=(n,e)=>e&&e.__v_isRef?B7(n,e.value):mg(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],o)=>(t[mk(r,o)+" =>"]=i,t),{})}:T7(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>mk(t))}:kd(e)?mk(e):Jn(e)&&!lt(e)&&!O7(e)?String(e):e,mk=(n,e="")=>{var t;return kd(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sa;class gue{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=sa,!e&&sa&&(this.index=(sa.scopes||(sa.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=sa;try{return sa=this,e()}finally{sa=t}}}on(){sa=this}off(){sa=this.parent}stop(e){if(this._active){let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function vue(n,e=sa){e&&e.active&&e.effects.push(n)}function mue(){return sa}let Uh;class AM{constructor(e,t,r,i){this.fn=e,this.trigger=t,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,vue(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,af();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(_ue(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),uf()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Tc,t=Uh;try{return Tc=!0,Uh=this,this._runnings++,tH(this),this.fn()}finally{nH(this),this._runnings--,Uh=t,Tc=e}}stop(){this.active&&(tH(this),nH(this),this.onStop&&this.onStop(),this.active=!1)}}function _ue(n){return n.value}function tH(n){n._trackId++,n._depsLength=0}function nH(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)W7(n.deps[e],n);n.deps.length=n._depsLength}}function W7(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let Tc=!0,GN=0;const V7=[];function af(){V7.push(Tc),Tc=!1}function uf(){const n=V7.pop();Tc=n===void 0?!0:n}function OM(){GN++}function RM(){for(GN--;!GN&&YN.length;)YN.shift()()}function H7(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const r=n.deps[n._depsLength];r!==e?(r&&W7(r,n),n.deps[n._depsLength++]=e):n._depsLength++}}const YN=[];function U7(n,e,t){OM();for(const r of n.keys()){let i;r._dirtyLevel<e&&(i??(i=n.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=n.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&YN.push(r.scheduler)))}RM()}const j7=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},ZN=new WeakMap,jh=Symbol(""),XN=Symbol("");function Bo(n,e,t){if(Tc&&Uh){let r=ZN.get(n);r||ZN.set(n,r=new Map);let i=r.get(t);i||r.set(t,i=j7(()=>r.delete(t))),H7(Uh,i)}}function cl(n,e,t,r,i,o){const s=ZN.get(n);if(!s)return;let a=[];if(e==="clear")a=[...s.values()];else if(t==="length"&&lt(n)){const u=Number(r);s.forEach((l,f)=>{(f==="length"||!kd(f)&&f>=u)&&a.push(l)})}else switch(t!==void 0&&a.push(s.get(t)),e){case"add":lt(n)?kM(t)&&a.push(s.get("length")):(a.push(s.get(jh)),mg(n)&&a.push(s.get(XN)));break;case"delete":lt(n)||(a.push(s.get(jh)),mg(n)&&a.push(s.get(XN)));break;case"set":mg(n)&&a.push(s.get(jh));break}OM();for(const u of a)u&&U7(u,4);RM()}const yue=xM("__proto__,__v_isRef,__isVue"),z7=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(kd)),rH=bue();function bue(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const r=on(this);for(let o=0,s=this.length;o<s;o++)Bo(r,"get",o+"");const i=r[e](...t);return i===-1||i===!1?r[e](...t.map(on)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){af(),OM();const r=on(this)[e].apply(this,t);return RM(),uf(),r}}),n}function wue(n){kd(n)||(n=String(n));const e=on(this);return Bo(e,"has",n),e.hasOwnProperty(n)}class q7{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){const i=this._isReadonly,o=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return o;if(t==="__v_raw")return r===(i?o?Rue:Y7:o?G7:K7).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=lt(e);if(!i){if(s&&Ut(rH,t))return Reflect.get(rH,t,r);if(t==="hasOwnProperty")return wue}const a=Reflect.get(e,t,r);return(kd(t)?z7.has(t):yue(t))||(i||Bo(e,"get",t),o)?a:Wo(a)?s&&kM(t)?a:a.value:Jn(a)?i?Z7(a):FM(a):a}}class $7 extends q7{constructor(e=!1){super(!1,e)}set(e,t,r,i){let o=e[t];if(!this._isShallow){const u=cy(o);if(!y1(r)&&!cy(r)&&(o=on(o),r=on(r)),!lt(e)&&Wo(o)&&!Wo(r))return u?!1:(o.value=r,!0)}const s=lt(e)&&kM(t)?Number(t)<e.length:Ut(e,t),a=Reflect.set(e,t,r,i);return e===on(i)&&(s?Gc(r,o)&&cl(e,"set",t,r):cl(e,"add",t,r)),a}deleteProperty(e,t){const r=Ut(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&cl(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!kd(t)||!z7.has(t))&&Bo(e,"has",t),r}ownKeys(e){return Bo(e,"iterate",lt(e)?"length":jh),Reflect.ownKeys(e)}}class Cue extends q7{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Sue=new $7,Eue=new Cue,Iue=new $7(!0);const MM=n=>n,_E=n=>Reflect.getPrototypeOf(n);function Ow(n,e,t=!1,r=!1){n=n.__v_raw;const i=on(n),o=on(e);t||(Gc(e,o)&&Bo(i,"get",e),Bo(i,"get",o));const{has:s}=_E(i),a=r?MM:t?WM:fy;if(s.call(i,e))return a(n.get(e));if(s.call(i,o))return a(n.get(o));n!==i&&n.get(e)}function Rw(n,e=!1){const t=this.__v_raw,r=on(t),i=on(n);return e||(Gc(n,i)&&Bo(r,"has",n),Bo(r,"has",i)),n===i?t.has(n):t.has(n)||t.has(i)}function Mw(n,e=!1){return n=n.__v_raw,!e&&Bo(on(n),"iterate",jh),Reflect.get(n,"size",n)}function iH(n){n=on(n);const e=on(this);return _E(e).has.call(e,n)||(e.add(n),cl(e,"add",n,n)),this}function oH(n,e){e=on(e);const t=on(this),{has:r,get:i}=_E(t);let o=r.call(t,n);o||(n=on(n),o=r.call(t,n));const s=i.call(t,n);return t.set(n,e),o?Gc(e,s)&&cl(t,"set",n,e):cl(t,"add",n,e),this}function sH(n){const e=on(this),{has:t,get:r}=_E(e);let i=t.call(e,n);i||(n=on(n),i=t.call(e,n)),r&&r.call(e,n);const o=e.delete(n);return i&&cl(e,"delete",n,void 0),o}function aH(){const n=on(this),e=n.size!==0,t=n.clear();return e&&cl(n,"clear",void 0,void 0),t}function Pw(n,e){return function(r,i){const o=this,s=o.__v_raw,a=on(s),u=e?MM:n?WM:fy;return!n&&Bo(a,"iterate",jh),s.forEach((l,f)=>r.call(i,u(l),u(f),o))}}function Fw(n,e,t){return function(...r){const i=this.__v_raw,o=on(i),s=mg(o),a=n==="entries"||n===Symbol.iterator&&s,u=n==="keys"&&s,l=i[n](...r),f=t?MM:e?WM:fy;return!e&&Bo(o,"iterate",u?XN:jh),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[f(h[0]),f(h[1])]:f(h),done:d}},[Symbol.iterator](){return this}}}}function Kl(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function xue(){const n={get(o){return Ow(this,o)},get size(){return Mw(this)},has:Rw,add:iH,set:oH,delete:sH,clear:aH,forEach:Pw(!1,!1)},e={get(o){return Ow(this,o,!1,!0)},get size(){return Mw(this)},has:Rw,add:iH,set:oH,delete:sH,clear:aH,forEach:Pw(!1,!0)},t={get(o){return Ow(this,o,!0)},get size(){return Mw(this,!0)},has(o){return Rw.call(this,o,!0)},add:Kl("add"),set:Kl("set"),delete:Kl("delete"),clear:Kl("clear"),forEach:Pw(!0,!1)},r={get(o){return Ow(this,o,!0,!0)},get size(){return Mw(this,!0)},has(o){return Rw.call(this,o,!0)},add:Kl("add"),set:Kl("set"),delete:Kl("delete"),clear:Kl("clear"),forEach:Pw(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Fw(o,!1,!1),t[o]=Fw(o,!0,!1),e[o]=Fw(o,!1,!0),r[o]=Fw(o,!0,!0)}),[n,t,e,r]}const[Due,Lue,kue,Tue]=xue();function PM(n,e){const t=e?n?Tue:kue:n?Lue:Due;return(r,i,o)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Ut(t,i)&&i in r?t:r,i,o)}const Nue={get:PM(!1,!1)},Aue={get:PM(!1,!0)},Oue={get:PM(!0,!1)};const K7=new WeakMap,G7=new WeakMap,Y7=new WeakMap,Rue=new WeakMap;function Mue(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pue(n){return n.__v_skip||!Object.isExtensible(n)?0:Mue(oue(n))}function FM(n){return cy(n)?n:BM(n,!1,Sue,Nue,K7)}function Fue(n){return BM(n,!1,Iue,Aue,G7)}function Z7(n){return BM(n,!0,Eue,Oue,Y7)}function BM(n,e,t,r,i){if(!Jn(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const o=i.get(n);if(o)return o;const s=Pue(n);if(s===0)return n;const a=new Proxy(n,s===2?r:t);return i.set(n,a),a}function N_(n){return cy(n)?N_(n.__v_raw):!!(n&&n.__v_isReactive)}function cy(n){return!!(n&&n.__v_isReadonly)}function y1(n){return!!(n&&n.__v_isShallow)}function X7(n){return n?!!n.__v_raw:!1}function on(n){const e=n&&n.__v_raw;return e?on(e):n}function Bue(n){return Object.isExtensible(n)&&M7(n,"__v_skip",!0),n}const fy=n=>Jn(n)?FM(n):n,WM=n=>Jn(n)?Z7(n):n;class Q7{constructor(e,t,r,i){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new AM(()=>e(this._value),()=>VC(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=on(this);return(!e._cacheable||e.effect.dirty)&&Gc(e._value,e._value=e.effect.run())&&VC(e,4),J7(e),e.effect._dirtyLevel>=2&&VC(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Wue(n,e,t=!1){let r,i;const o=yt(n);return o?(r=n,i=As):(r=n.get,i=n.set),new Q7(r,i,o||!i,t)}function J7(n){var e;Tc&&Uh&&(n=on(n),H7(Uh,(e=n.dep)!=null?e:n.dep=j7(()=>n.dep=void 0,n instanceof Q7?n:void 0)))}function VC(n,e=4,t){n=on(n);const r=n.dep;r&&U7(r,e)}function Wo(n){return!!(n&&n.__v_isRef===!0)}function Nc(n){return Vue(n,!1)}function Vue(n,e){return Wo(n)?n:new Hue(n,e)}class Hue{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:on(e),this._value=t?e:fy(e)}get value(){return J7(this),this._value}set value(e){const t=this.__v_isShallow||y1(e)||cy(e);e=t?e:on(e),Gc(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:fy(e),VC(this,4))}}function Uue(n){return Wo(n)?n.value:n}const jue={get:(n,e,t)=>Uue(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return Wo(i)&&!Wo(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function eq(n){return N_(n)?n:new Proxy(n,jue)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ac(n,e,t,r){try{return r?n(...r):n()}catch(i){yE(i,e,t)}}function Ca(n,e,t,r){if(yt(n)){const i=Ac(n,e,t,r);return i&&N7(i)&&i.catch(o=>{yE(o,e,t)}),i}if(lt(n)){const i=[];for(let o=0;o<n.length;o++)i.push(Ca(n[o],e,t,r));return i}}function yE(n,e,t,r=!0){const i=e?e.vnode:null;if(e){let o=e.parent;const s=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${t}`;for(;o;){const l=o.ec;if(l){for(let f=0;f<l.length;f++)if(l[f](n,s,a)===!1)return}o=o.parent}const u=e.appContext.config.errorHandler;if(u){af(),Ac(u,null,10,[n,s,a]),uf();return}}zue(n,t,i,r)}function zue(n,e,t,r=!0){console.error(n)}let hy=!1,QN=!1;const Ri=[];let Xa=0;const _g=[];let ac=null,Ch=0;const tq=Promise.resolve();let VM=null;function que(n){const e=VM||tq;return n?e.then(this?n.bind(this):n):e}function $ue(n){let e=Xa+1,t=Ri.length;for(;e<t;){const r=e+t>>>1,i=Ri[r],o=dy(i);o<n||o===n&&i.pre?e=r+1:t=r}return e}function HM(n){(!Ri.length||!Ri.includes(n,hy&&n.allowRecurse?Xa+1:Xa))&&(n.id==null?Ri.push(n):Ri.splice($ue(n.id),0,n),nq())}function nq(){!hy&&!QN&&(QN=!0,VM=tq.then(iq))}function Kue(n){const e=Ri.indexOf(n);e>Xa&&Ri.splice(e,1)}function Gue(n){lt(n)?_g.push(...n):(!ac||!ac.includes(n,n.allowRecurse?Ch+1:Ch))&&_g.push(n),nq()}function uH(n,e,t=hy?Xa+1:0){for(;t<Ri.length;t++){const r=Ri[t];if(r&&r.pre){if(n&&r.id!==n.uid)continue;Ri.splice(t,1),t--,r()}}}function rq(n){if(_g.length){const e=[...new Set(_g)].sort((t,r)=>dy(t)-dy(r));if(_g.length=0,ac){ac.push(...e);return}for(ac=e,Ch=0;Ch<ac.length;Ch++)ac[Ch]();ac=null,Ch=0}}const dy=n=>n.id==null?1/0:n.id,Yue=(n,e)=>{const t=dy(n)-dy(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function iq(n){QN=!1,hy=!0,Ri.sort(Yue);try{for(Xa=0;Xa<Ri.length;Xa++){const e=Ri[Xa];e&&e.active!==!1&&Ac(e,null,14)}}finally{Xa=0,Ri.length=0,rq(),hy=!1,VM=null,(Ri.length||_g.length)&&iq()}}function Zue(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||On;let i=t;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const f=`${s==="modelValue"?"model":s}Modifiers`,{number:h,trim:d}=r[f]||On;d&&(i=t.map(g=>ri(g)?g.trim():g)),h&&(i=t.map(KN))}let a,u=r[a=vk(e)]||r[a=vk(Ag(e))];!u&&o&&(u=r[a=vk(Ev(e))]),u&&Ca(u,n,6,i);const l=r[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Ca(l,n,6,i)}}function oq(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const o=n.emits;let s={},a=!1;if(!yt(n)){const u=l=>{const f=oq(l,e,!0);f&&(a=!0,ni(s,f))};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}return!o&&!a?(Jn(n)&&r.set(n,null),null):(lt(o)?o.forEach(u=>s[u]=null):ni(s,o),Jn(n)&&r.set(n,s),s)}function bE(n,e){return!n||!gE(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ut(n,e[0].toLowerCase()+e.slice(1))||Ut(n,Ev(e))||Ut(n,e))}let as=null,wE=null;function b1(n){const e=as;return as=n,wE=n&&n.type.__scopeId||null,e}function Xue(n){wE=n}function Que(){wE=null}function Jue(n,e=as,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&yH(-1);const o=b1(e);let s;try{s=n(...i)}finally{b1(o),r._d&&yH(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function _k(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:a,emit:u,render:l,renderCache:f,props:h,data:d,setupState:g,ctx:v,inheritAttrs:m}=n,y=b1(n);let b,C;try{if(t.shapeFlag&4){const D=i||r,k=D;b=Za(l.call(k,D,f,h,g,d,v)),C=a}else{const D=e;b=Za(D.length>1?D(h,{attrs:a,slots:s,emit:u}):D(h,null)),C=e.props?a:ele(a)}}catch(D){R_.length=0,yE(D,n,1),b=ko(py)}let E=b;if(C&&m!==!1){const D=Object.keys(C),{shapeFlag:k}=E;D.length&&k&7&&(o&&D.some(DM)&&(C=tle(C,o)),E=Og(E,C,!1,!0))}return t.dirs&&(E=Og(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(t.dirs):t.dirs),t.transition&&(E.transition=t.transition),b=E,b1(y),b}const ele=n=>{let e;for(const t in n)(t==="class"||t==="style"||gE(t))&&((e||(e={}))[t]=n[t]);return e},tle=(n,e)=>{const t={};for(const r in n)(!DM(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function nle(n,e,t){const{props:r,children:i,component:o}=n,{props:s,children:a,patchFlag:u}=e,l=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&u>=0){if(u&1024)return!0;if(u&16)return r?lH(r,s,l):!!s;if(u&8){const f=e.dynamicProps;for(let h=0;h<f.length;h++){const d=f[h];if(s[d]!==r[d]&&!bE(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?lH(r,s,l):!0:!!s;return!1}function lH(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==n[o]&&!bE(t,o))return!0}return!1}function rle({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const ile=Symbol.for("v-ndc"),ole=n=>n.__isSuspense;function sle(n,e){e&&e.pendingBranch?lt(n)?e.effects.push(...n):e.effects.push(n):Gue(n)}const ale=Symbol.for("v-scx"),ule=()=>UC(ale),Bw={};function yk(n,e,t){return sq(n,e,t)}function sq(n,e,{immediate:t,deep:r,flush:i,once:o,onTrack:s,onTrigger:a}=On){if(e&&o){const I=e;e=(...T)=>{I(...T),k()}}const u=co,l=I=>r===!0?I:Th(I,r===!1?1:void 0);let f,h=!1,d=!1;if(Wo(n)?(f=()=>n.value,h=y1(n)):N_(n)?(f=()=>l(n),h=!0):lt(n)?(d=!0,h=n.some(I=>N_(I)||y1(I)),f=()=>n.map(I=>{if(Wo(I))return I.value;if(N_(I))return l(I);if(yt(I))return Ac(I,u,2)})):yt(n)?e?f=()=>Ac(n,u,2):f=()=>(g&&g(),Ca(n,u,3,[v])):f=As,e&&r){const I=f;f=()=>Th(I())}let g,v=I=>{g=E.onStop=()=>{Ac(I,u,4),g=E.onStop=void 0}},m;if(EE)if(v=As,e?t&&Ca(e,u,3,[f(),d?[]:void 0,v]):f(),i==="sync"){const I=ule();m=I.__watcherHandles||(I.__watcherHandles=[])}else return As;let y=d?new Array(n.length).fill(Bw):Bw;const b=()=>{if(!(!E.active||!E.dirty))if(e){const I=E.run();(r||h||(d?I.some((T,A)=>Gc(T,y[A])):Gc(I,y)))&&(g&&g(),Ca(e,u,3,[I,y===Bw?void 0:d&&y[0]===Bw?[]:y,v]),y=I)}else E.run()};b.allowRecurse=!!e;let C;i==="sync"?C=b:i==="post"?C=()=>Lo(b,u&&u.suspense):(b.pre=!0,u&&(b.id=u.uid),C=()=>HM(b));const E=new AM(f,As,C),D=mue(),k=()=>{E.stop(),D&&LM(D.effects,E)};return e?t?b():y=E.run():i==="post"?Lo(E.run.bind(E),u&&u.suspense):E.run(),m&&m.push(k),k}function lle(n,e,t){const r=this.proxy,i=ri(n)?n.includes(".")?aq(r,n):()=>r[n]:n.bind(r,r);let o;yt(e)?o=e:(o=e.handler,t=e);const s=I0(this),a=sq(i,o.bind(r),t);return s(),a}function aq(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function Th(n,e=1/0,t){if(e<=0||!Jn(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,Wo(n))Th(n.value,e,t);else if(lt(n))for(let r=0;r<n.length;r++)Th(n[r],e,t);else if(T7(n)||mg(n))n.forEach(r=>{Th(r,e,t)});else if(O7(n))for(const r in n)Th(n[r],e,t);return n}function cH(n,e){if(as===null)return n;const t=IE(as)||as.proxy,r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[o,s,a,u=On]=e[i];o&&(yt(o)&&(o={mounted:o,updated:o}),o.deep&&Th(s),r.push({dir:o,instance:t,value:s,oldValue:void 0,arg:a,modifiers:u}))}return n}function Xf(n,e,t,r){const i=n.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(af(),Ca(u,t,8,[n.el,a,n,e]),uf())}}/*! #__NO_SIDE_EFFECTS__ */function Iv(n,e){return yt(n)?ni({name:n.name},e,{setup:n}):n}const HC=n=>!!n.type.__asyncLoader,uq=n=>n.type.__isKeepAlive;function cle(n,e){lq(n,"a",e)}function fle(n,e){lq(n,"da",e)}function lq(n,e,t=co){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(CE(e,r,t),t){let i=t.parent;for(;i&&i.parent;)uq(i.parent.vnode)&&hle(r,e,t,i),i=i.parent}}function hle(n,e,t,r){const i=CE(e,n,r,!0);zM(()=>{LM(r[e],i)},t)}function CE(n,e,t=co,r=!1){if(t){const i=t[n]||(t[n]=[]),o=e.__weh||(e.__weh=(...s)=>{if(t.isUnmounted)return;af();const a=I0(t),u=Ca(e,t,n,s);return a(),uf(),u});return r?i.unshift(o):i.push(o),o}}const Tl=n=>(e,t=co)=>(!EE||n==="sp")&&CE(n,(...r)=>e(...r),t),dle=Tl("bm"),UM=Tl("m"),ple=Tl("bu"),jM=Tl("u"),gle=Tl("bum"),zM=Tl("um"),vle=Tl("sp"),mle=Tl("rtg"),_le=Tl("rtc");function yle(n,e=co){CE("ec",n,e)}const JN=n=>n?Eq(n)?IE(n)||n.proxy:JN(n.parent):null,A_=ni(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>JN(n.parent),$root:n=>JN(n.root),$emit:n=>n.emit,$options:n=>qM(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,HM(n.update)}),$nextTick:n=>n.n||(n.n=que.bind(n.proxy)),$watch:n=>lle.bind(n)}),bk=(n,e)=>n!==On&&!n.__isScriptSetup&&Ut(n,e),ble={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=n;let l;if(e[0]!=="$"){const g=s[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return o[e]}else{if(bk(r,e))return s[e]=1,r[e];if(i!==On&&Ut(i,e))return s[e]=2,i[e];if((l=n.propsOptions[0])&&Ut(l,e))return s[e]=3,o[e];if(t!==On&&Ut(t,e))return s[e]=4,t[e];eA&&(s[e]=0)}}const f=A_[e];let h,d;if(f)return e==="$attrs"&&Bo(n.attrs,"get",""),f(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==On&&Ut(t,e))return s[e]=4,t[e];if(d=u.config.globalProperties,Ut(d,e))return d[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:o}=n;return bk(i,e)?(i[e]=t,!0):r!==On&&Ut(r,e)?(r[e]=t,!0):Ut(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(o[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:o}},s){let a;return!!t[s]||n!==On&&Ut(n,s)||bk(e,s)||(a=o[0])&&Ut(a,s)||Ut(r,s)||Ut(A_,s)||Ut(i.config.globalProperties,s)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Ut(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function fH(n){return lt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let eA=!0;function wle(n){const e=qM(n),t=n.proxy,r=n.ctx;eA=!1,e.beforeCreate&&hH(e.beforeCreate,n,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:l,created:f,beforeMount:h,mounted:d,beforeUpdate:g,updated:v,activated:m,deactivated:y,beforeDestroy:b,beforeUnmount:C,destroyed:E,unmounted:D,render:k,renderTracked:I,renderTriggered:T,errorCaptured:A,serverPrefetch:M,expose:L,inheritAttrs:F,components:W,directives:z,filters:K}=e;if(l&&Cle(l,r,null),s)for(const we in s){const ae=s[we];yt(ae)&&(r[we]=ae.bind(t))}if(i){const we=i.call(t,t);Jn(we)&&(n.data=FM(we))}if(eA=!0,o)for(const we in o){const ae=o[we],Dt=yt(ae)?ae.bind(t,t):yt(ae.get)?ae.get.bind(t,t):As,At=!yt(ae)&&yt(ae.set)?ae.set.bind(t):As,$n=Jle({get:Dt,set:At});Object.defineProperty(r,we,{enumerable:!0,configurable:!0,get:()=>$n.value,set:pr=>$n.value=pr})}if(a)for(const we in a)cq(a[we],r,t,we);if(u){const we=yt(u)?u.call(t):u;Reflect.ownKeys(we).forEach(ae=>{Lle(ae,we[ae])})}f&&hH(f,n,"c");function se(we,ae){lt(ae)?ae.forEach(Dt=>we(Dt.bind(t))):ae&&we(ae.bind(t))}if(se(dle,h),se(UM,d),se(ple,g),se(jM,v),se(cle,m),se(fle,y),se(yle,A),se(_le,I),se(mle,T),se(gle,C),se(zM,D),se(vle,M),lt(L))if(L.length){const we=n.exposed||(n.exposed={});L.forEach(ae=>{Object.defineProperty(we,ae,{get:()=>t[ae],set:Dt=>t[ae]=Dt})})}else n.exposed||(n.exposed={});k&&n.render===As&&(n.render=k),F!=null&&(n.inheritAttrs=F),W&&(n.components=W),z&&(n.directives=z)}function Cle(n,e,t=As){lt(n)&&(n=tA(n));for(const r in n){const i=n[r];let o;Jn(i)?"default"in i?o=UC(i.from||r,i.default,!0):o=UC(i.from||r):o=UC(i),Wo(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[r]=o}}function hH(n,e,t){Ca(lt(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function cq(n,e,t,r){const i=r.includes(".")?aq(t,r):()=>t[r];if(ri(n)){const o=e[n];yt(o)&&yk(i,o)}else if(yt(n))yk(i,n.bind(t));else if(Jn(n))if(lt(n))n.forEach(o=>cq(o,e,t,r));else{const o=yt(n.handler)?n.handler.bind(t):e[n.handler];yt(o)&&yk(i,o,n)}}function qM(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=n.appContext,a=o.get(e);let u;return a?u=a:!i.length&&!t&&!r?u=e:(u={},i.length&&i.forEach(l=>w1(u,l,s,!0)),w1(u,e,s)),Jn(e)&&o.set(e,u),u}function w1(n,e,t,r=!1){const{mixins:i,extends:o}=e;o&&w1(n,o,t,!0),i&&i.forEach(s=>w1(n,s,t,!0));for(const s in e)if(!(r&&s==="expose")){const a=Sle[s]||t&&t[s];n[s]=a?a(n[s],e[s]):e[s]}return n}const Sle={data:dH,props:pH,emits:pH,methods:w_,computed:w_,beforeCreate:Ji,created:Ji,beforeMount:Ji,mounted:Ji,beforeUpdate:Ji,updated:Ji,beforeDestroy:Ji,beforeUnmount:Ji,destroyed:Ji,unmounted:Ji,activated:Ji,deactivated:Ji,errorCaptured:Ji,serverPrefetch:Ji,components:w_,directives:w_,watch:Ile,provide:dH,inject:Ele};function dH(n,e){return e?n?function(){return ni(yt(n)?n.call(this,this):n,yt(e)?e.call(this,this):e)}:e:n}function Ele(n,e){return w_(tA(n),tA(e))}function tA(n){if(lt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Ji(n,e){return n?[...new Set([].concat(n,e))]:e}function w_(n,e){return n?ni(Object.create(null),n,e):e}function pH(n,e){return n?lt(n)&&lt(e)?[...new Set([...n,...e])]:ni(Object.create(null),fH(n),fH(e??{})):e}function Ile(n,e){if(!n)return e;if(!e)return n;const t=ni(Object.create(null),n);for(const r in e)t[r]=Ji(n[r],e[r]);return t}function fq(){return{app:null,config:{isNativeTag:rue,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xle=0;function Dle(n,e){return function(r,i=null){yt(r)||(r=ni({},r)),i!=null&&!Jn(i)&&(i=null);const o=fq(),s=new WeakSet;let a=!1;const u=o.app={_uid:xle++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:ece,get config(){return o.config},set config(l){},use(l,...f){return s.has(l)||(l&&yt(l.install)?(s.add(l),l.install(u,...f)):yt(l)&&(s.add(l),l(u,...f))),u},mixin(l){return o.mixins.includes(l)||o.mixins.push(l),u},component(l,f){return f?(o.components[l]=f,u):o.components[l]},directive(l,f){return f?(o.directives[l]=f,u):o.directives[l]},mount(l,f,h){if(!a){const d=ko(r,i);return d.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),f&&e?e(d,l):n(d,l,h),a=!0,u._container=l,l.__vue_app__=u,IE(d.component)||d.component.proxy}},unmount(){a&&(n(null,u._container),delete u._container.__vue_app__)},provide(l,f){return o.provides[l]=f,u},runWithContext(l){const f=O_;O_=u;try{return l()}finally{O_=f}}};return u}}let O_=null;function Lle(n,e){if(co){let t=co.provides;const r=co.parent&&co.parent.provides;r===t&&(t=co.provides=Object.create(r)),t[n]=e}}function UC(n,e,t=!1){const r=co||as;if(r||O_){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:O_._context.provides;if(i&&n in i)return i[n];if(arguments.length>1)return t&&yt(e)?e.call(r&&r.proxy):e}}const hq={},dq=()=>Object.create(hq),pq=n=>Object.getPrototypeOf(n)===hq;function kle(n,e,t,r=!1){const i={},o=dq();n.propsDefaults=Object.create(null),gq(n,e,i,o);for(const s in n.propsOptions[0])s in i||(i[s]=void 0);t?n.props=r?i:Fue(i):n.type.props?n.props=i:n.props=o,n.attrs=o}function Tle(n,e,t,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=n,a=on(i),[u]=n.propsOptions;let l=!1;if((r||s>0)&&!(s&16)){if(s&8){const f=n.vnode.dynamicProps;for(let h=0;h<f.length;h++){let d=f[h];if(bE(n.emitsOptions,d))continue;const g=e[d];if(u)if(Ut(o,d))g!==o[d]&&(o[d]=g,l=!0);else{const v=Ag(d);i[v]=nA(u,a,v,g,n,!1)}else g!==o[d]&&(o[d]=g,l=!0)}}}else{gq(n,e,i,o)&&(l=!0);let f;for(const h in a)(!e||!Ut(e,h)&&((f=Ev(h))===h||!Ut(e,f)))&&(u?t&&(t[h]!==void 0||t[f]!==void 0)&&(i[h]=nA(u,a,h,void 0,n,!0)):delete i[h]);if(o!==a)for(const h in o)(!e||!Ut(e,h))&&(delete o[h],l=!0)}l&&cl(n.attrs,"set","")}function gq(n,e,t,r){const[i,o]=n.propsOptions;let s=!1,a;if(e)for(let u in e){if(T_(u))continue;const l=e[u];let f;i&&Ut(i,f=Ag(u))?!o||!o.includes(f)?t[f]=l:(a||(a={}))[f]=l:bE(n.emitsOptions,u)||(!(u in r)||l!==r[u])&&(r[u]=l,s=!0)}if(o){const u=on(t),l=a||On;for(let f=0;f<o.length;f++){const h=o[f];t[h]=nA(i,u,h,l[h],n,!Ut(l,h))}}return s}function nA(n,e,t,r,i,o){const s=n[t];if(s!=null){const a=Ut(s,"default");if(a&&r===void 0){const u=s.default;if(s.type!==Function&&!s.skipFactory&&yt(u)){const{propsDefaults:l}=i;if(t in l)r=l[t];else{const f=I0(i);r=l[t]=u.call(null,e),f()}}else r=u}s[0]&&(o&&!a?r=!1:s[1]&&(r===""||r===Ev(t))&&(r=!0))}return r}function vq(n,e,t=!1){const r=e.propsCache,i=r.get(n);if(i)return i;const o=n.props,s={},a=[];let u=!1;if(!yt(n)){const f=h=>{u=!0;const[d,g]=vq(h,e,!0);ni(s,d),g&&a.push(...g)};!t&&e.mixins.length&&e.mixins.forEach(f),n.extends&&f(n.extends),n.mixins&&n.mixins.forEach(f)}if(!o&&!u)return Jn(n)&&r.set(n,vg),vg;if(lt(o))for(let f=0;f<o.length;f++){const h=Ag(o[f]);gH(h)&&(s[h]=On)}else if(o)for(const f in o){const h=Ag(f);if(gH(h)){const d=o[f],g=s[h]=lt(d)||yt(d)?{type:d}:ni({},d);if(g){const v=_H(Boolean,g.type),m=_H(String,g.type);g[0]=v>-1,g[1]=m<0||v<m,(v>-1||Ut(g,"default"))&&a.push(h)}}}const l=[s,a];return Jn(n)&&r.set(n,l),l}function gH(n){return n[0]!=="$"&&!T_(n)}function vH(n){return n===null?"null":typeof n=="function"?n.name||"":typeof n=="object"&&n.constructor&&n.constructor.name||""}function mH(n,e){return vH(n)===vH(e)}function _H(n,e){return lt(e)?e.findIndex(t=>mH(t,n)):yt(e)&&mH(e,n)?0:-1}const mq=n=>n[0]==="_"||n==="$stable",$M=n=>lt(n)?n.map(Za):[Za(n)],Nle=(n,e,t)=>{if(e._n)return e;const r=Jue((...i)=>$M(e(...i)),t);return r._c=!1,r},_q=(n,e,t)=>{const r=n._ctx;for(const i in n){if(mq(i))continue;const o=n[i];if(yt(o))e[i]=Nle(i,o,r);else if(o!=null){const s=$M(o);e[i]=()=>s}}},yq=(n,e)=>{const t=$M(e);n.slots.default=()=>t},Ale=(n,e)=>{const t=n.slots=dq();if(n.vnode.shapeFlag&32){const r=e._;r?(ni(t,e),M7(t,"_",r,!0)):_q(e,t)}else e&&yq(n,e)},Ole=(n,e,t)=>{const{vnode:r,slots:i}=n;let o=!0,s=On;if(r.shapeFlag&32){const a=e._;a?t&&a===1?o=!1:(ni(i,e),!t&&a===1&&delete i._):(o=!e.$stable,_q(e,i)),s=e}else e&&(yq(n,e),s={default:1});if(o)for(const a in i)!mq(a)&&s[a]==null&&delete i[a]};function rA(n,e,t,r,i=!1){if(lt(n)){n.forEach((d,g)=>rA(d,e&&(lt(e)?e[g]:e),t,r,i));return}if(HC(r)&&!i)return;const o=r.shapeFlag&4?IE(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=n,l=e&&e.r,f=a.refs===On?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==u&&(ri(l)?(f[l]=null,Ut(h,l)&&(h[l]=null)):Wo(l)&&(l.value=null)),yt(u))Ac(u,a,12,[s,f]);else{const d=ri(u),g=Wo(u);if(d||g){const v=()=>{if(n.f){const m=d?Ut(h,u)?h[u]:f[u]:u.value;i?lt(m)&&LM(m,o):lt(m)?m.includes(o)||m.push(o):d?(f[u]=[o],Ut(h,u)&&(h[u]=f[u])):(u.value=[o],n.k&&(f[n.k]=u.value))}else d?(f[u]=s,Ut(h,u)&&(h[u]=s)):g&&(u.value=s,n.k&&(f[n.k]=s))};s?(v.id=-1,Lo(v,t)):v()}}}const Lo=sle;function Rle(n){return Mle(n)}function Mle(n,e){const t=P7();t.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:a,createComment:u,setText:l,setElementText:f,parentNode:h,nextSibling:d,setScopeId:g=As,insertStaticContent:v}=n,m=(H,q,J,ne=null,ue=null,pe=null,xe=void 0,ve=null,ye=!!q.dynamicChildren)=>{if(H===q)return;H&&!qm(H,q)&&(ne=kf(H),pr(H,ue,pe,!0),H=null),q.patchFlag===-2&&(ye=!1,q.dynamicChildren=null);const{type:fe,ref:Te,shapeFlag:Qe}=q;switch(fe){case SE:y(H,q,J,ne);break;case py:b(H,q,J,ne);break;case Ck:H==null&&C(q,J,ne,xe);break;case Ns:W(H,q,J,ne,ue,pe,xe,ve,ye);break;default:Qe&1?k(H,q,J,ne,ue,pe,xe,ve,ye):Qe&6?z(H,q,J,ne,ue,pe,xe,ve,ye):(Qe&64||Qe&128)&&fe.process(H,q,J,ne,ue,pe,xe,ve,ye,Tf)}Te!=null&&ue&&rA(Te,H&&H.ref,pe,q||H,!q)},y=(H,q,J,ne)=>{if(H==null)r(q.el=a(q.children),J,ne);else{const ue=q.el=H.el;q.children!==H.children&&l(ue,q.children)}},b=(H,q,J,ne)=>{H==null?r(q.el=u(q.children||""),J,ne):q.el=H.el},C=(H,q,J,ne)=>{[H.el,H.anchor]=v(H.children,q,J,ne,H.el,H.anchor)},E=({el:H,anchor:q},J,ne)=>{let ue;for(;H&&H!==q;)ue=d(H),r(H,J,ne),H=ue;r(q,J,ne)},D=({el:H,anchor:q})=>{let J;for(;H&&H!==q;)J=d(H),i(H),H=J;i(q)},k=(H,q,J,ne,ue,pe,xe,ve,ye)=>{q.type==="svg"?xe="svg":q.type==="math"&&(xe="mathml"),H==null?I(q,J,ne,ue,pe,xe,ve,ye):M(H,q,ue,pe,xe,ve,ye)},I=(H,q,J,ne,ue,pe,xe,ve)=>{let ye,fe;const{props:Te,shapeFlag:Qe,transition:Ke,dirs:it}=H;if(ye=H.el=s(H.type,pe,Te&&Te.is,Te),Qe&8?f(ye,H.children):Qe&16&&A(H.children,ye,null,ne,ue,wk(H,pe),xe,ve),it&&Xf(H,null,ne,"created"),T(ye,H,H.scopeId,xe,ne),Te){for(const zt in Te)zt!=="value"&&!T_(zt)&&o(ye,zt,null,Te[zt],pe,H.children,ne,ue,zo);"value"in Te&&o(ye,"value",null,Te.value,pe),(fe=Te.onVnodeBeforeMount)&&za(fe,ne,H)}it&&Xf(H,null,ne,"beforeMount");const Me=Ple(ue,Ke);Me&&Ke.beforeEnter(ye),r(ye,q,J),((fe=Te&&Te.onVnodeMounted)||Me||it)&&Lo(()=>{fe&&za(fe,ne,H),Me&&Ke.enter(ye),it&&Xf(H,null,ne,"mounted")},ue)},T=(H,q,J,ne,ue)=>{if(J&&g(H,J),ne)for(let pe=0;pe<ne.length;pe++)g(H,ne[pe]);if(ue){let pe=ue.subTree;if(q===pe){const xe=ue.vnode;T(H,xe,xe.scopeId,xe.slotScopeIds,ue.parent)}}},A=(H,q,J,ne,ue,pe,xe,ve,ye=0)=>{for(let fe=ye;fe<H.length;fe++){const Te=H[fe]=ve?uc(H[fe]):Za(H[fe]);m(null,Te,q,J,ne,ue,pe,xe,ve)}},M=(H,q,J,ne,ue,pe,xe)=>{const ve=q.el=H.el;let{patchFlag:ye,dynamicChildren:fe,dirs:Te}=q;ye|=H.patchFlag&16;const Qe=H.props||On,Ke=q.props||On;let it;if(J&&Qf(J,!1),(it=Ke.onVnodeBeforeUpdate)&&za(it,J,q,H),Te&&Xf(q,H,J,"beforeUpdate"),J&&Qf(J,!0),fe?L(H.dynamicChildren,fe,ve,J,ne,wk(q,ue),pe):xe||ae(H,q,ve,null,J,ne,wk(q,ue),pe,!1),ye>0){if(ye&16)F(ve,q,Qe,Ke,J,ne,ue);else if(ye&2&&Qe.class!==Ke.class&&o(ve,"class",null,Ke.class,ue),ye&4&&o(ve,"style",Qe.style,Ke.style,ue),ye&8){const Me=q.dynamicProps;for(let zt=0;zt<Me.length;zt++){const Qt=Me[zt],tr=Qe[Qt],Co=Ke[Qt];(Co!==tr||Qt==="value")&&o(ve,Qt,tr,Co,ue,H.children,J,ne,zo)}}ye&1&&H.children!==q.children&&f(ve,q.children)}else!xe&&fe==null&&F(ve,q,Qe,Ke,J,ne,ue);((it=Ke.onVnodeUpdated)||Te)&&Lo(()=>{it&&za(it,J,q,H),Te&&Xf(q,H,J,"updated")},ne)},L=(H,q,J,ne,ue,pe,xe)=>{for(let ve=0;ve<q.length;ve++){const ye=H[ve],fe=q[ve],Te=ye.el&&(ye.type===Ns||!qm(ye,fe)||ye.shapeFlag&70)?h(ye.el):J;m(ye,fe,Te,null,ne,ue,pe,xe,!0)}},F=(H,q,J,ne,ue,pe,xe)=>{if(J!==ne){if(J!==On)for(const ve in J)!T_(ve)&&!(ve in ne)&&o(H,ve,J[ve],null,xe,q.children,ue,pe,zo);for(const ve in ne){if(T_(ve))continue;const ye=ne[ve],fe=J[ve];ye!==fe&&ve!=="value"&&o(H,ve,fe,ye,xe,q.children,ue,pe,zo)}"value"in ne&&o(H,"value",J.value,ne.value,xe)}},W=(H,q,J,ne,ue,pe,xe,ve,ye)=>{const fe=q.el=H?H.el:a(""),Te=q.anchor=H?H.anchor:a("");let{patchFlag:Qe,dynamicChildren:Ke,slotScopeIds:it}=q;it&&(ve=ve?ve.concat(it):it),H==null?(r(fe,J,ne),r(Te,J,ne),A(q.children||[],J,Te,ue,pe,xe,ve,ye)):Qe>0&&Qe&64&&Ke&&H.dynamicChildren?(L(H.dynamicChildren,Ke,J,ue,pe,xe,ve),(q.key!=null||ue&&q===ue.subTree)&&bq(H,q,!0)):ae(H,q,J,Te,ue,pe,xe,ve,ye)},z=(H,q,J,ne,ue,pe,xe,ve,ye)=>{q.slotScopeIds=ve,H==null?q.shapeFlag&512?ue.ctx.activate(q,J,ne,xe,ye):K(q,J,ne,ue,pe,xe,ye):X(H,q,ye)},K=(H,q,J,ne,ue,pe,xe)=>{const ve=H.component=Kle(H,ne,ue);if(uq(H)&&(ve.ctx.renderer=Tf),Gle(ve),ve.asyncDep){if(ue&&ue.registerDep(ve,se),!H.el){const ye=ve.subTree=ko(py);b(null,ye,q,J)}}else se(ve,H,q,J,ue,pe,xe)},X=(H,q,J)=>{const ne=q.component=H.component;if(nle(H,q,J))if(ne.asyncDep&&!ne.asyncResolved){we(ne,q,J);return}else ne.next=q,Kue(ne.update),ne.effect.dirty=!0,ne.update();else q.el=H.el,ne.vnode=q},se=(H,q,J,ne,ue,pe,xe)=>{const ve=()=>{if(H.isMounted){let{next:Te,bu:Qe,u:Ke,parent:it,vnode:Me}=H;{const In=wq(H);if(In){Te&&(Te.el=Me.el,we(H,Te,xe)),In.asyncDep.then(()=>{H.isUnmounted||ve()});return}}let zt=Te,Qt;Qf(H,!1),Te?(Te.el=Me.el,we(H,Te,xe)):Te=Me,Qe&&WC(Qe),(Qt=Te.props&&Te.props.onVnodeBeforeUpdate)&&za(Qt,it,Te,Me),Qf(H,!0);const tr=_k(H),Co=H.subTree;H.subTree=tr,m(Co,tr,h(Co.el),kf(Co),H,ue,pe),Te.el=tr.el,zt===null&&rle(H,tr.el),Ke&&Lo(Ke,ue),(Qt=Te.props&&Te.props.onVnodeUpdated)&&Lo(()=>za(Qt,it,Te,Me),ue)}else{let Te;const{el:Qe,props:Ke}=q,{bm:it,m:Me,parent:zt}=H,Qt=HC(q);if(Qf(H,!1),it&&WC(it),!Qt&&(Te=Ke&&Ke.onVnodeBeforeMount)&&za(Te,zt,q),Qf(H,!0),Qe&&Nb){const tr=()=>{H.subTree=_k(H),Nb(Qe,H.subTree,H,ue,null)};Qt?q.type.__asyncLoader().then(()=>!H.isUnmounted&&tr()):tr()}else{const tr=H.subTree=_k(H);m(null,tr,J,ne,H,ue,pe),q.el=tr.el}if(Me&&Lo(Me,ue),!Qt&&(Te=Ke&&Ke.onVnodeMounted)){const tr=q;Lo(()=>za(Te,zt,tr),ue)}(q.shapeFlag&256||zt&&HC(zt.vnode)&&zt.vnode.shapeFlag&256)&&H.a&&Lo(H.a,ue),H.isMounted=!0,q=J=ne=null}},ye=H.effect=new AM(ve,As,()=>HM(fe),H.scope),fe=H.update=()=>{ye.dirty&&ye.run()};fe.id=H.uid,Qf(H,!0),fe()},we=(H,q,J)=>{q.component=H;const ne=H.vnode.props;H.vnode=q,H.next=null,Tle(H,q.props,ne,J),Ole(H,q.children,J),af(),uH(H),uf()},ae=(H,q,J,ne,ue,pe,xe,ve,ye=!1)=>{const fe=H&&H.children,Te=H?H.shapeFlag:0,Qe=q.children,{patchFlag:Ke,shapeFlag:it}=q;if(Ke>0){if(Ke&128){At(fe,Qe,J,ne,ue,pe,xe,ve,ye);return}else if(Ke&256){Dt(fe,Qe,J,ne,ue,pe,xe,ve,ye);return}}it&8?(Te&16&&zo(fe,ue,pe),Qe!==fe&&f(J,Qe)):Te&16?it&16?At(fe,Qe,J,ne,ue,pe,xe,ve,ye):zo(fe,ue,pe,!0):(Te&8&&f(J,""),it&16&&A(Qe,J,ne,ue,pe,xe,ve,ye))},Dt=(H,q,J,ne,ue,pe,xe,ve,ye)=>{H=H||vg,q=q||vg;const fe=H.length,Te=q.length,Qe=Math.min(fe,Te);let Ke;for(Ke=0;Ke<Qe;Ke++){const it=q[Ke]=ye?uc(q[Ke]):Za(q[Ke]);m(H[Ke],it,J,null,ue,pe,xe,ve,ye)}fe>Te?zo(H,ue,pe,!0,!1,Qe):A(q,J,ne,ue,pe,xe,ve,ye,Qe)},At=(H,q,J,ne,ue,pe,xe,ve,ye)=>{let fe=0;const Te=q.length;let Qe=H.length-1,Ke=Te-1;for(;fe<=Qe&&fe<=Ke;){const it=H[fe],Me=q[fe]=ye?uc(q[fe]):Za(q[fe]);if(qm(it,Me))m(it,Me,J,null,ue,pe,xe,ve,ye);else break;fe++}for(;fe<=Qe&&fe<=Ke;){const it=H[Qe],Me=q[Ke]=ye?uc(q[Ke]):Za(q[Ke]);if(qm(it,Me))m(it,Me,J,null,ue,pe,xe,ve,ye);else break;Qe--,Ke--}if(fe>Qe){if(fe<=Ke){const it=Ke+1,Me=it<Te?q[it].el:ne;for(;fe<=Ke;)m(null,q[fe]=ye?uc(q[fe]):Za(q[fe]),J,Me,ue,pe,xe,ve,ye),fe++}}else if(fe>Ke)for(;fe<=Qe;)pr(H[fe],ue,pe,!0),fe++;else{const it=fe,Me=fe,zt=new Map;for(fe=Me;fe<=Ke;fe++){const Ei=q[fe]=ye?uc(q[fe]):Za(q[fe]);Ei.key!=null&&zt.set(Ei.key,fe)}let Qt,tr=0;const Co=Ke-Me+1;let In=!1,am=0;const qo=new Array(Co);for(fe=0;fe<Co;fe++)qo[fe]=0;for(fe=it;fe<=Qe;fe++){const Ei=H[fe];if(tr>=Co){pr(Ei,ue,pe,!0);continue}let kn;if(Ei.key!=null)kn=zt.get(Ei.key);else for(Qt=Me;Qt<=Ke;Qt++)if(qo[Qt-Me]===0&&qm(Ei,q[Qt])){kn=Qt;break}kn===void 0?pr(Ei,ue,pe,!0):(qo[kn-Me]=fe+1,kn>=am?am=kn:In=!0,m(Ei,q[kn],J,null,ue,pe,xe,ve,ye),tr++)}const Gs=In?Fle(qo):vg;for(Qt=Gs.length-1,fe=Co-1;fe>=0;fe--){const Ei=Me+fe,kn=q[Ei],um=Ei+1<Te?q[Ei+1].el:ne;qo[fe]===0?m(null,kn,J,um,ue,pe,xe,ve,ye):In&&(Qt<0||fe!==Gs[Qt]?$n(kn,J,um,2):Qt--)}}},$n=(H,q,J,ne,ue=null)=>{const{el:pe,type:xe,transition:ve,children:ye,shapeFlag:fe}=H;if(fe&6){$n(H.component.subTree,q,J,ne);return}if(fe&128){H.suspense.move(q,J,ne);return}if(fe&64){xe.move(H,q,J,Tf);return}if(xe===Ns){r(pe,q,J);for(let Qe=0;Qe<ye.length;Qe++)$n(ye[Qe],q,J,ne);r(H.anchor,q,J);return}if(xe===Ck){E(H,q,J);return}if(ne!==2&&fe&1&&ve)if(ne===0)ve.beforeEnter(pe),r(pe,q,J),Lo(()=>ve.enter(pe),ue);else{const{leave:Qe,delayLeave:Ke,afterLeave:it}=ve,Me=()=>r(pe,q,J),zt=()=>{Qe(pe,()=>{Me(),it&&it()})};Ke?Ke(pe,Me,zt):zt()}else r(pe,q,J)},pr=(H,q,J,ne=!1,ue=!1)=>{const{type:pe,props:xe,ref:ve,children:ye,dynamicChildren:fe,shapeFlag:Te,patchFlag:Qe,dirs:Ke}=H;if(ve!=null&&rA(ve,null,J,H,!0),Te&256){q.ctx.deactivate(H);return}const it=Te&1&&Ke,Me=!HC(H);let zt;if(Me&&(zt=xe&&xe.onVnodeBeforeUnmount)&&za(zt,q,H),Te&6)Hx(H.component,J,ne);else{if(Te&128){H.suspense.unmount(J,ne);return}it&&Xf(H,null,q,"beforeUnmount"),Te&64?H.type.remove(H,q,J,ue,Tf,ne):fe&&(pe!==Ns||Qe>0&&Qe&64)?zo(fe,q,J,!1,!0):(pe===Ns&&Qe&384||!ue&&Te&16)&&zo(ye,q,J),ne&&yn(H)}(Me&&(zt=xe&&xe.onVnodeUnmounted)||it)&&Lo(()=>{zt&&za(zt,q,H),it&&Xf(H,null,q,"unmounted")},J)},yn=H=>{const{type:q,el:J,anchor:ne,transition:ue}=H;if(q===Ns){Si(J,ne);return}if(q===Ck){D(H);return}const pe=()=>{i(J),ue&&!ue.persisted&&ue.afterLeave&&ue.afterLeave()};if(H.shapeFlag&1&&ue&&!ue.persisted){const{leave:xe,delayLeave:ve}=ue,ye=()=>xe(J,pe);ve?ve(H.el,pe,ye):ye()}else pe()},Si=(H,q)=>{let J;for(;H!==q;)J=d(H),i(H),H=J;i(q)},Hx=(H,q,J)=>{const{bum:ne,scope:ue,update:pe,subTree:xe,um:ve}=H;ne&&WC(ne),ue.stop(),pe&&(pe.active=!1,pr(xe,H,q,J)),ve&&Lo(ve,q),Lo(()=>{H.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},zo=(H,q,J,ne=!1,ue=!1,pe=0)=>{for(let xe=pe;xe<H.length;xe++)pr(H[xe],q,J,ne,ue)},kf=H=>H.shapeFlag&6?kf(H.component.subTree):H.shapeFlag&128?H.suspense.next():d(H.anchor||H.el);let bn=!1;const Tb=(H,q,J)=>{H==null?q._vnode&&pr(q._vnode,null,null,!0):m(q._vnode||null,H,q,null,null,null,J),bn||(bn=!0,uH(),rq(),bn=!1),q._vnode=H},Tf={p:m,um:pr,m:$n,r:yn,mt:K,mc:A,pc:ae,pbc:L,n:kf,o:n};let Nf,Nb;return{render:Tb,hydrate:Nf,createApp:Dle(Tb,Nf)}}function wk({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Qf({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function Ple(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function bq(n,e,t=!1){const r=n.children,i=e.children;if(lt(r)&&lt(i))for(let o=0;o<r.length;o++){const s=r[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=uc(i[o]),a.el=s.el),t||bq(s,a)),a.type===SE&&(a.el=s.el)}}function Fle(n){const e=n.slice(),t=[0];let r,i,o,s,a;const u=n.length;for(r=0;r<u;r++){const l=n[r];if(l!==0){if(i=t[t.length-1],n[i]<l){e[r]=i,t.push(r);continue}for(o=0,s=t.length-1;o<s;)a=o+s>>1,n[t[a]]<l?o=a+1:s=a;l<n[t[o]]&&(o>0&&(e[r]=t[o-1]),t[o]=r)}}for(o=t.length,s=t[o-1];o-- >0;)t[o]=s,s=e[s];return t}function wq(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:wq(e)}const Ble=n=>n.__isTeleport,Ns=Symbol.for("v-fgt"),SE=Symbol.for("v-txt"),py=Symbol.for("v-cmt"),Ck=Symbol.for("v-stc"),R_=[];let _a=null;function lf(n=!1){R_.push(_a=n?null:[])}function Wle(){R_.pop(),_a=R_[R_.length-1]||null}let gy=1;function yH(n){gy+=n}function Cq(n){return n.dynamicChildren=gy>0?_a||vg:null,Wle(),gy>0&&_a&&_a.push(n),n}function Td(n,e,t,r,i,o){return Cq(be(n,e,t,r,i,o,!0))}function Vle(n,e,t,r,i){return Cq(ko(n,e,t,r,i,!0))}function Hle(n){return n?n.__v_isVNode===!0:!1}function qm(n,e){return n.type===e.type&&n.key===e.key}const Sq=({key:n})=>n??null,jC=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?ri(n)||Wo(n)||yt(n)?{i:as,r:n,k:e,f:!!t}:n:null);function be(n,e=null,t=null,r=0,i=null,o=n===Ns?0:1,s=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Sq(e),ref:e&&jC(e),scopeId:wE,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:as};return a?(KM(u,t),o&128&&n.normalize(u)):t&&(u.shapeFlag|=ri(t)?8:16),gy>0&&!s&&_a&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&_a.push(u),u}const ko=Ule;function Ule(n,e=null,t=null,r=0,i=null,o=!1){if((!n||n===ile)&&(n=py),Hle(n)){const a=Og(n,e,!0);return t&&KM(a,t),gy>0&&!o&&_a&&(a.shapeFlag&6?_a[_a.indexOf(n)]=a:_a.push(a)),a.patchFlag|=-2,a}if(Qle(n)&&(n=n.__vccOpts),e){e=jle(e);let{class:a,style:u}=e;a&&!ri(a)&&(e.class=NM(a)),Jn(u)&&(X7(u)&&!lt(u)&&(u=ni({},u)),e.style=TM(u))}const s=ri(n)?1:ole(n)?128:Ble(n)?64:Jn(n)?4:yt(n)?2:0;return be(n,e,t,r,i,s,o,!0)}function jle(n){return n?X7(n)||pq(n)?ni({},n):n:null}function Og(n,e,t=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:a,transition:u}=n,l=e?zle(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:n.type,props:l,key:l&&Sq(l),ref:e&&e.ref?t&&o?lt(o)?o.concat(jC(e)):[o,jC(e)]:jC(e):o,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Ns?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:u,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Og(n.ssContent),ssFallback:n.ssFallback&&Og(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return u&&r&&(f.transition=u.clone(f)),f}function ml(n=" ",e=0){return ko(SE,null,n,e)}function Za(n){return n==null||typeof n=="boolean"?ko(py):lt(n)?ko(Ns,null,n.slice()):typeof n=="object"?uc(n):ko(SE,null,String(n))}function uc(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Og(n)}function KM(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(lt(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),KM(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!pq(e)?e._ctx=as:i===3&&as&&(as.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else yt(e)?(e={default:e,_ctx:as},t=32):(e=String(e),r&64?(t=16,e=[ml(e)]):t=8);n.children=e,n.shapeFlag|=t}function zle(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=NM([e.class,r.class]));else if(i==="style")e.style=TM([e.style,r.style]);else if(gE(i)){const o=e[i],s=r[i];s&&o!==s&&!(lt(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=r[i])}return e}function za(n,e,t,r=null){Ca(n,e,7,[t,r])}const qle=fq();let $le=0;function Kle(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||qle,o={uid:$le++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new gue(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vq(r,i),emitsOptions:oq(r,i),emit:null,emitted:null,propsDefaults:On,inheritAttrs:r.inheritAttrs,ctx:On,data:On,props:On,attrs:On,slots:On,refs:On,setupState:On,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Zue.bind(null,o),n.ce&&n.ce(o),o}let co=null,C1,iA;{const n=P7(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};C1=e("__VUE_INSTANCE_SETTERS__",t=>co=t),iA=e("__VUE_SSR_SETTERS__",t=>EE=t)}const I0=n=>{const e=co;return C1(n),n.scope.on(),()=>{n.scope.off(),C1(e)}},bH=()=>{co&&co.scope.off(),C1(null)};function Eq(n){return n.vnode.shapeFlag&4}let EE=!1;function Gle(n,e=!1){e&&iA(e);const{props:t,children:r}=n.vnode,i=Eq(n);kle(n,t,i,e),Ale(n,r);const o=i?Yle(n,e):void 0;return e&&iA(!1),o}function Yle(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,ble);const{setup:r}=t;if(r){const i=n.setupContext=r.length>1?Xle(n):null,o=I0(n);af();const s=Ac(r,n,0,[n.props,i]);if(uf(),o(),N7(s)){if(s.then(bH,bH),e)return s.then(a=>{wH(n,a,e)}).catch(a=>{yE(a,n,0)});n.asyncDep=s}else wH(n,s,e)}else Iq(n,e)}function wH(n,e,t){yt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Jn(e)&&(n.setupState=eq(e)),Iq(n,t)}let CH;function Iq(n,e,t){const r=n.type;if(!n.render){if(!e&&CH&&!r.render){const i=r.template||qM(n).template;if(i){const{isCustomElement:o,compilerOptions:s}=n.appContext.config,{delimiters:a,compilerOptions:u}=r,l=ni(ni({isCustomElement:o,delimiters:a},s),u);r.render=CH(i,l)}}n.render=r.render||As}{const i=I0(n);af();try{wle(n)}finally{uf(),i()}}}const Zle={get(n,e){return Bo(n,"get",""),n[e]}};function Xle(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,Zle),slots:n.slots,emit:n.emit,expose:e}}function IE(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(eq(Bue(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in A_)return A_[t](n)},has(e,t){return t in e||t in A_}}))}function Qle(n){return yt(n)&&"__vccOpts"in n}const Jle=(n,e)=>Wue(n,e,EE),ece="3.4.27";/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const tce="http://www.w3.org/2000/svg",nce="http://www.w3.org/1998/Math/MathML",lc=typeof document<"u"?document:null,SH=lc&&lc.createElement("template"),rce={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?lc.createElementNS(tce,n):e==="mathml"?lc.createElementNS(nce,n):lc.createElement(n,t?{is:t}:void 0);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>lc.createTextNode(n),createComment:n=>lc.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>lc.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,o){const s=t?t.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===o||!(i=i.nextSibling)););else{SH.innerHTML=r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n;const a=SH.content;if(r==="svg"||r==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,t)}return[s?s.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},ice=Symbol("_vtc");function oce(n,e,t){const r=n[ice];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const EH=Symbol("_vod"),sce=Symbol("_vsh"),ace=Symbol(""),uce=/(^|;)\s*display\s*:/;function lce(n,e,t){const r=n.style,i=ri(t);let o=!1;if(t&&!i){if(e)if(ri(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();t[a]==null&&zC(r,a,"")}else for(const s in e)t[s]==null&&zC(r,s,"");for(const s in t)s==="display"&&(o=!0),zC(r,s,t[s])}else if(i){if(e!==t){const s=r[ace];s&&(t+=";"+s),r.cssText=t,o=uce.test(t)}}else e&&n.removeAttribute("style");EH in n&&(n[EH]=o?r.display:"",n[sce]&&(r.display="none"))}const IH=/\s*!important$/;function zC(n,e,t){if(lt(t))t.forEach(r=>zC(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=cce(n,e);IH.test(t)?n.setProperty(Ev(r),t.replace(IH,""),"important"):n[r]=t}}const xH=["Webkit","Moz","ms"],Sk={};function cce(n,e){const t=Sk[e];if(t)return t;let r=Ag(e);if(r!=="filter"&&r in n)return Sk[e]=r;r=R7(r);for(let i=0;i<xH.length;i++){const o=xH[i]+r;if(o in n)return Sk[e]=o}return e}const DH="http://www.w3.org/1999/xlink";function fce(n,e,t,r,i){if(r&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(DH,e.slice(6,e.length)):n.setAttributeNS(DH,e,t);else{const o=due(e);t==null||o&&!F7(t)?n.removeAttribute(e):n.setAttribute(e,o?"":t)}}function hce(n,e,t,r,i,o,s){if(e==="innerHTML"||e==="textContent"){r&&s(r,i,o),n[e]=t??"";return}const a=n.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?n.getAttribute("value")||"":n.value,f=t??"";(l!==f||!("_value"in n))&&(n.value=f),t==null&&n.removeAttribute(e),n._value=t;return}let u=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=F7(t):t==null&&l==="string"?(t="",u=!0):l==="number"&&(t=0,u=!0)}try{n[e]=t}catch{}u&&n.removeAttribute(e)}function Kp(n,e,t,r){n.addEventListener(e,t,r)}function dce(n,e,t,r){n.removeEventListener(e,t,r)}const LH=Symbol("_vei");function pce(n,e,t,r,i=null){const o=n[LH]||(n[LH]={}),s=o[e];if(r&&s)s.value=r;else{const[a,u]=gce(e);if(r){const l=o[e]=_ce(r,i);Kp(n,a,l,u)}else s&&(dce(n,a,s,u),o[e]=void 0)}}const kH=/(?:Once|Passive|Capture)$/;function gce(n){let e;if(kH.test(n)){e={};let r;for(;r=n.match(kH);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Ev(n.slice(2)),e]}let Ek=0;const vce=Promise.resolve(),mce=()=>Ek||(vce.then(()=>Ek=0),Ek=Date.now());function _ce(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Ca(yce(r,t.value),e,5,[r])};return t.value=n,t.attached=mce(),t}function yce(n,e){if(lt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const TH=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,bce=(n,e,t,r,i,o,s,a,u)=>{const l=i==="svg";e==="class"?oce(n,r,l):e==="style"?lce(n,t,r):gE(e)?DM(e)||pce(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):wce(n,e,r,l))?hce(n,e,r,o,s,a,u):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),fce(n,e,r,l))};function wce(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&TH(e)&&yt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return TH(e)&&ri(t)?!1:e in n}const NH=n=>{const e=n.props["onUpdate:modelValue"]||!1;return lt(e)?t=>WC(e,t):e};function Cce(n){n.target.composing=!0}function AH(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ik=Symbol("_assign"),OH={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[Ik]=NH(i);const o=r||i.props&&i.props.type==="number";Kp(n,e?"change":"input",s=>{if(s.target.composing)return;let a=n.value;t&&(a=a.trim()),o&&(a=KN(a)),n[Ik](a)}),t&&Kp(n,"change",()=>{n.value=n.value.trim()}),e||(Kp(n,"compositionstart",Cce),Kp(n,"compositionend",AH),Kp(n,"change",AH))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:r,number:i}},o){if(n[Ik]=NH(o),n.composing)return;const s=(i||n.type==="number")&&!/^0\d/.test(n.value)?KN(n.value):n.value,a=e??"";s!==a&&(document.activeElement===n&&n.type!=="range"&&(t||r&&n.value.trim()===a)||(n.value=a))}},Sce=ni({patchProp:bce},rce);let RH;function Ece(){return RH||(RH=Rle(Sce))}const Ice=(...n)=>{const e=Ece().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=Dce(r);if(!i)return;const o=e._component;!yt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=t(i,!1,xce(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function xce(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Dce(n){return ri(n)?document.querySelector(n):n}const MH={};function Lce(n){let e=MH[n];if(e)return e;e=MH[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);e.push(r)}for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function Rg(n,e){typeof e!="string"&&(e=Rg.defaultChars);const t=Lce(e);return n.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let o=0,s=r.length;o<s;o+=3){const a=parseInt(r.slice(o+1,o+3),16);if(a<128){i+=t[a];continue}if((a&224)===192&&o+3<s){const u=parseInt(r.slice(o+4,o+6),16);if((u&192)===128){const l=a<<6&1984|u&63;l<128?i+="":i+=String.fromCharCode(l),o+=3;continue}}if((a&240)===224&&o+6<s){const u=parseInt(r.slice(o+4,o+6),16),l=parseInt(r.slice(o+7,o+9),16);if((u&192)===128&&(l&192)===128){const f=a<<12&61440|u<<6&4032|l&63;f<2048||f>=55296&&f<=57343?i+="":i+=String.fromCharCode(f),o+=6;continue}}if((a&248)===240&&o+9<s){const u=parseInt(r.slice(o+4,o+6),16),l=parseInt(r.slice(o+7,o+9),16),f=parseInt(r.slice(o+10,o+12),16);if((u&192)===128&&(l&192)===128&&(f&192)===128){let h=a<<18&1835008|u<<12&258048|l<<6&4032|f&63;h<65536||h>1114111?i+="":(h-=65536,i+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),o+=9;continue}}i+=""}return i})}Rg.defaultChars=";/?:@&=+$,#";Rg.componentChars="";const PH={};function kce(n){let e=PH[n];if(e)return e;e=PH[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<n.length;t++)e[n.charCodeAt(t)]=n[t];return e}function x0(n,e,t){typeof e!="string"&&(t=e,e=x0.defaultChars),typeof t>"u"&&(t=!0);const r=kce(e);let i="";for(let o=0,s=n.length;o<s;o++){const a=n.charCodeAt(o);if(t&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(n.slice(o+1,o+3))){i+=n.slice(o,o+3),o+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){const u=n.charCodeAt(o+1);if(u>=56320&&u<=57343){i+=encodeURIComponent(n[o]+n[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(n[o])}return i}x0.defaultChars=";/?:@&=+$,-_.!~*'()#";x0.componentChars="-_.!~*'()";function GM(n){let e="";return e+=n.protocol||"",e+=n.slashes?"//":"",e+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?e+="["+n.hostname+"]":e+=n.hostname||"",e+=n.port?":"+n.port:"",e+=n.pathname||"",e+=n.search||"",e+=n.hash||"",e}function S1(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Tce=/^([a-z0-9.+-]+:)/i,Nce=/:[0-9]*$/,Ace=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Oce=["<",">",'"',"`"," ","\r",`
`,"	"],Rce=["{","}","|","\\","^","`"].concat(Oce),Mce=["'"].concat(Rce),FH=["%","/","?",";","#"].concat(Mce),BH=["/","?","#"],Pce=255,WH=/^[+a-z0-9A-Z_-]{0,63}$/,Fce=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,VH={javascript:!0,"javascript:":!0},HH={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function YM(n,e){if(n&&n instanceof S1)return n;const t=new S1;return t.parse(n,e),t}S1.prototype.parse=function(n,e){let t,r,i,o=n;if(o=o.trim(),!e&&n.split("#").length===1){const l=Ace.exec(o);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}let s=Tce.exec(o);if(s&&(s=s[0],t=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&VH[s])&&(o=o.substr(2),this.slashes=!0)),!VH[s]&&(i||s&&!HH[s])){let l=-1;for(let v=0;v<BH.length;v++)r=o.indexOf(BH[v]),r!==-1&&(l===-1||r<l)&&(l=r);let f,h;l===-1?h=o.lastIndexOf("@"):h=o.lastIndexOf("@",l),h!==-1&&(f=o.slice(0,h),o=o.slice(h+1),this.auth=f),l=-1;for(let v=0;v<FH.length;v++)r=o.indexOf(FH[v]),r!==-1&&(l===-1||r<l)&&(l=r);l===-1&&(l=o.length),o[l-1]===":"&&l--;const d=o.slice(0,l);o=o.slice(l),this.parseHost(d),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let m=0,y=v.length;m<y;m++){const b=v[m];if(b&&!b.match(WH)){let C="";for(let E=0,D=b.length;E<D;E++)b.charCodeAt(E)>127?C+="x":C+=b[E];if(!C.match(WH)){const E=v.slice(0,m),D=v.slice(m+1),k=b.match(Fce);k&&(E.push(k[1]),D.unshift(k[2])),D.length&&(o=D.join(".")+o),this.hostname=E.join(".");break}}}}this.hostname.length>Pce&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));const u=o.indexOf("?");return u!==-1&&(this.search=o.substr(u),o=o.slice(0,u)),o&&(this.pathname=o),HH[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};S1.prototype.parseHost=function(n){let e=Nce.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const Bce=Object.freeze(Object.defineProperty({__proto__:null,decode:Rg,encode:x0,format:GM,parse:YM},Symbol.toStringTag,{value:"Module"})),xq=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Dq=/[\0-\x1F\x7F-\x9F]/,Wce=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,ZM=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Lq=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,kq=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Vce=Object.freeze(Object.defineProperty({__proto__:null,Any:xq,Cc:Dq,Cf:Wce,P:ZM,S:Lq,Z:kq},Symbol.toStringTag,{value:"Module"})),Hce=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(n=>n.charCodeAt(0))),Uce=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(n=>n.charCodeAt(0)));var xk;const jce=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),zce=(xk=String.fromCodePoint)!==null&&xk!==void 0?xk:function(n){let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e};function qce(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=jce.get(n))!==null&&e!==void 0?e:n}var Xr;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(Xr||(Xr={}));const $ce=32;var wc;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(wc||(wc={}));function oA(n){return n>=Xr.ZERO&&n<=Xr.NINE}function Kce(n){return n>=Xr.UPPER_A&&n<=Xr.UPPER_F||n>=Xr.LOWER_A&&n<=Xr.LOWER_F}function Gce(n){return n>=Xr.UPPER_A&&n<=Xr.UPPER_Z||n>=Xr.LOWER_A&&n<=Xr.LOWER_Z||oA(n)}function Yce(n){return n===Xr.EQUALS||Gce(n)}var jr;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(jr||(jr={}));var gc;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(gc||(gc={}));class Zce{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=jr.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=gc.Strict}startEntity(e){this.decodeMode=e,this.state=jr.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case jr.EntityStart:return e.charCodeAt(t)===Xr.NUM?(this.state=jr.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=jr.NamedEntity,this.stateNamedEntity(e,t));case jr.NumericStart:return this.stateNumericStart(e,t);case jr.NumericDecimal:return this.stateNumericDecimal(e,t);case jr.NumericHex:return this.stateNumericHex(e,t);case jr.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|$ce)===Xr.LOWER_X?(this.state=jr.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=jr.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,i){if(t!==r){const o=r-t;this.result=this.result*Math.pow(i,o)+parseInt(e.substr(t,o),i),this.consumed+=o}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(oA(i)||Kce(i))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(oA(i))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Xr.SEMI)this.consumed+=1;else if(this.decodeMode===gc.Strict)return 0;return this.emitCodePoint(qce(this.result),this.consumed),this.errors&&(e!==Xr.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&wc.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const s=e.charCodeAt(t);if(this.treeIndex=Xce(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===gc.Attribute&&(o===0||Yce(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&wc.VALUE_LENGTH)>>14,o!==0){if(s===Xr.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==gc.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,i=(r[t]&wc.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~wc.VALUE_LENGTH:i[e+1],r),t===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case jr.NamedEntity:return this.result!==0&&(this.decodeMode!==gc.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case jr.NumericDecimal:return this.emitNumericEntity(0,2);case jr.NumericHex:return this.emitNumericEntity(0,3);case jr.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case jr.EntityStart:return 0}}}function Tq(n){let e="";const t=new Zce(n,r=>e+=zce(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(s,a),t.startEntity(o);const l=t.write(i,a+1);if(l<0){s=a+t.end();break}s=a+l,a=l===0?s+1:s}const u=e+i.slice(s);return e="",u}}function Xce(n,e,t,r){const i=(e&wc.BRANCH_LENGTH)>>7,o=e&wc.JUMP_TABLE;if(i===0)return o!==0&&r===o?t:-1;if(o){const u=r-o;return u<0||u>=i?-1:n[t+u]-1}let s=t,a=s+i-1;for(;s<=a;){const u=s+a>>>1,l=n[u];if(l<r)s=u+1;else if(l>r)a=u-1;else return n[u+i]}return-1}const Qce=Tq(Hce);Tq(Uce);function Nq(n,e=gc.Legacy){return Qce(n,e)}function Jce(n){return Object.prototype.toString.call(n)}function XM(n){return Jce(n)==="[object String]"}const efe=Object.prototype.hasOwnProperty;function tfe(n,e){return efe.call(n,e)}function xE(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){n[r]=t[r]})}}),n}function Aq(n,e,t){return[].concat(n.slice(0,e),t,n.slice(e+1))}function QM(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function E1(n){if(n>65535){n-=65536;const e=55296+(n>>10),t=56320+(n&1023);return String.fromCharCode(e,t)}return String.fromCharCode(n)}const Oq=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,nfe=/&([a-z#][a-z0-9]{1,31});/gi,rfe=new RegExp(Oq.source+"|"+nfe.source,"gi"),ife=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function ofe(n,e){if(e.charCodeAt(0)===35&&ife.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return QM(r)?E1(r):n}const t=Nq(n);return t!==n?t:n}function sfe(n){return n.indexOf("\\")<0?n:n.replace(Oq,"$1")}function Mg(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(rfe,function(e,t,r){return t||ofe(e,r)})}const afe=/[&<>"]/,ufe=/[&<>"]/g,lfe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function cfe(n){return lfe[n]}function Yc(n){return afe.test(n)?n.replace(ufe,cfe):n}const ffe=/[.?*+^$[\]\\(){}|-]/g;function hfe(n){return n.replace(ffe,"\\$&")}function Dn(n){switch(n){case 9:case 32:return!0}return!1}function vy(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function my(n){return ZM.test(n)||Lq.test(n)}function _y(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function DE(n){return n=n.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(n=n.replace(//g,"")),n.toLowerCase().toUpperCase()}const dfe={mdurl:Bce,ucmicro:Vce},pfe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Aq,assign:xE,escapeHtml:Yc,escapeRE:hfe,fromCodePoint:E1,has:tfe,isMdAsciiPunct:_y,isPunctChar:my,isSpace:Dn,isString:XM,isValidEntityCode:QM,isWhiteSpace:vy,lib:dfe,normalizeReference:DE,unescapeAll:Mg,unescapeMd:sfe},Symbol.toStringTag,{value:"Module"}));function gfe(n,e,t){let r,i,o,s;const a=n.posMax,u=n.pos;for(n.pos=e+1,r=1;n.pos<a;){if(o=n.src.charCodeAt(n.pos),o===93&&(r--,r===0)){i=!0;break}if(s=n.pos,n.md.inline.skipToken(n),o===91){if(s===n.pos-1)r++;else if(t)return n.pos=u,-1}}let l=-1;return i&&(l=n.pos),n.pos=u,l}function vfe(n,e,t){let r,i=e;const o={ok:!1,pos:0,str:""};if(n.charCodeAt(i)===60){for(i++;i<t;){if(r=n.charCodeAt(i),r===10||r===60)return o;if(r===62)return o.pos=i+1,o.str=Mg(n.slice(e+1,i)),o.ok=!0,o;if(r===92&&i+1<t){i+=2;continue}i++}return o}let s=0;for(;i<t&&(r=n.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<t){if(n.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(s++,s>32))return o;if(r===41){if(s===0)break;s--}i++}return e===i||s!==0||(o.str=Mg(n.slice(e,i)),o.pos=i,o.ok=!0),o}function mfe(n,e,t,r){let i,o=e;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(o>=t)return s;let a=n.charCodeAt(o);if(a!==34&&a!==39&&a!==40)return s;e++,o++,a===40&&(a=41),s.marker=a}for(;o<t;){if(i=n.charCodeAt(o),i===s.marker)return s.pos=o+1,s.str+=Mg(n.slice(e,o)),s.ok=!0,s;if(i===40&&s.marker===41)return s;i===92&&o+1<t&&o++,o++}return s.can_continue=!0,s.str+=Mg(n.slice(e,o)),s}const _fe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:vfe,parseLinkLabel:gfe,parseLinkTitle:mfe},Symbol.toStringTag,{value:"Module"})),Du={};Du.code_inline=function(n,e,t,r,i){const o=n[e];return"<code"+i.renderAttrs(o)+">"+Yc(o.content)+"</code>"};Du.code_block=function(n,e,t,r,i){const o=n[e];return"<pre"+i.renderAttrs(o)+"><code>"+Yc(n[e].content)+`</code></pre>
`};Du.fence=function(n,e,t,r,i){const o=n[e],s=o.info?Mg(o.info).trim():"";let a="",u="";if(s){const f=s.split(/(\s+)/g);a=f[0],u=f.slice(2).join("")}let l;if(t.highlight?l=t.highlight(o.content,a,u)||Yc(o.content):l=Yc(o.content),l.indexOf("<pre")===0)return l+`
`;if(s){const f=o.attrIndex("class"),h=o.attrs?o.attrs.slice():[];f<0?h.push(["class",t.langPrefix+a]):(h[f]=h[f].slice(),h[f][1]+=" "+t.langPrefix+a);const d={attrs:h};return`<pre><code${i.renderAttrs(d)}>${l}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${l}</code></pre>
`};Du.image=function(n,e,t,r,i){const o=n[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,t,r),i.renderToken(n,e,t)};Du.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};Du.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};Du.text=function(n,e){return Yc(n[e].content)};Du.html_block=function(n,e){return n[e].content};Du.html_inline=function(n,e){return n[e].content};function xv(){this.rules=xE({},Du)}xv.prototype.renderAttrs=function(e){let t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+Yc(e.attrs[t][0])+'="'+Yc(e.attrs[t][1])+'"';return i};xv.prototype.renderToken=function(e,t,r){const i=e[t];let o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&t&&e[t-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&t+1<e.length)){const a=e[t+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};xv.prototype.renderInline=function(n,e,t){let r="";const i=this.rules;for(let o=0,s=n.length;o<s;o++){const a=n[o].type;typeof i[a]<"u"?r+=i[a](n,o,e,t,this):r+=this.renderToken(n,o,e)}return r};xv.prototype.renderInlineAsText=function(n,e,t){let r="";for(let i=0,o=n.length;i<o;i++)switch(n[i].type){case"text":r+=n[i].content;break;case"image":r+=this.renderInlineAsText(n[i].children,e,t);break;case"html_inline":case"html_block":r+=n[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};xv.prototype.render=function(n,e,t){let r="";const i=this.rules;for(let o=0,s=n.length;o<s;o++){const a=n[o].type;a==="inline"?r+=this.renderInline(n[o].children,e,t):typeof i[a]<"u"?r+=i[a](n,o,e,t,this):r+=this.renderToken(n,o,e,t)}return r};function Vo(){this.__rules__=[],this.__cache__=null}Vo.prototype.__find__=function(n){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};Vo.prototype.__compile__=function(){const n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||n.__cache__[t].push(r.fn))})})};Vo.prototype.at=function(n,e,t){const r=this.__find__(n),i=t||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Vo.prototype.before=function(n,e,t,r){const i=this.__find__(n),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};Vo.prototype.after=function(n,e,t,r){const i=this.__find__(n),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};Vo.prototype.push=function(n,e,t){const r=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Vo.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,t.push(r)},this),this.__cache__=null,t};Vo.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};Vo.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,t.push(r)},this),this.__cache__=null,t};Vo.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};function Aa(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Aa.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,i=t.length;r<i;r++)if(t[r][0]===e)return r;return-1};Aa.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Aa.prototype.attrSet=function(e,t){const r=this.attrIndex(e),i=[e,t];r<0?this.attrPush(i):this.attrs[r]=i};Aa.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r};Aa.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};function Rq(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}Rq.prototype.Token=Aa;const yfe=/\r\n?|\n/g,bfe=/\0/g;function wfe(n){let e;e=n.src.replace(yfe,`
`),e=e.replace(bfe,""),n.src=e}function Cfe(n){let e;n.inlineMode?(e=new n.Token("inline","",0),e.content=n.src,e.map=[0,1],e.children=[],n.tokens.push(e)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function Sfe(n){const e=n.tokens;for(let t=0,r=e.length;t<r;t++){const i=e[t];i.type==="inline"&&n.md.inline.parse(i.content,n.md,n.env,i.children)}}function Efe(n){return/^<a[>\s]/i.test(n)}function Ife(n){return/^<\/a\s*>/i.test(n)}function xfe(n){const e=n.tokens;if(n.md.options.linkify)for(let t=0,r=e.length;t<r;t++){if(e[t].type!=="inline"||!n.md.linkify.pretest(e[t].content))continue;let i=e[t].children,o=0;for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(Efe(a.content)&&o>0&&o--,Ife(a.content)&&o++),!(o>0)&&a.type==="text"&&n.md.linkify.test(a.content)){const u=a.content;let l=n.md.linkify.match(u);const f=[];let h=a.level,d=0;l.length>0&&l[0].index===0&&s>0&&i[s-1].type==="text_special"&&(l=l.slice(1));for(let g=0;g<l.length;g++){const v=l[g].url,m=n.md.normalizeLink(v);if(!n.md.validateLink(m))continue;let y=l[g].text;l[g].schema?l[g].schema==="mailto:"&&!/^mailto:/i.test(y)?y=n.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):y=n.md.normalizeLinkText(y):y=n.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,"");const b=l[g].index;if(b>d){const k=new n.Token("text","",0);k.content=u.slice(d,b),k.level=h,f.push(k)}const C=new n.Token("link_open","a",1);C.attrs=[["href",m]],C.level=h++,C.markup="linkify",C.info="auto",f.push(C);const E=new n.Token("text","",0);E.content=y,E.level=h,f.push(E);const D=new n.Token("link_close","a",-1);D.level=--h,D.markup="linkify",D.info="auto",f.push(D),d=l[g].lastIndex}if(d<u.length){const g=new n.Token("text","",0);g.content=u.slice(d),g.level=h,f.push(g)}e[t].children=i=Aq(i,s,f)}}}}const Mq=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Dfe=/\((c|tm|r)\)/i,Lfe=/\((c|tm|r)\)/ig,kfe={c:"",r:"",tm:""};function Tfe(n,e){return kfe[e.toLowerCase()]}function Nfe(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&(r.content=r.content.replace(Lfe,Tfe)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function Afe(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&Mq.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function Ofe(n){let e;if(n.md.options.typographer)for(e=n.tokens.length-1;e>=0;e--)n.tokens[e].type==="inline"&&(Dfe.test(n.tokens[e].content)&&Nfe(n.tokens[e].children),Mq.test(n.tokens[e].content)&&Afe(n.tokens[e].children))}const Rfe=/['"]/,UH=/['"]/g,jH="";function Ww(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function Mfe(n,e){let t;const r=[];for(let i=0;i<n.length;i++){const o=n[i],s=n[i].level;for(t=r.length-1;t>=0&&!(r[t].level<=s);t--);if(r.length=t+1,o.type!=="text")continue;let a=o.content,u=0,l=a.length;e:for(;u<l;){UH.lastIndex=u;const f=UH.exec(a);if(!f)break;let h=!0,d=!0;u=f.index+1;const g=f[0]==="'";let v=32;if(f.index-1>=0)v=a.charCodeAt(f.index-1);else for(t=i-1;t>=0&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t--)if(n[t].content){v=n[t].content.charCodeAt(n[t].content.length-1);break}let m=32;if(u<l)m=a.charCodeAt(u);else for(t=i+1;t<n.length&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t++)if(n[t].content){m=n[t].content.charCodeAt(0);break}const y=_y(v)||my(String.fromCharCode(v)),b=_y(m)||my(String.fromCharCode(m)),C=vy(v),E=vy(m);if(E?h=!1:b&&(C||y||(h=!1)),C?d=!1:y&&(E||b||(d=!1)),m===34&&f[0]==='"'&&v>=48&&v<=57&&(d=h=!1),h&&d&&(h=y,d=b),!h&&!d){g&&(o.content=Ww(o.content,f.index,jH));continue}if(d)for(t=r.length-1;t>=0;t--){let D=r[t];if(r[t].level<s)break;if(D.single===g&&r[t].level===s){D=r[t];let k,I;g?(k=e.md.options.quotes[2],I=e.md.options.quotes[3]):(k=e.md.options.quotes[0],I=e.md.options.quotes[1]),o.content=Ww(o.content,f.index,I),n[D.token].content=Ww(n[D.token].content,D.pos,k),u+=I.length-1,D.token===i&&(u+=k.length-1),a=o.content,l=a.length,r.length=t;continue e}}h?r.push({token:i,pos:f.index,single:g,level:s}):d&&g&&(o.content=Ww(o.content,f.index,jH))}}}function Pfe(n){if(n.md.options.typographer)for(let e=n.tokens.length-1;e>=0;e--)n.tokens[e].type!=="inline"||!Rfe.test(n.tokens[e].content)||Mfe(n.tokens[e].children,n)}function Ffe(n){let e,t;const r=n.tokens,i=r.length;for(let o=0;o<i;o++){if(r[o].type!=="inline")continue;const s=r[o].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=t=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==t&&(s[t]=s[e]),t++);e!==t&&(s.length=t)}}const Dk=[["normalize",wfe],["block",Cfe],["inline",Sfe],["linkify",xfe],["replacements",Ofe],["smartquotes",Pfe],["text_join",Ffe]];function JM(){this.ruler=new Vo;for(let n=0;n<Dk.length;n++)this.ruler.push(Dk[n][0],Dk[n][1])}JM.prototype.process=function(n){const e=this.ruler.getRules("");for(let t=0,r=e.length;t<r;t++)e[t](n)};JM.prototype.State=Rq;function Lu(n,e,t,r){this.src=n,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let o=0,s=0,a=0,u=0,l=i.length,f=!1;s<l;s++){const h=i.charCodeAt(s);if(!f)if(Dn(h)){a++,h===9?u+=4-u%4:u++;continue}else f=!0;(h===10||s===l-1)&&(h!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(u),this.bsCount.push(0),f=!1,a=0,u=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Lu.prototype.push=function(n,e,t){const r=new Aa(n,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};Lu.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Lu.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Lu.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const r=this.src.charCodeAt(e);if(!Dn(r))break}return e};Lu.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Dn(this.src.charCodeAt(--e)))return e+1;return e};Lu.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};Lu.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};Lu.prototype.getLines=function(e,t,r,i){if(e>=t)return"";const o=new Array(t-e);for(let s=0,a=e;a<t;a++,s++){let u=0;const l=this.bMarks[a];let f=l,h;for(a+1<t||i?h=this.eMarks[a]+1:h=this.eMarks[a];f<h&&u<r;){const d=this.src.charCodeAt(f);if(Dn(d))d===9?u+=4-(u+this.bsCount[a])%4:u++;else if(f-l<this.tShift[a])u++;else break;f++}u>r?o[s]=new Array(u-r+1).join(" ")+this.src.slice(f,h):o[s]=this.src.slice(f,h)}return o.join("")};Lu.prototype.Token=Aa;const Bfe=65536;function Lk(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];return n.src.slice(t,r)}function zH(n){const e=[],t=n.length;let r=0,i=n.charCodeAt(r),o=!1,s=0,a="";for(;r<t;)i===124&&(o?(a+=n.substring(s,r-1),s=r):(e.push(a+n.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=n.charCodeAt(r);return e.push(a+n.substring(s)),e}function Wfe(n,e,t,r){if(e+2>t)return!1;let i=e+1;if(n.sCount[i]<n.blkIndent||n.sCount[i]-n.blkIndent>=4)return!1;let o=n.bMarks[i]+n.tShift[i];if(o>=n.eMarks[i])return!1;const s=n.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=n.eMarks[i])return!1;const a=n.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!Dn(a)||s===45&&Dn(a))return!1;for(;o<n.eMarks[i];){const D=n.src.charCodeAt(o);if(D!==124&&D!==45&&D!==58&&!Dn(D))return!1;o++}let u=Lk(n,e+1),l=u.split("|");const f=[];for(let D=0;D<l.length;D++){const k=l[D].trim();if(!k){if(D===0||D===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?f.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?f.push("left"):f.push("")}if(u=Lk(n,e).trim(),u.indexOf("|")===-1||n.sCount[e]-n.blkIndent>=4)return!1;l=zH(u),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop();const h=l.length;if(h===0||h!==f.length)return!1;if(r)return!0;const d=n.parentType;n.parentType="table";const g=n.md.block.ruler.getRules("blockquote"),v=n.push("table_open","table",1),m=[e,0];v.map=m;const y=n.push("thead_open","thead",1);y.map=[e,e+1];const b=n.push("tr_open","tr",1);b.map=[e,e+1];for(let D=0;D<l.length;D++){const k=n.push("th_open","th",1);f[D]&&(k.attrs=[["style","text-align:"+f[D]]]);const I=n.push("inline","",0);I.content=l[D].trim(),I.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let C,E=0;for(i=e+2;i<t&&!(n.sCount[i]<n.blkIndent);i++){let D=!1;for(let I=0,T=g.length;I<T;I++)if(g[I](n,i,t,!0)){D=!0;break}if(D||(u=Lk(n,i).trim(),!u)||n.sCount[i]-n.blkIndent>=4||(l=zH(u),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop(),E+=h-l.length,E>Bfe))break;if(i===e+2){const I=n.push("tbody_open","tbody",1);I.map=C=[e+2,0]}const k=n.push("tr_open","tr",1);k.map=[i,i+1];for(let I=0;I<h;I++){const T=n.push("td_open","td",1);f[I]&&(T.attrs=[["style","text-align:"+f[I]]]);const A=n.push("inline","",0);A.content=l[I]?l[I].trim():"",A.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return C&&(n.push("tbody_close","tbody",-1),C[1]=i),n.push("table_close","table",-1),m[1]=i,n.parentType=d,n.line=i,!0}function Vfe(n,e,t){if(n.sCount[e]-n.blkIndent<4)return!1;let r=e+1,i=r;for(;r<t;){if(n.isEmpty(r)){r++;continue}if(n.sCount[r]-n.blkIndent>=4){r++,i=r;continue}break}n.line=i;const o=n.push("code_block","code",0);return o.content=n.getLines(e,i,4+n.blkIndent,!1)+`
`,o.map=[e,n.line],!0}function Hfe(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||i+3>o)return!1;const s=n.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=n.skipChars(i,s);let u=i-a;if(u<3)return!1;const l=n.src.slice(a,i),f=n.src.slice(i,o);if(s===96&&f.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=e,d=!1;for(;h++,!(h>=t||(i=a=n.bMarks[h]+n.tShift[h],o=n.eMarks[h],i<o&&n.sCount[h]<n.blkIndent));)if(n.src.charCodeAt(i)===s&&!(n.sCount[h]-n.blkIndent>=4)&&(i=n.skipChars(i,s),!(i-a<u)&&(i=n.skipSpaces(i),!(i<o)))){d=!0;break}u=n.sCount[e],n.line=h+(d?1:0);const g=n.push("fence","code",0);return g.info=f,g.content=n.getLines(e+1,h,u,!0),g.markup=l,g.map=[e,n.line],!0}function Ufe(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];const s=n.lineMax;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],u=[],l=[],f=[],h=n.md.block.ruler.getRules("blockquote"),d=n.parentType;n.parentType="blockquote";let g=!1,v;for(v=e;v<t;v++){const E=n.sCount[v]<n.blkIndent;if(i=n.bMarks[v]+n.tShift[v],o=n.eMarks[v],i>=o)break;if(n.src.charCodeAt(i++)===62&&!E){let k=n.sCount[v]+1,I,T;n.src.charCodeAt(i)===32?(i++,k++,T=!1,I=!0):n.src.charCodeAt(i)===9?(I=!0,(n.bsCount[v]+k)%4===3?(i++,k++,T=!1):T=!0):I=!1;let A=k;for(a.push(n.bMarks[v]),n.bMarks[v]=i;i<o;){const M=n.src.charCodeAt(i);if(Dn(M))M===9?A+=4-(A+n.bsCount[v]+(T?1:0))%4:A++;else break;i++}g=i>=o,u.push(n.bsCount[v]),n.bsCount[v]=n.sCount[v]+1+(I?1:0),l.push(n.sCount[v]),n.sCount[v]=A-k,f.push(n.tShift[v]),n.tShift[v]=i-n.bMarks[v];continue}if(g)break;let D=!1;for(let k=0,I=h.length;k<I;k++)if(h[k](n,v,t,!0)){D=!0;break}if(D){n.lineMax=v,n.blkIndent!==0&&(a.push(n.bMarks[v]),u.push(n.bsCount[v]),f.push(n.tShift[v]),l.push(n.sCount[v]),n.sCount[v]-=n.blkIndent);break}a.push(n.bMarks[v]),u.push(n.bsCount[v]),f.push(n.tShift[v]),l.push(n.sCount[v]),n.sCount[v]=-1}const m=n.blkIndent;n.blkIndent=0;const y=n.push("blockquote_open","blockquote",1);y.markup=">";const b=[e,0];y.map=b,n.md.block.tokenize(n,e,v);const C=n.push("blockquote_close","blockquote",-1);C.markup=">",n.lineMax=s,n.parentType=d,b[1]=n.line;for(let E=0;E<f.length;E++)n.bMarks[E+e]=a[E],n.tShift[E+e]=f[E],n.sCount[E+e]=l[E],n.bsCount[E+e]=u[E];return n.blkIndent=m,!0}function jfe(n,e,t,r){const i=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let o=n.bMarks[e]+n.tShift[e];const s=n.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){const l=n.src.charCodeAt(o++);if(l!==s&&!Dn(l))return!1;l===s&&a++}if(a<3)return!1;if(r)return!0;n.line=e+1;const u=n.push("hr","hr",0);return u.map=[e,n.line],u.markup=Array(a+1).join(String.fromCharCode(s)),!0}function qH(n,e){const t=n.eMarks[e];let r=n.bMarks[e]+n.tShift[e];const i=n.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<t){const o=n.src.charCodeAt(r);if(!Dn(o))return-1}return r}function $H(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];let i=t;if(i+1>=r)return-1;let o=n.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=r)return-1;if(o=n.src.charCodeAt(i++),o>=48&&o<=57){if(i-t>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<r&&(o=n.src.charCodeAt(i),!Dn(o))?-1:i}function zfe(n,e){const t=n.level+2;for(let r=e+2,i=n.tokens.length-2;r<i;r++)n.tokens[r].level===t&&n.tokens[r].type==="paragraph_open"&&(n.tokens[r+2].hidden=!0,n.tokens[r].hidden=!0,r+=2)}function qfe(n,e,t,r){let i,o,s,a,u=e,l=!0;if(n.sCount[u]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[u]-n.listIndent>=4&&n.sCount[u]<n.blkIndent)return!1;let f=!1;r&&n.parentType==="paragraph"&&n.sCount[u]>=n.blkIndent&&(f=!0);let h,d,g;if((g=$H(n,u))>=0){if(h=!0,s=n.bMarks[u]+n.tShift[u],d=Number(n.src.slice(s,g-1)),f&&d!==1)return!1}else if((g=qH(n,u))>=0)h=!1;else return!1;if(f&&n.skipSpaces(g)>=n.eMarks[u])return!1;if(r)return!0;const v=n.src.charCodeAt(g-1),m=n.tokens.length;h?(a=n.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=n.push("bullet_list_open","ul",1);const y=[u,0];a.map=y,a.markup=String.fromCharCode(v);let b=!1;const C=n.md.block.ruler.getRules("list"),E=n.parentType;for(n.parentType="list";u<t;){o=g,i=n.eMarks[u];const D=n.sCount[u]+g-(n.bMarks[u]+n.tShift[u]);let k=D;for(;o<i;){const X=n.src.charCodeAt(o);if(X===9)k+=4-(k+n.bsCount[u])%4;else if(X===32)k++;else break;o++}const I=o;let T;I>=i?T=1:T=k-D,T>4&&(T=1);const A=D+T;a=n.push("list_item_open","li",1),a.markup=String.fromCharCode(v);const M=[u,0];a.map=M,h&&(a.info=n.src.slice(s,g-1));const L=n.tight,F=n.tShift[u],W=n.sCount[u],z=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=A,n.tight=!0,n.tShift[u]=I-n.bMarks[u],n.sCount[u]=k,I>=i&&n.isEmpty(u+1)?n.line=Math.min(n.line+2,t):n.md.block.tokenize(n,u,t,!0),(!n.tight||b)&&(l=!1),b=n.line-u>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=z,n.tShift[u]=F,n.sCount[u]=W,n.tight=L,a=n.push("list_item_close","li",-1),a.markup=String.fromCharCode(v),u=n.line,M[1]=u,u>=t||n.sCount[u]<n.blkIndent||n.sCount[u]-n.blkIndent>=4)break;let K=!1;for(let X=0,se=C.length;X<se;X++)if(C[X](n,u,t,!0)){K=!0;break}if(K)break;if(h){if(g=$H(n,u),g<0)break;s=n.bMarks[u]+n.tShift[u]}else if(g=qH(n,u),g<0)break;if(v!==n.src.charCodeAt(g-1))break}return h?a=n.push("ordered_list_close","ol",-1):a=n.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(v),y[1]=u,n.line=u,n.parentType=E,l&&zfe(n,m),!0}function $fe(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e],s=e+1;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==91)return!1;function a(C){const E=n.lineMax;if(C>=E||n.isEmpty(C))return null;let D=!1;if(n.sCount[C]-n.blkIndent>3&&(D=!0),n.sCount[C]<0&&(D=!0),!D){const T=n.md.block.ruler.getRules("reference"),A=n.parentType;n.parentType="reference";let M=!1;for(let L=0,F=T.length;L<F;L++)if(T[L](n,C,E,!0)){M=!0;break}if(n.parentType=A,M)return null}const k=n.bMarks[C]+n.tShift[C],I=n.eMarks[C];return n.src.slice(k,I+1)}let u=n.src.slice(i,o+1);o=u.length;let l=-1;for(i=1;i<o;i++){const C=u.charCodeAt(i);if(C===91)return!1;if(C===93){l=i;break}else if(C===10){const E=a(s);E!==null&&(u+=E,o=u.length,s++)}else if(C===92&&(i++,i<o&&u.charCodeAt(i)===10)){const E=a(s);E!==null&&(u+=E,o=u.length,s++)}}if(l<0||u.charCodeAt(l+1)!==58)return!1;for(i=l+2;i<o;i++){const C=u.charCodeAt(i);if(C===10){const E=a(s);E!==null&&(u+=E,o=u.length,s++)}else if(!Dn(C))break}const f=n.md.helpers.parseLinkDestination(u,i,o);if(!f.ok)return!1;const h=n.md.normalizeLink(f.str);if(!n.md.validateLink(h))return!1;i=f.pos;const d=i,g=s,v=i;for(;i<o;i++){const C=u.charCodeAt(i);if(C===10){const E=a(s);E!==null&&(u+=E,o=u.length,s++)}else if(!Dn(C))break}let m=n.md.helpers.parseLinkTitle(u,i,o);for(;m.can_continue;){const C=a(s);if(C===null)break;u+=C,i=o,o=u.length,s++,m=n.md.helpers.parseLinkTitle(u,i,o,m)}let y;for(i<o&&v!==i&&m.ok?(y=m.str,i=m.pos):(y="",i=d,s=g);i<o;){const C=u.charCodeAt(i);if(!Dn(C))break;i++}if(i<o&&u.charCodeAt(i)!==10&&y)for(y="",i=d,s=g;i<o;){const C=u.charCodeAt(i);if(!Dn(C))break;i++}if(i<o&&u.charCodeAt(i)!==10)return!1;const b=DE(u.slice(1,l));return b?(r||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[b]>"u"&&(n.env.references[b]={title:y,href:h}),n.line=s),!0):!1}const Kfe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Gfe="[a-zA-Z_:][a-zA-Z0-9:._-]*",Yfe="[^\"'=<>`\\x00-\\x20]+",Zfe="'[^']*'",Xfe='"[^"]*"',Qfe="(?:"+Yfe+"|"+Zfe+"|"+Xfe+")",Jfe="(?:\\s+"+Gfe+"(?:\\s*=\\s*"+Qfe+")?)",Pq="<[A-Za-z][A-Za-z0-9\\-]*"+Jfe+"*\\s*\\/?>",Fq="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",ehe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",the="<[?][\\s\\S]*?[?]>",nhe="<![A-Za-z][^>]*>",rhe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",ihe=new RegExp("^(?:"+Pq+"|"+Fq+"|"+ehe+"|"+the+"|"+nhe+"|"+rhe+")"),ohe=new RegExp("^(?:"+Pq+"|"+Fq+")"),xp=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Kfe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(ohe.source+"\\s*$"),/^$/,!1]];function she(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(i)!==60)return!1;let s=n.src.slice(i,o),a=0;for(;a<xp.length&&!xp[a][0].test(s);a++);if(a===xp.length)return!1;if(r)return xp[a][2];let u=e+1;if(!xp[a][1].test(s)){for(;u<t&&!(n.sCount[u]<n.blkIndent);u++)if(i=n.bMarks[u]+n.tShift[u],o=n.eMarks[u],s=n.src.slice(i,o),xp[a][1].test(s)){s.length!==0&&u++;break}}n.line=u;const l=n.push("html_block","",0);return l.map=[e,u],l.content=n.getLines(e,u,n.blkIndent,!0),!0}function ahe(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let s=n.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=n.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=n.src.charCodeAt(++i);if(a>6||i<o&&!Dn(s))return!1;if(r)return!0;o=n.skipSpacesBack(o,i);const u=n.skipCharsBack(o,35,i);u>i&&Dn(n.src.charCodeAt(u-1))&&(o=u),n.line=e+1;const l=n.push("heading_open","h"+String(a),1);l.markup="########".slice(0,a),l.map=[e,n.line];const f=n.push("inline","",0);f.content=n.src.slice(i,o).trim(),f.map=[e,n.line],f.children=[];const h=n.push("heading_close","h"+String(a),-1);return h.markup="########".slice(0,a),!0}function uhe(n,e,t){const r=n.md.block.ruler.getRules("paragraph");if(n.sCount[e]-n.blkIndent>=4)return!1;const i=n.parentType;n.parentType="paragraph";let o=0,s,a=e+1;for(;a<t&&!n.isEmpty(a);a++){if(n.sCount[a]-n.blkIndent>3)continue;if(n.sCount[a]>=n.blkIndent){let g=n.bMarks[a]+n.tShift[a];const v=n.eMarks[a];if(g<v&&(s=n.src.charCodeAt(g),(s===45||s===61)&&(g=n.skipChars(g,s),g=n.skipSpaces(g),g>=v))){o=s===61?1:2;break}}if(n.sCount[a]<0)continue;let d=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](n,a,t,!0)){d=!0;break}if(d)break}if(!o)return!1;const u=n.getLines(e,a,n.blkIndent,!1).trim();n.line=a+1;const l=n.push("heading_open","h"+String(o),1);l.markup=String.fromCharCode(s),l.map=[e,n.line];const f=n.push("inline","",0);f.content=u,f.map=[e,n.line-1],f.children=[];const h=n.push("heading_close","h"+String(o),-1);return h.markup=String.fromCharCode(s),n.parentType=i,!0}function lhe(n,e,t){const r=n.md.block.ruler.getRules("paragraph"),i=n.parentType;let o=e+1;for(n.parentType="paragraph";o<t&&!n.isEmpty(o);o++){if(n.sCount[o]-n.blkIndent>3||n.sCount[o]<0)continue;let l=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](n,o,t,!0)){l=!0;break}if(l)break}const s=n.getLines(e,o,n.blkIndent,!1).trim();n.line=o;const a=n.push("paragraph_open","p",1);a.map=[e,n.line];const u=n.push("inline","",0);return u.content=s,u.map=[e,n.line],u.children=[],n.push("paragraph_close","p",-1),n.parentType=i,!0}const Vw=[["table",Wfe,["paragraph","reference"]],["code",Vfe],["fence",Hfe,["paragraph","reference","blockquote","list"]],["blockquote",Ufe,["paragraph","reference","blockquote","list"]],["hr",jfe,["paragraph","reference","blockquote","list"]],["list",qfe,["paragraph","reference","blockquote"]],["reference",$fe],["html_block",she,["paragraph","reference","blockquote"]],["heading",ahe,["paragraph","reference","blockquote"]],["lheading",uhe],["paragraph",lhe]];function LE(){this.ruler=new Vo;for(let n=0;n<Vw.length;n++)this.ruler.push(Vw[n][0],Vw[n][1],{alt:(Vw[n][2]||[]).slice()})}LE.prototype.tokenize=function(n,e,t){const r=this.ruler.getRules(""),i=r.length,o=n.md.options.maxNesting;let s=e,a=!1;for(;s<t&&(n.line=s=n.skipEmptyLines(s),!(s>=t||n.sCount[s]<n.blkIndent));){if(n.level>=o){n.line=t;break}const u=n.line;let l=!1;for(let f=0;f<i;f++)if(l=r[f](n,s,t,!1),l){if(u>=n.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");n.tight=!a,n.isEmpty(n.line-1)&&(a=!0),s=n.line,s<t&&n.isEmpty(s)&&(a=!0,s++,n.line=s)}};LE.prototype.parse=function(n,e,t,r){if(!n)return;const i=new this.State(n,e,t,r);this.tokenize(i,i.line,i.lineMax)};LE.prototype.State=Lu;function D0(n,e,t,r){this.src=n,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}D0.prototype.pushPending=function(){const n=new Aa("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};D0.prototype.push=function(n,e,t){this.pending&&this.pushPending();const r=new Aa(n,e,t);let i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};D0.prototype.scanDelims=function(n,e){const t=this.posMax,r=this.src.charCodeAt(n),i=n>0?this.src.charCodeAt(n-1):32;let o=n;for(;o<t&&this.src.charCodeAt(o)===r;)o++;const s=o-n,a=o<t?this.src.charCodeAt(o):32,u=_y(i)||my(String.fromCharCode(i)),l=_y(a)||my(String.fromCharCode(a)),f=vy(i),h=vy(a),d=!h&&(!l||f||u),g=!f&&(!u||h||l);return{can_open:d&&(e||!g||u),can_close:g&&(e||!d||l),length:s}};D0.prototype.Token=Aa;function che(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function fhe(n,e){let t=n.pos;for(;t<n.posMax&&!che(n.src.charCodeAt(t));)t++;return t===n.pos?!1:(e||(n.pending+=n.src.slice(n.pos,t)),n.pos=t,!0)}const hhe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function dhe(n,e){if(!n.md.options.linkify||n.linkLevel>0)return!1;const t=n.pos,r=n.posMax;if(t+3>r||n.src.charCodeAt(t)!==58||n.src.charCodeAt(t+1)!==47||n.src.charCodeAt(t+2)!==47)return!1;const i=n.pending.match(hhe);if(!i)return!1;const o=i[1],s=n.md.linkify.matchAtStart(n.src.slice(t-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");const u=n.md.normalizeLink(a);if(!n.md.validateLink(u))return!1;if(!e){n.pending=n.pending.slice(0,-o.length);const l=n.push("link_open","a",1);l.attrs=[["href",u]],l.markup="linkify",l.info="auto";const f=n.push("text","",0);f.content=n.md.normalizeLinkText(a);const h=n.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return n.pos+=a.length-o.length,!0}function phe(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==10)return!1;const r=n.pending.length-1,i=n.posMax;if(!e)if(r>=0&&n.pending.charCodeAt(r)===32)if(r>=1&&n.pending.charCodeAt(r-1)===32){let o=r-1;for(;o>=1&&n.pending.charCodeAt(o-1)===32;)o--;n.pending=n.pending.slice(0,o),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(t++;t<i&&Dn(n.src.charCodeAt(t));)t++;return n.pos=t,!0}const eP=[];for(let n=0;n<256;n++)eP.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){eP[n.charCodeAt(0)]=1});function ghe(n,e){let t=n.pos;const r=n.posMax;if(n.src.charCodeAt(t)!==92||(t++,t>=r))return!1;let i=n.src.charCodeAt(t);if(i===10){for(e||n.push("hardbreak","br",0),t++;t<r&&(i=n.src.charCodeAt(t),!!Dn(i));)t++;return n.pos=t,!0}let o=n.src[t];if(i>=55296&&i<=56319&&t+1<r){const a=n.src.charCodeAt(t+1);a>=56320&&a<=57343&&(o+=n.src[t+1],t++)}const s="\\"+o;if(!e){const a=n.push("text_special","",0);i<256&&eP[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return n.pos=t+1,!0}function vhe(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==96)return!1;const i=t;t++;const o=n.posMax;for(;t<o&&n.src.charCodeAt(t)===96;)t++;const s=n.src.slice(i,t),a=s.length;if(n.backticksScanned&&(n.backticks[a]||0)<=i)return e||(n.pending+=s),n.pos+=a,!0;let u=t,l;for(;(l=n.src.indexOf("`",u))!==-1;){for(u=l+1;u<o&&n.src.charCodeAt(u)===96;)u++;const f=u-l;if(f===a){if(!e){const h=n.push("code_inline","code",0);h.markup=s,h.content=n.src.slice(t,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=u,!0}n.backticks[f]=l}return n.backticksScanned=!0,e||(n.pending+=s),n.pos+=a,!0}function mhe(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==126)return!1;const i=n.scanDelims(n.pos,!0);let o=i.length;const s=String.fromCharCode(r);if(o<2)return!1;let a;o%2&&(a=n.push("text","",0),a.content=s,o--);for(let u=0;u<o;u+=2)a=n.push("text","",0),a.content=s+s,n.delimiters.push({marker:r,length:0,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return n.pos+=i.length,!0}function KH(n,e){let t;const r=[],i=e.length;for(let o=0;o<i;o++){const s=e[o];if(s.marker!==126||s.end===-1)continue;const a=e[s.end];t=n.tokens[s.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=n.tokens[a.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",n.tokens[a.token-1].type==="text"&&n.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const o=r.pop();let s=o+1;for(;s<n.tokens.length&&n.tokens[s].type==="s_close";)s++;s--,o!==s&&(t=n.tokens[s],n.tokens[s]=n.tokens[o],n.tokens[o]=t)}}function _he(n){const e=n.tokens_meta,t=n.tokens_meta.length;KH(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&KH(n,e[r].delimiters)}const Bq={tokenize:mhe,postProcess:_he};function yhe(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==95&&r!==42)return!1;const i=n.scanDelims(n.pos,r===42);for(let o=0;o<i.length;o++){const s=n.push("text","",0);s.content=String.fromCharCode(r),n.delimiters.push({marker:r,length:i.length,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return n.pos+=i.length,!0}function GH(n,e){const t=e.length;for(let r=t-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const o=e[i.end],s=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),u=n.tokens[i.token];u.type=s?"strong_open":"em_open",u.tag=s?"strong":"em",u.nesting=1,u.markup=s?a+a:a,u.content="";const l=n.tokens[o.token];l.type=s?"strong_close":"em_close",l.tag=s?"strong":"em",l.nesting=-1,l.markup=s?a+a:a,l.content="",s&&(n.tokens[e[r-1].token].content="",n.tokens[e[i.end+1].token].content="",r--)}}function bhe(n){const e=n.tokens_meta,t=n.tokens_meta.length;GH(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&GH(n,e[r].delimiters)}const Wq={tokenize:yhe,postProcess:bhe};function whe(n,e){let t,r,i,o,s="",a="",u=n.pos,l=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;const f=n.pos,h=n.posMax,d=n.pos+1,g=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&n.src.charCodeAt(v)===40){for(l=!1,v++;v<h&&(t=n.src.charCodeAt(v),!(!Dn(t)&&t!==10));v++);if(v>=h)return!1;if(u=v,i=n.md.helpers.parseLinkDestination(n.src,v,n.posMax),i.ok){for(s=n.md.normalizeLink(i.str),n.md.validateLink(s)?v=i.pos:s="",u=v;v<h&&(t=n.src.charCodeAt(v),!(!Dn(t)&&t!==10));v++);if(i=n.md.helpers.parseLinkTitle(n.src,v,n.posMax),v<h&&u!==v&&i.ok)for(a=i.str,v=i.pos;v<h&&(t=n.src.charCodeAt(v),!(!Dn(t)&&t!==10));v++);}(v>=h||n.src.charCodeAt(v)!==41)&&(l=!0),v++}if(l){if(typeof n.env.references>"u")return!1;if(v<h&&n.src.charCodeAt(v)===91?(u=v+1,v=n.md.helpers.parseLinkLabel(n,v),v>=0?r=n.src.slice(u,v++):v=g+1):v=g+1,r||(r=n.src.slice(d,g)),o=n.env.references[DE(r)],!o)return n.pos=f,!1;s=o.href,a=o.title}if(!e){n.pos=d,n.posMax=g;const m=n.push("link_open","a",1),y=[["href",s]];m.attrs=y,a&&y.push(["title",a]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=v,n.posMax=h,!0}function Che(n,e){let t,r,i,o,s,a,u,l,f="";const h=n.pos,d=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;const g=n.pos+2,v=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(v<0)return!1;if(o=v+1,o<d&&n.src.charCodeAt(o)===40){for(o++;o<d&&(t=n.src.charCodeAt(o),!(!Dn(t)&&t!==10));o++);if(o>=d)return!1;for(l=o,a=n.md.helpers.parseLinkDestination(n.src,o,n.posMax),a.ok&&(f=n.md.normalizeLink(a.str),n.md.validateLink(f)?o=a.pos:f=""),l=o;o<d&&(t=n.src.charCodeAt(o),!(!Dn(t)&&t!==10));o++);if(a=n.md.helpers.parseLinkTitle(n.src,o,n.posMax),o<d&&l!==o&&a.ok)for(u=a.str,o=a.pos;o<d&&(t=n.src.charCodeAt(o),!(!Dn(t)&&t!==10));o++);else u="";if(o>=d||n.src.charCodeAt(o)!==41)return n.pos=h,!1;o++}else{if(typeof n.env.references>"u")return!1;if(o<d&&n.src.charCodeAt(o)===91?(l=o+1,o=n.md.helpers.parseLinkLabel(n,o),o>=0?i=n.src.slice(l,o++):o=v+1):o=v+1,i||(i=n.src.slice(g,v)),s=n.env.references[DE(i)],!s)return n.pos=h,!1;f=s.href,u=s.title}if(!e){r=n.src.slice(g,v);const m=[];n.md.inline.parse(r,n.md,n.env,m);const y=n.push("image","img",0),b=[["src",f],["alt",""]];y.attrs=b,y.children=m,y.content=r,u&&b.push(["title",u])}return n.pos=o,n.posMax=d,!0}const She=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Ehe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function Ihe(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==60)return!1;const r=n.pos,i=n.posMax;for(;;){if(++t>=i)return!1;const s=n.src.charCodeAt(t);if(s===60)return!1;if(s===62)break}const o=n.src.slice(r+1,t);if(Ehe.test(o)){const s=n.md.normalizeLink(o);if(!n.md.validateLink(s))return!1;if(!e){const a=n.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const u=n.push("text","",0);u.content=n.md.normalizeLinkText(o);const l=n.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return n.pos+=o.length+2,!0}if(She.test(o)){const s=n.md.normalizeLink("mailto:"+o);if(!n.md.validateLink(s))return!1;if(!e){const a=n.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const u=n.push("text","",0);u.content=n.md.normalizeLinkText(o);const l=n.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return n.pos+=o.length+2,!0}return!1}function xhe(n){return/^<a[>\s]/i.test(n)}function Dhe(n){return/^<\/a\s*>/i.test(n)}function Lhe(n){const e=n|32;return e>=97&&e<=122}function khe(n,e){if(!n.md.options.html)return!1;const t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==60||r+2>=t)return!1;const i=n.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!Lhe(i))return!1;const o=n.src.slice(r).match(ihe);if(!o)return!1;if(!e){const s=n.push("html_inline","",0);s.content=o[0],xhe(s.content)&&n.linkLevel++,Dhe(s.content)&&n.linkLevel--}return n.pos+=o[0].length,!0}const The=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Nhe=/^&([a-z][a-z0-9]{1,31});/i;function Ahe(n,e){const t=n.pos,r=n.posMax;if(n.src.charCodeAt(t)!==38||t+1>=r)return!1;if(n.src.charCodeAt(t+1)===35){const o=n.src.slice(t).match(The);if(o){if(!e){const s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=n.push("text_special","",0);a.content=QM(s)?E1(s):E1(65533),a.markup=o[0],a.info="entity"}return n.pos+=o[0].length,!0}}else{const o=n.src.slice(t).match(Nhe);if(o){const s=Nq(o[0]);if(s!==o[0]){if(!e){const a=n.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return n.pos+=o[0].length,!0}}}return!1}function YH(n){const e={},t=n.length;if(!t)return;let r=0,i=-2;const o=[];for(let s=0;s<t;s++){const a=n[s];if(o.push(0),(n[r].marker!==a.marker||i!==a.token-1)&&(r=s),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const u=e[a.marker][(a.open?3:0)+a.length%3];let l=r-o[r]-1,f=l;for(;l>u;l-=o[l]+1){const h=n[l];if(h.marker===a.marker&&h.open&&h.end<0){let d=!1;if((h.close||a.open)&&(h.length+a.length)%3===0&&(h.length%3!==0||a.length%3!==0)&&(d=!0),!d){const g=l>0&&!n[l-1].open?o[l-1]+1:0;o[s]=s-l+g,o[l]=g,a.open=!1,h.end=s,h.close=!1,f=-1,i=-2;break}}}f!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=f)}}function Ohe(n){const e=n.tokens_meta,t=n.tokens_meta.length;YH(n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&YH(e[r].delimiters)}function Rhe(n){let e,t,r=0;const i=n.tokens,o=n.tokens.length;for(e=t=0;e<o;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<o&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==t&&(i[t]=i[e]),t++);e!==t&&(i.length=t)}const kk=[["text",fhe],["linkify",dhe],["newline",phe],["escape",ghe],["backticks",vhe],["strikethrough",Bq.tokenize],["emphasis",Wq.tokenize],["link",whe],["image",Che],["autolink",Ihe],["html_inline",khe],["entity",Ahe]],Tk=[["balance_pairs",Ohe],["strikethrough",Bq.postProcess],["emphasis",Wq.postProcess],["fragments_join",Rhe]];function L0(){this.ruler=new Vo;for(let n=0;n<kk.length;n++)this.ruler.push(kk[n][0],kk[n][1]);this.ruler2=new Vo;for(let n=0;n<Tk.length;n++)this.ruler2.push(Tk[n][0],Tk[n][1])}L0.prototype.skipToken=function(n){const e=n.pos,t=this.ruler.getRules(""),r=t.length,i=n.md.options.maxNesting,o=n.cache;if(typeof o[e]<"u"){n.pos=o[e];return}let s=!1;if(n.level<i){for(let a=0;a<r;a++)if(n.level++,s=t[a](n,!0),n.level--,s){if(e>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;s||n.pos++,o[e]=n.pos};L0.prototype.tokenize=function(n){const e=this.ruler.getRules(""),t=e.length,r=n.posMax,i=n.md.options.maxNesting;for(;n.pos<r;){const o=n.pos;let s=!1;if(n.level<i){for(let a=0;a<t;a++)if(s=e[a](n,!1),s){if(o>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(n.pos>=r)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};L0.prototype.parse=function(n,e,t,r){const i=new this.State(n,e,t,r);this.tokenize(i);const o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};L0.prototype.State=D0;function Mhe(n){const e={};n=n||{},e.src_Any=xq.source,e.src_Cc=Dq.source,e.src_Z=kq.source,e.src_P=ZM.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function sA(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function kE(n){return Object.prototype.toString.call(n)}function Phe(n){return kE(n)==="[object String]"}function Fhe(n){return kE(n)==="[object Object]"}function Bhe(n){return kE(n)==="[object RegExp]"}function ZH(n){return kE(n)==="[object Function]"}function Whe(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Vq={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Vhe(n){return Object.keys(n||{}).reduce(function(e,t){return e||Vq.hasOwnProperty(t)},!1)}const Hhe={"http:":{validate:function(n,e,t){const r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){const r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){const r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},Uhe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",jhe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function zhe(n){n.__index__=-1,n.__text_cache__=""}function qhe(n){return function(e,t){const r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function XH(){return function(n,e){e.normalize(n)}}function I1(n){const e=n.re=Mhe(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(Uhe),t.push(e.src_xn),e.src_tlds=t.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];n.__compiled__={};function o(a,u){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+u)}Object.keys(n.__schemas__).forEach(function(a){const u=n.__schemas__[a];if(u===null)return;const l={validate:null,link:null};if(n.__compiled__[a]=l,Fhe(u)){Bhe(u.validate)?l.validate=qhe(u.validate):ZH(u.validate)?l.validate=u.validate:o(a,u),ZH(u.normalize)?l.normalize=u.normalize:u.normalize?o(a,u):l.normalize=XH();return}if(Phe(u)){i.push(a);return}o(a,u)}),i.forEach(function(a){n.__compiled__[n.__schemas__[a]]&&(n.__compiled__[a].validate=n.__compiled__[n.__schemas__[a]].validate,n.__compiled__[a].normalize=n.__compiled__[n.__schemas__[a]].normalize)}),n.__compiled__[""]={validate:null,normalize:XH()};const s=Object.keys(n.__compiled__).filter(function(a){return a.length>0&&n.__compiled__[a]}).map(Whe).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),zhe(n)}function $he(n,e){const t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function aA(n,e){const t=new $he(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function ps(n,e){if(!(this instanceof ps))return new ps(n,e);e||Vhe(n)&&(e=n,n={}),this.__opts__=sA({},Vq,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=sA({},Hhe,n),this.__compiled__={},this.__tlds__=jhe,this.__tlds_replaced__=!1,this.re={},I1(this)}ps.prototype.add=function(e,t){return this.__schemas__[e]=t,I1(this),this};ps.prototype.set=function(e){return this.__opts__=sA(this.__opts__,e),this};ps.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,i,o,s,a,u,l,f;if(this.re.schema_test.test(e)){for(u=this.re.schema_search,u.lastIndex=0;(t=u.exec(e))!==null;)if(o=this.testSchemaAt(e,t[2],u.lastIndex),o){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=e.indexOf("@"),f>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};ps.prototype.pretest=function(e){return this.re.pretest.test(e)};ps.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};ps.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(aA(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)t.push(aA(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};ps.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,aA(this,0)):null};ps.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),I1(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,I1(this),this)};ps.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};ps.prototype.onCompile=function(){};const yg=2147483647,eu=36,tP=1,yy=26,Khe=38,Ghe=700,Hq=72,Uq=128,jq="-",Yhe=/^xn--/,Zhe=/[^\0-\x7F]/,Xhe=/[\x2E\u3002\uFF0E\uFF61]/g,Qhe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Nk=eu-tP,tu=Math.floor,Ak=String.fromCharCode;function cc(n){throw new RangeError(Qhe[n])}function Jhe(n,e){const t=[];let r=n.length;for(;r--;)t[r]=e(n[r]);return t}function zq(n,e){const t=n.split("@");let r="";t.length>1&&(r=t[0]+"@",n=t[1]),n=n.replace(Xhe,".");const i=n.split("."),o=Jhe(i,e).join(".");return r+o}function qq(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const o=n.charCodeAt(t++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}const ede=n=>String.fromCodePoint(...n),tde=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:eu},QH=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},$q=function(n,e,t){let r=0;for(n=t?tu(n/Ghe):n>>1,n+=tu(n/e);n>Nk*yy>>1;r+=eu)n=tu(n/Nk);return tu(r+(Nk+1)*n/(n+Khe))},Kq=function(n){const e=[],t=n.length;let r=0,i=Uq,o=Hq,s=n.lastIndexOf(jq);s<0&&(s=0);for(let a=0;a<s;++a)n.charCodeAt(a)>=128&&cc("not-basic"),e.push(n.charCodeAt(a));for(let a=s>0?s+1:0;a<t;){const u=r;for(let f=1,h=eu;;h+=eu){a>=t&&cc("invalid-input");const d=tde(n.charCodeAt(a++));d>=eu&&cc("invalid-input"),d>tu((yg-r)/f)&&cc("overflow"),r+=d*f;const g=h<=o?tP:h>=o+yy?yy:h-o;if(d<g)break;const v=eu-g;f>tu(yg/v)&&cc("overflow"),f*=v}const l=e.length+1;o=$q(r-u,l,u==0),tu(r/l)>yg-i&&cc("overflow"),i+=tu(r/l),r%=l,e.splice(r++,0,i)}return String.fromCodePoint(...e)},Gq=function(n){const e=[];n=qq(n);const t=n.length;let r=Uq,i=0,o=Hq;for(const u of n)u<128&&e.push(Ak(u));const s=e.length;let a=s;for(s&&e.push(jq);a<t;){let u=yg;for(const f of n)f>=r&&f<u&&(u=f);const l=a+1;u-r>tu((yg-i)/l)&&cc("overflow"),i+=(u-r)*l,r=u;for(const f of n)if(f<r&&++i>yg&&cc("overflow"),f===r){let h=i;for(let d=eu;;d+=eu){const g=d<=o?tP:d>=o+yy?yy:d-o;if(h<g)break;const v=h-g,m=eu-g;e.push(Ak(QH(g+v%m,0))),h=tu(v/m)}e.push(Ak(QH(h,0))),o=$q(i,l,a===s),i=0,++a}++i,++r}return e.join("")},nde=function(n){return zq(n,function(e){return Yhe.test(e)?Kq(e.slice(4).toLowerCase()):e})},rde=function(n){return zq(n,function(e){return Zhe.test(e)?"xn--"+Gq(e):e})},Yq={version:"2.3.1",ucs2:{decode:qq,encode:ede},decode:Kq,encode:Gq,toASCII:rde,toUnicode:nde},ide={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},ode={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},sde={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},ade={default:ide,zero:ode,commonmark:sde},ude=/^(vbscript|javascript|file|data):/,lde=/^data:image\/(gif|png|jpeg|webp);/;function cde(n){const e=n.trim().toLowerCase();return ude.test(e)?lde.test(e):!0}const Zq=["http:","https:","mailto:"];function fde(n){const e=YM(n,!0);if(e.hostname&&(!e.protocol||Zq.indexOf(e.protocol)>=0))try{e.hostname=Yq.toASCII(e.hostname)}catch{}return x0(GM(e))}function hde(n){const e=YM(n,!0);if(e.hostname&&(!e.protocol||Zq.indexOf(e.protocol)>=0))try{e.hostname=Yq.toUnicode(e.hostname)}catch{}return Rg(GM(e),Rg.defaultChars+"%")}function Vs(n,e){if(!(this instanceof Vs))return new Vs(n,e);e||XM(n)||(e=n||{},n="default"),this.inline=new L0,this.block=new LE,this.core=new JM,this.renderer=new xv,this.linkify=new ps,this.validateLink=cde,this.normalizeLink=fde,this.normalizeLinkText=hde,this.utils=pfe,this.helpers=xE({},_fe),this.options={},this.configure(n),e&&this.set(e)}Vs.prototype.set=function(n){return xE(this.options,n),this};Vs.prototype.configure=function(n){const e=this;if(XM(n)){const t=n;if(n=ade[t],!n)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(t){n.components[t].rules&&e[t].ruler.enableOnly(n.components[t].rules),n.components[t].rules2&&e[t].ruler2.enableOnly(n.components[t].rules2)}),this};Vs.prototype.enable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Vs.prototype.disable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Vs.prototype.use=function(n){const e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};Vs.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");const t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};Vs.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};Vs.prototype.parseInline=function(n,e){const t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};Vs.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};var Ok=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dde(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cf={};cf.getAttrs=function(n,e,t){const r=/[^\t\n\f />"'=]/,i=" ",o="=",s=".",a="#",u=[];let l="",f="",h=!0,d=!1;for(let g=e+t.leftDelimiter.length;g<n.length;g++){if(n.slice(g,g+t.rightDelimiter.length)===t.rightDelimiter){l!==""&&u.push([l,f]);break}const v=n.charAt(g);if(v===o&&h){h=!1;continue}if(v===s&&l===""){n.charAt(g+1)===s?(l="css-module",g+=1):l="class",h=!1;continue}if(v===a&&l===""){l="id",h=!1;continue}if(v==='"'&&f===""&&!d){d=!0;continue}if(v==='"'&&d){d=!1;continue}if(v===i&&!d){if(l==="")continue;u.push([l,f]),l="",f="",h=!0;continue}if(!(h&&v.search(r)===-1)){if(h){l+=v;continue}f+=v}}if(t.allowedAttributes&&t.allowedAttributes.length){const g=t.allowedAttributes;return u.filter(function(v){const m=v[0];function y(b){return m===b||b instanceof RegExp&&b.test(m)}return g.some(y)})}return u};cf.addAttrs=function(n,e){for(let t=0,r=n.length;t<r;++t){const i=n[t][0];i==="class"?e.attrJoin("class",n[t][1]):i==="css-module"?e.attrJoin("css-module",n[t][1]):e.attrPush(n[t])}return e};cf.hasDelimiters=function(n,e){if(!n)throw new Error('Parameter `where` not passed. Should be "start", "end" or "only".');return function(t){const r=e.leftDelimiter.length+1+e.rightDelimiter.length;if(!t||typeof t!="string"||t.length<r)return!1;function i(f){const h=f.charAt(e.leftDelimiter.length)===".",d=f.charAt(e.leftDelimiter.length)==="#";return h||d?f.length>=r+1:f.length>=r}let o,s,a,u;const l=r-e.rightDelimiter.length;switch(n){case"start":a=t.slice(0,e.leftDelimiter.length),o=a===e.leftDelimiter?0:-1,s=o===-1?-1:t.indexOf(e.rightDelimiter,l),u=t.charAt(s+e.rightDelimiter.length),u&&e.rightDelimiter.indexOf(u)!==-1&&(s=-1);break;case"end":o=t.lastIndexOf(e.leftDelimiter),s=o===-1?-1:t.indexOf(e.rightDelimiter,o+l),s=s===t.length-e.rightDelimiter.length?s:-1;break;case"only":a=t.slice(0,e.leftDelimiter.length),o=a===e.leftDelimiter?0:-1,a=t.slice(t.length-e.rightDelimiter.length),s=a===e.rightDelimiter?t.length-e.rightDelimiter.length:-1;break;default:throw new Error(`Unexpected case ${n}, expected 'start', 'end' or 'only'`)}return o!==-1&&s!==-1&&i(t.substring(o,s+e.rightDelimiter.length))}};cf.removeDelimiter=function(n,e){const t=uA(e.leftDelimiter),r=uA(e.rightDelimiter),i=new RegExp("[ \\n]?"+t+"[^"+t+r+"]+"+r+"$"),o=n.search(i);return o!==-1?n.slice(0,o):n};function uA(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}cf.escapeRegExp=uA;cf.getMatchingOpeningToken=function(n,e){if(n[e].type==="softbreak")return!1;if(n[e].nesting===0)return n[e];const t=n[e].level,r=n[e].type.replace("_close","_open");for(;e>=0;--e)if(n[e].type===r&&n[e].level===t)return n[e];return!1};const pde=/[&<>"]/,gde=/[&<>"]/g,vde={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function mde(n){return vde[n]}cf.escapeHtml=function(n){return pde.test(n)?n.replace(gde,mde):n};const Tt=cf;var _de=n=>{const e=new RegExp("^ {0,3}[-*_]{3,} ?"+Tt.escapeRegExp(n.leftDelimiter)+"[^"+Tt.escapeRegExp(n.rightDelimiter)+"]");return[{name:"fenced code blocks",tests:[{shift:0,block:!0,info:Tt.hasDelimiters("end",n)}],transform:(t,r)=>{const i=t[r],o=i.info.lastIndexOf(n.leftDelimiter),s=Tt.getAttrs(i.info,o,n);Tt.addAttrs(s,i),i.info=Tt.removeDelimiter(i.info,n)}},{name:"inline nesting 0",tests:[{shift:0,type:"inline",children:[{shift:-1,type:t=>t==="image"||t==="code_inline"},{shift:0,type:"text",content:Tt.hasDelimiters("start",n)}]}],transform:(t,r,i)=>{const o=t[r].children[i],s=o.content.indexOf(n.rightDelimiter),a=t[r].children[i-1],u=Tt.getAttrs(o.content,0,n);Tt.addAttrs(u,a),o.content.length===s+n.rightDelimiter.length?t[r].children.splice(i,1):o.content=o.content.slice(s+n.rightDelimiter.length)}},{name:"tables",tests:[{shift:0,type:"table_close"},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:Tt.hasDelimiters("only",n)}],transform:(t,r)=>{const i=t[r+2],o=Tt.getMatchingOpeningToken(t,r),s=Tt.getAttrs(i.content,0,n);Tt.addAttrs(s,o),t.splice(r+1,3)}},{name:"inline attributes",tests:[{shift:0,type:"inline",children:[{shift:-1,nesting:-1},{shift:0,type:"text",content:Tt.hasDelimiters("start",n)}]}],transform:(t,r,i)=>{const o=t[r].children[i],s=o.content,a=Tt.getAttrs(s,0,n),u=Tt.getMatchingOpeningToken(t[r].children,i-1);Tt.addAttrs(a,u),o.content=s.slice(s.indexOf(n.rightDelimiter)+n.rightDelimiter.length)}},{name:"list softbreak",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:Tt.hasDelimiters("only",n)}]}],transform:(t,r,i)=>{const s=t[r].children[i].content,a=Tt.getAttrs(s,0,n);let u=r-2;for(;t[u-1]&&t[u-1].type!=="ordered_list_open"&&t[u-1].type!=="bullet_list_open";)u--;Tt.addAttrs(a,t[u-1]),t[r].children=t[r].children.slice(0,-2)}},{name:"list double softbreak",tests:[{shift:0,type:t=>t==="bullet_list_close"||t==="ordered_list_close"},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:Tt.hasDelimiters("only",n),children:t=>t.length===1},{shift:3,type:"paragraph_close"}],transform:(t,r)=>{const o=t[r+2].content,s=Tt.getAttrs(o,0,n),a=Tt.getMatchingOpeningToken(t,r);Tt.addAttrs(s,a),t.splice(r+1,3)}},{name:"list item end",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-1,type:"text",content:Tt.hasDelimiters("end",n)}]}],transform:(t,r,i)=>{const o=t[r].children[i],s=o.content,a=Tt.getAttrs(s,s.lastIndexOf(n.leftDelimiter),n);Tt.addAttrs(a,t[r-2]);const u=s.slice(0,s.lastIndexOf(n.leftDelimiter));o.content=JH(u)!==" "?u:u.slice(0,-1)}},{name:`
{.a} softbreak then curly in start`,tests:[{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:Tt.hasDelimiters("only",n)}]}],transform:(t,r,i)=>{const o=t[r].children[i],s=Tt.getAttrs(o.content,0,n);let a=r+1;for(;t[a+1]&&t[a+1].nesting===-1;)a++;const u=Tt.getMatchingOpeningToken(t,a);Tt.addAttrs(s,u),t[r].children=t[r].children.slice(0,-2)}},{name:"horizontal rule",tests:[{shift:0,type:"paragraph_open"},{shift:1,type:"inline",children:t=>t.length===1,content:t=>t.match(e)!==null},{shift:2,type:"paragraph_close"}],transform:(t,r)=>{const i=t[r];i.type="hr",i.tag="hr",i.nesting=0;const o=t[r+1].content,s=o.lastIndexOf(n.leftDelimiter),a=Tt.getAttrs(o,s,n);Tt.addAttrs(a,i),i.markup=o,t.splice(r+1,2)}},{name:"end of block",tests:[{shift:0,type:"inline",children:[{position:-1,content:Tt.hasDelimiters("end",n),type:t=>t!=="code_inline"&&t!=="math_inline"}]}],transform:(t,r,i)=>{const o=t[r].children[i],s=o.content,a=Tt.getAttrs(s,s.lastIndexOf(n.leftDelimiter),n);let u=r+1;for(;t[u+1]&&t[u+1].nesting===-1;)u++;const l=Tt.getMatchingOpeningToken(t,u);Tt.addAttrs(a,l);const f=s.slice(0,s.lastIndexOf(n.leftDelimiter));o.content=JH(f)!==" "?f:f.slice(0,-1)}}]};function JH(n){return n.slice(-1)[0]}const yde=_de,bde={leftDelimiter:"{",rightDelimiter:"}",allowedAttributes:[]};var wde=function(e,t){let r=Object.assign({},bde);r=Object.assign(r,t);const i=yde(r);function o(s){const a=s.tokens;for(let u=0;u<a.length;u++)for(let l=0;l<i.length;l++){const f=i[l];let h=null;f.tests.every(g=>{const v=lA(a,u,g);return v.j!==null&&(h=v.j),v.match})&&(f.transform(a,u,h),(f.name==="inline attributes"||f.name==="inline nesting 0")&&l--)}}e.core.ruler.before("linkify","curly_attributes",o)};function lA(n,e,t){const r={match:!1,j:null},i=t.shift!==void 0?e+t.shift:t.position;if(t.shift!==void 0&&i<0)return r;const o=Ede(n,i);if(o===void 0)return r;for(const s of Object.keys(t))if(!(s==="shift"||s==="position")){if(o[s]===void 0)return r;if(s==="children"&&Cde(t.children)){if(o.children.length===0)return r;let a;const u=t.children,l=o.children;if(u.every(f=>f.position!==void 0)){if(a=u.every(f=>lA(l,f.position,f).match),a){const f=Ide(u).position;r.j=f>=0?f:l.length+f}}else for(let f=0;f<l.length;f++)if(a=u.every(h=>lA(l,f,h).match),a){r.j=f;break}if(a===!1)return r;continue}switch(typeof t[s]){case"boolean":case"number":case"string":if(o[s]!==t[s])return r;break;case"function":if(!t[s](o[s]))return r;break;case"object":if(Sde(t[s])){if(t[s].every(u=>u(o[s]))===!1)return r;break}default:throw new Error(`Unknown type of pattern test (key: ${s}). Test should be of type boolean, number, string, function or array of functions.`)}}return r.match=!0,r}function Cde(n){return Array.isArray(n)&&n.length&&n.every(e=>typeof e=="object")}function Sde(n){return Array.isArray(n)&&n.length&&n.every(e=>typeof e=="function")}function Ede(n,e){return e>=0?n[e]:n[n.length+e]}function Ide(n){return n.slice(-1)[0]||{}}const xde=dde(wde),Dde={width:"100%",cellpadding:"0",cellspacing:"0"},Lde=be("tr",null,[be("td",{class:"content-block",width:"50%"},"VIPASSANA ARGENTINA"),be("td",{class:"alignright"},[be("span",null,[be("a",{href:"http://www.sukhada.dhamma.org/"},"DS"),ml(" | "),be("a",{href:"https://viriya.dhamma.org/"},"DV")])])],-1),kde={colspan:"2"},Tde=["src"],Nde=be("td",{class:"content-block",width:"50%"},"BOLETIN INFORMATIVO",-1),Ade=["textContent"],Ode=Iv({__name:"NewsLetterHeader",props:{imgUrl:{},date:{}},setup(n){return(e,t)=>(lf(),Td("tr",null,[be("td",null,[be("table",Dde,[be("tbody",null,[Lde,be("tr",null,[be("td",kde,[be("img",{src:e.imgUrl,alt:"Vipassana Argentina, tal y como la ensea S.N. Goenka en la tradicin de Sayagi U Ba Kin"},null,8,Tde)])]),be("tr",null,[Nde,be("td",{class:"alignright",textContent:pue(e.date)},null,8,Ade)])])])])]))}}),Rde=["innerHTML"],Mde=Iv({__name:"NewsLetterBody",props:{html:{type:String,required:!0}},setup(n){const e=n,t=Nc("");function r(o){const s=document.createElement("div");s.innerHTML=o;const a=s.querySelectorAll("h2"),u=document.createElement("br");let l=0;for(const f of a){const h=document.createElement("hr"),d=document.createElement("a");d.innerText="Volver al tope de la pgina",d.href="#top",s.insertBefore(h,f),s.insertBefore(d,h),s.insertBefore(u.cloneNode(),d),s.insertBefore(u.cloneNode(),d);const g="a"+l;f.setAttribute("id",g),l++}return s.innerHTML}function i(o){return o=r(o),o}return jM(()=>t.value=i((e==null?void 0:e.html)??"")),UM(()=>t.value=i((e==null?void 0:e.html)??"")),(o,s)=>(lf(),Td("tr",null,[be("td",{innerHTML:t.value},null,8,Rde)]))}}),Xq=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},Pde={},Fde=n=>(Xue("data-v-db5f205c"),n=n(),Que(),n),Bde=Fde(()=>be("td",{class:"footer"},[be("b",null,"* NOTA IMPORTANTE"),be("br"),ml(" Usted est recibiendo este correo porque realiz algn curso de Vipassana tal y como la ensea S. N. Goenka en la tradicin de Sayagyi U Ba Khin. Si ya no desea ser contactado o si quiere actualizar sus preferencias, favor de hacer click "),be("a",{href:"https://goo.gl/forms/YvZ7XLbZ0i07qd863",target:"_blank"},"aqu")],-1)),Wde=[Bde];function Vde(n,e){return lf(),Td("tr",null,Wde)}const Hde=Xq(Pde,[["render",Vde],["__scopeId","data-v-db5f205c"]]),Ude=be("tr",null,[be("td",null,[be("h2",null,"Tabla de contenidos")])],-1),jde=["innerHTML"],zde=Iv({__name:"NewsLetterTOC",props:{html:{}},setup(n){const e=n,t=Nc("");function r(o){const s=document.createElement("div");s.innerHTML=o;const a=document.createElement("ol"),u=s.querySelectorAll("h2");let l=0;for(const f of u){if(!f.textContent)continue;const h="a"+l,d=f.innerHTML;a.appendChild(i(h,d)),f.setAttribute("id",h),l++}return a.outerHTML}function i(o,s){let a=document.createElement("a"),u=document.createElement("strong"),l=document.createElement("li");return l.appendChild(u),u.appendChild(a),a.href=`#${o}`,a.innerHTML=s,a.className="toc",l}return jM(()=>t.value=r(e.html)),(o,s)=>(lf(),Td(Ns,null,[Ude,be("tr",null,[be("td",{innerHTML:t.value},null,8,jde)])],64))}}),qde={},$de=be("tr",null,[be("td",{class:"content-block text-left",colspan:"2"},[be("h2",{class:"text-left ignore"},[be("i",null,"Dhamma Sukhad")]),ml(" Centro "),be("i",null,"Vipassana"),ml(" Buenos Aires (Brandsen) ")])],-1),Kde=be("tr",null,[be("td",{class:"centre-card",width:"50%","vertical-align":"middle",colspan:"2"},[be("img",{src:"https://sukhada.dhamma.org/fotos/2018/09/img-ds-2017.jpg",alt:"Dhamma Sukhada"}),be("a",{href:"https://dhamma.org/es/schedules/schsukhada",target:"_blank"}," Calendario de Cursos "),ml(" | "),be("a",{href:"mailto:info@sukhada.dhamma.org"},"Info"),be("br"),be("a",{href:"https://facebook.com/sukhada.dhamma.org",target:"_blank"},"Facebook"),be("br"),be("p",null,"(011) 15-5135-2153 (solo mensajes de Whatsapp)")])],-1),Gde=be("tr",null,[be("td",{class:"content-block text-left",colspan:"2"},[be("h2",{class:"text-left ignore"},[be("i",null,"Dhamma Viriya")]),ml(" Centro "),be("i",null,"Vipassana"),ml(" Crdoba (Capilla del Monte) ")])],-1),Yde=be("tr",null,[be("td",{class:"centre-card",width:"50%","vertical-align":"middle",colspan:"2"},[be("img",{src:"https://sukhada.dhamma.org/fotos/2023/06/casa-principal-DV.jpg",alt:"Dhamma Viriya"}),be("a",{href:"https://dhamma.org/es/schedules/schviriya",target:"_blank"}," Calendario de cursos "),ml(" | "),be("a",{href:"mailto:info@viriya.dhamma.org"},"Info"),be("br"),be("p",null,"+54 9 351 684-8844 (solo Whatsapp)")])],-1);function Zde(n,e){return lf(),Td(Ns,null,[$de,Kde,Gde,Yde],64)}const Xde=Xq(qde,[["render",Zde]]);let nP=class qC{constructor(e,t){this._position=e,this._selectionEnd=t}static fromJSON({position:e,selectionEnd:t}){return new qC(e,t)}equals(e){return e==null?!1:this._position===e._position&&this._selectionEnd===e._selectionEnd}compose(e){return e}_transformIndex(e,t){let r=t;for(const i of e)if(i.isRetain()?t-=i.chars:i.isInsert()?r+=i.text.length:(r-=Math.min(t,i.chars),t-=i.chars),t<0)break;return r}transform(e){const t=e.getOps(),r=this._transformIndex(t,this._position);return this._position===this._selectionEnd?new qC(r,r):new qC(r,this._transformIndex(t,this._selectionEnd))}toJSON(){return{position:this._position,selectionEnd:this._selectionEnd}}};var Tn;(function(n){n.Ready="ready",n.CursorChange="cursor",n.Operation="operation",n.Acknowledge="ack",n.Retry="retry",n.Error="error",n.InitialRevision="initialRevision"})(Tn||(Tn={}));var Di;(function(n){n.Error="error",n.Blur="blur",n.Focus="focus",n.Undo="undo",n.Redo="redo",n.Change="change",n.CursorActivity="cursorActivity"})(Di||(Di={}));var cA=function(n,e){return cA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},cA(n,e)};function Ie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cA(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Je=function(){return Je=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Je.apply(this,arguments)};function U(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(h){s(h)}}function u(f){try{l(r.throw(f))}catch(h){s(h)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function V(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(t=0)),t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ei(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hi(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o}function Ct(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qq={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge=function(n,e){if(!n)throw Dv(e)},Dv=function(n){return new Error("Firebase Database ("+Qq.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jq=function(n){for(var e=[],t=0,r=0;r<n.length;r++){var i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Qde=function(n){for(var e=[],t=0,r=0;t<n.length;){var i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){var o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{var o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<n.length;i+=3){var o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,f=o>>2,h=(o&3)<<4|a>>4,d=(a&15)<<2|l>>6,g=l&63;u||(g=64,s||(d=64)),r.push(t[f],t[h],t[d],t[g])}return r.join("")},encodeString:function(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Jq(n),e)},decodeString:function(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Qde(this.decodeStringToByteArray(n,e))},decodeStringToByteArray:function(n,e){this.init_();for(var t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<n.length;){var o=t[n.charAt(i++)],s=i<n.length,a=s?t[n.charAt(i)]:0;++i;var u=i<n.length,l=u?t[n.charAt(i)]:64;++i;var f=i<n.length,h=f?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||h==null)throw Error();var d=o<<2|a>>4;if(r.push(d),l!==64){var g=a<<4&240|l>>2;if(r.push(g),h!==64){var v=l<<6&192|h;r.push(v)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},e$=function(n){var e=Jq(n);return TE.encodeByteArray(e,!0)},e5=function(n){return e$(n).replace(/\./g,"")},t5=function(n){try{return TE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(n){return by(void 0,n)}function by(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(var r in e)!e.hasOwnProperty(r)||!Jde(r)||(n[r]=by(n[r],e[r]));return n}function Jde(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qr=function(){function n(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r})}return n.prototype.wrapCallback=function(e){var t=this;return function(r,i){r?t.reject(r):t.resolve(i),typeof e=="function"&&(t.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},n}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Je({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[e5(JSON.stringify(t)),e5(JSON.stringify(s)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ud())}function n$(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function epe(){return typeof self=="object"&&self.self===self}function oP(){var n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function r$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tpe(){return ud().indexOf("Electron/")>=0}function npe(){var n=ud();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rpe(){return ud().indexOf("MSAppHost/")>=0}function i$(){return Qq.NODE_ADMIN===!0}function ipe(){return!n$()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k0(){return"indexedDB"in self&&indexedDB!=null}function sP(){return new Promise(function(n,e){try{var t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=function(){t=!1},i.onerror=function(){var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(o){e(o)}})}function o$(){return!(!navigator||!navigator.cookieEnabled)}function ope(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var spe="FirebaseError",Lv=function(n){Ie(e,n);function e(t,r,i){var o=n.call(this,r)||this;return o.code=t,o.customData=i,o.name=spe,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Nl.prototype.create),o}return e}(Error),Nl=function(){function n(e,t,r){this.service=e,this.serviceName=t,this.errors=r}return n.prototype.create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=t[0]||{},o=this.service+"/"+e,s=this.errors[e],a=s?ape(s,i):"Error",u=this.serviceName+": "+a+" ("+o+").",l=new Lv(o,u,i);return l},n}();function ape(n,e){return n.replace(upe,function(t,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var upe=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(n){return JSON.parse(n)}function Or(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aP=function(n){var e={},t={},r={},i="";try{var o=n.split(".");e=wy(t5(o[0])||""),t=wy(t5(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}},lpe=function(n){var e=aP(n).claims;return typeof e=="object"&&e.hasOwnProperty("iat")?e.iat:null},cpe=function(n){var e=aP(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},fpe=function(n){var e=aP(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ld(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function fA(n){for(var e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function x1(n,e,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hpe(n){for(var e=[],t=function(u,l){Array.isArray(l)?l.forEach(function(f){e.push(encodeURIComponent(u)+"="+encodeURIComponent(f))}):e.push(encodeURIComponent(u)+"="+encodeURIComponent(l))},r=0,i=Object.entries(n);r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dpe=function(){function n(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return n.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},n.prototype.compress_=function(e,t){t||(t=0);var r=this.W_;if(typeof e=="string")for(var i=0;i<16;i++)r[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)r[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var i=16;i<80;i++){var o=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(o<<1|o>>>31)&4294967295}for(var s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],l=this.chain_[3],f=this.chain_[4],h,d,i=0;i<80;i++){i<40?i<20?(h=l^a&(u^l),d=1518500249):(h=a^u^l,d=1859775393):i<60?(h=a&u|l&(a|u),d=2400959708):(h=a^u^l,d=3395469782);var o=(s<<5|s>>>27)+h+f+d+r[i]&4294967295;f=l,l=u,u=(a<<30|a>>>2)&4294967295,a=s,s=o}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},n.prototype.update=function(e,t){if(e!=null){t===void 0&&(t=e.length);for(var r=t-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;i<t;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<t;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=t}},n.prototype.digest=function(){var e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e},n}();function ppe(n,e){var t=new gpe(n,e);return t.subscribe.bind(t)}var gpe=function(){function n(e,t){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return n.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},n.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},n.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},n.prototype.subscribe=function(e,t,r){var i=this,o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vpe(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Rk),o.error===void 0&&(o.error=Rk),o.complete===void 0&&(o.complete=Rk);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?o.error(i.finalError):o.complete()}catch{}}),this.observers.push(o),s},n.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},n.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},n.prototype.sendOne=function(e,t){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{t(r.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},n.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},n}();function vpe(n,e){if(typeof n!="object"||n===null)return!1;for(var t=0,r=e;t<r.length;t++){var i=r[t];if(i in n&&typeof n[i]=="function")return!0}return!1}function Rk(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et=function(n,e,t,r){var i;if(r<e?i="at least "+e:r>t&&(i=t===0?"none":"no more than "+t),i){var o=n+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function Oo(n,e){return n+" failed: "+e+" argument "}function Kr(n,e,t,r){if(!(r&&!t)&&typeof t!="function")throw new Error(Oo(n,e)+"must be a valid function.")}function n5(n,e,t,r){if(t&&(typeof t!="object"||t===null))throw new Error(Oo(n,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mpe=function(n){for(var e=[],t=0,r=0;r<n.length;r++){var i=n.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,ge(r<n.length,"Surrogate pair missing trail surrogate.");var s=n.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},NE=function(n){for(var e=0,t=0;t<n.length;t++){var r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _pe=1e3,ype=2,bpe=4*60*60*1e3,wpe=.5;function hA(n,e,t){e===void 0&&(e=_pe),t===void 0&&(t=ype);var r=e*Math.pow(t,n),i=Math.round(wpe*r*(Math.random()-.5)*2);return Math.min(bpe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n){return n&&n._delegate?n._delegate:n}var Vi=function(){function n(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return n.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},n.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},n.prototype.setServiceProps=function(e){return this.serviceProps=e,this},n.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s$=function(){function n(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return n.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var r=new Qr;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise},n.prototype.getImmediate=function(e){var t,r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},n.prototype.getComponent=function(){return this.component},n.prototype.setComponent=function(e){var t,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(Spe(e))try{this.getOrInitializeService({instanceIdentifier:dh})}catch{}try{for(var i=ei(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=hi(o.value,2),a=s[0],u=s[1],l=this.normalizeInstanceIdentifier(a);try{var f=this.getOrInitializeService({instanceIdentifier:l});u.resolve(f)}catch{}}}catch(h){t={error:h}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},n.prototype.clearInstance=function(e){e===void 0&&(e=dh),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},n.prototype.delete=function(){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Ct(Ct([],hi(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),hi(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return t.sent(),[2]}})})},n.prototype.isComponentSet=function(){return this.component!=null},n.prototype.isInitialized=function(e){return e===void 0&&(e=dh),this.instances.has(e)},n.prototype.getOptions=function(e){return e===void 0&&(e=dh),this.instancesOptions.get(e)||{}},n.prototype.initialize=function(e){var t,r;e===void 0&&(e={});var i=e.options,o=i===void 0?{}:i,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=ei(this.instancesDeferred.entries()),l=u.next();!l.done;l=u.next()){var f=hi(l.value,2),h=f[0],d=f[1],g=this.normalizeInstanceIdentifier(h);s===g&&d.resolve(a)}}catch(v){t={error:v}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return a},n.prototype.onInit=function(e,t){var r,i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);var s=this.instances.get(i);return s&&e(s,i),function(){o.delete(e)}},n.prototype.invokeOnInitCallbacks=function(e,t){var r,i,o=this.onInitCallbacks.get(t);if(o)try{for(var s=ei(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(e,t)}catch{}}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},n.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Cpe(t),options:i}),this.instances.set(t,o),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null},n.prototype.normalizeInstanceIdentifier=function(e){return e===void 0&&(e=dh),this.component?this.component.multipleInstances?e:dh:e},n.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},n}();function Cpe(n){return n===dh?void 0:n}function Spe(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a$=function(){function n(e){this.name=e,this.providers=new Map}return n.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},n.prototype.addOrOverwriteComponent=function(e){var t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},n.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s$(e,this);return this.providers.set(e,t),t},n.prototype.getProviders=function(){return Array.from(this.providers.values())},n}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function oa(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jf,uP=[],Lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Lt||(Lt={}));var u$={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},Epe=Lt.INFO,Ipe=(Jf={},Jf[Lt.DEBUG]="log",Jf[Lt.VERBOSE]="log",Jf[Lt.INFO]="info",Jf[Lt.WARN]="warn",Jf[Lt.ERROR]="error",Jf),xpe=function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];if(!(e<n.logLevel)){var i=new Date().toISOString(),o=Ipe[e];if(o)console[o].apply(console,oa(["["+i+"]  "+n.name+":"],t));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},Nd=function(){function n(e){this.name=e,this._logLevel=Epe,this._logHandler=xpe,this._userLogHandler=null,uP.push(this)}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Lt))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),n.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?u$[e]:e},Object.defineProperty(n.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,oa([this,Lt.DEBUG],e)),this._logHandler.apply(this,oa([this,Lt.DEBUG],e))},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,oa([this,Lt.VERBOSE],e)),this._logHandler.apply(this,oa([this,Lt.VERBOSE],e))},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,oa([this,Lt.INFO],e)),this._logHandler.apply(this,oa([this,Lt.INFO],e))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,oa([this,Lt.WARN],e)),this._logHandler.apply(this,oa([this,Lt.WARN],e))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,oa([this,Lt.ERROR],e)),this._logHandler.apply(this,oa([this,Lt.ERROR],e))},n}();function Dpe(n){uP.forEach(function(e){e.setLogLevel(n)})}function Lpe(n,e){for(var t=function(s){var a=null;e&&e.level&&(a=u$[e.level]),n===null?s.userLogHandler=null:s.userLogHandler=function(u,l){for(var f=[],h=2;h<arguments.length;h++)f[h-2]=arguments[h];var d=f.map(function(g){if(g==null)return null;if(typeof g=="string")return g;if(typeof g=="number"||typeof g=="boolean")return g.toString();if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return null}}).filter(function(g){return g}).join(" ");l>=(a??u.logLevel)&&n({level:Lt[l].toLowerCase(),message:d,args:f,type:u.name})}},r=0,i=uP;r<i.length;r++){var o=i[r];t(o)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gl,kpe=(Gl={},Gl["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Gl["bad-app-name"]="Illegal App name: '{$appName}",Gl["duplicate-app"]="Firebase App named '{$appName}' already exists",Gl["app-deleted"]="Firebase App named '{$appName}' already deleted",Gl["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Gl["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Gl),Gp=new Nl("app","Firebase",kpe),l$="@firebase/app",Tpe="0.6.30",Npe="@firebase/analytics",Ape="@firebase/app-check",Ope="@firebase/auth",Rpe="@firebase/database",Mpe="@firebase/functions",Ppe="@firebase/installations",Fpe="@firebase/messaging",Bpe="@firebase/performance",Wpe="@firebase/remote-config",Vpe="@firebase/storage",Hpe="@firebase/firestore",Upe="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ii,D1="[DEFAULT]",jpe=(Ii={},Ii[l$]="fire-core",Ii[Npe]="fire-analytics",Ii[Ape]="fire-app-check",Ii[Ope]="fire-auth",Ii[Rpe]="fire-rtdb",Ii[Mpe]="fire-fn",Ii[Ppe]="fire-iid",Ii[Fpe]="fire-fcm",Ii[Bpe]="fire-perf",Ii[Wpe]="fire-rc",Ii[Vpe]="fire-gcs",Ii[Hpe]="fire-fst",Ii["fire-js"]="fire-js",Ii[Upe]="fire-js-all",Ii);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pg=new Nd("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $C=function(){function n(e,t,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=t$(e),this.container=new a$(t.name),this._addComponent(new Vi("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(o){return i._addComponent(o)})}return Object.defineProperty(n.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),n.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},n.prototype._getService=function(e,t){var r;t===void 0&&(t=D1),this.checkDestroyed_();var i=this.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})},n.prototype._removeServiceInstance=function(e,t){t===void 0&&(t=D1),this.container.getProvider(e).clearInstance(t)},n.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Pg.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},n.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},n.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},n.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Gp.create("app-deleted",{appName:this.name_})},n}();$C.prototype.name&&$C.prototype.options||$C.prototype.delete||console.log("dc");var zpe="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qpe(n){var e={},t=new Map,r={__esModule:!0,initializeApp:s,app:o,registerVersion:l,setLogLevel:Dpe,onLog:f,apps:null,SDK_VERSION:zpe,INTERNAL:{registerComponent:u,removeApp:i,components:t,useAsService:h}};r.default=r,Object.defineProperty(r,"apps",{get:a});function i(d){delete e[d]}function o(d){if(d=d||D1,!gs(e,d))throw Gp.create("no-app",{appName:d});return e[d]}o.App=n;function s(d,g){if(g===void 0&&(g={}),typeof g!="object"||g===null){var v=g;g={name:v}}var m=g;m.name===void 0&&(m.name=D1);var y=m.name;if(typeof y!="string"||!y)throw Gp.create("bad-app-name",{appName:String(y)});if(gs(e,y))throw Gp.create("duplicate-app",{appName:y});var b=new n(d,m,r);return e[y]=b,b}function a(){return Object.keys(e).map(function(d){return e[d]})}function u(d){var g=d.name;if(t.has(g))return Pg.debug("There were multiple attempts to register component "+g+"."),d.type==="PUBLIC"?r[g]:null;if(t.set(g,d),d.type==="PUBLIC"){var v=function(C){if(C===void 0&&(C=o()),typeof C[g]!="function")throw Gp.create("invalid-app-argument",{appName:g});return C[g]()};d.serviceProps!==void 0&&by(v,d.serviceProps),r[g]=v,n.prototype[g]=function(){for(var C=[],E=0;E<arguments.length;E++)C[E]=arguments[E];var D=this._getService.bind(this,g);return D.apply(this,d.multipleInstances?C:[])}}for(var m=0,y=Object.keys(e);m<y.length;m++){var b=y[m];e[b]._addComponent(d)}return d.type==="PUBLIC"?r[g]:null}function l(d,g,v){var m,y=(m=jpe[d])!==null&&m!==void 0?m:d;v&&(y+="-"+v);var b=y.match(/\s|\//),C=g.match(/\s|\//);if(b||C){var E=['Unable to register library "'+y+'" with version "'+g+'":'];b&&E.push('library name "'+y+'" contains illegal characters (whitespace or "/")'),b&&C&&E.push("and"),C&&E.push('version name "'+g+'" contains illegal characters (whitespace or "/")'),Pg.warn(E.join(" "));return}u(new Vi(y+"-version",function(){return{library:y,version:g}},"VERSION"))}function f(d,g){if(d!==null&&typeof d!="function")throw Gp.create("invalid-log-argument");Lpe(d,g)}function h(d,g){if(g==="serverAuth")return null;var v=g;return v}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$(){var n=qpe($C);n.INTERNAL=Je(Je({},n.INTERNAL),{createFirebaseNamespace:c$,extendNamespace:e,createSubscribe:ppe,ErrorFactory:Nl,deepExtend:by});function e(t){by(n,t)}return n}var lP=c$();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $pe=function(){function n(e){this.container=e}return n.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map(function(t){if(Kpe(t)){var r=t.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(t){return t}).join(" ")},n}();function Kpe(n){var e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gpe(n,e){n.INTERNAL.registerComponent(new Vi("platform-logger",function(t){return new $pe(t)},"PRIVATE")),n.registerVersion(l$,Tpe,e),n.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(epe()&&self.firebase!==void 0){Pg.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var r5=self.firebase.SDK_VERSION;r5&&r5.indexOf("LITE")>=0&&Pg.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var Ype=lP.initializeApp;lP.initializeApp=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n$()&&Pg.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),Ype.apply(void 0,n)};var He=lP;Gpe(He);var Zpe={},Xpe="@firebase/database",Qpe="0.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f$="";function h$(n){f$=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jpe=function(){function n(e){this.domStorage_=e,this.prefix_="firebase:"}return n.prototype.set=function(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Or(t))},n.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:wy(t)},n.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},n.prototype.prefixedName_=function(e){return this.prefix_+e},n.prototype.toString=function(){return this.domStorage_.toString()},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ege=function(){function n(){this.cache_={},this.isInMemoryStorage=!0}return n.prototype.set=function(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t},n.prototype.get=function(e){return gs(this.cache_,e)?this.cache_[e]:null},n.prototype.remove=function(e){delete this.cache_[e]},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d$=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){var e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Jpe(e)}}catch{}return new ege},Nh=d$("localStorage"),dA=d$("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bg=new Nd("@firebase/database"),p$=function(){var n=1;return function(){return n++}}(),g$=function(n){var e=mpe(n),t=new dpe;t.update(e);var r=t.digest();return TE.encodeByteArray(r)},T0=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t="",r=0;r<n.length;r++){var i=n[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=T0.apply(null,i):typeof i=="object"?t+=Or(i):t+=i,t+=" "}return t},zh=null,i5=!0,v$=function(n,e){ge(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(bg.logLevel=Lt.VERBOSE,zh=bg.log.bind(bg),e&&dA.set("logging_enabled",!0)):typeof n=="function"?zh=n:(zh=null,dA.remove("logging_enabled"))},Gr=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(i5===!0&&(i5=!1,zh===null&&dA.get("logging_enabled")===!0&&v$(!0)),zh){var t=T0.apply(null,n);zh(t)}},N0=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Gr.apply(void 0,Ct([n],hi(e)))}},pA=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t="FIREBASE INTERNAL ERROR: "+T0.apply(void 0,Ct([],hi(n)));bg.error(t)},mu=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t="FIREBASE FATAL ERROR: "+T0.apply(void 0,Ct([],hi(n)));throw bg.error(t),new Error(t)},vi=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t="FIREBASE WARNING: "+T0.apply(void 0,Ct([],hi(n)));bg.warn(t)},tge=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},AE=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},nge=function(n){if(document.readyState==="complete")n();else{var e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},_l="[MIN_NAME]",_u="[MAX_NAME]",Ad=function(n,e){if(n===e)return 0;if(n===_l||e===_u)return-1;if(e===_l||n===_u)return 1;var t=L1(n),r=L1(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1},rge=function(n,e){return n===e?0:n<e?-1:1},$m=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Or(e))},cP=function(n){if(typeof n!="object"||n===null)return Or(n);var e=[];for(var t in n)e.push(t);e.sort();for(var r="{",i=0;i<e.length;i++)i!==0&&(r+=","),r+=Or(e[i]),r+=":",r+=cP(n[e[i]]);return r+="}",r},m$=function(n,e){var t=n.length;if(t<=e)return[n];for(var r=[],i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Fr(n,e){for(var t in n)n.hasOwnProperty(t)&&e(t,n[t])}var _$=function(n){ge(!AE(n),"Invalid JSON number");var e=11,t=52,r=(1<<e-1)-1,i,o,s,a,u;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));var l=[];for(u=t;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(u=e;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();var f=l.join(""),h="";for(u=0;u<64;u+=8){var d=parseInt(f.substr(u,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},ige=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oge=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function sge(n,e){var t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");var r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var age=new RegExp("^-?(0*)\\d{1,10}$"),y$=-2147483648,fP=2147483647,L1=function(n){if(age.test(n)){var e=Number(n);if(e>=y$&&e<=fP)return e}return null},kv=function(n){try{n()}catch(e){setTimeout(function(){var t=e.stack||"";throw vi("Exception was thrown by user callback.",t),e},Math.floor(0))}},uge=function(){var n=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return n.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},M_=function(n,e){var t=setTimeout(n,e);return typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lge=function(){function n(e,t){var r=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(function(i){return r.appCheck=i})}return n.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise(function(r,i){setTimeout(function(){t.appCheck?t.getToken(e).then(r,i):r(null)},0)})},n.prototype.addTokenChangeListener=function(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(function(r){return r.addTokenListener(e)})},n.prototype.notifyForInvalidToken=function(){vi('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cge=function(){function n(e,t,r){var i=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(o){return i.auth_=o})}return n.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch(function(r){return r&&r.code==="auth/token-not-initialized"?(Gr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)}):new Promise(function(r,i){setTimeout(function(){t.auth_?t.getToken(e).then(r,i):r(null)},0)})},n.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)})},n.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},n.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vi(e)},n}(),P_=function(){function n(e){this.accessToken=e}return n.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},n.prototype.addTokenChangeListener=function(e){e(this.accessToken)},n.prototype.removeTokenChangeListener=function(e){},n.prototype.notifyForInvalidToken=function(){},n.OWNER="owner",n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hP="5",b$="v",w$="s",C$="r",S$="f",E$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,I$="ls",fge="p",gA="ac",x$="websocket",D$="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dP=function(){function n(e,t,r,i,o,s,a){o===void 0&&(o=!1),s===void 0&&(s=""),a===void 0&&(a=!1),this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Nh.get("host:"+e)||this._host}return n.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},n.prototype.isCustomHost=function(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"},Object.defineProperty(n.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Nh.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),n.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},n.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},n}();function hge(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function L$(n,e,t){ge(typeof e=="string","typeof type must == string"),ge(typeof t=="object","typeof params must == object");var r;if(e===x$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===D$)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);hge(n)&&(t.ns=n.namespace);var i=[];return Fr(t,function(o,s){i.push(o+"="+s)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dge=function(){function n(){this.counters_={}}return n.prototype.incrementCounter=function(e,t){t===void 0&&(t=1),gs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},n.prototype.get=function(){return t$(this.counters_)},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mk={},Pk={};function pP(n){var e=n.toString();return Mk[e]||(Mk[e]=new dge),Mk[e]}function pge(n,e){var t=n.toString();return Pk[t]||(Pk[t]=e()),Pk[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gge=function(){function n(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return n.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},n.prototype.handleResponse=function(e,t){var r=this;this.pendingResponses[e]=t;for(var i=function(){var a=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var u=function(f){a[f]&&kv(function(){r.onMessage_(a[f])})},l=0;l<a.length;++l)u(l);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum];){var s=i();if(s==="break")break}},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o5="start",vge="close",mge="pLPCommand",_ge="pRTLPCB",k$="id",T$="pw",N$="ser",yge="cb",bge="seg",wge="ts",Cge="d",Sge="dframe",A$=1870,O$=30,Ege=A$-O$,Ige=25e3,xge=3e4,gP=function(){function n(e,t,r,i,o,s,a){var u=this;this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=N0(e),this.stats_=pP(t),this.urlFn=function(l){return u.appCheckToken&&(l[gA]=u.appCheckToken),L$(t,D$,l)}}return n.prototype.open=function(e,t){var r=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gge(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(xge)),nge(function(){if(!r.isClosed_){r.scriptTagHolder=new Dge(function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var u=hi(s,5),l=u[0],f=u[1],h=u[2];if(u[3],u[4],r.incrementIncomingBytes_(s),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,l===o5)r.id=f,r.password=h;else if(l===vge)f?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(f,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+l)},function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var u=hi(s,2),l=u[0],f=u[1];r.incrementIncomingBytes_(s),r.myPacketOrderer.handleResponse(l,f)},function(){r.onClosed_()},r.urlFn);var i={};i[o5]="t",i[N$]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[yge]=r.scriptTagHolder.uniqueCallbackIdentifier),i[b$]=hP,r.transportSessionId&&(i[w$]=r.transportSessionId),r.lastSessionId&&(i[I$]=r.lastSessionId),r.applicationId&&(i[fge]=r.applicationId),r.appCheckToken&&(i[gA]=r.appCheckToken),typeof location<"u"&&location.hostname&&E$.test(location.hostname)&&(i[C$]=S$);var o=r.urlFn(i);r.log_("Connecting via long-poll to "+o),r.scriptTagHolder.addTag(o,function(){})}})},n.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},n.forceAllow=function(){n.forceAllow_=!0},n.forceDisallow=function(){n.forceDisallow_=!0},n.isAvailable=function(){return n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ige()&&!oge()},n.prototype.markConnectionHealthy=function(){},n.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},n.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},n.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},n.prototype.send=function(e){var t=Or(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var r=e$(t),i=m$(r,Ege),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},n.prototype.addDisconnectPingFrame=function(e,t){this.myDisconnFrame=document.createElement("iframe");var r={};r[Sge]="t",r[k$]=e,r[T$]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},n.prototype.incrementIncomingBytes_=function(e){var t=Or(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},n}(),Dge=function(){function n(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=p$(),window[mge+this.uniqueCallbackIdentifier]=e,window[_ge+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();var o="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var s=document.domain;o='<script>document.domain="'+s+'";<\/script>'}var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){Gr("frame writing exception"),u.stack&&Gr(u.stack),Gr(u)}}}return n.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{var t=e.contentWindow.document;t||Gr("No IE domain setting required")}catch{var r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},n.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){e.myIFrame!==null&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},n.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},n.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[k$]=this.myID,e[T$]=this.myPW,e[N$]=this.currentSerial;for(var t=this.urlFn(e),r="",i=0;this.pendingSegs.length>0;){var o=this.pendingSegs[0];if(o.d.length+O$+r.length<=A$){var s=this.pendingSegs.shift();r=r+"&"+bge+i+"="+s.seg+"&"+wge+i+"="+s.ts+"&"+Cge+i+"="+s.d,i++}else break}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1},n.prototype.enqueueSegment=function(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()},n.prototype.addLongPollTag_=function(e,t){var r=this;this.outstandingRequests.add(t);var i=function(){r.outstandingRequests.delete(t),r.newRequest_()},o=setTimeout(i,Math.floor(Ige)),s=function(){clearTimeout(o),i()};this.addTag(e,s)},n.prototype.addTag=function(e,t){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=function(){Gr("Long-poll script failed to load: "+e),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lge=16384,kge=45e3,k1=null;typeof MozWebSocket<"u"?k1=MozWebSocket:typeof WebSocket<"u"&&(k1=WebSocket);var Sh=function(){function n(e,t,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=N0(this.connId),this.stats_=pP(t),this.connURL=n.connectionURL_(t,s,a,i),this.nodeAdmin=t.nodeAdmin}return n.connectionURL_=function(e,t,r,i){var o={};return o[b$]=hP,typeof location<"u"&&location.hostname&&E$.test(location.hostname)&&(o[C$]=S$),t&&(o[w$]=t),r&&(o[I$]=r),i&&(o[gA]=i),L$(e,x$,o)},n.prototype.open=function(e,t){var r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Nh.set("previous_websocket_failure",!0);try{var i,o,s,a;if(!i$()){var o={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new k1(this.connURL,[],o)}}catch(l){this.log_("Error instantiating WebSocket.");var u=l.message||l.data;u&&this.log_(u),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(l){r.handleIncomingFrame(l)},this.mySock.onerror=function(l){r.log_("WebSocket error.  Closing connection.");var f=l.message||l.data;f&&r.log_(f),r.onClosed_()}},n.prototype.start=function(){},n.forceDisallow=function(){n.forceDisallow_=!0},n.isAvailable=function(){var e=!1;if(typeof navigator<"u"&&navigator.userAgent){var t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&k1!==null&&!n.forceDisallow_},n.previouslyFailed=function(){return Nh.isInMemoryStorage||Nh.get("previous_websocket_failure")===!0},n.prototype.markConnectionHealthy=function(){Nh.remove("previous_websocket_failure")},n.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var r=wy(t);this.onMessage(r)}},n.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},n.prototype.extractFrameCount_=function(e){if(ge(this.frames===null,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},n.prototype.handleIncomingFrame=function(e){if(this.mySock!==null){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{var r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}},n.prototype.send=function(e){this.resetKeepAlive();var t=Or(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var r=m$(t,Lge);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},n.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},n.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},n.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},n.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(kge))},n.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tge=function(){function n(e){this.initTransports_(e)}return Object.defineProperty(n,"ALL_TRANSPORTS",{get:function(){return[gP,Sh]},enumerable:!1,configurable:!0}),n.prototype.initTransports_=function(e){var t,r,i=Sh&&Sh.isAvailable(),o=i&&!Sh.previouslyFailed();if(e.webSocketOnly&&(i||vi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Sh];else{var s=this.transports_=[];try{for(var a=ei(n.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var l=u.value;l&&l.isAvailable()&&s.push(l)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}},n.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},n.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nge=6e4,Age=5e3,Oge=10*1024,Rge=100*1024,Fk="t",s5="d",Mge="s",a5="r",Pge="e",u5="o",l5="a",c5="n",f5="p",Fge="h",R$=function(){function n(e,t,r,i,o,s,a,u,l,f){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=N0("c:"+this.id+":"),this.transportManager_=new Tge(t),this.log_("Connection created"),this.start_()}return n.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(r,i)},Math.floor(0));var o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=M_(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>Rge?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>Oge?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(o)))},n.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},n.prototype.disconnReceiver_=function(e){var t=this;return function(r){e===t.conn_?t.onConnectionLost_(r):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},n.prototype.connReceiver_=function(e){var t=this;return function(r){t.state_!==2&&(e===t.rx_?t.onPrimaryMessageReceived_(r):e===t.secondaryConn_?t.onSecondaryMessageReceived_(r):t.log_("message on old connection"))}},n.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},n.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},n.prototype.onSecondaryControl_=function(e){if(Fk in e){var t=e[Fk];t===l5?this.upgradeIfSecondaryHealthy_():t===a5?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===u5&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},n.prototype.onSecondaryMessageReceived_=function(e){var t=$m("t",e),r=$m("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)},n.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:f5,d:{}}}))},n.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:l5,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:c5,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},n.prototype.onPrimaryMessageReceived_=function(e){var t=$m("t",e),r=$m("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)},n.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},n.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},n.prototype.onControl_=function(e){var t=$m(Fk,e);if(s5 in e){var r=e[s5];if(t===Fge)this.onHandshake_(r);else if(t===c5){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Mge?this.onConnectionShutdown_(r):t===a5?this.onReset_(r):t===Pge?pA("Server Error: "+r):t===u5?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pA("Unknown control packet command: "+t)}},n.prototype.onHandshake_=function(e){var t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),hP!==r&&vi("Protocol version mismatch detected"),this.tryStartUpgrade_())},n.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},n.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),M_(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(Nge))},n.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())},n.prototype.onConnectionEstablished_=function(e,t){var r=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):M_(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(Age))},n.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:f5,d:{}}}))},n.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()},n.prototype.onConnectionLost_=function(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Nh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},n.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},n.prototype.sendData_=function(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)},n.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},n.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M$=function(){function n(){}return n.prototype.put=function(e,t,r,i){},n.prototype.merge=function(e,t,r,i){},n.prototype.refreshAuthToken=function(e){},n.prototype.refreshAppCheckToken=function(e){},n.prototype.onDisconnectPut=function(e,t,r){},n.prototype.onDisconnectMerge=function(e,t,r){},n.prototype.onDisconnectCancel=function(e,t){},n.prototype.reportStats=function(e){},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P$=function(){function n(e){this.allowedEvents_=e,this.listeners_={},ge(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Array.isArray(this.listeners_[e]))for(var i=Ct([],hi(this.listeners_[e])),o=0;o<i.length;o++)i[o].callback.apply(i[o].context,t)},n.prototype.on=function(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});var i=this.getInitialEvent(e);i&&t.apply(r,i)},n.prototype.off=function(e,t,r){this.validateEventType_(e);for(var i=this.listeners_[e]||[],o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}},n.prototype.validateEventType_=function(e){ge(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h5=function(n){Ie(e,n);function e(){var t=n.call(this,["online"])||this;return t.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!iP()&&(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return ge(t==="online","Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(P$);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d5=32,p5=768,sn=function(){function n(e,t){if(t===void 0){this.pieces_=e.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return n.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"},n}();function Gt(){return new sn("")}function St(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Zc(n){return n.pieces_.length-n.pieceNum_}function Cn(n){var e=n.pieceNum_;return e<n.pieces_.length&&e++,new sn(n.pieces_,e)}function vP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Bge(n){for(var e="",t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Cy(n,e){return e===void 0&&(e=0),n.pieces_.slice(n.pieceNum_+e)}function F$(n){if(n.pieceNum_>=n.pieces_.length)return null;for(var e=[],t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new sn(e,0)}function Wn(n,e){for(var t=[],r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof sn)for(var r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)i[r].length>0&&t.push(i[r]);return new sn(t,0)}function Et(n){return n.pieceNum_>=n.pieces_.length}function ho(n,e){var t=St(n),r=St(e);if(t===null)return e;if(t===r)return ho(Cn(n),Cn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Wge(n,e){for(var t=Cy(n,0),r=Cy(e,0),i=0;i<t.length&&i<r.length;i++){var o=Ad(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function mP(n,e){if(Zc(n)!==Zc(e))return!1;for(var t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Os(n,e){var t=n.pieceNum_,r=e.pieceNum_;if(Zc(n)>Zc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Vge=function(){function n(e,t){this.errorPrefix_=t,this.parts_=Cy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=NE(this.parts_[r]);B$(this)}return n}();function Hge(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=NE(e),B$(n)}function Uge(n){var e=n.parts_.pop();n.byteLength_-=NE(e),n.parts_.length>0&&(n.byteLength_-=1)}function B$(n){if(n.byteLength_>p5)throw new Error(n.errorPrefix_+"has a key path longer than "+p5+" bytes ("+n.byteLength_+").");if(n.parts_.length>d5)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+d5+") or object contains a cycle "+ph(n))}function ph(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jge=function(n){Ie(e,n);function e(){var t=n.call(this,["visible"])||this,r,i;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",r="webkitHidden")),t.visible_=!0,i&&document.addEventListener(i,function(){var o=!document[r];o!==t.visible_&&(t.visible_=o,t.trigger("visible",o))},!1),t}return e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return ge(t==="visible","Unknown event type: "+t),[this.visible_]},e}(P$);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Km=1e3,zge=60*5*1e3,qge=3*1e3,g5=30*1e3,$ge=1.3,Kge=3e4,Gge="server_kill",v5=3,qh=function(n){Ie(e,n);function e(t,r,i,o,s,a,u,l){var f=n.call(this)||this;if(f.repoInfo_=t,f.applicationId_=r,f.onDataUpdate_=i,f.onConnectStatus_=o,f.onServerInfoUpdate_=s,f.authTokenProvider_=a,f.appCheckTokenProvider_=u,f.authOverride_=l,f.id=e.nextPersistentConnectionId_++,f.log_=N0("p:"+f.id+":"),f.interruptReasons_={},f.listens=new Map,f.outstandingPuts_=[],f.outstandingGets_=[],f.outstandingPutCount_=0,f.outstandingGetCount_=0,f.onDisconnectRequestQueue_=[],f.connected_=!1,f.reconnectDelay_=Km,f.maxReconnectDelay_=zge,f.securityDebugCallback_=null,f.lastSessionId=null,f.establishConnectionTimer_=null,f.visible_=!1,f.requestCBHash_={},f.requestNumber_=0,f.realtime_=null,f.authToken_=null,f.appCheckToken_=null,f.forceTokenRefresh_=!1,f.invalidAuthTokenCount_=0,f.invalidAppCheckTokenCount_=0,f.firstConnection_=!0,f.lastConnectionAttemptTime_=null,f.lastConnectionEstablishedTime_=null,l&&!i$())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return jge.getInstance().on("visible",f.onVisible_,f),t.host.indexOf("fblocal")===-1&&h5.getInstance().on("online",f.onOnline_,f),f}return e.prototype.sendRequest=function(t,r,i){var o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(Or(s)),ge(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)},e.prototype.get=function(t){var r=this;this.initConnection_();var i=new Qr,o={p:t._path.toString(),q:t._queryObject},s={action:"g",request:o,onComplete:function(u){var l=u.d;u.s==="ok"?(r.onDataUpdate_(o.p,l,!1,null),i.resolve(l)):i.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var u=r.outstandingGets_[a];u===void 0||s!==u||(delete r.outstandingGets_[a],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),r.log_("get "+a+" timed out on connection"),i.reject(new Error("Client is offline.")))},qge),this.connected_&&this.sendGet_(a),i.promise},e.prototype.listen=function(t,r,i,o){this.initConnection_();var s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),ge(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ge(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");var u={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,u),this.connected_&&this.sendListen_(u)},e.prototype.sendGet_=function(t){var r=this,i=this.outstandingGets_[t];this.sendRequest("g",i.request,function(o){delete r.outstandingGets_[t],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),i.onComplete&&i.onComplete(o)})},e.prototype.sendListen_=function(t){var r=this,i=t.query,o=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+o+" for "+s);var a={p:o},u="q";t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(u,a,function(l){var f=l.d,h=l.s;e.warnOnListenWarnings_(f,i);var d=r.listens.get(o)&&r.listens.get(o).get(s);d===t&&(r.log_("listen response",l),h!=="ok"&&r.removeListen_(o,s),t.onComplete&&t.onComplete(h,f))})},e.warnOnListenWarnings_=function(t,r){if(t&&typeof t=="object"&&gs(t,"w")){var i=ld(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();vi("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+o+" at ")+(s+" to your security rules for better performance."))}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var r=t&&t.length===40;(r||fpe(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=g5)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=cpe(r)?"auth":"gauth",o={cred:r};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(i,o,function(s){var a=s.s,u=s.d||"error";t.authToken_===r&&(a==="ok"?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(a,u))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(r){var i=r.s,o=r.d||"error";i==="ok"?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(i,o)})},e.prototype.unlisten=function(t,r){var i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),ge(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var s=this.removeListen_(i,o);s&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)},e.prototype.sendUnlisten_=function(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);var s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)},e.prototype.onDisconnectPut=function(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})},e.prototype.onDisconnectMerge=function(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})},e.prototype.onDisconnectCancel=function(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})},e.prototype.sendOnDisconnect_=function(t,r,i,o){var s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,function(a){o&&setTimeout(function(){o(a.s,a.d)},Math.floor(0))})},e.prototype.put=function(t,r,i,o){this.putInternal("p",t,r,i,o)},e.prototype.merge=function(t,r,i,o){this.putInternal("m",t,r,i,o)},e.prototype.putInternal=function(t,r,i,o,s){this.initConnection_();var a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;var u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)},e.prototype.sendPut_=function(t){var r=this,i=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,o,function(a){r.log_(i+" response",a),delete r.outstandingPuts_[t],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),s&&s(a.s,a.d)})},e.prototype.reportStats=function(t){var r=this;if(this.connected_){var i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,function(o){var s=o.s;if(s!=="ok"){var a=o.d;r.log_("reportStats","Error sending stats: "+a)}})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Or(t));var r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):pA("Unrecognized action received from server: "+Or(t)+`
Are you using the latest client?`)},e.prototype.onReady_=function(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var r=this;ge(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Km,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Km,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var t=new Date().getTime()-this.lastConnectionEstablishedTime_;t>Kge&&(this.reconnectDelay_=Km),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$ge)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return U(this,void 0,void 0,function(){var t,r,i,o,s,a,u,l,f,h,d,g,v,m,y=this;return V(this,function(b){switch(b.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,u=null,l=function(){u?u.close():(a=!0,i())},f=function(C){ge(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(C)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,b.label=1;case 1:return b.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=hi.apply(void 0,[b.sent(),2]),g=d[0],v=d[1],a?Gr("getToken() completed but was canceled"):(Gr("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=v&&v.token,u=new R$(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,function(C){vi(C+" ("+y.repoInfo_.toString()+")"),y.interrupt(Gge)},s)),[3,4];case 3:return m=b.sent(),this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&vi(m),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){Gr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Gr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],fA(this.interruptReasons_)&&(this.reconnectDelay_=Km,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,r){var i;r?i=r.map(function(s){return cP(s)}).join("$"):i="default";var o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")},e.prototype.removeListen_=function(t,r){var i=new sn(t).toString(),o;if(this.listens.has(i)){var s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o},e.prototype.onAuthRevoked_=function(t,r){Gr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=v5&&(this.reconnectDelay_=g5,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,r){Gr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=v5&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))},e.prototype.restoreState_=function(){var t,r,i,o;this.tryAuth(),this.tryAppCheck();try{for(var s=ei(this.listens.values()),a=s.next();!a.done;a=s.next()){var u=a.value;try{for(var l=(i=void 0,ei(u.values())),f=l.next();!f.done;f=l.next()){var h=f.value;this.sendListen_(h)}}catch(v){i={error:v}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}}catch(v){t={error:v}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}for(var d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){var g=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(g.action,g.pathString,g.data,g.onComplete)}for(var d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)},e.prototype.sendConnectStats_=function(){var t={},r="js";t["sdk."+r+"."+f$.replace(/\./g,"-")]=1,iP()?t["framework.cordova"]=1:r$()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=h5.getInstance().currentlyOnline();return fA(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(M$);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt=function(){function n(e,t){this.name=e,this.node=t}return n.Wrap=function(e,t){return new n(e,t)},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OE=function(){function n(){}return n.prototype.getCompare=function(){return this.compare.bind(this)},n.prototype.indexedValueChanged=function(e,t){var r=new Mt(_l,e),i=new Mt(_l,t);return this.compare(r,i)!==0},n.prototype.minPost=function(){return Mt.MIN},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hw,W$=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Hw},set:function(t){Hw=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,r){return Ad(t.name,r.name)},e.prototype.isDefinedOn=function(t){throw Dv("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,r){return!1},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return new Mt(_u,Hw)},e.prototype.makePost=function(t,r){return ge(typeof t=="string","KeyIndex indexValue must always be a string."),new Mt(t,Hw)},e.prototype.toString=function(){return".key"},e}(OE),su=new W$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uw=function(){function n(e,t,r,i,o){o===void 0&&(o=null),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var s=1;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}return n.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},n.prototype.hasNext=function(){return this.nodeStack_.length>0},n.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},n}(),aa=function(){function n(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??il.EMPTY_NODE,this.right=o??il.EMPTY_NODE}return n.prototype.copy=function(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)},n.prototype.count=function(){return this.left.count()+1+this.right.count()},n.prototype.isEmpty=function(){return!1},n.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},n.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},n.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},n.prototype.minKey=function(){return this.min_().key},n.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},n.prototype.insert=function(e,t,r){var i=this,o=r(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp_()},n.prototype.removeMin_=function(){if(this.left.isEmpty())return il.EMPTY_NODE;var e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()},n.prototype.remove=function(e,t){var r,i;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return il.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()},n.prototype.isRed_=function(){return this.color},n.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},n.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},n.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},n.prototype.rotateLeft_=function(){var e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},n.prototype.rotateRight_=function(){var e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},n.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},n.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},n.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},n.RED=!0,n.BLACK=!1,n}(),Yge=function(){function n(){}return n.prototype.copy=function(e,t,r,i,o){return this},n.prototype.insert=function(e,t,r){return new aa(e,t,null)},n.prototype.remove=function(e,t){return this},n.prototype.count=function(){return 0},n.prototype.isEmpty=function(){return!0},n.prototype.inorderTraversal=function(e){return!1},n.prototype.reverseTraversal=function(e){return!1},n.prototype.minKey=function(){return null},n.prototype.maxKey=function(){return null},n.prototype.check_=function(){return 0},n.prototype.isRed_=function(){return!1},n}(),il=function(){function n(e,t){t===void 0&&(t=n.EMPTY_NODE),this.comparator_=e,this.root_=t}return n.prototype.insert=function(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,aa.BLACK,null,null))},n.prototype.remove=function(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,aa.BLACK,null,null))},n.prototype.get=function(e){for(var t,r=this.root_;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null},n.prototype.getPredecessorKey=function(e){for(var t,r=this.root_,i=null;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},n.prototype.isEmpty=function(){return this.root_.isEmpty()},n.prototype.count=function(){return this.root_.count()},n.prototype.minKey=function(){return this.root_.minKey()},n.prototype.maxKey=function(){return this.root_.maxKey()},n.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},n.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},n.prototype.getIterator=function(e){return new Uw(this.root_,null,this.comparator_,!1,e)},n.prototype.getIteratorFrom=function(e,t){return new Uw(this.root_,e,this.comparator_,!1,t)},n.prototype.getReverseIteratorFrom=function(e,t){return new Uw(this.root_,e,this.comparator_,!0,t)},n.prototype.getReverseIterator=function(e){return new Uw(this.root_,null,this.comparator_,!0,e)},n.EMPTY_NODE=new Yge,n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zge(n,e){return Ad(n.name,e.name)}function _P(n,e){return Ad(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vA;function Xge(n){vA=n}var V$=function(n){return typeof n=="number"?"number:"+_$(n):"string:"+n},H$=function(n){if(n.isLeafNode()){var e=n.val();ge(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gs(e,".sv"),"Priority must be a string or number.")}else ge(n===vA||n.isEmpty(),"priority of unexpected type.");ge(n===vA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m5,Fg=function(){function n(e,t){t===void 0&&(t=n.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ge(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),H$(this.priorityNode_)}return Object.defineProperty(n,"__childrenNodeConstructor",{get:function(){return m5},set:function(e){m5=e},enumerable:!1,configurable:!0}),n.prototype.isLeafNode=function(){return!0},n.prototype.getPriority=function(){return this.priorityNode_},n.prototype.updatePriority=function(e){return new n(this.value_,e)},n.prototype.getImmediateChild=function(e){return e===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE},n.prototype.getChild=function(e){return Et(e)?this:St(e)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE},n.prototype.hasChild=function(){return!1},n.prototype.getPredecessorChildName=function(e,t){return null},n.prototype.updateImmediateChild=function(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)},n.prototype.updateChild=function(e,t){var r=St(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ge(r!==".priority"||Zc(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Cn(e),t)))},n.prototype.isEmpty=function(){return!1},n.prototype.numChildren=function(){return 0},n.prototype.forEachChild=function(e,t){return!1},n.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},n.prototype.hash=function(){if(this.lazyHash_===null){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+V$(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",t==="number"?e+=_$(this.value_):e+=this.value_,this.lazyHash_=g$(e)}return this.lazyHash_},n.prototype.getValue=function(){return this.value_},n.prototype.compareTo=function(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(ge(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},n.prototype.compareToLeafNode_=function(e){var t=typeof e.value_,r=typeof this.value_,i=n.VALUE_TYPE_ORDER.indexOf(t),o=n.VALUE_TYPE_ORDER.indexOf(r);return ge(i>=0,"Unknown leaf type: "+t),ge(o>=0,"Unknown leaf type: "+r),i===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},n.prototype.withIndex=function(){return this},n.prototype.isIndexed=function(){return!0},n.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1},n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U$,j$;function Qge(n){U$=n}function Jge(n){j$=n}var eve=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.compare=function(t,r){var i=t.node.getPriority(),o=r.node.getPriority(),s=i.compareTo(o);return s===0?Ad(t.name,r.name):s},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,r){return!t.getPriority().equals(r.getPriority())},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return new Mt(_u,new Fg("[PRIORITY-POST]",j$))},e.prototype.makePost=function(t,r){var i=U$(t);return new Mt(r,new Fg("[PRIORITY-POST]",i))},e.prototype.toString=function(){return".priority"},e}(OE),Ln=new eve;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tve=Math.log(2),nve=function(){function n(e){var t=function(o){return parseInt(Math.log(o)/tve,10)},r=function(o){return parseInt(Array(o+1).join("1"),2)};this.count=t(e+1),this.current_=this.count-1;var i=r(this.count);this.bits_=e+1&i}return n.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},n}(),T1=function(n,e,t,r){n.sort(e);var i=function(u,l){var f=l-u,h,d;if(f===0)return null;if(f===1)return h=n[u],d=t?t(h):h,new aa(d,h.node,aa.BLACK,null,null);var g=parseInt(f/2,10)+u,v=i(u,g),m=i(g+1,l);return h=n[g],d=t?t(h):h,new aa(d,h.node,aa.BLACK,v,m)},o=function(u){for(var l=null,f=null,h=n.length,d=function(b,C){var E=h-b,D=h;h-=b;var k=i(E+1,D),I=n[E],T=t?t(I):I;g(new aa(T,I.node,C,null,k))},g=function(b){l?(l.left=b,l=b):(f=b,l=b)},v=0;v<u.count;++v){var m=u.nextBitIsOne(),y=Math.pow(2,u.count-(v+1));m?d(y,aa.BLACK):(d(y,aa.BLACK),d(y,aa.RED))}return f},s=new nve(n.length),a=o(s);return new il(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bk,Dp={},N1=function(){function n(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(n,"Default",{get:function(){return ge(Dp&&Ln,"ChildrenNode.ts has not been loaded"),Bk=Bk||new n({".priority":Dp},{".priority":Ln}),Bk},enumerable:!1,configurable:!0}),n.prototype.get=function(e){var t=ld(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof il?t:null},n.prototype.hasIndex=function(e){return gs(this.indexSet_,e.toString())},n.prototype.addIndex=function(e,t){ge(e!==su,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,o=t.getIterator(Mt.Wrap),s=o.getNext();s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();var a;i?a=T1(r,e.getCompare()):a=Dp;var u=e.toString(),l=Je({},this.indexSet_);l[u]=e;var f=Je({},this.indexes_);return f[u]=a,new n(f,l)},n.prototype.addToIndexes=function(e,t){var r=this,i=x1(this.indexes_,function(o,s){var a=ld(r.indexSet_,s);if(ge(a,"Missing index implementation for "+s),o===Dp)if(a.isDefinedOn(e.node)){for(var u=[],l=t.getIterator(Mt.Wrap),f=l.getNext();f;)f.name!==e.name&&u.push(f),f=l.getNext();return u.push(e),T1(u,a.getCompare())}else return Dp;else{var h=t.get(e.name),d=o;return h&&(d=d.remove(new Mt(e.name,h))),d.insert(e,e.node)}});return new n(i,this.indexSet_)},n.prototype.removeFromIndexes=function(e,t){var r=x1(this.indexes_,function(i){if(i===Dp)return i;var o=t.get(e.name);return o?i.remove(new Mt(e.name,o)):i});return new n(r,this.indexSet_)},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gm,ht=function(){function n(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&H$(this.priorityNode_),this.children_.isEmpty()&&ge(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(n,"EMPTY_NODE",{get:function(){return Gm||(Gm=new n(new il(_P),null,N1.Default))},enumerable:!1,configurable:!0}),n.prototype.isLeafNode=function(){return!1},n.prototype.getPriority=function(){return this.priorityNode_||Gm},n.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)},n.prototype.getImmediateChild=function(e){if(e===".priority")return this.getPriority();var t=this.children_.get(e);return t===null?Gm:t},n.prototype.getChild=function(e){var t=St(e);return t===null?this:this.getImmediateChild(t).getChild(Cn(e))},n.prototype.hasChild=function(e){return this.children_.get(e)!==null},n.prototype.updateImmediateChild=function(e,t){if(ge(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);var r=new Mt(e,t),i=void 0,o=void 0;t.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Gm:this.priorityNode_;return new n(i,s,o)},n.prototype.updateChild=function(e,t){var r=St(e);if(r===null)return t;ge(St(e)!==".priority"||Zc(e)===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(Cn(e),t);return this.updateImmediateChild(r,i)},n.prototype.isEmpty=function(){return this.children_.isEmpty()},n.prototype.numChildren=function(){return this.children_.count()},n.prototype.val=function(e){if(this.isEmpty())return null;var t={},r=0,i=0,o=!0;if(this.forEachChild(Ln,function(u,l){t[u]=l.val(e),r++,o&&n.INTEGER_REGEXP_.test(u)?i=Math.max(i,Number(u)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in t)s[a]=t[a];return s}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t},n.prototype.hash=function(){if(this.lazyHash_===null){var e="";this.getPriority().isEmpty()||(e+="priority:"+V$(this.getPriority().val())+":"),this.forEachChild(Ln,function(t,r){var i=r.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":g$(e)}return this.lazyHash_},n.prototype.getPredecessorChildName=function(e,t,r){var i=this.resolveIndex_(r);if(i){var o=i.getPredecessorKey(new Mt(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)},n.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.minKey();return r&&r.name}else return this.children_.minKey()},n.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Mt(t,this.children_.get(t)):null},n.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.maxKey();return r&&r.name}else return this.children_.maxKey()},n.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Mt(t,this.children_.get(t)):null},n.prototype.forEachChild=function(e,t){var r=this.resolveIndex_(e);return r?r.inorderTraversal(function(i){return t(i.name,i.node)}):this.children_.inorderTraversal(t)},n.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},n.prototype.getIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,function(s){return s});for(var i=this.children_.getIteratorFrom(e.name,Mt.Wrap),o=i.peek();o!=null&&t.compare(o,e)<0;)i.getNext(),o=i.peek();return i},n.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},n.prototype.getReverseIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,function(s){return s});for(var i=this.children_.getReverseIteratorFrom(e.name,Mt.Wrap),o=i.peek();o!=null&&t.compare(o,e)>0;)i.getNext(),o=i.peek();return i},n.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===A0?-1:0},n.prototype.withIndex=function(e){if(e===su||this.indexMap_.hasIndex(e))return this;var t=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,t)},n.prototype.isIndexed=function(e){return e===su||this.indexMap_.hasIndex(e)},n.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){for(var r=this.getIterator(Ln),i=t.getIterator(Ln),o=r.getNext(),s=i.getNext();o&&s;){if(o.name!==s.name||!o.node.equals(s.node))return!1;o=r.getNext(),s=i.getNext()}return o===null&&s===null}else return!1;else return!1},n.prototype.resolveIndex_=function(e){return e===su?null:this.indexMap_.get(e.toString())},n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n}(),rve=function(n){Ie(e,n);function e(){return n.call(this,new il(_P),ht.EMPTY_NODE,N1.Default)||this}return e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ht),A0=new rve;Object.defineProperties(Mt,{MIN:{value:new Mt(_l,ht.EMPTY_NODE)},MAX:{value:new Mt(_u,A0)}});W$.__EMPTY_NODE=ht.EMPTY_NODE;Fg.__childrenNodeConstructor=ht;Xge(A0);Jge(A0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ive=!0;function zn(n,e){if(e===void 0&&(e=null),n===null)return ht.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ge(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){var t=n;return new Fg(t,zn(e))}if(!(n instanceof Array)&&ive){var r=[],i=!1,o=n;if(Fr(o,function(l,f){if(l.substring(0,1)!=="."){var h=zn(f);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),r.push(new Mt(l,h)))}}),r.length===0)return ht.EMPTY_NODE;var s=T1(r,Zge,function(l){return l.name},_P);if(i){var a=T1(r,Ln.getCompare());return new ht(s,zn(e),new N1({".priority":a},{".priority":Ln}))}else return new ht(s,zn(e),N1.Default)}else{var u=ht.EMPTY_NODE;return Fr(n,function(l,f){if(gs(n,l)&&l.substring(0,1)!=="."){var h=zn(f);(h.isLeafNode()||!h.isEmpty())&&(u=u.updateImmediateChild(l,h))}}),u.updatePriority(zn(e))}}Qge(zn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yP=function(n){Ie(e,n);function e(t){var r=n.call(this)||this;return r.indexPath_=t,ge(!Et(t)&&St(t)!==".priority","Can't create PathIndex with empty path or .priority key"),r}return e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,r){var i=this.extractChild(t.node),o=this.extractChild(r.node),s=i.compareTo(o);return s===0?Ad(t.name,r.name):s},e.prototype.makePost=function(t,r){var i=zn(t),o=ht.EMPTY_NODE.updateChild(this.indexPath_,i);return new Mt(r,o)},e.prototype.maxPost=function(){var t=ht.EMPTY_NODE.updateChild(this.indexPath_,A0);return new Mt(_u,t)},e.prototype.toString=function(){return Cy(this.indexPath_,0).join("/")},e}(OE);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ove=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.compare=function(t,r){var i=t.node.compareTo(r.node);return i===0?Ad(t.name,r.name):i},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,r){return!t.equals(r)},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return Mt.MAX},e.prototype.makePost=function(t,r){var i=zn(t);return new Mt(r,i)},e.prototype.toString=function(){return".value"},e}(OE),bP=new ove;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mA="-",z$="z",q$=786,sve=function(){var n=0,e=[];return function(t){var r=t===n;n=t;var i,o=new Array(8);for(i=7;i>=0;i--)o[i]=Bg.charAt(t%64),t=Math.floor(t/64);ge(t===0,"Cannot push at time == 0");var s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=Bg.charAt(e[i]);return ge(s.length===20,"nextPushId: Length should be 20."),s}}(),_5=function(n){if(n===""+fP)return mA;var e=L1(n);if(e!=null)return""+(e+1);for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n.charAt(r);if(t.length<q$)return t.push(mA),t.join("");for(var i=t.length-1;i>=0&&t[i]===z$;)i--;if(i===-1)return _u;var o=t[i],s=Bg.charAt(Bg.indexOf(o)+1);return t[i]=s,t.slice(0,i+1).join("")},y5=function(n){if(n===""+y$)return _l;var e=L1(n);if(e!=null)return""+(e-1);for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n.charAt(r);return t[t.length-1]===mA?t.length===1?""+fP:(delete t[t.length-1],t.join("")):(t[t.length-1]=Bg.charAt(Bg.indexOf(t[t.length-1])-1),t.join("")+z$.repeat(q$-t.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(n){return{type:"value",snapshotNode:n}}function Wg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Sy(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ey(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function ave(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wP=function(){function n(e){this.index_=e}return n.prototype.updateChild=function(e,t,r,i,o,s){ge(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(t)?s.trackChildChange(Sy(t,a)):ge(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Wg(t,r)):s.trackChildChange(Ey(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)},n.prototype.updateFullNode=function(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ln,function(i,o){t.hasChild(i)||r.trackChildChange(Sy(i,o))}),t.isLeafNode()||t.forEachChild(Ln,function(i,o){if(e.hasChild(i)){var s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Ey(i,o,s))}else r.trackChildChange(Wg(i,o))})),t.withIndex(this.index_)},n.prototype.updatePriority=function(e,t){return e.isEmpty()?ht.EMPTY_NODE:e.updatePriority(t)},n.prototype.filtersNodes=function(){return!1},n.prototype.getIndexedFilter=function(){return this},n.prototype.getIndex=function(){return this.index_},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K$=function(){function n(e){this.indexedFilter_=new wP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e)}return n.prototype.getStartPost=function(){return this.startPost_},n.prototype.getEndPost=function(){return this.endPost_},n.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},n.prototype.updateChild=function(e,t,r,i,o,s){return this.matches(new Mt(t,r))||(r=ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,s)},n.prototype.updateFullNode=function(e,t,r){t.isLeafNode()&&(t=ht.EMPTY_NODE);var i=t.withIndex(this.index_);i=i.updatePriority(ht.EMPTY_NODE);var o=this;return t.forEachChild(Ln,function(s,a){o.matches(new Mt(s,a))||(i=i.updateImmediateChild(s,ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)},n.prototype.updatePriority=function(e,t){return e},n.prototype.filtersNodes=function(){return!0},n.prototype.getIndexedFilter=function(){return this.indexedFilter_},n.prototype.getIndex=function(){return this.index_},n.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()},n.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uve=function(){function n(e){this.rangedFilter_=new K$(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return n.prototype.updateChild=function(e,t,r,i,o,s){return this.rangedFilter_.matches(new Mt(t,r))||(r=ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,s):this.fullLimitUpdateChild_(e,t,r,o,s)},n.prototype.updateFullNode=function(e,t,r){var i;if(t.isLeafNode()||t.isEmpty())i=ht.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=ht.EMPTY_NODE.withIndex(this.index_);var o=void 0;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var s=0;o.hasNext()&&s<this.limit_;){var a=o.getNext(),u=void 0;if(this.reverse_?u=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:u=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,u)i=i.updateImmediateChild(a.name,a.node),s++;else break}}else{i=t.withIndex(this.index_),i=i.updatePriority(ht.EMPTY_NODE);var l=void 0,f=void 0,h=void 0,o=void 0;if(this.reverse_){o=i.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),f=this.rangedFilter_.getStartPost();var d=this.index_.getCompare();h=function(y,b){return d(b,y)}}else o=i.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),f=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();for(var s=0,g=!1;o.hasNext();){var a=o.getNext();!g&&h(l,a)<=0&&(g=!0);var u=g&&s<this.limit_&&h(a,f)<=0;u?s++:i=i.updateImmediateChild(a.name,ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)},n.prototype.updatePriority=function(e,t){return e},n.prototype.filtersNodes=function(){return!0},n.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},n.prototype.getIndex=function(){return this.index_},n.prototype.fullLimitUpdateChild_=function(e,t,r,i,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(C,E){return a(E,C)}}else s=this.index_.getCompare();var u=e;ge(u.numChildren()===this.limit_,"");var l=new Mt(t,r),f=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(u.hasChild(t)){for(var d=u.getImmediateChild(t),g=i.getChildAfterChild(this.index_,f,this.reverse_);g!=null&&(g.name===t||u.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);var v=g==null?1:s(g,l),m=h&&!r.isEmpty()&&v>=0;if(m)return o!=null&&o.trackChildChange(Ey(t,r,d)),u.updateImmediateChild(t,r);o!=null&&o.trackChildChange(Sy(t,d));var y=u.updateImmediateChild(t,ht.EMPTY_NODE),b=g!=null&&this.rangedFilter_.matches(g);return b?(o!=null&&o.trackChildChange(Wg(g.name,g.node)),y.updateImmediateChild(g.name,g.node)):y}else return r.isEmpty()?e:h&&s(f,l)>=0?(o!=null&&(o.trackChildChange(Sy(f.name,f.node)),o.trackChildChange(Wg(t,r))),u.updateImmediateChild(t,r).updateImmediateChild(f.name,ht.EMPTY_NODE)):e},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G$=function(){function n(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ln}return n.prototype.hasStart=function(){return this.startSet_},n.prototype.hasStartAfter=function(){return this.startAfterSet_},n.prototype.hasEndBefore=function(){return this.endBeforeSet_},n.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"},n.prototype.getIndexStartValue=function(){return ge(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},n.prototype.getIndexStartName=function(){return ge(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_l},n.prototype.hasEnd=function(){return this.endSet_},n.prototype.getIndexEndValue=function(){return ge(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},n.prototype.getIndexEndName=function(){return ge(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_u},n.prototype.hasLimit=function(){return this.limitSet_},n.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},n.prototype.getLimit=function(){return ge(this.limitSet_,"Only valid if limit has been set"),this.limit_},n.prototype.getIndex=function(){return this.index_},n.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},n.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ln},n.prototype.copy=function(){var e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},n}();function lve(n){return n.loadsAllData()?new wP(n.getIndex()):n.hasLimit()?new uve(n):new K$(n)}function cve(n,e){var t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function fve(n,e){var t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function _A(n,e,t){var r=n.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,t!=null?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function hve(n,e,t){var r;if(n.index_===su)typeof e=="string"&&(e=_5(e)),r=_A(n,e,t);else{var i=void 0;t==null?i=_u:i=_5(t),r=_A(n,e,i)}return r.startAfterSet_=!0,r}function yA(n,e,t){var r=n.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,t!==void 0?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function dve(n,e,t){var r,i;return n.index_===su?(typeof e=="string"&&(e=y5(e)),i=yA(n,e,t)):(t==null?r=_l:r=y5(t),i=yA(n,e,r)),i.endBeforeSet_=!0,i}function RE(n,e){var t=n.copy();return t.index_=e,t}function b5(n){var e={};if(n.isDefault())return e;var t;return n.index_===Ln?t="$priority":n.index_===bP?t="$value":n.index_===su?t="$key":(ge(n.index_ instanceof yP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Or(t),n.startSet_&&(e.startAt=Or(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+Or(n.indexStartName_))),n.endSet_&&(e.endAt=Or(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+Or(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function w5(n){var e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;var t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ln&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pve=function(n){Ie(e,n);function e(t,r,i,o){var s=n.call(this)||this;return s.repoInfo_=t,s.onDataUpdate_=r,s.authTokenProvider_=i,s.appCheckTokenProvider_=o,s.log_=N0("p:rest:"),s.listens_={},s}return e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,r){return r!==void 0?"tag$"+r:(ge(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,r,i,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,i),l={};this.listens_[u]=l;var f=b5(t._queryParams);this.restRequest_(a+".json",f,function(h,d){var g=d;if(h===404&&(g=null,h=null),h===null&&s.onDataUpdate_(a,g,!1,i),ld(s.listens_,u)===l){var v;h?h===401?v="permission_denied":v="rest_error:"+h:v="ok",o(v,null)}})},e.prototype.unlisten=function(t,r){var i=e.getListenId_(t,r);delete this.listens_[i]},e.prototype.get=function(t){var r=this,i=b5(t._queryParams),o=t._path.toString(),s=new Qr;return this.restRequest_(o+".json",i,function(a,u){var l=u;a===404&&(l=null,a=null),a===null?(r.onDataUpdate_(o,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,r,i){var o=this;return r===void 0&&(r={}),r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=hi(s,2),u=a[0],l=a[1];u&&u.accessToken&&(r.auth=u.accessToken),l&&l.token&&(r.ac=l.token);var f=(o.repoInfo_.secure?"https://":"http://")+o.repoInfo_.host+t+"?ns="+o.repoInfo_.namespace+hpe(r);o.log_("Sending REST request for "+f);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(i&&h.readyState===4){o.log_("REST Response for "+f+" received. status:",h.status,"response:",h.responseText);var d=null;if(h.status>=200&&h.status<300){try{d=wy(h.responseText)}catch{vi("Failed to parse JSON response for "+f+": "+h.responseText)}i(null,d)}else h.status!==401&&h.status!==404&&vi("Got unsuccessful REST response for "+f+" Status: "+h.status),i(h.status);i=null}},h.open("GET",f,!0),h.send()})},e}(M$);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gve=function(){function n(){this.rootNode_=ht.EMPTY_NODE}return n.prototype.getNode=function(e){return this.rootNode_.getChild(e)},n.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return{value:null,children:new Map}}function Tv(n,e,t){if(Et(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{var r=St(e);n.children.has(r)||n.children.set(r,A1());var i=n.children.get(r);e=Cn(e),Tv(i,e,t)}}function bA(n,e){if(Et(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;var t=n.value;return n.value=null,t.forEachChild(Ln,function(o,s){Tv(n,new sn(o),s)}),bA(n,e)}else if(n.children.size>0){var r=St(e);if(e=Cn(e),n.children.has(r)){var i=bA(n.children.get(r),e);i&&n.children.delete(r)}return n.children.size===0}else return!0}function wA(n,e,t){n.value!==null?t(e,n.value):vve(n,function(r,i){var o=new sn(e.toString()+"/"+r);wA(i,o,t)})}function vve(n,e){n.children.forEach(function(t,r){e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y$=function(){function n(e){this.collection_=e,this.last_=null}return n.prototype.get=function(){var e=this.collection_.get(),t=Je({},e);return this.last_&&Fr(this.last_,function(r,i){t[r]=t[r]-i}),this.last_=e,t},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C5=10*1e3,mve=30*1e3,_ve=5*60*1e3,yve=function(){function n(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Y$(e);var r=C5+(mve-C5)*Math.random();M_(this.reportStats_.bind(this),Math.floor(r))}return n.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),r={},i=!1;Fr(t,function(o,s){s>0&&gs(e.statsToReport_,o)&&(r[o]=s,i=!0)}),i&&this.server_.reportStats(r),M_(this.reportStats_.bind(this),Math.floor(Math.random()*2*_ve))},n}();function bve(n,e){n.statsToReport_[e]=!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ya;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ya||(ya={}));function CP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function SP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function EP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wve=function(){function n(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ya.ACK_USER_WRITE,this.source=CP()}return n.prototype.operationForChild=function(e){if(Et(this.path)){if(this.affectedTree.value!=null)return ge(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var t=this.affectedTree.subtree(new sn(e));return new n(Gt(),t,this.revert)}else return ge(St(this.path)===e,"operationForChild called for unrelated child."),new n(Cn(this.path),this.affectedTree,this.revert)},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z$=function(){function n(e,t){this.source=e,this.path=t,this.type=ya.LISTEN_COMPLETE}return n.prototype.operationForChild=function(e){return Et(this.path)?new n(this.source,Gt()):new n(this.source,Cn(this.path))},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ME=function(){function n(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ya.OVERWRITE}return n.prototype.operationForChild=function(e){return Et(this.path)?new n(this.source,Gt(),this.snap.getImmediateChild(e)):new n(this.source,Cn(this.path),this.snap)},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IP=function(){function n(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ya.MERGE}return n.prototype.operationForChild=function(e){if(Et(this.path)){var t=this.children.subtree(new sn(e));return t.isEmpty()?null:t.value?new ME(this.source,Gt(),t.value):new n(this.source,Gt(),t)}else return ge(St(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Cn(this.path),this.children)},n.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xc=function(){function n(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}return n.prototype.isFullyInitialized=function(){return this.fullyInitialized_},n.prototype.isFiltered=function(){return this.filtered_},n.prototype.isCompleteForPath=function(e){if(Et(e))return this.isFullyInitialized()&&!this.filtered_;var t=St(e);return this.isCompleteForChild(t)},n.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},n.prototype.getNode=function(){return this.node_},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cve=function(){function n(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}return n}();function Sve(n,e,t,r){var i=[],o=[];return e.forEach(function(s){s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(ave(s.childName,s.snapshotNode))}),Ym(n,i,"child_removed",e,r,t),Ym(n,i,"child_added",e,r,t),Ym(n,i,"child_moved",o,r,t),Ym(n,i,"child_changed",e,r,t),Ym(n,i,"value",e,r,t),i}function Ym(n,e,t,r,i,o){var s=r.filter(function(a){return a.type===t});s.sort(function(a,u){return Ive(n,a,u)}),s.forEach(function(a){var u=Eve(n,a,o);i.forEach(function(l){l.respondsTo(a.type)&&e.push(l.createEvent(u,n.query_))})})}function Eve(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Ive(n,e,t){if(e.childName==null||t.childName==null)throw Dv("Should only compare child_ events.");var r=new Mt(e.childName,e.snapshotNode),i=new Mt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n,e){return{eventCache:n,serverCache:e}}function F_(n,e,t,r){return PE(new Xc(e,t,r),n.serverCache)}function X$(n,e,t,r){return PE(n.eventCache,new Xc(e,t,r))}function O1(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function cd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wk,xve=function(){return Wk||(Wk=new il(rge)),Wk},vs=function(){function n(e,t){t===void 0&&(t=xve()),this.value=e,this.children=t}return n.fromObject=function(e){var t=new n(null);return Fr(e,function(r,i){t=t.set(new sn(r),i)}),t},n.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},n.prototype.findRootMostMatchingPathAndValue=function(e,t){if(this.value!=null&&t(this.value))return{path:Gt(),value:this.value};if(Et(e))return null;var r=St(e),i=this.children.get(r);if(i!==null){var o=i.findRootMostMatchingPathAndValue(Cn(e),t);if(o!=null){var s=Wn(new sn(r),o.path);return{path:s,value:o.value}}else return null}else return null},n.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},n.prototype.subtree=function(e){if(Et(e))return this;var t=St(e),r=this.children.get(t);return r!==null?r.subtree(Cn(e)):new n(null)},n.prototype.set=function(e,t){if(Et(e))return new n(t,this.children);var r=St(e),i=this.children.get(r)||new n(null),o=i.set(Cn(e),t),s=this.children.insert(r,o);return new n(this.value,s)},n.prototype.remove=function(e){if(Et(e))return this.children.isEmpty()?new n(null):new n(null,this.children);var t=St(e),r=this.children.get(t);if(r){var i=r.remove(Cn(e)),o=void 0;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this},n.prototype.get=function(e){if(Et(e))return this.value;var t=St(e),r=this.children.get(t);return r?r.get(Cn(e)):null},n.prototype.setTree=function(e,t){if(Et(e))return t;var r=St(e),i=this.children.get(r)||new n(null),o=i.setTree(Cn(e),t),s=void 0;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)},n.prototype.fold=function(e){return this.fold_(Gt(),e)},n.prototype.fold_=function(e,t){var r={};return this.children.inorderTraversal(function(i,o){r[i]=o.fold_(Wn(e,i),t)}),t(e,this.value,r)},n.prototype.findOnPath=function(e,t){return this.findOnPath_(e,Gt(),t)},n.prototype.findOnPath_=function(e,t,r){var i=this.value?r(t,this.value):!1;if(i)return i;if(Et(e))return null;var o=St(e),s=this.children.get(o);return s?s.findOnPath_(Cn(e),Wn(t,o),r):null},n.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,Gt(),t)},n.prototype.foreachOnPath_=function(e,t,r){if(Et(e))return this;this.value&&r(t,this.value);var i=St(e),o=this.children.get(i);return o?o.foreachOnPath_(Cn(e),Wn(t,i),r):new n(null)},n.prototype.foreach=function(e){this.foreach_(Gt(),e)},n.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(r,i){i.foreach_(Wn(e,r),t)}),this.value&&t(e,this.value)},n.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,r){r.value&&e(t,r.value)})},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fl=function(){function n(e){this.writeTree_=e}return n.empty=function(){return new n(new vs(null))},n}();function B_(n,e,t){if(Et(e))return new fl(new vs(t));var r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){var i=r.path,o=r.value,s=ho(i,e);return o=o.updateChild(s,t),new fl(n.writeTree_.set(i,o))}else{var a=new vs(t),u=n.writeTree_.setTree(e,a);return new fl(u)}}function CA(n,e,t){var r=n;return Fr(t,function(i,o){r=B_(r,Wn(e,i),o)}),r}function S5(n,e){if(Et(e))return fl.empty();var t=n.writeTree_.setTree(e,new vs(null));return new fl(t)}function SA(n,e){return Od(n,e)!=null}function Od(n,e){var t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ho(t.path,e)):null}function E5(n){var e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ln,function(r,i){e.push(new Mt(r,i))}):n.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&e.push(new Mt(r,i.value))}),e}function Oc(n,e){if(Et(e))return n;var t=Od(n,e);return t!=null?new fl(new vs(t)):new fl(n.writeTree_.subtree(e))}function EA(n){return n.writeTree_.isEmpty()}function Vg(n,e){return Q$(Gt(),n.writeTree_,e)}function Q$(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);var r=null;return e.children.inorderTraversal(function(i,o){i===".priority"?(ge(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=Q$(Wn(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Wn(n,".priority"),r)),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n,e){return nK(e,n)}function Dve(n,e,t,r,i){ge(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=B_(n.visibleWrites,e,t)),n.lastWriteId=r}function Lve(n,e,t,r){ge(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=CA(n.visibleWrites,e,t),n.lastWriteId=r}function kve(n,e){for(var t=0;t<n.allWrites.length;t++){var r=n.allWrites[t];if(r.writeId===e)return r}return null}function Tve(n,e){var t=n.allWrites.findIndex(function(l){return l.writeId===e});ge(t>=0,"removeWrite called with nonexistent writeId.");var r=n.allWrites[t];n.allWrites.splice(t,1);for(var i=r.visible,o=!1,s=n.allWrites.length-1;i&&s>=0;){var a=n.allWrites[s];a.visible&&(s>=t&&Nve(a,r.path)?i=!1:Os(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return Ave(n),!0;if(r.snap)n.visibleWrites=S5(n.visibleWrites,r.path);else{var u=r.children;Fr(u,function(l){n.visibleWrites=S5(n.visibleWrites,Wn(r.path,l))})}return!0}else return!1}function Nve(n,e){if(n.snap)return Os(n.path,e);for(var t in n.children)if(n.children.hasOwnProperty(t)&&Os(Wn(n.path,t),e))return!0;return!1}function Ave(n){n.visibleWrites=J$(n.allWrites,Ove,Gt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Ove(n){return n.visible}function J$(n,e,t){for(var r=fl.empty(),i=0;i<n.length;++i){var o=n[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)Os(t,s)?(a=ho(t,s),r=B_(r,a,o.snap)):Os(s,t)&&(a=ho(s,t),r=B_(r,Gt(),o.snap.getChild(a)));else if(o.children){if(Os(t,s))a=ho(t,s),r=CA(r,a,o.children);else if(Os(s,t))if(a=ho(s,t),Et(a))r=CA(r,Gt(),o.children);else{var u=ld(o.children,St(a));if(u){var l=u.getChild(Cn(a));r=B_(r,Gt(),l)}}}else throw Dv("WriteRecord should have .snap or .children")}}return r}function eK(n,e,t,r,i){if(!r&&!i){var o=Od(n.visibleWrites,e);if(o!=null)return o;var s=Oc(n.visibleWrites,e);if(EA(s))return t;if(t==null&&!SA(s,Gt()))return null;var a=t||ht.EMPTY_NODE;return Vg(s,a)}else{var u=Oc(n.visibleWrites,e);if(!i&&EA(u))return t;if(!i&&t==null&&!SA(u,Gt()))return null;var l=function(d){return(d.visible||i)&&(!r||!~r.indexOf(d.writeId))&&(Os(d.path,e)||Os(e,d.path))},f=J$(n.allWrites,l,e),a=t||ht.EMPTY_NODE;return Vg(f,a)}}function Rve(n,e,t){var r=ht.EMPTY_NODE,i=Od(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ln,function(a,u){r=r.updateImmediateChild(a,u)}),r;if(t){var o=Oc(n.visibleWrites,e);return t.forEachChild(Ln,function(a,u){var l=Vg(Oc(o,new sn(a)),u);r=r.updateImmediateChild(a,l)}),E5(o).forEach(function(a){r=r.updateImmediateChild(a.name,a.node)}),r}else{var s=Oc(n.visibleWrites,e);return E5(s).forEach(function(a){r=r.updateImmediateChild(a.name,a.node)}),r}}function Mve(n,e,t,r,i){ge(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=Wn(e,t);if(SA(n.visibleWrites,o))return null;var s=Oc(n.visibleWrites,o);return EA(s)?i.getChild(t):Vg(s,i.getChild(t))}function Pve(n,e,t,r){var i=Wn(e,t),o=Od(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){var s=Oc(n.visibleWrites,i);return Vg(s,r.getNode().getImmediateChild(t))}else return null}function Fve(n,e){return Od(n.visibleWrites,e)}function Bve(n,e,t,r,i,o,s){var a,u=Oc(n.visibleWrites,e),l=Od(u,Gt());if(l!=null)a=l;else if(t!=null)a=Vg(u,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){for(var f=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),g=d.getNext();g&&f.length<i;)h(g,r)!==0&&f.push(g),g=d.getNext();return f}else return[]}function Wve(){return{visibleWrites:fl.empty(),allWrites:[],lastWriteId:-1}}function R1(n,e,t,r){return eK(n.writeTree,n.treePath,e,t,r)}function xP(n,e){return Rve(n.writeTree,n.treePath,e)}function I5(n,e,t,r){return Mve(n.writeTree,n.treePath,e,t,r)}function M1(n,e){return Fve(n.writeTree,Wn(n.treePath,e))}function Vve(n,e,t,r,i,o){return Bve(n.writeTree,n.treePath,e,t,r,i,o)}function DP(n,e,t){return Pve(n.writeTree,n.treePath,e,t)}function tK(n,e){return nK(Wn(n.treePath,e),n.writeTree)}function nK(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hve=function(){function n(){this.changeMap=new Map}return n.prototype.trackChildChange=function(e){var t=e.type,r=e.childName;ge(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ge(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Ey(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,Sy(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Wg(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ey(r,e.snapshotNode,i.oldSnap));else throw Dv("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)},n.prototype.getChanges=function(){return Array.from(this.changeMap.values())},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uve=function(){function n(){}return n.prototype.getCompleteChild=function(e){return null},n.prototype.getChildAfterChild=function(e,t,r){return null},n}(),rK=new Uve,LP=function(){function n(e,t,r){r===void 0&&(r=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}return n.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var r=this.optCompleteServerCache_!=null?new Xc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return DP(this.writes_,e,r)},n.prototype.getChildAfterChild=function(e,t,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:cd(this.viewCache_),o=Vve(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jve(n){return{filter:n}}function zve(n,e){ge(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ge(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function qve(n,e,t,r,i){var o=new Hve,s,a;if(t.type===ya.OVERWRITE){var u=t;u.source.fromUser?s=IA(n,e,u.path,u.snap,r,i,o):(ge(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Et(u.path),s=P1(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===ya.MERGE){var l=t;l.source.fromUser?s=Kve(n,e,l.path,l.children,r,i,o):(ge(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=xA(n,e,l.path,l.children,r,i,a,o))}else if(t.type===ya.ACK_USER_WRITE){var f=t;f.revert?s=Zve(n,e,f.path,r,i,o):s=Gve(n,e,f.path,f.affectedTree,r,i,o)}else if(t.type===ya.LISTEN_COMPLETE)s=Yve(n,e,t.path,r,o);else throw Dv("Unknown operation type: "+t.type);var h=o.getChanges();return $ve(e,s,h),{viewCache:s,changes:h}}function $ve(n,e,t){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=O1(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push($$(O1(e)))}}function iK(n,e,t,r,i,o){var s=e.eventCache;if(M1(r,t)!=null)return e;var a=void 0,u=void 0;if(Et(t))if(ge(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=cd(e),f=l instanceof ht?l:ht.EMPTY_NODE,h=xP(r,f);a=n.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{var d=R1(r,cd(e));a=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{var g=St(t);if(g===".priority"){ge(Zc(t)===1,"Can't have a priority with additional path components");var v=s.getNode();u=e.serverCache.getNode();var m=I5(r,t,v,u);m!=null?a=n.filter.updatePriority(v,m):a=s.getNode()}else{var y=Cn(t),b=void 0;if(s.isCompleteForChild(g)){u=e.serverCache.getNode();var C=I5(r,t,s.getNode(),u);C!=null?b=s.getNode().getImmediateChild(g).updateChild(y,C):b=s.getNode().getImmediateChild(g)}else b=DP(r,g,e.serverCache);b!=null?a=n.filter.updateChild(s.getNode(),g,b,y,i,o):a=s.getNode()}}return F_(e,a,s.isFullyInitialized()||Et(t),n.filter.filtersNodes())}function P1(n,e,t,r,i,o,s,a){var u=e.serverCache,l,f=s?n.filter:n.filter.getIndexedFilter();if(Et(t))l=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(t,r);l=f.updateFullNode(u.getNode(),h,null)}else{var d=St(t);if(!u.isCompleteForPath(t)&&Zc(t)>1)return e;var g=Cn(t),v=u.getNode().getImmediateChild(d),m=v.updateChild(g,r);d===".priority"?l=f.updatePriority(u.getNode(),m):l=f.updateChild(u.getNode(),d,m,g,rK,null)}var y=X$(e,l,u.isFullyInitialized()||Et(t),f.filtersNodes()),b=new LP(i,y,o);return iK(n,y,t,i,b,a)}function IA(n,e,t,r,i,o,s){var a=e.eventCache,u,l,f=new LP(i,e,o);if(Et(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,s),u=F_(e,l,!0,n.filter.filtersNodes());else{var h=St(t);if(h===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),u=F_(e,l,a.isFullyInitialized(),a.isFiltered());else{var d=Cn(t),g=a.getNode().getImmediateChild(h),v=void 0;if(Et(d))v=r;else{var m=f.getCompleteChild(h);m!=null?vP(d)===".priority"&&m.getChild(F$(d)).isEmpty()?v=m:v=m.updateChild(d,r):v=ht.EMPTY_NODE}if(g.equals(v))u=e;else{var y=n.filter.updateChild(a.getNode(),h,v,d,f,s);u=F_(e,y,a.isFullyInitialized(),n.filter.filtersNodes())}}}return u}function x5(n,e){return n.eventCache.isCompleteForChild(e)}function Kve(n,e,t,r,i,o,s){var a=e;return r.foreach(function(u,l){var f=Wn(t,u);x5(e,St(f))&&(a=IA(n,a,f,l,i,o,s))}),r.foreach(function(u,l){var f=Wn(t,u);x5(e,St(f))||(a=IA(n,a,f,l,i,o,s))}),a}function D5(n,e,t){return t.foreach(function(r,i){e=e.updateChild(r,i)}),e}function xA(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u=e,l;Et(t)?l=r:l=new vs(null).setTree(t,r);var f=e.serverCache.getNode();return l.children.inorderTraversal(function(h,d){if(f.hasChild(h)){var g=e.serverCache.getNode().getImmediateChild(h),v=D5(n,g,d);u=P1(n,u,new sn(h),v,i,o,s,a)}}),l.children.inorderTraversal(function(h,d){var g=!e.serverCache.isCompleteForChild(h)&&d.value===void 0;if(!f.hasChild(h)&&!g){var v=e.serverCache.getNode().getImmediateChild(h),m=D5(n,v,d);u=P1(n,u,new sn(h),m,i,o,s,a)}}),u}function Gve(n,e,t,r,i,o,s){if(M1(i,t)!=null)return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Et(t)&&u.isFullyInitialized()||u.isCompleteForPath(t))return P1(n,e,t,u.getNode().getChild(t),i,o,a,s);if(Et(t)){var l=new vs(null);return u.getNode().forEachChild(su,function(h,d){l=l.set(new sn(h),d)}),xA(n,e,t,l,i,o,a,s)}else return e}else{var f=new vs(null);return r.foreach(function(h,d){var g=Wn(t,h);u.isCompleteForPath(g)&&(f=f.set(h,u.getNode().getChild(g)))}),xA(n,e,t,f,i,o,a,s)}}function Yve(n,e,t,r,i){var o=e.serverCache,s=X$(e,o.getNode(),o.isFullyInitialized()||Et(t),o.isFiltered());return iK(n,s,t,r,rK,i)}function Zve(n,e,t,r,i,o){var s;if(M1(r,t)!=null)return e;var a=new LP(r,e,i),u=e.eventCache.getNode(),l=void 0;if(Et(t)||St(t)===".priority"){var f=void 0;if(e.serverCache.isFullyInitialized())f=R1(r,cd(e));else{var h=e.serverCache.getNode();ge(h instanceof ht,"serverChildren would be complete if leaf node"),f=xP(r,h)}f=f,l=n.filter.updateFullNode(u,f,o)}else{var d=St(t),g=DP(r,d,e.serverCache);g==null&&e.serverCache.isCompleteForChild(d)&&(g=u.getImmediateChild(d)),g!=null?l=n.filter.updateChild(u,d,g,Cn(t),a,o):e.eventCache.getNode().hasChild(d)?l=n.filter.updateChild(u,d,ht.EMPTY_NODE,Cn(t),a,o):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=R1(r,cd(e)),s.isLeafNode()&&(l=n.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||M1(r,Gt())!=null,F_(e,l,s,n.filter.filtersNodes())}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xve=function(){function n(e,t){this.query_=e,this.eventRegistrations_=[];var r=this.query_._queryParams,i=new wP(r.getIndex()),o=lve(r);this.processor_=jve(o);var s=t.serverCache,a=t.eventCache,u=i.updateFullNode(ht.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(ht.EMPTY_NODE,a.getNode(),null),f=new Xc(u,s.isFullyInitialized(),i.filtersNodes()),h=new Xc(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=PE(h,f),this.eventGenerator_=new Cve(this.query_)}return Object.defineProperty(n.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),n}();function Qve(n){return n.viewCache_.serverCache.getNode()}function Jve(n){return O1(n.viewCache_)}function eme(n,e){var t=cd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Et(e)&&!t.getImmediateChild(St(e)).isEmpty())?t.getChild(e):null}function L5(n){return n.eventRegistrations_.length===0}function tme(n,e){n.eventRegistrations_.push(e)}function k5(n,e,t){var r=[];if(t){ge(e==null,"A cancel should cancel all event registrations.");var i=n.query._path;n.eventRegistrations_.forEach(function(u){var l=u.createCancelEvent(t,i);l&&r.push(l)})}if(e){for(var o=[],s=0;s<n.eventRegistrations_.length;++s){var a=n.eventRegistrations_[s];if(!a.matches(e))o.push(a);else if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function T5(n,e,t,r){e.type===ya.MERGE&&e.source.queryId!==null&&(ge(cd(n.viewCache_),"We should always have a full cache before handling merges"),ge(O1(n.viewCache_),"Missing event cache, even though we have a server cache"));var i=n.viewCache_,o=qve(n.processor_,i,e,t,r);return zve(n.processor_,o.viewCache),ge(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,oK(n,o.changes,o.viewCache.eventCache.getNode(),null)}function nme(n,e){var t=n.viewCache_.eventCache,r=[];if(!t.getNode().isLeafNode()){var i=t.getNode();i.forEachChild(Ln,function(o,s){r.push(Wg(o,s))})}return t.isFullyInitialized()&&r.push($$(t.getNode())),oK(n,r,t.getNode(),e)}function oK(n,e,t,r){var i=r?[r]:n.eventRegistrations_;return Sve(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F1,sK=function(){function n(){this.views=new Map}return n}();function rme(n){ge(!F1,"__referenceConstructor has already been defined"),F1=n}function ime(){return ge(F1,"Reference.ts has not been loaded"),F1}function ome(n){return n.views.size===0}function kP(n,e,t,r){var i,o,s=e.source.queryId;if(s!==null){var a=n.views.get(s);return ge(a!=null,"SyncTree gave us an op for an invalid query."),T5(a,e,t,r)}else{var u=[];try{for(var l=ei(n.views.values()),f=l.next();!f.done;f=l.next()){var a=f.value;u=u.concat(T5(a,e,t,r))}}catch(h){i={error:h}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return u}}function aK(n,e,t,r,i){var o=e._queryIdentifier,s=n.views.get(o);if(!s){var a=R1(t,i?r:null),u=!1;a?u=!0:r instanceof ht?(a=xP(t,r),u=!1):(a=ht.EMPTY_NODE,u=!1);var l=PE(new Xc(a,u,!1),new Xc(r,i,!1));return new Xve(e,l)}return s}function sme(n,e,t,r,i,o){var s=aK(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,s),tme(s,t),nme(s,t)}function ame(n,e,t,r){var i,o,s=e._queryIdentifier,a=[],u=[],l=Qc(n);if(s==="default")try{for(var f=ei(n.views.entries()),h=f.next();!h.done;h=f.next()){var d=hi(h.value,2),g=d[0],v=d[1];u=u.concat(k5(v,t,r)),L5(v)&&(n.views.delete(g),v.query._queryParams.loadsAllData()||a.push(v.query))}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}else{var v=n.views.get(s);v&&(u=u.concat(k5(v,t,r)),L5(v)&&(n.views.delete(s),v.query._queryParams.loadsAllData()||a.push(v.query)))}return l&&!Qc(n)&&a.push(new(ime())(e._repo,e._path)),{removed:a,events:u}}function uK(n){var e,t,r=[];try{for(var i=ei(n.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r}function Rc(n,e){var t,r,i=null;try{for(var o=ei(n.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;i=i||eme(a,e)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}function lK(n,e){var t=e._queryParams;if(t.loadsAllData())return BE(n);var r=e._queryIdentifier;return n.views.get(r)}function cK(n,e){return lK(n,e)!=null}function Qc(n){return BE(n)!=null}function BE(n){var e,t;try{for(var r=ei(n.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B1;function ume(n){ge(!B1,"__referenceConstructor has already been defined"),B1=n}function lme(){return ge(B1,"Reference.ts has not been loaded"),B1}var cme=1,N5=function(){function n(e){this.listenProvider_=e,this.syncPointTree_=new vs(null),this.pendingWriteTree_=Wve(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return n}();function TP(n,e,t,r,i){return Dve(n.pendingWriteTree_,e,t,r,i),i?Nv(n,new ME(CP(),e,t)):[]}function fme(n,e,t,r){Lve(n.pendingWriteTree_,e,t,r);var i=vs.fromObject(t);return Nv(n,new IP(CP(),e,i))}function Cc(n,e,t){t===void 0&&(t=!1);var r=kve(n.pendingWriteTree_,e),i=Tve(n.pendingWriteTree_,e);if(i){var o=new vs(null);return r.snap!=null?o=o.set(Gt(),!0):Fr(r.children,function(s){o=o.set(new sn(s),!0)}),Nv(n,new wve(r.path,o,t))}else return[]}function O0(n,e,t){return Nv(n,new ME(SP(),e,t))}function hme(n,e,t){var r=vs.fromObject(t);return Nv(n,new IP(SP(),e,r))}function dme(n,e){return Nv(n,new Z$(SP(),e))}function pme(n,e,t){var r=NP(n,t);if(r){var i=AP(r),o=i.path,s=i.queryId,a=ho(o,e),u=new Z$(EP(s),a);return OP(n,o,u)}else return[]}function DA(n,e,t,r){var i=e._path,o=n.syncPointTree_.get(i),s=[];if(o&&(e._queryIdentifier==="default"||cK(o,e))){var a=ame(o,e,t,r);ome(o)&&(n.syncPointTree_=n.syncPointTree_.remove(i));var u=a.removed;s=a.events;var l=u.findIndex(function(C){return C._queryParams.loadsAllData()})!==-1,f=n.syncPointTree_.findOnPath(i,function(C,E){return Qc(E)});if(l&&!f){var h=n.syncPointTree_.subtree(i);if(!h.isEmpty())for(var d=_me(h),g=0;g<d.length;++g){var v=d[g],m=v.query,y=dK(n,v);n.listenProvider_.startListening(W_(m),W1(n,m),y.hashFn,y.onComplete)}}if(!f&&u.length>0&&!r)if(l){var b=null;n.listenProvider_.stopListening(W_(e),b)}else u.forEach(function(C){var E=n.queryToTagMap.get(VE(C));n.listenProvider_.stopListening(W_(C),E)});yme(n,u)}return s}function gme(n,e,t,r){var i=NP(n,r);if(i!=null){var o=AP(i),s=o.path,a=o.queryId,u=ho(s,e),l=new ME(EP(a),u,t);return OP(n,s,l)}else return[]}function vme(n,e,t,r){var i=NP(n,r);if(i){var o=AP(i),s=o.path,a=o.queryId,u=ho(s,e),l=vs.fromObject(t),f=new IP(EP(a),u,l);return OP(n,s,f)}else return[]}function A5(n,e,t){var r=e._path,i=null,o=!1;n.syncPointTree_.foreachOnPath(r,function(m,y){var b=ho(m,r);i=i||Rc(y,b),o=o||Qc(y)});var s=n.syncPointTree_.get(r);s?(o=o||Qc(s),i=i||Rc(s,Gt())):(s=new sK,n.syncPointTree_=n.syncPointTree_.set(r,s));var a;if(i!=null)a=!0;else{a=!1,i=ht.EMPTY_NODE;var u=n.syncPointTree_.subtree(r);u.foreachChild(function(m,y){var b=Rc(y,Gt());b&&(i=i.updateImmediateChild(m,b))})}var l=cK(s,e);if(!l&&!e._queryParams.loadsAllData()){var f=VE(e);ge(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");var h=bme();n.queryToTagMap.set(f,h),n.tagToQueryMap.set(h,f)}var d=FE(n.pendingWriteTree_,r),g=sme(s,e,t,d,i,a);if(!l&&!o){var v=lK(s,e);g=g.concat(wme(n,e,v))}return g}function WE(n,e,t){var r=!0,i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,function(s,a){var u=ho(s,e),l=Rc(a,u);if(l)return l});return eK(i,e,o,t,r)}function mme(n,e){var t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,function(l,f){var h=ho(l,t);r=r||Rc(f,h)});var i=n.syncPointTree_.get(t);i?r=r||Rc(i,Gt()):(i=new sK,n.syncPointTree_=n.syncPointTree_.set(t,i));var o=r!=null,s=o?new Xc(r,!0,!1):null,a=FE(n.pendingWriteTree_,e._path),u=aK(i,e,a,o?s.getNode():ht.EMPTY_NODE,o);return Jve(u)}function Nv(n,e){return fK(e,n.syncPointTree_,null,FE(n.pendingWriteTree_,Gt()))}function fK(n,e,t,r){if(Et(n.path))return hK(n,e,t,r);var i=e.get(Gt());t==null&&i!=null&&(t=Rc(i,Gt()));var o=[],s=St(n.path),a=n.operationForChild(s),u=e.children.get(s);if(u&&a){var l=t?t.getImmediateChild(s):null,f=tK(r,s);o=o.concat(fK(a,u,l,f))}return i&&(o=o.concat(kP(i,n,r,t))),o}function hK(n,e,t,r){var i=e.get(Gt());t==null&&i!=null&&(t=Rc(i,Gt()));var o=[];return e.children.inorderTraversal(function(s,a){var u=t?t.getImmediateChild(s):null,l=tK(r,s),f=n.operationForChild(s);f&&(o=o.concat(hK(f,a,u,l)))}),i&&(o=o.concat(kP(i,n,r,t))),o}function dK(n,e){var t=e.query,r=W1(n,t);return{hashFn:function(){var i=Qve(e)||ht.EMPTY_NODE;return i.hash()},onComplete:function(i){if(i==="ok")return r?pme(n,t._path,r):dme(n,t._path);var o=sge(i,t);return DA(n,t,null,o)}}}function W1(n,e){var t=VE(e);return n.queryToTagMap.get(t)}function VE(n){return n._path.toString()+"$"+n._queryIdentifier}function NP(n,e){return n.tagToQueryMap.get(e)}function AP(n){var e=n.indexOf("$");return ge(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new sn(n.substr(0,e))}}function OP(n,e,t){var r=n.syncPointTree_.get(e);ge(r,"Missing sync point for query tag that we're tracking");var i=FE(n.pendingWriteTree_,e);return kP(r,t,i,null)}function _me(n){return n.fold(function(e,t,r){if(t&&Qc(t)){var i=BE(t);return[i]}else{var o=[];return t&&(o=uK(t)),Fr(r,function(s,a){o=o.concat(a)}),o}})}function W_(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(lme())(n._repo,n._path):n}function yme(n,e){for(var t=0;t<e.length;++t){var r=e[t];if(!r._queryParams.loadsAllData()){var i=VE(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}function bme(){return cme++}function wme(n,e,t){var r=e._path,i=W1(n,e),o=dK(n,t),s=n.listenProvider_.startListening(W_(e),i,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(r);if(i)ge(!Qc(a.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold(function(h,d,g){if(!Et(h)&&d&&Qc(d))return[BE(d).query];var v=[];return d&&(v=v.concat(uK(d).map(function(m){return m.query}))),Fr(g,function(m,y){v=v.concat(y)}),v}),l=0;l<u.length;++l){var f=u[l];n.listenProvider_.stopListening(W_(f),W1(n,f))}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cme=function(){function n(e){this.node_=e}return n.prototype.getImmediateChild=function(e){var t=this.node_.getImmediateChild(e);return new n(t)},n.prototype.node=function(){return this.node_},n}(),Sme=function(){function n(e,t){this.syncTree_=e,this.path_=t}return n.prototype.getImmediateChild=function(e){var t=Wn(this.path_,e);return new n(this.syncTree_,t)},n.prototype.node=function(){return WE(this.syncTree_,this.path_)},n}(),Eme=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},O5=function(n,e,t){if(!n||typeof n!="object")return n;if(ge(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Ime(n[".sv"],e,t);if(typeof n[".sv"]=="object")return xme(n[".sv"],e);ge(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Ime=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ge(!1,"Unexpected server value: "+n)}},xme=function(n,e,t){n.hasOwnProperty("increment")||ge(!1,"Unexpected server value: "+JSON.stringify(n,null,2));var r=n.increment;typeof r!="number"&&ge(!1,"Unexpected increment value: "+r);var i=e.node();if(ge(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i,s=o.getValue();return typeof s!="number"?r:s+r},pK=function(n,e,t,r){return MP(e,new Sme(t,n),r)},RP=function(n,e,t){return MP(n,new Cme(e),t)};function MP(n,e,t){var r=n.getPriority().val(),i=O5(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){var s=n,a=O5(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new Fg(a,zn(i)):n}else{var u=n;return o=u,i!==u.getPriority().val()&&(o=o.updatePriority(new Fg(i))),u.forEachChild(Ln,function(l,f){var h=MP(f,e.getImmediateChild(l),t);h!==f&&(o=o.updateImmediateChild(l,h))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PP=function(){function n(e,t,r){e===void 0&&(e=""),t===void 0&&(t=null),r===void 0&&(r={children:{},childCount:0}),this.name=e,this.parent=t,this.node=r}return n}();function HE(n,e){for(var t=e instanceof sn?e:new sn(e),r=n,i=St(t);i!==null;){var o=ld(r.node.children,i)||{children:{},childCount:0};r=new PP(i,r,o),t=Cn(t),i=St(t)}return r}function Rd(n){return n.node.value}function FP(n,e){n.node.value=e,LA(n)}function gK(n){return n.node.childCount>0}function Dme(n){return Rd(n)===void 0&&!gK(n)}function UE(n,e){Fr(n.node.children,function(t,r){e(new PP(t,n,r))})}function vK(n,e,t,r){t&&!r&&e(n),UE(n,function(i){vK(i,e,!0,r)}),t&&r&&e(n)}function Lme(n,e,t){for(var r=n.parent;r!==null;){if(e(r))return!0;r=r.parent}return!1}function R0(n){return new sn(n.parent===null?n.name:R0(n.parent)+"/"+n.name)}function LA(n){n.parent!==null&&kme(n.parent,n.name,n)}function kme(n,e,t){var r=Dme(t),i=gs(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,LA(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,LA(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tme=/[\[\].#$\/\u0000-\u001F\u007F]/,Nme=/[\[\].#$\u0000-\u001F\u007F]/,Vk=10*1024*1024,jE=function(n){return typeof n=="string"&&n.length!==0&&!Tme.test(n)},mK=function(n){return typeof n=="string"&&n.length!==0&&!Nme.test(n)},Ame=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mK(n)},Iy=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!AE(n)||n&&typeof n=="object"&&gs(n,".sv")},yu=function(n,e,t,r){r&&e===void 0||M0(Oo(n,"value"),e,t)},M0=function(n,e,t){var r=t instanceof sn?new Vge(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ph(r));if(typeof e=="function")throw new Error(n+"contains a function "+ph(r)+" with contents = "+e.toString());if(AE(e))throw new Error(n+"contains "+e.toString()+" "+ph(r));if(typeof e=="string"&&e.length>Vk/3&&NE(e)>Vk)throw new Error(n+"contains a string greater than "+Vk+" utf8 bytes "+ph(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){var i=!1,o=!1;if(Fr(e,function(s,a){if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!jE(s)))throw new Error(n+" contains an invalid key ("+s+") "+ph(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Hge(r,s),M0(n,a,r),Uge(r)}),i&&o)throw new Error(n+' contains ".value" child '+ph(r)+" in addition to actual children.")}},Ome=function(n,e){var t,r;for(t=0;t<e.length;t++){r=e[t];for(var i=Cy(r),o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!jE(i[o]))throw new Error(n+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Wge);var s=null;for(t=0;t<e.length;t++){if(r=e[t],s!==null&&Os(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},_K=function(n,e,t,r){var i=Oo(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];Fr(e,function(s,a){var u=new sn(s);if(M0(i,a,Wn(t,u)),vP(u)===".priority"&&!Iy(a))throw new Error(i+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(u)}),Ome(i,o)},BP=function(n,e,t){if(AE(e))throw new Error(Oo(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Iy(e))throw new Error(Oo(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Rme=function(n,e,t){if(e!==void 0)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Oo(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},P0=function(n,e,t,r){if(t!==void 0&&!jE(t))throw new Error(Oo(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},xy=function(n,e,t,r){if(!mK(t))throw new Error(Oo(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Mme=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),xy(n,e,t)},Rs=function(n,e){if(St(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},yK=function(n,e){var t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!jE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Ame(t))throw new Error(Oo(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},Pme=function(n,e,t,r){if(t!==void 0&&typeof t!="boolean")throw new Error(Oo(n,e)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fme=function(){function n(){this.eventLists_=[],this.recursionDepth_=0}return n}();function zE(n,e){for(var t=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();t!==null&&!mP(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function WP(n,e,t){zE(n,t),bK(n,function(r){return mP(r,e)})}function Hs(n,e,t){zE(n,t),bK(n,function(r){return Os(r,e)||Os(e,r)})}function bK(n,e){n.recursionDepth_++;for(var t=!0,r=0;r<n.eventLists_.length;r++){var i=n.eventLists_[r];if(i){var o=i.path;e(o)?(Bme(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Bme(n){for(var e=0;e<n.events.length;e++){var t=n.events[e];if(t!==null){n.events[e]=null;var r=t.getEventRunner();zh&&Gr("event: "+t.toString()),kv(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wK="repo_interrupt",Wme=25,Vme=function(){function n(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fme,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=A1(),this.transactionQueueTree_=new PP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return n.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},n}();function Hme(n,e,t){if(n.stats_=pP(n.repoInfo_),n.forceRestClient_||uge())n.server_=new pve(n.repoInfo_,function(r,i,o,s){R5(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(function(){return M5(n,!0)},0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Or(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new qh(n.repoInfo_,e,function(r,i,o,s){R5(n,r,i,o,s)},function(r){M5(n,r)},function(r){jme(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(function(r){n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(function(r){n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=pge(n.repoInfo_,function(){return new yve(n.stats_,n.server_)}),n.infoData_=new gve,n.infoSyncTree_=new N5({startListening:function(r,i,o,s){var a=[],u=n.infoData_.getNode(r._path);return u.isEmpty()||(a=O0(n.infoSyncTree_,r._path,u),setTimeout(function(){s("ok")},0)),a},stopListening:function(){}}),VP(n,"connected",!1),n.serverSyncTree_=new N5({startListening:function(r,i,o,s){return n.server_.listen(r,o,i,function(a,u){var l=s(a,u);Hs(n.eventQueue_,r._path,l)}),[]},stopListening:function(r,i){n.server_.unlisten(r,i)}})}function CK(n){var e=n.infoData_.getNode(new sn(".info/serverTimeOffset")),t=e.val()||0;return new Date().getTime()+t}function F0(n){return Eme({timestamp:CK(n)})}function R5(n,e,t,r,i){n.dataUpdateCount++;var o=new sn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;var s=[];if(i)if(r){var a=x1(t,function(d){return zn(d)});s=vme(n.serverSyncTree_,o,a,i)}else{var u=zn(t);s=gme(n.serverSyncTree_,o,u,i)}else if(r){var l=x1(t,function(d){return zn(d)});s=hme(n.serverSyncTree_,o,l)}else{var f=zn(t);s=O0(n.serverSyncTree_,o,f)}var h=o;s.length>0&&(h=Hg(n,o)),Hs(n.eventQueue_,h,s)}function Ume(n,e){n.interceptServerDataCallback_=e}function M5(n,e){VP(n,"connected",e),e===!1&&$me(n)}function jme(n,e){Fr(e,function(t,r){VP(n,t,r)})}function VP(n,e,t){var r=new sn("/.info/"+e),i=zn(t);n.infoData_.updateSnapshot(r,i);var o=O0(n.infoSyncTree_,r,i);Hs(n.eventQueue_,r,o)}function qE(n){return n.nextWriteId_++}function zme(n,e){var t=mme(n.serverSyncTree_,e);return t!=null?Promise.resolve(t):n.server_.get(e).then(function(r){var i=zn(r).withIndex(e._queryParams.getIndex()),o=O0(n.serverSyncTree_,e._path,i);return WP(n.eventQueue_,e._path,o),Promise.resolve(i)},function(r){return Av(n,"get for query "+Or(e)+" failed: "+r),Promise.reject(new Error(r))})}function HP(n,e,t,r,i){Av(n,"set",{path:e.toString(),value:t,priority:r});var o=F0(n),s=zn(t,r),a=WE(n.serverSyncTree_,e),u=RP(s,a,o),l=qE(n),f=TP(n.serverSyncTree_,e,u,l,!0);zE(n.eventQueue_,f),n.server_.put(e.toString(),s.val(!0),function(d,g){var v=d==="ok";v||vi("set at "+e+" failed: "+d);var m=Cc(n.serverSyncTree_,l,!v);Hs(n.eventQueue_,e,m),Jc(n,i,d,g)});var h=jP(n,e);Hg(n,h),Hs(n.eventQueue_,h,[])}function qme(n,e,t,r){Av(n,"update",{path:e.toString(),value:t});var i=!0,o=F0(n),s={};if(Fr(t,function(l,f){i=!1,s[l]=pK(Wn(e,l),zn(f),n.serverSyncTree_,o)}),i)Gr("update() called with empty data.  Don't do anything."),Jc(n,r,"ok",void 0);else{var a=qE(n),u=fme(n.serverSyncTree_,e,s,a);zE(n.eventQueue_,u),n.server_.merge(e.toString(),t,function(l,f){var h=l==="ok";h||vi("update at "+e+" failed: "+l);var d=Cc(n.serverSyncTree_,a,!h),g=d.length>0?Hg(n,e):e;Hs(n.eventQueue_,g,d),Jc(n,r,l,f)}),Fr(t,function(l){var f=jP(n,Wn(e,l));Hg(n,f)}),Hs(n.eventQueue_,e,[])}}function $me(n){Av(n,"onDisconnectEvents");var e=F0(n),t=A1();wA(n.onDisconnect_,Gt(),function(i,o){var s=pK(i,o,n.serverSyncTree_,e);Tv(t,i,s)});var r=[];wA(t,Gt(),function(i,o){r=r.concat(O0(n.serverSyncTree_,i,o));var s=jP(n,i);Hg(n,s)}),n.onDisconnect_=A1(),Hs(n.eventQueue_,Gt(),r)}function Kme(n,e,t){n.server_.onDisconnectCancel(e.toString(),function(r,i){r==="ok"&&bA(n.onDisconnect_,e),Jc(n,t,r,i)})}function P5(n,e,t,r){var i=zn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),function(o,s){o==="ok"&&Tv(n.onDisconnect_,e,i),Jc(n,r,o,s)})}function Gme(n,e,t,r,i){var o=zn(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),function(s,a){s==="ok"&&Tv(n.onDisconnect_,e,o),Jc(n,i,s,a)})}function Yme(n,e,t,r){if(fA(t)){Gr("onDisconnect().update() called with empty data.  Don't do anything."),Jc(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,function(i,o){i==="ok"&&Fr(t,function(s,a){var u=zn(a);Tv(n.onDisconnect_,Wn(e,s),u)}),Jc(n,r,i,o)})}function Zme(n,e,t){var r;St(e._path)===".info"?r=A5(n.infoSyncTree_,e,t):r=A5(n.serverSyncTree_,e,t),WP(n.eventQueue_,e._path,r)}function kA(n,e,t){var r;St(e._path)===".info"?r=DA(n.infoSyncTree_,e,t):r=DA(n.serverSyncTree_,e,t),WP(n.eventQueue_,e._path,r)}function SK(n){n.persistentConnection_&&n.persistentConnection_.interrupt(wK)}function Xme(n){n.persistentConnection_&&n.persistentConnection_.resume(wK)}function Qme(n,e){if(e===void 0&&(e=!1),!(typeof console>"u")){var t;e?(n.statsListener_||(n.statsListener_=new Y$(n.stats_)),t=n.statsListener_.get()):t=n.stats_.get();var r=Object.keys(t).reduce(function(i,o){return Math.max(o.length,i)},0);Fr(t,function(i,o){for(var s=i,a=i.length;a<r+2;a++)s+=" ";console.log(s+o)})}}function Jme(n,e){n.stats_.incrementCounter(e),bve(n.statsReporter_,e)}function Av(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r="";n.persistentConnection_&&(r=n.persistentConnection_.id+":"),Gr.apply(void 0,Ct([r],hi(e)))}function Jc(n,e,t,r){e&&kv(function(){if(t==="ok")e(null);else{var i=(t||"error").toUpperCase(),o=i;r&&(o+=": "+r);var s=new Error(o);s.code=i,e(s)}})}function e_e(n,e,t,r,i,o){Av(n,"transaction on "+e);var s={path:e,update:t,onComplete:r,status:null,order:p$(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=UP(n,e,void 0);s.currentInputSnapshot=a;var u=s.update(a.val());if(u===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{M0("transaction failed: Data returned ",u,s.path),s.status=0;var l=HE(n.transactionQueueTree_,e),f=Rd(l)||[];f.push(s),FP(l,f);var h=void 0;if(typeof u=="object"&&u!==null&&gs(u,".priority"))h=ld(u,".priority"),ge(Iy(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var d=WE(n.serverSyncTree_,e)||ht.EMPTY_NODE;h=d.getPriority().val()}var g=F0(n),v=zn(u,h),m=RP(v,a,g);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=m,s.currentWriteId=qE(n);var y=TP(n.serverSyncTree_,e,m,s.currentWriteId,s.applyLocally);Hs(n.eventQueue_,e,y),$E(n,n.transactionQueueTree_)}}function UP(n,e,t){return WE(n.serverSyncTree_,e,t)||ht.EMPTY_NODE}function $E(n,e){if(e===void 0&&(e=n.transactionQueueTree_),e||KE(n,e),Rd(e)){var t=IK(n,e);ge(t.length>0,"Sending zero length transaction queue");var r=t.every(function(i){return i.status===0});r&&t_e(n,R0(e),t)}else gK(e)&&UE(e,function(i){$E(n,i)})}function t_e(n,e,t){for(var r=t.map(function(d){return d.currentWriteId}),i=UP(n,e,r),o=i,s=i.hash(),a=0;a<t.length;a++){var u=t[a];ge(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=ho(e,u.path);o=o.updateChild(l,u.currentOutputSnapshotRaw)}var f=o.val(!0),h=e;n.server_.put(h.toString(),f,function(d){Av(n,"transaction put response",{path:h.toString(),status:d});var g=[];if(d==="ok"){for(var v=[],m=function(b){t[b].status=2,g=g.concat(Cc(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&v.push(function(){return t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)}),t[b].unwatcher()},y=0;y<t.length;y++)m(y);KE(n,HE(n.transactionQueueTree_,e)),$E(n,n.transactionQueueTree_),Hs(n.eventQueue_,e,g);for(var y=0;y<v.length;y++)kv(v[y])}else{if(d==="datastale")for(var y=0;y<t.length;y++)t[y].status===3?t[y].status=4:t[y].status=0;else{vi("transaction at "+h.toString()+" failed: "+d);for(var y=0;y<t.length;y++)t[y].status=4,t[y].abortReason=d}Hg(n,e)}},s)}function Hg(n,e){var t=EK(n,e),r=R0(t),i=IK(n,t);return n_e(n,i,r),r}function n_e(n,e,t){if(e.length!==0){for(var r=[],i=[],o=e.filter(function(l){return l.status===0}),s=o.map(function(l){return l.currentWriteId}),a=function(l){var f=e[l],h=ho(t,f.path),d=!1,g;if(ge(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)d=!0,g=f.abortReason,i=i.concat(Cc(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=Wme)d=!0,g="maxretry",i=i.concat(Cc(n.serverSyncTree_,f.currentWriteId,!0));else{var v=UP(n,f.path,s);f.currentInputSnapshot=v;var m=e[l].update(v.val());if(m!==void 0){M0("transaction failed: Data returned ",m,f.path);var y=zn(m),b=typeof m=="object"&&m!=null&&gs(m,".priority");b||(y=y.updatePriority(v.getPriority()));var C=f.currentWriteId,E=F0(n),D=RP(y,v,E);f.currentOutputSnapshotRaw=y,f.currentOutputSnapshotResolved=D,f.currentWriteId=qE(n),s.splice(s.indexOf(C),1),i=i.concat(TP(n.serverSyncTree_,f.path,D,f.currentWriteId,f.applyLocally)),i=i.concat(Cc(n.serverSyncTree_,C,!0))}else d=!0,g="nodata",i=i.concat(Cc(n.serverSyncTree_,f.currentWriteId,!0))}Hs(n.eventQueue_,t,i),i=[],d&&(e[l].status=2,function(k){setTimeout(k,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(g==="nodata"?r.push(function(){return e[l].onComplete(null,!1,e[l].currentInputSnapshot)}):r.push(function(){return e[l].onComplete(new Error(g),!1,null)})))},u=0;u<e.length;u++)a(u);KE(n,n.transactionQueueTree_);for(var u=0;u<r.length;u++)kv(r[u]);$E(n,n.transactionQueueTree_)}}function EK(n,e){var t,r=n.transactionQueueTree_;for(t=St(e);t!==null&&Rd(r)===void 0;)r=HE(r,t),e=Cn(e),t=St(e);return r}function IK(n,e){var t=[];return xK(n,e,t),t.sort(function(r,i){return r.order-i.order}),t}function xK(n,e,t){var r=Rd(e);if(r)for(var i=0;i<r.length;i++)t.push(r[i]);UE(e,function(o){xK(n,o,t)})}function KE(n,e){var t=Rd(e);if(t){for(var r=0,i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,FP(e,t.length>0?t:void 0)}UE(e,function(o){KE(n,o)})}function jP(n,e){var t=R0(EK(n,e)),r=HE(n.transactionQueueTree_,e);return Lme(r,function(i){Hk(n,i)}),Hk(n,r),vK(r,function(i){Hk(n,i)}),t}function Hk(n,e){var t=Rd(e);if(t){for(var r=[],i=[],o=-1,s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(ge(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(ge(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(Cc(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?FP(e,void 0):t.length=o+1,Hs(n.eventQueue_,R0(e),i);for(var s=0;s<r.length;s++)kv(r[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_e(n){for(var e="",t=n.split("/"),r=0;r<t.length;r++)if(t[r].length>0){var i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function i_e(n){var e,t,r={};n.charAt(0)==="?"&&(n=n.substring(1));try{for(var i=ei(n.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.length!==0){var a=s.split("=");a.length===2?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):vi("Invalid query segment '"+s+"' in query '"+n+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r}var TA=function(n,e){var t=o_e(n),r=t.namespace;t.domain==="firebase.com"&&mu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&mu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||tge();var i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new dP(t.host,t.secure,r,e,i,"",r!==t.subdomain),path:new sn(t.pathString)}},o_e=function(n){var e="",t="",r="",i="",o="",s=!0,a="https",u=443;if(typeof n=="string"){var l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));var f=n.indexOf("/");f===-1&&(f=n.length);var h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(f,h)),f<h&&(i=r_e(n.substring(f,h)));var d=i_e(n.substring(Math.min(n.length,h)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;var g=e.slice(0,l);if(g.toLowerCase()==="localhost")t="localhost";else if(g.split(".").length<=2)t=g;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),t=e.substring(v+1),o=r}"ns"in d&&(o=d.ns)}return{host:e,port:u,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DK=function(){function n(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}return n.prototype.getPath=function(){var e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path},n.prototype.getEventType=function(){return this.eventType},n.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},n.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Or(this.snapshot.exportVal())},n}(),LK=function(){function n(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}return n.prototype.getPath=function(){return this.path},n.prototype.getEventType=function(){return"cancel"},n.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},n.prototype.toString=function(){return this.path.toString()+":cancel"},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kK=function(){function n(e,t){this.snapshotCallback=e,this.cancelCallback=t}return n.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},n.prototype.onCancel=function(e){return ge(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(n.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),n.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},n}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s_e=function(){function n(e,t){this._repo=e,this._path=t}return n.prototype.cancel=function(){var e=new Qr;return Kme(this._repo,this._path,e.wrapCallback(function(){})),e.promise},n.prototype.remove=function(){Rs("OnDisconnect.remove",this._path);var e=new Qr;return P5(this._repo,this._path,null,e.wrapCallback(function(){})),e.promise},n.prototype.set=function(e){Rs("OnDisconnect.set",this._path),yu("OnDisconnect.set",e,this._path,!1);var t=new Qr;return P5(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},n.prototype.setWithPriority=function(e,t){Rs("OnDisconnect.setWithPriority",this._path),yu("OnDisconnect.setWithPriority",e,this._path,!1),BP("OnDisconnect.setWithPriority",t);var r=new Qr;return Gme(this._repo,this._path,e,t,r.wrapCallback(function(){})),r.promise},n.prototype.update=function(e){Rs("OnDisconnect.update",this._path),_K("OnDisconnect.update",e,this._path);var t=new Qr;return Yme(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zs=function(){function n(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}return Object.defineProperty(n.prototype,"key",{get:function(){return Et(this._path)?null:vP(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ref",{get:function(){return new ku(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_queryIdentifier",{get:function(){var e=w5(this._queryParams),t=cP(e);return t==="{}"?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_queryObject",{get:function(){return w5(this._queryParams)},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(e){if(e=wt(e),!(e instanceof n))return!1;var t=this._repo===e._repo,r=mP(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i},n.prototype.toJSON=function(){return this.toString()},n.prototype.toString=function(){return this._repo.toString()+Bge(this._path)},n}();function GE(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function ff(n){var e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===su){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){var o=n.getIndexStartName();if(o!==_l)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(n.hasEnd()){var s=n.getIndexEndName();if(s!==_u)throw new Error(r);if(typeof t!="string")throw new Error(i)}}else if(n.getIndex()===Ln){if(e!=null&&!Iy(e)||t!=null&&!Iy(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ge(n.getIndex()instanceof yP||n.getIndex()===bP,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function YE(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ku=function(n){Ie(e,n);function e(t,r){return n.call(this,t,r,new G$,!1)||this}return Object.defineProperty(e.prototype,"parent",{get:function(){var t=F$(this._path);return t===null?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(zs),ZE=function(){function n(e,t,r){this._node=e,this.ref=t,this._index=r}return Object.defineProperty(n.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),n.prototype.child=function(e){var t=new sn(e),r=fd(this.ref,e);return new n(this._node.getChild(t),r,Ln)},n.prototype.exists=function(){return!this._node.isEmpty()},n.prototype.exportVal=function(){return this._node.val(!0)},n.prototype.forEach=function(e){var t=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,function(i,o){return e(new n(o,fd(t.ref,i),Ln))})},n.prototype.hasChild=function(e){var t=new sn(e);return!this._node.getChild(t).isEmpty()},n.prototype.hasChildren=function(){return this._node.isLeafNode()?!1:!this._node.isEmpty()},n.prototype.toJSON=function(){return this.exportVal()},n.prototype.val=function(){return this._node.val()},n}();function TK(n,e){return n=wt(n),n._checkNotDeleted("ref"),e!==void 0?fd(n._root,e):n._root}function F5(n,e){n=wt(n),n._checkNotDeleted("refFromURL");var t=TA(e,n._repo.repoInfo_.nodeAdmin);yK("refFromURL",t);var r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&mu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),TK(n,t.path.toString())}function fd(n,e){return n=wt(n),St(n._path)===null?Mme("child","path",e):xy("child","path",e),new ku(n._repo,Wn(n._path,e))}function a_e(n,e){n=wt(n),Rs("push",n._path),yu("push",e,n._path,!0);var t=CK(n._repo),r=sve(t),i=fd(n,r),o=fd(n,r),s;return e!=null?s=zP(o,e).then(function(){return o}):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function u_e(n){return Rs("remove",n._path),zP(n,null)}function zP(n,e){n=wt(n),Rs("set",n._path),yu("set",e,n._path,!1);var t=new Qr;return HP(n._repo,n._path,e,null,t.wrapCallback(function(){})),t.promise}function l_e(n,e){n=wt(n),Rs("setPriority",n._path),BP("setPriority",e);var t=new Qr;return HP(n._repo,Wn(n._path,".priority"),e,null,t.wrapCallback(function(){})),t.promise}function c_e(n,e,t){if(Rs("setWithPriority",n._path),yu("setWithPriority",e,n._path,!1),BP("setWithPriority",t),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";var r=new Qr;return HP(n._repo,n._path,e,t,r.wrapCallback(function(){})),r.promise}function f_e(n,e){_K("update",e,n._path);var t=new Qr;return qme(n._repo,n._path,e,t.wrapCallback(function(){})),t.promise}function h_e(n){return n=wt(n),zme(n._repo,n).then(function(e){return new ZE(e,new ku(n._repo,n._path),n._queryParams.getIndex())})}var NK=function(){function n(e){this.callbackContext=e}return n.prototype.respondsTo=function(e){return e==="value"},n.prototype.createEvent=function(e,t){var r=t._queryParams.getIndex();return new DK("value",this,new ZE(e.snapshotNode,new ku(t._repo,t._path),r))},n.prototype.getEventRunner=function(e){var t=this;return e.getEventType()==="cancel"?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},n.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new LK(this,e,t):null},n.prototype.matches=function(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1},n.prototype.hasAnyCallback=function(){return this.callbackContext!==null},n}(),AK=function(){function n(e,t){this.eventType=e,this.callbackContext=t}return n.prototype.respondsTo=function(e){var t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t},n.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new LK(this,e,t):null},n.prototype.createEvent=function(e,t){ge(e.childName!=null,"Child events should have a childName.");var r=fd(new ku(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new DK(e.type,this,new ZE(e.snapshotNode,r,i),e.prevName)},n.prototype.getEventRunner=function(e){var t=this;return e.getEventType()==="cancel"?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},n.prototype.matches=function(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1},n.prototype.hasAnyCallback=function(){return!!this.callbackContext},n}();function B0(n,e,t,r,i){var o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){var s=t,a=function(f,h){kA(n._repo,n,l),s(f,h)};a.userCallback=t.userCallback,a.context=t.context,t=a}var u=new kK(t,o||void 0),l=e==="value"?new NK(u):new AK(e,u);return Zme(n._repo,n,l),function(){return kA(n._repo,n,l)}}function NA(n,e,t,r){return B0(n,"value",e,t,r)}function B5(n,e,t,r){return B0(n,"child_added",e,t,r)}function W5(n,e,t,r){return B0(n,"child_changed",e,t,r)}function V5(n,e,t,r){return B0(n,"child_moved",e,t,r)}function H5(n,e,t,r){return B0(n,"child_removed",e,t,r)}function U5(n,e,t){var r=null,i=t?new kK(t):null;e==="value"?r=new NK(i):e&&(r=new AK(e,i)),kA(n._repo,n,r)}var Oa=function(){function n(){}return n}(),OK=function(n){Ie(e,n);function e(t,r){var i=n.call(this)||this;return i._value=t,i._key=r,i}return e.prototype._apply=function(t){yu("endAt",this._value,t._path,!0);var r=yA(t._queryParams,this._value,this._key);if(YE(r),ff(r),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zs(t._repo,t._path,r,t._orderByCalled)},e}(Oa);function d_e(n,e){return P0("endAt","key",e),new OK(n,e)}var p_e=function(n){Ie(e,n);function e(t,r){var i=n.call(this)||this;return i._value=t,i._key=r,i}return e.prototype._apply=function(t){yu("endBefore",this._value,t._path,!1);var r=dve(t._queryParams,this._value,this._key);if(YE(r),ff(r),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zs(t._repo,t._path,r,t._orderByCalled)},e}(Oa);function g_e(n,e){return P0("endBefore","key",e),new p_e(n,e)}var RK=function(n){Ie(e,n);function e(t,r){var i=n.call(this)||this;return i._value=t,i._key=r,i}return e.prototype._apply=function(t){yu("startAt",this._value,t._path,!0);var r=_A(t._queryParams,this._value,this._key);if(YE(r),ff(r),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new zs(t._repo,t._path,r,t._orderByCalled)},e}(Oa);function v_e(n,e){return n===void 0&&(n=null),P0("startAt","key",e),new RK(n,e)}var m_e=function(n){Ie(e,n);function e(t,r){var i=n.call(this)||this;return i._value=t,i._key=r,i}return e.prototype._apply=function(t){yu("startAfter",this._value,t._path,!1);var r=hve(t._queryParams,this._value,this._key);if(YE(r),ff(r),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new zs(t._repo,t._path,r,t._orderByCalled)},e}(Oa);function __e(n,e){return P0("startAfter","key",e),new m_e(n,e)}var y_e=function(n){Ie(e,n);function e(t){var r=n.call(this)||this;return r._limit=t,r}return e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new zs(t._repo,t._path,cve(t._queryParams,this._limit),t._orderByCalled)},e}(Oa);function b_e(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new y_e(n)}var w_e=function(n){Ie(e,n);function e(t){var r=n.call(this)||this;return r._limit=t,r}return e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new zs(t._repo,t._path,fve(t._queryParams,this._limit),t._orderByCalled)},e}(Oa);function C_e(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new w_e(n)}var S_e=function(n){Ie(e,n);function e(t){var r=n.call(this)||this;return r._path=t,r}return e.prototype._apply=function(t){GE(t,"orderByChild");var r=new sn(this._path);if(Et(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var i=new yP(r),o=RE(t._queryParams,i);return ff(o),new zs(t._repo,t._path,o,!0)},e}(Oa);function E_e(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xy("orderByChild","path",n),new S_e(n)}var I_e=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._apply=function(t){GE(t,"orderByKey");var r=RE(t._queryParams,su);return ff(r),new zs(t._repo,t._path,r,!0)},e}(Oa);function x_e(){return new I_e}var D_e=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._apply=function(t){GE(t,"orderByPriority");var r=RE(t._queryParams,Ln);return ff(r),new zs(t._repo,t._path,r,!0)},e}(Oa);function L_e(){return new D_e}var k_e=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._apply=function(t){GE(t,"orderByValue");var r=RE(t._queryParams,bP);return ff(r),new zs(t._repo,t._path,r,!0)},e}(Oa);function T_e(){return new k_e}var N_e=function(n){Ie(e,n);function e(t,r){var i=n.call(this)||this;return i._value=t,i._key=r,i}return e.prototype._apply=function(t){if(yu("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new OK(this._value,this._key)._apply(new RK(this._value,this._key)._apply(t))},e}(Oa);function A_e(n,e){return P0("equalTo","key",e),new N_e(n,e)}function ta(n){for(var e,t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=wt(n);try{for(var s=ei(r),a=s.next();!a.done;a=s.next()){var u=a.value;o=u._apply(o)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return o}rme(ku);ume(ku);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O_e="FIREBASE_DATABASE_EMULATOR_HOST",AA={},MK=!1;function R_e(n,e,t,r){n.repoInfo_=new dP(e+":"+t,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}function PK(n,e,t,r,i){var o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||mu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gr("Using default host for project ",n.options.projectId),o=n.options.projectId+"-default-rtdb.firebaseio.com");var s=TA(o,i),a=s.repoInfo,u,l=void 0;typeof process<"u"&&(l=Zpe[O_e]),l?(u=!0,o="http://"+l+"?ns="+a.namespace,s=TA(o,i),a=s.repoInfo):u=!s.repoInfo.secure;var f=i&&u?new P_(P_.OWNER):new cge(n.name,n.options,e);yK("Invalid Firebase Database URL",s),Et(s.path)||mu("Database URL must point to the root of a Firebase Database (not including a child path).");var h=P_e(a,n,f,new lge(n.name,t));return new B_e(h,n)}function M_e(n,e){var t=AA[e];(!t||t[n.key]!==n)&&mu("Database "+e+"("+n.repoInfo_+") has already been deleted."),SK(n),delete t[n.key]}function P_e(n,e,t,r){var i=AA[e.name];i||(i={},AA[e.name]=i);var o=i[n.toURLString()];return o&&mu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Vme(n,MK,t,r),i[n.toURLString()]=o,o}function F_e(n){MK=n}var B_e=function(){function n(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(n.prototype,"_repo",{get:function(){return this._instanceStarted||(Hme(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new ku(this._repo,Gt())),this._rootInternal},enumerable:!1,configurable:!0}),n.prototype._delete=function(){return this._rootInternal!==null&&(M_e(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},n.prototype._checkNotDeleted=function(e){this._rootInternal===null&&mu("Cannot call "+e+" on a deleted database.")},n}();function W_e(n,e,t,r){r===void 0&&(r={}),n=wt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&mu("Cannot call useEmulator() after instance has already been initialized.");var i=n._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&mu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new P_(P_.OWNER);else if(r.mockUserToken){var s=typeof r.mockUserToken=="string"?r.mockUserToken:rP(r.mockUserToken,n.app.options.projectId);o=new P_(s)}R_e(i,e,t,o)}function V_e(n){n=wt(n),n._checkNotDeleted("goOffline"),SK(n._repo)}function H_e(n){n=wt(n),n._checkNotDeleted("goOnline"),Xme(n._repo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U_e={".sv":"timestamp"};function j_e(){return U_e}function z_e(n){return{".sv":{increment:n}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q_e=function(){function n(e,t){this.committed=e,this.snapshot=t}return n.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},n}();function $_e(n,e,t){var r;if(n=wt(n),Rs("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";var i=(r=t==null?void 0:t.applyLocally)!==null&&r!==void 0?r:!0,o=new Qr,s=function(u,l,f){var h=null;u?o.reject(u):(h=new ZE(f,new ku(n._repo,n._path),Ln),o.resolve(new q_e(l,h)))},a=NA(n,function(){});return e_e(n._repo,n._path,e,s,a,i),o.promise}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K_e=function(){function n(e){this._delegate=e}return n.prototype.cancel=function(e){et("OnDisconnect.cancel",0,1,arguments.length),Kr("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then(function(){return e(null)},function(r){return e(r)}),t},n.prototype.remove=function(e){et("OnDisconnect.remove",0,1,arguments.length),Kr("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then(function(){return e(null)},function(r){return e(r)}),t},n.prototype.set=function(e,t){et("OnDisconnect.set",1,2,arguments.length),Kr("OnDisconnect.set","onComplete",t,!0);var r=this._delegate.set(e);return t&&r.then(function(){return t(null)},function(i){return t(i)}),r},n.prototype.setWithPriority=function(e,t,r){et("OnDisconnect.setWithPriority",2,3,arguments.length),Kr("OnDisconnect.setWithPriority","onComplete",r,!0);var i=this._delegate.setWithPriority(e,t);return r&&i.then(function(){return r(null)},function(o){return r(o)}),i},n.prototype.update=function(e,t){if(et("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var r={},i=0;i<e.length;++i)r[""+i]=e[i];e=r,vi("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Kr("OnDisconnect.update","onComplete",t,!0);var o=this._delegate.update(e);return t&&o.then(function(){return t(null)},function(s){return t(s)}),o},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G_e=function(){function n(e,t){this.committed=e,this.snapshot=t}return n.prototype.toJSON=function(){return et("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V_=function(){function n(e,t){this._database=e,this._delegate=t}return n.prototype.val=function(){return et("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},n.prototype.exportVal=function(){return et("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},n.prototype.toJSON=function(){return et("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},n.prototype.exists=function(){return et("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},n.prototype.child=function(e){return et("DataSnapshot.child",0,1,arguments.length),e=String(e),xy("DataSnapshot.child","path",e),new n(this._database,this._delegate.child(e))},n.prototype.hasChild=function(e){return et("DataSnapshot.hasChild",1,1,arguments.length),xy("DataSnapshot.hasChild","path",e),this._delegate.hasChild(e)},n.prototype.getPriority=function(){return et("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},n.prototype.forEach=function(e){var t=this;return et("DataSnapshot.forEach",1,1,arguments.length),Kr("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new n(t._database,r))})},n.prototype.hasChildren=function(){return et("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(n.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),n.prototype.numChildren=function(){return et("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},n.prototype.getRef=function(){return et("DataSnapshot.ref",0,0,arguments.length),new Ah(this._database,this._delegate.ref)},Object.defineProperty(n.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),n}(),FK=function(){function n(e,t){this.database=e,this._delegate=t}return n.prototype.on=function(e,t,r,i){var o=this,s;et("Query.on",2,4,arguments.length),Kr("Query.on","callback",t,!1);var a=n.getCancelAndContextArgs_("Query.on",r,i),u=function(f,h){t.call(a.context,new V_(o.database,f),h)};u.userCallback=t,u.context=a.context;var l=(s=a.cancel)===null||s===void 0?void 0:s.bind(a.context);switch(e){case"value":return NA(this._delegate,u,l),t;case"child_added":return B5(this._delegate,u,l),t;case"child_removed":return H5(this._delegate,u,l),t;case"child_changed":return W5(this._delegate,u,l),t;case"child_moved":return V5(this._delegate,u,l),t;default:throw new Error(Oo("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},n.prototype.off=function(e,t,r){if(et("Query.off",0,3,arguments.length),Rme("Query.off",e),Kr("Query.off","callback",t,!0),n5("Query.off","context",r),t){var i=function(){};i.userCallback=t,i.context=r,U5(this._delegate,e,i)}else U5(this._delegate,e)},n.prototype.get=function(){var e=this;return h_e(this._delegate).then(function(t){return new V_(e.database,t)})},n.prototype.once=function(e,t,r,i){var o=this;et("Query.once",1,4,arguments.length),Kr("Query.once","callback",t,!0);var s=n.getCancelAndContextArgs_("Query.once",r,i),a=new Qr,u=function(f,h){var d=new V_(o.database,f);t&&t.call(s.context,d,h),a.resolve(d)};u.userCallback=t,u.context=s.context;var l=function(f){s.cancel&&s.cancel.call(s.context,f),a.reject(f)};switch(e){case"value":NA(this._delegate,u,l,{onlyOnce:!0});break;case"child_added":B5(this._delegate,u,l,{onlyOnce:!0});break;case"child_removed":H5(this._delegate,u,l,{onlyOnce:!0});break;case"child_changed":W5(this._delegate,u,l,{onlyOnce:!0});break;case"child_moved":V5(this._delegate,u,l,{onlyOnce:!0});break;default:throw new Error(Oo("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return a.promise},n.prototype.limitToFirst=function(e){return et("Query.limitToFirst",1,1,arguments.length),new n(this.database,ta(this._delegate,b_e(e)))},n.prototype.limitToLast=function(e){return et("Query.limitToLast",1,1,arguments.length),new n(this.database,ta(this._delegate,C_e(e)))},n.prototype.orderByChild=function(e){return et("Query.orderByChild",1,1,arguments.length),new n(this.database,ta(this._delegate,E_e(e)))},n.prototype.orderByKey=function(){return et("Query.orderByKey",0,0,arguments.length),new n(this.database,ta(this._delegate,x_e()))},n.prototype.orderByPriority=function(){return et("Query.orderByPriority",0,0,arguments.length),new n(this.database,ta(this._delegate,L_e()))},n.prototype.orderByValue=function(){return et("Query.orderByValue",0,0,arguments.length),new n(this.database,ta(this._delegate,T_e()))},n.prototype.startAt=function(e,t){return e===void 0&&(e=null),et("Query.startAt",0,2,arguments.length),new n(this.database,ta(this._delegate,v_e(e,t)))},n.prototype.startAfter=function(e,t){return e===void 0&&(e=null),et("Query.startAfter",0,2,arguments.length),new n(this.database,ta(this._delegate,__e(e,t)))},n.prototype.endAt=function(e,t){return e===void 0&&(e=null),et("Query.endAt",0,2,arguments.length),new n(this.database,ta(this._delegate,d_e(e,t)))},n.prototype.endBefore=function(e,t){return e===void 0&&(e=null),et("Query.endBefore",0,2,arguments.length),new n(this.database,ta(this._delegate,g_e(e,t)))},n.prototype.equalTo=function(e,t){return et("Query.equalTo",1,2,arguments.length),new n(this.database,ta(this._delegate,A_e(e,t)))},n.prototype.toString=function(){return et("Query.toString",0,0,arguments.length),this._delegate.toString()},n.prototype.toJSON=function(){return et("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},n.prototype.isEqual=function(e){if(et("Query.isEqual",1,1,arguments.length),!(e instanceof n)){var t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)},n.getCancelAndContextArgs_=function(e,t,r){var i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,Kr(e,"cancel",i.cancel,!0),i.context=r,n5(e,"context",i.context);else if(t)if(typeof t=="object"&&t!==null)i.context=t;else if(typeof t=="function")i.cancel=t;else throw new Error(Oo(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i},Object.defineProperty(n.prototype,"ref",{get:function(){return new Ah(this.database,new ku(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),n}(),Ah=function(n){Ie(e,n);function e(t,r){var i=n.call(this,t,new zs(r._repo,r._path,new G$,!1))||this;return i.database=t,i._delegate=r,i}return e.prototype.getKey=function(){return et("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return et("Reference.child",1,1,arguments.length),typeof t=="number"&&(t=String(t)),new e(this.database,fd(this._delegate,t))},e.prototype.getParent=function(){et("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return et("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,r){et("Reference.set",1,2,arguments.length),Kr("Reference.set","onComplete",r,!0);var i=zP(this._delegate,t);return r&&i.then(function(){return r(null)},function(o){return r(o)}),i},e.prototype.update=function(t,r){if(et("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var i={},o=0;o<t.length;++o)i[""+o]=t[o];t=i,vi("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rs("Reference.update",this._delegate._path),Kr("Reference.update","onComplete",r,!0);var s=f_e(this._delegate,t);return r&&s.then(function(){return r(null)},function(a){return r(a)}),s},e.prototype.setWithPriority=function(t,r,i){et("Reference.setWithPriority",2,3,arguments.length),Kr("Reference.setWithPriority","onComplete",i,!0);var o=c_e(this._delegate,t,r);return i&&o.then(function(){return i(null)},function(s){return i(s)}),o},e.prototype.remove=function(t){et("Reference.remove",0,1,arguments.length),Kr("Reference.remove","onComplete",t,!0);var r=u_e(this._delegate);return t&&r.then(function(){return t(null)},function(i){return t(i)}),r},e.prototype.transaction=function(t,r,i){var o=this;et("Reference.transaction",1,3,arguments.length),Kr("Reference.transaction","transactionUpdate",t,!1),Kr("Reference.transaction","onComplete",r,!0),Pme("Reference.transaction","applyLocally",i);var s=$_e(this._delegate,t,{applyLocally:i}).then(function(a){return new G_e(a.committed,new V_(o.database,a.snapshot))});return r&&s.then(function(a){return r(null,a.committed,a.snapshot)},function(a){return r(a,!1,null)}),s},e.prototype.setPriority=function(t,r){et("Reference.setPriority",1,2,arguments.length),Kr("Reference.setPriority","onComplete",r,!0);var i=l_e(this._delegate,t);return r&&i.then(function(){return r(null)},function(o){return r(o)}),i},e.prototype.push=function(t,r){var i=this;et("Reference.push",0,2,arguments.length),Kr("Reference.push","onComplete",r,!0);var o=a_e(this._delegate,t),s=o.then(function(u){return new e(i.database,u)});r&&s.then(function(){return r(null)},function(u){return r(u)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Rs("Reference.onDisconnect",this._delegate._path),new K_e(new s_e(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(FK);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V1=function(){function n(e,t){var r=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return n.prototype.useEmulator=function(e,t,r){r===void 0&&(r={}),W_e(this._delegate,e,t,r)},n.prototype.ref=function(e){if(et("database.ref",0,1,arguments.length),e instanceof Ah){var t=F5(this._delegate,e.toString());return new Ah(this,t)}else{var t=TK(this._delegate,e);return new Ah(this,t)}},n.prototype.refFromURL=function(e){var t="database.refFromURL";et(t,1,1,arguments.length);var r=F5(this._delegate,e);return new Ah(this,r)},n.prototype.goOffline=function(){return et("database.goOffline",0,0,arguments.length),V_e(this._delegate)},n.prototype.goOnline=function(){return et("database.goOnline",0,0,arguments.length),H_e(this._delegate)},n.ServerValue={TIMESTAMP:j_e(),increment:function(e){return z_e(e)}},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y_e=function(){Sh.forceDisallow(),gP.forceAllow()},Z_e=function(){gP.forceDisallow()},X_e=function(){return Sh.isAvailable()},Q_e=function(n,e){var t=n._delegate._repo.persistentConnection_;t.securityDebugCallback_=e},J_e=function(n,e){Qme(n._delegate._repo,e)},eye=function(n,e){Jme(n._delegate._repo,e)},tye=function(n){return n._delegate._repo.dataUpdateCount},nye=function(n,e){return Ume(n._delegate._repo,e)};function rye(n){var e=n.app,t=n.url,r=n.version,i=n.customAuthImpl,o=n.namespace,s=n.nodeAdmin,a=s===void 0?!1:s;h$(r);var u=new s$("auth-internal",new a$("database-standalone"));return u.setComponent(new Vi("auth-internal",function(){return i},"PRIVATE")),{instance:new V1(PK(e,u,void 0,t,a),e),namespace:o}}var iye=Object.freeze({__proto__:null,forceLongPolling:Y_e,forceWebSockets:Z_e,isWebSocketsAvailable:X_e,setSecurityDebugCallback:Q_e,stats:J_e,statsIncrementCounter:eye,dataUpdateCount:tye,interceptServerData:nye,initStandalone:rye});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oye=qh;qh.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};qh.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};var sye=R$,aye=function(n){var e=qh.prototype.put;return qh.prototype.put=function(t,r,i,o){o!==void 0&&(o=n()),e.call(this,t,r,i,o)},function(){qh.prototype.put=e}},uye=dP,lye=function(n){return n._delegate._queryIdentifier},cye=function(n){F_e(n)},fye=Object.freeze({__proto__:null,DataConnection:oye,RealTimeConnection:sye,hijackHash:aye,ConnectionTarget:uye,queryIdentifier:lye,forceRestClient:cye});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hye=V1.ServerValue;function dye(n){h$(n.SDK_VERSION),n.INTERNAL.registerComponent(new Vi("database",function(e,t){var r=t.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new V1(PK(i,o,s,r),i)},"PUBLIC").setServiceProps({Reference:Ah,Query:FK,Database:V1,DataSnapshot:V_,enableLogging:v$,INTERNAL:iye,ServerValue:hye,TEST_ACCESS:fye}).setMultipleInstances(!0)),n.registerVersion(Xpe,Qpe)}dye(He);var pye="firebase",BK="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */He.registerVersion(pye,BK,"app");He.SDK_VERSION=BK;function OA(){}var RA;(function(n){n.LF=`
`,n.CRLF=`\r
`})(RA||(RA={}));class Al extends Error{constructor(){super(...arguments),this.name="Validation Failed"}}class gye extends Error{constructor(){super(...arguments),this.name="No-op Encountered"}}class vye extends Error{constructor(){super(...arguments),this.name="Invalid Operation Encountered"}}class mye extends Error{constructor(){super(...arguments),this.name="Invalid Order of Operations Encountered"}}class _ye extends Error{constructor(){super(...arguments),this.name="Invalid Event Encountered"}}class yye extends Error{constructor(){super(...arguments),this.name="Transaction Failed"}}function WK(n,e){if(!Number.isInteger(n))throw new Al(e||"Expected an integer value")}function j5(n,e){if(WK(n,e),n<0)throw new Al(e||"Expected a non-negative integer value")}function bye(n,e){if(typeof n!="string")throw new Al(e)}function C_(n,e,t){if(n!==e)throw new Al(t||`Expected ${n.toString()} to be equal to ${e.toString()}.`)}function H_(n,e,t){if(n===e)throw new Al(t||`Expected ${n.toString()} to not be equal to ${e.toString()}.`)}function wye(n,e,t){if(n>e)throw new Al(t)}function Cye(n,e,t){if(n<=e)throw new Al(`Expected ${n} to be greater than ${e}.`)}function da(n,e){if(n==null||n===!1)throw new Al(e||"Expected a Truth value")}function Oh(n,e){if(n===!0)throw new Al(e||"Expected a False value")}function z5(n){throw new gye(n)}function Sye(n,e){throw new _ye(`Unknown event ${n} to add/remove listener for given object`)}function q5(n){throw new mye(n||"Invalid order of operation recieved that cannot be composed or applied")}function Eye(n){throw new yye(n||"Transaction Failure!")}function Iye(n){throw new vye(n)}function xye(n,e,t){return["#",...[n,e,t].map(i=>Math.round(255*i).toString(16).padStart(2,"0"))].join("")}function Dye(n){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]}function Uk(n,e,t){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+(t-e)*6*n:2*n<1?t:3*n<2?e+(t-e)*6*(2/3-n):e}function Lye(n,e,t){const r=t+e-e*t,i=2*t-r;return xye(Uk(n+1/3,i,r),Uk(n,i,r),Uk(n-1/3,i,r))}function kye(n){let e=1;for(let r=0;r<n.length;r++)e=17*(e+n.charCodeAt(r))%360;const t=e/360;return Lye(t,1,.75)}function Tye(n){return n.charAt(0).toUpperCase()+n.slice(1)}class W0{constructor(e){this._allowedEvents=e,this._eventListeners={}}on(e,t,r){var i;this._validateEvent(e),(i=this._eventListeners)[e]||(i[e]=[]),this._eventListeners[e].push({callback:t,context:r||null})}off(e,t){this._validateEvent(e);const r=this._eventListeners[e];!r||r.length===0||(this._eventListeners[e]=r.filter(i=>i.callback!==t))}trigger(e,t,...r){const i=this._eventListeners[e]||[];for(const o of i){const{context:s,callback:a}=o;a.call(s,t,...r)}}dispose(){for(const e in this._eventListeners)this._eventListeners[e]=[]}_validateEvent(e){!this._allowedEvents||this._allowedEvents.includes(e)||Sye(e)}}var ro;(function(n){n.Insert="insert",n.Delete="delete",n.Retain="retain"})(ro||(ro={}));class jw{constructor(e,t,r){switch(this._type=e,this.chars=null,this.text=null,this.attributes=null,e){case ro.Insert:{this.text=t,this.attributes=r||{};break}case ro.Delete:{this.chars=t;break}case ro.Retain:{this.chars=t,this.attributes=r||{};break}}}isInsert(){return this._type===ro.Insert}isDelete(){return this._type===ro.Delete}isRetain(){return this._type===ro.Retain}equals(e){return this._type===e._type&&this.text===e.text&&this.chars===e.chars&&this.attributesEqual(e.attributes)}attributesEqual(e){if(e==null||this.attributes==null)return this.attributes==e;for(const t in this.attributes)if(this.attributes[t]!==e[t])return!1;for(const t in e)if(this.attributes[t]!==e[t])return!1;return!0}hasEmptyAttributes(){return this.attributes==null?!0:Object.keys(this.attributes).length===0}toString(){const e=this.text?`"${this.text}"`:this.chars;return`${Tye(this._type)} ${e}`}valueOf(){switch(this._type){case ro.Insert:return this.text;case ro.Delete:return-this.chars;case ro.Retain:return this.chars}return null}}class Ge{constructor(){this._ops=[],this._baseLength=0,this._targetLength=0}isWrappedOperation(){return!1}getOps(){return Array.from(this._ops)}equals(e){return this._baseLength!==e._baseLength||this._targetLength!==e._targetLength||this._ops.length!==e._ops.length?!1:this._ops.every((t,r)=>t.equals(e._ops[r]))}_last(e=0){return this._ops.length>e?this._ops[this._ops.length-e-1]:null}retain(e,t){if(j5(e,"retain expects a positive integer."),e===0)return this;this._baseLength+=e,this._targetLength+=e,t||(t={});const r=this._last();return r&&r.isRetain()&&r.attributesEqual(t)?r.chars+=e:this._ops.push(new jw(ro.Retain,e,t)),this}insert(e,t){if(bye(e,"insert expects a string."),e==="")return this;this._targetLength+=e.length,t||(t={});const r=this._last(),i=this._last(1);return r&&r.isInsert()&&r.attributesEqual(t)?r.text+=e:r&&r.isDelete()?i&&i.isInsert()&&i.attributesEqual(t)?i.text+=e:(this._ops[this._ops.length-1]=new jw(ro.Insert,e,t),this._ops.push(r)):this._ops.push(new jw(ro.Insert,e,t)),this}delete(e){let t=e;if(typeof e=="string"&&(t=e.length),j5(t,"delete expects a positive integer or string."),t===0)return this;this._baseLength+=t;const r=this._last();return r&&r.isDelete()?r.chars+=t:this._ops.push(new jw(ro.Delete,t,null)),this}isNoop(){return this._ops.length===0?!0:this._ops.every(e=>e.isRetain()&&e.hasEmptyAttributes())}clone(){const e=this._ops,t=new Ge;for(const r of e)r.isRetain()?t.retain(r.chars,r.attributes):r.isInsert()?t.insert(r.text,r.attributes):t.delete(r.chars);return t}apply(e,t=[],r=[]){C_(e.length,this._baseLength,"The operation's base length must be equal to the string's length.");const i=[];let o=0;for(const a of this._ops)if(a.isRetain()){const u=o+a.chars;wye(u,e.length,"Operation can't retain more characters than are left in the string."),i.push(e.slice(o,u));for(let l=0;l<a.chars;l++){const f=t[o+l]||{},h={};for(const d in f)h[d]=f[d],H_(h[d],!1);for(const d in a.attributes)a.attributes[d]===!1?delete h[d]:h[d]=a.attributes[d],H_(h[d],!1);r.push(h)}o=u}else if(a.isInsert()){i.push(a.text);for(let u=0;u<a.text.length;u++){const l={};for(const f in a.attributes)l[f]=a.attributes[f],H_(l[f],!1);r.push(l)}}else o+=a.chars;C_(o,e.length,"The operation didn't operate on the whole string.");const s=i.join("");return C_(s.length,r.length),s}invert(e){const t=new Ge;let r=0;for(const i of this._ops)i.isRetain()?(t.retain(i.chars,i.attributes),r+=i.chars):i.isInsert()?t.delete(i.text.length):(t.insert(e.slice(r,r+i.chars),i.attributes),r+=i.chars);return t}canMergeWith(e){return this._targetLength===e._baseLength}static _nextTextOp(e){const t=e.next().value;return t?t[1]:null}compose(e){da(this.canMergeWith(e),"The base length of the second operation has to be the target length of the first operation");const t=new Ge,r=this.clone().getOps().entries(),i=e.clone().getOps().entries();let o=Ge._nextTextOp(r),s=Ge._nextTextOp(i);for(;!(o==null&&s==null);){if(o&&o.isDelete()){t.delete(o.chars),o=Ge._nextTextOp(r);continue}if(s&&s.isInsert()){t.insert(s.text,s.attributes),s=Ge._nextTextOp(i);continue}if(Oh(o==null,"Cannot compose operations: first operation is too short."),Oh(s==null,"Cannot compose operations: first operation is too long."),o==null||s==null)break;if(o.isRetain()&&s.isRetain()){const a=this._composeAttributes(o.attributes,s.attributes,!1);o.chars>s.chars?(t.retain(s.chars,a),o.chars-=s.chars,s=Ge._nextTextOp(i)):o.chars===s.chars?(t.retain(o.chars,a),o=Ge._nextTextOp(r),s=Ge._nextTextOp(i)):(t.retain(o.chars,a),s.chars-=o.chars,o=Ge._nextTextOp(r));continue}if(o.isInsert()&&s.isDelete()){o.text.length>s.chars?(o.text=o.text.slice(s.chars),s=Ge._nextTextOp(i)):o.text.length===s.chars?(o=Ge._nextTextOp(r),s=Ge._nextTextOp(i)):(s.chars-=o.text.length,o=Ge._nextTextOp(r));continue}if(o.isInsert()&&s.isRetain()){const a=this._composeAttributes(o.attributes,s.attributes,!0);o.text.length>s.chars?(t.insert(o.text.slice(0,s.chars),a),o.text=o.text.slice(s.chars),s=Ge._nextTextOp(i)):o.text.length===s.chars?(t.insert(o.text,a),o=Ge._nextTextOp(r),s=Ge._nextTextOp(i)):(t.insert(o.text,a),s.chars-=o.text.length,o=Ge._nextTextOp(r));continue}if(o.isRetain()&&s.isDelete()){o.chars>s.chars?(t.delete(s.chars),o.chars-=s.chars,s=Ge._nextTextOp(i)):o.chars===s.chars?(t.delete(s.chars),o=Ge._nextTextOp(r),s=Ge._nextTextOp(i)):(t.delete(o.chars),s.chars-=o.chars,o=Ge._nextTextOp(r));continue}q5(`This should not happen:
op1: ${o}
op2: ${s}`)}return t}_composeAttributes(e,t,r){const i={};for(const o in e)i[o]=e[o];for(const o in t)r&&t[o]===!1?delete i[o]:i[o]=t[o];return i}_getSimpleOp(e){const t=e.getOps();switch(t.length){case 1:return t[0];case 2:{if(t[0].isRetain())return t[1];if(t[1].isRetain())return t[0];break}case 3:{if(t[0].isRetain()&&t[2].isRetain())return t[1];break}}return null}_getStartIndex(e){const t=e.getOps();if(!t)return 0;const r=t[0];return r&&r.isRetain()?r.chars:0}shouldBeComposedWith(e){if(this.isNoop()||e.isNoop())return!0;const t=this._getStartIndex(this),r=this._getStartIndex(e),i=this._getSimpleOp(this),o=this._getSimpleOp(e);return i==null||o==null?!1:i.isInsert()&&o.isInsert()?t+i.text.length===r:i.isDelete()&&o.isDelete()?r+o.chars===t||t===r:!1}shouldBeComposedWithInverted(e){if(this.isNoop()||e.isNoop())return!0;const t=this._getStartIndex(this),r=this._getStartIndex(e),i=this._getSimpleOp(this),o=this._getSimpleOp(e);return i==null||o==null?!1:i.isInsert()&&o.isInsert()?t+i.text.length===r||t===r:i.isDelete()&&o.isDelete()?r+o.chars===t:!1}static _transformAttributes(e,t){const r={},i={},o={};for(const s in e)o[s]=!0;for(const s in t)o[s]=!0;for(const s in o){const a=e[s],u=t[s];da(a!=null||u!=null),a==null?i[s]=u:u==null?r[s]=a:a===u||(r[s]=a)}return[r,i]}static transform(e,t){C_(e._baseLength,t._baseLength,"Both operations have to have the same base length");const r=new Ge,i=new Ge,o=e.clone().getOps().entries(),s=t.clone().getOps().entries();let a=Ge._nextTextOp(o),u=Ge._nextTextOp(s);for(;!(a==null&&u==null);){if(a&&a.isInsert()){r.insert(a.text,a.attributes),i.retain(a.text.length,a.attributes),a=Ge._nextTextOp(o);continue}if(u&&u.isInsert()){r.retain(u.text.length,u.attributes),i.insert(u.text,u.attributes),u=Ge._nextTextOp(s);continue}if(Oh(a==null,"Cannot transform operations: first operation is too short."),Oh(u==null,"Cannot transform operations: first operation is too long."),a==null||u==null)break;if(a.isRetain()&&u.isRetain()){let l=0;const f=Ge._transformAttributes(a.attributes,u.attributes);a.chars>u.chars?(l=u.chars,a.chars-=u.chars,u=Ge._nextTextOp(s)):a.chars===u.chars?(l=u.chars,a=Ge._nextTextOp(o),u=Ge._nextTextOp(s)):(l=a.chars,u.chars-=a.chars,a=Ge._nextTextOp(o)),r.retain(l,f[0]),i.retain(l,f[1]);continue}if(a.isDelete()&&u.isDelete()){a.chars>u.chars?(a.chars-=u.chars,u=Ge._nextTextOp(s)):a.chars===u.chars?(a=Ge._nextTextOp(o),u=Ge._nextTextOp(s)):(u.chars-=a.chars,a=Ge._nextTextOp(o));continue}if(a.isDelete()&&u.isRetain()){let l=0;a.chars>u.chars?(l=u.chars,a.chars-=u.chars,u=Ge._nextTextOp(s)):a.chars===u.chars?(l=u.chars,a=Ge._nextTextOp(o),u=Ge._nextTextOp(s)):(l=a.chars,u.chars-=a.chars,a=Ge._nextTextOp(o)),r.delete(l);continue}if(a.isRetain()&&u.isDelete()){let l=0;a.chars>u.chars?(l=u.chars,a.chars-=u.chars,u=Ge._nextTextOp(s)):a.chars===u.chars?(l=a.chars,a=Ge._nextTextOp(o),u=Ge._nextTextOp(s)):(l=a.chars,u.chars-=a.chars,a=Ge._nextTextOp(o)),i.delete(l);continue}q5(`The two operations aren't compatible:
op1: ${a}
op2: ${u}`)}return[r,i]}transform(e){return Ge.transform(this,e)}toString(){return this._ops.map(e=>e.toString()).join(", ")}toJSON(){const e=[];for(const t of this._ops)t.hasEmptyAttributes()||e.push(t.attributes),e.push(t.valueOf());return e.length===0&&e.push(0),e}static fromJSON(e){const t=new Ge;let r={};for(const i of e){if(typeof i=="object"){r=i;continue}if(typeof i=="string"){t.insert(i,r),r={};continue}if(WK(i),i<0){t.delete(-i),r={};continue}t.retain(i,r),r={}}return t}}const eh="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";class XE{constructor(e,t,r,i){typeof e!="object"&&(e=He.database().ref(e)),this._databaseRef=e,this._ready=!1,this._firebaseCallbacks=[],this._zombie=!1,this._initialRevisions=!1,this.setUserId(t),this.setUserColor(r),this.setUserName(i),this._document=new Ge,this._revision=0,this._pendingReceivedRevisions={},this._emitter=new W0([Tn.Acknowledge,Tn.CursorChange,Tn.Error,Tn.Operation,Tn.Ready,Tn.Retry,Tn.InitialRevision]),this._init()}_init(){const e=this._databaseRef.root.child(".info/connected");this._firebaseOn(e,"value",t=>{t.val()===!0&&this._initializeUserData()}),this.on(Tn.Ready,()=>{this._monitorCursors()}),setTimeout(()=>{this._monitorHistory()},1)}dispose(){if(this._zombie=!0,!this._ready){this.on(Tn.Ready,()=>{this.dispose()});return}this._emitter&&(this._emitter.dispose(),this._emitter=null),this._removeFirebaseCallbacks(),this._databaseRef=null,this._userRef=null,this._document=null}getDocument(){return this._document}isCurrentUser(e){return this._userId==e}on(e,t){var r;return(r=this._emitter)===null||r===void 0?void 0:r.on(e,t)}off(e,t){var r;return(r=this._emitter)===null||r===void 0?void 0:r.off(e,t)}registerCallbacks(e){Object.entries(e).forEach(([t,r])=>{this.on(t,r)})}_trigger(e,t,...r){var i;return(i=this._emitter)===null||i===void 0?void 0:i.trigger(e,t||{},...r)}_initializeUserData(){this._userRef.child("cursor").onDisconnect().remove(),this._userRef.child("color").onDisconnect().remove(),this._userRef.child("name").onDisconnect().remove(),this.sendCursor(this._userCursor||null)}_monitorHistory(){this._databaseRef.child("checkpoint").once("value",e=>{if(this._zombie)return;const t=e.child("id").val(),r=e.child("o").val(),i=e.child("a").val();r!=null&&t!=null&&i!==null?(this._pendingReceivedRevisions[t]={o:r,a:i},this._checkpointRevision=this._revisionFromId(t),this._monitorHistoryStartingAt(this._checkpointRevision+1)):(this._checkpointRevision=0,this._monitorHistoryStartingAt(this._checkpointRevision))}).catch(e=>{console.error("[firebase] Error getting checkpoint",e)})}_historyChildAdded(e){const t=e.key;this._pendingReceivedRevisions[t]=e.val(),this._ready&&this._handlePendingReceivedRevisions()}_monitorHistoryStartingAt(e){const t=this._databaseRef.child("history").startAt(null,this._revisionToId(e));this._firebaseOn(t,"child_added",this._historyChildAdded,this),t.once("value",()=>{this._handleInitialRevisions()}).catch(r=>{console.error("[firebase] Error getting initial revisions",r)})}_handleInitialRevisions(){if(this._zombie)return;Oh(this._ready,"Should not be called multiple times."),this._initialRevisions||(this._initialRevisions=!0,this._trigger(Tn.InitialRevision)),this._revision=this._checkpointRevision;let e=this._revisionToId(this._revision);const t=this._pendingReceivedRevisions;for(;t[e]!=null;){const r=this._parseRevision(t[e]);r?this._document=this._document.compose(r.operation):console.log("Invalid operation.",this._userRef.toString(),e,t[e]),delete t[e],this._revision++,e=this._revisionToId(this._revision)}this._trigger(Tn.Operation,this._document),this._ready=!0,setTimeout(()=>{this._trigger(Tn.Ready,!0)})}_handlePendingReceivedRevisions(){const e=this._pendingReceivedRevisions;let t=this._revisionToId(this._revision),r=!1;for(;e[t]!=null;){this._revision++;const i=this._parseRevision(e[t]);i?(this._document=this._document.compose(i.operation),this._sent&&t===this._sent.id?this._sent.op.equals(i.operation)&&(i.author==this._userId||t==="A0")?(this._revision%XE.CHECKPOINT_FREQUENCY===0&&this._saveCheckpoint(),this._sent=null,this._trigger(Tn.Acknowledge)):(r=!0,this._trigger(Tn.Operation,i.operation)):this._trigger(Tn.Operation,i.operation)):console.log("Invalid operation.",this._databaseRef.toString(),t,e[t]),delete e[t],t=this._revisionToId(this._revision)}r&&(this._sent=null,this._trigger(Tn.Retry))}sendOperation(e,t=OA){if(!this._ready){this.on(Tn.Ready,()=>{this._trigger(Tn.Retry)});return}if(!this._document.canMergeWith(e)){const o="sendOperation() called with invalid operation.";this._trigger(Tn.Error,o,e.toString(),{operation:e.toString(),document:this._document.toString()}),Iye(o)}const r=this._revisionToId(this._revision);this._sent={id:r,op:e};const i={a:this._userId,o:e.toJSON(),t:He.database.ServerValue.TIMESTAMP};this._doTransaction(r,i,t)}_doTransaction(e,t,r){try{this._databaseRef.child("history").child(e).transaction(i=>{if(i===null)return t},(i,o)=>{if(i){if(console.error("[firebase] Transaction error - onComplete",i),i.message==="disconnect")return this._sent&&this._sent.id===e&&setTimeout(()=>{this._doTransaction(e,t,r)}),r(i,!1);this._trigger(Tn.Error,i,t.o.toString(),{operation:t.o.toString(),document:this._document.toString()}),Eye(i.message)}return r(null,o)},!1).catch(i=>{console.error("[firebase] Transaction error - catch()",i)})}catch(i){console.error("[firebase] Transaction error - trycatch",i)}}_parseRevision(e){if(typeof e!="object"||typeof e.o!="object")return null;let t=null;try{t=Ge.fromJSON(e.o)}catch{return null}return this._document.canMergeWith(t)?{author:e.a,operation:t}:null}_saveCheckpoint(){this._databaseRef.child("checkpoint").set({a:this._userId,o:this._document.toJSON(),id:this._revisionToId(this._revision-1)}).catch(e=>{console.error("[firebase] Error saving checkpoint",e)})}isHistoryEmpty(){return da(this._ready,"Not ready yet."),this._revision===0}setUserId(e){da(typeof e=="string"||typeof e=="number","User ID must be either String or Integer."),this._userRef&&(this._userRef.child("cursor").remove(),this._userRef.child("cursor").onDisconnect().cancel(),this._userRef.child("color").remove(),this._userRef.child("color").onDisconnect().cancel(),this._userRef=null),this._userId=e,this._userRef=this._databaseRef.child("users").child(e.toString()),this._initializeUserData()}setUserColor(e){da(typeof e=="string","User Color must be String."),this._userRef&&(this._userRef.child("color").set(e),this._userColor=e)}setUserName(e){da(typeof e=="string","User Name must be String."),this._userRef&&(this._userRef.child("name").set(e),this._userName=e)}sendCursor(e,t=OA){if(!this._userRef)return;const r=e!=null?e.toJSON():null;this._userRef.child("cursor").set(r,function(i){typeof t=="function"&&t(i,e)}),this._userCursor=e}_childChanged(e){if(this._zombie)return;const t=e.key,r=e.val();this._trigger(Tn.CursorChange,t,r.cursor,r.color,r.name)}_childRemoved(e){const t=e.key;this._trigger(Tn.CursorChange,t,null)}_monitorCursors(){const e=this._databaseRef.child("users");this._firebaseOn(e,"child_added",this._childChanged,this),this._firebaseOn(e,"child_changed",this._childChanged,this),this._firebaseOn(e,"child_removed",this._childRemoved,this)}_firebaseOn(e,t,r,i){this._firebaseCallbacks.push({ref:e,eventType:t,callback:r,context:i}),e.on(t,r,i)}_removeFirebaseCallbacks(){for(const e of this._firebaseCallbacks){const{ref:t,eventType:r,callback:i,context:o}=e;t.off(r,i,o)}this._firebaseCallbacks=[]}_revisionToId(e){if(e===0)return"A0";let t="";for(;e>0;){const i=e%eh.length;t=eh[i]+t,e-=i,e/=eh.length}return`${eh[t.length+9]}${t}`}_revisionFromId(e){da(e.length>0&&e[0]===eh[e.length+8]);let t=0;for(let r=1;r<e.length;r++)t*=eh.length,t+=eh.indexOf(e[r]);return t}}XE.CHECKPOINT_FREQUENCY=100;var Sc;(function(n){n.ApplyOperation="apply",n.SendOperation="send"})(Sc||(Sc={}));class Nye{constructor(){}isSynchronized(){return!0}isAwaitingConfirm(){return!1}isAwaitingWithBuffer(){return!1}applyClient(e,t){return e.sendOperation(t),new Dy(t)}applyServer(e,t){return e.applyOperation(t),this}serverAck(e){return z5("There is no pending operation."),this}serverRetry(e){return z5("There is no pending operation."),this}}const VK=new Nye;class Dy{constructor(e){this._outstanding=e}isSynchronized(){return!1}isAwaitingConfirm(){return!0}isAwaitingWithBuffer(){return!1}applyClient(e,t){return new H1(this._outstanding,t)}applyServer(e,t){const r=this._outstanding.transform(t);return e.applyOperation(r[1]),new Dy(r[0])}serverAck(e){return VK}serverRetry(e){return e.sendOperation(this._outstanding),this}}class H1{constructor(e,t){this._outstanding=e,this._buffer=t}isSynchronized(){return!1}isAwaitingConfirm(){return!1}isAwaitingWithBuffer(){return!0}applyClient(e,t){const r=this._buffer.compose(t);return new H1(this._outstanding,r)}applyServer(e,t){const r=this._outstanding.transform(t),i=this._buffer.transform(r[1]);return e.applyOperation(i[1]),new H1(r[0],i[0])}serverAck(e){return e.sendOperation(this._buffer),new Dy(this._buffer)}serverRetry(e){const t=this._outstanding.compose(this._buffer);return e.sendOperation(t),new Dy(t)}}class Aye{constructor(){this._state=VK,this._emitter=new W0([Sc.ApplyOperation,Sc.SendOperation])}dispose(){this._emitter.dispose()}isSynchronized(){return this._state.isSynchronized()}isAwaitingConfirm(){return this._state.isAwaitingConfirm()}isAwaitingWithBuffer(){return this._state.isAwaitingWithBuffer()}on(e,t){return this._emitter.on(e,t)}off(e,t){return this._emitter.off(e,t)}_trigger(e,t){return this._emitter.trigger(e,t)}_setState(e){this._state=e}applyClient(e){this._setState(this._state.applyClient(this,e))}applyServer(e){this._setState(this._state.applyServer(this,e))}serverAck(){this._setState(this._state.serverAck(this))}serverRetry(){this._setState(this._state.serverRetry(this))}sendOperation(e){this._trigger(Sc.SendOperation,e)}applyOperation(e){this._trigger(Sc.ApplyOperation,e)}}class ig{constructor(e,t){this._cursorBefore=e,this._cursorAfter=t}clone(){return new ig(this._cursorBefore,this._cursorAfter)}invert(){return new ig(this._cursorAfter,this._cursorBefore)}compose(e){return new ig(this._cursorBefore,e._cursorAfter)}transform(e){return new ig(this._cursorBefore?this._cursorBefore.transform(e):null,this._cursorAfter?this._cursorAfter.transform(e):null)}getCursor(){return this._cursorAfter}}class Oye{constructor(e,t){this._clientId=e,this._editorAdapter=t}setColor(e){this._userColor=e}setUserName(e){this._userName=e}updateCursor(e){this.removeCursor(),this._userCursor=e,this._mark=this._editorAdapter.setOtherCursor(this._clientId,e,this._userColor,this._userName)}removeCursor(){this._mark&&this._mark.dispose()}}var Qo;(function(n){n.Normal="normal",n.Undoing="undoing",n.Redoing="redoing"})(Qo||(Qo={}));class QE{constructor(e=QE.MAX_ITEM_IN_STACK){Cye(e,0),this._maxItems=e,this._undoStack=[],this._redoStack=[],this._compose=!0,this._state=Qo.Normal}dispose(){C_(this._state,Qo.Normal,"Cannot dispose UndoManager while an undo/redo is in-progress"),this._undoStack=[],this._redoStack=[]}_addOnNormalState(e,t){let r=e;this._compose&&t&&this._undoStack.length>0&&(r=e.compose(this._undoStack.pop())),this._undoStack.push(r),this._undoStack.length>this._maxItems&&this._undoStack.shift(),this._compose=!0,this._redoStack=[]}_addOnUndoingState(e){this._redoStack.push(e),this._compose=!1}_addOnRedoingState(e){this._undoStack.push(e),this._compose=!0}add(e,t=!1){switch(this._state){case Qo.Undoing:return this._addOnUndoingState(e);case Qo.Redoing:return this._addOnRedoingState(e);case Qo.Normal:return this._addOnNormalState(e,t)}}last(){return this._undoStack.length===0?null:this._undoStack[this._undoStack.length-1].clone()}_transformStack(e,t){const r=[],i=[...e].reverse();for(const o of i){const s=o.transform(t);s[0].isNoop()||r.push(s[0]),t=s[1]}return r.reverse()}transform(e){this._undoStack=this._transformStack(this._undoStack,e),this._redoStack=this._transformStack(this._redoStack,e)}performUndo(e){this._state=Qo.Undoing,H_(this._undoStack.length,0,"undo not possible"),e(this._undoStack.pop()),this._state=Qo.Normal}performRedo(e){this._state=Qo.Redoing,H_(this._redoStack.length,0,"redo not possible"),e(this._redoStack.pop()),this._state=Qo.Normal}canUndo(){return this._undoStack.length!==0}canRedo(){return this._redoStack.length!==0}isUndoing(){return this._state===Qo.Undoing}isRedoing(){return this._state===Qo.Redoing}}QE.MAX_ITEM_IN_STACK=50;class Ju{constructor(e,t=null){this._operation=e,this._metadata=t}isWrappedOperation(){return!0}getOps(){return this._operation.getOps()}getCursor(){return this._metadata?this._metadata.getCursor():null}getOperation(){return this._operation.clone()}retain(e,t){return this._operation.retain(e,t),this}insert(e,t){return this._operation.insert(e,t),this}delete(e){return this._operation.delete(e),this}isNoop(){return this._operation.isNoop()}clone(){var e;return new Ju(this._operation.clone(),(e=this._metadata)===null||e===void 0?void 0:e.clone())}apply(e,t,r){return this._operation.apply(e,t,r)}invert(e){var t;return new Ju(this._operation.invert(e),(t=this._metadata)===null||t===void 0?void 0:t.invert())}_getWrappedOperation(e){return e.isWrappedOperation()?e:new Ju(e)}equals(e){const t=this._getWrappedOperation(e);return this._operation.equals(t._operation)}transform(e){var t,r;const i=this._getWrappedOperation(e),[o,s]=this._operation.transform(i._operation),a=new Ju(o,(t=this._metadata)===null||t===void 0?void 0:t.transform(i._operation)),u=new Ju(s,(r=i._metadata)===null||r===void 0?void 0:r.transform(this._operation));return[a,u]}canMergeWith(e){const t=this._getWrappedOperation(e);return this._operation.canMergeWith(t._operation)}_composeMeta(e){return this._metadata?e?this._metadata.compose(e):this._metadata:e}compose(e){const t=this._getWrappedOperation(e);return new Ju(this._operation.compose(t._operation),this._composeMeta(t._metadata))}shouldBeComposedWith(e){const t=this._getWrappedOperation(e);return this._operation.shouldBeComposedWith(t._operation)}shouldBeComposedWithInverted(e){const t=this._getWrappedOperation(e);return this._operation.shouldBeComposedWithInverted(t._operation)}toString(){return this._operation.toString()}toJSON(){return this._operation.toJSON()}}var io;(function(n){n.Undo="undo",n.Redo="redo",n.Error="error",n.Synced="synced"})(io||(io={}));class Rye{constructor(e,t){this._focused=!1,this._cursor=null,this._sendCursorTimeout=null,this._client=new Aye,this._databaseAdapter=e,this._editorAdapter=t,this._undoManager=new QE,this._remoteClients=new Map,this._emitter=new W0([io.Error,io.Undo,io.Redo,io.Synced]),this._init()}_init(){this._editorAdapter.registerCallbacks({change:(e,t)=>{this._onChange(e,t)},cursorActivity:()=>{this._onCursorActivity()},blur:()=>{this._onBlur()},focus:()=>{this._onFocus()},error:(e,t,r)=>{this._trigger(io.Error,e,t,r)}}),this._editorAdapter.registerUndo(()=>{this._undo()}),this._editorAdapter.registerRedo(()=>{this._redo()}),this._databaseAdapter.registerCallbacks({ack:()=>{this._client.serverAck(),this._updateCursor(),this._sendCursor(this._cursor),this._emitSynced()},retry:()=>{this._client.serverRetry()},operation:e=>{this._client.applyServer(e)},initialRevision:()=>{this._editorAdapter.setInitiated(!0)},cursor:(e,t,r,i)=>{if(this._databaseAdapter.isCurrentUser(e)||!this._client.isSynchronized())return;const o=this._getClientObject(e);if(!t){o.removeCursor();return}r&&o.setColor(r),i&&o.setUserName(i),o.updateCursor(nP.fromJSON(t))},error:(e,t,r)=>{this._trigger(io.Error,e,t,r)}}),this._client.on(Sc.ApplyOperation,e=>{this._applyOperation(e)}),this._client.on(Sc.SendOperation,e=>{this._sendOperation(e)})}dispose(){this._sendCursorTimeout&&(clearTimeout(this._sendCursorTimeout),this._sendCursorTimeout=null),this._emitter.dispose(),this._client.dispose(),this._undoManager.dispose(),this._remoteClients.clear()}on(e,t){return this._emitter.on(e,t)}off(e,t){return this._emitter.off(e,t)}_trigger(e,t,...r){return this._emitter.trigger(e,t,...r)}_emitSynced(){this._trigger(io.Synced,this._client.isSynchronized())}_getClientObject(e){let t=this._remoteClients.get(e);return t||(t=new Oye(e,this._editorAdapter),this._remoteClients.set(e,t),t)}_onChange(e,t){const r=this._cursor;this._updateCursor();const i=this._undoManager.canUndo()&&t.shouldBeComposedWithInverted(this._undoManager.last()),o=new ig(this._cursor,r);this._undoManager.add(new Ju(t,o),i),this._client.applyClient(e)}clearUndoRedoStack(){this._undoManager.dispose()}_applyUnredo(e){this._undoManager.add(this._editorAdapter.invertOperation(e));const t=e.getOperation();this._editorAdapter.applyOperation(t),this._cursor=e.getCursor(),this._cursor&&this._editorAdapter.setCursor(this._cursor),this._client.applyClient(t)}_undo(){this._undoManager.canUndo()&&this._undoManager.performUndo(e=>{this._applyUnredo(e),this._trigger(io.Undo,e.toString())})}_redo(){this._undoManager.canRedo()&&this._undoManager.performRedo(e=>{this._applyUnredo(e),this._trigger(io.Redo,e.toString())})}_sendOperation(e){this._databaseAdapter.sendOperation(e)}_applyOperation(e){this._editorAdapter.applyOperation(e),this._updateCursor(),this._undoManager.transform(new Ju(e)),this._emitSynced()}_sendCursor(e){if(this._sendCursorTimeout&&(clearTimeout(this._sendCursorTimeout),this._sendCursorTimeout=null),this._client.isAwaitingWithBuffer()){this._sendCursorTimeout=setTimeout(()=>{this._sendCursor(e)},3);return}this._databaseAdapter.sendCursor(e)}_updateCursor(){this._cursor=this._editorAdapter.getCursor()}_onCursorActivity(){const e=this._cursor;this._updateCursor(),!(e==null&&e==this._cursor)&&this._sendCursor(this._cursor)}_onBlur(){this._cursor=null,this._sendCursor(null),this._focused=!1}_onFocus(){this._focused=!0,this._onCursorActivity()}}var Jo;(function(n){n.Ready="ready",n.Synced="synced",n.Undo="undo",n.Redo="redo",n.Error="error"})(Jo||(Jo={}));class qP{constructor(e,t,r){if(!new.target)return new qP(e,t,r);this._ready=!1,this._zombie=!1,this._options=r,this._databaseAdapter=e,this._editorAdapter=t,this._editorClient=new Rye(e,t),this._emitter=new W0([Jo.Ready,Jo.Synced,Jo.Undo,Jo.Redo,Jo.Error]),this._init()}_init(){this._databaseAdapter.on(Tn.Ready,()=>{this._ready=!0;const{defaultText:e}=this._options;e&&this.isHistoryEmpty()&&(this.setText(e),this.clearUndoRedoStack()),this._trigger(Jo.Ready,!0)}),this._editorClient.on(io.Synced,e=>{setTimeout(()=>{this._trigger(Jo.Synced,e)})}),this._editorClient.on(io.Undo,e=>{setTimeout(()=>{this._trigger(Jo.Undo,e)})}),this._editorClient.on(io.Redo,e=>{setTimeout(()=>{this._trigger(Jo.Redo,e)})}),this._editorClient.on(io.Error,(e,t,r)=>{setTimeout(()=>{this._trigger(Jo.Error,e,t,r)})})}getConfiguration(e){return e in this._options?this._options[e]:null}on(e,t){var r;return(r=this._emitter)===null||r===void 0?void 0:r.on(e,t)}off(e,t){var r;return(r=this._emitter)===null||r===void 0?void 0:r.off(e,t)}_trigger(e,t,...r){var i;return(i=this._emitter)===null||i===void 0?void 0:i.trigger(e,t,...r)}isHistoryEmpty(){return this._assertReady("isHistoryEmpty"),this._databaseAdapter.isHistoryEmpty()}setUserId(e){this._databaseAdapter.setUserId(e),this._options.userId=e}setUserColor(e){this._databaseAdapter.setUserColor(e),this._options.userColor=e}setUserName(e){this._databaseAdapter.setUserName(e),this._options.userName=e}getText(){return this._assertReady("getText"),this._editorAdapter.getText()}setText(e=""){this._assertReady("setText"),this._editorAdapter.setText(e),this._editorAdapter.setCursor(new nP(0,0))}clearUndoRedoStack(){this._assertReady("clearUndoRedoStack"),this._editorClient.clearUndoRedoStack()}dispose(){this._zombie=!0,this._databaseAdapter.dispose(),this._editorAdapter.dispose(),this._editorClient.dispose(),this._emitter&&(this._trigger(Jo.Ready,!1),this._emitter.dispose(),this._emitter=null)}_assertReady(e){da(this._ready,`You must wait for the "ready" event before calling ${e}.`),Oh(this._zombie,`You can't use a Firepad after calling dispose()!  [called ${e}]`)}}var zw,Mye=new Uint8Array(16);function Pye(){if(!zw&&(zw=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!zw))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zw(Mye)}const Fye=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Bye(n){return typeof n=="string"&&Fye.test(n)}var ui=[];for(var jk=0;jk<256;++jk)ui.push((jk+256).toString(16).substr(1));function Wye(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(ui[n[e+0]]+ui[n[e+1]]+ui[n[e+2]]+ui[n[e+3]]+"-"+ui[n[e+4]]+ui[n[e+5]]+"-"+ui[n[e+6]]+ui[n[e+7]]+"-"+ui[n[e+8]]+ui[n[e+9]]+"-"+ui[n[e+10]]+ui[n[e+11]]+ui[n[e+12]]+ui[n[e+13]]+ui[n[e+14]]+ui[n[e+15]]).toLowerCase();if(!Bye(t))throw TypeError("Stringified UUID is invalid");return t}function Vye(n,e,t){n=n||{};var r=n.random||(n.rng||Pye)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Wye(r)}const Hye="modulepreload",Uye=function(n){return"/"+n},$5={},Ve=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(t.map(a=>{if(a=Uye(a),a in $5)return;$5[a]=!0;const u=a.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Hye,u||(f.as="script",f.crossOrigin=""),f.href=a,s&&f.setAttribute("nonce",s),document.head.appendChild(f),u)return new Promise((h,d)=>{f.addEventListener("load",h),f.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};function jye(n,e){var t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,function(r,i){var o=i[0];return typeof e[o]<"u"?e[o]:r}),t}function S(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return jye(e,t)}function Yo(n,e){return e===void 0&&(e=0),n[n.length-(1+e)]}function zye(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function hf(n,e,t){if(t===void 0&&(t=function(o,s){return o===s}),n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(var r=0,i=n.length;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function JE(n,e,t){for(var r=0,i=n.length-1;r<=i;){var o=(r+i)/2|0,s=t(n[o],e);if(s<0)r=o+1;else if(s>0)i=o-1;else return o}return-(r+1)}function qye(n,e){var t=0,r=n.length;if(r===0)return 0;for(;t<r;){var i=Math.floor((t+r)/2);e(n[i])?r=i:t=i+1}return t}function eI(n,e){return MA(n,e,0,n.length-1,[]),n}function $ye(n,e,t,r,i,o){for(var s=t,a=r+1,u=t;u<=i;u++)o[u]=n[u];for(var u=t;u<=i;u++)s>r?n[u]=o[a++]:a>i?n[u]=o[s++]:e(o[a],o[s])<0?n[u]=o[a++]:n[u]=o[s++]}function MA(n,e,t,r,i){if(!(r<=t)){var o=t+(r-t)/2|0;MA(n,e,t,o,i),MA(n,e,o+1,r,i),!(e(n[o],n[o+1])<=0)&&$ye(n,e,t,o,r,i)}}function K5(n,e){for(var t=[],r=void 0,i=0,o=eI(n.slice(0),e);i<o.length;i++){var s=o[i];!r||e(r[0],s)!==0?(r=[s],t.push(r)):r.push(s)}return t}function Ol(n){return n.filter(function(e){return!!e})}function $P(n){return!Array.isArray(n)||n.length===0}function vo(n){return Array.isArray(n)&&n.length>0}function HK(n,e){return n.filter(function(t,r){return n.indexOf(t)===r})}function G5(n){var e=new Set;return n.filter(function(t){return e.has(t)?!1:(e.add(t),!0)})}function Mc(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(e(r))return t}return-1}function PA(n,e,t){t===void 0&&(t=void 0);var r=Mc(n,e);return r<0?t:n[r]}function Ly(n){var e;return(e=[]).concat.apply(e,n)}function eo(n,e){var t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);var r=[];if(t<=e)for(var i=t;i<e;i++)r.push(i);else for(var i=t;i>e;i--)r.push(i);return r}function FA(n,e,t){var r=n.slice(0,e),i=n.slice(e);return r.concat(t,i)}function zk(n,e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function qw(n,e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function UK(n){return Array.isArray(n)?n:[n]}var Ov={number:"number",string:"string",undefined:"undefined",object:"object",function:"function"};function jK(n){return Array.isArray?Array.isArray(n):!!(n&&typeof n.length===Ov.number&&n.constructor===Array)}function bu(n){return typeof n===Ov.string||n instanceof String}function di(n){return typeof n===Ov.object&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function yl(n){return(typeof n===Ov.number||n instanceof Number)&&!isNaN(n)}function zK(n){return n===!0||n===!1}function Mi(n){return typeof n===Ov.undefined}function Pc(n){return Mi(n)||n===null}var Kye=Object.prototype.hasOwnProperty;function qK(n){if(!di(n))return!1;for(var e in n)if(Kye.call(n,e))return!1;return!0}function U_(n){return typeof n===Ov.function}function Gye(n,e){for(var t=Math.min(n.length,e.length),r=0;r<t;r++)Yye(n[r],e[r])}function Yye(n,e){if(bu(e)){if(typeof n!==e)throw new Error("argument does not match constraint: typeof "+e)}else if(U_(e)){try{if(n instanceof e)return}catch{}if(!Pc(n)&&n.constructor===e||e.length===1&&e.call(void 0,n)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Zye(n){for(var e=[],t=Object.getPrototypeOf(n);Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function KP(n){for(var e=[],t=0,r=Zye(n);t<r.length;t++){var i=r[t];typeof n[i]=="function"&&e.push(i)}return e}function $K(n,e){for(var t=function(a){return function(){var u=Array.prototype.slice.call(arguments,0);return e(a,u)}},r={},i=0,o=n;i<o.length;i++){var s=o[i];r[s]=t(s)}return r}function tI(n){return n===null?void 0:n}function Ug(n){return typeof n>"u"?null:n}function tl(n){if(!n||typeof n!="object"||n instanceof RegExp)return n;var e=Array.isArray(n)?[]:{};return Object.keys(n).forEach(function(t){n[t]&&typeof n[t]=="object"?e[t]=tl(n[t]):e[t]=n[t]}),e}function Xye(n){if(!n||typeof n!="object")return n;for(var e=[n];e.length>0;){var t=e.shift();Object.freeze(t);for(var r in t)if(KK.call(t,r)){var i=t[r];typeof i=="object"&&!Object.isFrozen(i)&&e.push(i)}}return n}var KK=Object.prototype.hasOwnProperty;function Qye(n,e){return BA(n,e,new Set)}function BA(n,e,t){if(Pc(n))return n;var r=e(n);if(typeof r<"u")return r;if(jK(n)){for(var i=[],o=0,s=n;o<s.length;o++){var a=s[o];i.push(BA(a,e,t))}return i}if(di(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);var u={};for(var l in n)KK.call(n,l)&&(u[l]=BA(n[l],e,t));return t.delete(n),u}return n}function _r(n,e,t){return t===void 0&&(t=!0),di(n)?(di(e)&&Object.keys(e).forEach(function(r){r in n?t&&(di(n[r])&&di(e[r])?_r(n[r],e[r],t):n[r]=e[r]):n[r]=e[r]}),n):e}function Jye(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(r){return Object.keys(r).forEach(function(i){return n[i]=r[i]})}),n}function Fc(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;var t,r;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!Fc(n[t],e[t]))return!1}else{var i=[];for(r in n)i.push(r);i.sort();var o=[];for(r in e)o.push(r);if(o.sort(),!Fc(i,o))return!1;for(t=0;t<i.length;t++)if(!Fc(n[i[t]],e[i[t]]))return!1}return!0}function Lp(n,e,t){var r=e(n);return typeof r>"u"?t:r}var e0e={},KC="en",U1=!1,j1=!1,WA=!1,GK=!1,YK=!1,$w=void 0,qk=KC,t0e=void 0,Kw=void 0,n0e=typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.electron<"u"&&process.type==="renderer";if(typeof navigator=="object"&&!n0e)Kw=navigator.userAgent,U1=Kw.indexOf("Windows")>=0,j1=Kw.indexOf("Macintosh")>=0,WA=Kw.indexOf("Linux")>=0,YK=!0,$w=navigator.language,qk=$w;else if(typeof process=="object"){U1=process.platform==="win32",j1=process.platform==="darwin",WA=process.platform==="linux",$w=KC,qk=KC;var Y5=e0e.VSCODE_NLS_CONFIG;if(Y5)try{var $k=JSON.parse(Y5),Z5=$k.availableLanguages["*"];$w=$k.locale,qk=Z5||KC,t0e=$k._translationsConfigFile}catch{}GK=!0}var Hi=U1,ct=j1,Rl=WA,Da=GK,GP=YK,r0e=typeof self=="object"?self:typeof global=="object"?global:{},To=r0e,Zm=null;function ZK(n){return Zm===null&&(To.setImmediate?Zm=To.setImmediate.bind(To):typeof process<"u"&&typeof process.nextTick=="function"?Zm=process.nextTick.bind(process):Zm=To.setTimeout.bind(To)),Zm(n)}var Qa=j1?2:U1?1:3,XK="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function i0e(n){n===void 0&&(n="");for(var e="(-?\\d*\\.\\d\\w*)|([^",t=0,r=XK;t<r.length;t++){var i=r[t];n.indexOf(i)>=0||(e+="\\"+i)}return e+="\\s]+)",new RegExp(e,"g")}var QK=i0e();function VA(n){var e=QK;if(n&&n instanceof RegExp)if(n.global)e=n;else{var t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}function o0e(n,e,t,r){var i=n-1-r,o=t.lastIndexOf(" ",i-1)+1;e.lastIndex=o;for(var s;s=e.exec(t);){var a=s.index||0;if(a<=i&&e.lastIndex>=i)return{word:s[0],startColumn:r+1+a,endColumn:r+1+e.lastIndex}}return null}function s0e(n,e,t,r){var i=n-1-r;e.lastIndex=0;for(var o;o=e.exec(t);){var s=o.index||0;if(s>i)return null;if(e.lastIndex>=i)return{word:o[0],startColumn:r+1+s,endColumn:r+1+e.lastIndex}}return null}function HA(n,e,t,r){e.lastIndex=0;var i=e.exec(t);if(!i)return null;var o=i[0].indexOf(" ")>=0?s0e(n,e,t,r):o0e(n,e,t,r);return e.lastIndex=0,o}var UA=function(){return UA=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},UA.apply(this,arguments)};function a0e(n){return"blink"}var vn;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(vn||(vn={}));function u0e(n){if(n===vn.Line)return"line";if(n===vn.Block)return"block";if(n===vn.Underline)return"underline";if(n===vn.LineThin)return"line-thin";if(n===vn.BlockOutline)return"block-outline";if(n===vn.UnderlineThin)return"underline-thin";throw new Error("cursorStyleToString: Unknown cursorStyle")}function l0e(n,e){return typeof n!="string"?e:n==="line"?vn.Line:n==="block"?vn.Block:n==="underline"?vn.Underline:n==="line-thin"?vn.LineThin:n==="block-outline"?vn.BlockOutline:n==="underline-thin"?vn.UnderlineThin:vn.Line}var JK=function(){function n(e){this.canUseLayerHinting=e.canUseLayerHinting,this.pixelRatio=e.pixelRatio,this.editorClassName=e.editorClassName,this.lineHeight=e.lineHeight|0,this.readOnly=e.readOnly,this.accessibilitySupport=e.accessibilitySupport,this.multiCursorModifier=e.multiCursorModifier,this.multiCursorMergeOverlapping=e.multiCursorMergeOverlapping,this.wordSeparators=e.wordSeparators,this.autoClosingBrackets=e.autoClosingBrackets,this.autoClosingQuotes=e.autoClosingQuotes,this.autoClosingOvertype=e.autoClosingOvertype,this.autoSurround=e.autoSurround,this.autoIndent=e.autoIndent,this.useTabStops=e.useTabStops,this.tabFocusMode=e.tabFocusMode,this.dragAndDrop=e.dragAndDrop,this.emptySelectionClipboard=e.emptySelectionClipboard,this.copyWithSyntaxHighlighting=e.copyWithSyntaxHighlighting,this.layoutInfo=e.layoutInfo,this.fontInfo=e.fontInfo,this.viewInfo=e.viewInfo,this.wrappingInfo=e.wrappingInfo,this.contribInfo=e.contribInfo,this.showUnused=e.showUnused}return n.prototype.equals=function(e){return this.canUseLayerHinting===e.canUseLayerHinting&&this.pixelRatio===e.pixelRatio&&this.editorClassName===e.editorClassName&&this.lineHeight===e.lineHeight&&this.readOnly===e.readOnly&&this.accessibilitySupport===e.accessibilitySupport&&this.multiCursorModifier===e.multiCursorModifier&&this.multiCursorMergeOverlapping===e.multiCursorMergeOverlapping&&this.wordSeparators===e.wordSeparators&&this.autoClosingBrackets===e.autoClosingBrackets&&this.autoClosingQuotes===e.autoClosingQuotes&&this.autoClosingOvertype===e.autoClosingOvertype&&this.autoSurround===e.autoSurround&&this.autoIndent===e.autoIndent&&this.useTabStops===e.useTabStops&&this.tabFocusMode===e.tabFocusMode&&this.dragAndDrop===e.dragAndDrop&&this.showUnused===e.showUnused&&this.emptySelectionClipboard===e.emptySelectionClipboard&&this.copyWithSyntaxHighlighting===e.copyWithSyntaxHighlighting&&n._equalsLayoutInfo(this.layoutInfo,e.layoutInfo)&&this.fontInfo.equals(e.fontInfo)&&n._equalsViewOptions(this.viewInfo,e.viewInfo)&&n._equalsWrappingInfo(this.wrappingInfo,e.wrappingInfo)&&n._equalsContribOptions(this.contribInfo,e.contribInfo)},n.prototype.createChangeEvent=function(e){return{canUseLayerHinting:this.canUseLayerHinting!==e.canUseLayerHinting,pixelRatio:this.pixelRatio!==e.pixelRatio,editorClassName:this.editorClassName!==e.editorClassName,lineHeight:this.lineHeight!==e.lineHeight,readOnly:this.readOnly!==e.readOnly,accessibilitySupport:this.accessibilitySupport!==e.accessibilitySupport,multiCursorModifier:this.multiCursorModifier!==e.multiCursorModifier,multiCursorMergeOverlapping:this.multiCursorMergeOverlapping!==e.multiCursorMergeOverlapping,wordSeparators:this.wordSeparators!==e.wordSeparators,autoClosingBrackets:this.autoClosingBrackets!==e.autoClosingBrackets,autoClosingQuotes:this.autoClosingQuotes!==e.autoClosingQuotes,autoClosingOvertype:this.autoClosingOvertype!==e.autoClosingOvertype,autoSurround:this.autoSurround!==e.autoSurround,autoIndent:this.autoIndent!==e.autoIndent,useTabStops:this.useTabStops!==e.useTabStops,tabFocusMode:this.tabFocusMode!==e.tabFocusMode,dragAndDrop:this.dragAndDrop!==e.dragAndDrop,emptySelectionClipboard:this.emptySelectionClipboard!==e.emptySelectionClipboard,copyWithSyntaxHighlighting:this.copyWithSyntaxHighlighting!==e.copyWithSyntaxHighlighting,layoutInfo:!n._equalsLayoutInfo(this.layoutInfo,e.layoutInfo),fontInfo:!this.fontInfo.equals(e.fontInfo),viewInfo:!n._equalsViewOptions(this.viewInfo,e.viewInfo),wrappingInfo:!n._equalsWrappingInfo(this.wrappingInfo,e.wrappingInfo),contribInfo:!n._equalsContribOptions(this.contribInfo,e.contribInfo)}},n._equalsLayoutInfo=function(e,t){return e.width===t.width&&e.height===t.height&&e.glyphMarginLeft===t.glyphMarginLeft&&e.glyphMarginWidth===t.glyphMarginWidth&&e.glyphMarginHeight===t.glyphMarginHeight&&e.lineNumbersLeft===t.lineNumbersLeft&&e.lineNumbersWidth===t.lineNumbersWidth&&e.lineNumbersHeight===t.lineNumbersHeight&&e.decorationsLeft===t.decorationsLeft&&e.decorationsWidth===t.decorationsWidth&&e.decorationsHeight===t.decorationsHeight&&e.contentLeft===t.contentLeft&&e.contentWidth===t.contentWidth&&e.contentHeight===t.contentHeight&&e.renderMinimap===t.renderMinimap&&e.minimapLeft===t.minimapLeft&&e.minimapWidth===t.minimapWidth&&e.viewportColumn===t.viewportColumn&&e.verticalScrollbarWidth===t.verticalScrollbarWidth&&e.horizontalScrollbarHeight===t.horizontalScrollbarHeight&&this._equalsOverviewRuler(e.overviewRuler,t.overviewRuler)},n._equalsOverviewRuler=function(e,t){return e.width===t.width&&e.height===t.height&&e.top===t.top&&e.right===t.right},n._equalsViewOptions=function(e,t){return e.extraEditorClassName===t.extraEditorClassName&&e.disableMonospaceOptimizations===t.disableMonospaceOptimizations&&hf(e.rulers,t.rulers)&&e.ariaLabel===t.ariaLabel&&e.renderLineNumbers===t.renderLineNumbers&&e.renderCustomLineNumbers===t.renderCustomLineNumbers&&e.cursorSurroundingLines===t.cursorSurroundingLines&&e.renderFinalNewline===t.renderFinalNewline&&e.selectOnLineNumbers===t.selectOnLineNumbers&&e.glyphMargin===t.glyphMargin&&e.revealHorizontalRightPadding===t.revealHorizontalRightPadding&&e.roundedSelection===t.roundedSelection&&e.overviewRulerLanes===t.overviewRulerLanes&&e.overviewRulerBorder===t.overviewRulerBorder&&e.cursorBlinking===t.cursorBlinking&&e.mouseWheelZoom===t.mouseWheelZoom&&e.cursorSmoothCaretAnimation===t.cursorSmoothCaretAnimation&&e.cursorStyle===t.cursorStyle&&e.cursorWidth===t.cursorWidth&&e.hideCursorInOverviewRuler===t.hideCursorInOverviewRuler&&e.scrollBeyondLastLine===t.scrollBeyondLastLine&&e.scrollBeyondLastColumn===t.scrollBeyondLastColumn&&e.smoothScrolling===t.smoothScrolling&&e.stopRenderingLineAfter===t.stopRenderingLineAfter&&e.renderWhitespace===t.renderWhitespace&&e.renderControlCharacters===t.renderControlCharacters&&e.fontLigatures===t.fontLigatures&&e.renderIndentGuides===t.renderIndentGuides&&e.highlightActiveIndentGuide===t.highlightActiveIndentGuide&&e.renderLineHighlight===t.renderLineHighlight&&this._equalsScrollbarOptions(e.scrollbar,t.scrollbar)&&this._equalsMinimapOptions(e.minimap,t.minimap)&&e.fixedOverflowWidgets===t.fixedOverflowWidgets},n._equalsScrollbarOptions=function(e,t){return e.arrowSize===t.arrowSize&&e.vertical===t.vertical&&e.horizontal===t.horizontal&&e.useShadows===t.useShadows&&e.verticalHasArrows===t.verticalHasArrows&&e.horizontalHasArrows===t.horizontalHasArrows&&e.handleMouseWheel===t.handleMouseWheel&&e.horizontalScrollbarSize===t.horizontalScrollbarSize&&e.horizontalSliderSize===t.horizontalSliderSize&&e.verticalScrollbarSize===t.verticalScrollbarSize&&e.verticalSliderSize===t.verticalSliderSize&&e.mouseWheelScrollSensitivity===t.mouseWheelScrollSensitivity&&e.fastScrollSensitivity===t.fastScrollSensitivity},n._equalsMinimapOptions=function(e,t){return e.enabled===t.enabled&&e.side===t.side&&e.showSlider===t.showSlider&&e.renderCharacters===t.renderCharacters&&e.maxColumn===t.maxColumn},n._equalFindOptions=function(e,t){return e.seedSearchStringFromSelection===t.seedSearchStringFromSelection&&e.autoFindInSelection===t.autoFindInSelection&&e.globalFindClipboard===t.globalFindClipboard&&e.addExtraSpaceOnTop===t.addExtraSpaceOnTop},n._equalsParameterHintOptions=function(e,t){return e.enabled===t.enabled&&e.cycle===t.cycle},n._equalsHoverOptions=function(e,t){return e.enabled===t.enabled&&e.delay===t.delay&&e.sticky===t.sticky},n._equalsSuggestOptions=function(e,t){return e===t?!0:!e||!t?!1:e.filterGraceful===t.filterGraceful&&e.snippets===t.snippets&&e.snippetsPreventQuickSuggestions===t.snippetsPreventQuickSuggestions&&e.localityBonus===t.localityBonus&&e.shareSuggestSelections===t.shareSuggestSelections&&e.showIcons===t.showIcons&&e.maxVisibleSuggestions===t.maxVisibleSuggestions&&Fc(e.filteredTypes,t.filteredTypes)},n._equalsGotoLocationOptions=function(e,t){return e===t?!0:!e||!t?!1:e.multiple===t.multiple},n._equalsWrappingInfo=function(e,t){return e.inDiffEditor===t.inDiffEditor&&e.isDominatedByLongLines===t.isDominatedByLongLines&&e.isWordWrapMinified===t.isWordWrapMinified&&e.isViewportWrapping===t.isViewportWrapping&&e.wrappingColumn===t.wrappingColumn&&e.wrappingIndent===t.wrappingIndent&&e.wordWrapBreakBeforeCharacters===t.wordWrapBreakBeforeCharacters&&e.wordWrapBreakAfterCharacters===t.wordWrapBreakAfterCharacters&&e.wordWrapBreakObtrusiveCharacters===t.wordWrapBreakObtrusiveCharacters},n._equalsContribOptions=function(e,t){return e.selectionClipboard===t.selectionClipboard&&this._equalsHoverOptions(e.hover,t.hover)&&e.links===t.links&&e.contextmenu===t.contextmenu&&n._equalsQuickSuggestions(e.quickSuggestions,t.quickSuggestions)&&e.quickSuggestionsDelay===t.quickSuggestionsDelay&&this._equalsParameterHintOptions(e.parameterHints,t.parameterHints)&&e.formatOnType===t.formatOnType&&e.formatOnPaste===t.formatOnPaste&&e.suggestOnTriggerCharacters===t.suggestOnTriggerCharacters&&e.acceptSuggestionOnEnter===t.acceptSuggestionOnEnter&&e.acceptSuggestionOnCommitCharacter===t.acceptSuggestionOnCommitCharacter&&e.wordBasedSuggestions===t.wordBasedSuggestions&&e.suggestSelection===t.suggestSelection&&e.suggestFontSize===t.suggestFontSize&&e.suggestLineHeight===t.suggestLineHeight&&e.tabCompletion===t.tabCompletion&&this._equalsSuggestOptions(e.suggest,t.suggest)&&n._equalsGotoLocationOptions(e.gotoLocation,t.gotoLocation)&&e.selectionHighlight===t.selectionHighlight&&e.occurrencesHighlight===t.occurrencesHighlight&&e.codeLens===t.codeLens&&e.folding===t.folding&&e.foldingStrategy===t.foldingStrategy&&e.showFoldingControls===t.showFoldingControls&&e.matchBrackets===t.matchBrackets&&this._equalFindOptions(e.find,t.find)&&e.colorDecorators===t.colorDecorators&&Fc(e.codeActionsOnSave,t.codeActionsOnSave)&&e.codeActionsOnSaveTimeout===t.codeActionsOnSaveTimeout&&e.lightbulbEnabled===t.lightbulbEnabled},n._equalsQuickSuggestions=function(e,t){return typeof e=="boolean"?typeof t!="boolean"?!1:e===t:typeof t=="boolean"?!1:e.comments===t.comments&&e.other===t.other&&e.strings===t.strings},n}();function Fe(n,e){return typeof n>"u"?e:n==="false"?!1:!!n}function c0e(n,e){if(!n)return e;for(var t=Object.create(null),r=0,i=Object.keys(n);r<i.length;r++){var o=i[r],s=n[o];typeof s=="boolean"&&(t[o]=s)}return t}function kp(n,e){return typeof n!="string"?e:n}function Lr(n,e,t){return typeof n!="string"||t.indexOf(n)===-1?e:n}function Gn(n,e,t,r){var i;return typeof n>"u"?i=e:(i=parseInt(n,10),isNaN(i)&&(i=e)),i=Math.max(t,i),i=Math.min(r,i),i|0}function X5(n,e){var t=parseFloat(n);return isNaN(t)&&(t=e),t}function f0e(n,e){return typeof n!="string"?e:n==="same"?1:n==="indent"?2:n==="deepIndent"?3:0}function h0e(n,e){if(typeof n!="string")return e;switch(n){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"visible":case"solid":return 5}return 1}function Q5(n,e){if(typeof n!="string")return e;switch(n){case"hidden":return 2;case"visible":return 3;default:return 1}}var J5=function(){function n(){}return n.validate=function(e,t){var r=e.wordWrap;r===!0?r="on":r===!1&&(r="off"),r=Lr(r,t.wordWrap,["off","on","wordWrapColumn","bounded"]);var i=this._sanitizeViewInfo(e,t.viewInfo),o=this._sanitizeContribInfo(e,t.contribInfo),s=void 0;typeof e.multiCursorModifier=="string"&&(e.multiCursorModifier==="ctrlCmd"?s=ct?"metaKey":"ctrlKey":s="altKey");var a=Lr(s,t.multiCursorModifier,["altKey","metaKey","ctrlKey"]),u,l,f;return typeof e.autoClosingBrackets=="boolean"&&e.autoClosingBrackets===!1?(u="never",l="never",f="never"):(u=Lr(e.autoClosingBrackets,t.autoClosingBrackets,["always","languageDefined","beforeWhitespace","never"]),l=Lr(e.autoClosingQuotes,t.autoClosingQuotes,["always","languageDefined","beforeWhitespace","never"]),f=Lr(e.autoSurround,t.autoSurround,["languageDefined","brackets","quotes","never"])),{inDiffEditor:Fe(e.inDiffEditor,t.inDiffEditor),wordSeparators:kp(e.wordSeparators,t.wordSeparators),lineNumbersMinChars:Gn(e.lineNumbersMinChars,t.lineNumbersMinChars,1,10),lineDecorationsWidth:typeof e.lineDecorationsWidth>"u"?t.lineDecorationsWidth:e.lineDecorationsWidth,readOnly:Fe(e.readOnly,t.readOnly),mouseStyle:Lr(e.mouseStyle,t.mouseStyle,["text","default","copy"]),disableLayerHinting:Fe(e.disableLayerHinting,t.disableLayerHinting),automaticLayout:Fe(e.automaticLayout,t.automaticLayout),wordWrap:r,wordWrapColumn:Gn(e.wordWrapColumn,t.wordWrapColumn,1,1073741824),wordWrapMinified:Fe(e.wordWrapMinified,t.wordWrapMinified),wrappingIndent:f0e(e.wrappingIndent,t.wrappingIndent),wordWrapBreakBeforeCharacters:kp(e.wordWrapBreakBeforeCharacters,t.wordWrapBreakBeforeCharacters),wordWrapBreakAfterCharacters:kp(e.wordWrapBreakAfterCharacters,t.wordWrapBreakAfterCharacters),wordWrapBreakObtrusiveCharacters:kp(e.wordWrapBreakObtrusiveCharacters,t.wordWrapBreakObtrusiveCharacters),autoClosingBrackets:u,autoClosingQuotes:l,autoClosingOvertype:Lr(e.autoClosingOvertype,t.autoClosingOvertype,["always","auto","never"]),autoSurround:f,autoIndent:Fe(e.autoIndent,t.autoIndent),dragAndDrop:Fe(e.dragAndDrop,t.dragAndDrop),emptySelectionClipboard:Fe(e.emptySelectionClipboard,t.emptySelectionClipboard),copyWithSyntaxHighlighting:Fe(e.copyWithSyntaxHighlighting,t.copyWithSyntaxHighlighting),useTabStops:Fe(e.useTabStops,t.useTabStops),multiCursorModifier:a,multiCursorMergeOverlapping:Fe(e.multiCursorMergeOverlapping,t.multiCursorMergeOverlapping),accessibilitySupport:Lr(e.accessibilitySupport,t.accessibilitySupport,["auto","on","off"]),showUnused:Fe(e.showUnused,t.showUnused),viewInfo:i,contribInfo:o}},n._sanitizeScrollbarOpts=function(e,t,r,i){if(typeof e!="object")return t;var o=Gn(e.horizontalScrollbarSize,t.horizontalScrollbarSize,0,1e3),s=Gn(e.verticalScrollbarSize,t.verticalScrollbarSize,0,1e3);return{vertical:Q5(e.vertical,t.vertical),horizontal:Q5(e.horizontal,t.horizontal),arrowSize:Gn(e.arrowSize,t.arrowSize,0,1e3),useShadows:Fe(e.useShadows,t.useShadows),verticalHasArrows:Fe(e.verticalHasArrows,t.verticalHasArrows),horizontalHasArrows:Fe(e.horizontalHasArrows,t.horizontalHasArrows),horizontalScrollbarSize:o,horizontalSliderSize:Gn(e.horizontalSliderSize,o,0,1e3),verticalScrollbarSize:s,verticalSliderSize:Gn(e.verticalSliderSize,s,0,1e3),handleMouseWheel:Fe(e.handleMouseWheel,t.handleMouseWheel),mouseWheelScrollSensitivity:r,fastScrollSensitivity:i}},n._sanitizeMinimapOpts=function(e,t){return typeof e!="object"?t:{enabled:Fe(e.enabled,t.enabled),side:Lr(e.side,t.side,["right","left"]),showSlider:Lr(e.showSlider,t.showSlider,["always","mouseover"]),renderCharacters:Fe(e.renderCharacters,t.renderCharacters),maxColumn:Gn(e.maxColumn,t.maxColumn,1,1e4)}},n._sanitizeFindOpts=function(e,t){return typeof e!="object"?t:{seedSearchStringFromSelection:Fe(e.seedSearchStringFromSelection,t.seedSearchStringFromSelection),autoFindInSelection:Fe(e.autoFindInSelection,t.autoFindInSelection),globalFindClipboard:Fe(e.globalFindClipboard,t.globalFindClipboard),addExtraSpaceOnTop:Fe(e.addExtraSpaceOnTop,t.addExtraSpaceOnTop)}},n._sanitizeParameterHintOpts=function(e,t){return typeof e!="object"?t:{enabled:Fe(e.enabled,t.enabled),cycle:Fe(e.cycle,t.cycle)}},n._sanitizeHoverOpts=function(e,t){var r;if(typeof e=="boolean")r={enabled:e};else if(typeof e=="object")r=e;else return t;return{enabled:Fe(r.enabled,t.enabled),delay:Gn(r.delay,t.delay,0,1e4),sticky:Fe(r.sticky,t.sticky)}},n._sanitizeSuggestOpts=function(e,t){var r=e.suggest||{};return{filterGraceful:Fe(r.filterGraceful,t.filterGraceful),snippets:Lr(e.snippetSuggestions,t.snippets,["top","bottom","inline","none"]),snippetsPreventQuickSuggestions:Fe(r.snippetsPreventQuickSuggestions,t.filterGraceful),localityBonus:Fe(r.localityBonus,t.localityBonus),shareSuggestSelections:Fe(r.shareSuggestSelections,t.shareSuggestSelections),showIcons:Fe(r.showIcons,t.showIcons),maxVisibleSuggestions:Gn(r.maxVisibleSuggestions,t.maxVisibleSuggestions,1,15),filteredTypes:di(r.filteredTypes)?r.filteredTypes:Object.create(null)}},n._sanitizeGotoLocationOpts=function(e,t){var r=e.gotoLocation||{};return{multiple:Lr(r.multiple,t.multiple,["peek","gotoAndPeek","goto"])}},n._sanitizeTabCompletionOpts=function(e,t){return e===!1?"off":e===!0?"onlySnippets":Lr(e,t,["on","off","onlySnippets"])},n._sanitizeViewInfo=function(e,t){var r=[];if(Array.isArray(e.rulers)){for(var i=0,o=e.rulers.length;i<o;i++)r.push(Gn(e.rulers[i],0,0,1e4));r.sort()}var s=t.renderLineNumbers,a=t.renderCustomLineNumbers;if(typeof e.lineNumbers<"u"){var u=e.lineNumbers;u===!0?u="on":u===!1&&(u="off"),typeof u=="function"?(s=4,a=u):u==="interval"?s=3:u==="relative"?s=2:u==="on"?s=1:s=0}var l=Fe(e.fontLigatures,t.fontLigatures),f=Fe(e.disableMonospaceOptimizations,t.disableMonospaceOptimizations)||l,h=e.renderWhitespace;h===!0?h="boundary":h===!1&&(h="none"),h=Lr(h,t.renderWhitespace,["none","boundary","selection","all"]);var d=e.renderLineHighlight;d===!0?d="line":d===!1&&(d="none"),d=Lr(d,t.renderLineHighlight,["none","gutter","line","all"]);var g=X5(e.mouseWheelScrollSensitivity,t.scrollbar.mouseWheelScrollSensitivity);g===0&&(g=1);var v=X5(e.fastScrollSensitivity,t.scrollbar.fastScrollSensitivity);v<=0&&(v=t.scrollbar.fastScrollSensitivity);var m=this._sanitizeScrollbarOpts(e.scrollbar,t.scrollbar,g,v),y=this._sanitizeMinimapOpts(e.minimap,t.minimap);return{extraEditorClassName:kp(e.extraEditorClassName,t.extraEditorClassName),disableMonospaceOptimizations:f,rulers:r,ariaLabel:kp(e.ariaLabel,t.ariaLabel),cursorSurroundingLines:Gn(e.cursorSurroundingLines,t.cursorWidth,0,Number.MAX_VALUE),renderLineNumbers:s,renderCustomLineNumbers:a,renderFinalNewline:Fe(e.renderFinalNewline,t.renderFinalNewline),selectOnLineNumbers:Fe(e.selectOnLineNumbers,t.selectOnLineNumbers),glyphMargin:Fe(e.glyphMargin,t.glyphMargin),revealHorizontalRightPadding:Gn(e.revealHorizontalRightPadding,t.revealHorizontalRightPadding,0,1e3),roundedSelection:Fe(e.roundedSelection,t.roundedSelection),overviewRulerLanes:Gn(e.overviewRulerLanes,t.overviewRulerLanes,0,3),overviewRulerBorder:Fe(e.overviewRulerBorder,t.overviewRulerBorder),cursorBlinking:h0e(e.cursorBlinking,t.cursorBlinking),mouseWheelZoom:Fe(e.mouseWheelZoom,t.mouseWheelZoom),cursorSmoothCaretAnimation:Fe(e.cursorSmoothCaretAnimation,t.cursorSmoothCaretAnimation),cursorStyle:l0e(e.cursorStyle,t.cursorStyle),cursorWidth:Gn(e.cursorWidth,t.cursorWidth,0,Number.MAX_VALUE),hideCursorInOverviewRuler:Fe(e.hideCursorInOverviewRuler,t.hideCursorInOverviewRuler),scrollBeyondLastLine:Fe(e.scrollBeyondLastLine,t.scrollBeyondLastLine),scrollBeyondLastColumn:Gn(e.scrollBeyondLastColumn,t.scrollBeyondLastColumn,0,1073741824),smoothScrolling:Fe(e.smoothScrolling,t.smoothScrolling),stopRenderingLineAfter:Gn(e.stopRenderingLineAfter,t.stopRenderingLineAfter,-1,1073741824),renderWhitespace:h,renderControlCharacters:Fe(e.renderControlCharacters,t.renderControlCharacters),fontLigatures:l,renderIndentGuides:Fe(e.renderIndentGuides,t.renderIndentGuides),highlightActiveIndentGuide:Fe(e.highlightActiveIndentGuide,t.highlightActiveIndentGuide),renderLineHighlight:d,scrollbar:m,minimap:y,fixedOverflowWidgets:Fe(e.fixedOverflowWidgets,t.fixedOverflowWidgets)}},n._sanitizeContribInfo=function(e,t){var r;typeof e.quickSuggestions=="object"?r=UA({other:!0},e.quickSuggestions):r=Fe(e.quickSuggestions,t.quickSuggestions),typeof e.acceptSuggestionOnEnter=="boolean"&&(e.acceptSuggestionOnEnter=e.acceptSuggestionOnEnter?"on":"off");var i=this._sanitizeFindOpts(e.find,t.find);return{selectionClipboard:Fe(e.selectionClipboard,t.selectionClipboard),hover:this._sanitizeHoverOpts(e.hover,t.hover),links:Fe(e.links,t.links),contextmenu:Fe(e.contextmenu,t.contextmenu),quickSuggestions:r,quickSuggestionsDelay:Gn(e.quickSuggestionsDelay,t.quickSuggestionsDelay,-1073741824,1073741824),parameterHints:this._sanitizeParameterHintOpts(e.parameterHints,t.parameterHints),formatOnType:Fe(e.formatOnType,t.formatOnType),formatOnPaste:Fe(e.formatOnPaste,t.formatOnPaste),suggestOnTriggerCharacters:Fe(e.suggestOnTriggerCharacters,t.suggestOnTriggerCharacters),acceptSuggestionOnEnter:Lr(e.acceptSuggestionOnEnter,t.acceptSuggestionOnEnter,["on","smart","off"]),acceptSuggestionOnCommitCharacter:Fe(e.acceptSuggestionOnCommitCharacter,t.acceptSuggestionOnCommitCharacter),wordBasedSuggestions:Fe(e.wordBasedSuggestions,t.wordBasedSuggestions),suggestSelection:Lr(e.suggestSelection,t.suggestSelection,["first","recentlyUsed","recentlyUsedByPrefix"]),suggestFontSize:Gn(e.suggestFontSize,t.suggestFontSize,0,1e3),suggestLineHeight:Gn(e.suggestLineHeight,t.suggestLineHeight,0,1e3),tabCompletion:this._sanitizeTabCompletionOpts(e.tabCompletion,t.tabCompletion),suggest:this._sanitizeSuggestOpts(e,t.suggest),gotoLocation:this._sanitizeGotoLocationOpts(e,t.gotoLocation),selectionHighlight:Fe(e.selectionHighlight,t.selectionHighlight),occurrencesHighlight:Fe(e.occurrencesHighlight,t.occurrencesHighlight),codeLens:Fe(e.codeLens,t.codeLens),folding:Fe(e.folding,t.folding),foldingStrategy:Lr(e.foldingStrategy,t.foldingStrategy,["auto","indentation"]),showFoldingControls:Lr(e.showFoldingControls,t.showFoldingControls,["always","mouseover"]),matchBrackets:Fe(e.matchBrackets,t.matchBrackets),find:i,colorDecorators:Fe(e.colorDecorators,t.colorDecorators),lightbulbEnabled:Fe(e.lightbulb?e.lightbulb.enabled:!1,t.lightbulbEnabled),codeActionsOnSave:c0e(e.codeActionsOnSave,{}),codeActionsOnSaveTimeout:Gn(e.codeActionsOnSaveTimeout,t.codeActionsOnSaveTimeout,1,1e4)}},n}(),d0e=function(){function n(){}return n._tweakValidatedOptions=function(e,t){var r=t===1;return{inDiffEditor:e.inDiffEditor,wordSeparators:e.wordSeparators,lineNumbersMinChars:e.lineNumbersMinChars,lineDecorationsWidth:e.lineDecorationsWidth,readOnly:e.readOnly,mouseStyle:e.mouseStyle,disableLayerHinting:e.disableLayerHinting,automaticLayout:e.automaticLayout,wordWrap:e.wordWrap,wordWrapColumn:e.wordWrapColumn,wordWrapMinified:e.wordWrapMinified,wrappingIndent:e.wrappingIndent,wordWrapBreakBeforeCharacters:e.wordWrapBreakBeforeCharacters,wordWrapBreakAfterCharacters:e.wordWrapBreakAfterCharacters,wordWrapBreakObtrusiveCharacters:e.wordWrapBreakObtrusiveCharacters,autoClosingBrackets:e.autoClosingBrackets,autoClosingQuotes:e.autoClosingQuotes,autoClosingOvertype:e.autoClosingOvertype,autoSurround:e.autoSurround,autoIndent:e.autoIndent,dragAndDrop:e.dragAndDrop,emptySelectionClipboard:e.emptySelectionClipboard,copyWithSyntaxHighlighting:e.copyWithSyntaxHighlighting,useTabStops:e.useTabStops,multiCursorModifier:e.multiCursorModifier,multiCursorMergeOverlapping:e.multiCursorMergeOverlapping,accessibilitySupport:e.accessibilitySupport,showUnused:e.showUnused,viewInfo:{extraEditorClassName:e.viewInfo.extraEditorClassName,disableMonospaceOptimizations:e.viewInfo.disableMonospaceOptimizations,rulers:e.viewInfo.rulers,ariaLabel:r?S("accessibilityOffAriaLabel","The editor is not accessible at this time. Press Alt+F1 for options."):e.viewInfo.ariaLabel,renderLineNumbers:e.viewInfo.renderLineNumbers,renderCustomLineNumbers:e.viewInfo.renderCustomLineNumbers,cursorSurroundingLines:e.viewInfo.cursorSurroundingLines,renderFinalNewline:e.viewInfo.renderFinalNewline,selectOnLineNumbers:e.viewInfo.selectOnLineNumbers,glyphMargin:e.viewInfo.glyphMargin,revealHorizontalRightPadding:e.viewInfo.revealHorizontalRightPadding,roundedSelection:e.viewInfo.roundedSelection,overviewRulerLanes:e.viewInfo.overviewRulerLanes,overviewRulerBorder:e.viewInfo.overviewRulerBorder,cursorBlinking:e.viewInfo.cursorBlinking,mouseWheelZoom:e.viewInfo.mouseWheelZoom,cursorSmoothCaretAnimation:e.viewInfo.cursorSmoothCaretAnimation,cursorStyle:e.viewInfo.cursorStyle,cursorWidth:e.viewInfo.cursorWidth,hideCursorInOverviewRuler:e.viewInfo.hideCursorInOverviewRuler,scrollBeyondLastLine:e.viewInfo.scrollBeyondLastLine,scrollBeyondLastColumn:e.viewInfo.scrollBeyondLastColumn,smoothScrolling:e.viewInfo.smoothScrolling,stopRenderingLineAfter:e.viewInfo.stopRenderingLineAfter,renderWhitespace:e.viewInfo.renderWhitespace,renderControlCharacters:e.viewInfo.renderControlCharacters,fontLigatures:e.viewInfo.fontLigatures,renderIndentGuides:e.viewInfo.renderIndentGuides,highlightActiveIndentGuide:e.viewInfo.highlightActiveIndentGuide,renderLineHighlight:e.viewInfo.renderLineHighlight,scrollbar:e.viewInfo.scrollbar,minimap:{enabled:e.viewInfo.minimap.enabled,side:e.viewInfo.minimap.side,renderCharacters:e.viewInfo.minimap.renderCharacters,showSlider:e.viewInfo.minimap.showSlider,maxColumn:e.viewInfo.minimap.maxColumn},fixedOverflowWidgets:e.viewInfo.fixedOverflowWidgets},contribInfo:{selectionClipboard:e.contribInfo.selectionClipboard,hover:e.contribInfo.hover,links:e.contribInfo.links,contextmenu:e.contribInfo.contextmenu,quickSuggestions:e.contribInfo.quickSuggestions,quickSuggestionsDelay:e.contribInfo.quickSuggestionsDelay,parameterHints:e.contribInfo.parameterHints,formatOnType:e.contribInfo.formatOnType,formatOnPaste:e.contribInfo.formatOnPaste,suggestOnTriggerCharacters:e.contribInfo.suggestOnTriggerCharacters,acceptSuggestionOnEnter:e.contribInfo.acceptSuggestionOnEnter,acceptSuggestionOnCommitCharacter:e.contribInfo.acceptSuggestionOnCommitCharacter,wordBasedSuggestions:e.contribInfo.wordBasedSuggestions,suggestSelection:e.contribInfo.suggestSelection,suggestFontSize:e.contribInfo.suggestFontSize,suggestLineHeight:e.contribInfo.suggestLineHeight,tabCompletion:e.contribInfo.tabCompletion,suggest:e.contribInfo.suggest,gotoLocation:e.contribInfo.gotoLocation,selectionHighlight:e.contribInfo.selectionHighlight,occurrencesHighlight:e.contribInfo.occurrencesHighlight,codeLens:e.contribInfo.codeLens,folding:e.contribInfo.folding,foldingStrategy:e.contribInfo.foldingStrategy,showFoldingControls:e.contribInfo.showFoldingControls,matchBrackets:e.contribInfo.matchBrackets,find:e.contribInfo.find,colorDecorators:e.contribInfo.colorDecorators,lightbulbEnabled:e.contribInfo.lightbulbEnabled,codeActionsOnSave:e.contribInfo.codeActionsOnSave,codeActionsOnSaveTimeout:e.contribInfo.codeActionsOnSaveTimeout}}},n.createInternalEditorOptions=function(e,t){var r;t.accessibilitySupport==="auto"?r=e.accessibilitySupport:t.accessibilitySupport==="on"?r=2:r=1;var i=this._tweakValidatedOptions(t,r),o;if(typeof i.lineDecorationsWidth=="string"&&/^\d+(\.\d+)?ch$/.test(i.lineDecorationsWidth)){var s=parseFloat(i.lineDecorationsWidth.substr(0,i.lineDecorationsWidth.length-2));o=s*e.fontInfo.typicalHalfwidthCharacterWidth}else o=Gn(i.lineDecorationsWidth,0,0,1e3);i.contribInfo.folding&&(o+=16);var a=p0e.compute({outerWidth:e.outerWidth,outerHeight:e.outerHeight,showGlyphMargin:i.viewInfo.glyphMargin,lineHeight:e.fontInfo.lineHeight,showLineNumbers:i.viewInfo.renderLineNumbers!==0,lineNumbersMinChars:i.lineNumbersMinChars,lineNumbersDigitCount:e.lineNumbersDigitCount,lineDecorationsWidth:o,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,verticalScrollbarWidth:i.viewInfo.scrollbar.verticalScrollbarSize,horizontalScrollbarHeight:i.viewInfo.scrollbar.horizontalScrollbarSize,scrollbarArrowSize:i.viewInfo.scrollbar.arrowSize,verticalScrollbarHasArrows:i.viewInfo.scrollbar.verticalHasArrows,minimap:i.viewInfo.minimap.enabled,minimapSide:i.viewInfo.minimap.side,minimapRenderCharacters:i.viewInfo.minimap.renderCharacters,minimapMaxColumn:i.viewInfo.minimap.maxColumn,pixelRatio:e.pixelRatio}),u=null;{var l=i.wordWrap,f=i.wordWrapColumn,h=i.wordWrapMinified;r===2?u={isWordWrapMinified:!1,isViewportWrapping:!1,wrappingColumn:-1}:h&&e.isDominatedByLongLines?u={isWordWrapMinified:!0,isViewportWrapping:!0,wrappingColumn:Math.max(1,a.viewportColumn)}:l==="on"?u={isWordWrapMinified:!1,isViewportWrapping:!0,wrappingColumn:Math.max(1,a.viewportColumn)}:l==="bounded"?u={isWordWrapMinified:!1,isViewportWrapping:!0,wrappingColumn:Math.min(Math.max(1,a.viewportColumn),f)}:l==="wordWrapColumn"?u={isWordWrapMinified:!1,isViewportWrapping:!1,wrappingColumn:f}:u={isWordWrapMinified:!1,isViewportWrapping:!1,wrappingColumn:-1}}var d={inDiffEditor:i.inDiffEditor,isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:u.isWordWrapMinified,isViewportWrapping:u.isViewportWrapping,wrappingColumn:u.wrappingColumn,wrappingIndent:i.wrappingIndent,wordWrapBreakBeforeCharacters:i.wordWrapBreakBeforeCharacters,wordWrapBreakAfterCharacters:i.wordWrapBreakAfterCharacters,wordWrapBreakObtrusiveCharacters:i.wordWrapBreakObtrusiveCharacters},g="monaco-editor";return i.viewInfo.extraEditorClassName&&(g+=" "+i.viewInfo.extraEditorClassName),e.extraEditorClassName&&(g+=" "+e.extraEditorClassName),i.viewInfo.fontLigatures&&(g+=" enable-ligatures"),i.mouseStyle==="default"?g+=" mouse-default":i.mouseStyle==="copy"&&(g+=" mouse-copy"),new JK({canUseLayerHinting:!i.disableLayerHinting,pixelRatio:e.pixelRatio,editorClassName:g,lineHeight:e.fontInfo.lineHeight,readOnly:i.readOnly,accessibilitySupport:r,multiCursorModifier:i.multiCursorModifier,multiCursorMergeOverlapping:i.multiCursorMergeOverlapping,wordSeparators:i.wordSeparators,autoClosingBrackets:i.autoClosingBrackets,autoClosingQuotes:i.autoClosingQuotes,autoClosingOvertype:i.autoClosingOvertype,autoSurround:i.autoSurround,autoIndent:i.autoIndent,useTabStops:i.useTabStops,tabFocusMode:i.readOnly?!0:e.tabFocusMode,dragAndDrop:i.dragAndDrop,emptySelectionClipboard:i.emptySelectionClipboard&&e.emptySelectionClipboard,copyWithSyntaxHighlighting:i.copyWithSyntaxHighlighting,layoutInfo:a,fontInfo:e.fontInfo,viewInfo:i.viewInfo,wrappingInfo:d,contribInfo:i.contribInfo,showUnused:i.showUnused})},n}(),p0e=function(){function n(){}return n.compute=function(e){var t=e.outerWidth|0,r=e.outerHeight|0,i=e.showGlyphMargin,o=e.lineHeight|0,s=e.showLineNumbers,a=e.lineNumbersMinChars|0,u=e.lineNumbersDigitCount|0,l=e.lineDecorationsWidth|0,f=e.typicalHalfwidthCharacterWidth,h=e.maxDigitWidth,d=e.verticalScrollbarWidth|0,g=e.verticalScrollbarHasArrows,v=e.scrollbarArrowSize|0,m=e.horizontalScrollbarHeight|0,y=e.minimap,b=e.minimapSide,C=e.minimapRenderCharacters,E=e.minimapMaxColumn|0,D=e.pixelRatio,k=0;if(s){var I=Math.max(u,a);k=Math.round(I*h)}var T=0;i&&(T=o);var A=0,M=A+T,L=M+k,F=L+l,W=t-T-k-l,z,K,X,se;if(!y)K=0,X=0,z=0,se=W;else{var we=void 0;D>=2?(z=C?2:4,we=2/D):(z=C?1:3,we=1/D),X=Math.max(0,Math.floor((W-d-2)*we/(f+we)));var ae=X/we;ae>E&&(X=Math.floor(E*we)),se=W-X,b==="left"?(K=0,A+=X,M+=X,L+=X,F+=X):K=t-X-d}var Dt=Math.max(1,Math.floor((se-d-2)/f)),At=g?v:0;return{width:t,height:r,glyphMarginLeft:A,glyphMarginWidth:T,glyphMarginHeight:r,lineNumbersLeft:M,lineNumbersWidth:k,lineNumbersHeight:r,decorationsLeft:L,decorationsWidth:l,decorationsHeight:r,contentLeft:F,contentWidth:se,contentHeight:r,renderMinimap:z,minimapLeft:K,minimapWidth:X,viewportColumn:Dt,verticalScrollbarWidth:d,horizontalScrollbarHeight:m,overviewRuler:{top:At,width:d,height:r-2*At,right:0}}},n}(),g0e="Consolas, 'Courier New', monospace",v0e="Menlo, Monaco, 'Courier New', monospace",m0e="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",Rh={fontFamily:ct?v0e:Rl?m0e:g0e,fontWeight:"normal",fontSize:ct?12:14,lineHeight:0,letterSpacing:0},pa={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0},Tu={inDiffEditor:!1,wordSeparators:XK,lineNumbersMinChars:5,lineDecorationsWidth:10,readOnly:!1,mouseStyle:"text",disableLayerHinting:!1,automaticLayout:!1,wordWrap:"off",wordWrapColumn:80,wordWrapMinified:!0,wrappingIndent:1,wordWrapBreakBeforeCharacters:"([{+",wordWrapBreakAfterCharacters:" 	})]?|/&,;",wordWrapBreakObtrusiveCharacters:".",autoClosingBrackets:"languageDefined",autoClosingQuotes:"languageDefined",autoClosingOvertype:"auto",autoSurround:"languageDefined",autoIndent:!0,dragAndDrop:!0,emptySelectionClipboard:!0,copyWithSyntaxHighlighting:!0,useTabStops:!0,multiCursorModifier:"altKey",multiCursorMergeOverlapping:!0,accessibilitySupport:"auto",showUnused:!0,viewInfo:{extraEditorClassName:"",disableMonospaceOptimizations:!1,rulers:[],ariaLabel:S("editorViewAccessibleLabel","Editor content"),renderLineNumbers:1,renderCustomLineNumbers:null,cursorSurroundingLines:0,renderFinalNewline:!0,selectOnLineNumbers:!0,glyphMargin:!0,revealHorizontalRightPadding:30,roundedSelection:!0,overviewRulerLanes:2,overviewRulerBorder:!0,cursorBlinking:1,mouseWheelZoom:!1,cursorSmoothCaretAnimation:!1,cursorStyle:vn.Line,cursorWidth:0,hideCursorInOverviewRuler:!1,scrollBeyondLastLine:!0,scrollBeyondLastColumn:5,smoothScrolling:!1,stopRenderingLineAfter:1e4,renderWhitespace:"none",renderControlCharacters:!1,fontLigatures:!1,renderIndentGuides:!0,highlightActiveIndentGuide:!0,renderLineHighlight:"line",scrollbar:{vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:10,horizontalSliderSize:10,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,mouseWheelScrollSensitivity:1,fastScrollSensitivity:5},minimap:{enabled:!0,side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120},fixedOverflowWidgets:!1},contribInfo:{selectionClipboard:!0,hover:{enabled:!0,delay:300,sticky:!0},links:!0,contextmenu:!0,quickSuggestions:{other:!0,comments:!1,strings:!1},quickSuggestionsDelay:10,parameterHints:{enabled:!0,cycle:!1},formatOnType:!1,formatOnPaste:!1,suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",acceptSuggestionOnCommitCharacter:!0,wordBasedSuggestions:!0,suggestSelection:"recentlyUsed",suggestFontSize:0,suggestLineHeight:0,tabCompletion:"off",suggest:{filterGraceful:!0,snippets:"inline",snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,maxVisibleSuggestions:12,filteredTypes:Object.create(null)},gotoLocation:{multiple:"peek"},selectionHighlight:!0,occurrencesHighlight:!0,codeLens:!0,folding:!0,foldingStrategy:"auto",showFoldingControls:"mouseover",matchBrackets:!0,find:{seedSearchStringFromSelection:!0,autoFindInSelection:!1,globalFindClipboard:!1,addExtraSpaceOnTop:!0},colorDecorators:!0,lightbulbEnabled:!0,codeActionsOnSave:{},codeActionsOnSaveTimeout:750}};/*!
Copyright (c) 2014 Taylor Hakes
Copyright (c) 2014 Forbes Lindesay
 */(function(n,e){(function(t,r){r()})(Ok,function(){function t(v){var m=this.constructor;return this.then(function(y){return m.resolve(v()).then(function(){return y})},function(y){return m.resolve(v()).then(function(){return m.reject(y)})})}var r=setTimeout;function i(){}function o(v,m){return function(){v.apply(m,arguments)}}function s(v){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if(typeof v!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(v,this)}function a(v,m){for(;v._state===3;)v=v._value;if(v._state===0){v._deferreds.push(m);return}v._handled=!0,s._immediateFn(function(){var y=v._state===1?m.onFulfilled:m.onRejected;if(y===null){(v._state===1?u:l)(m.promise,v._value);return}var b;try{b=y(v._value)}catch(C){l(m.promise,C);return}u(m.promise,b)})}function u(v,m){try{if(m===v)throw new TypeError("A promise cannot be resolved with itself.");if(m&&(typeof m=="object"||typeof m=="function")){var y=m.then;if(m instanceof s){v._state=3,v._value=m,f(v);return}else if(typeof y=="function"){d(o(y,m),v);return}}v._state=1,v._value=m,f(v)}catch(b){l(v,b)}}function l(v,m){v._state=2,v._value=m,f(v)}function f(v){v._state===2&&v._deferreds.length===0&&s._immediateFn(function(){v._handled||s._unhandledRejectionFn(v._value)});for(var m=0,y=v._deferreds.length;m<y;m++)a(v,v._deferreds[m]);v._deferreds=null}function h(v,m,y){this.onFulfilled=typeof v=="function"?v:null,this.onRejected=typeof m=="function"?m:null,this.promise=y}function d(v,m){var y=!1;try{v(function(b){y||(y=!0,u(m,b))},function(b){y||(y=!0,l(m,b))})}catch(b){if(y)return;y=!0,l(m,b)}}s.prototype.catch=function(v){return this.then(null,v)},s.prototype.then=function(v,m){var y=new this.constructor(i);return a(this,new h(v,m,y)),y},s.prototype.finally=t,s.all=function(v){return new s(function(m,y){if(!v||typeof v.length>"u")throw new TypeError("Promise.all accepts an array");var b=Array.prototype.slice.call(v);if(b.length===0)return m([]);var C=b.length;function E(k,I){try{if(I&&(typeof I=="object"||typeof I=="function")){var T=I.then;if(typeof T=="function"){T.call(I,function(A){E(k,A)},y);return}}b[k]=I,--C===0&&m(b)}catch(A){y(A)}}for(var D=0;D<b.length;D++)E(D,b[D])})},s.resolve=function(v){return v&&typeof v=="object"&&v.constructor===s?v:new s(function(m){m(v)})},s.reject=function(v){return new s(function(m,y){y(v)})},s.race=function(v){return new s(function(m,y){for(var b=0,C=v.length;b<C;b++)v[b].then(m,y)})},s._immediateFn=typeof setImmediate=="function"&&function(v){setImmediate(v)}||function(v){r(v,0)},s._unhandledRejectionFn=function(m){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",m)};var g=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Ok<"u")return Ok;throw new Error("unable to locate global object")}();"Promise"in g?g.Promise.prototype.finally||(g.Promise.prototype.finally=t):g.Promise=s})})();var _0e=function(){function n(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(function(){throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}return n.prototype.emit=function(e){this.listeners.forEach(function(t){t(e)})},n.prototype.onUnexpectedError=function(e){this.unexpectedErrorHandler(e),this.emit(e)},n.prototype.onUnexpectedExternalError=function(e){this.unexpectedErrorHandler(e)},n}(),eG=new _0e;function Le(n){V0(n)||eG.onUnexpectedError(n)}function ji(n){V0(n)||eG.onUnexpectedExternalError(n)}function e8(n){if(n instanceof Error){var e=n.name,t=n.message,r=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:r}}return n}var jA="Canceled";function V0(n){return n instanceof Error&&n.name===jA&&n.message===jA}function H0(){var n=new Error(jA);return n.name=n.message,n}function fr(n){return n?new Error("Illegal argument: "+n):new Error("Illegal argument")}function y0e(n){return new Error("Illegal state: "+n)}function tG(n){var e=this,t=!1,r;return function(){return t||(t=!0,r=n.apply(e,arguments)),r}}function b0e(n){}function nI(n){return typeof n.dispose=="function"&&n.dispose.length===0}function Ue(n){return Array.isArray(n)?(n.forEach(function(e){e&&e.dispose()}),[]):n?(n.dispose(),n):void 0}function au(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.forEach(b0e),{dispose:function(){return Ue(n)}}}function en(n){var e={dispose:function(){n()}};return e}var De=function(){function n(){this._toDispose=new Set,this._isDisposed=!1}return n.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this.clear())},n.prototype.clear=function(){this._toDispose.forEach(function(e){return e.dispose()}),this._toDispose.clear()},n.prototype.add=function(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e},n}(),te=function(){function n(){this._store=new De}return n.prototype.dispose=function(){this._store.dispose()},n.prototype._register=function(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)},n.None=Object.freeze({dispose:function(){}}),n}(),df=function(){function n(){this._isDisposed=!1}return Object.defineProperty(n.prototype,"value",{get:function(){return this._isDisposed?void 0:this._value},set:function(e){this._isDisposed||e===this._value||(this._value&&this._value.dispose(),this._value=e)},enumerable:!0,configurable:!0}),n.prototype.clear=function(){this.value=void 0},n.prototype.dispose=function(){this._isDisposed=!0,this._value&&this._value.dispose(),this._value=void 0},n}(),w0e=function(){function n(e){this.object=e}return n.prototype.dispose=function(){},n}(),C0e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fc={done:!0,value:void 0},Nr;(function(n){var e={next:function(){return fc}};function t(){return e}n.empty=t;function r(h){var d=!1;return{next:function(){return d?fc:(d=!0,{done:!1,value:h})}}}n.single=r;function i(h,d,g){return d===void 0&&(d=0),g===void 0&&(g=h.length),{next:function(){return d>=g?fc:{done:!1,value:h[d++]}}}}n.fromArray=i;function o(h){return h?Array.isArray(h)?n.fromArray(h):h:n.empty()}n.from=o;function s(h,d){return{next:function(){var g=h.next();return g.done?fc:{done:!1,value:d(g.value)}}}}n.map=s;function a(h,d){return{next:function(){for(;;){var g=h.next();if(g.done)return fc;if(d(g.value))return{done:!1,value:g.value}}}}}n.filter=a;function u(h,d){for(var g=h.next();!g.done;g=h.next())d(g.value)}n.forEach=u;function l(h,d){d===void 0&&(d=Number.POSITIVE_INFINITY);var g=[];if(d===0)return g;for(var v=0,m=h.next();!m.done&&(g.push(m.value),!(++v>=d));m=h.next());return g}n.collect=l;function f(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];var g=0;return{next:function(){if(g>=h.length)return fc;var v=h[g],m=v.next();return m.done?(g++,this.next()):m}}}n.concat=f})(Nr||(Nr={}));function S0e(n){return Array.isArray(n)?Nr.fromArray(n):n}var og=function(){function n(e,t,r,i){t===void 0&&(t=0),r===void 0&&(r=e.length),i===void 0&&(i=t-1),this.items=e,this.start=t,this.end=r,this.index=i}return n.prototype.first=function(){return this.index=this.start,this.current()},n.prototype.next=function(){return this.index=Math.min(this.index+1,this.end),this.current()},n.prototype.current=function(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]},n}(),E0e=function(n){C0e(e,n);function e(t,r,i,o){return r===void 0&&(r=0),i===void 0&&(i=t.length),o===void 0&&(o=r-1),n.call(this,t,r,i,o)||this}return e.prototype.current=function(){return n.prototype.current.call(this)},e.prototype.previous=function(){return this.index=Math.max(this.index-1,this.start-1),this.current()},e.prototype.first=function(){return this.index=this.start,this.current()},e.prototype.last=function(){return this.index=this.end-1,this.current()},e.prototype.parent=function(){return null},e}(og),t8=function(){function n(e,t){this.iterator=e,this.fn=t}return n.prototype.next=function(){return this.fn(this.iterator.next())},n}(),or=function(){function n(e){this.element=e,this.next=n.Undefined,this.prev=n.Undefined}return n.Undefined=new n(void 0),n}(),bl=function(){function n(){this._first=or.Undefined,this._last=or.Undefined,this._size=0}return Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return this._first===or.Undefined},n.prototype.clear=function(){this._first=or.Undefined,this._last=or.Undefined,this._size=0},n.prototype.unshift=function(e){return this._insert(e,!1)},n.prototype.push=function(e){return this._insert(e,!0)},n.prototype._insert=function(e,t){var r=this,i=new or(e);if(this._first===or.Undefined)this._first=i,this._last=i;else if(t){var o=this._last;this._last=i,i.prev=o,o.next=i}else{var s=this._first;this._first=i,i.next=s,s.prev=i}this._size+=1;var a=!1;return function(){a||(a=!0,r._remove(i))}},n.prototype.shift=function(){if(this._first!==or.Undefined){var e=this._first.element;return this._remove(this._first),e}},n.prototype.pop=function(){if(this._last!==or.Undefined){var e=this._last.element;return this._remove(this._last),e}},n.prototype._remove=function(e){if(e.prev!==or.Undefined&&e.next!==or.Undefined){var t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===or.Undefined&&e.next===or.Undefined?(this._first=or.Undefined,this._last=or.Undefined):e.next===or.Undefined?(this._last=this._last.prev,this._last.next=or.Undefined):e.prev===or.Undefined&&(this._first=this._first.next,this._first.prev=or.Undefined);this._size-=1},n.prototype.iterator=function(){var e,t=this._first;return{next:function(){return t===or.Undefined?fc:(e?e.value=t.element:e={done:!1,value:t.element},t=t.next,e)}}},n.prototype.toArray=function(){for(var e=[],t=this._first;t!==or.Undefined;t=t.next)e.push(t.element);return e},n}(),I0e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),We;(function(n){n.None=function(){return te.None};function e(E){return function(D,k,I){k===void 0&&(k=null);var T=!1,A;return A=E(function(M){if(!T)return A?A.dispose():T=!0,D.call(k,M)},null,I),T&&A.dispose(),A}}n.once=e;function t(E,D){return u(function(k,I,T){return I===void 0&&(I=null),E(function(A){return k.call(I,D(A))},null,T)})}n.map=t;function r(E,D){return u(function(k,I,T){return I===void 0&&(I=null),E(function(A){D(A),k.call(I,A)},null,T)})}n.forEach=r;function i(E,D){return u(function(k,I,T){return I===void 0&&(I=null),E(function(A){return D(A)&&k.call(I,A)},null,T)})}n.filter=i;function o(E){return E}n.signal=o;function s(){for(var E=[],D=0;D<arguments.length;D++)E[D]=arguments[D];return function(k,I,T){return I===void 0&&(I=null),au.apply(void 0,E.map(function(A){return A(function(M){return k.call(I,M)},null,T)}))}}n.any=s;function a(E,D,k){var I=k;return t(E,function(T){return I=D(I,T),I})}n.reduce=a;function u(E){var D,k=new j({onFirstListenerAdd:function(){D=E(k.fire,k)},onLastListenerRemove:function(){D.dispose()}});return k.event}n.snapshot=u;function l(E,D,k,I,T){k===void 0&&(k=100),I===void 0&&(I=!1);var A,M=void 0,L=void 0,F=0,W=new j({leakWarningThreshold:T,onFirstListenerAdd:function(){A=E(function(z){F++,M=D(M,z),I&&!L&&W.fire(M),clearTimeout(L),L=setTimeout(function(){var K=M;M=void 0,L=void 0,(!I||F>1)&&W.fire(K),F=0},k)})},onLastListenerRemove:function(){A.dispose()}});return W.event}n.debounce=l;function f(E){var D=new Date().getTime();return t(e(E),function(k){return new Date().getTime()-D})}n.stopwatch=f;function h(E){var D=!0,k;return i(E,function(I){var T=D||I!==k;return D=!1,k=I,T})}n.latch=h;function d(E,D,k){D===void 0&&(D=!1),k===void 0&&(k=[]);var I=k.slice(),T=E(function(L){I?I.push(L):M.fire(L)}),A=function(){I&&I.forEach(function(L){return M.fire(L)}),I=null},M=new j({onFirstListenerAdd:function(){T||(T=E(function(L){return M.fire(L)}))},onFirstListenerDidAdd:function(){I&&(D?setTimeout(A):A())},onLastListenerRemove:function(){T&&T.dispose(),T=null}});return M.event}n.buffer=d;var g=function(){function E(D){this.event=D}return E.prototype.map=function(D){return new E(t(this.event,D))},E.prototype.forEach=function(D){return new E(r(this.event,D))},E.prototype.filter=function(D){return new E(i(this.event,D))},E.prototype.reduce=function(D,k){return new E(a(this.event,D,k))},E.prototype.latch=function(){return new E(h(this.event))},E.prototype.on=function(D,k,I){return this.event(D,k,I)},E.prototype.once=function(D,k,I){return e(this.event)(D,k,I)},E}();function v(E){return new g(E)}n.chain=v;function m(E,D,k){k===void 0&&(k=function(L){return L});var I=function(){for(var L=[],F=0;F<arguments.length;F++)L[F]=arguments[F];return M.fire(k.apply(void 0,L))},T=function(){return E.on(D,I)},A=function(){return E.removeListener(D,I)},M=new j({onFirstListenerAdd:T,onLastListenerRemove:A});return M.event}n.fromNodeEventEmitter=m;function y(E,D,k){k===void 0&&(k=function(L){return L});var I=function(){for(var L=[],F=0;F<arguments.length;F++)L[F]=arguments[F];return M.fire(k.apply(void 0,L))},T=function(){return E.addEventListener(D,I)},A=function(){return E.removeEventListener(D,I)},M=new j({onFirstListenerAdd:T,onLastListenerRemove:A});return M.event}n.fromDOMEventEmitter=y;function b(E){var D=new j,k=!1;return E.then(void 0,function(){return null}).then(function(){k?D.fire(void 0):setTimeout(function(){return D.fire(void 0)},0)}),k=!0,D.event}n.fromPromise=b;function C(E){return new Promise(function(D){return e(E)(D)})}n.toPromise=C})(We||(We={}));var j=function(){function n(e){this._disposed=!1,this._options=e,this._leakageMon=void 0}return Object.defineProperty(n.prototype,"event",{get:function(){var e=this;return this._event||(this._event=function(t,r,i){e._listeners||(e._listeners=new bl);var o=e._listeners.isEmpty();o&&e._options&&e._options.onFirstListenerAdd&&e._options.onFirstListenerAdd(e);var s=e._listeners.push(r?[t,r]:t);o&&e._options&&e._options.onFirstListenerDidAdd&&e._options.onFirstListenerDidAdd(e),e._options&&e._options.onListenerDidAdd&&e._options.onListenerDidAdd(e,t,r);var a;e._leakageMon&&(a=e._leakageMon.check(e._listeners.size));var u;return u={dispose:function(){if(a&&a(),u.dispose=n._noop,!e._disposed&&(s(),e._options&&e._options.onLastListenerRemove)){var l=e._listeners&&!e._listeners.isEmpty();l||e._options.onLastListenerRemove(e)}}},i instanceof De?i.add(u):Array.isArray(i)&&i.push(u),u}),this._event},enumerable:!0,configurable:!0}),n.prototype.fire=function(e){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new bl);for(var t=this._listeners.iterator(),r=t.next();!r.done;r=t.next())this._deliveryQueue.push([r.value,e]);for(;this._deliveryQueue.size>0;){var i=this._deliveryQueue.shift(),o=i[0],s=i[1];try{typeof o=="function"?o.call(void 0,s):o[0].call(o[1],s)}catch(a){Le(a)}}}},n.prototype.dispose=function(){this._listeners&&this._listeners.clear(),this._deliveryQueue&&this._deliveryQueue.clear(),this._leakageMon&&this._leakageMon.dispose(),this._disposed=!0},n._noop=function(){},n}(),x0e=function(n){I0e(e,n);function e(t){var r=n.call(this,t)||this;return r._isPaused=0,r._eventQueue=new bl,r._mergeFn=t&&t.merge,r}return e.prototype.pause=function(){this._isPaused++},e.prototype.resume=function(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){var t=this._eventQueue.toArray();this._eventQueue.clear(),n.prototype.fire.call(this,this._mergeFn(t))}else for(;!this._isPaused&&this._eventQueue.size!==0;)n.prototype.fire.call(this,this._eventQueue.shift())},e.prototype.fire=function(t){this._listeners&&(this._isPaused!==0?this._eventQueue.push(t):n.prototype.fire.call(this,t))},e}(j),na=function(){function n(){var e=this;this.hasListeners=!1,this.events=[],this.emitter=new j({onFirstListenerAdd:function(){return e.onFirstListenerAdd()},onLastListenerRemove:function(){return e.onLastListenerRemove()}})}return Object.defineProperty(n.prototype,"event",{get:function(){return this.emitter.event},enumerable:!0,configurable:!0}),n.prototype.add=function(e){var t=this,r={event:e,listener:null};this.events.push(r),this.hasListeners&&this.hook(r);var i=function(){t.hasListeners&&t.unhook(r);var o=t.events.indexOf(r);t.events.splice(o,1)};return en(tG(i))},n.prototype.onFirstListenerAdd=function(){var e=this;this.hasListeners=!0,this.events.forEach(function(t){return e.hook(t)})},n.prototype.onLastListenerRemove=function(){var e=this;this.hasListeners=!1,this.events.forEach(function(t){return e.unhook(t)})},n.prototype.hook=function(e){var t=this;e.listener=e.event(function(r){return t.emitter.fire(r)})},n.prototype.unhook=function(e){e.listener&&e.listener.dispose(),e.listener=null},n.prototype.dispose=function(){this.emitter.dispose()},n}(),YP=function(){function n(){this.buffers=[]}return n.prototype.wrapEvent=function(e){var t=this;return function(r,i,o){return e(function(s){var a=t.buffers[t.buffers.length-1];a?a.push(function(){return r.call(i,s)}):r.call(i,s)},void 0,o)}},n.prototype.bufferEvents=function(e){var t=[];this.buffers.push(t);var r=e();return this.buffers.pop(),t.forEach(function(i){return i()}),r},n}(),qr=function(){function n(){var e=this;this.listening=!1,this.inputEvent=We.None,this.inputEventListener=te.None,this.emitter=new j({onFirstListenerDidAdd:function(){e.listening=!0,e.inputEventListener=e.inputEvent(e.emitter.fire,e.emitter)},onLastListenerRemove:function(){e.listening=!1,e.inputEventListener.dispose()}}),this.event=this.emitter.event}return Object.defineProperty(n.prototype,"input",{set:function(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this.inputEventListener.dispose(),this.emitter.dispose()},n}(),nG=Object.freeze(function(n,e){var t=setTimeout(n.bind(e),0);return{dispose:function(){clearTimeout(t)}}}),Ft;(function(n){function e(t){return t===n.None||t===n.Cancelled||t instanceof GC?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}n.isCancellationToken=e,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:We.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:nG})})(Ft||(Ft={}));var GC=function(){function n(){this._isCancelled=!1,this._emitter=null}return n.prototype.cancel=function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))},Object.defineProperty(n.prototype,"isCancellationRequested",{get:function(){return this._isCancelled},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onCancellationRequested",{get:function(){return this._isCancelled?nG:(this._emitter||(this._emitter=new j),this._emitter.event)},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this._emitter&&(this._emitter.dispose(),this._emitter=null)},n}(),hd=function(){function n(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}return Object.defineProperty(n.prototype,"token",{get:function(){return this._token||(this._token=new GC),this._token},enumerable:!0,configurable:!0}),n.prototype.cancel=function(){this._token?this._token instanceof GC&&this._token.cancel():this._token=Ft.Cancelled},n.prototype.dispose=function(){this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof GC&&this._token.dispose():this._token=Ft.None},n}(),ZP=function(){function n(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}return n.prototype.define=function(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e},n.prototype.keyCodeToStr=function(e){return this._keyCodeToStr[e]},n.prototype.strToKeyCode=function(e){return this._strToKeyCode[e.toLowerCase()]||0},n}(),zA=new ZP,qA=new ZP,$A=new ZP;(function(){function n(e,t,r,i){r===void 0&&(r=t),i===void 0&&(i=r),zA.define(e,t),qA.define(e,r),$A.define(e,i)}n(0,"unknown"),n(1,"Backspace"),n(2,"Tab"),n(3,"Enter"),n(4,"Shift"),n(5,"Ctrl"),n(6,"Alt"),n(7,"PauseBreak"),n(8,"CapsLock"),n(9,"Escape"),n(10,"Space"),n(11,"PageUp"),n(12,"PageDown"),n(13,"End"),n(14,"Home"),n(15,"LeftArrow","Left"),n(16,"UpArrow","Up"),n(17,"RightArrow","Right"),n(18,"DownArrow","Down"),n(19,"Insert"),n(20,"Delete"),n(21,"0"),n(22,"1"),n(23,"2"),n(24,"3"),n(25,"4"),n(26,"5"),n(27,"6"),n(28,"7"),n(29,"8"),n(30,"9"),n(31,"A"),n(32,"B"),n(33,"C"),n(34,"D"),n(35,"E"),n(36,"F"),n(37,"G"),n(38,"H"),n(39,"I"),n(40,"J"),n(41,"K"),n(42,"L"),n(43,"M"),n(44,"N"),n(45,"O"),n(46,"P"),n(47,"Q"),n(48,"R"),n(49,"S"),n(50,"T"),n(51,"U"),n(52,"V"),n(53,"W"),n(54,"X"),n(55,"Y"),n(56,"Z"),n(57,"Meta"),n(58,"ContextMenu"),n(59,"F1"),n(60,"F2"),n(61,"F3"),n(62,"F4"),n(63,"F5"),n(64,"F6"),n(65,"F7"),n(66,"F8"),n(67,"F9"),n(68,"F10"),n(69,"F11"),n(70,"F12"),n(71,"F13"),n(72,"F14"),n(73,"F15"),n(74,"F16"),n(75,"F17"),n(76,"F18"),n(77,"F19"),n(78,"NumLock"),n(79,"ScrollLock"),n(80,";",";","OEM_1"),n(81,"=","=","OEM_PLUS"),n(82,",",",","OEM_COMMA"),n(83,"-","-","OEM_MINUS"),n(84,".",".","OEM_PERIOD"),n(85,"/","/","OEM_2"),n(86,"`","`","OEM_3"),n(110,"ABNT_C1"),n(111,"ABNT_C2"),n(87,"[","[","OEM_4"),n(88,"\\","\\","OEM_5"),n(89,"]","]","OEM_6"),n(90,"'","'","OEM_7"),n(91,"OEM_8"),n(92,"OEM_102"),n(93,"NumPad0"),n(94,"NumPad1"),n(95,"NumPad2"),n(96,"NumPad3"),n(97,"NumPad4"),n(98,"NumPad5"),n(99,"NumPad6"),n(100,"NumPad7"),n(101,"NumPad8"),n(102,"NumPad9"),n(103,"NumPad_Multiply"),n(104,"NumPad_Add"),n(105,"NumPad_Separator"),n(106,"NumPad_Subtract"),n(107,"NumPad_Decimal"),n(108,"NumPad_Divide")})();var wg;(function(n){function e(s){return zA.keyCodeToStr(s)}n.toString=e;function t(s){return zA.strToKeyCode(s)}n.fromString=t;function r(s){return qA.keyCodeToStr(s)}n.toUserSettingsUS=r;function i(s){return $A.keyCodeToStr(s)}n.toUserSettingsGeneral=i;function o(s){return qA.strToKeyCode(s)||$A.strToKeyCode(s)}n.fromUserSettings=o})(wg||(wg={}));function zi(n,e){var t=(e&65535)<<16>>>0;return(n|t)>>>0}function z1(n,e){if(n===0)return null;var t=(n&65535)>>>0,r=(n&4294901760)>>>16;return r!==0?new KA([Kk(t,e),Kk(r,e)]):new KA([Kk(t,e)])}function Kk(n,e){var t=!!(n&2048),r=!!(n&256),i=e===2?r:t,o=!!(n&1024),s=!!(n&512),a=e===2?t:r,u=n&255;return new XP(i,o,s,a,u)}var XP=function(){function n(e,t,r,i,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=r,this.metaKey=i,this.keyCode=o}return n.prototype.equals=function(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode},n.prototype.isModifierKey=function(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4},n.prototype.toChord=function(){return new KA([this])},n.prototype.isDuplicateModifierCase=function(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57},n}(),KA=function(){function n(e){if(e.length===0)throw fr("parts");this.parts=e}return n.prototype.equals=function(e){if(e===null||this.parts.length!==e.parts.length)return!1;for(var t=0;t<this.parts.length;t++)if(!this.parts[t].equals(e.parts[t]))return!1;return!0},n}(),D0e=function(){function n(e,t,r,i,o,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=r,this.metaKey=i,this.keyLabel=o,this.keyAriaLabel=s}return n}(),L0e=function(){function n(){}return n}(),k0e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sr,T0e=/^\w[\w\d+.-]*$/,N0e=/^\//,A0e=/^\/\//,rG=!0;function O0e(n,e){if(!n.scheme){if(e||rG)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+n.authority+'", path: "'+n.path+'", query: "'+n.query+'", fragment: "'+n.fragment+'"}');console.warn('[UriError]: Scheme is missing: {scheme: "", authority: "'+n.authority+'", path: "'+n.path+'", query: "'+n.query+'", fragment: "'+n.fragment+'"}')}if(n.scheme&&!T0e.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!N0e.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(A0e.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function R0e(n,e){return e||rG?n||gn:(n||(console.trace("BAD uri lacks scheme, falling back to file-scheme."),n="file"),n)}function M0e(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==fa&&(e=fa+e):e=fa;break}return e}var gn="",fa="/",P0e=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,bt=function(){function n(e,t,r,i,o,s){s===void 0&&(s=!1),typeof e=="object"?(this.scheme=e.scheme||gn,this.authority=e.authority||gn,this.path=e.path||gn,this.query=e.query||gn,this.fragment=e.fragment||gn):(this.scheme=R0e(e,s),this.authority=t||gn,this.path=M0e(this.scheme,r||gn),this.query=i||gn,this.fragment=o||gn,O0e(this,s))}return n.isUri=function(e){return e instanceof n?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="function"&&typeof e.with=="function"&&typeof e.toString=="function":!1},Object.defineProperty(n.prototype,"fsPath",{get:function(){return sG(this)},enumerable:!0,configurable:!0}),n.prototype.with=function(e){if(!e)return this;var t=e.scheme,r=e.authority,i=e.path,o=e.query,s=e.fragment;return t===void 0?t=this.scheme:t===null&&(t=gn),r===void 0?r=this.authority:r===null&&(r=gn),i===void 0?i=this.path:i===null&&(i=gn),o===void 0?o=this.query:o===null&&(o=gn),s===void 0?s=this.fragment:s===null&&(s=gn),t===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new Tp(t,r,i,o,s)},n.parse=function(e,t){t===void 0&&(t=!1);var r=P0e.exec(e);return r?new Tp(r[2]||gn,decodeURIComponent(r[4]||gn),decodeURIComponent(r[5]||gn),decodeURIComponent(r[7]||gn),decodeURIComponent(r[9]||gn),t):new Tp(gn,gn,gn,gn,gn)},n.file=function(e){var t=gn;if(Hi&&(e=e.replace(/\\/g,fa)),e[0]===fa&&e[1]===fa){var r=e.indexOf(fa,2);r===-1?(t=e.substring(2),e=fa):(t=e.substring(2,r),e=e.substring(r)||fa)}return new Tp("file",t,e,gn,gn)},n.from=function(e){return new Tp(e.scheme,e.authority,e.path,e.query,e.fragment)},n.prototype.toString=function(e){return e===void 0&&(e=!1),GA(this,e)},n.prototype.toJSON=function(){return this},n.revive=function(e){if(e){if(e instanceof n)return e;var t=new Tp(e);return t._formatted=e.external,t._fsPath=e._sep===iG?e.fsPath:null,t}else return e},n}(),iG=Hi?1:void 0,Tp=function(n){k0e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return Object.defineProperty(e.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=sG(this)),this._fsPath},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!1),t?GA(this,!0):(this._formatted||(this._formatted=GA(this,!1)),this._formatted)},e.prototype.toJSON=function(){var t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=iG),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t},e}(bt),oG=(sr={},sr[58]="%3A",sr[47]="%2F",sr[63]="%3F",sr[35]="%23",sr[91]="%5B",sr[93]="%5D",sr[64]="%40",sr[33]="%21",sr[36]="%24",sr[38]="%26",sr[39]="%27",sr[40]="%28",sr[41]="%29",sr[42]="%2A",sr[43]="%2B",sr[44]="%2C",sr[59]="%3B",sr[61]="%3D",sr[32]="%20",sr);function n8(n,e){for(var t=void 0,r=-1,i=0;i<n.length;i++){var o=n.charCodeAt(i);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47)r!==-1&&(t+=encodeURIComponent(n.substring(r,i)),r=-1),t!==void 0&&(t+=n.charAt(i));else{t===void 0&&(t=n.substr(0,i));var s=oG[o];s!==void 0?(r!==-1&&(t+=encodeURIComponent(n.substring(r,i)),r=-1),t+=s):r===-1&&(r=i)}}return r!==-1&&(t+=encodeURIComponent(n.substring(r))),t!==void 0?t:n}function F0e(n){for(var e=void 0,t=0;t<n.length;t++){var r=n.charCodeAt(t);r===35||r===63?(e===void 0&&(e=n.substr(0,t)),e+=oG[r]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function sG(n){var e;return n.authority&&n.path.length>1&&n.scheme==="file"?e="//"+n.authority+n.path:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e=n.path[1].toLowerCase()+n.path.substr(2):e=n.path,Hi&&(e=e.replace(/\//g,"\\")),e}function GA(n,e){var t=e?F0e:n8,r="",i=n.scheme,o=n.authority,s=n.path,a=n.query,u=n.fragment;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=fa,r+=fa),o){var l=o.indexOf("@");if(l!==-1){var f=o.substr(0,l);o=o.substr(l+1),l=f.indexOf(":"),l===-1?r+=t(f,!1):(r+=t(f.substr(0,l),!1),r+=":",r+=t(f.substr(l+1),!1)),r+="@"}o=o.toLowerCase(),l=o.indexOf(":"),l===-1?r+=t(o,!1):(r+=t(o.substr(0,l),!1),r+=o.substr(l))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){var h=s.charCodeAt(1);h>=65&&h<=90&&(s="/"+String.fromCharCode(h+32)+":"+s.substr(3))}else if(s.length>=2&&s.charCodeAt(1)===58){var h=s.charCodeAt(0);h>=65&&h<=90&&(s=String.fromCharCode(h+32)+":"+s.substr(2))}r+=t(s,!0)}return a&&(r+="?",r+=t(a,!1)),u&&(r+="#",r+=e?u:n8(u,!1)),r}var $=function(){function n(e,t){this.lineNumber=e,this.column=t}return n.prototype.with=function(e,t){return e===void 0&&(e=this.lineNumber),t===void 0&&(t=this.column),e===this.lineNumber&&t===this.column?this:new n(e,t)},n.prototype.delta=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.with(this.lineNumber+e,this.column+t)},n.prototype.equals=function(e){return n.equals(this,e)},n.equals=function(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column},n.prototype.isBefore=function(e){return n.isBefore(this,e)},n.isBefore=function(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column},n.prototype.isBeforeOrEqual=function(e){return n.isBeforeOrEqual(this,e)},n.isBeforeOrEqual=function(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column},n.compare=function(e,t){var r=e.lineNumber|0,i=t.lineNumber|0;if(r===i){var o=e.column|0,s=t.column|0;return o-s}return r-i},n.prototype.clone=function(){return new n(this.lineNumber,this.column)},n.prototype.toString=function(){return"("+this.lineNumber+","+this.column+")"},n.lift=function(e){return new n(e.lineNumber,e.column)},n.isIPosition=function(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"},n}(),R=function(){function n(e,t,r,i){e>r||e===r&&t>i?(this.startLineNumber=r,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=r,this.endColumn=i)}return n.prototype.isEmpty=function(){return n.isEmpty(this)},n.isEmpty=function(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn},n.prototype.containsPosition=function(e){return n.containsPosition(this,e)},n.containsPosition=function(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)},n.prototype.containsRange=function(e){return n.containsRange(this,e)},n.containsRange=function(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)},n.prototype.strictContainsRange=function(e){return n.strictContainsRange(this,e)},n.strictContainsRange=function(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)},n.prototype.plusRange=function(e){return n.plusRange(this,e)},n.plusRange=function(e,t){var r,i,o,s;return t.startLineNumber<e.startLineNumber?(r=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(r=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(r=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new n(r,i,o,s)},n.prototype.intersectRanges=function(e){return n.intersectRanges(this,e)},n.intersectRanges=function(e,t){var r=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,u=t.startColumn,l=t.endLineNumber,f=t.endColumn;return r<a?(r=a,i=u):r===a&&(i=Math.max(i,u)),o>l?(o=l,s=f):o===l&&(s=Math.min(s,f)),r>o||r===o&&i>s?null:new n(r,i,o,s)},n.prototype.equalsRange=function(e){return n.equalsRange(this,e)},n.equalsRange=function(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn},n.prototype.getEndPosition=function(){return new $(this.endLineNumber,this.endColumn)},n.prototype.getStartPosition=function(){return new $(this.startLineNumber,this.startColumn)},n.prototype.toString=function(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"},n.prototype.setEndPosition=function(e,t){return new n(this.startLineNumber,this.startColumn,e,t)},n.prototype.setStartPosition=function(e,t){return new n(e,t,this.endLineNumber,this.endColumn)},n.prototype.collapseToStart=function(){return n.collapseToStart(this)},n.collapseToStart=function(e){return new n(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)},n.fromPositions=function(e,t){return t===void 0&&(t=e),new n(e.lineNumber,e.column,t.lineNumber,t.column)},n.lift=function(e){return e?new n(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null},n.isIRange=function(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"},n.areIntersectingOrTouching=function(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)},n.areIntersecting=function(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)},n.compareRangesUsingStarts=function(e,t){if(e&&t){var r=e.startLineNumber|0,i=t.startLineNumber|0;if(r===i){var o=e.startColumn|0,s=t.startColumn|0;if(o===s){var a=e.endLineNumber|0,u=t.endLineNumber|0;if(a===u){var l=e.endColumn|0,f=t.endColumn|0;return l-f}return a-u}return o-s}return r-i}var h=e?1:0,d=t?1:0;return h-d},n.compareRangesUsingEnds=function(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber},n.spansMultipleLines=function(e){return e.endLineNumber>e.startLineNumber},n}(),B0e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ce=function(n){B0e(e,n);function e(t,r,i,o){var s=n.call(this,t,r,i,o)||this;return s.selectionStartLineNumber=t,s.selectionStartColumn=r,s.positionLineNumber=i,s.positionColumn=o,s}return e.prototype.clone=function(){return new e(this.selectionStartLineNumber,this.selectionStartColumn,this.positionLineNumber,this.positionColumn)},e.prototype.toString=function(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"},e.prototype.equalsSelection=function(t){return e.selectionsEqual(this,t)},e.selectionsEqual=function(t,r){return t.selectionStartLineNumber===r.selectionStartLineNumber&&t.selectionStartColumn===r.selectionStartColumn&&t.positionLineNumber===r.positionLineNumber&&t.positionColumn===r.positionColumn},e.prototype.getDirection=function(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1},e.prototype.setEndPosition=function(t,r){return this.getDirection()===0?new e(this.startLineNumber,this.startColumn,t,r):new e(t,r,this.startLineNumber,this.startColumn)},e.prototype.getPosition=function(){return new $(this.positionLineNumber,this.positionColumn)},e.prototype.setStartPosition=function(t,r){return this.getDirection()===0?new e(t,r,this.endLineNumber,this.endColumn):new e(this.endLineNumber,this.endColumn,t,r)},e.fromPositions=function(t,r){return r===void 0&&(r=t),new e(t.lineNumber,t.column,r.lineNumber,r.column)},e.liftSelection=function(t){return new e(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)},e.selectionsArrEqual=function(t,r){if(t&&!r||!t&&r)return!1;if(!t&&!r)return!0;if(t.length!==r.length)return!1;for(var i=0,o=t.length;i<o;i++)if(!this.selectionsEqual(t[i],r[i]))return!1;return!0},e.isISelection=function(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"},e.createWithDirection=function(t,r,i,o,s){return s===0?new e(t,r,i,o):new e(i,o,t,r)},e}(R),rI=function(){function n(e,t,r){this.offset=e|0,this.type=t,this.language=r}return n.prototype.toString=function(){return"("+this.offset+", "+this.type+")"},n}(),QP=function(){function n(e,t){this.tokens=e,this.endState=t}return n}(),iI=function(){function n(e,t){this.tokens=e,this.endState=t}return n}(),YA;(function(n){n[n.Unnecessary=1]="Unnecessary",n[n.Deprecated=2]="Deprecated"})(YA||(YA={}));var ZA;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(ZA||(ZA={}));var XA;(function(n){n[n.Unknown=0]="Unknown",n[n.Backspace=1]="Backspace",n[n.Tab=2]="Tab",n[n.Enter=3]="Enter",n[n.Shift=4]="Shift",n[n.Ctrl=5]="Ctrl",n[n.Alt=6]="Alt",n[n.PauseBreak=7]="PauseBreak",n[n.CapsLock=8]="CapsLock",n[n.Escape=9]="Escape",n[n.Space=10]="Space",n[n.PageUp=11]="PageUp",n[n.PageDown=12]="PageDown",n[n.End=13]="End",n[n.Home=14]="Home",n[n.LeftArrow=15]="LeftArrow",n[n.UpArrow=16]="UpArrow",n[n.RightArrow=17]="RightArrow",n[n.DownArrow=18]="DownArrow",n[n.Insert=19]="Insert",n[n.Delete=20]="Delete",n[n.KEY_0=21]="KEY_0",n[n.KEY_1=22]="KEY_1",n[n.KEY_2=23]="KEY_2",n[n.KEY_3=24]="KEY_3",n[n.KEY_4=25]="KEY_4",n[n.KEY_5=26]="KEY_5",n[n.KEY_6=27]="KEY_6",n[n.KEY_7=28]="KEY_7",n[n.KEY_8=29]="KEY_8",n[n.KEY_9=30]="KEY_9",n[n.KEY_A=31]="KEY_A",n[n.KEY_B=32]="KEY_B",n[n.KEY_C=33]="KEY_C",n[n.KEY_D=34]="KEY_D",n[n.KEY_E=35]="KEY_E",n[n.KEY_F=36]="KEY_F",n[n.KEY_G=37]="KEY_G",n[n.KEY_H=38]="KEY_H",n[n.KEY_I=39]="KEY_I",n[n.KEY_J=40]="KEY_J",n[n.KEY_K=41]="KEY_K",n[n.KEY_L=42]="KEY_L",n[n.KEY_M=43]="KEY_M",n[n.KEY_N=44]="KEY_N",n[n.KEY_O=45]="KEY_O",n[n.KEY_P=46]="KEY_P",n[n.KEY_Q=47]="KEY_Q",n[n.KEY_R=48]="KEY_R",n[n.KEY_S=49]="KEY_S",n[n.KEY_T=50]="KEY_T",n[n.KEY_U=51]="KEY_U",n[n.KEY_V=52]="KEY_V",n[n.KEY_W=53]="KEY_W",n[n.KEY_X=54]="KEY_X",n[n.KEY_Y=55]="KEY_Y",n[n.KEY_Z=56]="KEY_Z",n[n.Meta=57]="Meta",n[n.ContextMenu=58]="ContextMenu",n[n.F1=59]="F1",n[n.F2=60]="F2",n[n.F3=61]="F3",n[n.F4=62]="F4",n[n.F5=63]="F5",n[n.F6=64]="F6",n[n.F7=65]="F7",n[n.F8=66]="F8",n[n.F9=67]="F9",n[n.F10=68]="F10",n[n.F11=69]="F11",n[n.F12=70]="F12",n[n.F13=71]="F13",n[n.F14=72]="F14",n[n.F15=73]="F15",n[n.F16=74]="F16",n[n.F17=75]="F17",n[n.F18=76]="F18",n[n.F19=77]="F19",n[n.NumLock=78]="NumLock",n[n.ScrollLock=79]="ScrollLock",n[n.US_SEMICOLON=80]="US_SEMICOLON",n[n.US_EQUAL=81]="US_EQUAL",n[n.US_COMMA=82]="US_COMMA",n[n.US_MINUS=83]="US_MINUS",n[n.US_DOT=84]="US_DOT",n[n.US_SLASH=85]="US_SLASH",n[n.US_BACKTICK=86]="US_BACKTICK",n[n.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",n[n.US_BACKSLASH=88]="US_BACKSLASH",n[n.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",n[n.US_QUOTE=90]="US_QUOTE",n[n.OEM_8=91]="OEM_8",n[n.OEM_102=92]="OEM_102",n[n.NUMPAD_0=93]="NUMPAD_0",n[n.NUMPAD_1=94]="NUMPAD_1",n[n.NUMPAD_2=95]="NUMPAD_2",n[n.NUMPAD_3=96]="NUMPAD_3",n[n.NUMPAD_4=97]="NUMPAD_4",n[n.NUMPAD_5=98]="NUMPAD_5",n[n.NUMPAD_6=99]="NUMPAD_6",n[n.NUMPAD_7=100]="NUMPAD_7",n[n.NUMPAD_8=101]="NUMPAD_8",n[n.NUMPAD_9=102]="NUMPAD_9",n[n.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",n[n.NUMPAD_ADD=104]="NUMPAD_ADD",n[n.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",n[n.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",n[n.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",n[n.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",n[n.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",n[n.ABNT_C1=110]="ABNT_C1",n[n.ABNT_C2=111]="ABNT_C2",n[n.MAX_VALUE=112]="MAX_VALUE"})(XA||(XA={}));var QA;(function(n){n[n.LTR=0]="LTR",n[n.RTL=1]="RTL"})(QA||(QA={}));var JA;(function(n){n[n.Auto=1]="Auto",n[n.Hidden=2]="Hidden",n[n.Visible=3]="Visible"})(JA||(JA={}));var eO;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(eO||(eO={}));var tO;(function(n){n[n.Inline=1]="Inline"})(tO||(tO={}));var nO;(function(n){n[n.TextDefined=0]="TextDefined",n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(nO||(nO={}));var rO;(function(n){n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(rO||(rO={}));var iO;(function(n){n[n.LF=0]="LF",n[n.CRLF=1]="CRLF"})(iO||(iO={}));var oO;(function(n){n[n.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",n[n.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",n[n.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",n[n.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(oO||(oO={}));var sO;(function(n){n[n.Smooth=0]="Smooth",n[n.Immediate=1]="Immediate"})(sO||(sO={}));var aO;(function(n){n[n.NotSet=0]="NotSet",n[n.ContentFlush=1]="ContentFlush",n[n.RecoverFromMarkers=2]="RecoverFromMarkers",n[n.Explicit=3]="Explicit",n[n.Paste=4]="Paste",n[n.Undo=5]="Undo",n[n.Redo=6]="Redo"})(aO||(aO={}));var uO;(function(n){n[n.None=0]="None",n[n.Small=1]="Small",n[n.Large=2]="Large",n[n.SmallBlocks=3]="SmallBlocks",n[n.LargeBlocks=4]="LargeBlocks"})(uO||(uO={}));var lO;(function(n){n[n.None=0]="None",n[n.Same=1]="Same",n[n.Indent=2]="Indent",n[n.DeepIndent=3]="DeepIndent"})(lO||(lO={}));var cO;(function(n){n[n.Hidden=0]="Hidden",n[n.Blink=1]="Blink",n[n.Smooth=2]="Smooth",n[n.Phase=3]="Phase",n[n.Expand=4]="Expand",n[n.Solid=5]="Solid"})(cO||(cO={}));var fO;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(fO||(fO={}));var hO;(function(n){n[n.Off=0]="Off",n[n.On=1]="On",n[n.Relative=2]="Relative",n[n.Interval=3]="Interval",n[n.Custom=4]="Custom"})(hO||(hO={}));var dO;(function(n){n[n.EXACT=0]="EXACT",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW"})(dO||(dO={}));var pO;(function(n){n[n.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",n[n.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",n[n.TOP_CENTER=2]="TOP_CENTER"})(pO||(pO={}));var gO;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.TEXTAREA=1]="TEXTAREA",n[n.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",n[n.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",n[n.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",n[n.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",n[n.CONTENT_TEXT=6]="CONTENT_TEXT",n[n.CONTENT_EMPTY=7]="CONTENT_EMPTY",n[n.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",n[n.CONTENT_WIDGET=9]="CONTENT_WIDGET",n[n.OVERVIEW_RULER=10]="OVERVIEW_RULER",n[n.SCROLLBAR=11]="SCROLLBAR",n[n.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",n[n.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(gO||(gO={}));var vO;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(vO||(vO={}));var mO;(function(n){n[n.Method=0]="Method",n[n.Function=1]="Function",n[n.Constructor=2]="Constructor",n[n.Field=3]="Field",n[n.Variable=4]="Variable",n[n.Class=5]="Class",n[n.Struct=6]="Struct",n[n.Interface=7]="Interface",n[n.Module=8]="Module",n[n.Property=9]="Property",n[n.Event=10]="Event",n[n.Operator=11]="Operator",n[n.Unit=12]="Unit",n[n.Value=13]="Value",n[n.Constant=14]="Constant",n[n.Enum=15]="Enum",n[n.EnumMember=16]="EnumMember",n[n.Keyword=17]="Keyword",n[n.Text=18]="Text",n[n.Color=19]="Color",n[n.File=20]="File",n[n.Reference=21]="Reference",n[n.Customcolor=22]="Customcolor",n[n.Folder=23]="Folder",n[n.TypeParameter=24]="TypeParameter",n[n.Snippet=25]="Snippet"})(mO||(mO={}));var _O;(function(n){n[n.Deprecated=1]="Deprecated"})(_O||(_O={}));var yO;(function(n){n[n.KeepWhitespace=1]="KeepWhitespace",n[n.InsertAsSnippet=4]="InsertAsSnippet"})(yO||(yO={}));var bO;(function(n){n[n.Invoke=0]="Invoke",n[n.TriggerCharacter=1]="TriggerCharacter",n[n.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(bO||(bO={}));var wO;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(wO||(wO={}));var CO;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(CO||(CO={}));var SO;(function(n){n[n.File=0]="File",n[n.Module=1]="Module",n[n.Namespace=2]="Namespace",n[n.Package=3]="Package",n[n.Class=4]="Class",n[n.Method=5]="Method",n[n.Property=6]="Property",n[n.Field=7]="Field",n[n.Constructor=8]="Constructor",n[n.Enum=9]="Enum",n[n.Interface=10]="Interface",n[n.Function=11]="Function",n[n.Variable=12]="Variable",n[n.Constant=13]="Constant",n[n.String=14]="String",n[n.Number=15]="Number",n[n.Boolean=16]="Boolean",n[n.Array=17]="Array",n[n.Object=18]="Object",n[n.Key=19]="Key",n[n.Null=20]="Null",n[n.EnumMember=21]="EnumMember",n[n.Struct=22]="Struct",n[n.Event=23]="Event",n[n.Operator=24]="Operator",n[n.TypeParameter=25]="TypeParameter"})(SO||(SO={}));var EO;(function(n){n[n.Deprecated=1]="Deprecated"})(EO||(EO={}));var W0e=function(){function n(){}return n.chord=function(e,t){return zi(e,t)},n.CtrlCmd=2048,n.Shift=1024,n.Alt=512,n.WinCtrl=256,n}();function aG(){return{editor:void 0,languages:void 0,CancellationTokenSource:hd,Emitter:j,KeyCode:XA,KeyMod:W0e,Position:$,Range:R,Selection:Ce,SelectionDirection:QA,MarkerSeverity:ZA,MarkerTag:YA,Uri:bt,Token:rI}}var ba;(function(n){n.serviceIds=new Map,n.DI_TARGET="$di$target",n.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[n.DI_DEPENDENCIES]||[]}n.getServiceDependencies=e})(ba||(ba={}));var Hn=xt("instantiationService");function uG(n,e,t,r){e[ba.DI_TARGET]===e?e[ba.DI_DEPENDENCIES].push({id:n,index:t,optional:r}):(e[ba.DI_DEPENDENCIES]=[{id:n,index:t,optional:r}],e[ba.DI_TARGET]=e)}function xt(n){if(ba.serviceIds.has(n))return ba.serviceIds.get(n);var e=function(t,r,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");uG(e,t,i,!1)};return e.toString=function(){return n},ba.serviceIds.set(n,e),e}function $h(n){return function(e,t,r){if(arguments.length!==3)throw new Error("@optional-decorator can only be used to decorate a parameter");uG(n,e,r,!0)}}var an=xt("codeEditorService"),oI=function(){function n(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new j,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}return n.prototype.getZoomLevel=function(){return this._zoomLevel},n.prototype.getTimeSinceLastZoomLevelChanged=function(){return Date.now()-this._lastZoomLevelChangeTime},n.prototype.getPixelRatio=function(){var e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/r},n.INSTANCE=new n,n}();function q1(){return oI.INSTANCE.getZoomLevel()}function V0e(){return oI.INSTANCE.getTimeSinceLastZoomLevelChanged()}function lG(n){return oI.INSTANCE.onDidChangeZoomLevel(n)}function H0e(){return oI.INSTANCE.getPixelRatio()}var Sa=navigator.userAgent,Ro=Sa.indexOf("Trident")>=0,U0=Sa.indexOf("Edge/")>=0,uu=Ro||U0,wl=Sa.indexOf("Firefox")>=0,Kh=Sa.indexOf("AppleWebKit")>=0,ky=Sa.indexOf("Chrome")>=0,sI=!ky&&Sa.indexOf("Safari")>=0,U0e=!ky&&!sI&&Kh,$1=Sa.indexOf("iPad")>=0,j0e=U0&&Sa.indexOf("WebView/")>=0;function z0e(){if(Ro)return!1;if(U0){var n=Sa.indexOf("Edge/"),e=parseInt(Sa.substring(n+5,Sa.indexOf(".",n)),10);if(!e||e>=12&&e<=16)return!1}return!0}var pt=function(n,e,t){var r=function(o){return i.fire(o)},i=new j({onFirstListenerAdd:function(){n.addEventListener(e,r,t)},onLastListenerRemove:function(){n.removeEventListener(e,r,t)}});return i.event};function r8(n){return We.map(n,function(e){return e.preventDefault(),e.stopPropagation(),e})}var cG=new Array(230),Gk=new Array(112);(function(){for(var n=0;n<Gk.length;n++)Gk[n]=-1;function e(t,r){cG[t]=r,Gk[r]=t}e(3,7),e(8,1),e(9,2),e(13,3),e(16,4),e(17,5),e(18,6),e(19,7),e(20,8),e(27,9),e(32,10),e(33,11),e(34,12),e(35,13),e(36,14),e(37,15),e(38,16),e(39,17),e(40,18),e(45,19),e(46,20),e(48,21),e(49,22),e(50,23),e(51,24),e(52,25),e(53,26),e(54,27),e(55,28),e(56,29),e(57,30),e(65,31),e(66,32),e(67,33),e(68,34),e(69,35),e(70,36),e(71,37),e(72,38),e(73,39),e(74,40),e(75,41),e(76,42),e(77,43),e(78,44),e(79,45),e(80,46),e(81,47),e(82,48),e(83,49),e(84,50),e(85,51),e(86,52),e(87,53),e(88,54),e(89,55),e(90,56),e(93,58),e(96,93),e(97,94),e(98,95),e(99,96),e(100,97),e(101,98),e(102,99),e(103,100),e(104,101),e(105,102),e(106,103),e(107,104),e(108,105),e(109,106),e(110,107),e(111,108),e(112,59),e(113,60),e(114,61),e(115,62),e(116,63),e(117,64),e(118,65),e(119,66),e(120,67),e(121,68),e(122,69),e(123,70),e(124,71),e(125,72),e(126,73),e(127,74),e(128,75),e(129,76),e(130,77),e(144,78),e(145,79),e(186,80),e(187,81),e(188,82),e(189,83),e(190,84),e(191,85),e(192,86),e(193,110),e(194,111),e(219,87),e(220,88),e(221,89),e(222,90),e(223,91),e(226,92),e(229,109),Ro?e(91,57):wl?(e(59,80),e(107,81),e(109,83),ct&&e(224,57)):Kh&&(e(91,57),e(ct?93:92,57))})();function q0e(n){if(n.charCode){var e=String.fromCharCode(n.charCode).toUpperCase();return wg.fromString(e)}return cG[n.keyCode]||0}var $0e=ct?256:2048,K0e=512,G0e=1024,Y0e=ct?2048:256,Sn=function(){function n(e){this._standardKeyboardEventBrand=!0;var t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=q0e(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}return n.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},n.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},n.prototype.toKeybinding=function(){return this._asRuntimeKeybinding},n.prototype.equals=function(e){return this._asKeybinding===e},n.prototype._computeKeybinding=function(){var e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);var t=0;return this.ctrlKey&&(t|=$0e),this.altKey&&(t|=K0e),this.shiftKey&&(t|=G0e),this.metaKey&&(t|=Y0e),t|=e,t},n.prototype._computeRuntimeKeybinding=function(){var e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new XP(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)},n}(),IO=!1,Np=null;function Z0e(n){if(!n.parent||n.parent===n)return null;try{var e=n.location,t=n.parent.location;if(e.protocol!==t.protocol||e.hostname!==t.hostname||e.port!==t.port)return IO=!0,null}catch{return IO=!0,null}return n.parent}function X0e(n,e){for(var t=n.document.getElementsByTagName("iframe"),r,i=0,o=t.length;i<o;i++)if(r=t[i],r.contentWindow===e)return r;return null}var xO=function(){function n(){}return n.getSameOriginWindowChain=function(){if(!Np){Np=[];var e=window,t;do t=Z0e(e),t?Np.push({window:e,iframeElement:X0e(t,e)}):Np.push({window:e,iframeElement:null}),e=t;while(e)}return Np.slice(0)},n.hasDifferentOriginAncestor=function(){return Np||this.getSameOriginWindowChain(),IO},n.getPositionOfChildWindowRelativeToAncestorWindow=function(e,t){if(!t||e===t)return{top:0,left:0};for(var r=0,i=0,o=this.getSameOriginWindowChain(),s=0,a=o;s<a.length;s++){var u=a[s];if(u.window===t||!u.iframeElement)break;var l=u.iframeElement.getBoundingClientRect();r+=l.top,i+=l.left}return{top:r,left:i}},n}(),Q0e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rr=function(){function n(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);var t=xO.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}return n.prototype.preventDefault=function(){this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},n.prototype.stopPropagation=function(){this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},n}(),Yk=function(n){Q0e(e,n);function e(t){var r=n.call(this,t)||this;return r.dataTransfer=t.dataTransfer,r}return e}(Rr),jg=function(){function n(e,t,r){if(t===void 0&&(t=0),r===void 0&&(r=0),this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=r,this.deltaX=t,e)if(e.type==="wheel"){var i=e;i.deltaMode===i.DOM_DELTA_LINE?(this.deltaY=-e.deltaY,this.deltaX=-e.deltaX):(this.deltaY=-e.deltaY/40,this.deltaX=-e.deltaX/40)}else{var o=e,s=e;typeof o.wheelDeltaY<"u"?this.deltaY=o.wheelDeltaY/120:typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS&&(this.deltaY=-s.detail/3),typeof o.wheelDeltaX<"u"?sI&&Hi?this.deltaX=-(o.wheelDeltaX/120):this.deltaX=o.wheelDeltaX/120:typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS&&(this.deltaX=-e.detail/3),this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}return n.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},n.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},n}();function J0e(n){return n&&typeof n.then=="function"}function Cr(n){var e=new hd,t=n(e.token),r=new Promise(function(i,o){e.token.onCancellationRequested(function(){o(H0())}),Promise.resolve(t).then(function(s){e.dispose(),i(s)},function(s){e.dispose(),o(s)})});return new(function(){function i(){}return i.prototype.cancel=function(){e.cancel()},i.prototype.then=function(o,s){return r.then(o,s)},i.prototype.catch=function(o){return this.then(void 0,o)},i.prototype.finally=function(o){return r.finally(o)},i}())}function ebe(n,e,t){return Promise.race([n,new Promise(function(r){return e.onCancellationRequested(function(){return r(t)})})])}var Rv=function(){function n(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.task=null}return n.prototype.trigger=function(e,t){var r=this;return t===void 0&&(t=this.defaultDelay),this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(function(i,o){r.doResolve=i,r.doReject=o}).then(function(){r.completionPromise=null,r.doResolve=null;var i=r.task;return r.task=null,i()})),this.timeout=setTimeout(function(){r.timeout=null,r.doResolve(null)},t),this.completionPromise},n.prototype.isTriggered=function(){return this.timeout!==null},n.prototype.cancel=function(){this.cancelTimeout(),this.completionPromise&&(this.doReject(H0()),this.completionPromise=null)},n.prototype.cancelTimeout=function(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)},n.prototype.dispose=function(){this.cancelTimeout()},n}();function j0(n,e){return e?new Promise(function(t,r){var i=setTimeout(t,n);e.onCancellationRequested(function(){clearTimeout(i),r(H0())})}):Cr(function(t){return j0(n,t)})}function zg(n,e){e===void 0&&(e=0);var t=setTimeout(n,e);return en(function(){return clearTimeout(t)})}function JP(n,e,t){e===void 0&&(e=function(s){return!!s}),t===void 0&&(t=null);var r=0,i=n.length,o=function(){if(r>=i)return Promise.resolve(t);var s=n[r++],a=Promise.resolve(s());return a.then(function(u){return e(u)?Promise.resolve(u):o()})};return o()}var Ho=function(){function n(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}return n.prototype.dispose=function(){this.cancel()},n.prototype.cancel=function(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)},n.prototype.cancelAndSet=function(e,t){var r=this;this.cancel(),this._token=setTimeout(function(){r._token=-1,e()},t)},n.prototype.setIfNotSet=function(e,t){var r=this;this._token===-1&&(this._token=setTimeout(function(){r._token=-1,e()},t))},n}(),Mv=function(){function n(){this._token=-1}return n.prototype.dispose=function(){this.cancel()},n.prototype.cancel=function(){this._token!==-1&&(clearInterval(this._token),this._token=-1)},n.prototype.cancelAndSet=function(e,t){this.cancel(),this._token=setInterval(function(){e()},t)},n}(),hr=function(){function n(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}return n.prototype.dispose=function(){this.cancel(),this.runner=null},n.prototype.cancel=function(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)},n.prototype.schedule=function(e){e===void 0&&(e=this.timeout),this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)},n.prototype.isScheduled=function(){return this.timeoutToken!==-1},n.prototype.onTimeout=function(){this.timeoutToken=-1,this.runner&&this.doRun()},n.prototype.doRun=function(){this.runner&&this.runner()},n}(),K1;(function(){if(typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"){var n=Object.freeze({didTimeout:!0,timeRemaining:function(){return 15}});K1=function(e){var t=setTimeout(function(){return e(n)}),r=!1;return{dispose:function(){r||(r=!0,clearTimeout(t))}}}}else K1=function(e,t){var r=requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0),i=!1;return{dispose:function(){i||(i=!0,cancelIdleCallback(r))}}}})();var DO=function(){function n(e){var t=this;this._didRun=!1,this._executor=function(){try{t._value=e()}catch(r){t._error=r}finally{t._didRun=!0}},this._handle=K1(function(){return t._executor()})}return n.prototype.dispose=function(){this._handle.dispose()},n.prototype.getValue=function(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value},n}(),rn;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.userData="vscode-userdata"})(rn||(rn={}));var tbe=function(){function n(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http"}return n.prototype.setPreferredWebSchema=function(e){this._preferredWebSchema=e},n.prototype.rewrite=function(e,t){var r=this._hosts[e],i=this._ports[e],o=this._connectionTokens[e];return bt.from({scheme:GP?this._preferredWebSchema:rn.vscodeRemoteResource,authority:r+":"+i,path:"/vscode-remote-resource",query:"path="+encodeURIComponent(t)+"&tkn="+encodeURIComponent(o)})},n}(),fG=new tbe,hG=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LO=function(){return LO=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},LO.apply(this,arguments)};function ms(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function eF(n){n.parentNode&&n.parentNode.removeChild(n)}function nbe(n){for(;n;){if(n===document.body)return!0;n=n.parentNode||n.host}return!1}var rbe=new(function(){function n(){this._lastStart=-1,this._lastEnd=-1}return n.prototype._findClassName=function(e,t){var r=e.className;if(!r){this._lastStart=-1;return}t=t.trim();var i=r.length,o=t.length;if(o===0){this._lastStart=-1;return}if(i<o){this._lastStart=-1;return}if(r===t){this._lastStart=0,this._lastEnd=i;return}for(var s=-1,a;(s=r.indexOf(t,s+1))>=0;){if(a=s+o,(s===0||r.charCodeAt(s-1)===32)&&r.charCodeAt(a)===32){this._lastStart=s,this._lastEnd=a+1;return}if(s>0&&r.charCodeAt(s-1)===32&&a===i){this._lastStart=s-1,this._lastEnd=a;return}if(s===0&&a===i){this._lastStart=0,this._lastEnd=a;return}}this._lastStart=-1},n.prototype.hasClass=function(e,t){return this._findClassName(e,t),this._lastStart!==-1},n.prototype.addClasses=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.forEach(function(o){return o.split(" ").forEach(function(s){return t.addClass(e,s)})})},n.prototype.addClass=function(e,t){e.className?(this._findClassName(e,t),this._lastStart===-1&&(e.className=e.className+" "+t)):e.className=t},n.prototype.removeClass=function(e,t){this._findClassName(e,t),this._lastStart!==-1&&(e.className=e.className.substring(0,this._lastStart)+e.className.substring(this._lastEnd))},n.prototype.removeClasses=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.forEach(function(o){return o.split(" ").forEach(function(s){return t.removeClass(e,s)})})},n.prototype.toggleClass=function(e,t,r){this._findClassName(e,t),this._lastStart!==-1&&(r===void 0||!r)&&this.removeClass(e,t),this._lastStart===-1&&(r===void 0||r)&&this.addClass(e,t)},n}()),ibe=new(function(){function n(){}return n.prototype.hasClass=function(e,t){return!!t&&e.classList&&e.classList.contains(t)},n.prototype.addClasses=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.forEach(function(o){return o.split(" ").forEach(function(s){return t.addClass(e,s)})})},n.prototype.addClass=function(e,t){t&&e.classList&&e.classList.add(t)},n.prototype.removeClass=function(e,t){t&&e.classList&&e.classList.remove(t)},n.prototype.removeClasses=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.forEach(function(o){return o.split(" ").forEach(function(s){return t.removeClass(e,s)})})},n.prototype.toggleClass=function(e,t,r){e.classList&&e.classList.toggle(t,r)},n}()),Us=Ro?rbe:ibe,La=Us.hasClass.bind(Us),de=Us.addClass.bind(Us),tF=Us.addClasses.bind(Us),qe=Us.removeClass.bind(Us),aI=Us.removeClasses.bind(Us),vt=Us.toggleClass.bind(Us),obe=function(){function n(e,t,r,i){this._node=e,this._type=t,this._handler=r,this._useCapture=i||!1,this._node.addEventListener(this._type,this._handler,this._useCapture)}return n.prototype.dispose=function(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._useCapture),this._node=null,this._handler=null)},n}();function ie(n,e,t,r){return new obe(n,e,t,r)}function sbe(n){return function(e){return n(new Rr(e))}}function abe(n){return function(e){return n(new Sn(e))}}var Br=function(e,t,r,i){var o=r;return t==="click"||t==="mousedown"?o=sbe(r):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=abe(r)),ie(e,t,o,i)};function nF(n,e){return ie(n,"mouseout",function(t){for(var r=t.relatedTarget||t.target;r&&r!==n;)r=r.parentNode;r!==n&&e(t)})}var Zk=null;function ube(n){if(!Zk){var e=function(t){return setTimeout(function(){return t(new Date().getTime())},0)};Zk=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return Zk.call(self,n)}var dG,ef,Xk=function(){function n(e,t){t===void 0&&(t=0),this._runner=e,this.priority=t,this._canceled=!1}return n.prototype.dispose=function(){this._canceled=!0},n.prototype.execute=function(){if(!this._canceled)try{this._runner()}catch(e){Le(e)}},n.sort=function(e,t){return t.priority-e.priority},n}();(function(){var n=[],e=null,t=!1,r=!1,i=function(){for(t=!1,e=n,n=[],r=!0;e.length>0;){e.sort(Xk.sort);var o=e.shift();o.execute()}r=!1};ef=function(o,s){s===void 0&&(s=0);var a=new Xk(o,s);return n.push(a),t||(t=!0,ube(i)),a},dG=function(o,s){if(r){var a=new Xk(o,s);return e.push(a),a}else return ef(o,s)}})();var lbe=16,cbe=function(n,e){return e},fbe=function(n){hG(e,n);function e(t,r,i,o,s){o===void 0&&(o=cbe),s===void 0&&(s=lbe);var a=n.call(this)||this,u=null,l=0,f=a._register(new Ho),h=function(){l=new Date().getTime(),i(u),u=null};return a._register(ie(t,r,function(d){u=o(u,d);var g=new Date().getTime()-l;g>=s?(f.cancel(),h()):f.setIfNotSet(h,s-g)})),a}return e}(te);function z0(n,e,t,r,i){return new fbe(n,e,t,r,i)}function rF(n){return document.defaultView.getComputedStyle(n,null)}var No=function(){function n(){}return n.convertToPixels=function(e,t){return parseFloat(t)||0},n.getDimension=function(e,t,r){var i=rF(e),o="0";return i&&(i.getPropertyValue?o=i.getPropertyValue(t):o=i.getAttribute(r)),n.convertToPixels(e,o)},n.getBorderLeftWidth=function(e){return n.getDimension(e,"border-left-width","borderLeftWidth")},n.getBorderRightWidth=function(e){return n.getDimension(e,"border-right-width","borderRightWidth")},n.getBorderTopWidth=function(e){return n.getDimension(e,"border-top-width","borderTopWidth")},n.getBorderBottomWidth=function(e){return n.getDimension(e,"border-bottom-width","borderBottomWidth")},n.getPaddingLeft=function(e){return n.getDimension(e,"padding-left","paddingLeft")},n.getPaddingRight=function(e){return n.getDimension(e,"padding-right","paddingRight")},n.getPaddingTop=function(e){return n.getDimension(e,"padding-top","paddingTop")},n.getPaddingBottom=function(e){return n.getDimension(e,"padding-bottom","paddingBottom")},n.getMarginLeft=function(e){return n.getDimension(e,"margin-left","marginLeft")},n.getMarginTop=function(e){return n.getDimension(e,"margin-top","marginTop")},n.getMarginRight=function(e){return n.getDimension(e,"margin-right","marginRight")},n.getMarginBottom=function(e){return n.getDimension(e,"margin-bottom","marginBottom")},n}(),hbe=function(){function n(e,t){this.width=e,this.height=t}return n}();function iF(n){for(var e=n.offsetParent,t=n.offsetTop,r=n.offsetLeft;(n=n.parentNode)!==null&&n!==document.body&&n!==document.documentElement;){t-=n.scrollTop;var i=rF(n);i&&(r-=i.direction!=="rtl"?n.scrollLeft:-n.scrollLeft),n===e&&(r+=No.getBorderLeftWidth(n),t+=No.getBorderTopWidth(n),t+=n.offsetTop,r+=n.offsetLeft,e=n.offsetParent)}return{left:r,top:t}}function Wr(n){var e=n.getBoundingClientRect();return{left:e.left+nu.scrollX,top:e.top+nu.scrollY,width:e.width,height:e.height}}var nu=new(function(){function n(){}return Object.defineProperty(n.prototype,"scrollX",{get:function(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollY",{get:function(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop},enumerable:!0,configurable:!0}),n}());function ua(n){var e=No.getMarginLeft(n)+No.getMarginRight(n);return n.offsetWidth+e}function G1(n){var e=No.getBorderLeftWidth(n)+No.getBorderRightWidth(n),t=No.getPaddingLeft(n)+No.getPaddingRight(n);return n.offsetWidth-e-t}function pG(n){var e=No.getBorderTopWidth(n)+No.getBorderBottomWidth(n),t=No.getPaddingTop(n)+No.getPaddingBottom(n);return n.offsetHeight-e-t}function kO(n){var e=No.getMarginTop(n)+No.getMarginBottom(n);return n.offsetHeight+e}function wu(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function TO(n,e,t){for(;n;){if(La(n,e))return n;if(t){if(typeof t=="string"){if(La(n,t))return null}else if(n===t)return null}n=n.parentNode}return null}function pf(n){n===void 0&&(n=document.getElementsByTagName("head")[0]);var e=document.createElement("style");return e.type="text/css",e.media="screen",n.appendChild(e),e}var Qk=null;function gG(){return Qk||(Qk=pf()),Qk}function dbe(n){return n&&n.sheet&&n.sheet.rules?n.sheet.rules:n&&n.sheet&&n.sheet.cssRules?n.sheet.cssRules:[]}function pbe(n,e,t){t===void 0&&(t=gG()),!(!t||!e)&&t.sheet.insertRule(n+"{"+e+"}",0)}function NO(n,e){if(e===void 0&&(e=gG()),!!e){for(var t=dbe(e),r=[],i=0;i<t.length;i++){var o=t[i];o.selectorText.indexOf(n)!==-1&&r.push(i)}for(var i=r.length-1;i>=0;i--)e.sheet.deleteRule(r[i])}}function gbe(n){return typeof HTMLElement=="object"?n instanceof HTMLElement:n&&typeof n=="object"&&n.nodeType===1&&typeof n.nodeName=="string"}var Ye={CLICK:"click",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Kh?"webkitAnimationStart":"animationstart",ANIMATION_END:Kh?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Kh?"webkitAnimationIteration":"animationiteration"},nn={stop:function(n,e){n.preventDefault?n.preventDefault():n.returnValue=!1,e&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)}};function vbe(n){for(var e=[],t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)e[t]=n.scrollTop,n=n.parentNode;return e}function mbe(n,e){for(var t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)n.scrollTop!==e[t]&&(n.scrollTop=e[t]),n=n.parentNode}var _be=function(n){hG(e,n);function e(t){var r=n.call(this)||this;r._onDidFocus=r._register(new j),r.onDidFocus=r._onDidFocus.event,r._onDidBlur=r._register(new j),r.onDidBlur=r._onDidBlur.event;var i=wu(document.activeElement,t),o=!1,s=function(){o=!1,i||(i=!0,r._onDidFocus.fire())},a=function(){i&&(o=!0,window.setTimeout(function(){o&&(o=!1,i=!1,r._onDidBlur.fire())},0))};return r._register(pt(t,Ye.FOCUS,!0)(s)),r._register(pt(t,Ye.BLUR,!0)(a)),r}return e}(te);function Ty(n){return new _be(n)}function ce(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(r){return n.appendChild(r)}),e[e.length-1]}var ybe=/([\w\-]+)?(#([\w\-]+))?((.([\w\-]+))*)/,Ny;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.SVG="http://www.w3.org/2000/svg"})(Ny||(Ny={}));function vG(n,e,t){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=ybe.exec(e);if(!o)throw new Error("Bad use of emmet");t=LO({},t||{});var s=o[1]||"div",a;return n!==Ny.HTML?a=document.createElementNS(n,s):a=document.createElement(s),o[3]&&(a.id=o[3]),o[4]&&(a.className=o[4].replace(/\./g," ").trim()),Object.keys(t).forEach(function(u){var l=t[u];/^on\w+$/.test(u)?a[u]=l:u==="selected"?l&&a.setAttribute(u,"true"):a.setAttribute(u,l)}),Ol(r).forEach(function(u){u instanceof Node?a.appendChild(u):a.appendChild(document.createTextNode(u))}),a}function ke(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return vG.apply(void 0,[Ny.HTML,n,e].concat(t))}ke.SVG=function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return vG.apply(void 0,[Ny.SVG,n,e].concat(t))};function Yr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n;t<r.length;t++){var i=r[t];i.style.display="",i.removeAttribute("aria-hidden")}}function yr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n;t<r.length;t++){var i=r[t];i.style.display="none",i.setAttribute("aria-hidden","true")}}function bbe(n,e){for(;n;){if(n instanceof HTMLElement&&n.hasAttribute(e))return n;n=n.parentNode}return null}function oF(n){if(!(!n||!n.hasAttribute("tabIndex"))){if(document.activeElement===n){var e=bbe(n.parentElement,"tabIndex");e&&e.focus()}n.removeAttribute("tabindex")}}function i8(n){return Array.prototype.slice.call(document.getElementsByTagName(n),0)}function o8(n){var e=window.devicePixelRatio*n;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function mG(n){if(Da||j0e)window.open(n);else{var e=window.open();e&&(e.opener=null,e.location.href=n)}}function wbe(n){var e=function(){n(),t=ef(e)},t=ef(e);return en(function(){return t.dispose()})}fG.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function _G(n){return n&&(rn.vscodeRemote===n.scheme?fG.rewrite(n.authority,n.path):n)}function s8(n){return n?"url('"+_G(n).toString(!0).replace(/'/g,"%27")+"')":"url('')"}function yG(n){var e=JSON.parse(n);return e=bG(e,0),e}function bG(n,e){if(!n||e>200)return n;if(typeof n=="object"){switch(n.$mid){case 1:return bt.revive(n);case 2:return new RegExp(n.source,n.flags)}for(var t in n)Object.hasOwnProperty.call(n,t)&&(n[t]=bG(n[t],e+1))}return n}var Ay="";function wG(n){return!n||typeof n!="string"?!0:n.trim().length===0}function Xm(n,e,t){t===void 0&&(t="0");for(var r=""+n,i=[r],o=r.length;o<e;o++)i.push(t);return i.reverse().join("")}var Cbe=/{(\d+)}/g;function Nt(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.length===0?n:n.replace(Cbe,function(r,i){var o=parseInt(i,10);return isNaN(o)||o<0||o>=e.length?r:e[o]})}function fs(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Cu(n){return n.replace(/[\-\\\{\}\*\+\?\|\^\$\.\[\]\(\)\#]/g,"\\$&")}function Sbe(n,e){e===void 0&&(e=" ");var t=AO(n,e);return CG(t,e)}function AO(n,e){if(!n||!e)return n;var t=e.length;if(t===0||n.length===0)return n;for(var r=0;n.indexOf(e,r)===r;)r=r+t;return n.substring(r)}function CG(n,e){if(!n||!e)return n;var t=e.length,r=n.length;if(t===0||r===0)return n;for(var i=r,o=-1;o=n.lastIndexOf(e,i-1),!(o===-1||o+t!==i);){if(o===0)return"";i=o}return n.substring(0,i)}function Ebe(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function Oy(n,e){if(n.length<e.length)return!1;if(n===e)return!0;for(var t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0}function Cl(n,e){var t=n.length-e.length;return t>0?n.indexOf(e,t)===t:t===0?n===e:!1}function sF(n,e,t){if(t===void 0&&(t={}),!n)throw new Error("Cannot create regex from empty string");e||(n=Cu(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));var r="";return t.global&&(r+="g"),t.matchCase||(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u"),new RegExp(n,r)}function Ibe(n){if(n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$")return!1;var e=n.exec("");return!!(e&&n.lastIndex===0)}function Jk(n){return(n.global?"g":"")+(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")}function Mo(n){for(var e=0,t=n.length;e<t;e++){var r=n.charCodeAt(e);if(r!==32&&r!==9)return e}return-1}function ln(n,e,t){e===void 0&&(e=0),t===void 0&&(t=n.length);for(var r=e;r<t;r++){var i=n.charCodeAt(r);if(i!==32&&i!==9)return n.substring(e,r)}return n.substring(e,t)}function gf(n,e){e===void 0&&(e=n.length-1);for(var t=e;t>=0;t--){var r=n.charCodeAt(t);if(r!==32&&r!==9)return t}return-1}function SG(n,e){return n<e?-1:n>e?1:0}function xbe(n,e){for(var t=Math.min(n.length,e.length),r=0;r<t;r++){var i=n.charCodeAt(r),o=e.charCodeAt(r);if(i!==o){ha(i)&&(i+=32),ha(o)&&(o+=32);var s=i-o;if(s!==0)return ol(i)&&ol(o)?s:SG(n.toLowerCase(),e.toLowerCase())}}return n.length<e.length?-1:n.length>e.length?1:0}function ol(n){return n>=97&&n<=122}function ha(n){return n>=65&&n<=90}function a8(n){return ol(n)||ha(n)}function Ec(n,e){var t=n?n.length:0,r=e?e.length:0;return t!==r?!1:EG(n,e)}function EG(n,e,t){if(t===void 0&&(t=n.length),typeof n!="string"||typeof e!="string")return!1;for(var r=0;r<t;r++){var i=n.charCodeAt(r),o=e.charCodeAt(r);if(i!==o){if(a8(i)&&a8(o)){var s=Math.abs(i-o);if(s!==0&&s!==32)return!1}else if(String.fromCharCode(i).toLowerCase()!==String.fromCharCode(o).toLowerCase())return!1}}return!0}function IG(n,e){var t=e.length;return e.length>n.length?!1:EG(n,e,t)}function aF(n,e){var t,r=Math.min(n.length,e.length);for(t=0;t<r;t++)if(n.charCodeAt(t)!==e.charCodeAt(t))return t;return r}function Dbe(n,e){var t,r=Math.min(n.length,e.length),i=n.length-1,o=e.length-1;for(t=0;t<r;t++)if(n.charCodeAt(i-t)!==e.charCodeAt(o-t))return t;return r}function ao(n){return 55296<=n&&n<=56319}function uF(n){return 56320<=n&&n<=57343}var Lbe=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function lF(n){return Lbe.test(n)}var kbe=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEF8]|\uD83E[\uDD00-\uDDE6])/;function Tbe(n){return kbe.test(n)}var Nbe=/^[\t\n\r\x20-\x7E]*$/;function xG(n){return Nbe.test(n)}function Abe(n){for(var e=0,t=n.length;e<t;e++)if(Sl(n.charCodeAt(e)))return!0;return!1}function Sl(n){return n=+n,n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}var Obe="\uFEFF";function cF(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function DG(n){return btoa(encodeURIComponent(n))}function Rbe(n,e){for(var t="",r=0;r<e;r++)t+=n;return t}function Mbe(n,e){return e===void 0&&(e=!1),n?(e&&(n=n.replace(/\\./g,"")),n.toLowerCase()!==n):!1}function LG(n){var e=26;return n=n%(2*e),n<e?String.fromCharCode(97+n):String.fromCharCode(65+n-e)}var fF=typeof process>"u"?{cwd:function(){return"/"},env:Object.create(null),get platform(){return Hi?"win32":ct?"darwin":"linux"},nextTick:function(n){return ZK(n)}}:process,OO=fF.cwd,Pbe=fF.env,Md=fF.platform,Fbe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bbe=65,Wbe=97,Vbe=90,Hbe=122,Bc=46,ar=47,Xo=92,Yl=58,Ube=63,hF=function(n){Fbe(e,n);function e(t,r,i){var o=this,s;typeof r=="string"&&r.indexOf("not ")===0?(s="must not be",r=r.replace(/^not /,"")):s="must be";var a=t.indexOf(".")!==-1?"property":"argument",u='The "'+t+'" '+a+" "+s+" of type "+r;return u+=". Received type "+typeof i,o=n.call(this,u)||this,o.code="ERR_INVALID_ARG_TYPE",o}return e}(Error);function Zn(n,e){if(typeof n!="string")throw new hF(e,"string",n)}function dt(n){return n===ar||n===Xo}function u8(n){return n===ar}function Zl(n){return n>=Bbe&&n<=Vbe||n>=Wbe&&n<=Hbe}function Y1(n,e,t,r){for(var i="",o=0,s=-1,a=0,u,l=0;l<=n.length;++l){if(l<n.length)u=n.charCodeAt(l);else{if(r(u))break;u=ar}if(r(u)){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Bc||i.charCodeAt(i.length-2)!==Bc){if(i.length>2){var f=i.lastIndexOf(t);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(t)),s=l,a=0;continue}else if(i.length===2||i.length===1){i="",o=0,s=l,a=0;continue}}e&&(i.length>0?i+=t+"..":i="..",o=2)}else i.length>0?i+=t+n.slice(s+1,l):i=n.slice(s+1,l),o=l-s-1;s=l,a=0}else u===Bc&&a!==-1?++a:a=-1}return i}function kG(n,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+n+r:r}var po={resolve:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t="",r="",i=!1,o=n.length-1;o>=-1;o--){var s=void 0;if(o>=0?s=n[o]:t?(s=Pbe["="+t]||OO(),(s===void 0||s.slice(0,3).toLowerCase()!==t.toLowerCase()+"\\")&&(s=t+"\\")):s=OO(),Zn(s,"path"),s.length!==0){var a=s.length,u=0,l="",f=!1,h=s.charCodeAt(0);if(a>1)if(dt(h))if(f=!0,dt(s.charCodeAt(1))){for(var d=2,g=d;d<a&&!dt(s.charCodeAt(d));++d);if(d<a&&d!==g){var v=s.slice(g,d);for(g=d;d<a&&dt(s.charCodeAt(d));++d);if(d<a&&d!==g){for(g=d;d<a&&!dt(s.charCodeAt(d));++d);d===a?(l="\\\\"+v+"\\"+s.slice(g),u=d):d!==g&&(l="\\\\"+v+"\\"+s.slice(g,d),u=d)}}}else u=1;else Zl(h)&&s.charCodeAt(1)===Yl&&(l=s.slice(0,2),u=2,a>2&&dt(s.charCodeAt(2))&&(f=!0,u=3));else dt(h)&&(u=1,f=!0);if(!(l.length>0&&t.length>0&&l.toLowerCase()!==t.toLowerCase())&&(t.length===0&&l.length>0&&(t=l),i||(r=s.slice(u)+"\\"+r,i=f),t.length>0&&i))break}}return r=Y1(r,!i,"\\",dt),t+(i?"\\":"")+r||"."},normalize:function(n){Zn(n,"path");var e=n.length;if(e===0)return".";var t=0,r,i=!1,o=n.charCodeAt(0);if(e>1)if(dt(o))if(i=!0,dt(n.charCodeAt(1))){for(var s=2,a=s;s<e&&!dt(n.charCodeAt(s));++s);if(s<e&&s!==a){var u=n.slice(a,s);for(a=s;s<e&&dt(n.charCodeAt(s));++s);if(s<e&&s!==a){for(a=s;s<e&&!dt(n.charCodeAt(s));++s);if(s===e)return"\\\\"+u+"\\"+n.slice(a)+"\\";s!==a&&(r="\\\\"+u+"\\"+n.slice(a,s),t=s)}}}else t=1;else Zl(o)&&n.charCodeAt(1)===Yl&&(r=n.slice(0,2),t=2,e>2&&dt(n.charCodeAt(2))&&(i=!0,t=3));else if(dt(o))return"\\";var l;return t<e?l=Y1(n.slice(t),!i,"\\",dt):l="",l.length===0&&!i&&(l="."),l.length>0&&dt(n.charCodeAt(e-1))&&(l+="\\"),r===void 0?i?l.length>0?"\\"+l:"\\":l.length>0?l:"":i?l.length>0?r+"\\"+l:r+"\\":l.length>0?r+l:r},isAbsolute:function(n){Zn(n,"path");var e=n.length;if(e===0)return!1;var t=n.charCodeAt(0);return dt(t)?!0:!!(Zl(t)&&e>2&&n.charCodeAt(1)===Yl&&dt(n.charCodeAt(2)))},join:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length===0)return".";for(var t,r,i=0;i<n.length;++i){var o=n[i];Zn(o,"path"),o.length>0&&(t===void 0?t=r=o:t+="\\"+o)}if(t===void 0)return".";var s=!0,a=0;if(typeof r=="string"&&dt(r.charCodeAt(0))){++a;var u=r.length;u>1&&dt(r.charCodeAt(1))&&(++a,u>2&&(dt(r.charCodeAt(2))?++a:s=!1))}if(s){for(;a<t.length&&dt(t.charCodeAt(a));++a);a>=2&&(t="\\"+t.slice(a))}return po.normalize(t)},relative:function(n,e){if(Zn(n,"from"),Zn(e,"to"),n===e)return"";var t=po.resolve(n),r=po.resolve(e);if(t===r||(n=t.toLowerCase(),e=r.toLowerCase(),n===e))return"";for(var i=0;i<n.length&&n.charCodeAt(i)===Xo;++i);for(var o=n.length;o-1>i&&n.charCodeAt(o-1)===Xo;--o);for(var s=o-i,a=0;a<e.length&&e.charCodeAt(a)===Xo;++a);for(var u=e.length;u-1>a&&e.charCodeAt(u-1)===Xo;--u);for(var l=u-a,f=s<l?s:l,h=-1,d=0;d<=f;++d){if(d===f){if(l>f){if(e.charCodeAt(a+d)===Xo)return r.slice(a+d+1);if(d===2)return r.slice(a+d)}s>f&&(n.charCodeAt(i+d)===Xo?h=d:d===2&&(h=3));break}var g=n.charCodeAt(i+d),v=e.charCodeAt(a+d);if(g!==v)break;g===Xo&&(h=d)}if(d!==f&&h===-1)return r;var m="";for(h===-1&&(h=0),d=i+h+1;d<=o;++d)(d===o||n.charCodeAt(d)===Xo)&&(m.length===0?m+="..":m+="\\..");return m.length>0?m+r.slice(a+h,u):(a+=h,r.charCodeAt(a)===Xo&&++a,r.slice(a,u))},toNamespacedPath:function(n){if(typeof n!="string")return n;if(n.length===0)return"";var e=po.resolve(n);if(e.length>=3){if(e.charCodeAt(0)===Xo){if(e.charCodeAt(1)===Xo){var t=e.charCodeAt(2);if(t!==Ube&&t!==Bc)return"\\\\?\\UNC\\"+e.slice(2)}}else if(Zl(e.charCodeAt(0))&&e.charCodeAt(1)===Yl&&e.charCodeAt(2)===Xo)return"\\\\?\\"+e}return n},dirname:function(n){Zn(n,"path");var e=n.length;if(e===0)return".";var t=-1,r=-1,i=!0,o=0,s=n.charCodeAt(0);if(e>1)if(dt(s)){if(t=o=1,dt(n.charCodeAt(1))){for(var a=2,u=a;a<e&&!dt(n.charCodeAt(a));++a);if(a<e&&a!==u){for(u=a;a<e&&dt(n.charCodeAt(a));++a);if(a<e&&a!==u){for(u=a;a<e&&!dt(n.charCodeAt(a));++a);if(a===e)return n;a!==u&&(t=o=a+1)}}}}else Zl(s)&&n.charCodeAt(1)===Yl&&(t=o=2,e>2&&dt(n.charCodeAt(2))&&(t=o=3));else if(dt(s))return n;for(var l=e-1;l>=o;--l)if(dt(n.charCodeAt(l))){if(!i){r=l;break}}else i=!1;if(r===-1){if(t===-1)return".";r=t}return n.slice(0,r)},basename:function(n,e){e!==void 0&&Zn(e,"ext"),Zn(n,"path");var t=0,r=-1,i=!0,o;if(n.length>=2){var s=n.charCodeAt(0);Zl(s)&&n.charCodeAt(1)===Yl&&(t=2)}if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";var a=e.length-1,u=-1;for(o=n.length-1;o>=t;--o){var l=n.charCodeAt(o);if(dt(l)){if(!i){t=o+1;break}}else u===-1&&(i=!1,u=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=u))}return t===r?r=u:r===-1&&(r=n.length),n.slice(t,r)}else{for(o=n.length-1;o>=t;--o)if(dt(n.charCodeAt(o))){if(!i){t=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":n.slice(t,r)}},extname:function(n){Zn(n,"path");var e=0,t=-1,r=0,i=-1,o=!0,s=0;n.length>=2&&n.charCodeAt(1)===Yl&&Zl(n.charCodeAt(0))&&(e=r=2);for(var a=n.length-1;a>=e;--a){var u=n.charCodeAt(a);if(dt(u)){if(!o){r=a+1;break}continue}i===-1&&(o=!1,i=a+1),u===Bc?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===r+1?"":n.slice(t,i)},format:function(n){if(n===null||typeof n!="object")throw new hF("pathObject","Object",n);return kG("\\",n)},parse:function(n){Zn(n,"path");var e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;var t=n.length,r=0,i=n.charCodeAt(0);if(t>1){if(dt(i)){if(r=1,dt(n.charCodeAt(1))){for(var o=2,s=o;o<t&&!dt(n.charCodeAt(o));++o);if(o<t&&o!==s){for(s=o;o<t&&dt(n.charCodeAt(o));++o);if(o<t&&o!==s){for(s=o;o<t&&!dt(n.charCodeAt(o));++o);o===t?r=o:o!==s&&(r=o+1)}}}}else if(Zl(i)&&n.charCodeAt(1)===Yl)if(r=2,t>2){if(dt(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;r=3}}else return e.root=e.dir=n,e}else if(dt(i))return e.root=e.dir=n,e;r>0&&(e.root=n.slice(0,r));for(var a=-1,u=r,l=-1,f=!0,h=n.length-1,d=0;h>=r;--h){if(i=n.charCodeAt(h),dt(i)){if(!f){u=h+1;break}continue}l===-1&&(f=!1,l=h+1),i===Bc?a===-1?a=h:d!==1&&(d=1):a!==-1&&(d=-1)}return a===-1||l===-1||d===0||d===1&&a===l-1&&a===u+1?l!==-1&&(e.base=e.name=n.slice(u,l)):(e.name=n.slice(u,a),e.base=n.slice(u,l),e.ext=n.slice(a,l)),u>0&&u!==r?e.dir=n.slice(0,u-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Qn={resolve:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t="",r=!1,i=n.length-1;i>=-1&&!r;i--){var o=void 0;i>=0?o=n[i]:o=OO(),Zn(o,"path"),o.length!==0&&(t=o+"/"+t,r=o.charCodeAt(0)===ar)}return t=Y1(t,!r,"/",u8),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(n){if(Zn(n,"path"),n.length===0)return".";var e=n.charCodeAt(0)===ar,t=n.charCodeAt(n.length-1)===ar;return n=Y1(n,!e,"/",u8),n.length===0&&!e&&(n="."),n.length>0&&t&&(n+="/"),e?"/"+n:n},isAbsolute:function(n){return Zn(n,"path"),n.length>0&&n.charCodeAt(0)===ar},join:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length===0)return".";for(var t,r=0;r<n.length;++r){var i=arguments[r];Zn(i,"path"),i.length>0&&(t===void 0?t=i:t+="/"+i)}return t===void 0?".":Qn.normalize(t)},relative:function(n,e){if(Zn(n,"from"),Zn(e,"to"),n===e||(n=Qn.resolve(n),e=Qn.resolve(e),n===e))return"";for(var t=1;t<n.length&&n.charCodeAt(t)===ar;++t);for(var r=n.length,i=r-t,o=1;o<e.length&&e.charCodeAt(o)===ar;++o);for(var s=e.length,a=s-o,u=i<a?i:a,l=-1,f=0;f<=u;++f){if(f===u){if(a>u){if(e.charCodeAt(o+f)===ar)return e.slice(o+f+1);if(f===0)return e.slice(o+f)}else i>u&&(n.charCodeAt(t+f)===ar?l=f:f===0&&(l=0));break}var h=n.charCodeAt(t+f),d=e.charCodeAt(o+f);if(h!==d)break;h===ar&&(l=f)}var g="";for(f=t+l+1;f<=r;++f)(f===r||n.charCodeAt(f)===ar)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+e.slice(o+l):(o+=l,e.charCodeAt(o)===ar&&++o,e.slice(o))},toNamespacedPath:function(n){return n},dirname:function(n){if(Zn(n,"path"),n.length===0)return".";for(var e=n.charCodeAt(0)===ar,t=-1,r=!0,i=n.length-1;i>=1;--i)if(n.charCodeAt(i)===ar){if(!r){t=i;break}}else r=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename:function(n,e){e!==void 0&&Zn(e,"ext"),Zn(n,"path");var t=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";var s=e.length-1,a=-1;for(o=n.length-1;o>=0;--o){var u=n.charCodeAt(o);if(u===ar){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(r=o):(s=-1,r=a))}return t===r?r=a:r===-1&&(r=n.length),n.slice(t,r)}else{for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===ar){if(!i){t=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":n.slice(t,r)}},extname:function(n){Zn(n,"path");for(var e=-1,t=0,r=-1,i=!0,o=0,s=n.length-1;s>=0;--s){var a=n.charCodeAt(s);if(a===ar){if(!i){t=s+1;break}continue}r===-1&&(i=!1,r=s+1),a===Bc?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===t+1?"":n.slice(e,r)},format:function(n){if(n===null||typeof n!="object")throw new hF("pathObject","Object",n);return kG("/",n)},parse:function(n){Zn(n,"path");var e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;var t=n.charCodeAt(0)===ar,r;t?(e.root="/",r=1):r=0;for(var i=-1,o=0,s=-1,a=!0,u=n.length-1,l=0;u>=r;--u){var f=n.charCodeAt(u);if(f===ar){if(!a){o=u+1;break}continue}s===-1&&(a=!1,s=u+1),f===Bc?i===-1?i=u:l!==1&&(l=1):i!==-1&&(l=-1)}return i===-1||s===-1||l===0||l===1&&i===s-1&&i===o+1?s!==-1&&(o===0&&t?e.base=e.name=n.slice(1,s):e.base=e.name=n.slice(o,s)):(o===0&&t?(e.name=n.slice(1,i),e.base=n.slice(1,s)):(e.name=n.slice(o,i),e.base=n.slice(o,s)),e.ext=n.slice(i,s)),o>0?e.dir=n.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Qn.win32=po.win32=po;Qn.posix=po.posix=Qn;var Z1=Md==="win32"?po.normalize:Qn.normalize,TG=Md==="win32"?po.join:Qn.join,NG=Md==="win32"?po.relative:Qn.relative,dF=Md==="win32"?po.dirname:Qn.dirname,dd=Md==="win32"?po.basename:Qn.basename,AG=Md==="win32"?po.extname:Qn.extname,j_=Md==="win32"?po.sep:Qn.sep;const jbe=Object.freeze(Object.defineProperty({__proto__:null,basename:dd,dirname:dF,extname:AG,join:TG,normalize:Z1,posix:Qn,relative:NG,sep:j_,win32:po},Symbol.toStringTag,{value:"Module"}));function zbe(n,e,t,r){return r===void 0&&(r=j_),n===e?!0:!n||!e||e.length>n.length?!1:(e.charAt(e.length-1)!==r&&(e+=r),n.indexOf(e)===0)}function qbe(n){return n>=65&&n<=90||n>=97&&n<=122}function OG(n){return El(n)||n.authority}function El(n){return Qn.basename(n.path)}function pF(n){if(n.path.length===0)return n;if(n.scheme===rn.file)return bt.file(dF(gF(n)));var e=Qn.dirname(n.path);return n.authority&&e.length&&e.charCodeAt(0)!==47&&(console.error('dirname("'+n.toString+")) resulted in a relative path"),e="/"),n.with({path:e})}function $be(n){for(var e,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i;return n.scheme===rn.file?i=bt.file(TG.apply(jbe,[gF(n)].concat(t))).path:i=(e=Qn).join.apply(e,[n.path||"/"].concat(t)),n.with({path:i})}function Kbe(n){if(!n.path.length)return n;var e;return n.scheme===rn.file?e=bt.file(Z1(gF(n))).path:e=Qn.normalize(n.path),n.with({path:e})}function gF(n){var e,t=n.path;return n.authority&&t.length>1&&n.scheme===rn.file?e="//"+n.authority+t:Hi&&t.charCodeAt(0)===47&&qbe(t.charCodeAt(1))&&t.charCodeAt(2)===58?e=t.substr(1):e=t,Hi&&(e=e.replace(/\//g,"\\")),e}var tf;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function e(t){var r=new Map,i=t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";"));i.split(";").forEach(function(s){var a=s.split(":"),u=a[0],l=a[1];u&&l&&r.set(u,l)});var o=t.path.substring(0,t.path.indexOf(";"));return o&&r.set(n.META_DATA_MIME,o),r}n.parseMetaData=e})(tf||(tf={}));var Gbe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function vF(n){var e=[];return n.forEach(function(t){return e.push(t)}),e}function Ry(n){var e=[];return n.forEach(function(t,r){return e.push(r)}),e}var Ybe=function(){function n(){this._value="",this._pos=0}return n.prototype.reset=function(e){return this._value=e,this._pos=0,this},n.prototype.next=function(){return this._pos+=1,this},n.prototype.hasNext=function(){return this._pos<this._value.length-1},n.prototype.cmp=function(e){var t=e.charCodeAt(0),r=this._value.charCodeAt(this._pos);return t-r},n.prototype.value=function(){return this._value[this._pos]},n}(),Zbe=function(){function n(){}return n.prototype.reset=function(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()},n.prototype.hasNext=function(){return this._to<this._value.length},n.prototype.next=function(){this._from=this._to;for(var e=!0;this._to<this._value.length;this._to++){var t=this._value.charCodeAt(this._to);if(t===47||t===92)if(e)this._from++;else break;else e=!1}return this},n.prototype.cmp=function(e){for(var t=0,r=e.length,i=this._from;t<r&&i<this._to;){var o=e.charCodeAt(t)-this._value.charCodeAt(i);if(o!==0)return o;t+=1,i+=1}return r===this._to-this._from?0:t<r?-1:1},n.prototype.value=function(){return this._value.substring(this._from,this._to)},n}(),Gw=function(){function n(){}return n}(),RO=function(){function n(e){this._iter=e}return n.forPaths=function(){return new n(new Zbe)},n.forStrings=function(){return new n(new Ybe)},n.prototype.clear=function(){this._root=void 0},n.prototype.set=function(e,t){var r=this._iter.reset(e),i;for(this._root||(this._root=new Gw,this._root.segment=r.value()),i=this._root;;){var o=r.cmp(i.segment);if(o>0)i.left||(i.left=new Gw,i.left.segment=r.value()),i=i.left;else if(o<0)i.right||(i.right=new Gw,i.right.segment=r.value()),i=i.right;else if(r.hasNext())r.next(),i.mid||(i.mid=new Gw,i.mid.segment=r.value()),i=i.mid;else break}var s=i.value;return i.value=t,i.key=e,s},n.prototype.get=function(e){for(var t=this._iter.reset(e),r=this._root;r;){var i=t.cmp(r.segment);if(i>0)r=r.left;else if(i<0)r=r.right;else if(t.hasNext())t.next(),r=r.mid;else break}return r?r.value:void 0},n.prototype.findSubstr=function(e){for(var t=this._iter.reset(e),r=this._root,i=void 0;r;){var o=t.cmp(r.segment);if(o>0)r=r.left;else if(o<0)r=r.right;else if(t.hasNext())t.next(),i=r.value||i,r=r.mid;else break}return r&&r.value||i},n.prototype.forEach=function(e){this._forEach(this._root,e)},n.prototype._forEach=function(e,t){e&&(this._forEach(e.left,t),e.value&&t(e.value,e.key),this._forEach(e.mid,t),this._forEach(e.right,t))},n}(),eT=function(){function n(){this.map=new Map,this.ignoreCase=!1}return n.prototype.set=function(e,t){this.map.set(this.toKey(e),t)},n.prototype.get=function(e){return this.map.get(this.toKey(e))},n.prototype.toKey=function(e){var t=e.toString();return this.ignoreCase&&(t=t.toLowerCase()),t},n}(),Xbe=function(){function n(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}return n.prototype.clear=function(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),n.prototype.get=function(e,t){t===void 0&&(t=0);var r=this._map.get(e);if(r)return t!==0&&this.touch(r,t),r.value},n.prototype.set=function(e,t,r){r===void 0&&(r=0);var i=this._map.get(e);if(i)i.value=t,r!==0&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}},n.prototype.delete=function(e){return!!this.remove(e)},n.prototype.remove=function(e){var t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value},n.prototype.forEach=function(e,t){for(var r=this._head;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.next},n.prototype.trimOld=function(e){if(!(e>=this.size)){if(e===0){this.clear();return}for(var t=this._head,r=this.size;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0)}},n.prototype.addItemFirst=function(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e},n.prototype.addItemLast=function(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e},n.prototype.removeItem=function(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{var t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0},n.prototype.touch=function(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;var r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===2){if(e===this._tail)return;var r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}},n.prototype.toJSON=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),e},n}(),qg=function(n){Gbe(e,n);function e(t,r){r===void 0&&(r=1);var i=n.call(this)||this;return i._limit=t,i._ratio=Math.min(Math.max(0,r),1),i}return e.prototype.get=function(t){return n.prototype.get.call(this,t,2)},e.prototype.peek=function(t){return n.prototype.get.call(this,t,0)},e.prototype.set=function(t,r){n.prototype.set.call(this,t,r,2),this.checkTrim()},e.prototype.checkTrim=function(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))},e}(Xbe),bi=xt("commandService"),oi=new(function(){function n(){this._commands=new Map,this._onDidRegisterCommand=new j,this.onDidRegisterCommand=this._onDidRegisterCommand.event}return n.prototype.registerCommand=function(e,t){var r=this;if(!e)throw new Error("invalid command");if(typeof e=="string"){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.description){for(var i=[],o=0,s=e.description.args;o<s.length;o++){var a=s[o];i.push(a.constraint)}var u=e.handler;e.handler=function(g){for(var v=[],m=1;m<arguments.length;m++)v[m-1]=arguments[m];return Gye(v,i),u.apply(void 0,[g].concat(v))}}var l=e.id,f=this._commands.get(l);f||(f=new bl,this._commands.set(l,f));var h=f.unshift(e),d=en(function(){h();var g=r._commands.get(l);g&&g.isEmpty()&&r._commands.delete(l)});return this._onDidRegisterCommand.fire(l),d},n.prototype.registerCommandAlias=function(e,t){return oi.registerCommand(e,function(r){for(var i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return(i=r.get(bi)).executeCommand.apply(i,[t].concat(o))})},n.prototype.getCommand=function(e){var t=this._commands.get(e);if(!(!t||t.isEmpty()))return t.iterator().next().value},n.prototype.getCommands=function(){for(var e=new Map,t=0,r=Ry(this._commands);t<r.length;t++){var i=r[t],o=this.getCommand(i);o&&e.set(i,o)}return e},n}()),Qbe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jbe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},l8=function(n,e){return function(t,r){e(t,r,n)}},ewe=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},twe=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},nwe=function(n){Qbe(e,n);function e(t,r){var i=n.call(this)||this;return i._editorService=t,i._commandService=r,i._openers=new bl,i._validators=new bl,i}return e.prototype.open=function(t,r){return ewe(this,void 0,void 0,function(){var i,o,s,a,u,l,f;return twe(this,function(h){switch(h.label){case 0:if(!t.scheme)return[2,Promise.resolve(!1)];i=0,o=this._validators.toArray(),h.label=1;case 1:return i<o.length?(s=o[i],[4,s.shouldOpen(t)]):[3,4];case 2:if(!h.sent())return[2,!1];h.label=3;case 3:return i++,[3,1];case 4:a=0,u=this._openers.toArray(),h.label=5;case 5:return a<u.length?(l=u[a],[4,l.open(t,r)]):[3,8];case 6:if(f=h.sent(),f)return[2,!0];h.label=7;case 7:return a++,[3,5];case 8:return[2,this._doOpen(t,r)]}})})},e.prototype._doOpen=function(t,r){var i,o=t.scheme,s=t.path,a=t.query,u=t.fragment;if(Ec(o,rn.mailto)||r&&r.openExternal)return this._doOpenExternal(t);if(Ec(o,rn.http)||Ec(o,rn.https))return this._doOpenExternal(t);if(Ec(o,rn.command)){if(!oi.getCommand(s))return Promise.reject("command '"+s+"' NOT known");var l=[];try{l=yG(a),Array.isArray(l)||(l=[l])}catch{}return(i=this._commandService).executeCommand.apply(i,[s].concat(l)).then(function(){return!0})}else{var f=void 0,h=/^L?(\d+)(?:,(\d+))?/.exec(u);return h&&(f={startLineNumber:parseInt(h[1]),startColumn:h[2]?parseInt(h[2]):1},t=t.with({fragment:""})),t.scheme===rn.file&&(t=Kbe(t)),this._editorService.openCodeEditor({resource:t,options:{selection:f}},this._editorService.getFocusedCodeEditor(),r&&r.openToSide).then(function(){return!0})}},e.prototype._doOpenExternal=function(t){return mG(encodeURI(t.toString(!0))),Promise.resolve(!0)},e.prototype.dispose=function(){this._validators.clear()},e=Jbe([l8(0,an),l8(1,bi)],e),e}(te);function Cg(n,e){if(!n)throw new Error(e?"Assertion failed ("+e+")":"Assertion Failed")}var rwe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iwe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0},owe=function(n){rwe(e,n);function e(t,r){r===void 0&&(r={});var i=n.call(this)||this;return i._onDidUpdate=i._register(new j),i._editor=t,i._options=_r(r,iwe,!1),i.disposed=!1,i.nextIdx=-1,i.ranges=[],i.ignoreSelectionChange=!1,i.revealFirst=!!i._options.alwaysRevealFirst,i._register(i._editor.onDidDispose(function(){return i.dispose()})),i._register(i._editor.onDidUpdateDiff(function(){return i._onDiffUpdated()})),i._options.followsCaret&&i._register(i._editor.getModifiedEditor().onDidChangeCursorPosition(function(o){i.ignoreSelectionChange||(i.nextIdx=-1)})),i._options.alwaysRevealFirst&&i._register(i._editor.getModifiedEditor().onDidChangeModel(function(o){i.revealFirst=!0})),i._init(),i}return e.prototype._init=function(){var t=this._editor.getLineChanges()},e.prototype._onDiffUpdated=function(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))},e.prototype._compute=function(t){var r=this;this.ranges=[],t&&t.forEach(function(i){!r._options.ignoreCharChanges&&i.charChanges?i.charChanges.forEach(function(o){r.ranges.push({rhs:!0,range:new R(o.modifiedStartLineNumber,o.modifiedStartColumn,o.modifiedEndLineNumber,o.modifiedEndColumn)})}):r.ranges.push({rhs:!0,range:new R(i.modifiedStartLineNumber,1,i.modifiedStartLineNumber,1)})}),this.ranges.sort(function(i,o){return i.range.getStartPosition().isBeforeOrEqual(o.range.getStartPosition())?-1:o.range.getStartPosition().isBeforeOrEqual(i.range.getStartPosition())?1:0}),this._onDidUpdate.fire(this)},e.prototype._initIdx=function(t){var r=!1,i=this._editor.getPosition();if(!i){this.nextIdx=0;return}for(var o=0,s=this.ranges.length;o<s&&!r;o++){var a=this.ranges[o].range;i.isBeforeOrEqual(a.getStartPosition())&&(this.nextIdx=o+(t?0:-1),r=!0)}r||(this.nextIdx=t?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)},e.prototype._move=function(t,r){if(Cg(!this.disposed,"Illegal State - diff navigator has been disposed"),!!this.canNavigate()){this.nextIdx===-1?this._initIdx(t):t?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));var i=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{var o=i.range.getStartPosition();this._editor.setPosition(o),this._editor.revealPositionInCenter(o,r)}finally{this.ignoreSelectionChange=!1}}},e.prototype.canNavigate=function(){return this.ranges&&this.ranges.length>0},e.prototype.next=function(t){t===void 0&&(t=0),this._move(!0,t)},e.prototype.previous=function(t){t===void 0&&(t=0),this._move(!1,t)},e.prototype.dispose=function(){n.prototype.dispose.call(this),this.ranges=[],this.disposed=!0},e}(te),Il=new(function(){function n(){this._zoomLevel=0,this._onDidChangeZoomLevel=new j,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}return n.prototype.getZoomLevel=function(){return this._zoomLevel},n.prototype.setZoomLevel=function(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))},n}()),swe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),awe=ct?1.5:1.35,c8=8,uwe=100,f8=8,lwe=150,cwe=-5,fwe=20;function h8(n,e){if(typeof n=="number")return n;if(typeof n>"u")return e;var t=parseFloat(n);return isNaN(t)?e:t}function hwe(n,e){if(typeof n=="number")return Math.round(n);if(typeof n>"u")return e;var t=parseInt(n);return isNaN(t)?e:t}function tT(n,e,t){return n<e?e:n>t?t:n}function d8(n,e){return typeof n!="string"?e:n}var mF=function(){function n(e){this.zoomLevel=e.zoomLevel,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}return n.createFromRawSettings=function(e,t,r){r===void 0&&(r=!1);var i=d8(e.fontFamily,Rh.fontFamily),o=d8(e.fontWeight,Rh.fontWeight),s=h8(e.fontSize,Rh.fontSize);s=tT(s,0,uwe),s===0?s=Rh.fontSize:s<c8&&(s=c8);var a=hwe(e.lineHeight,0);a=tT(a,0,lwe),a===0?a=Math.round(awe*s):a<f8&&(a=f8);var u=h8(e.letterSpacing,0);u=tT(u,cwe,fwe);var l=1+(r?0:Il.getZoomLevel()*.1);return s*=l,a*=l,new n({zoomLevel:t,fontFamily:i,fontWeight:o,fontSize:s,lineHeight:a,letterSpacing:u})},n.prototype.getId=function(){return this.zoomLevel+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.lineHeight+"-"+this.letterSpacing},n.prototype.getMassagedFontFamily=function(){return/[,"']/.test(this.fontFamily)?this.fontFamily:/[+ ]/.test(this.fontFamily)?'"'+this.fontFamily+'"':this.fontFamily},n}(),MO=function(n){swe(e,n);function e(t,r){var i=n.call(this,t)||this;return i.isTrusted=r,i.isMonospace=t.isMonospace,i.typicalHalfwidthCharacterWidth=t.typicalHalfwidthCharacterWidth,i.typicalFullwidthCharacterWidth=t.typicalFullwidthCharacterWidth,i.canUseHalfwidthRightwardsArrow=t.canUseHalfwidthRightwardsArrow,i.spaceWidth=t.spaceWidth,i.maxDigitWidth=t.maxDigitWidth,i}return e.prototype.equals=function(t){return this.fontFamily===t.fontFamily&&this.fontWeight===t.fontWeight&&this.fontSize===t.fontSize&&this.lineHeight===t.lineHeight&&this.letterSpacing===t.letterSpacing&&this.typicalHalfwidthCharacterWidth===t.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===t.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.spaceWidth===t.spaceWidth&&this.maxDigitWidth===t.maxDigitWidth},e}(mF);function dwe(n){return n&&typeof n.id=="string"}var uI={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},Ht={ExecuteCommand:"executeCommand",ExecuteCommands:"executeCommands",Type:"type",ReplacePreviousChar:"replacePreviousChar",CompositionStart:"compositionStart",CompositionEnd:"compositionEnd",Paste:"paste",Cut:"cut",Undo:"undo",Redo:"redo"},hs;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(hs||(hs={}));var X1;(function(n){n[n.Inline=1]="Inline"})(X1||(X1={}));var YC=function(){function n(e){this.tabSize=e.tabSize|0,this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace}return n.prototype.equals=function(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace},n.prototype.createChangeEvent=function(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}},n}(),My=function(){function n(e,t){this.range=e,this.matches=t}return n}(),pwe=function(){function n(e,t,r){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=r}return n}(),nT="**",p8="/",ZC="[/\\\\]",XC="[^/\\\\]",gwe=/\//g;function g8(n){switch(n){case 0:return"";case 1:return XC+"*?";default:return"(?:"+ZC+"|"+XC+"+"+ZC+"|"+ZC+XC+"+)*?"}}function v8(n,e){if(!n)return[];for(var t=[],r=!1,i=!1,o="",s=0,a=n;s<a.length;s++){var u=a[s];switch(u){case e:if(!r&&!i){t.push(o),o="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=u}return o&&t.push(o),t}function RG(n){if(!n)return"";var e="",t=v8(n,p8);if(t.every(function(i){return i===nT}))e=".*";else{var r=!1;t.forEach(function(i,o){if(i===nT){r||(e+=g8(2),r=!0);return}for(var s=!1,a="",u=!1,l="",f=0,h=i;f<h.length;f++){var d=h[f];if(d!=="}"&&s){a+=d;continue}if(u&&(d!=="]"||!l)){var g=void 0;d==="-"?g=d:(d==="^"||d==="!")&&!l?g="^":d===p8?g="":g=Cu(d),l+=g;continue}switch(d){case"{":s=!0;continue;case"[":u=!0;continue;case"}":var v=v8(a,","),m="(?:"+v.map(function(y){return RG(y)}).join("|")+")";e+=m,s=!1,a="";break;case"]":e+="["+l+"]",u=!1,l="";break;case"?":e+=XC;continue;case"*":e+=g8(1);continue;default:e+=Cu(d)}}o<t.length-1&&(t[o+1]!==nT||o+2<t.length)&&(e+=ZC),r=!1})}return e}var vwe=/^\*\*\/\*\.[\w\.-]+$/,mwe=/^\*\*\/([\w\.-]+)\/?$/,_we=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,ywe=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,bwe=/^\*\*((\/[\w\.-]+)+)\/?$/,wwe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,m8=new qg(1e4),_8=function(){return!1},lu=function(){return null};function _F(n,e){if(!n)return lu;var t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();var r=t+"_"+!!e.trimForExclusions,i=m8.get(r);if(i)return y8(i,n);var o;if(vwe.test(t)){var s=t.substr(4);i=function(a,u){return typeof a=="string"&&Cl(a,s)?t:null}}else(o=mwe.exec(rT(t,e)))?i=Cwe(o[1],t):(e.trimForExclusions?ywe:_we).test(t)?i=Swe(t,e):(o=bwe.exec(rT(t,e)))?i=b8(o[1].substr(1),t,!0):(o=wwe.exec(rT(t,e)))?i=b8(o[1],t,!1):i=Ewe(t);return m8.set(r,i),y8(i,n)}function y8(n,e){return typeof e=="string"?n:function(t,r){return zbe(t,e.base)?n(NG(e.base,t),r):null}}function rT(n,e){return e.trimForExclusions&&Cl(n,"/**")?n.substr(0,n.length-2):n}function Cwe(n,e){var t="/"+n,r="\\"+n,i=function(s,a){return typeof s!="string"?null:a?a===n?e:null:s===n||Cl(s,t)||Cl(s,r)?e:null},o=[n];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}function Swe(n,e){var t=PG(n.slice(1,-1).split(",").map(function(a){return _F(a,e)}).filter(function(a){return a!==lu}),n),r=t.length;if(!r)return lu;if(r===1)return t[0];var i=function(a,u){for(var l=0,f=t.length;l<f;l++)if(t[l](a,u))return n;return null},o=PA(t,function(a){return!!a.allBasenames});o&&(i.allBasenames=o.allBasenames);var s=t.reduce(function(a,u){return u.allPaths?a.concat(u.allPaths):a},[]);return s.length&&(i.allPaths=s),i}function b8(n,e,t){var r=j_!==Qn.sep?n.replace(gwe,j_):n,i=j_+r,o=t?function(s,a){return typeof s=="string"&&(s===r||Cl(s,i))?e:null}:function(s,a){return typeof s=="string"&&s===r?e:null};return o.allPaths=[(t?"*/":"./")+n],o}function Ewe(n){try{var e=new RegExp("^"+RG(n)+"$");return function(t,r){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return lu}}function MG(n,e,t){return!n||typeof e!="string"?!1:Iwe(n)(e,void 0,t)}function Iwe(n,e){if(e===void 0&&(e={}),!n)return _8;if(typeof n=="string"||xwe(n)){var t=_F(n,e);if(t===lu)return _8;var r=function(i,o){return!!t(i,o)};return t.allBasenames&&(r.allBasenames=t.allBasenames),t.allPaths&&(r.allPaths=t.allPaths),r}return Dwe(n,e)}function xwe(n){var e=n;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function Dwe(n,e){var t=PG(Object.getOwnPropertyNames(n).map(function(f){return Lwe(f,n[f],e)}).filter(function(f){return f!==lu})),r=t.length;if(!r)return lu;if(!t.some(function(f){return!!f.requiresSiblings})){if(r===1)return t[0];var i=function(f,h){for(var d=0,g=t.length;d<g;d++){var v=t[d](f,h);if(v)return v}return null},o=PA(t,function(f){return!!f.allBasenames});o&&(i.allBasenames=o.allBasenames);var s=t.reduce(function(f,h){return h.allPaths?f.concat(h.allPaths):f},[]);return s.length&&(i.allPaths=s),i}var a=function(f,h,d){for(var g=void 0,v=0,m=t.length;v<m;v++){var y=t[v];y.requiresSiblings&&d&&(h||(h=dd(f)),g||(g=h.substr(0,h.length-AG(f).length)));var b=y(f,h,g,d);if(b)return b}return null},u=PA(t,function(f){return!!f.allBasenames});u&&(a.allBasenames=u.allBasenames);var l=t.reduce(function(f,h){return h.allPaths?f.concat(h.allPaths):f},[]);return l.length&&(a.allPaths=l),a}function Lwe(n,e,t){if(e===!1)return lu;var r=_F(n,t);if(r===lu)return lu;if(typeof e=="boolean")return r;if(e){var i=e.when;if(typeof i=="string"){var o=function(s,a,u,l){if(!l||!r(s,a))return null;var f=i.replace("$(basename)",u),h=l(f);return J0e(h)?h.then(function(d){return d?n:null}):h?n:null};return o.requiresSiblings=!0,o}}return r}function PG(n,e){var t=n.filter(function(l){return!!l.basenames});if(t.length<2)return n;var r=t.reduce(function(l,f){var h=f.basenames;return h?l.concat(h):l},[]),i;if(e){i=[];for(var o=0,s=r.length;o<s;o++)i.push(e)}else i=t.reduce(function(l,f){var h=f.patterns;return h?l.concat(h):l},[]);var a=function(l,f){if(typeof l!="string")return null;if(!f){var h=void 0;for(h=l.length;h>0;h--){var d=l.charCodeAt(h-1);if(d===47||d===92)break}f=l.substr(h)}var g=r.indexOf(f);return g!==-1?i[g]:null};a.basenames=r,a.patterns=i,a.allBasenames=r;var u=n.filter(function(l){return!l.basenames});return u.push(a),u}function FG(n,e,t,r){if(Array.isArray(n)){for(var i=0,o=0,s=n;o<s.length;o++){var a=s[o],u=FG(a,e,t,r);if(u===10)return u;u>i&&(i=u)}return i}else{if(typeof n=="string")return r?n==="*"?5:n===t?10:0:0;if(n){var l=n.language,f=n.pattern,h=n.scheme,d=n.hasAccessToAllModels;if(!r&&!d)return 0;var i=0;if(h)if(h===e.scheme)i=10;else if(h==="*")i=5;else return 0;if(l)if(l===t)i=10;else if(l==="*")i=Math.max(i,5);else return 0;if(f)if(f===e.fsPath||MG(f,e.fsPath))i=10;else return 0;return i}else return 0}}var yo=xt("modelService");function kwe(n){return!n.isTooLargeForSyncing()&&!n.isForSimpleWidget}function BG(n){return typeof n=="string"?!1:Array.isArray(n)?n.every(BG):!!n.exclusive}var Er=function(){function n(){this._clock=0,this._entries=[],this._onDidChange=new j}return Object.defineProperty(n.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),n.prototype.register=function(e,t){var r=this,i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),en(function(){if(i){var o=r._entries.indexOf(i);o>=0&&(r._entries.splice(o,1),r._lastCandidate=void 0,r._onDidChange.fire(r._entries.length),i=void 0)}})},n.prototype.has=function(e){return this.all(e).length>0},n.prototype.all=function(e){if(!e)return[];this._updateScores(e);for(var t=[],r=0,i=this._entries;r<i.length;r++){var o=i[r];o._score>0&&t.push(o.provider)}return t},n.prototype.ordered=function(e){var t=[];return this._orderedForEach(e,function(r){return t.push(r.provider)}),t},n.prototype.orderedGroups=function(e){var t=[],r,i;return this._orderedForEach(e,function(o){r&&i===o._score?r.push(o.provider):(i=o._score,r=[o.provider],t.push(r))}),t},n.prototype._orderedForEach=function(e,t){if(e){this._updateScores(e);for(var r=0,i=this._entries;r<i.length;r++){var o=i[r];o._score>0&&t(o)}}},n.prototype._updateScores=function(e){var t={uri:e.uri.toString(),language:e.getLanguageIdentifier().language};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(var r=0,i=this._entries;r<i.length;r++){var o=i[r];if(o._score=FG(o.selector,e.uri,e.getLanguageIdentifier().language,kwe(e)),BG(o.selector)&&o._score>0){for(var s=0,a=this._entries;s<a.length;s++){var u=a[s];u._score=0}o._score=1e3;break}}this._entries.sort(n._compareByScoreAndTime)}},n._compareByScoreAndTime=function(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0},n}(),Twe=function(){function n(){this._map=new Map,this._promises=new Map,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._colorMap=null}return n.prototype.fire=function(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})},n.prototype.register=function(e,t){var r=this;return this._map.set(e,t),this.fire([e]),en(function(){r._map.get(e)===t&&(r._map.delete(e),r.fire([e]))})},n.prototype.registerPromise=function(e,t){var r=this,i=null,o=!1;return this._promises.set(e,t.then(function(s){r._promises.delete(e),!(o||!s)&&(i=r.register(e,s))})),en(function(){o=!0,i&&i.dispose()})},n.prototype.getPromise=function(e){var t=this,r=this.get(e);if(r)return Promise.resolve(r);var i=this._promises.get(e);return i?i.then(function(o){return t.get(e)}):null},n.prototype.get=function(e){return Ug(this._map.get(e))},n.prototype.setColorMap=function(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Ry(this._map),changedColorMap:!0})},n.prototype.getColorMap=function(){return this._colorMap},n.prototype.getDefaultBackground=function(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null},n}(),yF=function(){function n(e,t){this.language=e,this.id=t}return n}(),ga=function(){function n(){}return n.getLanguageId=function(e){return(e&255)>>>0},n.getTokenType=function(e){return(e&1792)>>>8},n.getFontStyle=function(e){return(e&14336)>>>11},n.getForeground=function(e){return(e&8372224)>>>14},n.getBackground=function(e){return(e&4286578688)>>>23},n.getClassNameFromMetadata=function(e){var t=this.getForeground(e),r="mtk"+t,i=this.getFontStyle(e);return i&1&&(r+=" mtki"),i&2&&(r+=" mtkb"),i&4&&(r+=" mtku"),r},n.getInlineStyleFromMetadata=function(e,t){var r=this.getForeground(e),i=this.getFontStyle(e),o="color: "+t[r]+";";return i&1&&(o+="font-style: italic;"),i&2&&(o+="font-weight: bold;"),i&4&&(o+="text-decoration: underline;"),o},n}(),w8=function(){var n=Object.create(null);return n[0]="method",n[1]="function",n[2]="constructor",n[3]="field",n[4]="variable",n[5]="class",n[6]="struct",n[7]="interface",n[8]="module",n[9]="property",n[10]="event",n[11]="operator",n[12]="unit",n[13]="value",n[14]="constant",n[15]="enum",n[16]="enum-member",n[17]="keyword",n[25]="snippet",n[18]="text",n[19]="color",n[20]="file",n[21]="reference",n[22]="customcolor",n[23]="folder",n[24]="type-parameter",function(e){return n[e]||"property"}}(),bF=function(){var n=Object.create(null);return n.method=0,n.function=1,n.constructor=2,n.field=3,n.variable=4,n.class=5,n.struct=6,n.interface=7,n.module=8,n.property=9,n.event=10,n.operator=11,n.unit=12,n.value=13,n.constant=14,n.enum=15,n["enum-member"]=16,n.enumMember=16,n.keyword=17,n.snippet=25,n.text=18,n.color=19,n.file=20,n.reference=21,n.customcolor=22,n.folder=23,n["type-parameter"]=24,n.typeParameter=24,function(e,t){var r=n[e];return typeof r>"u"&&!t&&(r=9),r}}(),Gh;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(Gh||(Gh={}));var Py;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(Py||(Py={}));function Nwe(n){return n&&bt.isUri(n.uri)&&R.isIRange(n.range)&&(R.isIRange(n.originSelectionRange)||R.isIRange(n.targetSelectionRange))}var Awe=function(){var n=Object.create(null);return n[0]="file",n[1]="module",n[2]="namespace",n[3]="package",n[4]="class",n[5]="method",n[6]="property",n[7]="field",n[8]="constructor",n[9]="enum",n[10]="interface",n[11]="function",n[12]="variable",n[13]="constant",n[14]="string",n[15]="number",n[16]="boolean",n[17]="array",n[18]="object",n[19]="key",n[20]="null",n[21]="enum-member",n[22]="struct",n[23]="event",n[24]="operator",n[25]="type-parameter",function(t,r){return"symbol-icon "+(r?"inline":"block")+" "+(n[t]||"property")}}(),lI=function(){function n(e){this.value=e}return n.Comment=new n("comment"),n.Imports=new n("imports"),n.Region=new n("region"),n}();function Owe(n){return di(n)&&n.resource&&Array.isArray(n.edits)}var Q1=new Er,J1=new Er,ru=new Er,Yh=new Er,Fy=new Er,Ic=new Er,$g=new Er,By=new Er,eS=new Er,tS=new Er,nS=new Er,Zh=new Er,hl=new Er,z_=new Er,va=new Er,rS=new Er,Wy=new Er,Kg=new Er,cI=new Er,PO=new Er,mn=new Twe,Rwe=function(){function n(){}return n.prototype.clone=function(){return this},n.prototype.equals=function(e){return this===e},n}(),q0=new Rwe,wF="vs.editor.nullMode",iS=new yF(wF,0);function WG(n,e,t,r){return new QP([new rI(r,"",n)],t)}function CF(n,e,t,r){var i=new Uint32Array(2);return i[0]=r,i[1]=(n<<0|0|0|16384|2<<23)>>>0,new iI(i,t===null?q0:t)}var Mwe="editorWorkerService",qs=xt(Mwe),pd=xt("textModelService"),Pwe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fwe="$initialize",C8=!1;function FO(n){GP&&(C8||(C8=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/Microsoft/monaco-editor#faq")),console.warn(n.message))}var Bwe=function(){function n(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null)}return n.prototype.setWorkerId=function(e){this._workerId=e},n.prototype.sendMessage=function(e,t){var r=this,i=String(++this._lastSentReq);return new Promise(function(o,s){r._pendingReplies[i]={resolve:o,reject:s},r._send({vsWorker:r._workerId,req:i,method:e,args:t})})},n.prototype.handleMessage=function(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)},n.prototype._handleMessage=function(e){var t=this;if(e.seq){var r=e;if(!this._pendingReplies[r.seq]){console.warn("Got reply to unknown seq");return}var i=this._pendingReplies[r.seq];if(delete this._pendingReplies[r.seq],r.err){var o=r.err;r.err.$isError&&(o=new Error,o.name=r.err.name,o.message=r.err.message,o.stack=r.err.stack),i.reject(o);return}i.resolve(r.res);return}var s=e,a=s.req,u=this._handler.handleMessage(s.method,s.args);u.then(function(l){t._send({vsWorker:t._workerId,seq:a,res:l,err:void 0})},function(l){l.detail instanceof Error&&(l.detail=e8(l.detail)),t._send({vsWorker:t._workerId,seq:a,res:void 0,err:e8(l)})})},n.prototype._send=function(e){var t=[];if(e.req)for(var r=e,i=0;i<r.args.length;i++)r.args[i]instanceof ArrayBuffer&&t.push(r.args[i]);else{var r=e;r.res instanceof ArrayBuffer&&t.push(r.res)}this._handler.sendMessage(e,t)},n}(),Wwe=function(n){Pwe(e,n);function e(t,r,i){var o=n.call(this)||this,s=null;o._worker=o._register(t.create("vs/base/common/worker/simpleWorker",function(f){o._protocol.handleMessage(f)},function(f){s&&s(f)})),o._protocol=new Bwe({sendMessage:function(f,h){o._worker.postMessage(f,h)},handleMessage:function(f,h){if(typeof i[f]!="function")return Promise.reject(new Error("Missing method "+f+" on main thread host."));try{return Promise.resolve(i[f].apply(i,h))}catch(d){return Promise.reject(d)}}}),o._protocol.setWorkerId(o._worker.getId());var a=null;typeof self.require<"u"&&typeof self.require.getConfig=="function"?a=self.require.getConfig():typeof self.requirejs<"u"&&(a=self.requirejs.s.contexts._.config);var u=KP(i);o._onModuleLoaded=o._protocol.sendMessage(Fwe,[o._worker.getId(),JSON.parse(JSON.stringify(a)),r,u]);var l=function(f,h){return o._request(f,h)};return o._lazyProxy=new Promise(function(f,h){s=h,o._onModuleLoaded.then(function(d){f($K(d,l))},function(d){h(d),o._onError("Worker failed to load "+r,d)})}),o}return e.prototype.getProxyObject=function(){return this._lazyProxy},e.prototype._request=function(t,r){var i=this;return new Promise(function(o,s){i._onModuleLoaded.then(function(){i._protocol.sendMessage(t,r).then(o,s)},s)})},e.prototype._onError=function(t,r){console.error(t),console.info(r)},e}(te);function Vwe(n,e){if(To.MonacoEnvironment){if(typeof To.MonacoEnvironment.getWorker=="function")return To.MonacoEnvironment.getWorker(n,e);if(typeof To.MonacoEnvironment.getWorkerUrl=="function")return new Worker(To.MonacoEnvironment.getWorkerUrl(n,e))}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function Hwe(n){return typeof n.then=="function"}var Uwe=function(){function n(e,t,r,i,o){this.id=t;var s=Vwe("workerMain.js",r);Hwe(s)?this.worker=s:this.worker=Promise.resolve(s),this.postMessage(e,[]),this.worker.then(function(a){a.onmessage=function(u){i(u.data)},a.onmessageerror=o,typeof a.addEventListener=="function"&&a.addEventListener("error",o)})}return n.prototype.getId=function(){return this.id},n.prototype.postMessage=function(e,t){this.worker&&this.worker.then(function(r){return r.postMessage(e,t)})},n.prototype.dispose=function(){this.worker&&this.worker.then(function(e){return e.terminate()}),this.worker=null},n}(),jwe=function(){function n(e){this._label=e,this._webWorkerFailedBeforeError=!1}return n.prototype.create=function(e,t,r){var i=this,o=++n.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new Uwe(e,o,this._label||"anonymous"+o,t,function(s){FO(s),i._webWorkerFailedBeforeError=s,r(s)})},n.LAST_WORKER_ID=0,n}(),xn;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(xn||(xn={}));var iT=function(){function n(e){if(this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(var t=0,r=e.notIn.length;t<r;t++){var i=e.notIn[t];switch(i){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}}return n.prototype.isOK=function(e){return(this._standardTokenMask&e)===0},n}();function Yw(n,e){for(var t=n.getCount(),r=n.findTokenIndexAtOffset(e),i=n.getLanguageId(r),o=r;o+1<t&&n.getLanguageId(o+1)===i;)o++;for(var s=r;s>0&&n.getLanguageId(s-1)===i;)s--;return new zwe(n,i,s,o+1,n.getStartOffset(s),n.getEndOffset(o))}var zwe=function(){function n(e,t,r,i,o,s){this._actual=e,this.languageId=t,this._firstTokenIndex=r,this._lastTokenIndex=i,this.firstCharOffset=o,this._lastCharOffset=s}return n.prototype.getLineContent=function(){var e=this._actual.getLineContent();return e.substring(this.firstCharOffset,this._lastCharOffset)},n.prototype.getTokenCount=function(){return this._lastTokenIndex-this._firstTokenIndex},n.prototype.findTokenIndexAtOffset=function(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex},n.prototype.getStandardTokenType=function(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)},n}();function gh(n){return(n&7)!==0}var BO=function(){function n(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(function(r){return new iT(r)}):e.brackets?this._autoClosingPairs=e.brackets.map(function(r){return new iT({open:r[0],close:r[1]})}):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){var t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new iT({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:n.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}return n.prototype.getAutoClosingPairs=function(){return this._autoClosingPairs},n.prototype.getAutoCloseBeforeSet=function(){return this._autoCloseBefore},n.shouldAutoClosePair=function(e,t,r){if(t.getTokenCount()===0)return!0;var i=t.findTokenIndexAtOffset(r-2),o=t.getStandardTokenType(i);return e.isOK(o)},n.prototype.getSurroundingPairs=function(){return this._surroundingPairs},n.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`,n}(),qwe=function(){function n(e,t,r,i,o){this.languageIdentifier=e,this.open=t,this.close=r,this.forwardRegex=i,this.reversedRegex=o}return n}(),$we=function(){function n(e,t){var r=this;this.brackets=t.map(function(o){return new qwe(e,o[0],o[1],Kwe({open:o[0],close:o[1]}),Gwe({open:o[0],close:o[1]}))}),this.forwardRegex=Ywe(this.brackets),this.reversedRegex=Zwe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={};var i=0;this.brackets.forEach(function(o){r.textIsBracket[o.open.toLowerCase()]=o,r.textIsBracket[o.close.toLowerCase()]=o,r.textIsOpenBracket[o.open.toLowerCase()]=!0,r.textIsOpenBracket[o.close.toLowerCase()]=!1,i=Math.max(i,o.open.length),i=Math.max(i,o.close.length)}),this.maxBracketLength=i}return n}();function fI(n,e){var t={};return function(r){var i=n(r);return t.hasOwnProperty(i)||(t[i]=e(r)),t[i]}}var Kwe=fI(function(n){return n.open+";"+n.close},function(n){return hI([n.open,n.close])}),Gwe=fI(function(n){return n.open+";"+n.close},function(n){return hI([Vy(n.open),Vy(n.close)])}),Ywe=fI(function(n){return n.map(function(e){return e.open+";"+e.close}).join(";")},function(n){var e=[];return n.forEach(function(t){e.push(t.open),e.push(t.close)}),hI(e)}),Zwe=fI(function(n){return n.map(function(e){return e.open+";"+e.close}).join(";")},function(n){var e=[];return n.forEach(function(t){e.push(Vy(t.open)),e.push(Vy(t.close))}),hI(e)});function Xwe(n){var e=/^[\w]+$/.test(n);return n=Cu(n),e?"\\b"+n+"\\b":n}function hI(n){var e="("+n.map(Xwe).join(")|(")+")";return sF(e,!0)}var Vy=function(){function n(r){for(var i="",o=r.length-1;o>=0;o--)i+=r.charAt(o);return i}var e=null,t=null;return function(i){return e!==i&&(e=i,t=n(e)),t}}(),vh=function(){function n(){}return n._findPrevBracketInText=function(e,t,r,i){var o=r.match(e);if(!o)return null;var s=r.length-(o.index||0),a=o[0].length,u=i+s;return new R(t,u-a+1,t,u+1)},n.findPrevBracketInToken=function(e,t,r,i,o){var s=Vy(r),a=s.substring(r.length-o,r.length-i);return this._findPrevBracketInText(e,t,a,i)},n.findNextBracketInText=function(e,t,r,i){var o=r.match(e);if(!o)return null;var s=o.index||0,a=o[0].length;if(a===0)return null;var u=i+s;return new R(t,u+1,t,u+1+a)},n.findNextBracketInToken=function(e,t,r,i,o){var s=r.substring(i,o);return this.findNextBracketInText(e,t,s,i)},n}(),Qwe=function(){function n(e){this._richEditBrackets=e}return n.prototype.getElectricCharacters=function(){var e=[];if(this._richEditBrackets)for(var t=0,r=this._richEditBrackets.brackets.length;t<r;t++){var i=this._richEditBrackets.brackets[t],o=i.close.charAt(i.close.length-1);e.push(o)}return e=e.filter(function(s,a,u){return u.indexOf(s)===a}),e},n.prototype.onElectricCharacter=function(e,t,r){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;var i=t.findTokenIndexAtOffset(r-1);if(gh(t.getStandardTokenType(i)))return null;var o=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,r-1)+e,a=vh.findPrevBracketInToken(o,1,s,0,s.length);if(!a)return null;var u=s.substring(a.startColumn-1,a.endColumn-1);u=u.toLowerCase();var l=this._richEditBrackets.textIsOpenBracket[u];if(l)return null;var f=s.substring(0,a.startColumn-1);return/^\s*$/.test(f)?{matchOpenBracket:u}:null},n}(),Jwe=function(){function n(e){this._indentationRules=e}return n.prototype.shouldIncrease=function(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&this._indentationRules.increaseIndentPattern.test(e))},n.prototype.shouldDecrease=function(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&this._indentationRules.decreaseIndentPattern.test(e))},n.prototype.shouldIndentNextLine=function(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&this._indentationRules.indentNextLinePattern.test(e))},n.prototype.shouldIgnore=function(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&this._indentationRules.unIndentedLinePattern.test(e))},n.prototype.getIndentMetadata=function(e){var t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t},n}(),eCe=function(){function n(e){var t=this;e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(function(r){var i=n._createOpenBracketRegExp(r[0]),o=n._createCloseBracketRegExp(r[1]);i&&o&&t._brackets.push({open:r[0],openRegExp:i,close:r[1],closeRegExp:o})}),this._regExpRules=e.regExpRules||[]}return n.prototype.onEnter=function(e,t,r){for(var i=0,o=this._regExpRules.length;i<o;i++){var s=this._regExpRules[i],a=[{reg:s.beforeText,text:t},{reg:s.afterText,text:r},{reg:s.oneLineAboveText,text:e}].every(function(l){return l.reg?l.reg.test(l.text):!0});if(a)return s.action}if(t.length>0&&r.length>0)for(var i=0,o=this._brackets.length;i<o;i++){var u=this._brackets[i];if(u.openRegExp.test(t)&&u.closeRegExp.test(r))return{indentAction:xn.IndentOutdent}}if(t.length>0)for(var i=0,o=this._brackets.length;i<o;i++){var u=this._brackets[i];if(u.openRegExp.test(t))return{indentAction:xn.Indent}}return null},n._createOpenBracketRegExp=function(e){var t=Cu(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",n._safeRegExp(t)},n._createCloseBracketRegExp=function(e){var t=Cu(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,n._safeRegExp(t)},n._safeRegExp=function(e){try{return new RegExp(e)}catch(t){return Le(t),null}},n}(),tCe=function(){function n(e,t,r){this._languageIdentifier=e,this._brackets=null,this._electricCharacter=null;var i=null;t&&(i=t._conf),this._conf=n._mergeConf(i,r),this.onEnter=n._handleOnEnter(this._conf),this.comments=n._handleComments(this._conf),this.characterPair=new BO(this._conf),this.wordDefinition=this._conf.wordPattern||QK,this.indentationRules=this._conf.indentationRules,this._conf.indentationRules?this.indentRulesSupport=new Jwe(this._conf.indentationRules):this.indentRulesSupport=null,this.foldingRules=this._conf.folding||{}}return Object.defineProperty(n.prototype,"brackets",{get:function(){return!this._brackets&&this._conf.brackets&&(this._brackets=new $we(this._languageIdentifier,this._conf.brackets)),this._brackets},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"electricCharacter",{get:function(){return this._electricCharacter||(this._electricCharacter=new Qwe(this.brackets)),this._electricCharacter},enumerable:!0,configurable:!0}),n._mergeConf=function(e,t){return{comments:e?t.comments||e.comments:t.comments,brackets:e?t.brackets||e.brackets:t.brackets,wordPattern:e?t.wordPattern||e.wordPattern:t.wordPattern,indentationRules:e?t.indentationRules||e.indentationRules:t.indentationRules,onEnterRules:e?t.onEnterRules||e.onEnterRules:t.onEnterRules,autoClosingPairs:e?t.autoClosingPairs||e.autoClosingPairs:t.autoClosingPairs,surroundingPairs:e?t.surroundingPairs||e.surroundingPairs:t.surroundingPairs,autoCloseBefore:e?t.autoCloseBefore||e.autoCloseBefore:t.autoCloseBefore,folding:e?t.folding||e.folding:t.folding,__electricCharacterSupport:e?t.__electricCharacterSupport||e.__electricCharacterSupport:t.__electricCharacterSupport}},n._handleOnEnter=function(e){var t={},r=!0;return e.brackets&&(r=!1,t.brackets=e.brackets),e.indentationRules&&(r=!1),e.onEnterRules&&(r=!1,t.regExpRules=e.onEnterRules),r?null:new eCe(t)},n._handleComments=function(e){var t=e.comments;if(!t)return null;var r={};if(t.lineComment&&(r.lineCommentToken=t.lineComment),t.blockComment){var i=t.blockComment,o=i[0],s=i[1];r.blockCommentStartToken=o,r.blockCommentEndToken=s}return r},n}(),S8=function(){function n(e){this.languageIdentifier=e}return n}(),nCe=function(){function n(){this._entries=new Map,this._onDidChange=new j,this.onDidChange=this._onDidChange.event}return n.prototype.register=function(e,t){var r=this,i=this._getRichEditSupport(e.id),o=new tCe(e,i,t);return this._entries.set(e.id,o),this._onDidChange.fire(new S8(e)),en(function(){r._entries.get(e.id)===o&&(r._entries.set(e.id,i),r._onDidChange.fire(new S8(e)))})},n.prototype._getRichEditSupport=function(e){return this._entries.get(e)},n.prototype._getElectricCharacterSupport=function(e){var t=this._getRichEditSupport(e);return t&&t.electricCharacter||null},n.prototype.getElectricCharacters=function(e){var t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]},n.prototype.onElectricCharacter=function(e,t,r){var i=Yw(t,r-1),o=this._getElectricCharacterSupport(i.languageId);return o?o.onElectricCharacter(e,i,r-i.firstCharOffset):null},n.prototype.getComments=function(e){var t=this._getRichEditSupport(e);return t&&t.comments||null},n.prototype._getCharacterPairSupport=function(e){var t=this._getRichEditSupport(e);return t&&t.characterPair||null},n.prototype.getAutoClosingPairs=function(e){var t=this._getCharacterPairSupport(e);return t?t.getAutoClosingPairs():[]},n.prototype.getAutoCloseBeforeSet=function(e){var t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():BO.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED},n.prototype.getSurroundingPairs=function(e){var t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]},n.prototype.shouldAutoClosePair=function(e,t,r){var i=Yw(t,r-1);return BO.shouldAutoClosePair(e,i,r-i.firstCharOffset)},n.prototype.getWordDefinition=function(e){var t=this._getRichEditSupport(e);return VA(t&&t.wordDefinition||null)},n.prototype.getFoldingRules=function(e){var t=this._getRichEditSupport(e);return t?t.foldingRules:{}},n.prototype.getIndentRulesSupport=function(e){var t=this._getRichEditSupport(e);return t&&t.indentRulesSupport||null},n.prototype.getPrecedingValidLine=function(e,t,r){var i=e.getLanguageIdAtPosition(t,0);if(t>1){var o=void 0,s=-1;for(o=t-1;o>=1;o--){if(e.getLanguageIdAtPosition(o,0)!==i)return s;var a=e.getLineContent(o);if(r.shouldIgnore(a)||/^\s+$/.test(a)||a===""){s=o;continue}return o}}return-1},n.prototype.getInheritIndentForLine=function(e,t,r){r===void 0&&(r=!0);var i=this.getIndentRulesSupport(e.getLanguageIdentifier().id);if(!i)return null;if(t<=1)return{indentation:"",action:null};var o=this.getPrecedingValidLine(e,t,i);if(o<0)return null;if(o<1)return{indentation:"",action:null};var s=e.getLineContent(o);if(i.shouldIncrease(s)||i.shouldIndentNextLine(s))return{indentation:ln(s),action:xn.Indent,line:o};if(i.shouldDecrease(s))return{indentation:ln(s),action:null,line:o};if(o===1)return{indentation:ln(e.getLineContent(o)),action:null,line:o};var a=o-1,u=i.getIndentMetadata(e.getLineContent(a));if(!(u&3)&&u&4){for(var l=0,f=a-1;f>0;f--)if(!i.shouldIndentNextLine(e.getLineContent(f))){l=f;break}return{indentation:ln(e.getLineContent(l+1)),action:null,line:l+1}}if(r)return{indentation:ln(e.getLineContent(o)),action:null,line:o};for(var f=o;f>0;f--){var h=e.getLineContent(f);if(i.shouldIncrease(h))return{indentation:ln(h),action:xn.Indent,line:f};if(i.shouldIndentNextLine(h)){for(var l=0,d=f-1;d>0;d--)if(!i.shouldIndentNextLine(e.getLineContent(f))){l=d;break}return{indentation:ln(e.getLineContent(l+1)),action:null,line:l+1}}else if(i.shouldDecrease(h))return{indentation:ln(h),action:null,line:f}}return{indentation:ln(e.getLineContent(1)),action:null,line:1}},n.prototype.getGoodIndentForLine=function(e,t,r,i){var o=this.getIndentRulesSupport(t);if(!o)return null;var s=this.getInheritIndentForLine(e,r),a=e.getLineContent(r);if(s){var u=s.line;if(u!==void 0){var l=this._getOnEnterSupport(t),f=null;try{l&&(f=l.onEnter("",e.getLineContent(u),""))}catch(d){Le(d)}if(f){var h=ln(e.getLineContent(u));return f.removeText&&(h=h.substring(0,h.length-f.removeText)),f.indentAction===xn.Indent||f.indentAction===xn.IndentOutdent?h=i.shiftIndent(h):f.indentAction===xn.Outdent&&(h=i.unshiftIndent(h)),o.shouldDecrease(a)&&(h=i.unshiftIndent(h)),f.appendText&&(h+=f.appendText),ln(h)}}return o.shouldDecrease(a)?s.action===xn.Indent?s.indentation:i.unshiftIndent(s.indentation):s.action===xn.Indent?i.shiftIndent(s.indentation):s.indentation}return null},n.prototype.getIndentForEnter=function(e,t,r,i){e.forceTokenization(t.startLineNumber);var o=e.getLineTokens(t.startLineNumber),s,a,u=Yw(o,t.startColumn-1),l=u.getLineContent(),f=!1;if(u.firstCharOffset>0&&o.getLanguageId(0)!==u.languageId?(f=!0,s=l.substr(0,t.startColumn-1-u.firstCharOffset)):s=o.getLineContent().substring(0,t.startColumn-1),t.isEmpty())a=l.substr(t.startColumn-1-u.firstCharOffset);else{var h=this.getScopedLineTokens(e,t.endLineNumber,t.endColumn);a=h.getLineContent().substr(t.endColumn-1-u.firstCharOffset)}var d=this.getIndentRulesSupport(u.languageId);if(!d)return null;var g=s,v=ln(s);if(!i&&!f){var m=this.getInheritIndentForLine(e,t.startLineNumber);d.shouldDecrease(s)&&m&&(v=m.indentation,m.action!==xn.Indent&&(v=r.unshiftIndent(v))),g=v+AO(AO(s," "),"	")}var y={getLineTokens:function(k){return e.getLineTokens(k)},getLanguageIdentifier:function(){return e.getLanguageIdentifier()},getLanguageIdAtPosition:function(k,I){return e.getLanguageIdAtPosition(k,I)},getLineContent:function(k){return k===t.startLineNumber?g:e.getLineContent(k)}},b=ln(o.getLineContent()),C=this.getInheritIndentForLine(y,t.startLineNumber+1);if(!C){var E=f?b:v;return{beforeEnter:E,afterEnter:E}}var D=f?b:C.indentation;return C.action===xn.Indent&&(D=r.shiftIndent(D)),d.shouldDecrease(a)&&(D=r.unshiftIndent(D)),{beforeEnter:f?b:v,afterEnter:D}},n.prototype.getIndentActionForType=function(e,t,r,i){var o=this.getScopedLineTokens(e,t.startLineNumber,t.startColumn),s=this.getIndentRulesSupport(o.languageId);if(!s)return null;var a=o.getLineContent(),u=a.substr(0,t.startColumn-1-o.firstCharOffset),l;if(t.isEmpty())l=a.substr(t.startColumn-1-o.firstCharOffset);else{var f=this.getScopedLineTokens(e,t.endLineNumber,t.endColumn);l=f.getLineContent().substr(t.endColumn-1-o.firstCharOffset)}if(!s.shouldDecrease(u+l)&&s.shouldDecrease(u+r+l)){var h=this.getInheritIndentForLine(e,t.startLineNumber,!1);if(!h)return null;var d=h.indentation;return h.action!==xn.Indent&&(d=i.unshiftIndent(d)),d}return null},n.prototype.getIndentMetadata=function(e,t){var r=this.getIndentRulesSupport(e.getLanguageIdentifier().id);return!r||t<1||t>e.getLineCount()?null:r.getIndentMetadata(e.getLineContent(t))},n.prototype._getOnEnterSupport=function(e){var t=this._getRichEditSupport(e);return t&&t.onEnter||null},n.prototype.getRawEnterActionAtPosition=function(e,t,r){var i=this.getEnterAction(e,new R(t,r,t,r));return i?i.enterAction:null},n.prototype.getEnterAction=function(e,t){var r=this.getIndentationAtPosition(e,t.startLineNumber,t.startColumn),i=this.getScopedLineTokens(e,t.startLineNumber,t.startColumn),o=this._getOnEnterSupport(i.languageId);if(!o)return null;var s=i.getLineContent(),a=s.substr(0,t.startColumn-1-i.firstCharOffset),u;if(t.isEmpty())u=s.substr(t.startColumn-1-i.firstCharOffset);else{var l=this.getScopedLineTokens(e,t.endLineNumber,t.endColumn);u=l.getLineContent().substr(t.endColumn-1-i.firstCharOffset)}var f=t.startLineNumber,h="";if(f>1&&i.firstCharOffset===0){var d=this.getScopedLineTokens(e,f-1);d.languageId===i.languageId&&(h=d.getLineContent())}var g=null;try{g=o.onEnter(h,a,u)}catch(v){Le(v)}if(g)g.appendText||(g.indentAction===xn.Indent||g.indentAction===xn.IndentOutdent?g.appendText="	":g.appendText="");else return null;return g.removeText&&(r=r.substring(0,r.length-g.removeText)),{enterAction:g,indentation:r}},n.prototype.getIndentationAtPosition=function(e,t,r){var i=e.getLineContent(t),o=ln(i);return o.length>r-1&&(o=o.substring(0,r-1)),o},n.prototype.getScopedLineTokens=function(e,t,r){e.forceTokenization(t);var i=e.getLineTokens(t),o=typeof r>"u"?e.getLineMaxColumn(t)-1:r-1,s=Yw(i,o);return s},n.prototype.getBracketsSupport=function(e){var t=this._getRichEditSupport(e);return t&&t.brackets||null},n}(),gt=new nCe,oc=function(){function n(e,t,r,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=r,this.modifiedLength=i}return n.prototype.getOriginalEnd=function(){return this.originalStart+this.originalLength},n.prototype.getModifiedEnd=function(){return this.modifiedStart+this.modifiedLength},n}();function E8(n){return{getLength:function(){return n.length},getElementAtIndex:function(e){return n.charCodeAt(e)}}}function rCe(n,e,t){return new SF(E8(n),E8(e)).ComputeDiff(t)}var Ap=function(){function n(){}return n.Assert=function(e,t){if(!e)throw new Error(t)},n}(),Op=function(){function n(){}return n.Copy=function(e,t,r,i,o){for(var s=0;s<o;s++)r[i+s]=e[t+s]},n}(),th=1447,I8=function(){function n(){this.m_changes=[],this.m_originalStart=Number.MAX_VALUE,this.m_modifiedStart=Number.MAX_VALUE,this.m_originalCount=0,this.m_modifiedCount=0}return n.prototype.MarkNextChange=function(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new oc(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=Number.MAX_VALUE,this.m_modifiedStart=Number.MAX_VALUE},n.prototype.AddOriginalElement=function(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++},n.prototype.AddModifiedElement=function(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++},n.prototype.getChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes},n.prototype.getReverseChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes},n}(),SF=function(){function n(e,t,r){r===void 0&&(r=null),this.OriginalSequence=e,this.ModifiedSequence=t,this.ContinueProcessingPredicate=r,this.m_forwardHistory=[],this.m_reverseHistory=[]}return n.prototype.ElementsAreEqual=function(e,t){return this.OriginalSequence.getElementAtIndex(e)===this.ModifiedSequence.getElementAtIndex(t)},n.prototype.OriginalElementsAreEqual=function(e,t){return this.OriginalSequence.getElementAtIndex(e)===this.OriginalSequence.getElementAtIndex(t)},n.prototype.ModifiedElementsAreEqual=function(e,t){return this.ModifiedSequence.getElementAtIndex(e)===this.ModifiedSequence.getElementAtIndex(t)},n.prototype.ComputeDiff=function(e){return this._ComputeDiff(0,this.OriginalSequence.getLength()-1,0,this.ModifiedSequence.getLength()-1,e)},n.prototype._ComputeDiff=function(e,t,r,i,o){var s=[!1],a=this.ComputeDiffRecursive(e,t,r,i,s);return o?this.PrettifyChanges(a):a},n.prototype.ComputeDiffRecursive=function(e,t,r,i,o){for(o[0]=!1;e<=t&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;t>=e&&i>=r&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||r>i){var s=void 0;return r<=i?(Ap.Assert(e===t+1,"originalStart should only be one more than originalEnd"),s=[new oc(e,0,r,i-r+1)]):e<=t?(Ap.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),s=[new oc(e,t-e+1,r,0)]):(Ap.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Ap.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),s=[]),s}var a=[0],u=[0],l=this.ComputeRecursionPoint(e,t,r,i,a,u,o),f=a[0],h=u[0];if(l!==null)return l;if(!o[0]){var d=this.ComputeDiffRecursive(e,f,r,h,o),g=[];return o[0]?g=[new oc(f+1,t-(f+1)+1,h+1,i-(h+1)+1)]:g=this.ComputeDiffRecursive(f+1,t,h+1,i,o),this.ConcatenateChanges(d,g)}return[new oc(e,t-e+1,r,i-r+1)]},n.prototype.WALKTRACE=function(e,t,r,i,o,s,a,u,l,f,h,d,g,v,m,y,b,C){var E=null,D=null,k=new I8,I=t,T=r,A=g[0]-y[0]-i,M=Number.MIN_VALUE,L=this.m_forwardHistory.length-1,F;do F=A+e,F===I||F<T&&l[F-1]<l[F+1]?(h=l[F+1],v=h-A-i,h<M&&k.MarkNextChange(),M=h,k.AddModifiedElement(h+1,v),A=F+1-e):(h=l[F-1]+1,v=h-A-i,h<M&&k.MarkNextChange(),M=h-1,k.AddOriginalElement(h,v+1),A=F-1-e),L>=0&&(l=this.m_forwardHistory[L],e=l[0],I=1,T=l.length-1);while(--L>=-1);if(E=k.getReverseChanges(),C[0]){var W=g[0]+1,z=y[0]+1;if(E!==null&&E.length>0){var K=E[E.length-1];W=Math.max(W,K.getOriginalEnd()),z=Math.max(z,K.getModifiedEnd())}D=[new oc(W,d-W+1,z,m-z+1)]}else{k=new I8,I=s,T=a,A=g[0]-y[0]-u,M=Number.MAX_VALUE,L=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do F=A+o,F===I||F<T&&f[F-1]>=f[F+1]?(h=f[F+1]-1,v=h-A-u,h>M&&k.MarkNextChange(),M=h+1,k.AddOriginalElement(h+1,v+1),A=F+1-o):(h=f[F-1],v=h-A-u,h>M&&k.MarkNextChange(),M=h,k.AddModifiedElement(h+1,v+1),A=F-1-o),L>=0&&(f=this.m_reverseHistory[L],o=f[0],I=1,T=f.length-1);while(--L>=-1);D=k.getChanges()}return this.ConcatenateChanges(E,D)},n.prototype.ComputeRecursionPoint=function(e,t,r,i,o,s,a){var u=0,l=0,f=0,h=0,d=0,g=0,v;e--,r--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];var m=t-e+(i-r),y=m+1,b=new Array(y),C=new Array(y),E=i-r,D=t-e,k=e-r,I=t-i,T=D-E,A=T%2===0;b[E]=e,C[D]=t,a[0]=!1;var M,L;for(v=1;v<=m/2+1;v++){var F=0,W=0;for(f=this.ClipDiagonalBound(E-v,v,E,y),h=this.ClipDiagonalBound(E+v,v,E,y),M=f;M<=h;M+=2){for(M===f||M<h&&b[M-1]<b[M+1]?u=b[M+1]:u=b[M-1]+1,l=u-(M-E)-k,L=u;u<t&&l<i&&this.ElementsAreEqual(u+1,l+1);)u++,l++;if(b[M]=u,u+l>F+W&&(F=u,W=l),!A&&Math.abs(M-D)<=v-1&&u>=C[M])return o[0]=u,s[0]=l,L<=C[M]&&th>0&&v<=th+1?this.WALKTRACE(E,f,h,k,D,d,g,I,b,C,u,t,o,l,i,s,A,a):null}var z=(F-e+(W-r)-v)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(F,this.OriginalSequence,z))return a[0]=!0,o[0]=F,s[0]=W,z>0&&th>0&&v<=th+1?this.WALKTRACE(E,f,h,k,D,d,g,I,b,C,u,t,o,l,i,s,A,a):(e++,r++,[new oc(e,t-e+1,r,i-r+1)]);for(d=this.ClipDiagonalBound(D-v,v,D,y),g=this.ClipDiagonalBound(D+v,v,D,y),M=d;M<=g;M+=2){for(M===d||M<g&&C[M-1]>=C[M+1]?u=C[M+1]-1:u=C[M-1],l=u-(M-D)-I,L=u;u>e&&l>r&&this.ElementsAreEqual(u,l);)u--,l--;if(C[M]=u,A&&Math.abs(M-E)<=v&&u<=b[M])return o[0]=u,s[0]=l,L>=b[M]&&th>0&&v<=th+1?this.WALKTRACE(E,f,h,k,D,d,g,I,b,C,u,t,o,l,i,s,A,a):null}if(v<=th){var K=new Array(h-f+2);K[0]=E-f+1,Op.Copy(b,f,K,1,h-f+1),this.m_forwardHistory.push(K),K=new Array(g-d+2),K[0]=D-d+1,Op.Copy(C,d,K,1,g-d+1),this.m_reverseHistory.push(K)}}return this.WALKTRACE(E,f,h,k,D,d,g,I,b,C,u,t,o,l,i,s,A,a)},n.prototype.PrettifyChanges=function(e){for(var t=0;t<e.length;t++){for(var r=e[t],i=t<e.length-1?e[t+1].originalStart:this.OriginalSequence.getLength(),o=t<e.length-1?e[t+1].modifiedStart:this.ModifiedSequence.getLength(),s=r.originalLength>0,a=r.modifiedLength>0;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<o&&(!s||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!a||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));)r.originalStart++,r.modifiedStart++;var u=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],u)){e[t]=u[0],e.splice(t+1,1),t--;continue}}for(var t=e.length-1;t>=0;t--){var r=e[t],i=0,o=0;if(t>0){var l=e[t-1];l.originalLength>0&&(i=l.originalStart+l.originalLength),l.modifiedLength>0&&(o=l.modifiedStart+l.modifiedLength)}for(var s=r.originalLength>0,a=r.modifiedLength>0,f=0,h=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength),d=1;;d++){var g=r.originalStart-d,v=r.modifiedStart-d;if(g<i||v<o||s&&!this.OriginalElementsAreEqual(g,g+r.originalLength)||a&&!this.ModifiedElementsAreEqual(v,v+r.modifiedLength))break;var m=this._boundaryScore(g,r.originalLength,v,r.modifiedLength);m>h&&(h=m,f=d)}r.originalStart-=f,r.modifiedStart-=f}return e},n.prototype._OriginalIsBoundary=function(e){if(e<=0||e>=this.OriginalSequence.getLength()-1)return!0;var t=this.OriginalSequence.getElementAtIndex(e);return typeof t=="string"&&/^\s*$/.test(t)},n.prototype._OriginalRegionIsBoundary=function(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){var r=e+t;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1},n.prototype._ModifiedIsBoundary=function(e){if(e<=0||e>=this.ModifiedSequence.getLength()-1)return!0;var t=this.ModifiedSequence.getElementAtIndex(e);return typeof t=="string"&&/^\s*$/.test(t)},n.prototype._ModifiedRegionIsBoundary=function(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){var r=e+t;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1},n.prototype._boundaryScore=function(e,t,r,i){var o=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(r,i)?1:0;return o+s},n.prototype.ConcatenateChanges=function(e,t){var r=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],r)){var i=new Array(e.length+t.length-1);return Op.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],Op.Copy(t,1,i,e.length,t.length-1),i}else{var i=new Array(e.length+t.length);return Op.Copy(e,0,i,0,e.length),Op.Copy(t,0,i,e.length,t.length),i}},n.prototype.ChangesOverlap=function(e,t,r){if(Ap.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Ap.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){var i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),r[0]=new oc(i,o,s,a),!0}else return r[0]=null,!1},n.prototype.ClipDiagonalBound=function(e,t,r,i){if(e>=0&&e<i)return e;var o=r,s=i-r-1,a=t%2===0;if(e<0){var u=o%2===0;return a===u?0:1}else{var l=s%2===0;return a===l?i-1:i-2}},n}(),iCe=5e3,oCe=3;function VG(n,e,t,r){var i=new SF(n,e,t);return i.ComputeDiff(r)}var Rp=function(){function n(e){for(var t=[],r=[],i=0,o=e.length;i<o;i++)t[i]=n._getFirstNonBlankColumn(e[i],1),r[i]=n._getLastNonBlankColumn(e[i],1);this._lines=e,this._startColumns=t,this._endColumns=r}return n.prototype.getLength=function(){return this._lines.length},n.prototype.getElementAtIndex=function(e){return this._lines[e].substring(this._startColumns[e]-1,this._endColumns[e]-1)},n.prototype.getStartLineNumber=function(e){return e+1},n.prototype.getEndLineNumber=function(e){return e+1},n._getFirstNonBlankColumn=function(e,t){var r=Mo(e);return r===-1?t:r+1},n._getLastNonBlankColumn=function(e,t){var r=gf(e);return r===-1?t:r+2},n.prototype.getCharSequence=function(e,t,r){for(var i=[],o=[],s=[],a=0,u=t;u<=r;u++)for(var l=this._lines[u],f=e?this._startColumns[u]:1,h=e?this._endColumns[u]:l.length+1,d=f;d<h;d++)i[a]=l.charCodeAt(d-1),o[a]=u+1,s[a]=d,a++;return new sCe(i,o,s)},n}(),sCe=function(){function n(e,t,r){this._charCodes=e,this._lineNumbers=t,this._columns=r}return n.prototype.getLength=function(){return this._charCodes.length},n.prototype.getElementAtIndex=function(e){return this._charCodes[e]},n.prototype.getStartLineNumber=function(e){return this._lineNumbers[e]},n.prototype.getStartColumn=function(e){return this._columns[e]},n.prototype.getEndLineNumber=function(e){return this._lineNumbers[e]},n.prototype.getEndColumn=function(e){return this._columns[e]+1},n}(),WO=function(){function n(e,t,r,i,o,s,a,u){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=r,this.originalEndColumn=i,this.modifiedStartLineNumber=o,this.modifiedStartColumn=s,this.modifiedEndLineNumber=a,this.modifiedEndColumn=u}return n.createFromDiffChange=function(e,t,r){var i,o,s,a,u,l,f,h;return e.originalLength===0?(i=0,o=0,s=0,a=0):(i=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),s=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(u=0,l=0,f=0,h=0):(u=r.getStartLineNumber(e.modifiedStart),l=r.getStartColumn(e.modifiedStart),f=r.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=r.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new n(i,o,s,a,u,l,f,h)},n}();function aCe(n){if(n.length<=1)return n;for(var e=[n[0]],t=e[0],r=1,i=n.length;r<i;r++){var o=n[r],s=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength),u=Math.min(s,a);u<oCe?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}var oT=function(){function n(e,t,r,i,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=r,this.modifiedEndLineNumber=i,this.charChanges=o}return n.createFromDiffResult=function(e,t,r,i,o,s,a){var u,l,f,h,d=void 0;if(t.originalLength===0?(u=r.getStartLineNumber(t.originalStart)-1,l=0):(u=r.getStartLineNumber(t.originalStart),l=r.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(f=i.getStartLineNumber(t.modifiedStart)-1,h=0):(f=i.getStartLineNumber(t.modifiedStart),h=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),s&&t.originalLength!==0&&t.modifiedLength!==0&&o()){var g=r.getCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),v=i.getCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1),m=VG(g,v,o,!0);a&&(m=aCe(m)),d=[];for(var y=0,b=m.length;y<b;y++)d.push(WO.createFromDiffChange(m[y],g,v))}return new n(u,l,f,h,d)},n}(),uCe=function(){function n(e,t,r){this.shouldComputeCharChanges=r.shouldComputeCharChanges,this.shouldPostProcessCharChanges=r.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=r.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=r.shouldMakePrettyDiff,this.maximumRunTimeMs=iCe,this.originalLines=e,this.modifiedLines=t,this.original=new Rp(e),this.modified=new Rp(t),this.computationStartTime=new Date().getTime()}return n.prototype.computeDiff=function(){if(this.original.getLength()===1&&this.original.getElementAtIndex(0).length===0)return[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.getLength(),charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}];if(this.modified.getLength()===1&&this.modified.getElementAtIndex(0).length===0)return[{originalStartLineNumber:1,originalEndLineNumber:this.original.getLength(),modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}];this.computationStartTime=new Date().getTime();var e=VG(this.original,this.modified,this._continueProcessingPredicate.bind(this),this.shouldMakePrettyDiff);if(this.shouldIgnoreTrimWhitespace){for(var t=[],r=0,i=e.length;r<i;r++)t.push(oT.createFromDiffResult(this.shouldIgnoreTrimWhitespace,e[r],this.original,this.modified,this._continueProcessingPredicate.bind(this),this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return t}for(var o=[],s=0,a=0,r=-1,u=e.length;r<u;r++){for(var l=r+1<u?e[r+1]:null,f=l?l.originalStart:this.originalLines.length,h=l?l.modifiedStart:this.modifiedLines.length;s<f&&a<h;){var d=this.originalLines[s],g=this.modifiedLines[a];if(d!==g){{for(var v=Rp._getFirstNonBlankColumn(d,1),m=Rp._getFirstNonBlankColumn(g,1);v>1&&m>1;){var y=d.charCodeAt(v-2),b=g.charCodeAt(m-2);if(y!==b)break;v--,m--}(v>1||m>1)&&this._pushTrimWhitespaceCharChange(o,s+1,1,v,a+1,1,m)}{for(var C=Rp._getLastNonBlankColumn(d,1),E=Rp._getLastNonBlankColumn(g,1),D=d.length+1,k=g.length+1;C<D&&E<k;){var y=d.charCodeAt(C-1),b=d.charCodeAt(E-1);if(y!==b)break;C++,E++}(C<D||E<k)&&this._pushTrimWhitespaceCharChange(o,s+1,C,D,a+1,E,k)}}s++,a++}l&&(o.push(oT.createFromDiffResult(this.shouldIgnoreTrimWhitespace,l,this.original,this.modified,this._continueProcessingPredicate.bind(this),this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=l.originalLength,a+=l.modifiedLength)}return o},n.prototype._pushTrimWhitespaceCharChange=function(e,t,r,i,o,s,a){if(!this._mergeTrimWhitespaceCharChange(e,t,r,i,o,s,a)){var u=void 0;this.shouldComputeCharChanges&&(u=[new WO(t,r,t,i,o,s,o,a)]),e.push(new oT(t,t,o,o,u))}},n.prototype._mergeTrimWhitespaceCharChange=function(e,t,r,i,o,s,a){var u=e.length;if(u===0)return!1;var l=e[u-1];return l.originalEndLineNumber===0||l.modifiedEndLineNumber===0?!1:l.originalEndLineNumber+1===t&&l.modifiedEndLineNumber+1===o?(l.originalEndLineNumber=t,l.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&l.charChanges.push(new WO(t,r,t,i,o,s,o,a)),!0):!1},n.prototype._continueProcessingPredicate=function(){if(this.maximumRunTimeMs===0)return!0;var e=new Date().getTime();return e-this.computationStartTime<this.maximumRunTimeMs},n}(),lCe=function(){function n(e,t,r){for(var i=new Uint8Array(e*t),o=0,s=e*t;o<s;o++)i[o]=r;this._data=i,this.rows=e,this.cols=t}return n.prototype.get=function(e,t){return this._data[e*this.cols+t]},n.prototype.set=function(e,t,r){this._data[e*this.cols+t]=r},n}();function x8(n){return n<0?0:n>255?255:n|0}function mh(n){return n<0?0:n>4294967295?4294967295:n|0}function cCe(n){for(var e=n.length,t=new Uint32Array(e),r=0;r<e;r++)t[r]=mh(n[r]);return t}var fCe=function(){function n(e,t){this.index=e,this.remainder=t}return n}(),EF=function(){function n(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}return n.prototype.getCount=function(){return this.values.length},n.prototype.insertValues=function(e,t){e=mh(e);var r=this.values,i=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(r.length+o),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)},n.prototype.changeValue=function(e,t){return e=mh(e),t=mh(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)},n.prototype.removeValues=function(e,t){e=mh(e),t=mh(t);var r=this.values,i=this.prefixSum;if(e>=r.length)return!1;var o=r.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(r.length-t),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)},n.prototype.getTotalValue=function(){return this.values.length===0?0:this._getAccumulatedValue(this.values.length-1)},n.prototype.getAccumulatedValue=function(e){return e<0?0:(e=mh(e),this._getAccumulatedValue(e))},n.prototype._getAccumulatedValue=function(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];var t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(var r=t;r<=e;r++)this.prefixSum[r]=this.prefixSum[r-1]+this.values[r];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]},n.prototype.getIndexOf=function(e){e=Math.floor(e),this.getTotalValue();for(var t=0,r=this.values.length-1,i=0,o=0,s=0;t<=r;)if(i=t+(r-t)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)r=i-1;else if(e>=o)t=i+1;else break;return new fCe(i,e-s)},n}(),hCe=function(){function n(e){this._cacheAccumulatedValueStart=0,this._cache=null,this._actual=new EF(e),this._bustCache()}return n.prototype._bustCache=function(){this._cacheAccumulatedValueStart=0,this._cache=null},n.prototype.insertValues=function(e,t){this._actual.insertValues(e,t)&&this._bustCache()},n.prototype.changeValue=function(e,t){this._actual.changeValue(e,t)&&this._bustCache()},n.prototype.removeValues=function(e,t){this._actual.removeValues(e,t)&&this._bustCache()},n.prototype.getTotalValue=function(){return this._actual.getTotalValue()},n.prototype.getAccumulatedValue=function(e){return this._actual.getAccumulatedValue(e)},n.prototype.getIndexOf=function(e){if(e=Math.floor(e),this._cache!==null){var t=e-this._cacheAccumulatedValueStart;if(t>=0&&t<this._cache.length)return this._cache[t]}return this._actual.getIndexOf(e)},n.prototype.warmUpCache=function(e,t){for(var r=[],i=e;i<=t;i++)r[i-e]=this.getIndexOf(i);this._cache=r,this._cacheAccumulatedValueStart=e},n}(),dCe=function(){function n(e,t,r,i){this._uri=e,this._lines=t,this._eol=r,this._versionId=i,this._lineStarts=null}return n.prototype.dispose=function(){this._lines.length=0},n.prototype.getText=function(){return this._lines.join(this._eol)},n.prototype.onEvents=function(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);for(var t=e.changes,r=0,i=t;r<i.length;r++){var o=i[r];this._acceptDeleteRange(o.range),this._acceptInsertText(new $(o.range.startLineNumber,o.range.startColumn),o.text)}this._versionId=e.versionId},n.prototype._ensureLineStarts=function(){if(!this._lineStarts){for(var e=this._eol.length,t=this._lines.length,r=new Uint32Array(t),i=0;i<t;i++)r[i]=this._lines[i].length+e;this._lineStarts=new EF(r)}},n.prototype._setLineText=function(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)},n.prototype._acceptDeleteRange=function(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)},n.prototype._acceptInsertText=function(e,t){if(t.length!==0){var r=t.split(/\r\n|\r|\n/);if(r.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+r[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}r[r.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+r[0]);for(var i=new Uint32Array(r.length-1),o=1;o<r.length;o++)this._lines.splice(e.lineNumber+o-1,0,r[o]),i[o-1]=r[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}},n}(),dI=function(){function n(e){var t=x8(e);this._defaultValue=t,this._asciiMap=n._createAsciiMap(t),this._map=new Map}return n._createAsciiMap=function(e){for(var t=new Uint8Array(256),r=0;r<256;r++)t[r]=e;return t},n.prototype.set=function(e,t){var r=x8(t);e>=0&&e<256?this._asciiMap[e]=r:this._map.set(e,r)},n.prototype.get=function(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue},n}(),sg=function(){function n(){this._actual=new dI(0)}return n.prototype.add=function(e){this._actual.set(e,1)},n.prototype.has=function(e){return this._actual.get(e)===1},n}(),pCe=function(){function n(e){for(var t=0,r=0,i=0,o=e.length;i<o;i++){var s=e[i],a=s[0],u=s[1],l=s[2];u>t&&(t=u),a>r&&(r=a),l>r&&(r=l)}t++,r++;for(var f=new lCe(r,t,0),i=0,o=e.length;i<o;i++){var h=e[i],a=h[0],u=h[1],l=h[2];f.set(a,u,l)}this._states=f,this._maxCharCode=t}return n.prototype.nextState=function(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)},n}(),sT=null;function gCe(){return sT===null&&(sT=new pCe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),sT}var Qm=null;function vCe(){if(Qm===null){Qm=new dI(0);for(var n=` 	<>'"`,e=0;e<n.length;e++)Qm.set(n.charCodeAt(e),1);for(var t=".,;",e=0;e<t.length;e++)Qm.set(t.charCodeAt(e),2)}return Qm}var mCe=function(){function n(){}return n._createLink=function(e,t,r,i,o){var s=o-1;do{var a=t.charCodeAt(s),u=e.get(a);if(u!==2)break;s--}while(s>i);if(i>0){var l=t.charCodeAt(i-1),f=t.charCodeAt(s);(l===40&&f===41||l===91&&f===93||l===123&&f===125)&&s--}return{range:{startLineNumber:r,startColumn:i+1,endLineNumber:r,endColumn:s+2},url:t.substring(i,s+1)}},n.computeLinks=function(e,t){t===void 0&&(t=gCe());for(var r=vCe(),i=[],o=1,s=e.getLineCount();o<=s;o++){for(var a=e.getLineContent(o),u=a.length,l=0,f=0,h=0,d=1,g=!1,v=!1,m=!1;l<u;){var y=!1,b=a.charCodeAt(l);if(d===13){var C=void 0;switch(b){case 40:g=!0,C=0;break;case 41:C=g?0:1;break;case 91:v=!0,C=0;break;case 93:C=v?0:1;break;case 123:m=!0,C=0;break;case 125:C=m?0:1;break;case 39:C=h===34||h===96?0:1;break;case 34:C=h===39||h===96?0:1;break;case 96:C=h===39||h===34?0:1;break;default:C=r.get(b)}C===1&&(i.push(n._createLink(r,a,o,f,l)),y=!0)}else if(d===12){var C=void 0;b===91?(v=!0,C=0):C=r.get(b),C===1?y=!0:d=13}else d=t.nextState(d,b),d===0&&(y=!0);y&&(d=1,g=!1,v=!1,m=!1,f=l+1,h=b),l++}d===13&&i.push(n._createLink(r,a,o,f,u))}return i},n}();function _Ce(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:mCe.computeLinks(n)}var yCe=function(){function n(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}return n.prototype.navigateValueSet=function(e,t,r,i,o){if(e&&t){var s=this.doNavigateValueSet(t,o);if(s)return{range:e,value:s}}if(r&&i){var s=this.doNavigateValueSet(i,o);if(s)return{range:r,value:s}}return null},n.prototype.doNavigateValueSet=function(e,t){var r=this.numberReplace(e,t);return r!==null?r:this.textReplace(e,t)},n.prototype.numberReplace=function(e,t){var r=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),i=Number(e),o=parseFloat(e);return!isNaN(i)&&!isNaN(o)&&i===o?i===0&&!t?null:(i=Math.floor(i*r),i+=t?r:-r,String(i/r)):null},n.prototype.textReplace=function(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)},n.prototype.valueSetsReplace=function(e,t,r){for(var i=null,o=0,s=e.length;i===null&&o<s;o++)i=this.valueSetReplace(e[o],t,r);return i},n.prototype.valueSetReplace=function(e,t,r){var i=e.indexOf(t);return i>=0?(i+=r?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null},n.INSTANCE=new n,n}(),bCe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wCe=function(n){bCe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._versionId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eol",{get:function(){return this._eol},enumerable:!0,configurable:!0}),e.prototype.getValue=function(){return this.getText()},e.prototype.getLinesContent=function(){return this._lines.slice(0)},e.prototype.getLineCount=function(){return this._lines.length},e.prototype.getLineContent=function(t){return this._lines[t-1]},e.prototype.getWordAtPosition=function(t,r){var i=HA(t.column,VA(r),this._lines[t.lineNumber-1],0);return i?new R(t.lineNumber,i.startColumn,t.lineNumber,i.endColumn):null},e.prototype.getWordUntilPosition=function(t,r){var i=this.getWordAtPosition(t,r);return i?{word:this._lines[t.lineNumber-1].substring(i.startColumn-1,t.column-1),startColumn:i.startColumn,endColumn:t.column}:{word:"",startColumn:t.column,endColumn:t.column}},e.prototype.createWordIterator=function(t){var r=this,i,o=0,s,a=0,u=[],l=function(){if(a<u.length){var f=s.substring(u[a].start,u[a].end);return a+=1,i?i.value=f:i={done:!1,value:f},i}else return o>=r._lines.length?fc:(s=r._lines[o],u=r._wordenize(s,t),a=0,o+=1,l())};return{next:l}},e.prototype.getLineWords=function(t,r){for(var i=this._lines[t-1],o=this._wordenize(i,r),s=[],a=0,u=o;a<u.length;a++){var l=u[a];s.push({word:i.substring(l.start,l.end),startColumn:l.start+1,endColumn:l.end+1})}return s},e.prototype._wordenize=function(t,r){var i=[],o;for(r.lastIndex=0;(o=r.exec(t))&&o[0].length!==0;)i.push({start:o.index,end:o.index+o[0].length});return i},e.prototype.getValueInRange=function(t){if(t=this._validateRange(t),t.startLineNumber===t.endLineNumber)return this._lines[t.startLineNumber-1].substring(t.startColumn-1,t.endColumn-1);var r=this._eol,i=t.startLineNumber-1,o=t.endLineNumber-1,s=[];s.push(this._lines[i].substring(t.startColumn-1));for(var a=i+1;a<o;a++)s.push(this._lines[a]);return s.push(this._lines[o].substring(0,t.endColumn-1)),s.join(r)},e.prototype.offsetAt=function(t){return t=this._validatePosition(t),this._ensureLineStarts(),this._lineStarts.getAccumulatedValue(t.lineNumber-2)+(t.column-1)},e.prototype.positionAt=function(t){t=Math.floor(t),t=Math.max(0,t),this._ensureLineStarts();var r=this._lineStarts.getIndexOf(t),i=this._lines[r.index].length;return{lineNumber:1+r.index,column:1+Math.min(r.remainder,i)}},e.prototype._validateRange=function(t){var r=this._validatePosition({lineNumber:t.startLineNumber,column:t.startColumn}),i=this._validatePosition({lineNumber:t.endLineNumber,column:t.endColumn});return r.lineNumber!==t.startLineNumber||r.column!==t.startColumn||i.lineNumber!==t.endLineNumber||i.column!==t.endColumn?{startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:i.lineNumber,endColumn:i.column}:t},e.prototype._validatePosition=function(t){if(!$.isIPosition(t))throw new Error("bad position");var r=t.lineNumber,i=t.column,o=!1;if(r<1)r=1,i=1,o=!0;else if(r>this._lines.length)r=this._lines.length,i=this._lines[r-1].length+1,o=!0;else{var s=this._lines[r-1].length+1;i<1?(i=1,o=!0):i>s&&(i=s,o=!0)}return o?{lineNumber:r,column:i}:t},e}(dCe),D8=function(){function n(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}return n.prototype.dispose=function(){this._models=Object.create(null)},n.prototype._getModel=function(e){return this._models[e]},n.prototype._getModels=function(){var e=this,t=[];return Object.keys(this._models).forEach(function(r){return t.push(e._models[r])}),t},n.prototype.acceptNewModel=function(e){this._models[e.url]=new wCe(bt.parse(e.url),e.lines,e.EOL,e.versionId)},n.prototype.acceptModelChanged=function(e,t){if(this._models[e]){var r=this._models[e];r.onEvents(t)}},n.prototype.acceptRemovedModel=function(e){this._models[e]&&delete this._models[e]},n.prototype.computeDiff=function(e,t,r){var i=this._getModel(e),o=this._getModel(t);if(!i||!o)return Promise.resolve(null);var s=i.getLinesContent(),a=o.getLinesContent(),u=new uCe(s,a,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:r,shouldMakePrettyDiff:!0}),l=u.computeDiff(),f=l.length>0?!1:this._modelsAreIdentical(i,o);return Promise.resolve({identical:f,changes:l})},n.prototype._modelsAreIdentical=function(e,t){var r=e.getLineCount(),i=t.getLineCount();if(r!==i)return!1;for(var o=1;o<=r;o++){var s=e.getLineContent(o),a=t.getLineContent(o);if(s!==a)return!1}return!0},n.prototype.computeMoreMinimalEdits=function(e,t){var r=this._getModel(e);if(!r)return Promise.resolve(t);var i=[],o=void 0;t=eI(t,function(k,I){if(k.range&&I.range)return R.compareRangesUsingStarts(k.range,I.range);var T=k.range?0:1,A=I.range?0:1;return T-A});for(var s=0,a=t;s<a.length;s++){var u=a[s],l=u.range,f=u.text,h=u.eol;if(typeof h=="number"&&(o=h),!(R.isEmpty(l)&&!f)){var d=r.getValueInRange(l);if(f=f.replace(/\r\n|\n|\r/g,r.eol),d!==f){if(Math.max(f.length,d.length)>n._diffLimit){i.push({range:l,text:f});continue}for(var g=rCe(d,f,!1),v=r.offsetAt(R.lift(l).getStartPosition()),m=0,y=g;m<y.length;m++){var b=y[m],C=r.positionAt(v+b.originalStart),E=r.positionAt(v+b.originalStart+b.originalLength),D={text:f.substr(b.modifiedStart,b.modifiedLength),range:{startLineNumber:C.lineNumber,startColumn:C.column,endLineNumber:E.lineNumber,endColumn:E.column}};r.getValueInRange(D.range)!==D.text&&i.push(D)}}}}return typeof o=="number"&&i.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),Promise.resolve(i)},n.prototype.computeLinks=function(e){var t=this._getModel(e);return t?Promise.resolve(_Ce(t)):Promise.resolve(null)},n.prototype.textualSuggest=function(e,t,r,i){var o=this._getModel(e);if(!o)return Promise.resolve(null);var s=Object.create(null),a=[],u=new RegExp(r,i),l=o.getWordUntilPosition(t,u),f=o.getWordAtPosition(t,u);f&&(s[o.getValueInRange(f)]=!0);for(var h=o.createWordIterator(u),d=h.next();!d.done&&a.length<=n._suggestionsLimit;d=h.next()){var g=d.value;s[g]||(s[g]=!0,isNaN(Number(g))&&a.push({kind:18,label:g,insertText:g,range:{startLineNumber:t.lineNumber,startColumn:l.startColumn,endLineNumber:t.lineNumber,endColumn:l.endColumn}}))}return Promise.resolve({suggestions:a})},n.prototype.computeWordRanges=function(e,t,r,i){var o=this._getModel(e);if(!o)return Promise.resolve(Object.create(null));for(var s=new RegExp(r,i),a=Object.create(null),u=t.startLineNumber;u<t.endLineNumber;u++)for(var l=o.getLineWords(u,s),f=0,h=l;f<h.length;f++){var d=h[f];if(isNaN(Number(d.word))){var g=a[d.word];g||(g=[],a[d.word]=g),g.push({startLineNumber:u,startColumn:d.startColumn,endLineNumber:u,endColumn:d.endColumn})}}return Promise.resolve(a)},n.prototype.navigateValueSet=function(e,t,r,i,o){var s=this._getModel(e);if(!s)return Promise.resolve(null);var a=new RegExp(i,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});var u=s.getValueInRange(t),l=s.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!l)return Promise.resolve(null);var f=s.getValueInRange(l),h=yCe.INSTANCE.navigateValueSet(t,u,l,f,r);return Promise.resolve(h)},n.prototype.loadForeignModule=function(e,t,r){var i=this,o=function(u,l){return i._host.fhr(u,l)},s=$K(r,o),a={host:s,getMirrorModels:function(){return i._getModels()}};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(a,t),Promise.resolve(KP(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))},n.prototype.fmr=function(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(r){return Promise.reject(r)}},n._diffLimit=1e5,n._suggestionsLimit=1e4,n}();typeof importScripts=="function"&&(To.monaco=aG());var HG=xt("textResourceConfigurationService"),UG=xt("textResourcePropertiesService"),IF=xt("logService"),CCe=function(){function n(){}return n.prototype.trace=function(e){},n.prototype.error=function(e){},n.prototype.dispose=function(){},n}(),SCe=To.performance&&typeof To.performance.now=="function",xF=function(){function n(e){this._highResolution=SCe&&e,this._startTime=this._now(),this._stopTime=-1}return n.create=function(e){return e===void 0&&(e=!0),new n(e)},n.prototype.stop=function(){this._stopTime=this._now()},n.prototype.elapsed=function(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime},n.prototype._now=function(){return this._highResolution?To.performance.now():new Date().getTime()},n}(),pI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ECe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},aT=function(n,e){return function(t,r){e(t,r,n)}},L8=60*1e3,k8=5*60*1e3;function _h(n,e){var t=n.getModel(e);return!(!t||t.isTooLargeForSyncing())}var ICe=function(n){pI(e,n);function e(t,r,i){var o=n.call(this)||this;return o._modelService=t,o._workerManager=o._register(new DCe(o._modelService)),o._logService=i,o._register(Wy.register("*",{provideLinks:function(s,a){return _h(o._modelService,s.uri)?o._workerManager.withWorker().then(function(u){return u.computeLinks(s.uri)}).then(function(u){return u&&{links:u}}):Promise.resolve({links:[]})}})),o._register(ru.register("*",new xCe(o._workerManager,r,o._modelService))),o}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype.canComputeDiff=function(t,r){return _h(this._modelService,t)&&_h(this._modelService,r)},e.prototype.computeDiff=function(t,r,i){return this._workerManager.withWorker().then(function(o){return o.computeDiff(t,r,i)})},e.prototype.computeMoreMinimalEdits=function(t,r){var i=this;if(vo(r)){if(!_h(this._modelService,t))return Promise.resolve(r);var o=xF.create(!0),s=this._workerManager.withWorker().then(function(a){return a.computeMoreMinimalEdits(t,r)});return s.finally(function(){return i._logService.trace("FORMAT#computeMoreMinimalEdits",t.toString(!0),o.elapsed())}),s}else return Promise.resolve(void 0)},e.prototype.canNavigateValueSet=function(t){return _h(this._modelService,t)},e.prototype.navigateValueSet=function(t,r,i){return this._workerManager.withWorker().then(function(o){return o.navigateValueSet(t,r,i)})},e.prototype.canComputeWordRanges=function(t){return _h(this._modelService,t)},e.prototype.computeWordRanges=function(t,r){return this._workerManager.withWorker().then(function(i){return i.computeWordRanges(t,r)})},e=ECe([aT(0,yo),aT(1,HG),aT(2,IF)],e),e}(te),xCe=function(){function n(e,t,r){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=r}return n.prototype.provideCompletionItems=function(e,t){var r=this._configurationService.getValue(e.uri,t,"editor").wordBasedSuggestions;if(r&&_h(this._modelService,e.uri))return this._workerManager.withWorker().then(function(i){return i.textualSuggest(e.uri,t)})},n}(),DCe=function(n){pI(e,n);function e(t){var r=n.call(this)||this;r._modelService=t,r._editorWorkerClient=null,r._lastWorkerUsedTime=new Date().getTime();var i=r._register(new Mv);return i.cancelAndSet(function(){return r._checkStopIdleWorker()},Math.round(k8/2)),r._register(r._modelService.onModelRemoved(function(o){return r._checkStopEmptyWorker()})),r}return e.prototype.dispose=function(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),n.prototype.dispose.call(this)},e.prototype._checkStopEmptyWorker=function(){if(this._editorWorkerClient){var t=this._modelService.getModels();t.length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}},e.prototype._checkStopIdleWorker=function(){if(this._editorWorkerClient){var t=new Date().getTime()-this._lastWorkerUsedTime;t>k8&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}},e.prototype.withWorker=function(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new jG(this._modelService,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)},e}(te),LCe=function(n){pI(e,n);function e(t,r,i){var o=n.call(this)||this;if(o._syncedModels=Object.create(null),o._syncedModelsLastUsedTime=Object.create(null),o._proxy=t,o._modelService=r,!i){var s=new Mv;s.cancelAndSet(function(){return o._checkStopModelSync()},Math.round(L8/2)),o._register(s)}return o}return e.prototype.dispose=function(){for(var t in this._syncedModels)Ue(this._syncedModels[t]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),n.prototype.dispose.call(this)},e.prototype.ensureSyncedResources=function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r],s=o.toString();this._syncedModels[s]||this._beginModelSync(o),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}},e.prototype._checkStopModelSync=function(){var t=new Date().getTime(),r=[];for(var i in this._syncedModelsLastUsedTime){var o=t-this._syncedModelsLastUsedTime[i];o>L8&&r.push(i)}for(var s=0,a=r;s<a.length;s++){var u=a[s];this._stopModelSync(u)}},e.prototype._beginModelSync=function(t){var r=this,i=this._modelService.getModel(t);if(i&&!i.isTooLargeForSyncing()){var o=t.toString();this._proxy.acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});var s=new De;s.add(i.onDidChangeContent(function(a){r._proxy.acceptModelChanged(o.toString(),a)})),s.add(i.onWillDispose(function(){r._stopModelSync(o)})),s.add(en(function(){r._proxy.acceptRemovedModel(o)})),this._syncedModels[o]=s}},e.prototype._stopModelSync=function(t){var r=this._syncedModels[t];delete this._syncedModels[t],delete this._syncedModelsLastUsedTime[t],Ue(r)},e}(te),T8=function(){function n(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}return n.prototype.dispose=function(){this._instance.dispose()},n.prototype.getProxyObject=function(){return this._proxyObj},n}(),uT=function(){function n(e){this._workerClient=e}return n.prototype.fhr=function(e,t){return this._workerClient.fhr(e,t)},n}(),jG=function(n){pI(e,n);function e(t,r){var i=n.call(this)||this;return i._modelService=t,i._workerFactory=new jwe(r),i._worker=null,i._modelManager=null,i}return e.prototype.fhr=function(t,r){throw new Error("Not implemented!")},e.prototype._getOrCreateWorker=function(){if(!this._worker)try{this._worker=this._register(new Wwe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new uT(this)))}catch(t){FO(t),this._worker=new T8(new D8(new uT(this),null))}return this._worker},e.prototype._getProxy=function(){var t=this;return this._getOrCreateWorker().getProxyObject().then(void 0,function(r){return FO(r),t._worker=new T8(new D8(new uT(t),null)),t._getOrCreateWorker().getProxyObject()})},e.prototype._getOrCreateModelManager=function(t){return this._modelManager||(this._modelManager=this._register(new LCe(t,this._modelService,!1))),this._modelManager},e.prototype._withSyncedResources=function(t){var r=this;return this._getProxy().then(function(i){return r._getOrCreateModelManager(i).ensureSyncedResources(t),i})},e.prototype.computeDiff=function(t,r,i){return this._withSyncedResources([t,r]).then(function(o){return o.computeDiff(t.toString(),r.toString(),i)})},e.prototype.computeMoreMinimalEdits=function(t,r){return this._withSyncedResources([t]).then(function(i){return i.computeMoreMinimalEdits(t.toString(),r)})},e.prototype.computeLinks=function(t){return this._withSyncedResources([t]).then(function(r){return r.computeLinks(t.toString())})},e.prototype.textualSuggest=function(t,r){var i=this;return this._withSyncedResources([t]).then(function(o){var s=i._modelService.getModel(t);if(!s)return null;var a=gt.getWordDefinition(s.getLanguageIdentifier().id),u=a.source,l=Jk(a);return o.textualSuggest(t.toString(),r,u,l)})},e.prototype.computeWordRanges=function(t,r){var i=this;return this._withSyncedResources([t]).then(function(o){var s=i._modelService.getModel(t);if(!s)return Promise.resolve(null);var a=gt.getWordDefinition(s.getLanguageIdentifier().id),u=a.source,l=Jk(a);return o.computeWordRanges(t.toString(),r,u,l)})},e.prototype.navigateValueSet=function(t,r,i){var o=this;return this._withSyncedResources([t]).then(function(s){var a=o._modelService.getModel(t);if(!a)return null;var u=gt.getWordDefinition(a.getLanguageIdentifier().id),l=u.source,f=Jk(u);return s.navigateValueSet(t.toString(),r,i,l,f)})},e}(te),kCe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function TCe(n,e){return new NCe(n,e)}var NCe=function(n){kCe(e,n);function e(t,r){var i=n.call(this,t,r.label)||this;return i._foreignModuleId=r.moduleId,i._foreignModuleCreateData=r.createData||null,i._foreignModuleHost=r.host||null,i._foreignProxy=null,i}return e.prototype.fhr=function(t,r){if(!this._foreignModuleHost||typeof this._foreignModuleHost[t]!="function")return Promise.reject(new Error("Missing method "+t+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[t].apply(this._foreignModuleHost,r))}catch(i){return Promise.reject(i)}},e.prototype._getForeignProxy=function(){var t=this;return this._foreignProxy||(this._foreignProxy=this._getProxy().then(function(r){var i=t._foreignModuleHost?KP(t._foreignModuleHost):[];return r.loadForeignModule(t._foreignModuleId,t._foreignModuleCreateData,i).then(function(o){t._foreignModuleCreateData=null;for(var s=function(d,g){return r.fmr(d,g)},a=function(d,g){return function(){var v=Array.prototype.slice.call(arguments,0);return g(d,v)}},u={},l=0,f=o;l<f.length;l++){var h=f[l];u[h]=a(h,s)}return u})})),this._foreignProxy},e.prototype.getProxy=function(){return this._getForeignProxy()},e.prototype.withSyncedResources=function(t){var r=this;return this._withSyncedResources(t).then(function(i){return r.getProxy()})},e}(jG),wa=function(){function n(e,t){this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t}return n.prototype.equals=function(e){return e instanceof n?this.slicedEquals(e,0,this._tokensCount):!1},n.prototype.slicedEquals=function(e,t,r){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;for(var i=t<<1,o=i+(r<<1),s=i;s<o;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0},n.prototype.getLineContent=function(){return this._text},n.prototype.getCount=function(){return this._tokensCount},n.prototype.getStartOffset=function(e){return e>0?this._tokens[e-1<<1]:0},n.prototype.getLanguageId=function(e){var t=this._tokens[(e<<1)+1];return ga.getLanguageId(t)},n.prototype.getStandardTokenType=function(e){var t=this._tokens[(e<<1)+1];return ga.getTokenType(t)},n.prototype.getForeground=function(e){var t=this._tokens[(e<<1)+1];return ga.getForeground(t)},n.prototype.getClassName=function(e){var t=this._tokens[(e<<1)+1];return ga.getClassNameFromMetadata(t)},n.prototype.getInlineStyle=function(e,t){var r=this._tokens[(e<<1)+1];return ga.getInlineStyleFromMetadata(r,t)},n.prototype.getEndOffset=function(e){return this._tokens[e<<1]},n.prototype.findTokenIndexAtOffset=function(e){return n.findIndexInTokensArray(this._tokens,e)},n.prototype.inflate=function(){return this},n.prototype.sliceAndInflate=function(e,t,r){return new ACe(this,e,t,r)},n.convertToEndOffset=function(e,t){for(var r=e.length>>>1,i=r-1,o=0;o<i;o++)e[o<<1]=e[o+1<<1];e[i<<1]=t},n.findIndexInTokensArray=function(e,t){if(e.length<=2)return 0;for(var r=0,i=(e.length>>>1)-1;r<i;){var o=r+Math.floor((i-r)/2),s=e[o<<1];if(s===t)return o+1;s<t?r=o+1:s>t&&(i=o)}return r},n}(),ACe=function(){function n(e,t,r,i){this._source=e,this._startOffset=t,this._endOffset=r,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(var o=this._firstTokenIndex,s=e.getCount();o<s;o++){var a=e.getStartOffset(o);if(a>=r)break;this._tokensCount++}}return n.prototype.equals=function(e){return e instanceof n?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1},n.prototype.getCount=function(){return this._tokensCount},n.prototype.getForeground=function(e){return this._source.getForeground(this._firstTokenIndex+e)},n.prototype.getEndOffset=function(e){var t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset},n.prototype.getClassName=function(e){return this._source.getClassName(this._firstTokenIndex+e)},n.prototype.getInlineStyle=function(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)},n.prototype.findTokenIndexAtOffset=function(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex},n}(),Hy;typeof TextDecoder<"u"?Hy=function(n){return new OCe(n)}:Hy=function(n){return new RCe};var OCe=function(){function n(e){this._decoder=new TextDecoder("UTF-16LE"),this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}return n.prototype.reset=function(){this._completedStrings=null,this._bufferLength=0},n.prototype.build=function(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()},n.prototype._buildBuffer=function(){if(this._bufferLength===0)return"";var e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return this._decoder.decode(e)},n.prototype._flushBuffer=function(){var e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e},n.prototype.write1=function(e){var t=this._capacity-this._bufferLength;t<=1&&(t===0||ao(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e},n.prototype.appendASCII=function(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e},n.prototype.appendASCIIString=function(e){var t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(var r=0;r<t;r++)this._buffer[this._bufferLength++]=e.charCodeAt(r)},n}(),RCe=function(){function n(){this._pieces=[],this._piecesLen=0}return n.prototype.reset=function(){this._pieces=[],this._piecesLen=0},n.prototype.build=function(){return this._pieces.join("")},n.prototype.write1=function(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)},n.prototype.appendASCII=function(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)},n.prototype.appendASCIIString=function(e){this._pieces[this._piecesLen++]=e},n}(),Uy=function(){function n(e,t,r,i){this.startColumn=e,this.endColumn=t,this.className=r,this.type=i}return n._equals=function(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type},n.equalsArr=function(e,t){var r=e.length,i=t.length;if(r!==i)return!1;for(var o=0;o<r;o++)if(!n._equals(e[o],t[o]))return!1;return!0},n.filter=function(e,t,r,i){if(e.length===0)return[];for(var o=[],s=0,a=0,u=e.length;a<u;a++){var l=e[a],f=l.range;if(!(f.endLineNumber<t||f.startLineNumber>t)&&!(f.isEmpty()&&(l.type===0||l.type===3))){var h=f.startLineNumber===t?f.startColumn:r,d=f.endLineNumber===t?f.endColumn:i;o[s++]=new n(h,d,l.inlineClassName,l.type)}}return o},n.compare=function(e,t){return e.startColumn===t.startColumn?e.endColumn===t.endColumn?e.className<t.className?-1:e.className>t.className?1:0:e.endColumn-t.endColumn:e.startColumn-t.startColumn},n}(),N8=function(){function n(e,t,r){this.startOffset=e,this.endOffset=t,this.className=r}return n}(),MCe=function(){function n(){this.stopOffsets=[],this.classNames=[],this.count=0}return n.prototype.consumeLowerThan=function(e,t,r){for(;this.count>0&&this.stopOffsets[0]<e;){for(var i=0;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;r.push(new N8(t,this.stopOffsets[i],this.classNames.join(" "))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(r.push(new N8(t,e-1,this.classNames.join(" "))),t=e),t},n.prototype.insert=function(e,t){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t);else for(var r=0;r<this.count;r++)if(this.stopOffsets[r]>=e){this.stopOffsets.splice(r,0,e),this.classNames.splice(r,0,t);break}this.count++},n}(),PCe=function(){function n(){}return n.normalize=function(e,t){if(t.length===0)return[];for(var r=[],i=new MCe,o=0,s=0,a=t.length;s<a;s++){var u=t[s],l=u.startColumn,f=u.endColumn,h=u.className;if(l>1){var d=e.charCodeAt(l-2);ao(d)&&l--}if(f>1){var d=e.charCodeAt(f-2);ao(d)&&f--}var g=l-1,v=f-2;o=i.consumeLowerThan(g,o,r),i.count===0&&(o=g),i.insert(v,h)}return i.consumeLowerThan(1073741824,o,r),r},n}(),fo=function(){function n(e,t){this.endIndex=e,this.type=t}return n}(),FCe=function(){function n(e,t){this.startOffset=e,this.endOffset=t}return n.prototype.equals=function(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset},n}(),Pv=function(){function n(e,t,r,i,o,s,a,u,l,f,h,d,g,v,m,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=r,this.continuesWithWrappedLine=i,this.isBasicASCII=o,this.containsRTL=s,this.fauxIndentLength=a,this.lineTokens=u,this.lineDecorations=l,this.tabSize=f,this.spaceWidth=h,this.stopRenderingLineAfter=d,this.renderWhitespace=g==="all"?3:g==="boundary"?1:g==="selection"?2:0,this.renderControlCharacters=v,this.fontLigatures=m,this.selectionsOnLine=y&&y.sort(function(b,C){return b.startOffset<C.startOffset?-1:1})}return n.prototype.sameSelection=function(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(var t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0},n.prototype.equals=function(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.spaceWidth===e.spaceWidth&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Uy.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)},n}(),hc=function(){function n(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}return n.getPartIndex=function(e){return(e&4294901760)>>>16},n.getCharIndex=function(e){return(e&65535)>>>0},n.prototype.setPartData=function(e,t,r,i){var o=(t<<16|r<<0)>>>0;this._data[e]=o,this._absoluteOffsets[e]=i+r},n.prototype.getAbsoluteOffsets=function(){return this._absoluteOffsets},n.prototype.charOffsetToPartData=function(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]},n.prototype.partDataToCharOffset=function(e,t,r){if(this.length===0)return 0;for(var i=(e<<16|r<<0)>>>0,o=0,s=this.length-1;o+1<s;){var a=o+s>>>1,u=this._data[a];if(u===i)return a;u>i?s=a:o=a}if(o===s)return o;var l=this._data[o],f=this._data[s];if(l===i)return o;if(f===i)return s;var h=n.getPartIndex(l),d=n.getCharIndex(l),g=n.getPartIndex(f),v;h!==g?v=t:v=n.getCharIndex(f);var m=r-d,y=v-r;return m<=y?o:s},n}(),zG=function(){function n(e,t,r){this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=r}return n}();function DF(n,e){if(n.lineContent.length===0){var t=0,r="<span><span></span></span>";if(n.lineDecorations.length>0){for(var i=[],o=0,s=n.lineDecorations.length;o<s;o++){var a=n.lineDecorations[o];a.type===1&&(i.push(n.lineDecorations[o].className),t|=1),a.type===2&&(i.push(n.lineDecorations[o].className),t|=2)}t!==0&&(r='<span><span class="'+i.join(" ")+'"></span></span>')}return e.appendASCIIString(r),new zG(new hc(0,0),!1,t)}return qCe(VCe(n),e)}var BCe=function(){function n(e,t,r,i){this.characterMapping=e,this.html=t,this.containsRTL=r,this.containsForeignElements=i}return n}();function gI(n){var e=Hy(1e4),t=DF(n,e);return new BCe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}var WCe=function(){function n(e,t,r,i,o,s,a,u,l,f,h,d){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=r,this.len=i,this.isOverflowing=o,this.parts=s,this.containsForeignElements=a,this.tabSize=u,this.containsRTL=l,this.spaceWidth=f,this.renderWhitespace=h,this.renderControlCharacters=d}return n}();function VCe(n){var e=n.useMonospaceOptimizations,t=n.lineContent,r,i;n.stopRenderingLineAfter!==-1&&n.stopRenderingLineAfter<t.length?(r=!0,i=n.stopRenderingLineAfter):(r=!1,i=t.length);var o=HCe(n.lineTokens,n.fauxIndentLength,i);(n.renderWhitespace===3||n.renderWhitespace===1||n.renderWhitespace===2&&n.selectionsOnLine)&&(o=jCe(t,i,n.continuesWithWrappedLine,o,n.fauxIndentLength,n.tabSize,e,n.selectionsOnLine,n.renderWhitespace===1));var s=0;if(n.lineDecorations.length>0){for(var a=0,u=n.lineDecorations.length;a<u;a++){var l=n.lineDecorations[a];l.type===3||l.type===1?s|=1:l.type===2&&(s|=2)}o=zCe(t,i,o,n.lineDecorations)}return n.containsRTL||(o=UCe(t,o,!n.isBasicASCII||n.fontLigatures)),new WCe(e,n.canUseHalfwidthRightwardsArrow,t,i,r,o,s,n.tabSize,n.containsRTL,n.spaceWidth,n.renderWhitespace,n.renderControlCharacters)}function HCe(n,e,t){var r=[],i=0;e>0&&(r[i++]=new fo(e,""));for(var o=0,s=n.getCount();o<s;o++){var a=n.getEndOffset(o);if(!(a<=e)){var u=n.getClassName(o);if(a>=t){r[i++]=new fo(t,u);break}r[i++]=new fo(a,u)}}return r}function UCe(n,e,t){var r=0,i=[],o=0;if(t)for(var s=0,a=e.length;s<a;s++){var u=e[s],l=u.endIndex;if(r+50<l){for(var f=u.type,h=-1,d=r,g=r;g<l;g++)n.charCodeAt(g)===32&&(h=g),h!==-1&&g-d>=50&&(i[o++]=new fo(h+1,f),d=h+1,h=-1);d!==l&&(i[o++]=new fo(l,f))}else i[o++]=u;r=l}else for(var s=0,a=e.length;s<a;s++){var u=e[s],l=u.endIndex,v=l-r;if(v>50){for(var f=u.type,m=Math.ceil(v/50),g=1;g<m;g++){var y=r+g*50;i[o++]=new fo(y,f)}i[o++]=new fo(l,f)}else i[o++]=u;r=l}return i}function jCe(n,e,t,r,i,o,s,a,u){var l=[],f=0,h=0,d=r[h].type,g=r[h].endIndex,v=r.length,m=Mo(n),y;m===-1?(m=e,y=e):y=gf(n);for(var b=0,C=0;C<i;C++){var E=n.charCodeAt(C);E===9?b=o:Sl(E)?b+=2:b++}b=b%o;for(var D=!1,k=0,I=a&&a[k],C=i;C<e;C++){var E=n.charCodeAt(C);I&&C>=I.endOffset&&(k++,I=a&&a[k]);var T=void 0;if(C<m||C>y)T=!0;else if(E===9)T=!0;else if(E===32)if(u)if(D)T=!0;else{var A=C+1<e?n.charCodeAt(C+1):0;T=A===32||A===9}else T=!0;else T=!1;T&&a&&(T=!!I&&I.startOffset<=C&&I.endOffset>C),D?(!T||!s&&b>=o)&&(l[f++]=new fo(C,"vs-whitespace"),b=b%o):(C===g||T&&C>i)&&(l[f++]=new fo(C,d),b=b%o),E===9?b=o:Sl(E)?b+=2:b++,D=T,C===g&&(h++,h<v&&(d=r[h].type,g=r[h].endIndex))}var M=!1;if(D)if(t&&u){var L=e>0?n.charCodeAt(e-1):0,F=e>1?n.charCodeAt(e-2):0,W=L===32&&F!==32&&F!==9;W||(M=!0)}else M=!0;return l[f++]=new fo(e,M?"vs-whitespace":d),l}function zCe(n,e,t,r){r.sort(Uy.compare);for(var i=PCe.normalize(n,r),o=i.length,s=0,a=[],u=0,l=0,f=0,h=t.length;f<h;f++){for(var d=t[f],g=d.endIndex,v=d.type;s<o&&i[s].startOffset<g;){var m=i[s];if(m.startOffset>l&&(l=m.startOffset,a[u++]=new fo(l,v)),m.endOffset+1<=g)l=m.endOffset+1,a[u++]=new fo(l,v+" "+m.className),s++;else{l=g,a[u++]=new fo(l,v+" "+m.className);break}}g>l&&(l=g,a[u++]=new fo(l,v))}var y=t[t.length-1].endIndex;if(s<o&&i[s].startOffset===y){for(var b=[];s<o&&i[s].startOffset===y;)b.push(i[s].className),s++;a[u++]=new fo(l,b.join(" "))}return a}function qCe(n,e){var t=n.fontIsMonospace,r=n.canUseHalfwidthRightwardsArrow,i=n.containsForeignElements,o=n.lineContent,s=n.len,a=n.isOverflowing,u=n.parts,l=n.tabSize,f=n.containsRTL,h=n.spaceWidth,d=n.renderWhitespace,g=n.renderControlCharacters,v=new hc(s+1,u.length),m=0,y=0,b=0,C=0,E=0;e.appendASCIIString("<span>");for(var D=0,k=u.length;D<k;D++){E+=C;var I=u[D],T=I.endIndex,A=I.type,M=d!==0&&A.indexOf("vs-whitespace")>=0;if(b=0,e.appendASCIIString('<span class="'),e.appendASCIIString(A),e.appendASCII(34),M){for(var L=0,F=m,W=y;F<T;F++){var z=o.charCodeAt(F);if(z===9){var K=l-(F+W)%l;W+=K-1,L+=K}else L++}if(!t){var X=A==="vs-whitespace";(X||!i)&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(h*L)),e.appendASCIIString('px"'))}for(e.appendASCII(62);m<T;m++){v.setPartData(m,D,b,E);var z=o.charCodeAt(m);if(z===9){var K=l-(m+y)%l;for(y+=K-1,b+=K-1,K>0&&(!r||K>1?e.write1(8594):e.write1(65515),K--);K>0;)e.write1(160),K--}else e.write1(183);b++}C=L}else{var L=0;for(f&&e.appendASCIIString(' dir="ltr"'),e.appendASCII(62);m<T;m++){v.setPartData(m,D,b,E);var z=o.charCodeAt(m);switch(z){case 9:var K=l-(m+y)%l;for(y+=K-1,b+=K-1;K>0;)e.write1(160),L++,K--;break;case 32:e.write1(160),L++;break;case 60:e.appendASCIIString("&lt;"),L++;break;case 62:e.appendASCIIString("&gt;"),L++;break;case 38:e.appendASCIIString("&amp;"),L++;break;case 0:e.appendASCIIString("&#00;"),L++;break;case 65279:case 8232:e.write1(65533),L++;break;default:Sl(z)&&y++,g&&z<32?(e.write1(9216+z),L++):(e.write1(z),L++)}b++}C=L}e.appendASCIIString("</span>")}return v.setPartData(s,u.length-1,b,E),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new zG(v,f,i)}var A8=function(){function n(e,t,r,i){this.top=e|0,this.left=t|0,this.width=r|0,this.height=i|0}return n}(),$Ce=function(){function n(e,t){this.tabSize=e,this.data=t}return n}(),LF=function(){function n(e,t,r,i,o){this.content=e,this.continuesWithWrappedLine=t,this.minColumn=r,this.maxColumn=i,this.tokens=o}return n}(),ka=function(){function n(e,t,r,i,o,s,a,u,l){this.minColumn=e,this.maxColumn=t,this.content=r,this.continuesWithWrappedLine=i,this.isBasicASCII=n.isBasicASCII(r,s),this.containsRTL=n.containsRTL(r,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=u,this.tabSize=l}return n.isBasicASCII=function(e,t){return t?xG(e):!0},n.containsRTL=function(e,t,r){return!t&&r?lF(e):!1},n}(),QC=function(){function n(e,t,r){this.range=e,this.inlineClassName=t,this.type=r}return n}(),KCe=function(){function n(e,t){this.range=e,this.options=t}return n}();function GCe(n){return Array.isArray(n)}function YCe(n){return!GCe(n)}function qG(n){return typeof n=="string"}function O8(n){return!qG(n)}function Yp(n){return!n}function Wc(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function R8(n){return n.replace(/[&<>'"_]/g,"-")}function ZCe(n,e){console.log(n.languageId+": "+e)}function Vt(n,e){return new Error(n.languageId+": "+e)}function vc(n,e,t,r,i){var o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,s=null;return e.replace(o,function(a,u,l,f,h,d,g,v,m){return Yp(l)?Yp(f)?!Yp(h)&&h<r.length?Wc(n,r[h]):!Yp(g)&&n&&typeof n[g]=="string"?n[g]:(s===null&&(s=i.split("."),s.unshift(i)),!Yp(d)&&d<s.length?Wc(n,s[d]):""):Wc(n,t):"$"})}function Zw(n,e){for(var t=e;t&&t.length>0;){var r=n.tokenizer[t];if(r)return r;var i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}function XCe(n,e){for(var t=e;t&&t.length>0;){var r=n.stateNames[t];if(r)return!0;var i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}var $G=5,VO=function(){function n(e){this._maxCacheDepth=e,this._entries=Object.create(null)}return n.create=function(e,t){return this._INSTANCE.create(e,t)},n.prototype.create=function(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new JC(e,t);var r=JC.getStackElementId(e);r.length>0&&(r+="|"),r+=t;var i=this._entries[r];return i||(i=new JC(e,t),this._entries[r]=i,i)},n._INSTANCE=new n($G),n}(),JC=function(){function n(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}return n.getStackElementId=function(e){for(var t="";e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t},n._equals=function(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null},n.prototype.equals=function(e){return n._equals(this,e)},n.prototype.push=function(e){return VO.create(this,e)},n.prototype.pop=function(){return this.parent},n.prototype.popall=function(){for(var e=this;e.parent;)e=e.parent;return e},n.prototype.switchTo=function(e){return VO.create(this.parent,e)},n}(),lT=function(){function n(e,t){this.modeId=e,this.state=t}return n.prototype.equals=function(e){return this.modeId===e.modeId&&this.state.equals(e.state)},n.prototype.clone=function(){var e=this.state.clone();return e===this.state?this:new n(this.modeId,this.state)},n}(),Zp=function(){function n(e){this._maxCacheDepth=e,this._entries=Object.create(null)}return n.create=function(e,t){return this._INSTANCE.create(e,t)},n.prototype.create=function(e,t){if(t!==null)return new cT(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new cT(e,t);var r=JC.getStackElementId(e),i=this._entries[r];return i||(i=new cT(e,null),this._entries[r]=i,i)},n._INSTANCE=new n($G),n}(),cT=function(){function n(e,t){this.stack=e,this.embeddedModeData=t}return n.prototype.clone=function(){var e=this.embeddedModeData?this.embeddedModeData.clone():null;return e===this.embeddedModeData?this:Zp.create(this.stack,this.embeddedModeData)},n.prototype.equals=function(e){return!(e instanceof n)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)},n}(),QCe=function(){function n(){this._tokens=[],this._language=null,this._lastTokenType=null,this._lastTokenLanguage=null}return n.prototype.enterMode=function(e,t){this._language=t},n.prototype.emit=function(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._language||(this._lastTokenType=t,this._lastTokenLanguage=this._language,this._tokens.push(new rI(e,t,this._language)))},n.prototype.nestedModeTokenize=function(e,t,r){var i=t.modeId,o=t.state,s=mn.get(i);if(!s)return this.enterMode(r,i),this.emit(r,""),o;var a=s.tokenize(e,o,r);return this._tokens=this._tokens.concat(a.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._language=null,a.endState},n.prototype.finalize=function(e){return new QP(this._tokens,e)},n}(),JCe=function(){function n(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}return n.prototype.enterMode=function(e,t){this._currentLanguageId=this._modeService.getLanguageIdentifier(t).id},n.prototype.emit=function(e,t){var r=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==r&&(this._lastTokenMetadata=r,this._tokens.push(e),this._tokens.push(r))},n._merge=function(e,t,r){var i=e!==null?e.length:0,o=t.length,s=r!==null?r.length:0;if(i===0&&o===0&&s===0)return new Uint32Array(0);if(i===0&&o===0)return r;if(o===0&&s===0)return e;var a=new Uint32Array(i+o+s);e!==null&&a.set(e);for(var u=0;u<o;u++)a[i+u]=t[u];return r!==null&&a.set(r,i+o),a},n.prototype.nestedModeTokenize=function(e,t,r){var i=t.modeId,o=t.state,s=mn.get(i);if(!s)return this.enterMode(r,i),this.emit(r,""),o;var a=s.tokenize2(e,o,r);return this._prependTokens=n._merge(this._prependTokens,this._tokens,a.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,a.endState},n.prototype.finalize=function(e){return new iI(n._merge(this._prependTokens,this._tokens,null),e)},n}(),KG=function(){function n(e,t,r,i){var o=this;this._modeService=e,this._standaloneThemeService=t,this._modeId=r,this._lexer=i,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);var s=!1;this._tokenizationRegistryListener=mn.onDidChange(function(a){if(!s){for(var u=!1,l=0,f=a.changedLanguages.length;l<f;l++){var h=a.changedLanguages[l];if(o._embeddedModes[h]){u=!0;break}}u&&(s=!0,mn.fire([o._modeId]),s=!1)}})}return n.prototype.dispose=function(){this._tokenizationRegistryListener.dispose()},n.prototype.getLoadStatus=function(){var e=[];for(var t in this._embeddedModes)if(this._embeddedModes.hasOwnProperty(t)){var r=mn.get(t);if(r){if(r instanceof n){var i=r.getLoadStatus();i.loaded===!1&&e.push(i.promise)}continue}var o=mn.getPromise(t);o&&e.push(o)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(function(s){})}},n.prototype.getInitialState=function(){var e=VO.create(null,this._lexer.start);return Zp.create(e,null)},n.prototype.tokenize=function(e,t,r){var i=new QCe,o=this._tokenize(e,t,r,i);return i.finalize(o)},n.prototype.tokenize2=function(e,t,r){var i=new JCe(this._modeService,this._standaloneThemeService.getTheme().tokenTheme),o=this._tokenize(e,t,r,i);return i.finalize(o)},n.prototype._tokenize=function(e,t,r,i){return t.embeddedModeData?this._nestedTokenize(e,t,r,i):this._myTokenize(e,t,r,i)},n.prototype._findLeavingNestedModeOffset=function(e,t){var r=this._lexer.tokenizer[t.stack.state];if(!r&&(r=Zw(this._lexer,t.stack.state),!r))throw Vt(this._lexer,"tokenizer state is not defined: "+t.stack.state);for(var i=-1,o=!1,s=0,a=r;s<a.length;s++){var u=a[s];if(!(!O8(u.action)||u.action.nextEmbedded!=="@pop")){o=!0;var l=u.regex,f=u.regex.source;f.substr(0,4)==="^(?:"&&f.substr(f.length-1,1)===")"&&(l=new RegExp(f.substr(4,f.length-5),l.ignoreCase?"i":""));var h=e.search(l);h!==-1&&(i===-1||h<i)&&(i=h)}}if(!o)throw Vt(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i},n.prototype._nestedTokenize=function(e,t,r,i){var o=this._findLeavingNestedModeOffset(e,t);if(o===-1){var s=i.nestedModeTokenize(e,t.embeddedModeData,r);return Zp.create(t.stack,new lT(t.embeddedModeData.modeId,s))}var a=e.substring(0,o);a.length>0&&i.nestedModeTokenize(a,t.embeddedModeData,r);var u=e.substring(o);return this._myTokenize(u,t,r+o,i)},n.prototype._safeRuleName=function(e){return e?e.name:"(unknown)"},n.prototype._myTokenize=function(e,t,r,i){i.enterMode(r,this._modeId);for(var o=e.length,s=t.embeddedModeData,a=t.stack,u=0,l=null,f=!0;f||u<o;){var h=u,d=a.depth,g=l?l.groups.length:0,v=a.state,m=null,y=null,b=null,C=null,E=null;if(l){m=l.matches;var D=l.groups.shift();y=D.matched,b=D.action,C=l.rule,l.groups.length===0&&(l=null)}else{if(!f&&u>=o)break;f=!1;var k=this._lexer.tokenizer[v];if(!k&&(k=Zw(this._lexer,v),!k))throw Vt(this._lexer,"tokenizer state is not defined: "+v);for(var I=e.substr(u),T=0,A=k;T<A.length;T++){var M=A[T];if((u===0||!M.matchOnlyAtLineStart)&&(m=I.match(M.regex),m)){y=m[0],b=M.action;break}}}if(m||(m=[""],y=""),b||(u<o&&(m=[e.charAt(u)],y=m[0]),b=this._lexer.defaultToken),y===null)break;for(u+=y.length;YCe(b)&&O8(b)&&b.test;)b=b.test(y,m,v,u===o);var L=null;if(typeof b=="string"||Array.isArray(b))L=b;else if(b.group)L=b.group;else if(b.token!==null&&b.token!==void 0){if(b.tokenSubst?L=vc(this._lexer,b.token,y,m,v):L=b.token,b.nextEmbedded)if(b.nextEmbedded==="@pop"){if(!s)throw Vt(this._lexer,"cannot pop embedded mode if not inside one");s=null}else{if(s)throw Vt(this._lexer,"cannot enter embedded mode from within an embedded mode");E=vc(this._lexer,b.nextEmbedded,y,m,v)}if(b.goBack&&(u=Math.max(0,u-b.goBack)),b.switchTo&&typeof b.switchTo=="string"){var F=vc(this._lexer,b.switchTo,y,m,v);if(F[0]==="@"&&(F=F.substr(1)),Zw(this._lexer,F))a=a.switchTo(F);else throw Vt(this._lexer,"trying to switch to a state '"+F+"' that is undefined in rule: "+this._safeRuleName(C))}else{if(b.transform&&typeof b.transform=="function")throw Vt(this._lexer,"action.transform not supported");if(b.next)if(b.next==="@push"){if(a.depth>=this._lexer.maxStack)throw Vt(this._lexer,"maximum tokenizer stack size reached: ["+a.state+","+a.parent.state+",...]");a=a.push(v)}else if(b.next==="@pop"){if(a.depth<=1)throw Vt(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(C));a=a.pop()}else if(b.next==="@popall")a=a.popall();else{var F=vc(this._lexer,b.next,y,m,v);if(F[0]==="@"&&(F=F.substr(1)),Zw(this._lexer,F))a=a.push(F);else throw Vt(this._lexer,"trying to set a next state '"+F+"' that is undefined in rule: "+this._safeRuleName(C))}}b.log&&typeof b.log=="string"&&ZCe(this._lexer,this._lexer.languageId+": "+vc(this._lexer,b.log,y,m,v))}if(L===null)throw Vt(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(C));if(Array.isArray(L)){if(l&&l.groups.length>0)throw Vt(this._lexer,"groups cannot be nested: "+this._safeRuleName(C));if(m.length!==L.length+1)throw Vt(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(C));for(var W=0,z=1;z<m.length;z++)W+=m[z].length;if(W!==y.length)throw Vt(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(C));l={rule:C,matches:m,groups:[]};for(var z=0;z<L.length;z++)l.groups[z]={action:L[z],matched:m[z+1]};u-=y.length;continue}else{if(L==="@rematch"&&(u-=y.length,y="",m=null,L=""),y.length===0){if(o===0||d!==a.depth||v!==a.state||(l?l.groups.length:0)!==g)continue;throw Vt(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(C))}var K=null;if(qG(L)&&L.indexOf("@brackets")===0){var X=L.substr(9),se=e1e(this._lexer,y);if(!se)throw Vt(this._lexer,"@brackets token returned but no bracket defined as: "+y);K=R8(se.token+X)}else{var we=L===""?"":L+this._lexer.tokenPostfix;K=R8(we)}i.emit(h+r,K)}if(E!==null){var ae=this._modeService.getModeIdForLanguageName(E);ae&&(E=ae);var Dt=this._getNestedEmbeddedModeData(E);if(u<o){var I=e.substr(u);return this._nestedTokenize(I,Zp.create(a,Dt),r+u,i)}else return Zp.create(a,Dt)}}return Zp.create(a,s)},n.prototype._getNestedEmbeddedModeData=function(e){var t=this._locateMode(e);if(t){var r=mn.get(t);if(r)return new lT(t,r.getInitialState())}return new lT(t||wF,q0)},n.prototype._locateMode=function(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._modeId)return e;var t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t},n}();function e1e(n,e){if(!e)return null;e=Wc(n,e);for(var t=n.brackets,r=0,i=t;r<i.length;r++){var o=i[r];if(o.open===e)return{token:o.token,bracketType:1};if(o.close===e)return{token:o.token,bracketType:-1}}return null}function t1e(n,e,t,r){return new KG(n,e,t,r)}var kF=function(){function n(){}return n.colorizeElement=function(e,t,r,i){i=i||{};var o=i.theme||"vs",s=i.mimeType||r.getAttribute("lang")||r.getAttribute("data-lang");if(!s)return console.error("Mode not detected"),Promise.resolve();e.setTheme(o);var a=r.firstChild?r.firstChild.nodeValue:"";r.className+=" "+o;var u=function(l){r.innerHTML=l};return this.colorize(t,a||"",s,i).then(u,function(l){return console.error(l)})},n.colorize=function(e,t,r,i){var o=4;i&&typeof i.tabSize=="number"&&(o=i.tabSize),cF(t)&&(t=t.substr(1));var s=t.split(/\r\n|\r|\n/),a=e.getModeId(r);if(!a)return Promise.resolve(M8(s,o));e.triggerMode(a);var u=mn.get(a);if(u)return fT(s,o,u);var l=mn.getPromise(a);return l?new Promise(function(f,h){l.then(function(d){fT(s,o,d).then(f,h)},h)}):new Promise(function(f,h){var d=null,g=null,v=function(){d&&(d.dispose(),d=null),g&&(g.dispose(),g=null);var m=mn.get(a);if(m){fT(s,o,m).then(f,h);return}f(M8(s,o))};g=new Ho,g.cancelAndSet(v,500),d=mn.onDidChange(function(m){m.changedLanguages.indexOf(a)>=0&&v()})})},n.colorizeLine=function(e,t,r,i,o){o===void 0&&(o=4);var s=ka.isBasicASCII(e,t),a=ka.containsRTL(e,s,r),u=gI(new Pv(!1,!0,e,!1,s,a,0,i,[],o,0,-1,"none",!1,!1,null));return u.html},n.colorizeModelLine=function(e,t,r){r===void 0&&(r=4);var i=e.getLineContent(t);e.forceTokenization(t);var o=e.getLineTokens(t),s=o.inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),s,r)},n}();function fT(n,e,t){return new Promise(function(r,i){var o=function(){var s=n1e(n,e,t);if(t instanceof KG){var a=t.getLoadStatus();if(a.loaded===!1){a.promise.then(o,i);return}}r(s)};o()})}function M8(n,e){var t=[],r=16793600,i=new Uint32Array(2);i[0]=0,i[1]=r;for(var o=0,s=n.length;o<s;o++){var a=n[o];i[0]=a.length;var u=new wa(i,a),l=ka.isBasicASCII(a,!0),f=ka.containsRTL(a,l,!0),h=gI(new Pv(!1,!0,a,!1,l,f,0,u,[],e,0,-1,"none",!1,!1,null));t=t.concat(h.html),t.push("<br/>")}return t.join("")}function n1e(n,e,t){for(var r=[],i=t.getInitialState(),o=0,s=n.length;o<s;o++){var a=n[o],u=t.tokenize2(a,i,0);wa.convertToEndOffset(u.tokens,a.length);var l=new wa(u.tokens,a),f=ka.isBasicASCII(a,!0),h=ka.containsRTL(a,f,!0),d=gI(new Pv(!1,!0,a,!1,f,h,0,l.inflate(),[],e,0,-1,"none",!1,!1,null));r=r.concat(d.html),r.push("<br/>"),i=u.endState}return r.join("")}var jy;(function(n){n[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(jy||(jy={}));(function(n){var e="error",t="warning",r="warn",i="info",o=Object.create(null);o[n.Error]=S("sev.error","Error"),o[n.Warning]=S("sev.warning","Warning"),o[n.Info]=S("sev.info","Info");function s(a){return a?Ec(e,a)?n.Error:Ec(t,a)||Ec(r,a)?n.Warning:Ec(i,a)?n.Info:n.Ignore:n.Ignore}n.fromValue=s})(jy||(jy={}));const Rn=jy;function Su(n){return n&&typeof n.getEditorType=="function"?n.getEditorType()===uI.ICodeEditor:!1}var r1e=function(){function n(){this.data=new Map}return n.prototype.add=function(e,t){Cg(bu(e)),Cg(di(t)),Cg(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)},n.prototype.as=function(e){return this.data.get(e)||null},n}(),qi=new r1e,TF={JSONContribution:"base.contributions.json"};function i1e(n){return n.length>0&&n.charAt(n.length-1)==="#"?n.substring(0,n.length-1):n}var o1e=function(){function n(){this._onDidChangeSchema=new j,this.schemasById={}}return n.prototype.registerSchema=function(e,t){this.schemasById[i1e(e)]=t,this._onDidChangeSchema.fire(e)},n.prototype.notifySchemaChanged=function(e){this._onDidChangeSchema.fire(e)},n}(),s1e=new o1e;qi.add(TF.JSONContribution,s1e);var Fv={Configuration:"base.contributions.configuration"},Xw={properties:{},patternProperties:{}},hT={properties:{},patternProperties:{}},dT={properties:{},patternProperties:{}},pT={properties:{},patternProperties:{}},gT={properties:{},patternProperties:{}},vT={properties:{},patternProperties:{}},mT="vscode://schemas/settings/editor",P8=qi.as(TF.JSONContribution),a1e=function(){function n(){this.overrideIdentifiers=[],this._onDidSchemaChange=new j,this._onDidUpdateConfiguration=new j,this.defaultOverridesConfigurationNode={id:"defaultOverrides",title:S("defaultConfigurations.title","Default Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultOverridesConfigurationNode],this.editorConfigurationSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowsTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},this.computeOverridePropertyPattern(),P8.registerSchema(mT,this.editorConfigurationSchema)}return n.prototype.registerConfiguration=function(e,t){t===void 0&&(t=!0),this.registerConfigurations([e],t)},n.prototype.registerConfigurations=function(e,t){var r=this;t===void 0&&(t=!0);var i=[];e.forEach(function(o){i.push.apply(i,r.validateAndRegisterProperties(o,t)),r.configurationContributors.push(o),r.registerJSONConfiguration(o),r.updateSchemaForOverrideSettingsConfiguration(o)}),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)},n.prototype.registerOverrideIdentifiers=function(e){var t;(t=this.overrideIdentifiers).push.apply(t,e),this.updateOverridePropertyPatternKey()},n.prototype.validateAndRegisterProperties=function(e,t,r,i){t===void 0&&(t=!0),r===void 0&&(r=3),i===void 0&&(i=!1),r=Pc(e.scope)?r:e.scope,i=e.overridable||i;var o=[],s=e.properties;if(s)for(var a in s){var u=void 0;if(t&&(u=f1e(a))){console.warn(u),delete s[a];continue}var l=s[a],f=l.default;if(Mi(f)&&(l.default=c1e(l.type)),i&&(l.overridable=!0),NF.test(a)?l.scope=void 0:l.scope=Pc(l.scope)?r:l.scope,s[a].hasOwnProperty("included")&&!s[a].included){this.excludedConfigurationProperties[a]=s[a],delete s[a];continue}else this.configurationProperties[a]=s[a];o.push(a)}var h=e.allOf;if(h)for(var d=0,g=h;d<g.length;d++){var v=g[d];o.push.apply(o,this.validateAndRegisterProperties(v,t,r,i))}return o},n.prototype.getConfigurationProperties=function(){return this.configurationProperties},n.prototype.registerJSONConfiguration=function(e){function t(r){var i=r.properties;if(i)for(var o in i)switch(Xw.properties[o]=i[o],i[o].scope){case 1:hT.properties[o]=i[o];break;case 2:dT.properties[o]=i[o];break;case 5:pT.properties[o]=i[o];break;case 3:gT.properties[o]=i[o];break;case 4:vT.properties[o]=i[o];break}var s=r.allOf;s&&s.forEach(t)}t(e)},n.prototype.updateSchemaForOverrideSettingsConfiguration=function(e){e.id!==u1e&&(this.update(e),P8.registerSchema(mT,this.editorConfigurationSchema))},n.prototype.updateOverridePropertyPatternKey=function(){var e=Xw.patternProperties[this.overridePropertyPattern];e||(e={type:"object",description:S("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:"Unknown Identifier. Use language identifiers",$ref:mT}),delete Xw.patternProperties[this.overridePropertyPattern],delete hT.patternProperties[this.overridePropertyPattern],delete dT.patternProperties[this.overridePropertyPattern],delete pT.patternProperties[this.overridePropertyPattern],delete gT.patternProperties[this.overridePropertyPattern],delete vT.patternProperties[this.overridePropertyPattern],this.computeOverridePropertyPattern(),Xw.patternProperties[this.overridePropertyPattern]=e,hT.patternProperties[this.overridePropertyPattern]=e,dT.patternProperties[this.overridePropertyPattern]=e,pT.patternProperties[this.overridePropertyPattern]=e,gT.patternProperties[this.overridePropertyPattern]=e,vT.patternProperties[this.overridePropertyPattern]=e,this._onDidSchemaChange.fire()},n.prototype.update=function(e){var t=this,r=e.properties;if(r)for(var i in r)r[i].overridable&&(this.editorConfigurationSchema.properties[i]=this.getConfigurationProperties()[i]);var o=e.allOf;o&&o.forEach(function(s){return t.update(s)})},n.prototype.computeOverridePropertyPattern=function(){this.overridePropertyPattern=this.overrideIdentifiers.length?l1e.replace("${0}",this.overrideIdentifiers.map(function(e){return sF(e,!1).source}).join("|")):GG},n}(),u1e="override",GG="\\[.*\\]$",l1e="\\[(${0})\\]$",NF=new RegExp(GG);function c1e(n){var e=Array.isArray(n)?n[0]:n;switch(e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var YG=new a1e;qi.add(Fv.Configuration,YG);function f1e(n){return NF.test(n)?S("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",n):YG.getConfigurationProperties()[n]!==void 0?S("config.property.duplicate","Cannot register '{0}'. This property is already registered.",n):null}var h1e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Se=Tu,Jm=Rh,e_=pa,oS=new(function(){function n(){this._tabFocus=!1,this._onDidChangeTabFocus=new j,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}return n.prototype.getTabFocusMode=function(){return this._tabFocus},n.prototype.setTabFocusMode=function(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))},n}()),d1e=Object.hasOwnProperty,p1e=function(n){h1e(e,n);function e(t,r){var i=n.call(this)||this;return i._onDidChange=i._register(new j),i.onDidChange=i._onDidChange.event,i.isSimpleWidget=t,i._rawOptions=_r({},r||{}),i._rawOptions.scrollbar=_r({},i._rawOptions.scrollbar||{}),i._rawOptions.minimap=_r({},i._rawOptions.minimap||{}),i._rawOptions.find=_r({},i._rawOptions.find||{}),i._rawOptions.hover=_r({},i._rawOptions.hover||{}),i._rawOptions.parameterHints=_r({},i._rawOptions.parameterHints||{}),i._validatedOptions=J5.validate(i._rawOptions,Se),i._isDominatedByLongLines=!1,i._lineNumbersDigitCount=1,i._register(Il.onDidChangeZoomLevel(function(o){return i._recomputeOptions()})),i._register(oS.onDidChangeTabFocus(function(o){return i._recomputeOptions()})),i}return e.prototype.observeReferenceElement=function(t){},e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype._recomputeOptions=function(){var t=this.editor,r=this._computeInternalOptions();t&&t.equals(r)||(this.editor=r,t&&this._onDidChange.fire(t.createChangeEvent(r)))},e.prototype.getRawOptions=function(){return this._rawOptions},e.prototype._computeInternalOptions=function(){var t=this._validatedOptions,r=this._getEnvConfiguration(),i=mF.createFromRawSettings(this._rawOptions,r.zoomLevel,this.isSimpleWidget),o={outerWidth:r.outerWidth,outerHeight:r.outerHeight,fontInfo:this.readConfiguration(i),extraEditorClassName:r.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:r.emptySelectionClipboard,pixelRatio:r.pixelRatio,tabFocusMode:oS.getTabFocusMode(),accessibilitySupport:r.accessibilitySupport};return d0e.createInternalEditorOptions(o,t)},e._primitiveArrayEquals=function(t,r){if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==r[i])return!1;return!0},e._subsetEquals=function(t,r){for(var i in r)if(d1e.call(r,i)){var o=r[i],s=t[i];if(s===o)continue;if(Array.isArray(s)&&Array.isArray(o)){if(!this._primitiveArrayEquals(s,o))return!1;continue}if(typeof s=="object"&&typeof o=="object"){if(!this._subsetEquals(s,o))return!1;continue}return!1}return!0},e.prototype.updateOptions=function(t){typeof t>"u"||e._subsetEquals(this._rawOptions,t)||(this._rawOptions=_r(this._rawOptions,t||{}),this._validatedOptions=J5.validate(this._rawOptions,Se),this._recomputeOptions())},e.prototype.setIsDominatedByLongLines=function(t){this._isDominatedByLongLines=t,this._recomputeOptions()},e.prototype.setMaxLineNumber=function(t){var r=e._digitCount(t);this._lineNumbersDigitCount!==r&&(this._lineNumbersDigitCount=r,this._recomputeOptions())},e._digitCount=function(t){for(var r=0;t;)t=Math.floor(t/10),r++;return r||1},e}(te),g1e=qi.as(Fv.Configuration),ZG={id:"editor",order:5,type:"object",title:S("editorConfigurationTitle","Editor"),overridable:!0,scope:4,properties:{"editor.fontFamily":{type:"string",default:Jm.fontFamily,description:S("fontFamily","Controls the font family.")},"editor.fontWeight":{type:"string",enum:["normal","bold","100","200","300","400","500","600","700","800","900"],default:Jm.fontWeight,description:S("fontWeight","Controls the font weight.")},"editor.fontSize":{type:"number",default:Jm.fontSize,description:S("fontSize","Controls the font size in pixels.")},"editor.lineHeight":{type:"number",default:Jm.lineHeight,description:S("lineHeight","Controls the line height. Use 0 to compute the line height from the font size.")},"editor.letterSpacing":{type:"number",default:Jm.letterSpacing,description:S("letterSpacing","Controls the letter spacing in pixels.")},"editor.lineNumbers":{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[S("lineNumbers.off","Line numbers are not rendered."),S("lineNumbers.on","Line numbers are rendered as absolute number."),S("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),S("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:S("lineNumbers","Controls the display of line numbers.")},"editor.cursorSurroundingLines":{type:"number",default:Se.viewInfo.cursorSurroundingLines,description:S("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or `scrollOffset` in some other editors.")},"editor.renderFinalNewline":{type:"boolean",default:Se.viewInfo.renderFinalNewline,description:S("renderFinalNewline","Render last line number when the file ends with a newline.")},"editor.rulers":{type:"array",items:{type:"number"},default:Se.viewInfo.rulers,description:S("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")},"editor.wordSeparators":{type:"string",default:Se.wordSeparators,description:S("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")},"editor.tabSize":{type:"number",default:e_.tabSize,minimum:1,markdownDescription:S("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:e_.insertSpaces,markdownDescription:S("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:e_.detectIndentation,markdownDescription:S("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.roundedSelection":{type:"boolean",default:Se.viewInfo.roundedSelection,description:S("roundedSelection","Controls whether selections should have rounded corners.")},"editor.scrollBeyondLastLine":{type:"boolean",default:Se.viewInfo.scrollBeyondLastLine,description:S("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")},"editor.scrollBeyondLastColumn":{type:"number",default:Se.viewInfo.scrollBeyondLastColumn,description:S("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")},"editor.smoothScrolling":{type:"boolean",default:Se.viewInfo.smoothScrolling,description:S("smoothScrolling","Controls whether the editor will scroll using an animation.")},"editor.minimap.enabled":{type:"boolean",default:Se.viewInfo.minimap.enabled,description:S("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:Se.viewInfo.minimap.side,description:S("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:Se.viewInfo.minimap.showSlider,description:S("minimap.showSlider","Controls whether the minimap slider is automatically hidden.")},"editor.minimap.renderCharacters":{type:"boolean",default:Se.viewInfo.minimap.renderCharacters,description:S("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:Se.viewInfo.minimap.maxColumn,description:S("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.hover.enabled":{type:"boolean",default:Se.contribInfo.hover.enabled,description:S("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:Se.contribInfo.hover.delay,description:S("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:Se.contribInfo.hover.sticky,description:S("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.find.seedSearchStringFromSelection":{type:"boolean",default:Se.contribInfo.find.seedSearchStringFromSelection,description:S("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"boolean",default:Se.contribInfo.find.autoFindInSelection,description:S("find.autoFindInSelection","Controls whether the find operation is carried out on selected text or the entire file in the editor.")},"editor.find.globalFindClipboard":{type:"boolean",default:Se.contribInfo.find.globalFindClipboard,description:S("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:ct},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:!0,description:S("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.wordWrap":{type:"string",enum:["off","on","wordWrapColumn","bounded"],markdownEnumDescriptions:[S("wordWrap.off","Lines will never wrap."),S("wordWrap.on","Lines will wrap at the viewport width."),S({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),S({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],default:Se.wordWrap,description:S({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")},"editor.wordWrapColumn":{type:"integer",default:Se.wordWrapColumn,minimum:1,markdownDescription:S({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")},"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[S("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),S("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),S("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),S("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],default:"same",description:S("wrappingIndent","Controls the indentation of wrapped lines.")},"editor.mouseWheelScrollSensitivity":{type:"number",default:Se.viewInfo.scrollbar.mouseWheelScrollSensitivity,markdownDescription:S("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},"editor.fastScrollSensitivity":{type:"number",default:Se.viewInfo.scrollbar.fastScrollSensitivity,markdownDescription:S("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")},"editor.multiCursorModifier":{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[S("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),S("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"alt",markdownDescription:S({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go To Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")},"editor.multiCursorMergeOverlapping":{type:"boolean",default:Se.multiCursorMergeOverlapping,description:S("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")},"editor.quickSuggestions":{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:!1,description:S("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:!1,description:S("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:!0,description:S("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:Se.contribInfo.quickSuggestions,description:S("quickSuggestions","Controls whether suggestions should automatically show up while typing.")},"editor.quickSuggestionsDelay":{type:"integer",default:Se.contribInfo.quickSuggestionsDelay,minimum:0,description:S("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")},"editor.parameterHints.enabled":{type:"boolean",default:Se.contribInfo.parameterHints.enabled,description:S("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:Se.contribInfo.parameterHints.cycle,description:S("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")},"editor.autoClosingBrackets":{type:"string",enum:["always","languageDefined","beforeWhitespace","never"],enumDescriptions:["",S("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),S("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],default:Se.autoClosingBrackets,description:S("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")},"editor.autoClosingQuotes":{type:"string",enum:["always","languageDefined","beforeWhitespace","never"],enumDescriptions:["",S("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),S("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],default:Se.autoClosingQuotes,description:S("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")},"editor.autoClosingOvertype":{type:"string",enum:["always","auto","never"],enumDescriptions:[S("editor.autoClosingOvertype.always","Always type over closing quotes or brackets."),S("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),S("editor.autoClosingOvertype.never","Never type over closing quotes or brackets.")],default:Se.autoClosingOvertype,description:S("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")},"editor.autoSurround":{type:"string",enum:["languageDefined","brackets","quotes","never"],enumDescriptions:[S("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),S("editor.autoSurround.brackets","Surround with brackets but not quotes."),S("editor.autoSurround.quotes","Surround with quotes but not brackets."),""],default:Se.autoSurround,description:S("autoSurround","Controls whether the editor should automatically surround selections.")},"editor.formatOnType":{type:"boolean",default:Se.contribInfo.formatOnType,description:S("formatOnType","Controls whether the editor should automatically format the line after typing.")},"editor.formatOnPaste":{type:"boolean",default:Se.contribInfo.formatOnPaste,description:S("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")},"editor.autoIndent":{type:"boolean",default:Se.autoIndent,description:S("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste or move lines. Extensions with indentation rules of the language must be available.")},"editor.suggestOnTriggerCharacters":{type:"boolean",default:Se.contribInfo.suggestOnTriggerCharacters,description:S("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")},"editor.acceptSuggestionOnEnter":{type:"string",enum:["on","smart","off"],default:Se.contribInfo.acceptSuggestionOnEnter,markdownEnumDescriptions:["",S("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:S("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")},"editor.acceptSuggestionOnCommitCharacter":{type:"boolean",default:Se.contribInfo.acceptSuggestionOnCommitCharacter,markdownDescription:S("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")},"editor.snippetSuggestions":{type:"string",enum:["top","bottom","inline","none"],enumDescriptions:[S("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),S("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),S("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),S("snippetSuggestions.none","Do not show snippet suggestions.")],default:Se.contribInfo.suggest.snippets,description:S("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")},"editor.emptySelectionClipboard":{type:"boolean",default:Se.emptySelectionClipboard,description:S("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")},"editor.copyWithSyntaxHighlighting":{type:"boolean",default:Se.copyWithSyntaxHighlighting,description:S("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")},"editor.wordBasedSuggestions":{type:"boolean",default:Se.contribInfo.wordBasedSuggestions,description:S("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.suggestSelection":{type:"string",enum:["first","recentlyUsed","recentlyUsedByPrefix"],markdownEnumDescriptions:[S("suggestSelection.first","Always select the first suggestion."),S("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),S("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],default:"recentlyUsed",description:S("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")},"editor.suggestFontSize":{type:"integer",default:0,minimum:0,markdownDescription:S("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")},"editor.suggestLineHeight":{type:"integer",default:0,minimum:0,markdownDescription:S("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used.")},"editor.tabCompletion":{type:"string",default:"off",enum:["on","off","onlySnippets"],enumDescriptions:[S("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),S("tabCompletion.off","Disable tab completions."),S("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:S("tabCompletion","Enables tab completions.")},"editor.suggest.filterGraceful":{type:"boolean",default:!0,description:S("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:!1,description:S("suggest.localityBonus","Controls whether sorting favours words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:!1,markdownDescription:S("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:!0,description:S("suggest.snippetsPreventQuickSuggestions","Control whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:Se.contribInfo.suggest.showIcons,description:S("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.maxVisibleSuggestions":{type:"number",default:Se.contribInfo.suggest.maxVisibleSuggestions,minimum:1,maximum:15,description:S("suggest.maxVisibleSuggestions","Controls how many suggestions IntelliSense will show before showing a scrollbar (maximum 15).")},"editor.suggest.filteredTypes":{type:"object",default:{keyword:!0,snippet:!0},markdownDescription:S("suggest.filtered","Controls whether some suggestion types should be filtered from IntelliSense. A list of suggestion types can be found here: https://code.visualstudio.com/docs/editor/intellisense#_types-of-completions."),properties:{method:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.method","When set to `false` IntelliSense never shows `method` suggestions.")},function:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.function","When set to `false` IntelliSense never shows `function` suggestions.")},constructor:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.constructor","When set to `false` IntelliSense never shows `constructor` suggestions.")},field:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.field","When set to `false` IntelliSense never shows `field` suggestions.")},variable:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.variable","When set to `false` IntelliSense never shows `variable` suggestions.")},class:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.class","When set to `false` IntelliSense never shows `class` suggestions.")},struct:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.struct","When set to `false` IntelliSense never shows `struct` suggestions.")},interface:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.interface","When set to `false` IntelliSense never shows `interface` suggestions.")},module:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.module","When set to `false` IntelliSense never shows `module` suggestions.")},property:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.property","When set to `false` IntelliSense never shows `property` suggestions.")},event:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.event","When set to `false` IntelliSense never shows `event` suggestions.")},operator:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.operator","When set to `false` IntelliSense never shows `operator` suggestions.")},unit:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.unit","When set to `false` IntelliSense never shows `unit` suggestions.")},value:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.value","When set to `false` IntelliSense never shows `value` suggestions.")},constant:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.constant","When set to `false` IntelliSense never shows `constant` suggestions.")},enum:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.enum","When set to `false` IntelliSense never shows `enum` suggestions.")},enumMember:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.enumMember","When set to `false` IntelliSense never shows `enumMember` suggestions.")},keyword:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.keyword","When set to `false` IntelliSense never shows `keyword` suggestions.")},text:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.text","When set to `false` IntelliSense never shows `text` suggestions.")},color:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.color","When set to `false` IntelliSense never shows `color` suggestions.")},file:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.file","When set to `false` IntelliSense never shows `file` suggestions.")},reference:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.reference","When set to `false` IntelliSense never shows `reference` suggestions.")},customcolor:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.customcolor","When set to `false` IntelliSense never shows `customcolor` suggestions.")},folder:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.folder","When set to `false` IntelliSense never shows `folder` suggestions.")},typeParameter:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.typeParameter","When set to `false` IntelliSense never shows `typeParameter` suggestions.")},snippet:{type:"boolean",default:!0,markdownDescription:S("suggest.filtered.snippet","When set to `false` IntelliSense never shows `snippet` suggestions.")}}},"editor.gotoLocation.multiple":{description:S("editor.gotoLocation.multiple","Controls the behavior of 'Go To' commands, like Go To Definition, when multiple target locations exist."),type:"string",enum:["peek","gotoAndPeek","goto"],default:Se.contribInfo.gotoLocation.multiple,enumDescriptions:[S("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),S("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),S("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},"editor.selectionHighlight":{type:"boolean",default:Se.contribInfo.selectionHighlight,description:S("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")},"editor.occurrencesHighlight":{type:"boolean",default:Se.contribInfo.occurrencesHighlight,description:S("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")},"editor.overviewRulerLanes":{type:"integer",default:3,description:S("overviewRulerLanes","Controls the number of decorations that can show up at the same position in the overview ruler.")},"editor.overviewRulerBorder":{type:"boolean",default:Se.viewInfo.overviewRulerBorder,description:S("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")},"editor.cursorBlinking":{type:"string",enum:["blink","smooth","phase","expand","solid"],default:a0e(),description:S("cursorBlinking","Control the cursor animation style.")},"editor.mouseWheelZoom":{type:"boolean",default:Se.viewInfo.mouseWheelZoom,markdownDescription:S("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")},"editor.cursorSmoothCaretAnimation":{type:"boolean",default:Se.viewInfo.cursorSmoothCaretAnimation,description:S("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")},"editor.cursorStyle":{type:"string",enum:["block","block-outline","line","line-thin","underline","underline-thin"],default:u0e(Se.viewInfo.cursorStyle),description:S("cursorStyle","Controls the cursor style.")},"editor.cursorWidth":{type:"integer",default:Se.viewInfo.cursorWidth,markdownDescription:S("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")},"editor.fontLigatures":{type:"boolean",default:Se.viewInfo.fontLigatures,description:S("fontLigatures","Enables/Disables font ligatures.")},"editor.hideCursorInOverviewRuler":{type:"boolean",default:Se.viewInfo.hideCursorInOverviewRuler,description:S("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")},"editor.renderWhitespace":{type:"string",enum:["none","boundary","selection","all"],enumDescriptions:["",S("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),S("renderWhitespace.selection","Render whitespace characters only on selected text."),""],default:Se.viewInfo.renderWhitespace,description:S("renderWhitespace","Controls how the editor should render whitespace characters.")},"editor.renderControlCharacters":{type:"boolean",default:Se.viewInfo.renderControlCharacters,description:S("renderControlCharacters","Controls whether the editor should render control characters.")},"editor.renderIndentGuides":{type:"boolean",default:Se.viewInfo.renderIndentGuides,description:S("renderIndentGuides","Controls whether the editor should render indent guides.")},"editor.highlightActiveIndentGuide":{type:"boolean",default:Se.viewInfo.highlightActiveIndentGuide,description:S("highlightActiveIndentGuide","Controls whether the editor should highlight the active indent guide.")},"editor.renderLineHighlight":{type:"string",enum:["none","gutter","line","all"],enumDescriptions:["","","",S("renderLineHighlight.all","Highlights both the gutter and the current line.")],default:Se.viewInfo.renderLineHighlight,description:S("renderLineHighlight","Controls how the editor should render the current line highlight.")},"editor.codeLens":{type:"boolean",default:Se.contribInfo.codeLens,description:S("codeLens","Controls whether the editor shows CodeLens.")},"editor.folding":{type:"boolean",default:Se.contribInfo.folding,description:S("folding","Controls whether the editor has code folding enabled.")},"editor.foldingStrategy":{type:"string",enum:["auto","indentation"],default:Se.contribInfo.foldingStrategy,markdownDescription:S("foldingStrategy","Controls the strategy for computing folding ranges. `auto` uses a language specific folding strategy, if available. `indentation` uses the indentation based folding strategy.")},"editor.showFoldingControls":{type:"string",enum:["always","mouseover"],default:Se.contribInfo.showFoldingControls,description:S("showFoldingControls","Controls whether the fold controls on the gutter are automatically hidden.")},"editor.matchBrackets":{type:"boolean",default:Se.contribInfo.matchBrackets,description:S("matchBrackets","Highlight matching brackets when one of them is selected.")},"editor.glyphMargin":{type:"boolean",default:Se.viewInfo.glyphMargin,description:S("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")},"editor.useTabStops":{type:"boolean",default:Se.useTabStops,description:S("useTabStops","Inserting and deleting whitespace follows tab stops.")},"editor.trimAutoWhitespace":{type:"boolean",default:e_.trimAutoWhitespace,description:S("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:S("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.dragAndDrop":{type:"boolean",default:Se.dragAndDrop,description:S("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")},"editor.accessibilitySupport":{type:"string",enum:["auto","on","off"],enumDescriptions:[S("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),S("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader."),S("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:Se.accessibilitySupport,description:S("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers.")},"editor.showUnused":{type:"boolean",default:Se.showUnused,description:S("showUnused","Controls fading out of unused code.")},"editor.links":{type:"boolean",default:Se.contribInfo.links,description:S("links","Controls whether the editor should detect links and make them clickable.")},"editor.colorDecorators":{type:"boolean",default:Se.contribInfo.colorDecorators,description:S("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")},"editor.lightbulb.enabled":{type:"boolean",default:Se.contribInfo.lightbulbEnabled,description:S("codeActions","Enables the code action lightbulb in the editor.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:S("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.codeActionsOnSave":{type:"object",properties:{"source.organizeImports":{type:"boolean",description:S("codeActionsOnSave.organizeImports","Controls whether organize imports action should be run on file save.")},"source.fixAll":{type:"boolean",description:S("codeActionsOnSave.fixAll","Controls whether auto fix action should be run on file save.")}},additionalProperties:{type:"boolean"},default:Se.contribInfo.codeActionsOnSave,description:S("codeActionsOnSave","Code action kinds to be run on save.")},"editor.codeActionsOnSaveTimeout":{type:"number",default:Se.contribInfo.codeActionsOnSaveTimeout,description:S("codeActionsOnSaveTimeout","Timeout in milliseconds after which the code actions that are run on save are cancelled.")},"editor.selectionClipboard":{type:"boolean",default:Se.contribInfo.selectionClipboard,description:S("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Rl},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:S("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:S("ignoreTrimWhitespace","Controls whether the diff editor shows changes in leading or trailing whitespace as diffs.")},"editor.largeFileOptimizations":{type:"boolean",default:e_.largeFileOptimizations,description:S("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:S("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")}}},Qw=null;function XG(){return Qw===null&&(Qw=Object.create(null),Object.keys(ZG.properties).forEach(function(n){Qw[n]=!0})),Qw}function v1e(n){var e=XG();return e["editor."+n]||!1}function m1e(n){var e=XG();return e["diffEditor."+n]||!1}g1e.registerConfiguration(ZG);var lr=function(){function n(){}return n.insert=function(e,t){return{range:new R(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}},n.delete=function(e){return{range:e,text:null}},n.replace=function(e,t){return{range:e,text:t}},n.replaceMove=function(e,t){return{range:e,text:t,forceMoveMarkers:!0}},n}(),Vr=xt("configurationService");function _1e(n,e){var t=Object.create(null);for(var r in n)AF(t,r,n[r],e);return t}function AF(n,e,t,r){for(var i=e.split("."),o=i.pop(),s=n,a=0;a<i.length;a++){var u=i[a],l=s[u];switch(typeof l){case"undefined":l=s[u]=Object.create(null);break;case"object":break;default:r("Ignoring "+e+" as "+i.slice(0,a+1).join(".")+" is "+JSON.stringify(l));return}s=l}typeof s=="object"?s[o]=t:r("Ignoring "+e+" as "+i.join(".")+" is "+JSON.stringify(s))}function y1e(n,e){var t=e.split(".");QG(n,t)}function QG(n,e){var t=e.shift();if(e.length===0){delete n[t];return}if(Object.keys(n).indexOf(t)!==-1){var r=n[t];typeof r=="object"&&!Array.isArray(r)&&(QG(r,e),Object.keys(r).length===0&&delete n[t])}}function b1e(n,e,t){function r(s,a){for(var u=s,l=0,f=a;l<f.length;l++){var h=f[l];if(typeof u!="object"||u===null)return;u=u[h]}return u}var i=e.split("."),o=r(n,i);return typeof o>"u"?t:o}function w1e(){var n=qi.as(Fv.Configuration).getConfigurationProperties();return Object.keys(n)}function C1e(){var n=Object.create(null),e=qi.as(Fv.Configuration).getConfigurationProperties();for(var t in e){var r=e[t].default;AF(n,t,r,function(i){return console.error("Conflict in default settings: "+i)})}return n}function S1e(n){return n.substring(1,n.length-1)}function E1e(n,e,t){var r=n.inspect(e),i=n.inspect(t);return typeof r.user<"u"||typeof r.workspace<"u"||typeof r.workspaceFolder<"u"?r.value:typeof i.user<"u"||typeof i.workspace<"u"||typeof i.workspaceFolder<"u"?i.value:r.default}var I1e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ag=function(){function n(e,t,r){e===void 0&&(e={}),t===void 0&&(t=[]),r===void 0&&(r=[]),this._contents=e,this._keys=t,this._overrides=r,this.isFrozen=!1}return Object.defineProperty(n.prototype,"contents",{get:function(){return this.checkAndFreeze(this._contents)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"overrides",{get:function(){return this.checkAndFreeze(this._overrides)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"keys",{get:function(){return this.checkAndFreeze(this._keys)},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0},n.prototype.getValue=function(e){return e?b1e(this.contents,e):this.contents},n.prototype.override=function(e){var t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;for(var r={},i=0,o=HK(Object.keys(this.contents).concat(Object.keys(t)));i<o.length;i++){var s=o[i],a=this.contents[s],u=t[s];u&&(typeof a=="object"&&typeof u=="object"?(a=tl(a),this.mergeContents(a,u)):a=u),r[s]=a}return new n(r)},n.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=tl(this.contents),i=tl(this.overrides),o=this.keys.slice(),s=0,a=e;s<a.length;s++){var u=a[s];this.mergeContents(r,u.contents);for(var l=function(b){var C=i.filter(function(E){return hf(E.identifiers,b.identifiers)})[0];C?f.mergeContents(C.contents,b.contents):i.push(tl(b))},f=this,h=0,d=u.overrides;h<d.length;h++){var g=d[h];l(g)}for(var v=0,m=u.keys;v<m.length;v++){var y=m[v];o.indexOf(y)===-1&&o.push(y)}}return new n(r,o,i)},n.prototype.freeze=function(){return this.isFrozen=!0,this},n.prototype.mergeContents=function(e,t){for(var r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];if(o in e&&di(e[o])&&di(t[o])){this.mergeContents(e[o],t[o]);continue}e[o]=tl(t[o])}},n.prototype.checkAndFreeze=function(e){return this.isFrozen&&!Object.isFrozen(e)?Xye(e):e},n.prototype.getContentsForOverrideIdentifer=function(e){for(var t=0,r=this.overrides;t<r.length;t++){var i=r[t];if(i.identifiers.indexOf(e)!==-1)return i.contents}return null},n.prototype.toJSON=function(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}},n.prototype.setValue=function(e,t){this.addKey(e),AF(this.contents,e,t,function(r){throw new Error(r)})},n.prototype.removeValue=function(e){this.removeKey(e)&&y1e(this.contents,e)},n.prototype.addKey=function(e){for(var t=this.keys.length,r=0;r<t;r++)e.indexOf(this.keys[r])===0&&(t=r);this.keys.splice(t,1,e)},n.prototype.removeKey=function(e){var t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1},n}(),x1e=function(n){I1e(e,n);function e(){for(var t=this,r=C1e(),i=w1e(),o=[],s=0,a=Object.keys(r);s<a.length;s++){var u=a[s];NF.test(u)&&o.push({identifiers:[S1e(u).trim()],contents:_1e(r[u],function(l){return console.error("Conflict in default settings file: "+l)})})}return t=n.call(this,r,i,o)||this,t}return e}(ag),D1e=function(){function n(e,t,r,i,o,s,a,u){r===void 0&&(r=new ag),i===void 0&&(i=new ag),o===void 0&&(o=new eT),s===void 0&&(s=new ag),a===void 0&&(a=new eT),u===void 0&&(u=!0),this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=r,this._workspaceConfiguration=i,this._folderConfigurations=o,this._memoryConfiguration=s,this._memoryConfigurationByResource=a,this._freeze=u,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new eT}return n.prototype.getValue=function(e,t,r){var i=this.getConsolidateConfigurationModel(t,r);return i.getValue(e)},n.prototype.updateValue=function(e,t,r){r===void 0&&(r={});var i;r.resource?(i=this._memoryConfigurationByResource.get(r.resource),i||(i=new ag,this._memoryConfigurationByResource.set(r.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),r.resource||(this._workspaceConsolidatedConfiguration=null)},n.prototype.inspect=function(e,t,r){var i=this.getConsolidateConfigurationModel(t,r),o=this.getFolderConfigurationModelForResource(t.resource,r),s=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration;return{default:t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),user:t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),userLocal:t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),userRemote:t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),workspace:r?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,workspaceFolder:o?t.overrideIdentifier?o.freeze().override(t.overrideIdentifier).getValue(e):o.freeze().getValue(e):void 0,memory:t.overrideIdentifier?s.override(t.overrideIdentifier).getValue(e):s.getValue(e),value:i.getValue(e)}},Object.defineProperty(n.prototype,"userConfiguration",{get:function(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"localUserConfiguration",{get:function(){return this._localUserConfiguration},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"remoteUserConfiguration",{get:function(){return this._remoteUserConfiguration},enumerable:!0,configurable:!0}),n.prototype.getConsolidateConfigurationModel=function(e,t){var r=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?r.override(e.overrideIdentifier):r},n.prototype.getConsolidatedConfigurationModelForResource=function(e,t){var r=e.resource,i=this.getWorkspaceConsolidatedConfiguration();if(t&&r){var o=t.getFolder(r);o&&(i=this.getFolderConsolidatedConfiguration(o.uri)||i);var s=this._memoryConfigurationByResource.get(r);s&&(i=i.merge(s))}return i},n.prototype.getWorkspaceConsolidatedConfiguration=function(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration},n.prototype.getFolderConsolidatedConfiguration=function(e){var t=this._foldersConsolidatedConfigurations.get(e);if(!t){var r=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=r.merge(i),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=r}return t},n.prototype.getFolderConfigurationModelForResource=function(e,t){if(t&&e){var r=t.getFolder(e);if(r)return Ug(this._folderConfigurations.get(r.uri))}return null},n}(),L1e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),k1e=function(n){L1e(e,n);function e(t,r,i,o){var s=n.call(this)||this;return s._contextKeyService=t,s._commandService=r,s._telemetryService=i,s._notificationService=o,s._onDidUpdateKeybindings=s._register(new j),s._currentChord=null,s._currentChordChecker=new Mv,s._currentChordStatusMessage=null,s}return Object.defineProperty(e.prototype,"onDidUpdateKeybindings",{get:function(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:We.None},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype.lookupKeybinding=function(t){var r=this._getResolver().lookupPrimaryKeybinding(t);if(r)return r.resolvedKeybinding},e.prototype.softDispatch=function(t,r){var i=this.resolveKeyboardEvent(t);if(i.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;var o=i.getDispatchParts()[0];if(o===null)return null;var s=this._contextKeyService.getContext(r),a=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(s,a,o)},e.prototype._enterChordMode=function(t,r){var i=this;this._currentChord={keypress:t,label:r},this._currentChordStatusMessage=this._notificationService.status(S("first.chord","({0}) was pressed. Waiting for second key of chord...",r));var o=Date.now();this._currentChordChecker.cancelAndSet(function(){if(!i._documentHasFocus()){i._leaveChordMode();return}Date.now()-o>5e3&&i._leaveChordMode()},500)},e.prototype._leaveChordMode=function(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null},e.prototype._dispatch=function(t,r){return this._doDispatch(this.resolveKeyboardEvent(t),r)},e.prototype._doDispatch=function(t,r){var i=this,o=!1;if(t.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;var s=t.getDispatchParts()[0];if(s===null)return o;var a=this._contextKeyService.getContext(r),u=this._currentChord?this._currentChord.keypress:null,l=t.getLabel(),f=this._getResolver().resolve(a,u,s);return f&&f.enterChord?(o=!0,this._enterChordMode(s,l),o):(this._currentChord&&(!f||!f.commandId)&&(this._notificationService.status(S("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),o=!0),this._leaveChordMode(),f&&f.commandId&&(f.bubble||(o=!0),typeof f.commandArgs>"u"?this._commandService.executeCommand(f.commandId).then(void 0,function(h){return i._notificationService.warn(h)}):this._commandService.executeCommand(f.commandId,f.commandArgs).then(void 0,function(h){return i._notificationService.warn(h)}),this._telemetryService.publicLog2("workbenchActionExecuted",{id:f.commandId,from:"keybinding"})),o)},e.prototype.mightProducePrintableCharacter=function(t){return t.ctrlKey||t.metaKey?!1:t.keyCode>=31&&t.keyCode<=56||t.keyCode>=21&&t.keyCode<=30},e}(te),T1e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_e=function(){function n(){}return n.has=function(e){return Gg.create(e)},n.equals=function(e,t){return UO.create(e,t)},n.regex=function(e,t){return F8.create(e,t)},n.not=function(e){return zy.create(e)},n.and=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return B8.create(e)},n.or=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qy.create(e)},n.deserialize=function(e,t){if(t===void 0&&(t=!1),!!e)return this._deserializeOrExpression(e,t)},n._deserializeOrExpression=function(e,t){var r=this,i=e.split("||");return qy.create(i.map(function(o){return r._deserializeAndExpression(o,t)}))},n._deserializeAndExpression=function(e,t){var r=this,i=e.split("&&");return B8.create(i.map(function(o){return r._deserializeOne(o,t)}))},n._deserializeOne=function(e,t){if(e=e.trim(),e.indexOf("!=")>=0){var r=e.split("!=");return JG.create(r[0].trim(),this._deserializeValue(r[1],t))}if(e.indexOf("==")>=0){var r=e.split("==");return UO.create(r[0].trim(),this._deserializeValue(r[1],t))}if(e.indexOf("=~")>=0){var r=e.split("=~");return F8.create(r[0].trim(),this._deserializeRegexValue(r[1],t))}return/^\!\s*/.test(e)?zy.create(e.substr(1).trim()):Gg.create(e)},n._deserializeValue=function(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;var r=/^'([^']*)'$/.exec(e);return r?r[1].trim():e},n._deserializeRegexValue=function(e,t){if(wG(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}var r=e.indexOf("/"),i=e.lastIndexOf("/");if(r===i||r<0){if(t)throw new Error("bad regexp-value '"+e+"', missing /-enclosure");return console.warn("bad regexp-value '"+e+"', missing /-enclosure"),null}var o=e.slice(r+1,i),s=e[i+1]==="i"?"i":"";try{return new RegExp(o,s)}catch(a){if(t)throw new Error("bad regexp-value '"+e+"', parse error: "+a);return console.warn("bad regexp-value '"+e+"', parse error: "+a),null}},n}();function HO(n,e){var t=n.getType(),r=e.getType();if(t!==r)return t-r;switch(t){case 1:return n.cmp(e);case 2:return n.cmp(e);case 3:return n.cmp(e);case 4:return n.cmp(e);case 6:return n.cmp(e);case 7:return n.cmp(e);case 5:return n.cmp(e);default:throw new Error("Unknown ContextKeyExpr!")}}var Gg=function(){function n(e){this.key=e}return n.create=function(e){return new n(e)},n.prototype.getType=function(){return 1},n.prototype.cmp=function(e){return this.key<e.key?-1:this.key>e.key?1:0},n.prototype.equals=function(e){return e instanceof n?this.key===e.key:!1},n.prototype.evaluate=function(e){return!!e.getValue(this.key)},n.prototype.keys=function(){return[this.key]},n.prototype.negate=function(){return zy.create(this.key)},n}(),UO=function(){function n(e,t){this.key=e,this.value=t}return n.create=function(e,t){return typeof t=="boolean"?t?Gg.create(e):zy.create(e):new n(e,t)},n.prototype.getType=function(){return 3},n.prototype.cmp=function(e){return this.key<e.key?-1:this.key>e.key?1:this.value<e.value?-1:this.value>e.value?1:0},n.prototype.equals=function(e){return e instanceof n?this.key===e.key&&this.value===e.value:!1},n.prototype.evaluate=function(e){return e.getValue(this.key)==this.value},n.prototype.keys=function(){return[this.key]},n.prototype.negate=function(){return JG.create(this.key,this.value)},n}(),JG=function(){function n(e,t){this.key=e,this.value=t}return n.create=function(e,t){return typeof t=="boolean"?t?zy.create(e):Gg.create(e):new n(e,t)},n.prototype.getType=function(){return 4},n.prototype.cmp=function(e){return this.key<e.key?-1:this.key>e.key?1:this.value<e.value?-1:this.value>e.value?1:0},n.prototype.equals=function(e){return e instanceof n?this.key===e.key&&this.value===e.value:!1},n.prototype.evaluate=function(e){return e.getValue(this.key)!=this.value},n.prototype.keys=function(){return[this.key]},n.prototype.negate=function(){return UO.create(this.key,this.value)},n}(),zy=function(){function n(e){this.key=e}return n.create=function(e){return new n(e)},n.prototype.getType=function(){return 2},n.prototype.cmp=function(e){return this.key<e.key?-1:this.key>e.key?1:0},n.prototype.equals=function(e){return e instanceof n?this.key===e.key:!1},n.prototype.evaluate=function(e){return!e.getValue(this.key)},n.prototype.keys=function(){return[this.key]},n.prototype.negate=function(){return Gg.create(this.key)},n}(),F8=function(){function n(e,t){this.key=e,this.regexp=t}return n.create=function(e,t){return new n(e,t)},n.prototype.getType=function(){return 6},n.prototype.cmp=function(e){if(this.key<e.key)return-1;if(this.key>e.key)return 1;var t=this.regexp?this.regexp.source:"",r=e.regexp?e.regexp.source:"";return t<r?-1:t>r?1:0},n.prototype.equals=function(e){if(e instanceof n){var t=this.regexp?this.regexp.source:"",r=e.regexp?e.regexp.source:"";return this.key===e.key&&t===r}return!1},n.prototype.evaluate=function(e){var t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1},n.prototype.keys=function(){return[this.key]},n.prototype.negate=function(){return N1e.create(this)},n}(),N1e=function(){function n(e){this._actual=e}return n.create=function(e){return new n(e)},n.prototype.getType=function(){return 7},n.prototype.cmp=function(e){return this._actual.cmp(e._actual)},n.prototype.equals=function(e){return e instanceof n?this._actual.equals(e._actual):!1},n.prototype.evaluate=function(e){return!this._actual.evaluate(e)},n.prototype.keys=function(){return this._actual.keys()},n.prototype.negate=function(){return this._actual},n}(),B8=function(){function n(e){this.expr=e}return n.create=function(e){var t=n._normalizeArr(e);if(t.length!==0)return t.length===1?t[0]:new n(t)},n.prototype.getType=function(){return 5},n.prototype.cmp=function(e){if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(var t=0,r=this.expr.length;t<r;t++){var i=HO(this.expr[t],e.expr[t]);if(i!==0)return i}return 0},n.prototype.equals=function(e){if(e instanceof n){if(this.expr.length!==e.expr.length)return!1;for(var t=0,r=this.expr.length;t<r;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1},n.prototype.evaluate=function(e){for(var t=0,r=this.expr.length;t<r;t++)if(!this.expr[t].evaluate(e))return!1;return!0},n._normalizeArr=function(e){var t=[];if(e){for(var r=0,i=e.length;r<i;r++){var o=e[r];if(o){if(o instanceof n){t=t.concat(o.expr);continue}if(o instanceof qy)throw new Error("It is not allowed to have an or expression here due to lack of parens!");t.push(o)}}t.sort(HO)}return t},n.prototype.keys=function(){for(var e=[],t=0,r=this.expr;t<r.length;t++){var i=r[t];e.push.apply(e,i.keys())}return e},n.prototype.negate=function(){for(var e=[],t=0,r=this.expr;t<r.length;t++){var i=r[t];e.push(i.negate())}return qy.create(e)},n}(),qy=function(){function n(e){this.expr=e}return n.create=function(e){var t=n._normalizeArr(e);if(t.length!==0)return t.length===1?t[0]:new n(t)},n.prototype.getType=function(){return 8},n.prototype.equals=function(e){if(e instanceof n){if(this.expr.length!==e.expr.length)return!1;for(var t=0,r=this.expr.length;t<r;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1},n.prototype.evaluate=function(e){for(var t=0,r=this.expr.length;t<r;t++)if(this.expr[t].evaluate(e))return!0;return!1},n._normalizeArr=function(e){var t=[];if(e){for(var r=0,i=e.length;r<i;r++){var o=e[r];if(o){if(o instanceof n){t=t.concat(o.expr);continue}t.push(o)}}t.sort(HO)}return t},n.prototype.keys=function(){for(var e=[],t=0,r=this.expr;t<r.length;t++){var i=r[t];e.push.apply(e,i.keys())}return e},n.prototype.negate=function(){for(var e=[],t=0,r=this.expr;t<r.length;t++){var i=r[t];e.push(i.negate())}for(var o=function(m){return m instanceof n?m.expr:[m]};e.length>1;){for(var s=e.shift(),a=e.shift(),u=[],l=0,f=o(s);l<f.length;l++)for(var h=f[l],d=0,g=o(a);d<g.length;d++){var v=g[d];u.push(_e.and(h,v))}e.unshift(_e.or.apply(_e,u))}return e[0]},n}(),Re=function(n){T1e(e,n);function e(t,r){var i=n.call(this,t)||this;return i._defaultValue=r,i}return e.prototype.bindTo=function(t){return t.createKey(this.key,this._defaultValue)},e.prototype.getValue=function(t){return t.getContextKeyValue(this.key)},e.prototype.toNegated=function(){return _e.not(this.key)},e}(Gg),rt=xt("contextKeyService"),A1e="setContext",eY=function(){function n(e,t){this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(var r=0,i=e.length;r<i;r++){var o=e[r].command;o&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=n.combine(e,t);for(var r=0,i=this._keybindings.length;r<i;r++){var s=this._keybindings[r];s.keypressParts.length!==0&&this._addKeyPress(s.keypressParts[0],s)}}return n._isTargetedForRemoval=function(e,t,r,i,o){return!(e.command!==i||t&&e.keypressParts[0]!==t||r&&e.keypressParts[1]!==r||o&&(!e.when||!o.equals(e.when)))},n.combine=function(e,t){e=e.slice(0);for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(!s.command||s.command.length===0||s.command.charAt(0)!=="-"){r.push(s);continue}for(var a=s.command.substr(1),u=s.keypressParts[0],l=s.keypressParts[1],f=s.when,h=e.length-1;h>=0;h--)this._isTargetedForRemoval(e[h],u,l,a,f)&&e.splice(h,1)}return e.concat(r)},n.prototype._addKeyPress=function(e,t){var r=this._map.get(e);if(typeof r>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(var i=r.length-1;i>=0;i--){var o=r[i];if(o.command!==t.command){var s=o.keypressParts.length>1,a=t.keypressParts.length>1;s&&a&&o.keypressParts[1]!==t.keypressParts[1]||n.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}}r.push(t),this._addToLookupMap(t)},n.prototype._addToLookupMap=function(e){if(e.command){var t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}},n.prototype._removeFromLookupMap=function(e){if(e.command){var t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(var r=0,i=t.length;r<i;r++)if(t[r]===e){t.splice(r,1);return}}}},n.whenIsEntirelyIncluded=function(e,t){return t?e?this._implies(e,t):!1:!0},n._implies=function(e,t){for(var r=e.negate(),i=function(h){return h instanceof qy?h.expr:[h]},o=i(r).concat(i(t)),s=0;s<o.length;s++)for(var a=o[s],u=a.negate(),l=s+1;l<o.length;l++){var f=o[l];if(u.equals(f))return!0}return!1},n.prototype.lookupPrimaryKeybinding=function(e){var t=this._lookupMap.get(e);return typeof t>"u"||t.length===0?null:t[t.length-1]},n.prototype.resolve=function(e,t,r){var i=null;if(t!==null){var o=this._map.get(t);if(typeof o>"u")return null;i=[];for(var s=0,a=o.length;s<a;s++){var u=o[s];u.keypressParts[1]===r&&i.push(u)}}else{var o=this._map.get(r);if(typeof o>"u")return null;i=o}var l=this._findCommand(e,i);return l?t===null&&l.keypressParts.length>1&&l.keypressParts[1]!==null?{enterChord:!0,commandId:null,commandArgs:null,bubble:!1}:{enterChord:!1,commandId:l.command,commandArgs:l.commandArgs,bubble:l.bubble}:null},n.prototype._findCommand=function(e,t){for(var r=t.length-1;r>=0;r--){var i=t[r];if(n.contextMatchesRules(e,i.when))return i}return null},n.contextMatchesRules=function(e,t){return t?t.evaluate(e):!0},n}(),O1e=function(){function n(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}return n.bindToCurrentPlatform=function(e){if(Qa===1){if(e&&e.win)return e.win}else if(Qa===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e},n.prototype.registerKeybindingRule=function(e){var t=n.bindToCurrentPlatform(e);if(t&&t.primary){var r=z1(t.primary,Qa);r&&this._registerDefaultKeybinding(r,e.id,void 0,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(var i=0,o=t.secondary.length;i<o;i++){var s=t.secondary[i],r=z1(s,Qa);r&&this._registerDefaultKeybinding(r,e.id,void 0,e.weight,-i-1,e.when)}},n.prototype.registerCommandAndKeybindingRule=function(e){this.registerKeybindingRule(e),oi.registerCommand(e)},n._mightProduceChar=function(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92},n.prototype._assertNoCtrlAlt=function(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&n._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)},n.prototype._registerDefaultKeybinding=function(e,t,r,i,o,s){Qa===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e,command:t,commandArgs:r,when:s,weight1:i,weight2:o}),this._cachedMergedKeybindings=null},n.prototype.getDefaultKeybindings=function(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(M1e)),this._cachedMergedKeybindings.slice(0)},n}(),ws=new O1e,R1e={EditorModes:"platform.keybindingsRegistry"};qi.add(R1e.EditorModes,ws);function M1e(n,e){return n.weight1!==e.weight1?n.weight1-e.weight1:n.command<e.command?-1:n.command>e.command?1:n.weight2-e.weight2}var W8=function(){function n(e,t,r,i,o){this.resolvedKeybinding=e,this.keypressParts=e?P1e(e.getDispatchParts()):[],this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=r,this.when=i,this.isDefault=o}return n}();function P1e(n){for(var e=[],t=0,r=n.length;t<r;t++){var i=n[t];if(!i)return e;e.push(i)}return e}var tY=function(){function n(e,t,r){r===void 0&&(r=t),this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=r}return n.prototype.toLabel=function(e,t,r){if(t.length===0)return null;for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=r(a);if(u===null)return null;i[o]=B1e(a,u,this.modifierLabels[e])}return i.join(" ")},n}(),nY=new tY({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:S({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:S({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:S({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:S({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),F1e=new tY({ctrlKey:S({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:S({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:S({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:S({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:S({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:S({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"});function B1e(n,e,t){if(e===null)return"";var r=[];return n.ctrlKey&&r.push(t.ctrlKey),n.shiftKey&&r.push(t.shiftKey),n.altKey&&r.push(t.altKey),n.metaKey&&r.push(t.metaKey),r.push(e),r.join(t.separator)}var W1e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),V1e=function(n){W1e(e,n);function e(t,r){var i=n.call(this)||this;if(r.length===0)throw fr("parts");return i._os=t,i._parts=r,i}return e.prototype.getLabel=function(){var t=this;return nY.toLabel(this._os,this._parts,function(r){return t._getLabel(r)})},e.prototype.getAriaLabel=function(){var t=this;return F1e.toLabel(this._os,this._parts,function(r){return t._getAriaLabel(r)})},e.prototype.isChord=function(){return this._parts.length>1},e.prototype.getParts=function(){var t=this;return this._parts.map(function(r){return t._getPart(r)})},e.prototype._getPart=function(t){return new D0e(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,this._getLabel(t),this._getAriaLabel(t))},e.prototype.getDispatchParts=function(){var t=this;return this._parts.map(function(r){return t._getDispatchPart(r)})},e}(L0e),H1e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),V8=function(n){H1e(e,n);function e(t,r){return n.call(this,r,t.parts)||this}return e.prototype._keyCodeToUILabel=function(t){if(this._os===2)switch(t){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return wg.toString(t)},e.prototype._getLabel=function(t){return t.isDuplicateModifierCase()?"":this._keyCodeToUILabel(t.keyCode)},e.prototype._getAriaLabel=function(t){return t.isDuplicateModifierCase()?"":wg.toString(t.keyCode)},e.prototype._getDispatchPart=function(t){return e.getDispatchStr(t)},e.getDispatchStr=function(t){if(t.isModifierKey())return null;var r="";return t.ctrlKey&&(r+="ctrl+"),t.shiftKey&&(r+="shift+"),t.altKey&&(r+="alt+"),t.metaKey&&(r+="meta+"),r+=wg.toString(t.keyCode),r},e}(V1e),Hr=xt("notificationService"),U1e=function(){function n(){}return n}(),rY=xt("contextService"),H8;(function(n){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"&&Array.isArray(t.folders)}n.isIWorkspace=e})(H8||(H8={}));var U8;(function(n){function e(t){return t&&typeof t=="object"&&bt.isUri(t.uri)&&typeof t.name=="string"&&typeof t.toResource=="function"}n.isIWorkspaceFolder=e})(U8||(U8={}));(function(){function n(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=null),this._id=e,this._configuration=r,this._foldersMap=RO.forPaths(),this.folders=t}return Object.defineProperty(n.prototype,"folders",{get:function(){return this._folders},set:function(e){this._folders=e,this.updateFoldersMap()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"configuration",{get:function(){return this._configuration},set:function(e){this._configuration=e},enumerable:!0,configurable:!0}),n.prototype.getFolder=function(e){return e&&this._foldersMap.findSubstr(e.with({scheme:e.scheme,authority:e.authority,path:e.path}).toString())||null},n.prototype.updateFoldersMap=function(){this._foldersMap=RO.forPaths();for(var e=0,t=this.folders;e<t.length;e++){var r=t[e];this._foldersMap.set(r.uri.toString(),r)}},n.prototype.toJSON=function(){return{id:this.id,folders:this.folders,configuration:this.configuration}},n})();var j1e=function(){function n(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}return n.prototype.toResource=function(e){return $be(this.uri,e)},n.prototype.toJSON=function(){return{uri:this.uri,name:this.name,index:this.index}},n}(),Nn;(function(n){n.noSelection=S("noSelection","No selection"),n.singleSelectionRange=S("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),n.singleSelection=S("singleSelection","Line {0}, Column {1}"),n.multiSelectionRange=S("multiSelectionRange","{0} selections ({1} characters selected)"),n.multiSelection=S("multiSelection","{0} selections"),n.emergencyConfOn=S("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),n.openingDocs=S("openingDocs","Now opening the Editor Accessibility documentation page."),n.readonlyDiffEditor=S("readonlyDiffEditor"," in a read-only pane of a diff editor."),n.editableDiffEditor=S("editableDiffEditor"," in a pane of a diff editor."),n.readonlyEditor=S("readonlyEditor"," in a read-only code editor"),n.editableEditor=S("editableEditor"," in a code editor"),n.changeConfigToOnMac=S("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),n.changeConfigToOnWinLinux=S("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),n.auto_on=S("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),n.auto_off=S("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),n.tabFocusModeOnMsg=S("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),n.tabFocusModeOnMsgNoKb=S("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),n.tabFocusModeOffMsg=S("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),n.tabFocusModeOffMsgNoKb=S("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),n.openDocMac=S("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),n.openDocWinLinux=S("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),n.outroMsg=S("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),n.showAccessibilityHelpAction=S("showAccessibilityHelpAction","Show Accessibility Help")})(Nn||(Nn={}));var jO;(function(n){n.inspectTokensAction=S("inspectTokens","Developer: Inspect Tokens")})(jO||(jO={}));var nl;(function(n){n.gotoLineLabelValidLineAndColumn=S("gotoLineLabelValidLineAndColumn","Go to line {0} and character {1}"),n.gotoLineLabelValidLine=S("gotoLineLabelValidLine","Go to line {0}"),n.gotoLineLabelEmptyWithLineLimit=S("gotoLineLabelEmptyWithLineLimit","Type a line number between 1 and {0} to navigate to"),n.gotoLineLabelEmptyWithLineAndColumnLimit=S("gotoLineLabelEmptyWithLineAndColumnLimit","Type a character between 1 and {0} to navigate to"),n.gotoLineAriaLabel=S("gotoLineAriaLabel","Current Line: {0}. Go to line {1}."),n.gotoLineActionInput=S("gotoLineActionInput","Type a line number, followed by an optional colon and a character number to navigate to"),n.gotoLineActionLabel=S("gotoLineActionLabel","Go to Line...")})(nl||(nl={}));var Yg;(function(n){n.ariaLabelEntryWithKey=S("ariaLabelEntryWithKey","{0}, {1}, commands"),n.ariaLabelEntry=S("ariaLabelEntry","{0}, commands"),n.quickCommandActionInput=S("quickCommandActionInput","Type the name of an action you want to execute"),n.quickCommandActionLabel=S("quickCommandActionLabel","Command Palette")})(Yg||(Yg={}));var Li;(function(n){n.entryAriaLabel=S("entryAriaLabel","{0}, symbols"),n.quickOutlineActionInput=S("quickOutlineActionInput","Type the name of an identifier you wish to navigate to"),n.quickOutlineActionLabel=S("quickOutlineActionLabel","Go to Symbol..."),n._symbols_=S("symbols","symbols ({0})"),n._modules_=S("modules","modules ({0})"),n._class_=S("class","classes ({0})"),n._interface_=S("interface","interfaces ({0})"),n._method_=S("method","methods ({0})"),n._function_=S("function","functions ({0})"),n._property_=S("property","properties ({0})"),n._variable_=S("variable","variables ({0})"),n._variable2_=S("variable2","variables ({0})"),n._constructor_=S("_constructor","constructors ({0})"),n._call_=S("call","calls ({0})")})(Li||(Li={}));var q_;(function(n){n.editorViewAccessibleLabel=S("editorViewAccessibleLabel","Editor content"),n.accessibilityHelpMessageIE=S("accessibilityHelpMessageIE","Press Ctrl+F1 for Accessibility Options."),n.accessibilityHelpMessage=S("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(q_||(q_={}));var zO;(function(n){n.toggleHighContrast=S("toggleHighContrast","Toggle High Contrast Theme")})(zO||(zO={}));var qO;(function(n){n.bulkEditServiceSummary=S("bulkEditServiceSummary","Made {0} edits in {1} files")})(qO||(qO={}));var z1e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),q1e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$1e=function(n,e){return function(t,r){e(t,r,n)}},K1e=function(){function n(e){this.model=e,this._onDispose=new j}return Object.defineProperty(n.prototype,"textEditorModel",{get:function(){return this.model},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this._onDispose.fire()},n}();function G1e(n,e,t){return Su(n)?e(n):t(n)}var Y1e=function(){function n(){}return n.prototype.setEditor=function(e){this.editor=e},n.prototype.createModelReference=function(e){var t=this,r=null;return this.editor&&(r=G1e(this.editor,function(i){return t.findModel(i,e)},function(i){return t.findModel(i.getOriginalEditor(),e)||t.findModel(i.getModifiedEditor(),e)})),r?Promise.resolve(new w0e(new K1e(r))):Promise.reject(new Error("Model not found"))},n.prototype.findModel=function(e,t){var r=e.getModel();return r&&r.uri.toString()!==t.toString()?null:r},n}(),Z1e=function(){function n(){}return n.prototype.showWhile=function(e,t){return Promise.resolve(void 0)},n}(),X1e=function(){function n(){}return n}(),Q1e=function(){function n(){}return n.prototype.info=function(e){return this.notify({severity:Rn.Info,message:e})},n.prototype.warn=function(e){return this.notify({severity:Rn.Warning,message:e})},n.prototype.error=function(e){return this.notify({severity:Rn.Error,message:e})},n.prototype.notify=function(e){switch(e.severity){case Rn.Error:console.error(e.message);break;case Rn.Warning:console.warn(e.message);break;default:console.log(e.message);break}return n.NO_OP},n.prototype.status=function(e,t){return te.None},n.NO_OP=new U1e,n}(),iY=function(){function n(e){this._onWillExecuteCommand=new j,this._onDidExecuteCommand=new j,this._instantiationService=e,this._dynamicCommands=Object.create(null)}return n.prototype.addCommand=function(e){var t=this,r=e.id;return this._dynamicCommands[r]=e,en(function(){delete t._dynamicCommands[r]})},n.prototype.executeCommand=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=oi.getCommand(e)||this._dynamicCommands[e];if(!i)return Promise.reject(new Error("command '"+e+"' not found"));try{this._onWillExecuteCommand.fire({commandId:e,args:t});var o=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler].concat(t));return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(o)}catch(s){return Promise.reject(s)}},n}(),oY=function(n){z1e(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r,i,o)||this;return a._cachedResolver=null,a._dynamicKeybindings=[],a._register(ie(s,Ye.KEY_DOWN,function(u){var l=new Sn(u),f=a._dispatch(l,l.target);f&&l.preventDefault()})),a}return e.prototype.addDynamicKeybinding=function(t,r,i,o){var s=this,a=z1(r,Qa);if(!a)throw new Error("Invalid keybinding");var u=new De;this._dynamicKeybindings.push({keybinding:a,command:t,when:o,weight1:1e3,weight2:0}),u.add(en(function(){for(var f=0;f<s._dynamicKeybindings.length;f++){var h=s._dynamicKeybindings[f];if(h.command===t){s._dynamicKeybindings.splice(f,1),s.updateResolver({source:1});return}}}));var l=this._commandService;if(l instanceof iY)u.add(l.addCommand({id:t,handler:i}));else throw new Error("Unknown command service!");return this.updateResolver({source:1}),u},e.prototype.updateResolver=function(t){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(t)},e.prototype._getResolver=function(){if(!this._cachedResolver){var t=this._toNormalizedKeybindingItems(ws.getDefaultKeybindings(),!0),r=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new eY(t,r)}return this._cachedResolver},e.prototype._documentHasFocus=function(){return document.hasFocus()},e.prototype._toNormalizedKeybindingItems=function(t,r){for(var i=[],o=0,s=0,a=t;s<a.length;s++){var u=a[s],l=u.when||void 0,f=u.keybinding;if(!f)i[o++]=new W8(void 0,u.command,u.commandArgs,l,r);else for(var h=this.resolveKeybinding(f),d=0,g=h;d<g.length;d++){var v=g[d];i[o++]=new W8(v,u.command,u.commandArgs,l,r)}}return i},e.prototype.resolveKeybinding=function(t){return[new V8(t,Qa)]},e.prototype.resolveKeyboardEvent=function(t){var r=new XP(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,t.keyCode).toChord();return new V8(r,Qa)},e}(k1e);function j8(n){return n&&typeof n=="object"&&(!n.overrideIdentifier||typeof n.overrideIdentifier=="string")&&(!n.resource||n.resource instanceof bt)}var sY=function(){function n(){this._onDidChangeConfiguration=new j,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new D1e(new x1e,new ag)}return n.prototype.configuration=function(){return this._configuration},n.prototype.getValue=function(e,t){var r=typeof e=="string"?e:void 0,i=j8(e)?e:j8(t)?t:{};return this.configuration().getValue(r,i,void 0)},n.prototype.updateValue=function(e,t,r,i){return this.configuration().updateValue(e,t),Promise.resolve()},n.prototype.inspect=function(e,t){return t===void 0&&(t={}),this.configuration().inspect(e,t,void 0)},n}(),J1e=function(){function n(e){var t=this;this.configurationService=e,this._onDidChangeConfiguration=new j,this.configurationService.onDidChangeConfiguration(function(r){t._onDidChangeConfiguration.fire(r)})}return n.prototype.getValue=function(e,t,r){var i=$.isIPosition(t)?t:null,o=i?typeof r=="string"?r:void 0:typeof t=="string"?t:void 0;return typeof o>"u"?this.configurationService.getValue():this.configurationService.getValue(o)},n}(),eSe=function(){function n(e){this.configurationService=e}return n.prototype.getEOL=function(e){var t=this.configurationService.getValue("files");return t&&t.eol&&t.eol!=="auto"?t.eol:Rl||ct?`
`:`\r
`},n=q1e([$1e(0,Vr)],n),n}(),tSe=function(){function n(){this._serviceBrand=void 0}return n.prototype.publicLog=function(e,t){return Promise.resolve(void 0)},n.prototype.publicLog2=function(e,t){return this.publicLog(e,t)},n}(),nSe=function(){function n(){var e=bt.from({scheme:n.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new j1e({uri:e,name:"",index:0})]}}return n.prototype.getWorkspace=function(){return this.workspace},n.prototype.getWorkspaceFolder=function(e){return e&&e.scheme===n.SCHEME?this.workspace.folders[0]:null},n.SCHEME="inmemory",n}();function sS(n,e,t){e&&n instanceof sY&&Object.keys(e).forEach(function(r){v1e(r)&&n.updateValue("editor."+r,e[r]),t&&m1e(r)&&n.updateValue("diffEditor."+r,e[r])})}var rSe=function(){function n(e){this._modelService=e}return n.prototype.apply=function(e,t){var r=new Map;if(e.edits)for(var i=0,o=e.edits;i<o.length;i++){var s=o[i];if(!Owe(s))return Promise.reject(new Error("bad edit - only text edits are supported"));var a=this._modelService.getModel(s.resource);if(!a)return Promise.reject(new Error("bad edit - model not found"));var u=r.get(a);u||(u=[]),r.set(a,u.concat(s.edits))}var l=0,f=0;return r.forEach(function(h,d){d.applyEdits(h.map(function(g){return lr.replaceMove(R.lift(g.range),g.text)})),f+=1,l+=h.length}),Promise.resolve({selection:void 0,ariaSummary:Nt(qO.bulkEditServiceSummary,l,f)})},n}(),iSe=function(){function n(){}return n.prototype.getUriLabel=function(e,t){return e.scheme==="file"?e.fsPath:e.path},n}(),oSe=function(){function n(e){this._container=e,this.onLayout=We.None}return Object.defineProperty(n.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),n}(),Xp,Qp,Jp;function sSe(n){Xp=document.createElement("div"),Xp.className="monaco-aria-container",Qp=document.createElement("div"),Qp.className="monaco-alert",Qp.setAttribute("role","alert"),Qp.setAttribute("aria-atomic","true"),Xp.appendChild(Qp),Jp=document.createElement("div"),Jp.className="monaco-status",Jp.setAttribute("role","status"),Jp.setAttribute("aria-atomic","true"),Xp.appendChild(Jp),n.appendChild(Xp)}function pi(n,e){aY(Qp,n,e)}function z8(n,e){ct?pi(n,e):aY(Jp,n,e)}var Jw=0,q8=void 0;function aY(n,e,t){if(Xp){if(!t)switch(q8===e?Jw++:(q8=e,Jw=0),Jw){case 0:break;case 1:e=S("repeated","{0} (occurred again)",e);break;default:e=S("repeatedNtimes","{0} (occurred {1} times)",e,Jw);break}ms(n),n.textContent=e,n.style.visibility="hidden",n.style.visibility="visible"}}var aSe=function(){function n(e,t){this.chr=e,this.type=t,this.width=0}return n.prototype.fulfill=function(e){this.width=e},n}(),uSe=function(){function n(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}return n.prototype.read=function(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null},n.prototype._createDomElements=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";var t=document.createElement("div");t.style.fontFamily=this._bareFontInfo.getMassagedFontFamily(),t.style.fontWeight=this._bareFontInfo.fontWeight,t.style.fontSize=this._bareFontInfo.fontSize+"px",t.style.lineHeight=this._bareFontInfo.lineHeight+"px",t.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",e.appendChild(t);var r=document.createElement("div");r.style.fontFamily=this._bareFontInfo.getMassagedFontFamily(),r.style.fontWeight="bold",r.style.fontSize=this._bareFontInfo.fontSize+"px",r.style.lineHeight=this._bareFontInfo.lineHeight+"px",r.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",e.appendChild(r);var i=document.createElement("div");i.style.fontFamily=this._bareFontInfo.getMassagedFontFamily(),i.style.fontWeight=this._bareFontInfo.fontWeight,i.style.fontSize=this._bareFontInfo.fontSize+"px",i.style.lineHeight=this._bareFontInfo.lineHeight+"px",i.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",i.style.fontStyle="italic",e.appendChild(i);for(var o=[],s=0,a=this._requests.length;s<a;s++){var u=this._requests[s],l=void 0;u.type===0&&(l=t),u.type===2&&(l=r),u.type===1&&(l=i),l.appendChild(document.createElement("br"));var f=document.createElement("span");n._render(f,u),l.appendChild(f),o[s]=f}this._container=e,this._testElements=o},n._render=function(e,t){if(t.chr===" "){for(var r="&nbsp;",i=0;i<8;i++)r+=r;e.innerHTML=r}else{for(var o=t.chr,i=0;i<8;i++)o+=o;e.textContent=o}},n.prototype._readFromDomElements=function(){for(var e=0,t=this._requests.length;e<t;e++){var r=this._requests[e],i=this._testElements[e];r.fulfill(i.offsetWidth/256)}},n}();function lSe(n,e){var t=new uSe(n,e);t.read()}var cSe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fSe=function(n){cSe(e,n);function e(t,r){var i=n.call(this)||this;return i.referenceDomElement=t,i.changeCallback=r,i.measureReferenceDomElementToken=-1,i.width=-1,i.height=-1,i.measureReferenceDomElement(!1),i}return e.prototype.dispose=function(){this.stopObserving(),n.prototype.dispose.call(this)},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.startObserving=function(){var t=this;this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(function(){return t.measureReferenceDomElement(!0)},100))},e.prototype.stopObserving=function(){this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)},e.prototype.observe=function(t){this.measureReferenceDomElement(!0,t)},e.prototype.measureReferenceDomElement=function(t,r){var i=0,o=0;r?(i=r.width,o=r.height):this.referenceDomElement&&(i=this.referenceDomElement.clientWidth,o=this.referenceDomElement.clientHeight),i=Math.max(5,i),o=Math.max(5,o),(this.width!==i||this.height!==o)&&(this.width=i,this.height=o,t&&this.changeCallback())},e}(te),uY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$8=function(){function n(){this._keys=Object.create(null),this._values=Object.create(null)}return n.prototype.has=function(e){var t=e.getId();return!!this._values[t]},n.prototype.get=function(e){var t=e.getId();return this._values[t]},n.prototype.put=function(e,t){var r=e.getId();this._keys[r]=e,this._values[r]=t},n.prototype.remove=function(e){var t=e.getId();delete this._keys[t],delete this._values[t]},n.prototype.getValues=function(){var e=this;return Object.keys(this._keys).map(function(t){return e._values[t]})},n}();function hSe(){$O.INSTANCE.clearCache()}var $O=function(n){uY(e,n);function e(){var t=n.call(this)||this;return t._onDidChange=t._register(new j),t.onDidChange=t._onDidChange.event,t._cache=new $8,t._evictUntrustedReadingsTimeout=-1,t}return e.prototype.dispose=function(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),n.prototype.dispose.call(this)},e.prototype.clearCache=function(){this._cache=new $8,this._onDidChange.fire()},e.prototype._writeToCache=function(t,r){var i=this;this._cache.put(t,r),!r.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(function(){i._evictUntrustedReadingsTimeout=-1,i._evictUntrustedReadings()},5e3))},e.prototype._evictUntrustedReadings=function(){for(var t=this._cache.getValues(),r=!1,i=0,o=t.length;i<o;i++){var s=t[i];s.isTrusted||(r=!0,this._cache.remove(s))}r&&this._onDidChange.fire()},e.prototype.readConfiguration=function(t){if(!this._cache.has(t)){var r=e._actualReadConfiguration(t);(r.typicalHalfwidthCharacterWidth<=2||r.typicalFullwidthCharacterWidth<=2||r.spaceWidth<=2||r.maxDigitWidth<=2)&&(r=new MO({zoomLevel:q1(),fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontSize:r.fontSize,lineHeight:r.lineHeight,letterSpacing:r.letterSpacing,isMonospace:r.isMonospace,typicalHalfwidthCharacterWidth:Math.max(r.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(r.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:r.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(r.spaceWidth,5),maxDigitWidth:Math.max(r.maxDigitWidth,5)},!1)),this._writeToCache(t,r)}return this._cache.get(t)},e.createRequest=function(t,r,i,o){var s=new aSe(t,r);return i.push(s),o&&o.push(s),s},e._actualReadConfiguration=function(t){var r=[],i=[],o=this.createRequest("n",0,r,i),s=this.createRequest("",0,r,null),a=this.createRequest(" ",0,r,i),u=this.createRequest("0",0,r,i),l=this.createRequest("1",0,r,i),f=this.createRequest("2",0,r,i),h=this.createRequest("3",0,r,i),d=this.createRequest("4",0,r,i),g=this.createRequest("5",0,r,i),v=this.createRequest("6",0,r,i),m=this.createRequest("7",0,r,i),y=this.createRequest("8",0,r,i),b=this.createRequest("9",0,r,i),C=this.createRequest("",0,r,i),E=this.createRequest("",0,r,null);this.createRequest("",0,r,i),this.createRequest("|",0,r,i),this.createRequest("/",0,r,i),this.createRequest("-",0,r,i),this.createRequest("_",0,r,i),this.createRequest("i",0,r,i),this.createRequest("l",0,r,i),this.createRequest("m",0,r,i),this.createRequest("|",1,r,i),this.createRequest("_",1,r,i),this.createRequest("i",1,r,i),this.createRequest("l",1,r,i),this.createRequest("m",1,r,i),this.createRequest("n",1,r,i),this.createRequest("|",2,r,i),this.createRequest("_",2,r,i),this.createRequest("i",2,r,i),this.createRequest("l",2,r,i),this.createRequest("m",2,r,i),this.createRequest("n",2,r,i),lSe(t,r);for(var D=Math.max(u.width,l.width,f.width,h.width,d.width,g.width,v.width,m.width,y.width,b.width),k=!0,I=i[0].width,T=1,A=i.length;T<A;T++){var M=I-i[T].width;if(M<-.001||M>.001){k=!1;break}}var L=!0;k&&E.width!==I&&(L=!1),E.width>C.width&&(L=!1);var F=V0e()>2e3;return new MO({zoomLevel:q1(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:k,typicalHalfwidthCharacterWidth:o.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:L,spaceWidth:a.width,maxDigitWidth:D},F)},e.INSTANCE=new e,e}(te),_s=function(n){uY(e,n);function e(t,r,i,o){i===void 0&&(i=null);var s=n.call(this,t,r)||this;return s.accessibilityService=o,s._elementSizeObserver=s._register(new fSe(i,function(){return s._onReferenceDomElementSizeChanged()})),s._register($O.INSTANCE.onDidChange(function(){return s._onCSSBasedConfigurationChanged()})),s._validatedOptions.automaticLayout&&s._elementSizeObserver.startObserving(),s._register(lG(function(a){return s._recomputeOptions()})),s._register(s.accessibilityService.onDidChangeAccessibilitySupport(function(){return s._recomputeOptions()})),s._recomputeOptions(),s}return e.applyFontInfoSlow=function(t,r){t.style.fontFamily=r.getMassagedFontFamily(),t.style.fontWeight=r.fontWeight,t.style.fontSize=r.fontSize+"px",t.style.lineHeight=r.lineHeight+"px",t.style.letterSpacing=r.letterSpacing+"px"},e.applyFontInfo=function(t,r){t.setFontFamily(r.getMassagedFontFamily()),t.setFontWeight(r.fontWeight),t.setFontSize(r.fontSize),t.setLineHeight(r.lineHeight),t.setLetterSpacing(r.letterSpacing)},e.prototype._onReferenceDomElementSizeChanged=function(){this._recomputeOptions()},e.prototype._onCSSBasedConfigurationChanged=function(){this._recomputeOptions()},e.prototype.observeReferenceElement=function(t){this._elementSizeObserver.observe(t)},e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype._getExtraEditorClassName=function(){var t="";return!sI&&!U0e&&(t+="no-user-select "),ct&&(t+="mac "),t},e.prototype._getEnvConfiguration=function(){return{extraEditorClassName:this._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:Kh||wl,pixelRatio:H0e(),zoomLevel:q1(),accessibilitySupport:this.accessibilityService.getAccessibilitySupport()}},e.prototype.readConfiguration=function(t){return $O.INSTANCE.readConfiguration(t)},e}(p1e),lY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dSe=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},pSe=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},ds=function(n){lY(e,n);function e(t,r,i,o,s){r===void 0&&(r=""),i===void 0&&(i=""),o===void 0&&(o=!0);var a=n.call(this)||this;return a._onDidChange=a._register(new j),a.onDidChange=a._onDidChange.event,a._enabled=!0,a._checked=!1,a._radio=!1,a._id=t,a._label=r,a._cssClass=i,a._enabled=o,a._actionCallback=s,a}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._setLabel(t)},enumerable:!0,configurable:!0}),e.prototype._setLabel=function(t){this._label!==t&&(this._label=t,this._onDidChange.fire({label:t}))},Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip||""},set:function(t){this._setTooltip(t)},enumerable:!0,configurable:!0}),e.prototype._setTooltip=function(t){this._tooltip!==t&&(this._tooltip=t,this._onDidChange.fire({tooltip:t}))},Object.defineProperty(e.prototype,"class",{get:function(){return this._cssClass},set:function(t){this._setClass(t)},enumerable:!0,configurable:!0}),e.prototype._setClass=function(t){this._cssClass!==t&&(this._cssClass=t,this._onDidChange.fire({class:t}))},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._setEnabled(t)},enumerable:!0,configurable:!0}),e.prototype._setEnabled=function(t){this._enabled!==t&&(this._enabled=t,this._onDidChange.fire({enabled:t}))},Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){this._setChecked(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radio",{get:function(){return this._radio},set:function(t){this._setRadio(t)},enumerable:!0,configurable:!0}),e.prototype._setChecked=function(t){this._checked!==t&&(this._checked=t,this._onDidChange.fire({checked:t}))},e.prototype._setRadio=function(t){this._radio!==t&&(this._radio=t,this._onDidChange.fire({radio:t}))},e.prototype.run=function(t,r){return this._actionCallback?this._actionCallback(t):Promise.resolve(!0)},e}(te),cY=function(n){lY(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._onDidBeforeRun=t._register(new j),t.onDidBeforeRun=t._onDidBeforeRun.event,t._onDidRun=t._register(new j),t.onDidRun=t._onDidRun.event,t}return e.prototype.run=function(t,r){return dSe(this,void 0,void 0,function(){var i,o;return pSe(this,function(s){switch(s.label){case 0:if(!t.enabled)return[2,Promise.resolve(null)];this._onDidBeforeRun.fire({action:t}),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.runAction(t,r)];case 2:return i=s.sent(),this._onDidRun.fire({action:t,result:i}),[3,4];case 3:return o=s.sent(),this._onDidRun.fire({action:t,error:o}),[3,4];case 4:return[2]}})})},e.prototype.runAction=function(t,r){var i=r?t.run(r):t.run();return Promise.resolve(i)},e}(te),OF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fY=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},KO=function(n,e){return function(t,r){e(t,r,n)}};function e1(n){return n.command!==void 0}var hY=xt("menuService"),Ta=new(function(){function n(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new j,this.onDidChangeMenu=this._onDidChangeMenu.event}return n.prototype.addCommand=function(e){var t=this;return this._commands.set(e.id,e),this._onDidChangeMenu.fire(0),{dispose:function(){t._commands.delete(e.id)&&t._onDidChangeMenu.fire(0)}}},n.prototype.getCommand=function(e){return this._commands.get(e)},n.prototype.getCommands=function(){var e=new Map;return this._commands.forEach(function(t,r){return e.set(r,t)}),e},n.prototype.appendMenuItem=function(e,t){var r=this,i=this._menuItems.get(e);return i?i.push(t):(i=[t],this._menuItems.set(e,i)),this._onDidChangeMenu.fire(e),{dispose:function(){var o=i.indexOf(t);o>=0&&(i.splice(o,1),r._onDidChangeMenu.fire(e))}}},n.prototype.getMenuItems=function(e){var t=(this._menuItems.get(e)||[]).slice(0);return e===0&&this._appendImplicitItems(t),t},n.prototype._appendImplicitItems=function(e){for(var t=new Set,r=e.filter(function(l){return e1(l)}),i=0,o=r;i<o.length;i++){var s=o[i],a=s.command,u=s.alt;t.add(a.id),u&&t.add(u.id)}this._commands.forEach(function(l,f){t.has(f)||e.push({command:l})})},n}()),gSe=function(n){OF(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o._commandService=i,o}return e.prototype.run=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return(t=this._commandService).executeCommand.apply(t,[this.id].concat(r))},e=fY([KO(2,bi)],e),e}(ds),vSe=function(n){OF(e,n);function e(t){var r=this;return typeof t.title=="string"?r=n.call(this,"",t.title,"submenu")||this:r=n.call(this,"",t.title.value,"submenu")||this,r.item=t,r}return e}(ds),mSe=function(n){OF(e,n);function e(t,r,i,o,s){var a=this;return typeof t.title=="string"?a=n.call(this,t.id,t.title,s)||this:a=n.call(this,t.id,t.title.value,s)||this,a._cssClass=void 0,a._enabled=!t.precondition||o.contextMatchesRules(t.precondition),a._checked=!!(t.toggled&&o.contextMatchesRules(t.toggled)),a._options=i||{},a.item=t,a.alt=r?new e(r,void 0,a._options,o,s):void 0,a}return e.prototype.dispose=function(){this.alt&&this.alt.dispose(),n.prototype.dispose.call(this)},e.prototype.run=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=[];return this._options.arg&&(i=i.concat([this._options.arg])),this._options.shouldForwardArgs&&(i=i.concat(t)),n.prototype.run.apply(this,i)},e=fY([KO(3,rt),KO(4,bi)],e),e}(gSe),$0=xt("telemetryService"),GO=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RF=function(){function n(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menubarOpts=e.menubarOpts,this._description=e.description}return n.prototype.register=function(){var e=this;if(this._menubarOpts&&Ta.appendMenuItem(this._menubarOpts.menuId,{group:this._menubarOpts.group,command:{id:this.id,title:this._menubarOpts.title},when:this._menubarOpts.when,order:this._menubarOpts.order}),this._kbOpts){var t=this._kbOpts.kbExpr;this.precondition&&(t?t=_e.and(t,this.precondition):t=this.precondition),ws.registerCommandAndKeybindingRule({id:this.id,handler:function(r,i){return e.runCommand(r,i)},weight:this._kbOpts.weight,when:t,primary:this._kbOpts.primary,secondary:this._kbOpts.secondary,win:this._kbOpts.win,linux:this._kbOpts.linux,mac:this._kbOpts.mac,description:this._description})}else oi.registerCommand({id:this.id,handler:function(r,i){return e.runCommand(r,i)},description:this._description})},n}(),$i=function(n){GO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.bindToContribution=function(t){return function(r){GO(i,r);function i(o){var s=r.call(this,o)||this;return s._callback=o.handler,s}return i.prototype.runEditorCommand=function(o,s,a){var u=t(s);u&&this._callback(t(s),a)},i}(e)},e.prototype.runCommand=function(t,r){var i=this,o=t.get(an),s=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(s)return s.invokeWithinContext(function(a){var u=a.get(rt);if(u.contextMatchesRules(tI(i.precondition)))return i.runEditorCommand(a,s,r)})},e}(RF),Ne=function(n){GO(e,n);function e(t){var r=n.call(this,t)||this;return r.label=t.label,r.alias=t.alias,r.menuOpts=t.menuOpts,r}return e.prototype.register=function(){this.menuOpts&&Ta.appendMenuItem(7,{command:{id:this.id,title:this.label},when:_e.and(this.precondition,this.menuOpts.when),group:this.menuOpts.group,order:this.menuOpts.order}),n.prototype.register.call(this)},e.prototype.runEditorCommand=function(t,r,i){return this.reportTelemetry(t,r),this.run(t,r,i||{})},e.prototype.reportTelemetry=function(t,r){t.get($0).publicLog2("editorActionInvoked",{name:this.label,id:this.id})},e}($i);function Ml(n,e){oi.registerCommand(n,function(t,r){return e(t,r||{})})}function Ra(n,e){Ml(n,function(t,r){var i=r.resource,o=r.position;if(!(i instanceof bt))throw fr("resource");if(!$.isIPosition(o))throw fr("position");var s=t.get(yo).getModel(i);if(s){var a=$.lift(o);return e(s,a,r)}return t.get(pd).createModelReference(i).then(function(u){return new Promise(function(l,f){try{var h=e(u.object.textEditorModel,$.lift(o),r);l(h)}catch(d){f(d)}}).finally(function(){u.dispose()})})})}function ee(n){return Vc.INSTANCE.registerEditorCommand(n),n}function re(n){Vc.INSTANCE.registerEditorAction(new n)}function _Se(n){Vc.INSTANCE.registerEditorAction(n)}function tn(n){Vc.INSTANCE.registerEditorContribution(n)}var $_;(function(n){function e(i){return Vc.INSTANCE.getEditorCommand(i)}n.getEditorCommand=e;function t(){return Vc.INSTANCE.getEditorActions()}n.getEditorActions=t;function r(){return Vc.INSTANCE.getEditorContributions()}n.getEditorContributions=r})($_||($_={}));var ySe={EditorCommonContributions:"editor.contributions"},Vc=function(){function n(){this.editorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}return n.prototype.registerEditorContribution=function(e){this.editorContributions.push(e)},n.prototype.registerEditorAction=function(e){e.register(),this.editorActions.push(e)},n.prototype.getEditorContributions=function(){return this.editorContributions.slice(0)},n.prototype.getEditorActions=function(){return this.editorActions.slice(0)},n.prototype.registerEditorCommand=function(e){e.register(),this.editorCommands[e.id]=e},n.prototype.getEditorCommand=function(e){return this.editorCommands[e]||null},n.INSTANCE=new n,n}();qi.add(ySe.EditorCommonContributions,Vc.INSTANCE);var dY=function(){function n(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._layerHint=!1}return n.prototype.setMaxWidth=function(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")},n.prototype.setWidth=function(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")},n.prototype.setHeight=function(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")},n.prototype.setTop=function(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")},n.prototype.unsetTop=function(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")},n.prototype.setLeft=function(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")},n.prototype.setBottom=function(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")},n.prototype.setRight=function(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")},n.prototype.setFontFamily=function(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)},n.prototype.setFontWeight=function(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)},n.prototype.setFontSize=function(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")},n.prototype.setLineHeight=function(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")},n.prototype.setLetterSpacing=function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")},n.prototype.setClassName=function(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)},n.prototype.toggleClassName=function(e,t){vt(this.domNode,e,t),this._className=this.domNode.className},n.prototype.setDisplay=function(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)},n.prototype.setPosition=function(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)},n.prototype.setVisibility=function(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)},n.prototype.setLayerHinting=function(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.willChange=this._layerHint?"transform":"auto")},n.prototype.setAttribute=function(e,t){this.domNode.setAttribute(e,t)},n.prototype.removeAttribute=function(e){this.domNode.removeAttribute(e)},n.prototype.appendChild=function(e){this.domNode.appendChild(e.domNode)},n.prototype.removeChild=function(e){this.domNode.removeChild(e.domNode)},n}();function st(n){return new dY(n)}function Ts(n,e,t){var r=null,i=null;if(typeof t.value=="function"?(r="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(r="get",i=t.get),!i)throw new Error("not supported");var o="$memoize$"+e;t[r]=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,s)}),this[o]}}var bSe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wSe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ar;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(Ar||(Ar={}));var Bv=function(n){bSe(e,n);function e(){var t=n.call(this)||this;return t.dispatched=!1,t.activeTouches={},t.handle=null,t.targets=[],t._register(ie(document,"touchstart",function(r){return t.onTouchStart(r)})),t._register(ie(document,"touchend",function(r){return t.onTouchEnd(r)})),t._register(ie(document,"touchmove",function(r){return t.onTouchMove(r)})),t}return e.addTarget=function(t){e.isTouchDevice()&&(e.INSTANCE||(e.INSTANCE=new e),e.INSTANCE.targets.push(t))},e.isTouchDevice=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0},e.prototype.dispose=function(){this.handle&&(this.handle.dispose(),this.handle=null),n.prototype.dispose.call(this)},e.prototype.onTouchStart=function(t){var r=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(var i=0,o=t.targetTouches.length;i<o;i++){var s=t.targetTouches.item(i);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:r,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[r],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};var a=this.newGestureEvent(Ar.Start,s.target);a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)},e.prototype.onTouchEnd=function(t){for(var r=Date.now(),i=Object.keys(this.activeTouches).length,o=function(l,f){var h=t.changedTouches.item(l);if(!s.activeTouches.hasOwnProperty(String(h.identifier)))return console.warn("move of an UNKNOWN touch",h),"continue";var d=s.activeTouches[h.identifier],g=Date.now()-d.initialTimeStamp;if(g<e.HOLD_DELAY&&Math.abs(d.initialPageX-Yo(d.rollingPageX))<30&&Math.abs(d.initialPageY-Yo(d.rollingPageY))<30){var v=s.newGestureEvent(Ar.Tap,d.initialTarget);v.pageX=Yo(d.rollingPageX),v.pageY=Yo(d.rollingPageY),s.dispatchEvent(v)}else if(g>=e.HOLD_DELAY&&Math.abs(d.initialPageX-Yo(d.rollingPageX))<30&&Math.abs(d.initialPageY-Yo(d.rollingPageY))<30){var v=s.newGestureEvent(Ar.Contextmenu,d.initialTarget);v.pageX=Yo(d.rollingPageX),v.pageY=Yo(d.rollingPageY),s.dispatchEvent(v)}else if(i===1){var m=Yo(d.rollingPageX),y=Yo(d.rollingPageY),b=Yo(d.rollingTimestamps)-d.rollingTimestamps[0],C=m-d.rollingPageX[0],E=y-d.rollingPageY[0],D=s.targets.filter(function(k){return d.initialTarget instanceof Node&&k.contains(d.initialTarget)});s.inertia(D,r,Math.abs(C)/b,C>0?1:-1,m,Math.abs(E)/b,E>0?1:-1,y)}s.dispatchEvent(s.newGestureEvent(Ar.End,d.initialTarget)),delete s.activeTouches[h.identifier]},s=this,a=0,u=t.changedTouches.length;a<u;a++)o(a);this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)},e.prototype.newGestureEvent=function(t,r){var i=document.createEvent("CustomEvent");return i.initEvent(t,!1,!0),i.initialTarget=r,i},e.prototype.dispatchEvent=function(t){var r=this;this.targets.forEach(function(i){t.initialTarget instanceof Node&&i.contains(t.initialTarget)&&(i.dispatchEvent(t),r.dispatched=!0)})},e.prototype.inertia=function(t,r,i,o,s,a,u,l){var f=this;this.handle=ef(function(){var h=Date.now(),d=h-r,g=0,v=0,m=!0;i+=e.SCROLL_FRICTION*d,a+=e.SCROLL_FRICTION*d,i>0&&(m=!1,g=o*i*d),a>0&&(m=!1,v=u*a*d);var y=f.newGestureEvent(Ar.Change);y.translationX=g,y.translationY=v,t.forEach(function(b){return b.dispatchEvent(y)}),m||f.inertia(t,h,i,o,s+g,a,u,l+v)})},e.prototype.onTouchMove=function(t){for(var r=Date.now(),i=0,o=t.changedTouches.length;i<o;i++){var s=t.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}var a=this.activeTouches[s.identifier],u=this.newGestureEvent(Ar.Change,a.initialTarget);u.translationX=s.pageX-Yo(a.rollingPageX),u.translationY=s.pageY-Yo(a.rollingPageY),u.pageX=s.pageX,u.pageY=s.pageY,this.dispatchEvent(u),a.rollingPageX.length>3&&(a.rollingPageX.shift(),a.rollingPageY.shift(),a.rollingTimestamps.shift()),a.rollingPageX.push(s.pageX),a.rollingPageY.push(s.pageY),a.rollingTimestamps.push(r)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)},e.SCROLL_FRICTION=-.005,e.HOLD_DELAY=700,wSe([Ts],e,"isTouchDevice",null),e}(te);function Wv(n,e){var t=new Rr(e);return t.preventDefault(),{leftButton:t.leftButton,posx:t.posx,posy:t.posy}}var Pd=function(){function n(){this.hooks=new De,this.mouseMoveEventMerger=null,this.mouseMoveCallback=null,this.onStopCallback=null}return n.prototype.dispose=function(){this.stopMonitoring(!1),this.hooks.dispose()},n.prototype.stopMonitoring=function(e){if(this.isMonitoring()){this.hooks.clear(),this.mouseMoveEventMerger=null,this.mouseMoveCallback=null;var t=this.onStopCallback;this.onStopCallback=null,e&&t&&t()}},n.prototype.isMonitoring=function(){return!!this.mouseMoveEventMerger},n.prototype.startMonitoring=function(e,t,r){var i=this;if(!this.isMonitoring()){this.mouseMoveEventMerger=e,this.mouseMoveCallback=t,this.onStopCallback=r;for(var o=xO.getSameOriginWindowChain(),s=0,a=o;s<a.length;s++){var u=a[s];this.hooks.add(z0(u.window.document,"mousemove",function(f){return i.mouseMoveCallback(f)},function(f,h){return i.mouseMoveEventMerger(f,h)})),this.hooks.add(ie(u.window.document,"mouseup",function(f){return i.stopMonitoring(!0)}))}if(xO.hasDifferentOriginAncestor()){var l=o[o.length-1];this.hooks.add(ie(l.window.document,"mouseout",function(f){var h=new Rr(f);h.target.tagName.toLowerCase()==="html"&&i.stopMonitoring(!0)})),this.hooks.add(ie(l.window.document,"mouseover",function(f){var h=new Rr(f);h.target.tagName.toLowerCase()==="html"&&i.stopMonitoring(!0)})),this.hooks.add(ie(l.window.document.body,"mouseleave",function(f){i.stopMonitoring(!0)}))}}},n}(),pY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MF=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toClientCoordinates=function(){return new gY(this.x-nu.scrollX,this.y-nu.scrollY)},n}(),gY=function(){function n(e,t){this.clientX=e,this.clientY=t}return n.prototype.toPageCoordinates=function(){return new MF(this.clientX+nu.scrollX,this.clientY+nu.scrollY)},n}(),CSe=function(){function n(e,t,r,i){this.x=e,this.y=t,this.width=r,this.height=i}return n}();function vY(n){var e=Wr(n);return new CSe(e.left,e.top,e.width,e.height)}var Zg=function(n){pY(e,n);function e(t,r){var i=n.call(this,t)||this;return i.pos=new MF(i.posx,i.posy),i.editorPos=vY(r),i}return e}(Rr),SSe=function(){function n(e){this._editorViewDomNode=e}return n.prototype._create=function(e){return new Zg(e,this._editorViewDomNode)},n.prototype.onContextMenu=function(e,t){var r=this;return ie(e,"contextmenu",function(i){t(r._create(i))})},n.prototype.onMouseUp=function(e,t){var r=this;return ie(e,"mouseup",function(i){t(r._create(i))})},n.prototype.onMouseDown=function(e,t){var r=this;return ie(e,"mousedown",function(i){t(r._create(i))})},n.prototype.onMouseLeave=function(e,t){var r=this;return nF(e,function(i){t(r._create(i))})},n.prototype.onMouseMoveThrottled=function(e,t,r,i){var o=this,s=function(a,u){return r(a,o._create(u))};return z0(e,"mousemove",t,s,i)},n}(),ESe=function(n){pY(e,n);function e(t){var r=n.call(this)||this;return r._editorViewDomNode=t,r._globalMouseMoveMonitor=r._register(new Pd),r._keydownListener=null,r}return e.prototype.startMonitoring=function(t,r,i){var o=this;this._keydownListener=Br(document,"keydown",function(a){var u=a.toKeybinding();u.isModifierKey()||o._globalMouseMoveMonitor.stopMonitoring(!0)},!0);var s=function(a,u){return t(a,new Zg(u,o._editorViewDomNode))};this._globalMouseMoveMonitor.startMonitoring(s,r,function(){o._keydownListener.dispose(),i()})},e}(te),ISe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),K0=function(n){ISe(e,n);function e(){var t=n.call(this)||this;return t._shouldRender=!0,t}return e.prototype.shouldRender=function(){return this._shouldRender},e.prototype.forceShouldRender=function(){this._shouldRender=!0},e.prototype.setShouldRender=function(){this._shouldRender=!0},e.prototype.onDidRender=function(){this._shouldRender=!1},e.prototype.onConfigurationChanged=function(t){return!1},e.prototype.onCursorStateChanged=function(t){return!1},e.prototype.onDecorationsChanged=function(t){return!1},e.prototype.onFlushed=function(t){return!1},e.prototype.onFocusChanged=function(t){return!1},e.prototype.onLanguageConfigurationChanged=function(t){return!1},e.prototype.onLineMappingChanged=function(t){return!1},e.prototype.onLinesChanged=function(t){return!1},e.prototype.onLinesDeleted=function(t){return!1},e.prototype.onLinesInserted=function(t){return!1},e.prototype.onRevealRangeRequest=function(t){return!1},e.prototype.onScrollChanged=function(t){return!1},e.prototype.onTokensChanged=function(t){return!1},e.prototype.onTokensColorsChanged=function(t){return!1},e.prototype.onZonesChanged=function(t){return!1},e.prototype.onThemeChanged=function(t){return!1},e.prototype.handleEvents=function(t){for(var r=!1,i=0,o=t.length;i<o;i++){var s=t[i];switch(s.type){case 1:this.onConfigurationChanged(s)&&(r=!0);break;case 2:this.onCursorStateChanged(s)&&(r=!0);break;case 3:this.onDecorationsChanged(s)&&(r=!0);break;case 4:this.onFlushed(s)&&(r=!0);break;case 5:this.onFocusChanged(s)&&(r=!0);break;case 16:this.onLanguageConfigurationChanged(s)&&(r=!0);break;case 6:this.onLineMappingChanged(s)&&(r=!0);break;case 7:this.onLinesChanged(s)&&(r=!0);break;case 8:this.onLinesDeleted(s)&&(r=!0);break;case 9:this.onLinesInserted(s)&&(r=!0);break;case 10:this.onRevealRangeRequest(s)&&(r=!0);break;case 11:this.onScrollChanged(s)&&(r=!0);break;case 12:this.onTokensChanged(s)&&(r=!0);break;case 13:this.onTokensColorsChanged(s)&&(r=!0);break;case 14:this.onZonesChanged(s)&&(r=!0);break;case 15:this.onThemeChanged(s)&&(r=!0);break;default:console.info("View received unknown event: "),console.info(s)}}r&&(this._shouldRender=!0)},e}(te),xSe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cs=function(n){xSe(e,n);function e(t){var r=n.call(this)||this;return r._context=t,r._context.addEventHandler(r),r}return e.prototype.dispose=function(){this._context.removeEventHandler(this),n.prototype.dispose.call(this)},e}(K0),Eu=function(){function n(){}return n.write=function(e,t){e instanceof dY,e.setAttribute("data-mprt",String(t))},n.read=function(e){var t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)},n.collect=function(e,t){for(var r=[],i=0;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(r[i++]=this.read(e)),e=e.parentElement;for(var o=new Uint8Array(i),s=0;s<i;s++)o[s]=r[i-s-1];return o},n}(),DSe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LSe=function(){function n(e,t){this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;var r=this._viewLayout.getCurrentViewport();this.scrollTop=r.top,this.scrollLeft=r.left,this.viewportWidth=r.width,this.viewportHeight=r.height}return n.prototype.getScrolledTopFromAbsoluteTop=function(e){return e-this.scrollTop},n.prototype.getVerticalOffsetForLineNumber=function(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)},n.prototype.getDecorationsInViewport=function(){return this.viewportData.getDecorationsInViewport()},n}(),kSe=function(n){DSe(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o._viewLines=i,o}return e.prototype.linesVisibleRangesForRange=function(t,r){return this._viewLines.linesVisibleRangesForRange(t,r)},e.prototype.visibleRangeForPosition=function(t){return this._viewLines.visibleRangeForPosition(t)},e}(LSe),TSe=function(){function n(e,t){this.lineNumber=e,this.ranges=t}return n}(),Hc=function(){function n(e,t){this.left=Math.round(e),this.width=Math.round(t)}return n.prototype.toString=function(){return"["+this.left+","+this.width+"]"},n}(),K8=function(){function n(e,t){this.left=e,this.width=t}return n.prototype.toString=function(){return"["+this.left+","+this.width+"]"},n.compare=function(e,t){return e.left-t.left},n}(),_T=function(){function n(){}return n._createRange=function(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange},n._detachRange=function(e,t){e.selectNodeContents(t)},n._readClientRects=function(e,t,r,i,o){var s=this._createRange();try{return s.setStart(e,t),s.setEnd(r,i),s.getClientRects()}catch{return null}finally{this._detachRange(s,o)}},n._mergeAdjacentRanges=function(e){if(e.length===1)return[new Hc(e[0].left,e[0].width)];e.sort(K8.compare);for(var t=[],r=0,i=e[0].left,o=e[0].width,s=1,a=e.length;s<a;s++){var u=e[s],l=u.left,f=u.width;i+o+.9>=l?o=Math.max(o,l+f-i):(t[r++]=new Hc(i,o),i=l,o=f)}return t[r++]=new Hc(i,o),t},n._createHorizontalRangesFromClientRects=function(e,t){if(!e||e.length===0)return null;for(var r=[],i=0,o=e.length;i<o;i++){var s=e[i];r[i]=new K8(Math.max(0,s.left-t),s.width)}return this._mergeAdjacentRanges(r)},n.readHorizontalRanges=function(e,t,r,i,o,s,a){var u=0,l=e.children.length-1;if(u>l)return null;t=Math.min(l,Math.max(u,t)),i=Math.min(l,Math.max(u,i)),t!==i&&i>0&&o===0&&(i--,o=1073741824);var f=e.children[t].firstChild,h=e.children[i].firstChild;if((!f||!h)&&(!f&&r===0&&t>0&&(f=e.children[t-1].firstChild,r=1073741824),!h&&o===0&&i>0&&(h=e.children[i-1].firstChild,o=1073741824)),!f||!h)return null;r=Math.min(f.textContent.length,Math.max(0,r)),o=Math.min(h.textContent.length,Math.max(0,o));var d=this._readClientRects(f,r,h,o,a);return this._createHorizontalRangesFromClientRects(d,s)},n}(),Ir=xt("themeService");function os(n){return{id:n}}var NSe="dark",Xl="light",Xg="hc";function aS(n){switch(n){case NSe:return"vs-dark";case Xg:return"hc-black";default:return"vs"}}var mY={ThemingContribution:"base.contributions.theming"},ASe=function(){function n(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new j}return n.prototype.onThemeChange=function(e){var t=this;return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),en(function(){var r=t.themingParticipants.indexOf(e);t.themingParticipants.splice(r,1)})},n.prototype.getThemingParticipants=function(){return this.themingParticipants},n}(),_Y=new ASe;qi.add(mY.ThemingContribution,_Y);function Xt(n){return _Y.onThemeChange(n)}var OSe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RSe=function(){return Da?!0:!(Rl||wl||sI)}(),G8=uu,Y8=function(){function n(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}return Object.defineProperty(n.prototype,"clientRectDeltaLeft",{get:function(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft},enumerable:!0,configurable:!0}),n}(),Z8=function(){function n(e,t){this.themeType=t,this.renderWhitespace=e.editor.viewInfo.renderWhitespace,this.renderControlCharacters=e.editor.viewInfo.renderControlCharacters,this.spaceWidth=e.editor.fontInfo.spaceWidth,this.useMonospaceOptimizations=e.editor.fontInfo.isMonospace&&!e.editor.viewInfo.disableMonospaceOptimizations,this.canUseHalfwidthRightwardsArrow=e.editor.fontInfo.canUseHalfwidthRightwardsArrow,this.lineHeight=e.editor.lineHeight,this.stopRenderingLineAfter=e.editor.viewInfo.stopRenderingLineAfter,this.fontLigatures=e.editor.viewInfo.fontLigatures}return n.prototype.equals=function(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures},n}(),ug=function(){function n(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}return n.prototype.getDomNode=function(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null},n.prototype.setDomNode=function(e){if(this._renderedViewLine)this._renderedViewLine.domNode=st(e);else throw new Error("I have no rendered view line to set the dom node to...")},n.prototype.onContentChanged=function(){this._isMaybeInvalid=!0},n.prototype.onTokensChanged=function(){this._isMaybeInvalid=!0},n.prototype.onDecorationsChanged=function(){this._isMaybeInvalid=!0},n.prototype.onOptionsChanged=function(e){this._isMaybeInvalid=!0,this._options=e},n.prototype.onSelectionChanged=function(){return G8||this._options.themeType===Xg||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1},n.prototype.renderLine=function(e,t,r,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;var o=r.getViewLineRenderingData(e),s=this._options,a=Uy.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn),u=null;if(G8||s.themeType===Xg||this._options.renderWhitespace==="selection")for(var l=r.selections,f=0,h=l;f<h.length;f++){var d=h[f];if(!(d.endLineNumber<e||d.startLineNumber>e)){var g=d.startLineNumber===e?d.startColumn:o.minColumn,v=d.endLineNumber===e?d.endColumn:o.maxColumn;g<v&&(this._options.renderWhitespace!=="selection"?a.push(new Uy(g,v,"inline-selected-text",0)):(u||(u=[]),u.push(new FCe(g-1,v-1))))}}var m=new Pv(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,a,o.tabSize,s.spaceWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures,u);if(this._renderedViewLine&&this._renderedViewLine.input.equals(m))return!1;i.appendASCIIString('<div style="top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;height:"),i.appendASCIIString(String(this._options.lineHeight)),i.appendASCIIString('px;" class="'),i.appendASCIIString(n.CLASS_NAME),i.appendASCIIString('">');var y=DF(m,i);i.appendASCIIString("</div>");var b=null;return RSe&&o.isBasicASCII&&s.useMonospaceOptimizations&&y.containsForeignElements===0&&o.content.length<300&&m.lineTokens.getCount()<100&&(b=new MSe(this._renderedViewLine?this._renderedViewLine.domNode:null,m,y.characterMapping)),b||(b=FSe(this._renderedViewLine?this._renderedViewLine.domNode:null,m,y.characterMapping,y.containsRTL,y.containsForeignElements)),this._renderedViewLine=b,!0},n.prototype.layoutLine=function(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))},n.prototype.getWidth=function(){return this._renderedViewLine?this._renderedViewLine.getWidth():0},n.prototype.getWidthIsFast=function(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0},n.prototype.getVisibleRangesForRange=function(e,t,r){if(!this._renderedViewLine)return null;e=e|0,t=t|0,e=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,e)),t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t));var i=this._renderedViewLine.input.stopRenderingLineAfter|0;return i!==-1&&e>i&&t>i?null:(i!==-1&&e>i&&(e=i),i!==-1&&t>i&&(t=i),this._renderedViewLine.getVisibleRangesForRange(e,t,r))},n.prototype.getColumnOfNodeOffset=function(e,t,r){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,r):1},n.CLASS_NAME="view-line",n}(),MSe=function(){function n(e,t,r){this.domNode=e,this.input=t,this._characterMapping=r,this._charWidth=t.spaceWidth}return n.prototype.getWidth=function(){return this._getCharPosition(this._characterMapping.length)},n.prototype.getWidthIsFast=function(){return!0},n.prototype.getVisibleRangesForRange=function(e,t,r){var i=this._getCharPosition(e),o=this._getCharPosition(t);return[new Hc(i,o-i)]},n.prototype._getCharPosition=function(e){var t=this._characterMapping.getAbsoluteOffsets();return t.length===0?0:Math.round(this._charWidth*t[e-1])},n.prototype.getColumnOfNodeOffset=function(e,t,r){for(var i=t.textContent.length,o=-1;t;)t=t.previousSibling,o++;var s=this._characterMapping.partDataToCharOffset(o,i,r);return s+1},n}(),yY=function(){function n(e,t,r,i,o){if(this.domNode=e,this.input=t,this._characterMapping=r,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Int32Array(Math.max(2,this._characterMapping.length+1));for(var s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}return n.prototype._getReadingTarget=function(){return this.domNode.domNode.firstChild},n.prototype.getWidth=function(){return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget().offsetWidth),this._cachedWidth},n.prototype.getWidthIsFast=function(){return this._cachedWidth!==-1},n.prototype.getVisibleRangesForRange=function(e,t,r){if(this._pixelOffsetCache!==null){var i=this._readPixelOffset(e,r);if(i===-1)return null;var o=this._readPixelOffset(t,r);return o===-1?null:[new Hc(i,o-i)]}return this._readVisibleRangesForRange(e,t,r)},n.prototype._readVisibleRangesForRange=function(e,t,r){if(e===t){var i=this._readPixelOffset(e,r);return i===-1?null:[new Hc(i,0)]}else return this._readRawVisibleRangesForRange(e,t,r)},n.prototype._readPixelOffset=function(e,t){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth()}if(this._pixelOffsetCache!==null){var r=this._pixelOffsetCache[e];if(r!==-1)return r;var i=this._actualReadPixelOffset(e,t);return this._pixelOffsetCache[e]=i,i}return this._actualReadPixelOffset(e,t)},n.prototype._actualReadPixelOffset=function(e,t){if(this._characterMapping.length===0){var r=_T.readHorizontalRanges(this._getReadingTarget(),0,0,0,0,t.clientRectDeltaLeft,t.endNode);return!r||r.length===0?-1:r[0].left}if(e===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();var i=this._characterMapping.charOffsetToPartData(e-1),o=hc.getPartIndex(i),s=hc.getCharIndex(i),a=_T.readHorizontalRanges(this._getReadingTarget(),o,s,o,s,t.clientRectDeltaLeft,t.endNode);return!a||a.length===0?-1:a[0].left},n.prototype._readRawVisibleRangesForRange=function(e,t,r){if(e===1&&t===this._characterMapping.length)return[new Hc(0,this.getWidth())];var i=this._characterMapping.charOffsetToPartData(e-1),o=hc.getPartIndex(i),s=hc.getCharIndex(i),a=this._characterMapping.charOffsetToPartData(t-1),u=hc.getPartIndex(a),l=hc.getCharIndex(a);return _T.readHorizontalRanges(this._getReadingTarget(),o,s,u,l,r.clientRectDeltaLeft,r.endNode)},n.prototype.getColumnOfNodeOffset=function(e,t,r){for(var i=t.textContent.length,o=-1;t;)t=t.previousSibling,o++;var s=this._characterMapping.partDataToCharOffset(o,i,r);return s+1},n}(),PSe=function(n){OSe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._readVisibleRangesForRange=function(t,r,i){var o=n.prototype._readVisibleRangesForRange.call(this,t,r,i);if(!o||o.length===0||t===r||t===1&&r===this._characterMapping.length)return o;if(!this.input.containsRTL){var s=this._readPixelOffset(r,i);if(s!==-1){var a=o[o.length-1];a.left<s&&(a.width=s-a.left)}}return o},e}(yY),FSe=function(){return Kh?BSe:WSe}();function BSe(n,e,t,r,i){return new PSe(n,e,t,r,i)}function WSe(n,e,t,r,i){return new yY(n,e,t,r,i)}var X8=function(){function n(e,t){this.beforeVersionId=e,this.beforeCursorState=t,this.afterCursorState=null,this.afterVersionId=-1,this.editOperations=[]}return n.prototype.undo=function(e){for(var t=this.editOperations.length-1;t>=0;t--)this.editOperations[t]={operations:e.applyEdits(this.editOperations[t].operations)}},n.prototype.redo=function(e){for(var t=0;t<this.editOperations.length;t++)this.editOperations[t]={operations:e.applyEdits(this.editOperations[t].operations)}},n}();function YO(n){var e=n.getEOL();return e===`
`?0:1}var VSe=function(){function n(e,t){this.beforeVersionId=e,this.beforeCursorState=null,this.afterCursorState=null,this.afterVersionId=-1,this.eol=t}return n.prototype.undo=function(e){var t=YO(e);e.setEOL(this.eol),this.eol=t},n.prototype.redo=function(e){var t=YO(e);e.setEOL(this.eol),this.eol=t},n}(),Q8=function(){function n(e){this.model=e,this.currentOpenStackElement=null,this.past=[],this.future=[]}return n.prototype.pushStackElement=function(){this.currentOpenStackElement!==null&&(this.past.push(this.currentOpenStackElement),this.currentOpenStackElement=null)},n.prototype.clear=function(){this.currentOpenStackElement=null,this.past=[],this.future=[]},n.prototype.pushEOL=function(e){this.future=[],this.currentOpenStackElement&&this.pushStackElement();var t=YO(this.model),r=new VSe(this.model.getAlternativeVersionId(),t);this.model.setEOL(e),r.afterVersionId=this.model.getVersionId(),this.currentOpenStackElement=r,this.pushStackElement()},n.prototype.pushEditOperation=function(e,t,r){this.future=[];var i=null;this.currentOpenStackElement&&(this.currentOpenStackElement instanceof X8?i=this.currentOpenStackElement:this.pushStackElement()),this.currentOpenStackElement||(i=new X8(this.model.getAlternativeVersionId(),e),this.currentOpenStackElement=i);var o={operations:this.model.applyEdits(t)};return i.editOperations.push(o),i.afterCursorState=n._computeCursorState(r,o.operations),i.afterVersionId=this.model.getVersionId(),i.afterCursorState},n._computeCursorState=function(e,t){try{return e?e(t):null}catch(r){return Le(r),null}},n.prototype.undo=function(){if(this.pushStackElement(),this.past.length>0){var e=this.past.pop();try{e.undo(this.model)}catch(t){return Le(t),this.clear(),null}return this.future.push(e),{selections:e.beforeCursorState,recordedVersionId:e.beforeVersionId}}return null},n.prototype.canUndo=function(){return this.past.length>0||this.currentOpenStackElement!==null},n.prototype.redo=function(){if(this.future.length>0){var e=this.future.pop();try{e.redo(this.model)}catch(t){return Le(t),this.clear(),null}return this.past.push(e),{selections:e.afterCursorState,recordedVersionId:e.afterVersionId}}return null},n.prototype.canRedo=function(){return this.future.length>0},n}(),HSe=function(){function n(){this.spacesDiff=0,this.looksLikeAlignment=!1}return n}();function USe(n,e,t,r,i){i.spacesDiff=0,i.looksLikeAlignment=!1;var o;for(o=0;o<e&&o<r;o++){var s=n.charCodeAt(o),a=t.charCodeAt(o);if(s!==a)break}for(var u=0,l=0,f=o;f<e;f++){var s=n.charCodeAt(f);s===32?u++:l++}for(var h=0,d=0,f=o;f<r;f++){var a=t.charCodeAt(f);a===32?h++:d++}if(!(u>0&&l>0)&&!(h>0&&d>0)){var g=Math.abs(l-d),v=Math.abs(u-h);if(g===0){i.spacesDiff=v,v>0&&0<=h-1&&h-1<n.length&&h<t.length&&t.charCodeAt(h)!==32&&n.charCodeAt(h-1)===32&&(i.looksLikeAlignment=!0);return}if(v%g===0){i.spacesDiff=v/g;return}}}function J8(n,e,t){for(var r=Math.min(n.getLineCount(),1e4),i=0,o=0,s="",a=0,u=[2,4,6,8,3,5,7],l=8,f=[0,0,0,0,0,0,0,0,0],h=new HSe,d=1;d<=r;d++){for(var g=n.getLineLength(d),v=n.getLineContent(d),m=g<=65536,y=!1,b=0,C=0,E=0,D=0,k=g;D<k;D++){var I=m?v.charCodeAt(D):n.getLineCharCode(d,D);if(I===9)E++;else if(I===32)C++;else{y=!0,b=D;break}}if(y&&(E>0?i++:C>1&&o++,USe(s,a,v,b,h),!(h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))){var T=h.spacesDiff;T<=l&&f[T]++,s=v,a=b}}var A=t;i!==o&&(A=i<o);var M=e;if(A){var L=A?0:.1*r;u.forEach(function(F){var W=f[F];W>L&&(L=W,M=F)}),M===4&&f[4]>0&&f[2]>0&&f[2]>=f[4]/2&&(M=2)}return{insertSpaces:A,tabSize:M}}function ki(n){return(n.metadata&1)>>>0}function Wt(n,e){n.metadata=n.metadata&254|e<<0}function wr(n){return(n.metadata&2)>>>1===1}function Pt(n,e){n.metadata=n.metadata&253|(e?1:0)<<1}function bY(n){return(n.metadata&4)>>>2===1}function eU(n,e){n.metadata=n.metadata&251|(e?1:0)<<2}function yT(n){return(n.metadata&8)>>>3===1}function tU(n,e){n.metadata=n.metadata&247|(e?1:0)<<3}function jSe(n){return(n.metadata&48)>>>4}function nU(n,e){n.metadata=n.metadata&207|e<<4}function zSe(n){return(n.metadata&64)>>>6===1}function rU(n,e){n.metadata=n.metadata&191|(e?1:0)<<6}var wY=function(){function n(e,t,r){this.metadata=0,this.parent=this,this.left=this,this.right=this,Wt(this,1),this.start=t,this.end=r,this.delta=0,this.maxEnd=r,this.id=e,this.ownerId=0,this.options=null,eU(this,!1),nU(this,1),tU(this,!1),rU(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=r,this.range=null,Pt(this,!1)}return n.prototype.reset=function(e,t,r,i){this.start=t,this.end=r,this.maxEnd=r,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=r,this.range=i},n.prototype.setOptions=function(e){this.options=e;var t=this.options.className;eU(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),nU(this,this.options.stickiness),tU(this,!!(this.options.overviewRuler&&this.options.overviewRuler.color)),rU(this,this.options.collapseOnReplaceEdit)},n.prototype.setCachedOffsets=function(e,t,r){this.cachedVersionId!==r&&(this.range=null),this.cachedVersionId=r,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t},n.prototype.detach=function(){this.parent=null,this.left=null,this.right=null},n}(),$e=new wY(null,0,0);$e.parent=$e;$e.left=$e;$e.right=$e;Wt($e,0);var iU=function(){function n(){this.root=$e,this.requestNormalizeDelta=!1}return n.prototype.intervalSearch=function(e,t,r,i,o){return this.root===$e?[]:QSe(this,e,t,r,i,o)},n.prototype.search=function(e,t,r){return this.root===$e?[]:XSe(this,e,t,r)},n.prototype.collectNodesFromOwner=function(e){return YSe(this,e)},n.prototype.collectNodesPostOrder=function(){return ZSe(this)},n.prototype.insert=function(e){oU(this,e),this._normalizeDeltaIfNecessary()},n.prototype.delete=function(e){sU(this,e),this._normalizeDeltaIfNecessary()},n.prototype.resolveNode=function(e,t){for(var r=e,i=0;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;var o=r.start+i,s=r.end+i;r.setCachedOffsets(o,s,t)},n.prototype.acceptReplace=function(e,t,r,i){for(var o=KSe(this,e,e+t),s=0,a=o.length;s<a;s++){var u=o[s];sU(this,u)}this._normalizeDeltaIfNecessary(),GSe(this,e,e+t,r),this._normalizeDeltaIfNecessary();for(var s=0,a=o.length;s<a;s++){var u=o[s];u.start=u.cachedAbsoluteStart,u.end=u.cachedAbsoluteEnd,$Se(u,e,e+t,r,i),u.maxEnd=u.end,oU(this,u)}this._normalizeDeltaIfNecessary()},n.prototype._normalizeDeltaIfNecessary=function(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,qSe(this))},n}();function qSe(n){for(var e=n.root,t=0;e!==$e;){if(e.left!==$e&&!wr(e.left)){e=e.left;continue}if(e.right!==$e&&!wr(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,nf(e),Pt(e,!0),Pt(e.left,!1),Pt(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Pt(n.root,!1)}function Mp(n,e,t,r){return n<t?!0:n>t||r===1?!1:r===2?!0:e}function $Se(n,e,t,r,i){var o=jSe(n),s=o===0||o===2,a=o===1||o===2,u=t-e,l=r,f=Math.min(u,l),h=n.start,d=!1,g=n.end,v=!1;e<=h&&g<=t&&zSe(n)&&(n.start=e,d=!0,n.end=e,v=!0);{var m=i?1:u>0?2:0;!d&&Mp(h,s,e,m)&&(d=!0),!v&&Mp(g,a,e,m)&&(v=!0)}if(f>0&&!i){var m=u>l?2:0;!d&&Mp(h,s,e+f,m)&&(d=!0),!v&&Mp(g,a,e+f,m)&&(v=!0)}{var m=i?1:0;!d&&Mp(h,s,t,m)&&(n.start=e+l,d=!0),!v&&Mp(g,a,t,m)&&(n.end=e+l,v=!0)}var y=l-u;d||(n.start=Math.max(0,h+y)),v||(n.end=Math.max(0,g+y)),n.start>n.end&&(n.end=n.start)}function KSe(n,e,t){for(var r=n.root,i=0,o=0,s=0,a=0,u=[],l=0;r!==$e;){if(wr(r)){Pt(r.left,!1),Pt(r.right,!1),r===r.parent.right&&(i-=r.parent.delta),r=r.parent;continue}if(!wr(r.left)){if(o=i+r.maxEnd,o<e){Pt(r,!0);continue}if(r.left!==$e){r=r.left;continue}}if(s=i+r.start,s>t){Pt(r,!0);continue}if(a=i+r.end,a>=e&&(r.setCachedOffsets(s,a,0),u[l++]=r),Pt(r,!0),r.right!==$e&&!wr(r.right)){i+=r.delta,r=r.right;continue}}return Pt(n.root,!1),u}function GSe(n,e,t,r){for(var i=n.root,o=0,s=0,a=0,u=r-(t-e);i!==$e;){if(wr(i)){Pt(i.left,!1),Pt(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),nf(i),i=i.parent;continue}if(!wr(i.left)){if(s=o+i.maxEnd,s<e){Pt(i,!0);continue}if(i.left!==$e){i=i.left;continue}}if(a=o+i.start,a>t){i.start+=u,i.end+=u,i.delta+=u,(i.delta<-1073741824||i.delta>1073741824)&&(n.requestNormalizeDelta=!0),Pt(i,!0);continue}if(Pt(i,!0),i.right!==$e&&!wr(i.right)){o+=i.delta,i=i.right;continue}}Pt(n.root,!1)}function YSe(n,e){for(var t=n.root,r=[],i=0;t!==$e;){if(wr(t)){Pt(t.left,!1),Pt(t.right,!1),t=t.parent;continue}if(t.left!==$e&&!wr(t.left)){t=t.left;continue}if(t.ownerId===e&&(r[i++]=t),Pt(t,!0),t.right!==$e&&!wr(t.right)){t=t.right;continue}}return Pt(n.root,!1),r}function ZSe(n){for(var e=n.root,t=[],r=0;e!==$e;){if(wr(e)){Pt(e.left,!1),Pt(e.right,!1),e=e.parent;continue}if(e.left!==$e&&!wr(e.left)){e=e.left;continue}if(e.right!==$e&&!wr(e.right)){e=e.right;continue}t[r++]=e,Pt(e,!0)}return Pt(n.root,!1),t}function XSe(n,e,t,r){for(var i=n.root,o=0,s=0,a=0,u=[],l=0;i!==$e;){if(wr(i)){Pt(i.left,!1),Pt(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),i=i.parent;continue}if(i.left!==$e&&!wr(i.left)){i=i.left;continue}s=o+i.start,a=o+i.end,i.setCachedOffsets(s,a,r);var f=!0;if(e&&i.ownerId&&i.ownerId!==e&&(f=!1),t&&bY(i)&&(f=!1),f&&(u[l++]=i),Pt(i,!0),i.right!==$e&&!wr(i.right)){o+=i.delta,i=i.right;continue}}return Pt(n.root,!1),u}function QSe(n,e,t,r,i,o){for(var s=n.root,a=0,u=0,l=0,f=0,h=[],d=0;s!==$e;){if(wr(s)){Pt(s.left,!1),Pt(s.right,!1),s===s.parent.right&&(a-=s.parent.delta),s=s.parent;continue}if(!wr(s.left)){if(u=a+s.maxEnd,u<e){Pt(s,!0);continue}if(s.left!==$e){s=s.left;continue}}if(l=a+s.start,l>t){Pt(s,!0);continue}if(f=a+s.end,f>=e){s.setCachedOffsets(l,f,o);var g=!0;r&&s.ownerId&&s.ownerId!==r&&(g=!1),i&&bY(s)&&(g=!1),g&&(h[d++]=s)}if(Pt(s,!0),s.right!==$e&&!wr(s.right)){a+=s.delta,s=s.right;continue}}return Pt(n.root,!1),h}function oU(n,e){if(n.root===$e)return e.parent=$e,e.left=$e,e.right=$e,Wt(e,0),n.root=e,n.root;JSe(n,e),sc(e.parent);for(var t=e;t!==n.root&&ki(t.parent)===1;)if(t.parent===t.parent.parent.left){var r=t.parent.parent.right;ki(r)===1?(Wt(t.parent,0),Wt(r,0),Wt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,K_(n,t)),Wt(t.parent,0),Wt(t.parent.parent,1),G_(n,t.parent.parent))}else{var r=t.parent.parent.left;ki(r)===1?(Wt(t.parent,0),Wt(r,0),Wt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,G_(n,t)),Wt(t.parent,0),Wt(t.parent.parent,1),K_(n,t.parent.parent))}return Wt(n.root,0),e}function JSe(n,e){for(var t=0,r=n.root,i=e.start,o=e.end;;){var s=tEe(i,o,r.start+t,r.end+t);if(s<0)if(r.left===$e){e.start-=t,e.end-=t,e.maxEnd-=t,r.left=e;break}else r=r.left;else if(r.right===$e){e.start-=t+r.delta,e.end-=t+r.delta,e.maxEnd-=t+r.delta,r.right=e;break}else t+=r.delta,r=r.right}e.parent=r,e.left=$e,e.right=$e,Wt(e,1)}function sU(n,e){var t,r;if(e.left===$e?(t=e.right,r=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===$e?(t=e.left,r=e):(r=eEe(e.right),t=r.right,t.start+=r.delta,t.end+=r.delta,t.delta+=r.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),r.start+=e.delta,r.end+=e.delta,r.delta=e.delta,(r.delta<-1073741824||r.delta>1073741824)&&(n.requestNormalizeDelta=!0)),r===n.root){n.root=t,Wt(t,0),e.detach(),bT(),nf(t),n.root.parent=$e;return}var i=ki(r)===1;if(r===r.parent.left?r.parent.left=t:r.parent.right=t,r===e?t.parent=r.parent:(r.parent===e?t.parent=r:t.parent=r.parent,r.left=e.left,r.right=e.right,r.parent=e.parent,Wt(r,ki(e)),e===n.root?n.root=r:e===e.parent.left?e.parent.left=r:e.parent.right=r,r.left!==$e&&(r.left.parent=r),r.right!==$e&&(r.right.parent=r)),e.detach(),i){sc(t.parent),r!==e&&(sc(r),sc(r.parent)),bT();return}sc(t),sc(t.parent),r!==e&&(sc(r),sc(r.parent));for(var o;t!==n.root&&ki(t)===0;)t===t.parent.left?(o=t.parent.right,ki(o)===1&&(Wt(o,0),Wt(t.parent,1),K_(n,t.parent),o=t.parent.right),ki(o.left)===0&&ki(o.right)===0?(Wt(o,1),t=t.parent):(ki(o.right)===0&&(Wt(o.left,0),Wt(o,1),G_(n,o),o=t.parent.right),Wt(o,ki(t.parent)),Wt(t.parent,0),Wt(o.right,0),K_(n,t.parent),t=n.root)):(o=t.parent.left,ki(o)===1&&(Wt(o,0),Wt(t.parent,1),G_(n,t.parent),o=t.parent.left),ki(o.left)===0&&ki(o.right)===0?(Wt(o,1),t=t.parent):(ki(o.left)===0&&(Wt(o.right,0),Wt(o,1),K_(n,o),o=t.parent.left),Wt(o,ki(t.parent)),Wt(t.parent,0),Wt(o.left,0),G_(n,t.parent),t=n.root));Wt(t,0),bT()}function eEe(n){for(;n.left!==$e;)n=n.left;return n}function bT(){$e.parent=$e,$e.delta=0,$e.start=0,$e.end=0}function K_(n,e){var t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==$e&&(t.left.parent=e),t.parent=e.parent,e.parent===$e?n.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,nf(e),nf(t)}function G_(n,e){var t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(n.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==$e&&(t.right.parent=e),t.parent=e.parent,e.parent===$e?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,nf(e),nf(t)}function CY(n){var e=n.end;if(n.left!==$e){var t=n.left.maxEnd;t>e&&(e=t)}if(n.right!==$e){var r=n.right.maxEnd+n.delta;r>e&&(e=r)}return e}function nf(n){n.maxEnd=CY(n)}function sc(n){for(;n!==$e;){var e=CY(n);if(n.maxEnd===e)return;n.maxEnd=e,n=n.parent}}function tEe(n,e,t,r){return n===t?e-r:n-t}var ZO=function(){function n(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}return n.prototype.next=function(){if(this.right!==Be)return PF(this.right);for(var e=this;e.parent!==Be&&e.parent.left!==e;)e=e.parent;return e.parent===Be?Be:e.parent},n.prototype.prev=function(){if(this.left!==Be)return SY(this.left);for(var e=this;e.parent!==Be&&e.parent.right!==e;)e=e.parent;return e.parent===Be?Be:e.parent},n.prototype.detach=function(){this.parent=null,this.left=null,this.right=null},n}(),Be=new ZO(null,0);Be.parent=Be;Be.left=Be;Be.right=Be;Be.color=0;function PF(n){for(;n.left!==Be;)n=n.left;return n}function SY(n){for(;n.right!==Be;)n=n.right;return n}function FF(n){return n===Be?0:n.size_left+n.piece.length+FF(n.right)}function BF(n){return n===Be?0:n.lf_left+n.piece.lineFeedCnt+BF(n.right)}function wT(){Be.parent=Be}function Y_(n,e){var t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Be&&(t.left.parent=e),t.parent=e.parent,e.parent===Be?n.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function Z_(n,e){var t=e.left;e.left=t.right,t.right!==Be&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Be?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function eC(n,e){var t,r;if(e.left===Be?(r=e,t=r.right):e.right===Be?(r=e,t=r.left):(r=PF(e.right),t=r.right),r===n.root){n.root=t,t.color=0,e.detach(),wT(),n.root.parent=Be;return}var i=r.color===1;if(r===r.parent.left?r.parent.left=t:r.parent.right=t,r===e?(t.parent=r.parent,S_(n,t)):(r.parent===e?t.parent=r:t.parent=r.parent,S_(n,t),r.left=e.left,r.right=e.right,r.parent=e.parent,r.color=e.color,e===n.root?n.root=r:e===e.parent.left?e.parent.left=r:e.parent.right=r,r.left!==Be&&(r.left.parent=r),r.right!==Be&&(r.right.parent=r),r.size_left=e.size_left,r.lf_left=e.lf_left,S_(n,r)),e.detach(),t.parent.left===t){var o=FF(t),s=BF(t);if(o!==t.parent.size_left||s!==t.parent.lf_left){var a=o-t.parent.size_left,u=s-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=s,Ku(n,t.parent,a,u)}}if(S_(n,t.parent),i){wT();return}for(var l;t!==n.root&&t.color===0;)t===t.parent.left?(l=t.parent.right,l.color===1&&(l.color=0,t.parent.color=1,Y_(n,t.parent),l=t.parent.right),l.left.color===0&&l.right.color===0?(l.color=1,t=t.parent):(l.right.color===0&&(l.left.color=0,l.color=1,Z_(n,l),l=t.parent.right),l.color=t.parent.color,t.parent.color=0,l.right.color=0,Y_(n,t.parent),t=n.root)):(l=t.parent.left,l.color===1&&(l.color=0,t.parent.color=1,Z_(n,t.parent),l=t.parent.left),l.left.color===0&&l.right.color===0?(l.color=1,t=t.parent):(l.left.color===0&&(l.right.color=0,l.color=1,Y_(n,l),l=t.parent.left),l.color=t.parent.color,t.parent.color=0,l.left.color=0,Z_(n,t.parent),t=n.root));t.color=0,wT()}function aU(n,e){for(S_(n,e);e!==n.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){var t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,Y_(n,e)),e.parent.color=0,e.parent.parent.color=1,Z_(n,e.parent.parent))}else{var t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,Z_(n,e)),e.parent.color=0,e.parent.parent.color=1,Y_(n,e.parent.parent))}n.root.color=0}function Ku(n,e,t,r){for(;e!==n.root&&e!==Be;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=r),e=e.parent}function S_(n,e){var t=0,r=0;if(e!==n.root){if(t===0){for(;e!==n.root&&e===e.parent.right;)e=e.parent;if(e===n.root)return;e=e.parent,t=FF(e.left)-e.size_left,r=BF(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=r}for(;e!==n.root&&(t!==0||r!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=r),e=e.parent}}var nEe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rEe=function(n){nEe(e,n);function e(t){for(var r=n.call(this,0)||this,i=0,o=t.length;i<o;i++)r.set(t.charCodeAt(i),2);return r.set(32,1),r.set(9,1),r}return e}(dI);function iEe(n){var e={};return function(t){return e.hasOwnProperty(t)||(e[t]=n(t)),e[t]}}var Nu=iEe(function(n){return new rEe(n)}),oEe=999,yh=function(){function n(e,t,r,i){this.searchString=e,this.isRegex=t,this.matchCase=r,this.wordSeparators=i}return n.prototype.parseSearchRequest=function(){if(this.searchString==="")return null;var e;this.isRegex?e=sEe(this.searchString):e=this.searchString.indexOf(`
`)>=0;var t=null;try{t=sF(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0})}catch{return null}if(!t)return null;var r=!this.isRegex&&!e;return r&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(r=this.matchCase),new aEe(t,this.wordSeparators?Nu(this.wordSeparators):null,r?this.searchString:null)},n}();function sEe(n){if(!n||n.length===0)return!1;for(var e=0,t=n.length;e<t;e++){var r=n.charCodeAt(e);if(r===92){if(e++,e>=t)break;var i=n.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}var aEe=function(){function n(e,t,r){this.regex=e,this.wordSeparators=t,this.simpleSearch=r}return n}();function Eh(n,e,t){if(!t)return new My(n,null);for(var r=[],i=0,o=e.length;i<o;i++)r[i]=e[i];return new My(n,r)}var uU=function(){function n(e){for(var t=[],r=0,i=0,o=e.length;i<o;i++)e.charCodeAt(i)===10&&(t[r++]=i);this._lineFeedsOffsets=t}return n.prototype.findLineFeedCountBeforeOffset=function(e){var t=this._lineFeedsOffsets,r=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;r<i;){var o=r+((i-r)/2>>0);t[o]>=e?i=o-1:t[o+1]>=e?(r=o,i=o):r=o+1}return r+1},n}(),tC=function(){function n(){}return n.findMatches=function(e,t,r,i,o){var s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,r,new E_(s.wordSeparators,s.regex),i,o):this._doFindMatchesLineByLine(e,r,s,i,o):[]},n._getMultilineMatchRange=function(e,t,r,i,o,s){var a,u=0;i?(u=i.findLineFeedCountBeforeOffset(o),a=t+o+u):a=t+o;var l;if(i){var f=i.findLineFeedCountBeforeOffset(o+s.length),h=f-u;l=a+s.length+h}else l=a+s.length;var d=e.getPositionAt(a),g=e.getPositionAt(l);return new R(d.lineNumber,d.column,g.lineNumber,g.column)},n._doFindMatchesMultiline=function(e,t,r,i,o){var s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),u=e.getEOL()===`\r
`?new uU(a):null,l=[],f=0,h;for(r.reset(0);h=r.next(a);)if(l[f++]=Eh(this._getMultilineMatchRange(e,s,a,u,h.index,h[0]),h,i),f>=o)return l;return l},n._doFindMatchesLineByLine=function(e,t,r,i,o){var s=[],a=0;if(t.startLineNumber===t.endLineNumber){var u=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(r,u,t.startLineNumber,t.startColumn-1,a,s,i,o),s}var l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(r,l,t.startLineNumber,t.startColumn-1,a,s,i,o);for(var f=t.startLineNumber+1;f<t.endLineNumber&&a<o;f++)a=this._findMatchesInLine(r,e.getLineContent(f),f,0,a,s,i,o);if(a<o){var h=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(r,h,t.endLineNumber,0,a,s,i,o)}return s},n._findMatchesInLine=function(e,t,r,i,o,s,a,u){var l=e.wordSeparators;if(!a&&e.simpleSearch){for(var f=e.simpleSearch,h=f.length,d=t.length,g=-h;(g=t.indexOf(f,g+h))!==-1;)if((!l||WF(l,t,d,g,h))&&(s[o++]=new My(new R(r,g+1+i,r,g+1+h+i),null),o>=u))return o;return o}var v=new E_(e.wordSeparators,e.regex),m;v.reset(0);do if(m=v.next(t),m&&(s[o++]=Eh(new R(r,m.index+1+i,r,m.index+1+m[0].length+i),m,a),o>=u))return o;while(m);return o},n.findNextMatch=function(e,t,r,i){var o=t.parseSearchRequest();if(!o)return null;var s=new E_(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,r,s,i):this._doFindNextMatchLineByLine(e,r,s,i)},n._doFindNextMatchMultiline=function(e,t,r,i){var o=new $(t.lineNumber,1),s=e.getOffsetAt(o),a=e.getLineCount(),u=e.getValueInRange(new R(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),l=e.getEOL()===`\r
`?new uU(u):null;r.reset(t.column-1);var f=r.next(u);return f?Eh(this._getMultilineMatchRange(e,s,u,l,f.index,f[0]),f,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new $(1,1),r,i):null},n._doFindNextMatchLineByLine=function(e,t,r,i){var o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),u=this._findFirstMatchInLine(r,a,s,t.column,i);if(u)return u;for(var l=1;l<=o;l++){var f=(s+l-1)%o,h=e.getLineContent(f+1),d=this._findFirstMatchInLine(r,h,f+1,1,i);if(d)return d}return null},n._findFirstMatchInLine=function(e,t,r,i,o){e.reset(i-1);var s=e.next(t);return s?Eh(new R(r,s.index+1,r,s.index+1+s[0].length),s,o):null},n.findPreviousMatch=function(e,t,r,i){var o=t.parseSearchRequest();if(!o)return null;var s=new E_(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,r,s,i):this._doFindPreviousMatchLineByLine(e,r,s,i)},n._doFindPreviousMatchMultiline=function(e,t,r,i){var o=this._doFindMatchesMultiline(e,new R(1,1,t.lineNumber,t.column),r,i,10*oEe);if(o.length>0)return o[o.length-1];var s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new $(s,e.getLineMaxColumn(s)),r,i):null},n._doFindPreviousMatchLineByLine=function(e,t,r,i){var o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),u=this._findLastMatchInLine(r,a,s,i);if(u)return u;for(var l=1;l<=o;l++){var f=(o+s-l-1)%o,h=e.getLineContent(f+1),d=this._findLastMatchInLine(r,h,f+1,i);if(d)return d}return null},n._findLastMatchInLine=function(e,t,r,i){var o=null,s;for(e.reset(0);s=e.next(t);)o=Eh(new R(r,s.index+1,r,s.index+1+s[0].length),s,i);return o},n}();function uEe(n,e,t,r,i){if(r===0)return!0;var o=e.charCodeAt(r-1);if(n.get(o)!==0||o===13||o===10)return!0;if(i>0){var s=e.charCodeAt(r);if(n.get(s)!==0)return!0}return!1}function lEe(n,e,t,r,i){if(r+i===t)return!0;var o=e.charCodeAt(r+i);if(n.get(o)!==0||o===13||o===10)return!0;if(i>0){var s=e.charCodeAt(r+i-1);if(n.get(s)!==0)return!0}return!1}function WF(n,e,t,r,i){return uEe(n,e,t,r,i)&&lEe(n,e,t,r,i)}var E_=function(){function n(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}return n.prototype.reset=function(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0},n.prototype.next=function(e){var t=e.length,r;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(r=this._searchRegex.exec(e),!r))return null;var i=r.index,o=r[0].length;if(i===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=o,!this._wordSeparators||WF(this._wordSeparators,e,t,i,o))return r}while(r);return null},n}(),ju=65535;function EY(n){var e;return n[n.length-1]<65536?e=new Uint16Array(n.length):e=new Uint32Array(n.length),e.set(n,0),e}var cEe=function(){function n(e,t,r,i,o){this.lineStarts=e,this.cr=t,this.lf=r,this.crlf=i,this.isBasicASCII=o}return n}();function Gu(n,e){e===void 0&&(e=!0);for(var t=[0],r=1,i=0,o=n.length;i<o;i++){var s=n.charCodeAt(i);s===13?i+1<o&&n.charCodeAt(i+1)===10?(t[r++]=i+2,i++):t[r++]=i+1:s===10&&(t[r++]=i+1)}return e?EY(t):t}function fEe(n,e){n.length=0,n[0]=0;for(var t=1,r=0,i=0,o=0,s=!0,a=0,u=e.length;a<u;a++){var l=e.charCodeAt(a);l===13?a+1<u&&e.charCodeAt(a+1)===10?(o++,n[t++]=a+2,a++):(r++,n[t++]=a+1):l===10?(i++,n[t++]=a+1):s&&l!==9&&(l<32||l>126)&&(s=!1)}var f=new cEe(EY(n),r,i,o,s);return n.length=0,f}var Zi=function(){function n(e,t,r,i,o){this.bufferIndex=e,this.start=t,this.end=r,this.lineFeedCnt=i,this.length=o}return n}(),Ih=function(){function n(e,t){this.buffer=e,this.lineStarts=t}return n}(),hEe=function(){function n(e){this._limit=e,this._cache=[]}return n.prototype.get=function(e){for(var t=this._cache.length-1;t>=0;t--){var r=this._cache[t];if(r.nodeStartOffset<=e&&r.nodeStartOffset+r.node.piece.length>=e)return r}return null},n.prototype.get2=function(e){for(var t=this._cache.length-1;t>=0;t--){var r=this._cache[t];if(r.nodeStartLineNumber&&r.nodeStartLineNumber<e&&r.nodeStartLineNumber+r.node.piece.lineFeedCnt>=e)return r}return null},n.prototype.set=function(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)},n.prototype.valdiate=function(e){for(var t=!1,r=this._cache,i=0;i<r.length;i++){var o=r[i];if(o.node.parent===null||o.nodeStartOffset>=e){r[i]=null,t=!0;continue}}if(t){for(var s=[],a=0,u=r;a<u.length;a++){var l=u[a];l!==null&&s.push(l)}this._cache=s}},n}(),dEe=function(){function n(e,t,r){this.create(e,t,r)}return n.prototype.create=function(e,t,r){this._buffers=[new Ih("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Be,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=r;for(var i=null,o=0,s=e.length;o<s;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=Gu(e[o].buffer));var a=new Zi(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),i=this.rbInsertRight(i,a)}this._searchCache=new hEe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()},n.prototype.normalizeEOL=function(e){var t=this,r=ju,i=r-Math.floor(r/3),o=i*2,s="",a=0,u=[];if(this.iterate(this.root,function(f){var h=t.getNodeContent(f),d=h.length;if(a<=i||a+d<o)return s+=h,a+=d,!0;var g=s.replace(/\r\n|\r|\n/g,e);return u.push(new Ih(g,Gu(g))),s=h,a=d,!0}),a>0){var l=s.replace(/\r\n|\r|\n/g,e);u.push(new Ih(l,Gu(l)))}this.create(u,e,!0)},n.prototype.getEOL=function(){return this._EOL},n.prototype.setEOL=function(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)},n.prototype.getOffsetAt=function(e,t){for(var r=0,i=this.root;i!==Be;)if(i.left!==Be&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){r+=i.size_left;var o=this.getAccumulatedValue(i,e-i.lf_left-2);return r+=o+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;return r},n.prototype.getPositionAt=function(e){e=Math.floor(e),e=Math.max(0,e);for(var t=this.root,r=0,i=e;t!==Be;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){var o=this.getIndexOf(t,e-t.size_left);if(r+=t.lf_left+o.index,o.index===0){var s=this.getOffsetAt(r+1,1),a=i-s;return new $(r+1,a+1)}return new $(r+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,r+=t.lf_left+t.piece.lineFeedCnt,t.right===Be){var s=this.getOffsetAt(r+1,1),a=i-e-s;return new $(r+1,a+1)}else t=t.right;return new $(1,1)},n.prototype.getValueInRange=function(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";var r=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(r,i);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o},n.prototype.getValueInRange2=function(e,t){if(e.node===t.node){var r=e.node,i=this._buffers[r.piece.bufferIndex].buffer,o=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);return i.substring(o+e.remainder,o+t.remainder)}var s=e.node,a=this._buffers[s.piece.bufferIndex].buffer,u=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start),l=a.substring(u+e.remainder,u+s.piece.length);for(s=s.next();s!==Be;){var f=this._buffers[s.piece.bufferIndex].buffer,h=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);if(s===t.node){l+=f.substring(h,h+t.remainder);break}else l+=f.substr(h,s.piece.length);s=s.next()}return l},n.prototype.getLinesContent=function(){return this.getContentOfSubTree(this.root).split(/\r\n|\r|\n/)},n.prototype.getLength=function(){return this._length},n.prototype.getLineCount=function(){return this._lineCnt},n.prototype.getLineContent=function(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)},n.prototype.getLineCharCode=function(e,t){var r=this.nodeAt2(e,t+1);if(r.remainder===r.node.piece.length){var i=r.node.next();if(!i)return 0;var o=this._buffers[i.piece.bufferIndex],s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o.buffer.charCodeAt(s)}else{var o=this._buffers[r.node.piece.bufferIndex],s=this.offsetInBuffer(r.node.piece.bufferIndex,r.node.piece.start),a=s+r.remainder;return o.buffer.charCodeAt(a)}},n.prototype.getLineLength=function(e){if(e===this.getLineCount()){var t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength},n.prototype.findMatchesInNode=function(e,t,r,i,o,s,a,u,l,f,h){var d=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),v=this.offsetInBuffer(e.piece.bufferIndex,o),m=this.offsetInBuffer(e.piece.bufferIndex,s),y;t.reset(v);var b={line:0,column:0};do if(y=t.next(d.buffer),y){if(y.index>=m)return f;this.positionInBuffer(e,y.index-g,b);var C=this.getLineFeedCnt(e.piece.bufferIndex,o,b),E=b.line===o.line?b.column-o.column+i:b.column+1,D=E+y[0].length;if(h[f++]=Eh(new R(r+C,E,r+C,D),y,u),y.index+y[0].length>=m||f>=l)return f}while(y);return f},n.prototype.findMatchesLineByLine=function(e,t,r,i){var o=[],s=0,a=new E_(t.wordSeparators,t.regex),u=this.nodeAt2(e.startLineNumber,e.startColumn);if(u===null)return[];var l=this.nodeAt2(e.endLineNumber,e.endColumn);if(l===null)return[];var f=this.positionInBuffer(u.node,u.remainder),h=this.positionInBuffer(l.node,l.remainder);if(u.node===l.node)return this.findMatchesInNode(u.node,a,e.startLineNumber,e.startColumn,f,h,t,r,i,s,o),o;for(var d=e.startLineNumber,g=u.node;g!==l.node;){var v=this.getLineFeedCnt(g.piece.bufferIndex,f,g.piece.end);if(v>=1){var m=this._buffers[g.piece.bufferIndex].lineStarts,y=this.offsetInBuffer(g.piece.bufferIndex,g.piece.start),b=m[f.line+v],C=d===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(g,a,d,C,f,this.positionInBuffer(g,b-y),t,r,i,s,o),s>=i)return o;d+=v}var E=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){var D=this.getLineContent(d).substring(E,e.endColumn-1);return s=this._findMatchesInLine(t,a,D,e.endLineNumber,E,s,o,r,i),o}if(s=this._findMatchesInLine(t,a,this.getLineContent(d).substr(E),d,E,s,o,r,i),s>=i)return o;d++,u=this.nodeAt2(d,1),g=u.node,f=this.positionInBuffer(u.node,u.remainder)}if(d===e.endLineNumber){var k=d===e.startLineNumber?e.startColumn-1:0,D=this.getLineContent(d).substring(k,e.endColumn-1);return s=this._findMatchesInLine(t,a,D,e.endLineNumber,k,s,o,r,i),o}var I=d===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(l.node,a,d,I,f,h,t,r,i,s,o),o},n.prototype._findMatchesInLine=function(e,t,r,i,o,s,a,u,l){var f=e.wordSeparators;if(!u&&e.simpleSearch){for(var h=e.simpleSearch,d=h.length,g=r.length,v=-d;(v=r.indexOf(h,v+d))!==-1;)if((!f||WF(f,r,g,v,d))&&(a[s++]=new My(new R(i,v+1+o,i,v+1+d+o),null),s>=l))return s;return s}var m;t.reset(0);do if(m=t.next(r),m&&(a[s++]=Eh(new R(i,m.index+1+o,i,m.index+1+m[0].length+o),m,u),s>=l))return s;while(m);return s},n.prototype.insert=function(e,t,r){if(r===void 0&&(r=!1),this._EOLNormalized=this._EOLNormalized&&r,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Be){var i=this.nodeAt(e),o=i.node,s=i.remainder,a=i.nodeStartOffset,u=o.piece,l=u.bufferIndex,f=this.positionInBuffer(o,s);if(o.piece.bufferIndex===0&&u.end.line===this._lastChangeBufferPos.line&&u.end.column===this._lastChangeBufferPos.column&&a+u.length===e&&t.length<ju){this.appendToNode(o,t),this.computeBufferMetadata();return}if(a===e)this.insertContentToNodeLeft(t,o),this._searchCache.valdiate(e);else if(a+o.piece.length>e){var h=[],d=new Zi(u.bufferIndex,f,u.end,this.getLineFeedCnt(u.bufferIndex,f,u.end),this.offsetInBuffer(l,u.end)-this.offsetInBuffer(l,f));if(this.shouldCheckCRLF()&&this.endWithCR(t)){var g=this.nodeCharCodeAt(o,s);if(g===10){var v={line:d.start.line+1,column:0};d=new Zi(d.bufferIndex,v,d.end,this.getLineFeedCnt(d.bufferIndex,v,d.end),d.length-1),t+=`
`}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){var m=this.nodeCharCodeAt(o,s-1);if(m===13){var y=this.positionInBuffer(o,s-1);this.deleteNodeTail(o,y),t="\r"+t,o.piece.length===0&&h.push(o)}else this.deleteNodeTail(o,f)}else this.deleteNodeTail(o,f);var b=this.createNewPieces(t);d.length>0&&this.rbInsertRight(o,d);for(var C=o,E=0;E<b.length;E++)C=this.rbInsertRight(C,b[E]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,o)}else for(var D=this.createNewPieces(t),o=this.rbInsertLeft(null,D[0]),E=1;E<D.length;E++)o=this.rbInsertRight(o,D[E]);this.computeBufferMetadata()},n.prototype.delete=function(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",!(t<=0||this.root===Be)){var r=this.nodeAt(e),i=this.nodeAt(e+t),o=r.node,s=i.node;if(o===s){var a=this.positionInBuffer(o,r.remainder),u=this.positionInBuffer(o,i.remainder);if(r.nodeStartOffset===e){if(t===o.piece.length){var l=o.next();eC(this,o),this.validateCRLFWithPrevNode(l),this.computeBufferMetadata();return}this.deleteNodeHead(o,u),this._searchCache.valdiate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(r.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,a),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,a,u),this.computeBufferMetadata();return}var f=[],h=this.positionInBuffer(o,r.remainder);this.deleteNodeTail(o,h),this._searchCache.valdiate(e),o.piece.length===0&&f.push(o);var d=this.positionInBuffer(s,i.remainder);this.deleteNodeHead(s,d),s.piece.length===0&&f.push(s);for(var g=o.next(),v=g;v!==Be&&v!==s;v=v.next())f.push(v);var m=o.piece.length===0?o.prev():o;this.deleteNodes(f),this.validateCRLFWithNextNode(m),this.computeBufferMetadata()}},n.prototype.insertContentToNodeLeft=function(e,t){var r=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){var i=t.piece,o={line:i.start.line+1,column:0},s=new Zi(i.bufferIndex,o,i.end,this.getLineFeedCnt(i.bufferIndex,o,i.end),i.length-1);t.piece=s,e+=`
`,Ku(this,t,-1,-1),t.piece.length===0&&r.push(t)}for(var a=this.createNewPieces(e),u=this.rbInsertLeft(t,a[a.length-1]),l=a.length-2;l>=0;l--)u=this.rbInsertLeft(u,a[l]);this.validateCRLFWithPrevNode(u),this.deleteNodes(r)},n.prototype.insertContentToNodeRight=function(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);for(var r=this.createNewPieces(e),i=this.rbInsertRight(t,r[0]),o=i,s=1;s<r.length;s++)o=this.rbInsertRight(o,r[s]);this.validateCRLFWithPrevNode(i)},n.prototype.positionInBuffer=function(e,t,r){for(var i=e.piece,o=e.piece.bufferIndex,s=this._buffers[o].lineStarts,a=s[i.start.line]+i.start.column,u=a+t,l=i.start.line,f=i.end.line,h=0,d=0,g=0;l<=f&&(h=l+(f-l)/2|0,g=s[h],h!==f);)if(d=s[h+1],u<g)f=h-1;else if(u>=d)l=h+1;else break;return r?(r.line=h,r.column=u-g,null):{line:h,column:u-g}},n.prototype.getLineFeedCnt=function(e,t,r){if(r.column===0)return r.line-t.line;var i=this._buffers[e].lineStarts;if(r.line===i.length-1)return r.line-t.line;var o=i[r.line+1],s=i[r.line]+r.column;if(o>s+1)return r.line-t.line;var a=s-1,u=this._buffers[e].buffer;return u.charCodeAt(a)===13?r.line-t.line+1:r.line-t.line},n.prototype.offsetInBuffer=function(e,t){var r=this._buffers[e].lineStarts;return r[t.line]+t.column},n.prototype.deleteNodes=function(e){for(var t=0;t<e.length;t++)eC(this,e[t])},n.prototype.createNewPieces=function(e){if(e.length>ju){for(var t=[];e.length>ju;){var r=e.charCodeAt(ju-1),i=void 0;r===13||r>=55296&&r<=56319?(i=e.substring(0,ju-1),e=e.substring(ju-1)):(i=e.substring(0,ju),e=e.substring(ju));var o=Gu(i);t.push(new Zi(this._buffers.length,{line:0,column:0},{line:o.length-1,column:i.length-o[o.length-1]},o.length-1,i.length)),this._buffers.push(new Ih(i,o))}var s=Gu(e);return t.push(new Zi(this._buffers.length,{line:0,column:0},{line:s.length-1,column:e.length-s[s.length-1]},s.length-1,e.length)),this._buffers.push(new Ih(e,s)),t}var a=this._buffers[0].buffer.length,u=Gu(e,!1),l=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===a&&a!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},l=this._lastChangeBufferPos;for(var f=0;f<u.length;f++)u[f]+=a+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(u.slice(1)),this._buffers[0].buffer+="_"+e,a+=1}else{if(a!==0)for(var f=0;f<u.length;f++)u[f]+=a;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(u.slice(1)),this._buffers[0].buffer+=e}var h=this._buffers[0].buffer.length,d=this._buffers[0].lineStarts.length-1,g=h-this._buffers[0].lineStarts[d],v={line:d,column:g},m=new Zi(0,l,v,this.getLineFeedCnt(0,l,v),h-a);return this._lastChangeBufferPos=v,[m]},n.prototype.getLineRawContent=function(e,t){t===void 0&&(t=0);var r=this.root,i="",o=this._searchCache.get2(e);if(o){r=o.node;var s=this.getAccumulatedValue(r,e-o.nodeStartLineNumber-1),a=this._buffers[r.piece.bufferIndex].buffer,u=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);if(o.nodeStartLineNumber+r.piece.lineFeedCnt===e)i=a.substring(u+s,u+r.piece.length);else{var l=this.getAccumulatedValue(r,e-o.nodeStartLineNumber);return a.substring(u+s,u+l-t)}}else for(var f=0,h=e;r!==Be;)if(r.left!==Be&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){var s=this.getAccumulatedValue(r,e-r.lf_left-2),l=this.getAccumulatedValue(r,e-r.lf_left-1),a=this._buffers[r.piece.bufferIndex].buffer,u=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);return f+=r.size_left,this._searchCache.set({node:r,nodeStartOffset:f,nodeStartLineNumber:h-(e-1-r.lf_left)}),a.substring(u+s,u+l-t)}else if(r.lf_left+r.piece.lineFeedCnt===e-1){var s=this.getAccumulatedValue(r,e-r.lf_left-2),a=this._buffers[r.piece.bufferIndex].buffer,u=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);i=a.substring(u+s,u+r.piece.length);break}else e-=r.lf_left+r.piece.lineFeedCnt,f+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==Be;){var a=this._buffers[r.piece.bufferIndex].buffer;if(r.piece.lineFeedCnt>0){var l=this.getAccumulatedValue(r,0),u=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);return i+=a.substring(u,u+l-t),i}else{var u=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);i+=a.substr(u,r.piece.length)}r=r.next()}return i},n.prototype.computeBufferMetadata=function(){for(var e=this.root,t=1,r=0;e!==Be;)t+=e.lf_left+e.piece.lineFeedCnt,r+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=r,this._searchCache.valdiate(this._length)},n.prototype.getIndexOf=function(e,t){var r=e.piece,i=this.positionInBuffer(e,t),o=i.line-r.start.line;if(this.offsetInBuffer(r.bufferIndex,r.end)-this.offsetInBuffer(r.bufferIndex,r.start)===t){var s=this.getLineFeedCnt(e.piece.bufferIndex,r.start,i);if(s!==o)return{index:s,remainder:0}}return{index:o,remainder:i.column}},n.prototype.getAccumulatedValue=function(e,t){if(t<0)return 0;var r=e.piece,i=this._buffers[r.bufferIndex].lineStarts,o=r.start.line+t+1;return o>r.end.line?i[r.end.line]+r.end.column-i[r.start.line]-r.start.column:i[o]-i[r.start.line]-r.start.column},n.prototype.deleteNodeTail=function(e,t){var r=e.piece,i=r.lineFeedCnt,o=this.offsetInBuffer(r.bufferIndex,r.end),s=t,a=this.offsetInBuffer(r.bufferIndex,s),u=this.getLineFeedCnt(r.bufferIndex,r.start,s),l=u-i,f=a-o,h=r.length+f;e.piece=new Zi(r.bufferIndex,r.start,s,u,h),Ku(this,e,f,l)},n.prototype.deleteNodeHead=function(e,t){var r=e.piece,i=r.lineFeedCnt,o=this.offsetInBuffer(r.bufferIndex,r.start),s=t,a=this.getLineFeedCnt(r.bufferIndex,s,r.end),u=this.offsetInBuffer(r.bufferIndex,s),l=a-i,f=o-u,h=r.length+f;e.piece=new Zi(r.bufferIndex,s,r.end,a,h),Ku(this,e,f,l)},n.prototype.shrinkNode=function(e,t,r){var i=e.piece,o=i.start,s=i.end,a=i.length,u=i.lineFeedCnt,l=t,f=this.getLineFeedCnt(i.bufferIndex,i.start,l),h=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,o);e.piece=new Zi(i.bufferIndex,i.start,l,f,h),Ku(this,e,h-a,f-u);var d=new Zi(i.bufferIndex,r,s,this.getLineFeedCnt(i.bufferIndex,r,s),this.offsetInBuffer(i.bufferIndex,s)-this.offsetInBuffer(i.bufferIndex,r)),g=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(g)},n.prototype.appendToNode=function(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);var r=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;for(var o=Gu(t,!1),s=0;s<o.length;s++)o[s]+=i;if(r){var a=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-a}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));var u=this._buffers[0].lineStarts.length-1,l=this._buffers[0].buffer.length-this._buffers[0].lineStarts[u],f={line:u,column:l},h=e.piece.length+t.length,d=e.piece.lineFeedCnt,g=this.getLineFeedCnt(0,e.piece.start,f),v=g-d;e.piece=new Zi(e.piece.bufferIndex,e.piece.start,f,g,h),this._lastChangeBufferPos=f,Ku(this,e,t.length,v)},n.prototype.nodeAt=function(e){var t=this.root,r=this._searchCache.get(e);if(r)return{node:r.node,nodeStartOffset:r.nodeStartOffset,remainder:e-r.nodeStartOffset};for(var i=0;t!==Be;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;var o={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null},n.prototype.nodeAt2=function(e,t){for(var r=this.root,i=0;r!==Be;)if(r.left!==Be&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){var o=this.getAccumulatedValue(r,e-r.lf_left-2),s=this.getAccumulatedValue(r,e-r.lf_left-1);return i+=r.size_left,{node:r,remainder:Math.min(o+t-1,s),nodeStartOffset:i}}else if(r.lf_left+r.piece.lineFeedCnt===e-1){var o=this.getAccumulatedValue(r,e-r.lf_left-2);if(o+t-1<=r.piece.length)return{node:r,remainder:o+t-1,nodeStartOffset:i};t-=r.piece.length-o;break}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==Be;){if(r.piece.lineFeedCnt>0){var s=this.getAccumulatedValue(r,0),a=this.offsetOfNode(r);return{node:r,remainder:Math.min(t-1,s),nodeStartOffset:a}}else if(r.piece.length>=t-1){var u=this.offsetOfNode(r);return{node:r,remainder:t-1,nodeStartOffset:u}}else t-=r.piece.length;r=r.next()}return null},n.prototype.nodeCharCodeAt=function(e,t){if(e.piece.lineFeedCnt<1)return-1;var r=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return r.buffer.charCodeAt(i)},n.prototype.offsetOfNode=function(e){if(!e)return 0;for(var t=e.size_left;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t},n.prototype.shouldCheckCRLF=function(){return!(this._EOLNormalized&&this._EOL===`
`)},n.prototype.startWithLF=function(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Be||e.piece.lineFeedCnt===0)return!1;var t=e.piece,r=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,o=r[i]+t.start.column;if(i===r.length-1)return!1;var s=r[i+1];return s>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10},n.prototype.endWithCR=function(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Be||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13},n.prototype.validateCRLFWithPrevNode=function(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){var t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}},n.prototype.validateCRLFWithNextNode=function(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){var t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}},n.prototype.fixCRLF=function(e,t){var r=[],i=this._buffers[e.piece.bufferIndex].lineStarts,o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};var s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Zi(e.piece.bufferIndex,e.piece.start,o,a,s),Ku(this,e,-1,-1),e.piece.length===0&&r.push(e);var u={line:t.piece.start.line+1,column:0},l=t.piece.length-1,f=this.getLineFeedCnt(t.piece.bufferIndex,u,t.piece.end);t.piece=new Zi(t.piece.bufferIndex,u,t.piece.end,f,l),Ku(this,t,-1,-1),t.piece.length===0&&r.push(t);var h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(var d=0;d<r.length;d++)eC(this,r[d])},n.prototype.adjustCarriageReturnFromNext=function(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){var r=t.next();if(this.startWithLF(r)){if(e+=`
`,r.piece.length===1)eC(this,r);else{var i=r.piece,o={line:i.start.line+1,column:0},s=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,o,i.end);r.piece=new Zi(i.bufferIndex,o,i.end,a,s),Ku(this,r,-1,-1)}return!0}}return!1},n.prototype.iterate=function(e,t){if(e===Be)return t(Be);var r=this.iterate(e.left,t);return r&&t(e)&&this.iterate(e.right,t)},n.prototype.getNodeContent=function(e){if(e===Be)return"";var t=this._buffers[e.piece.bufferIndex],r,i=e.piece,o=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return r=t.buffer.substring(o,s),r},n.prototype.rbInsertRight=function(e,t){var r=new ZO(t,1);r.left=Be,r.right=Be,r.parent=Be,r.size_left=0,r.lf_left=0;var i=this.root;if(i===Be)this.root=r,r.color=0;else if(e.right===Be)e.right=r,r.parent=e;else{var o=PF(e.right);o.left=r,r.parent=o}return aU(this,r),r},n.prototype.rbInsertLeft=function(e,t){var r=new ZO(t,1);if(r.left=Be,r.right=Be,r.parent=Be,r.size_left=0,r.lf_left=0,this.root===Be)this.root=r,r.color=0;else if(e.left===Be)e.left=r,r.parent=e;else{var i=SY(e.left);i.right=r,r.parent=i}return aU(this,r),r},n.prototype.getContentOfSubTree=function(e){var t=this,r="";return this.iterate(e,function(i){return r+=t.getNodeContent(i),!0}),r},n}(),pEe=function(){function n(e,t,r,i,o,s){this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=i,this._pieceTree=new dEe(e,r,s)}return n.prototype.mightContainRTL=function(){return this._mightContainRTL},n.prototype.mightContainNonBasicASCII=function(){return this._mightContainNonBasicASCII},n.prototype.getBOM=function(){return this._BOM},n.prototype.getEOL=function(){return this._pieceTree.getEOL()},n.prototype.getOffsetAt=function(e,t){return this._pieceTree.getOffsetAt(e,t)},n.prototype.getPositionAt=function(e){return this._pieceTree.getPositionAt(e)},n.prototype.getRangeAt=function(e,t){var r=e+t,i=this.getPositionAt(e),o=this.getPositionAt(r);return new R(i.lineNumber,i.column,o.lineNumber,o.column)},n.prototype.getValueInRange=function(e,t){if(t===void 0&&(t=0),e.isEmpty())return"";var r=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,r)},n.prototype.getValueLengthInRange=function(e,t){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;var r=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn);return i-r},n.prototype.getLength=function(){return this._pieceTree.getLength()},n.prototype.getLineCount=function(){return this._pieceTree.getLineCount()},n.prototype.getLinesContent=function(){return this._pieceTree.getLinesContent()},n.prototype.getLineContent=function(e){return this._pieceTree.getLineContent(e)},n.prototype.getLineCharCode=function(e,t){return this._pieceTree.getLineCharCode(e,t)},n.prototype.getLineLength=function(e){return this._pieceTree.getLineLength(e)},n.prototype.getLineFirstNonWhitespaceColumn=function(e){var t=Mo(this.getLineContent(e));return t===-1?0:t+1},n.prototype.getLineLastNonWhitespaceColumn=function(e){var t=gf(this.getLineContent(e));return t===-1?0:t+2},n.prototype._getEndOfLine=function(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL()}throw new Error("Unknown EOL preference")},n.prototype.setEOL=function(e){this._pieceTree.setEOL(e)},n.prototype.applyEdits=function(e,t){for(var r=this._mightContainRTL,i=this._mightContainNonBasicASCII,o=!0,s=[],a=0;a<e.length;a++){var u=e[a];o&&u._isTracked&&(o=!1);var l=u.range;!r&&u.text&&(r=lF(u.text)),!i&&u.text&&(i=!xG(u.text)),s[a]={sortIndex:a,identifier:u.identifier||null,range:l,rangeOffset:this.getOffsetAt(l.startLineNumber,l.startColumn),rangeLength:this.getValueLengthInRange(l),lines:u.text?u.text.split(/\r\n|\r|\n/):null,forceMoveMarkers:!!u.forceMoveMarkers,isAutoWhitespaceEdit:u.isAutoWhitespaceEdit||!1}}s.sort(n._sortOpsAscending);for(var f=!1,a=0,h=s.length-1;a<h;a++){var d=s[a].range.getEndPosition(),g=s[a+1].range.getStartPosition();if(g.isBeforeOrEqual(d)){if(g.isBefore(d))throw new Error("Overlapping ranges are not allowed!");f=!0}}o&&(s=this._reduceOperations(s));for(var v=n._getInverseEditRanges(s),m=[],a=0;a<s.length;a++){var u=s[a],y=v[a];if(t&&u.isAutoWhitespaceEdit&&u.range.isEmpty())for(var b=y.startLineNumber;b<=y.endLineNumber;b++){var C="";b===y.startLineNumber&&(C=this.getLineContent(u.range.startLineNumber),Mo(C)!==-1)||m.push({lineNumber:b,oldContent:C})}}for(var E=[],a=0;a<s.length;a++){var u=s[a],y=v[a];E[a]={sortIndex:u.sortIndex,identifier:u.identifier,range:y,text:this.getValueInRange(u.range),forceMoveMarkers:u.forceMoveMarkers}}f||E.sort(function(M,L){return M.sortIndex-L.sortIndex}),this._mightContainRTL=r,this._mightContainNonBasicASCII=i;var D=this._doApplyEdits(s),k=null;if(t&&m.length>0){m.sort(function(M,L){return L.lineNumber-M.lineNumber}),k=[];for(var a=0,I=m.length;a<I;a++){var b=m[a].lineNumber;if(!(a>0&&m[a-1].lineNumber===b)){var T=m[a].oldContent,A=this.getLineContent(b);A.length===0||A===T||Mo(A)!==-1||k.push(b)}}}return new pwe(E,D,k)},n.prototype._reduceOperations=function(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]},n.prototype._toSingleEditOperation=function(e){for(var t=!1,r=e[0].range,i=e[e.length-1].range,o=new R(r.startLineNumber,r.startColumn,i.endLineNumber,i.endColumn),s=r.startLineNumber,a=r.startColumn,u=[],l=0,f=e.length;l<f;l++){var h=e[l],d=h.range;t=t||h.forceMoveMarkers;for(var g=s;g<d.startLineNumber;g++)g===s?u.push(this.getLineContent(g).substring(a-1)):(u.push(`
`),u.push(this.getLineContent(g)));if(d.startLineNumber===s?u.push(this.getLineContent(d.startLineNumber).substring(a-1,d.startColumn-1)):(u.push(`
`),u.push(this.getLineContent(d.startLineNumber).substring(0,d.startColumn-1))),h.lines)for(var v=0,m=h.lines.length;v<m;v++)v!==0&&u.push(`
`),u.push(h.lines[v]);s=h.range.endLineNumber,a=h.range.endColumn}return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),lines:u.join("").split(`
`),forceMoveMarkers:t,isAutoWhitespaceEdit:!1}},n.prototype._doApplyEdits=function(e){e.sort(n._sortOpsDescending);for(var t=[],r=0;r<e.length;r++){var i=e[r],o=i.range.startLineNumber,s=i.range.startColumn,a=i.range.endLineNumber,u=i.range.endColumn;if(!(o===a&&s===u&&(!i.lines||i.lines.length===0))){var l=a-o,f=i.lines?i.lines.length-1:0,h=Math.min(l,f),d=i.lines?i.lines.join(this.getEOL()):"";if(d?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,d,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength),h<f){for(var g=[],v=h+1;v<=f;v++)g.push(i.lines[v]);g[g.length-1]=this.getLineContent(o+f-1)}var m=new R(o,s,a,u);t.push({range:m,rangeLength:i.rangeLength,text:d,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}}return t},n.prototype.findMatchesLineByLine=function(e,t,r,i){return this._pieceTree.findMatchesLineByLine(e,t,r,i)},n._getInverseEditRanges=function(e){for(var t=[],r=0,i=0,o=null,s=0,a=e.length;s<a;s++){var u=e[s],l=void 0,f=void 0;o?o.range.endLineNumber===u.range.startLineNumber?(l=r,f=i+(u.range.startColumn-o.range.endColumn)):(l=r+(u.range.startLineNumber-o.range.endLineNumber),f=u.range.startColumn):(l=u.range.startLineNumber,f=u.range.startColumn);var h=void 0;if(u.lines&&u.lines.length>0){var d=u.lines.length,g=u.lines[0],v=u.lines[d-1];d===1?h=new R(l,f,l,f+g.length):h=new R(l,f,l+d-1,v.length+1)}else h=new R(l,f,l,f);r=h.endLineNumber,i=h.endColumn,t.push(h),o=u}return t},n._sortOpsAscending=function(e,t){var r=R.compareRangesUsingEnds(e.range,t.range);return r===0?e.sortIndex-t.sortIndex:r},n._sortOpsDescending=function(e,t){var r=R.compareRangesUsingEnds(e.range,t.range);return r===0?t.sortIndex-e.sortIndex:-r},n}(),gEe=function(){function n(e,t,r,i,o,s,a,u){this._chunks=e,this._bom=t,this._cr=r,this._lf=i,this._crlf=o,this._containsRTL=s,this._isBasicASCII=a,this._normalizeEOL=u}return n.prototype._getEOL=function(e){var t=this._cr+this._lf+this._crlf,r=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:r>t/2?`\r
`:`
`},n.prototype.create=function(e){var t=this._getEOL(e),r=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(var i=0,o=r.length;i<o;i++){var s=r[i].buffer.replace(/\r\n|\r|\n/g,t),a=Gu(s);r[i]=new Ih(s,a)}return new pEe(r,this._bom,t,this._containsRTL,this._isBasicASCII,this._normalizeEOL)},n}(),vEe=function(){function n(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.isBasicASCII=!0}return n.prototype.acceptChunk=function(e){if(e.length!==0){this.chunks.length===0&&cF(e)&&(this.BOM=Obe,e=e.substr(1));var t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}},n.prototype._acceptChunk1=function(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))},n.prototype._acceptChunk2=function(e){var t=fEe(this._tmpLineStarts,e);this.chunks.push(new Ih(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=lF(e))},n.prototype.finish=function(e){return e===void 0&&(e=!0),this._finish(),new gEe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.isBasicASCII,e)},n.prototype._finish=function(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;var e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);var t=Gu(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}},n}(),mEe=function(){function n(){this.changeType=1}return n}(),_Ee=function(){function n(e,t){this.changeType=2,this.lineNumber=e,this.detail=t}return n}(),yEe=function(){function n(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}return n}(),bEe=function(){function n(e,t,r){this.changeType=4,this.fromLineNumber=e,this.toLineNumber=t,this.detail=r}return n}(),wEe=function(){function n(){this.changeType=5}return n}(),t1=function(){function n(e,t,r,i){this.changes=e,this.versionId=t,this.isUndoing=r,this.isRedoing=i}return n.prototype.containsEvent=function(e){for(var t=0,r=this.changes.length;t<r;t++){var i=this.changes[t];if(i.changeType===e)return!0}return!1},n.merge=function(e,t){var r=[].concat(e.changes).concat(t.changes),i=t.versionId,o=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new n(r,i,o,s)},n}(),CEe=function(){function n(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}return n.prototype.merge=function(e){var t=t1.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),r=n._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new n(t,r)},n._mergeChangeEvents=function(e,t){var r=[].concat(e.changes).concat(t.changes),i=t.eol,o=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,u=e.isFlush||t.isFlush;return{changes:r,eol:i,versionId:o,isUndoing:s,isRedoing:a,isFlush:u}},n}();function IY(n){for(var e=0,t=0,r=0,i=n.length;r<i;r++){var o=n.charCodeAt(r);o===13?(e===0&&(t=r),e++,r+1<i&&n.charCodeAt(r+1)===10&&r++):o===10&&(e===0&&(t=r),e++)}return e===0&&(t=n.length),[e,t]}function lU(n){return(n<<0|0|0|16384|2<<23)>>>0}var zu=new Uint32Array(0).buffer,CT=function(){function n(){this.tokens=[]}return n.prototype.add=function(e,t){if(this.tokens.length>0){var r=this.tokens[this.tokens.length-1],i=r.startLineNumber+r.tokens.length-1;if(i+1===e){r.tokens.push(t);return}}this.tokens.push(new SEe(e,[t]))},n}(),SEe=function(){function n(e,t){this.startLineNumber=e,this.tokens=t}return n}();function nh(n){return n instanceof Uint32Array?n:new Uint32Array(n)}var EEe=function(){function n(){this._lineTokens=[],this._len=0}return n.prototype.flush=function(){this._lineTokens=[],this._len=0},n.prototype.getTokens=function(e,t,r){var i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==zu)return new wa(nh(i),r);var o=new Uint32Array(2);return o[0]=r.length,o[1]=lU(e),new wa(o,r)},n._massageTokens=function(e,t,r){var i=r?nh(r):null;if(t===0){var o=!1;if(i&&i.length>1&&(o=ga.getLanguageId(i[1])!==e),!o)return zu}if(!i||i.length===0){var s=new Uint32Array(2);return s[0]=t,s[1]=lU(e),s.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i},n.prototype._ensureLine=function(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++},n.prototype._deleteLines=function(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)},n.prototype._insertLines=function(e,t){if(t!==0){for(var r=[],i=0;i<t;i++)r[i]=null;this._lineTokens=FA(this._lineTokens,e,r),this._len+=t}},n.prototype.setTokens=function(e,t,r,i){var o=n._massageTokens(e,r,i);this._ensureLine(t),this._lineTokens[t]=o},n.prototype.acceptEdit=function(e,t,r){this._acceptDeleteRange(e),this._acceptInsertText(new $(e.startLineNumber,e.startColumn),t,r)},n.prototype._acceptDeleteRange=function(e){var t=e.startLineNumber-1;if(!(t>=this._len)){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=n._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=n._deleteEnding(this._lineTokens[t],e.startColumn-1);var r=e.endLineNumber-1,i=null;r<this._len&&(i=n._deleteBeginning(this._lineTokens[r],e.endColumn-1)),this._lineTokens[t]=n._append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}},n.prototype._acceptInsertText=function(e,t,r){if(!(t===0&&r===0)){var i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=n._insert(this._lineTokens[i],e.column-1,r);return}this._lineTokens[i]=n._deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=n._insert(this._lineTokens[i],e.column-1,r),this._insertLines(e.lineNumber,t)}}},n._deleteBeginning=function(e,t){return e===null||e===zu?e:n._delete(e,0,t)},n._deleteEnding=function(e,t){if(e===null||e===zu)return e;var r=nh(e),i=r[r.length-2];return n._delete(e,t,i)},n._delete=function(e,t,r){if(e===null||e===zu||t===r)return e;var i=nh(e),o=i.length>>>1;if(t===0&&i[i.length-2]===r)return zu;var s=wa.findIndexInTokensArray(i,t),a=s>0?i[s-1<<1]:0,u=i[s<<1];if(r<u){for(var l=r-t,f=s;f<o;f++)i[f<<1]-=l;return e}var h,d;a!==t?(i[s<<1]=t,h=s+1<<1,d=t):(h=s<<1,d=a);for(var g=r-t,v=s+1;v<o;v++){var m=i[v<<1]-g;m>d&&(i[h++]=m,i[h++]=i[(v<<1)+1],d=m)}if(h===i.length)return e;var y=new Uint32Array(h);return y.set(i.subarray(0,h),0),y.buffer},n._append=function(e,t){if(t===zu)return e;if(e===zu)return t;if(e===null)return e;if(t===null)return null;var r=nh(e),i=nh(t),o=i.length>>>1,s=new Uint32Array(r.length+i.length);s.set(r,0);for(var a=r.length,u=r[r.length-2],l=0;l<o;l++)s[a++]=i[l<<1]+u,s[a++]=i[(l<<1)+1];return s.buffer},n._insert=function(e,t,r){if(e===null||e===zu)return e;var i=nh(e),o=i.length>>>1,s=wa.findIndexInTokensArray(i,t);if(s>0){var a=i[s-1<<1];a===t&&s--}for(var u=s;u<o;u++)i[u<<1]+=r;return e},n}(),IEe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xEe=function(){function n(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}return n.prototype._reset=function(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)},n.prototype.flush=function(e){this._reset(e)},Object.defineProperty(n.prototype,"invalidLineStartIndex",{get:function(){return this._invalidLineStartIndex},enumerable:!0,configurable:!0}),n.prototype._invalidateLine=function(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)},n.prototype._isValid=function(e){return e<this._len?this._valid[e]:!1},n.prototype.getBeginState=function(e){return e<this._len?this._beginState[e]:null},n.prototype._ensureLine=function(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++},n.prototype._deleteLines=function(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)},n.prototype._insertLines=function(e,t){if(t!==0){for(var r=[],i=[],o=0;o<t;o++)r[o]=null,i[o]=!1;this._beginState=FA(this._beginState,e,r),this._valid=FA(this._valid,e,i),this._len+=t}},n.prototype._setValid=function(e,t){this._ensureLine(e),this._valid[e]=t},n.prototype._setBeginState=function(e,t){this._ensureLine(e),this._beginState[e]=t},n.prototype.setEndState=function(e,t,r){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t!==e-1){var i=this.getBeginState(t+1);if(i===null||!r.equals(i)){this._setBeginState(t+1,r),this._invalidateLine(t+1);return}for(var o=t+1;o<e&&this._isValid(o);)o++;this._invalidLineStartIndex=o}},n.prototype.setFakeTokens=function(e){this._setValid(e,!1)},n.prototype.applyEdits=function(e,t){for(var r=e.endLineNumber-e.startLineNumber,i=t,o=Math.min(r,i),s=o;s>=0;s--)this._invalidateLine(e.startLineNumber+s-1);this._acceptDeleteRange(e),this._acceptInsertText(new $(e.startLineNumber,e.startColumn),t)},n.prototype._acceptDeleteRange=function(e){var t=e.startLineNumber-1;t>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)},n.prototype._acceptInsertText=function(e,t){var r=e.lineNumber-1;r>=this._len||this._insertLines(e.lineNumber,t)},n}(),DEe=function(n){IEe(e,n);function e(t){var r=n.call(this)||this;return r._textModel=t,r._tokenizationStateStore=new xEe,r._revalidateTokensTimeout=-1,r._tokenizationSupport=null,r._register(mn.onDidChange(function(i){var o=r._textModel.getLanguageIdentifier();i.changedLanguages.indexOf(o.language)!==-1&&(r._resetTokenizationState(),r._textModel.clearTokens())})),r._register(r._textModel.onDidChangeRawContentFast(function(i){if(i.containsEvent(1)){r._resetTokenizationState();return}})),r._register(r._textModel.onDidChangeContentFast(function(i){for(var o=0,s=i.changes.length;o<s;o++){var a=i.changes[o],u=IY(a.text)[0];r._tokenizationStateStore.applyEdits(a.range,u)}r._beginBackgroundTokenization()})),r._register(r._textModel.onDidChangeAttached(function(){r._beginBackgroundTokenization()})),r._register(r._textModel.onDidChangeLanguage(function(){r._resetTokenizationState(),r._textModel.clearTokens()})),r._resetTokenizationState(),r}return e.prototype.dispose=function(){this._clearTimers(),n.prototype.dispose.call(this)},e.prototype._clearTimers=function(){this._revalidateTokensTimeout!==-1&&(clearTimeout(this._revalidateTokensTimeout),this._revalidateTokensTimeout=-1)},e.prototype._resetTokenizationState=function(){this._clearTimers();var t=LEe(this._textModel),r=t[0],i=t[1];this._tokenizationSupport=r,this._tokenizationStateStore.flush(i),this._beginBackgroundTokenization()},e.prototype._beginBackgroundTokenization=function(){var t=this;this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&this._revalidateTokensTimeout===-1&&(this._revalidateTokensTimeout=setTimeout(function(){t._revalidateTokensTimeout=-1,t._revalidateTokensNow()},0))},e.prototype._revalidateTokensNow=function(t){t===void 0&&(t=this._textModel.getLineCount());for(var r=20,i=new CT,o=xF.create(!1);this._hasLinesToTokenize()&&!(o.elapsed()>r);){var s=this._tokenizeOneInvalidLine(i);if(s>=t)break}this._beginBackgroundTokenization(),this._textModel.setTokens(i.tokens)},e.prototype.tokenizeViewport=function(t,r){var i=new CT;this._tokenizeViewport(i,t,r),this._textModel.setTokens(i.tokens)},e.prototype.reset=function(){this._resetTokenizationState(),this._textModel.clearTokens()},e.prototype.forceTokenization=function(t){var r=new CT;this._updateTokensUntilLine(r,t),this._textModel.setTokens(r.tokens)},e.prototype.isCheapToTokenize=function(t){if(!this._tokenizationSupport)return!0;var r=this._tokenizationStateStore.invalidLineStartIndex+1;return t>r?!1:t<r||this._textModel.getLineLength(t)<2048},e.prototype._hasLinesToTokenize=function(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1},e.prototype._tokenizeOneInvalidLine=function(t){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;var r=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(t,r),r},e.prototype._updateTokensUntilLine=function(t,r){if(this._tokenizationSupport)for(var i=this._textModel.getLanguageIdentifier(),o=this._textModel.getLineCount(),s=r-1,a=this._tokenizationStateStore.invalidLineStartIndex;a<=s;a++){var u=this._textModel.getLineContent(a+1),l=this._tokenizationStateStore.getBeginState(a),f=ST(i,this._tokenizationSupport,u,l);t.add(a+1,f.tokens),this._tokenizationStateStore.setEndState(o,a,f.endState),a=this._tokenizationStateStore.invalidLineStartIndex-1}},e.prototype._tokenizeViewport=function(t,r,i){if(this._tokenizationSupport&&!(i<=this._tokenizationStateStore.invalidLineStartIndex)){if(r<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(t,i);return}for(var o=this._textModel.getLineFirstNonWhitespaceColumn(r),s=[],a=null,u=r-1;o>0&&u>=1;u--){var l=this._textModel.getLineFirstNonWhitespaceColumn(u);if(l!==0&&l<o){if(a=this._tokenizationStateStore.getBeginState(u-1),a)break;s.push(this._textModel.getLineContent(u)),o=l}}a||(a=this._tokenizationSupport.getInitialState());for(var f=this._textModel.getLanguageIdentifier(),h=a,u=s.length-1;u>=0;u--){var d=ST(f,this._tokenizationSupport,s[u],h);h=d.endState}for(var g=r;g<=i;g++){var v=this._textModel.getLineContent(g),d=ST(f,this._tokenizationSupport,v,h);t.add(g,d.tokens),this._tokenizationStateStore.setFakeTokens(g-1),h=d.endState}}},e}(te);function LEe(n){var e=n.getLanguageIdentifier(),t=n.isTooLargeForTokenization()?null:mn.get(e.language),r=null;if(t)try{r=t.getInitialState()}catch(i){Le(i),t=null}return[t,r]}function ST(n,e,t,r){var i=null;if(e)try{i=e.tokenize2(t,r.clone(),0)}catch(o){Le(o)}return i||(i=CF(n.id,t,r,0)),wa.convertToEndOffset(i.tokens,t.length),i}function Uc(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t}var Jt=function(){function n(e,t,r,i){i===void 0&&(i=1),this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,r))|0,this.a=Uc(Math.max(Math.min(1,i),0),3)}return n.equals=function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a},n}(),Pp=function(){function n(e,t,r,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Uc(Math.max(Math.min(1,t),0),3),this.l=Uc(Math.max(Math.min(1,r),0),3),this.a=Uc(Math.max(Math.min(1,i),0),3)}return n.equals=function(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a},n.fromRGBA=function(e){var t=e.r/255,r=e.g/255,i=e.b/255,o=e.a,s=Math.max(t,r,i),a=Math.min(t,r,i),u=0,l=0,f=(a+s)/2,h=s-a;if(h>0){switch(l=Math.min(f<=.5?h/(2*f):h/(2-2*f),1),s){case t:u=(r-i)/h+(r<i?6:0);break;case r:u=(i-t)/h+2;break;case i:u=(t-r)/h+4;break}u*=60,u=Math.round(u)}return new n(u,l,f,o)},n._hue2rgb=function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e},n.toRGBA=function(e){var t=e.h/360,r=e.s,i=e.l,o=e.a,s,a,u;if(r===0)s=a=u=i;else{var l=i<.5?i*(1+r):i+r-i*r,f=2*i-l;s=n._hue2rgb(f,l,t+1/3),a=n._hue2rgb(f,l,t),u=n._hue2rgb(f,l,t-1/3)}return new Jt(Math.round(s*255),Math.round(a*255),Math.round(u*255),o)},n}(),xc=function(){function n(e,t,r,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Uc(Math.max(Math.min(1,t),0),3),this.v=Uc(Math.max(Math.min(1,r),0),3),this.a=Uc(Math.max(Math.min(1,i),0),3)}return n.equals=function(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a},n.fromRGBA=function(e){var t=e.r/255,r=e.g/255,i=e.b/255,o=Math.max(t,r,i),s=Math.min(t,r,i),a=o-s,u=o===0?0:a/o,l;return a===0?l=0:o===t?l=((r-i)/a%6+6)%6:o===r?l=(i-t)/a+2:l=(t-r)/a+4,new n(Math.round(l*60),u,o,e.a)},n.toRGBA=function(e){var t=e.h,r=e.s,i=e.v,o=e.a,s=i*r,a=s*(1-Math.abs(t/60%2-1)),u=i-s,l=[0,0,0],f=l[0],h=l[1],d=l[2];return t<60?(f=s,h=a):t<120?(f=a,h=s):t<180?(h=s,d=a):t<240?(h=a,d=s):t<300?(f=a,d=s):t<360&&(f=s,d=a),f=Math.round((f+u)*255),h=Math.round((h+u)*255),d=Math.round((d+u)*255),new Jt(f,h,d,o)},n}(),Z=function(){function n(e){if(e)if(e instanceof Jt)this.rgba=e;else if(e instanceof Pp)this._hsla=e,this.rgba=Pp.toRGBA(e);else if(e instanceof xc)this._hsva=e,this.rgba=xc.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}return n.fromHex=function(e){return n.Format.CSS.parseHex(e)||n.red},Object.defineProperty(n.prototype,"hsla",{get:function(){return this._hsla?this._hsla:Pp.fromRGBA(this.rgba)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hsva",{get:function(){return this._hsva?this._hsva:xc.fromRGBA(this.rgba)},enumerable:!0,configurable:!0}),n.prototype.equals=function(e){return!!e&&Jt.equals(this.rgba,e.rgba)&&Pp.equals(this.hsla,e.hsla)&&xc.equals(this.hsva,e.hsva)},n.prototype.getRelativeLuminance=function(){var e=n._relativeLuminanceForComponent(this.rgba.r),t=n._relativeLuminanceForComponent(this.rgba.g),r=n._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*r;return Uc(i,4)},n._relativeLuminanceForComponent=function(e){var t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)},n.prototype.isLighter=function(){var e=(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3;return e>=128},n.prototype.isLighterThan=function(e){var t=this.getRelativeLuminance(),r=e.getRelativeLuminance();return t>r},n.prototype.isDarkerThan=function(e){var t=this.getRelativeLuminance(),r=e.getRelativeLuminance();return t<r},n.prototype.lighten=function(e){return new n(new Pp(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))},n.prototype.darken=function(e){return new n(new Pp(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))},n.prototype.transparent=function(e){var t=this.rgba,r=t.r,i=t.g,o=t.b,s=t.a;return new n(new Jt(r,i,o,s*e))},n.prototype.isTransparent=function(){return this.rgba.a===0},n.prototype.isOpaque=function(){return this.rgba.a===1},n.prototype.opposite=function(){return new n(new Jt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))},n.prototype.toString=function(){return""+n.Format.CSS.format(this)},n.getLighterColor=function(e,t,r){if(e.isLighterThan(t))return e;r=r||.5;var i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return r=r*(o-i)/o,e.lighten(r)},n.getDarkerColor=function(e,t,r){if(e.isDarkerThan(t))return e;r=r||.5;var i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return r=r*(i-o)/i,e.darken(r)},n.white=new n(new Jt(255,255,255,1)),n.black=new n(new Jt(0,0,0,1)),n.red=new n(new Jt(255,0,0,1)),n.blue=new n(new Jt(0,0,255,1)),n.cyan=new n(new Jt(0,255,255,1)),n.lightgrey=new n(new Jt(211,211,211,1)),n.transparent=new n(new Jt(0,0,0,0)),n}();(function(n){(function(e){(function(t){function r(g){return g.rgba.a===1?"rgb("+g.rgba.r+", "+g.rgba.g+", "+g.rgba.b+")":n.Format.CSS.formatRGBA(g)}t.formatRGB=r;function i(g){return"rgba("+g.rgba.r+", "+g.rgba.g+", "+g.rgba.b+", "+ +g.rgba.a.toFixed(2)+")"}t.formatRGBA=i;function o(g){return g.hsla.a===1?"hsl("+g.hsla.h+", "+(g.hsla.s*100).toFixed(2)+"%, "+(g.hsla.l*100).toFixed(2)+"%)":n.Format.CSS.formatHSLA(g)}t.formatHSL=o;function s(g){return"hsla("+g.hsla.h+", "+(g.hsla.s*100).toFixed(2)+"%, "+(g.hsla.l*100).toFixed(2)+"%, "+g.hsla.a.toFixed(2)+")"}t.formatHSLA=s;function a(g){var v=g.toString(16);return v.length!==2?"0"+v:v}function u(g){return"#"+a(g.rgba.r)+a(g.rgba.g)+a(g.rgba.b)}t.formatHex=u;function l(g,v){return v===void 0&&(v=!1),v&&g.rgba.a===1?n.Format.CSS.formatHex(g):"#"+a(g.rgba.r)+a(g.rgba.g)+a(g.rgba.b)+a(Math.round(g.rgba.a*255))}t.formatHexA=l;function f(g){return g?g.isOpaque()?n.Format.CSS.formatHex(g):n.Format.CSS.formatRGBA(g):null}t.format=f;function h(g){if(!g)return null;var v=g.length;if(v===0||g.charCodeAt(0)!==35)return null;if(v===7){var m=16*d(g.charCodeAt(1))+d(g.charCodeAt(2)),y=16*d(g.charCodeAt(3))+d(g.charCodeAt(4)),b=16*d(g.charCodeAt(5))+d(g.charCodeAt(6));return new n(new Jt(m,y,b,1))}if(v===9){var m=16*d(g.charCodeAt(1))+d(g.charCodeAt(2)),y=16*d(g.charCodeAt(3))+d(g.charCodeAt(4)),b=16*d(g.charCodeAt(5))+d(g.charCodeAt(6)),C=16*d(g.charCodeAt(7))+d(g.charCodeAt(8));return new n(new Jt(m,y,b,C/255))}if(v===4){var m=d(g.charCodeAt(1)),y=d(g.charCodeAt(2)),b=d(g.charCodeAt(3));return new n(new Jt(16*m+m,16*y+y,16*b+b))}if(v===5){var m=d(g.charCodeAt(1)),y=d(g.charCodeAt(2)),b=d(g.charCodeAt(3)),C=d(g.charCodeAt(4));return new n(new Jt(16*m+m,16*y+y,16*b+b,(16*C+C)/255))}return null}t.parseHex=h;function d(g){switch(g){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(Z||(Z={}));var G0=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function kEe(){return new vEe}function TEe(n){var e=kEe();return e.acceptChunk(n),e.finish()}function cU(n,e){var t=typeof n=="string"?TEe(n):n;return t.create(e)}var nC=0,NEe=999,AEe=1e4,t_=function(){throw new Error("Invalid change accessor")},Vv=function(n){G0(e,n);function e(t,r,i,o){o===void 0&&(o=null);var s=n.call(this)||this;s._onWillDispose=s._register(new j),s.onWillDispose=s._onWillDispose.event,s._onDidChangeDecorations=s._register(new MEe),s.onDidChangeDecorations=s._onDidChangeDecorations.event,s._onDidChangeLanguage=s._register(new j),s.onDidChangeLanguage=s._onDidChangeLanguage.event,s._onDidChangeLanguageConfiguration=s._register(new j),s.onDidChangeLanguageConfiguration=s._onDidChangeLanguageConfiguration.event,s._onDidChangeTokens=s._register(new j),s.onDidChangeTokens=s._onDidChangeTokens.event,s._onDidChangeOptions=s._register(new j),s.onDidChangeOptions=s._onDidChangeOptions.event,s._onDidChangeAttached=s._register(new j),s.onDidChangeAttached=s._onDidChangeAttached.event,s._eventEmitter=s._register(new PEe),nC++,s.id="$model"+nC,s.isForSimpleWidget=r.isForSimpleWidget,typeof o>"u"||o===null?s._associatedResource=bt.parse("inmemory://model/"+nC):s._associatedResource=o,s._attachedEditorCount=0,s._buffer=cU(t,r.defaultEOL),s._options=e.resolveOptions(s._buffer,r);var a=s._buffer.getLineCount(),u=s._buffer.getValueLengthInRange(new R(1,1,a,s._buffer.getLineLength(a)+1),0);return r.largeFileOptimizations?s._isTooLargeForTokenization=u>e.LARGE_FILE_SIZE_THRESHOLD||a>e.LARGE_FILE_LINE_COUNT_THRESHOLD:s._isTooLargeForTokenization=!1,s._isTooLargeForSyncing=u>e.MODEL_SYNC_LIMIT,s._versionId=1,s._alternativeVersionId=1,s._isDisposed=!1,s._isDisposing=!1,s._languageIdentifier=i||iS,s._languageRegistryListener=gt.onDidChange(function(l){l.languageIdentifier.id===s._languageIdentifier.id&&s._onDidChangeLanguageConfiguration.fire({})}),s._instanceId=LG(nC),s._lastDecorationId=0,s._decorations=Object.create(null),s._decorationsTree=new fU,s._commandManager=new Q8(s),s._isUndoing=!1,s._isRedoing=!1,s._trimAutoWhitespaceLines=null,s._tokens=new EEe,s._tokenization=new DEe(s),s}return e.createFromString=function(t,r,i,o){return r===void 0&&(r=e.DEFAULT_CREATION_OPTIONS),i===void 0&&(i=null),o===void 0&&(o=null),new e(t,r,i,o)},e.resolveOptions=function(t,r){if(r.detectIndentation){var i=J8(t,r.tabSize,r.insertSpaces);return new YC({tabSize:i.tabSize,indentSize:i.tabSize,insertSpaces:i.insertSpaces,trimAutoWhitespace:r.trimAutoWhitespace,defaultEOL:r.defaultEOL})}return new YC({tabSize:r.tabSize,indentSize:r.indentSize,insertSpaces:r.insertSpaces,trimAutoWhitespace:r.trimAutoWhitespace,defaultEOL:r.defaultEOL})},e.prototype.onDidChangeRawContentFast=function(t){return this._eventEmitter.fastEvent(function(r){return t(r.rawContentChangedEvent)})},e.prototype.onDidChangeRawContent=function(t){return this._eventEmitter.slowEvent(function(r){return t(r.rawContentChangedEvent)})},e.prototype.onDidChangeContentFast=function(t){return this._eventEmitter.fastEvent(function(r){return t(r.contentChangedEvent)})},e.prototype.onDidChangeContent=function(t){return this._eventEmitter.slowEvent(function(r){return t(r.contentChangedEvent)})},e.prototype.dispose=function(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,n.prototype.dispose.call(this),this._isDisposing=!1},e.prototype._assertNotDisposed=function(){if(this._isDisposed)throw new Error("Model is disposed!")},e.prototype._emitContentChangedEvent=function(t,r){this._isDisposing||this._eventEmitter.fire(new CEe(t,r))},e.prototype.setValue=function(t){if(this._assertNotDisposed(),t!==null){var r=cU(t,this._options.defaultEOL);this.setValueFromTextBuffer(r)}},e.prototype._createContentChanged2=function(t,r,i,o,s,a,u){return{changes:[{range:t,rangeOffset:r,rangeLength:i,text:o}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:s,isRedoing:a,isFlush:u}},e.prototype.setValueFromTextBuffer=function(t){if(this._assertNotDisposed(),t!==null){var r=this.getFullModelRange(),i=this.getValueLengthInRange(r),o=this.getLineCount(),s=this.getLineMaxColumn(o);this._buffer=t,this._increaseVersionId(),this._tokens.flush(),this._decorations=Object.create(null),this._decorationsTree=new fU,this._commandManager=new Q8(this),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new t1([new mEe],this._versionId,!1,!1),this._createContentChanged2(new R(1,1,o,s),0,i,this.getValue(),!1,!1,!0))}},e.prototype.setEOL=function(t){this._assertNotDisposed();var r=t===1?`\r
`:`
`;if(this._buffer.getEOL()!==r){var i=this.getFullModelRange(),o=this.getValueLengthInRange(i),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(r),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new t1([new wEe],this._versionId,!1,!1),this._createContentChanged2(new R(1,1,s,a),0,o,this.getValue(),!1,!1,!1))}},e.prototype._onBeforeEOLChange=function(){var t=this.getVersionId(),r=this._decorationsTree.search(0,!1,!1,t);this._ensureNodesHaveRanges(r)},e.prototype._onAfterEOLChange=function(){for(var t=this.getVersionId(),r=this._decorationsTree.collectNodesPostOrder(),i=0,o=r.length;i<o;i++){var s=r[i],a=s.cachedAbsoluteStart-s.start,u=this._buffer.getOffsetAt(s.range.startLineNumber,s.range.startColumn),l=this._buffer.getOffsetAt(s.range.endLineNumber,s.range.endColumn);s.cachedAbsoluteStart=u,s.cachedAbsoluteEnd=l,s.cachedVersionId=t,s.start=u-a,s.end=l-a,nf(s)}},e.prototype.onBeforeAttached=function(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)},e.prototype.onBeforeDetached=function(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)},e.prototype.isAttachedToEditor=function(){return this._attachedEditorCount>0},e.prototype.getAttachedEditorCount=function(){return this._attachedEditorCount},e.prototype.isTooLargeForSyncing=function(){return this._isTooLargeForSyncing},e.prototype.isTooLargeForTokenization=function(){return this._isTooLargeForTokenization},e.prototype.isDisposed=function(){return this._isDisposed},e.prototype.isDominatedByLongLines=function(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;for(var t=0,r=0,i=this._buffer.getLineCount(),o=1;o<=i;o++){var s=this._buffer.getLineLength(o);s>=AEe?r+=s:t+=s}return r>t},Object.defineProperty(e.prototype,"uri",{get:function(){return this._associatedResource},enumerable:!0,configurable:!0}),e.prototype.getOptions=function(){return this._assertNotDisposed(),this._options},e.prototype.getFormattingOptions=function(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}},e.prototype.updateOptions=function(t){this._assertNotDisposed();var r=typeof t.tabSize<"u"?t.tabSize:this._options.tabSize,i=typeof t.indentSize<"u"?t.indentSize:this._options.indentSize,o=typeof t.insertSpaces<"u"?t.insertSpaces:this._options.insertSpaces,s=typeof t.trimAutoWhitespace<"u"?t.trimAutoWhitespace:this._options.trimAutoWhitespace,a=new YC({tabSize:r,indentSize:i,insertSpaces:o,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s});if(!this._options.equals(a)){var u=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(u)}},e.prototype.detectIndentation=function(t,r){this._assertNotDisposed();var i=J8(this._buffer,r,t);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})},e._normalizeIndentationFromWhitespace=function(t,r,i){for(var o=0,s=0;s<t.length;s++)t.charAt(s)==="	"?o+=r:o++;var a="";if(!i){var u=Math.floor(o/r);o=o%r;for(var s=0;s<u;s++)a+="	"}for(var s=0;s<o;s++)a+=" ";return a},e.normalizeIndentation=function(t,r,i){var o=Mo(t);return o===-1&&(o=t.length),e._normalizeIndentationFromWhitespace(t.substring(0,o),r,i)+t.substring(o)},e.prototype.normalizeIndentation=function(t){return this._assertNotDisposed(),e.normalizeIndentation(t,this._options.indentSize,this._options.insertSpaces)},e.prototype.getVersionId=function(){return this._assertNotDisposed(),this._versionId},e.prototype.mightContainRTL=function(){return this._buffer.mightContainRTL()},e.prototype.mightContainNonBasicASCII=function(){return this._buffer.mightContainNonBasicASCII()},e.prototype.getAlternativeVersionId=function(){return this._assertNotDisposed(),this._alternativeVersionId},e.prototype.getOffsetAt=function(t){this._assertNotDisposed();var r=this._validatePosition(t.lineNumber,t.column,!1);return this._buffer.getOffsetAt(r.lineNumber,r.column)},e.prototype.getPositionAt=function(t){this._assertNotDisposed();var r=Math.min(this._buffer.getLength(),Math.max(0,t));return this._buffer.getPositionAt(r)},e.prototype._increaseVersionId=function(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId},e.prototype._overwriteAlternativeVersionId=function(t){this._alternativeVersionId=t},e.prototype.getValue=function(t,r){r===void 0&&(r=!1),this._assertNotDisposed();var i=this.getFullModelRange(),o=this.getValueInRange(i,t);return r?this._buffer.getBOM()+o:o},e.prototype.getValueLength=function(t,r){r===void 0&&(r=!1),this._assertNotDisposed();var i=this.getFullModelRange(),o=this.getValueLengthInRange(i,t);return r?this._buffer.getBOM().length+o:o},e.prototype.getValueInRange=function(t,r){return r===void 0&&(r=0),this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(t),r)},e.prototype.getValueLengthInRange=function(t,r){return r===void 0&&(r=0),this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(t),r)},e.prototype.getLineCount=function(){return this._assertNotDisposed(),this._buffer.getLineCount()},e.prototype.getLineContent=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(t)},e.prototype.getLineLength=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(t)},e.prototype.getLinesContent=function(){return this._assertNotDisposed(),this._buffer.getLinesContent()},e.prototype.getEOL=function(){return this._assertNotDisposed(),this._buffer.getEOL()},e.prototype.getLineMinColumn=function(t){return this._assertNotDisposed(),1},e.prototype.getLineMaxColumn=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(t)+1},e.prototype.getLineFirstNonWhitespaceColumn=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(t)},e.prototype.getLineLastNonWhitespaceColumn=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(t)},e.prototype._validateRangeRelaxedNoAllocations=function(t){var r=this._buffer.getLineCount(),i=t.startLineNumber,o=t.startColumn,s,a;if(i<1)s=1,a=1;else if(i>r)s=r,a=this.getLineMaxColumn(s);else if(s=i|0,o<=1)a=1;else{var u=this.getLineMaxColumn(s);o>=u?a=u:a=o|0}var l=t.endLineNumber,f=t.endColumn,h,d;if(l<1)h=1,d=1;else if(l>r)h=r,d=this.getLineMaxColumn(h);else if(h=l|0,f<=1)d=1;else{var u=this.getLineMaxColumn(h);f>=u?d=u:d=f|0}return i===s&&o===a&&l===h&&f===d&&t instanceof R&&!(t instanceof Ce)?t:new R(s,a,h,d)},e.prototype._isValidPosition=function(t,r,i){if(typeof t!="number"||typeof r!="number"||isNaN(t)||isNaN(r)||t<1||r<1||(t|0)!==t||(r|0)!==r)return!1;var o=this._buffer.getLineCount();if(t>o)return!1;var s=this.getLineMaxColumn(t);if(r>s)return!1;if(i&&r>1){var a=this._buffer.getLineCharCode(t,r-2);if(ao(a))return!1}return!0},e.prototype._validatePosition=function(t,r,i){var o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=Math.floor(typeof r=="number"&&!isNaN(r)?r:1),a=this._buffer.getLineCount();if(o<1)return new $(1,1);if(o>a)return new $(a,this.getLineMaxColumn(a));if(s<=1)return new $(o,1);var u=this.getLineMaxColumn(o);if(s>=u)return new $(o,u);if(i){var l=this._buffer.getLineCharCode(o,s-2);if(ao(l))return new $(o,s-1)}return new $(o,s)},e.prototype.validatePosition=function(t){return this._assertNotDisposed(),t instanceof $&&this._isValidPosition(t.lineNumber,t.column,!0)?t:this._validatePosition(t.lineNumber,t.column,!0)},e.prototype._isValidRange=function(t,r){var i=t.startLineNumber,o=t.startColumn,s=t.endLineNumber,a=t.endColumn;if(!this._isValidPosition(i,o,!1)||!this._isValidPosition(s,a,!1))return!1;if(r){var u=o>1?this._buffer.getLineCharCode(i,o-2):0,l=a>1&&a<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,a-2):0,f=ao(u),h=ao(l);return!f&&!h}return!0},e.prototype.validateRange=function(t){if(this._assertNotDisposed(),t instanceof R&&!(t instanceof Ce)&&this._isValidRange(t,!0))return t;var r=this._validatePosition(t.startLineNumber,t.startColumn,!1),i=this._validatePosition(t.endLineNumber,t.endColumn,!1),o=r.lineNumber,s=r.column,a=i.lineNumber,u=i.column,l=s>1?this._buffer.getLineCharCode(o,s-2):0,f=u>1&&u<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,u-2):0,h=ao(l),d=ao(f);return!h&&!d?new R(o,s,a,u):o===a&&s===u?new R(o,s-1,a,u-1):h&&d?new R(o,s-1,a,u+1):h?new R(o,s-1,a,u):new R(o,s,a,u+1)},e.prototype.modifyPosition=function(t,r){this._assertNotDisposed();var i=this.getOffsetAt(t)+r;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))},e.prototype.getFullModelRange=function(){this._assertNotDisposed();var t=this.getLineCount();return new R(1,1,t,this.getLineMaxColumn(t))},e.prototype.findMatchesLineByLine=function(t,r,i,o){return this._buffer.findMatchesLineByLine(t,r,i,o)},e.prototype.findMatches=function(t,r,i,o,s,a,u){u===void 0&&(u=NEe),this._assertNotDisposed();var l;if(R.isIRange(r)?l=this.validateRange(r):l=this.getFullModelRange(),!i&&t.indexOf(`
`)<0){var f=new yh(t,i,o,s),h=f.parseSearchRequest();return h?this.findMatchesLineByLine(l,h,a,u):[]}return tC.findMatches(this,new yh(t,i,o,s),l,a,u)},e.prototype.findNextMatch=function(t,r,i,o,s,a){this._assertNotDisposed();var u=this.validatePosition(r);if(!i&&t.indexOf(`
`)<0){var l=new yh(t,i,o,s),f=l.parseSearchRequest();if(!f)return null;var h=this.getLineCount(),d=new R(u.lineNumber,u.column,h,this.getLineMaxColumn(h)),g=this.findMatchesLineByLine(d,f,a,1);return tC.findNextMatch(this,new yh(t,i,o,s),u,a),g.length>0||(d=new R(1,1,u.lineNumber,this.getLineMaxColumn(u.lineNumber)),g=this.findMatchesLineByLine(d,f,a,1),g.length>0)?g[0]:null}return tC.findNextMatch(this,new yh(t,i,o,s),u,a)},e.prototype.findPreviousMatch=function(t,r,i,o,s,a){this._assertNotDisposed();var u=this.validatePosition(r);return tC.findPreviousMatch(this,new yh(t,i,o,s),u,a)},e.prototype.pushStackElement=function(){this._commandManager.pushStackElement()},e.prototype.pushEOL=function(t){var r=this.getEOL()===`
`?0:1;if(r!==t)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._commandManager.pushEOL(t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},e.prototype.pushEditOperations=function(t,r,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(t,r,i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},e.prototype._pushEditOperations=function(t,r,i){var o=this;if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){for(var s=r.map(function(k){return{range:o.validateRange(k.range),text:k.text}}),a=!0,u=0,l=t.length;u<l;u++){for(var f=t[u],h=!1,d=0,g=s.length;d<g;d++){var v=s[d].range,m=v.startLineNumber>f.endLineNumber,y=f.startLineNumber>v.endLineNumber;if(!m&&!y){h=!0;break}}if(!h){a=!1;break}}if(a)for(var u=0,l=this._trimAutoWhitespaceLines.length;u<l;u++){for(var b=this._trimAutoWhitespaceLines[u],C=this.getLineMaxColumn(b),E=!0,d=0,g=s.length;d<g;d++){var v=s[d].range,D=s[d].text;if(!(b<v.startLineNumber||b>v.endLineNumber)&&!(b===v.startLineNumber&&v.startColumn===C&&v.isEmpty()&&D&&D.length>0&&D.charAt(0)===`
`)&&!(b===v.startLineNumber&&v.startColumn===1&&v.isEmpty()&&D&&D.length>0&&D.charAt(D.length-1)===`
`)){E=!1;break}}E&&r.push({range:new R(b,1,b,C),text:null})}this._trimAutoWhitespaceLines=null}return this._commandManager.pushEditOperation(t,r,i)},e.prototype.applyEdits=function(t){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._applyEdits(t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},e.prototype._applyEdits=function(t){for(var r=0,i=t.length;r<i;r++)t[r].range=this.validateRange(t[r].range);var o=this._buffer.getLineCount(),s=this._buffer.applyEdits(t,this._options.trimAutoWhitespace),a=this._buffer.getLineCount(),u=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,u.length!==0){for(var l=[],f=o,r=0,i=u.length;r<i;r++){var h=u[r],d=IY(h.text),g=d[0],v=d[1];this._tokens.acceptEdit(h.range,g,v),this._onDidChangeDecorations.fire(),this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers);for(var m=h.range.startLineNumber,y=h.range.endLineNumber,b=y-m,C=g,E=Math.min(b,C),D=C-b,k=E;k>=0;k--){var I=m+k,T=a-f-D+I;l.push(new _Ee(I,this.getLineContent(T)))}if(E<b){var A=m+E;l.push(new yEe(A+1,y))}if(E<C){for(var M=m+E,L=C-E,F=a-f-L+M+1,W=[],z=0;z<L;z++){var K=F+z;W[K-F]=this.getLineContent(K)}l.push(new bEe(M+1,m+C,W))}f+=D}this._increaseVersionId(),this._emitContentChangedEvent(new t1(l,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:u,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits},e.prototype._undo=function(){this._isUndoing=!0;var t=this._commandManager.undo();return this._isUndoing=!1,t?(this._overwriteAlternativeVersionId(t.recordedVersionId),t.selections):null},e.prototype.undo=function(){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._undo()}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},e.prototype.canUndo=function(){return this._commandManager.canUndo()},e.prototype._redo=function(){this._isRedoing=!0;var t=this._commandManager.redo();return this._isRedoing=!1,t?(this._overwriteAlternativeVersionId(t.recordedVersionId),t.selections):null},e.prototype.redo=function(){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._redo()}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},e.prototype.canRedo=function(){return this._commandManager.canRedo()},e.prototype.changeDecorations=function(t,r){r===void 0&&(r=0),this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(r,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}},e.prototype._changeDecorations=function(t,r){var i=this,o={addDecoration:function(a,u){return i._onDidChangeDecorations.fire(),i._deltaDecorationsImpl(t,[],[{range:a,options:u}])[0]},changeDecoration:function(a,u){i._onDidChangeDecorations.fire(),i._changeDecorationImpl(a,u)},changeDecorationOptions:function(a,u){i._onDidChangeDecorations.fire(),i._changeDecorationOptionsImpl(a,dU(u))},removeDecoration:function(a){i._onDidChangeDecorations.fire(),i._deltaDecorationsImpl(t,[a],[])},deltaDecorations:function(a,u){return a.length===0&&u.length===0?[]:(i._onDidChangeDecorations.fire(),i._deltaDecorationsImpl(t,a,u))}},s=null;try{s=r(o)}catch(a){Le(a)}return o.addDecoration=t_,o.changeDecoration=t_,o.changeDecorationOptions=t_,o.removeDecoration=t_,o.deltaDecorations=t_,s},e.prototype.deltaDecorations=function(t,r,i){if(i===void 0&&(i=0),this._assertNotDisposed(),t||(t=[]),t.length===0&&r.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._deltaDecorationsImpl(i,t,r)}finally{this._onDidChangeDecorations.endDeferredEmit()}},e.prototype._getTrackedRange=function(t){return this.getDecorationRange(t)},e.prototype._setTrackedRange=function(t,r,i){var o=t?this._decorations[t]:null;if(!o)return r?this._deltaDecorationsImpl(0,[],[{range:r,options:hU[i]}])[0]:null;if(!r)return this._decorationsTree.delete(o),delete this._decorations[o.id],null;var s=this._validateRangeRelaxedNoAllocations(r),a=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),u=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(o),o.reset(this.getVersionId(),a,u,s),o.setOptions(hU[i]),this._decorationsTree.insert(o),o.id},e.prototype.removeAllDecorationsWithOwnerId=function(t){if(!this._isDisposed)for(var r=this._decorationsTree.collectNodesFromOwner(t),i=0,o=r.length;i<o;i++){var s=r[i];this._decorationsTree.delete(s),delete this._decorations[s.id]}},e.prototype.getDecorationOptions=function(t){var r=this._decorations[t];return r?r.options:null},e.prototype.getDecorationRange=function(t){var r=this._decorations[t];if(!r)return null;var i=this.getVersionId();return r.cachedVersionId!==i&&this._decorationsTree.resolveNode(r,i),r.range===null&&(r.range=this._getRangeAt(r.cachedAbsoluteStart,r.cachedAbsoluteEnd)),r.range},e.prototype.getLineDecorations=function(t,r,i){return r===void 0&&(r=0),i===void 0&&(i=!1),t<1||t>this.getLineCount()?[]:this.getLinesDecorations(t,t,r,i)},e.prototype.getLinesDecorations=function(t,r,i,o){i===void 0&&(i=0),o===void 0&&(o=!1);var s=this.getLineCount(),a=Math.min(s,Math.max(1,t)),u=Math.min(s,Math.max(1,r)),l=this.getLineMaxColumn(u);return this._getDecorationsInRange(new R(a,1,u,l),i,o)},e.prototype.getDecorationsInRange=function(t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=this.validateRange(t);return this._getDecorationsInRange(o,r,i)},e.prototype.getOverviewRulerDecorations=function(t,r){t===void 0&&(t=0),r===void 0&&(r=!1);var i=this.getVersionId(),o=this._decorationsTree.search(t,r,!0,i);return this._ensureNodesHaveRanges(o)},e.prototype.getAllDecorations=function(t,r){t===void 0&&(t=0),r===void 0&&(r=!1);var i=this.getVersionId(),o=this._decorationsTree.search(t,r,!1,i);return this._ensureNodesHaveRanges(o)},e.prototype._getDecorationsInRange=function(t,r,i){var o=this._buffer.getOffsetAt(t.startLineNumber,t.startColumn),s=this._buffer.getOffsetAt(t.endLineNumber,t.endColumn),a=this.getVersionId(),u=this._decorationsTree.intervalSearch(o,s,r,i,a);return this._ensureNodesHaveRanges(u)},e.prototype._ensureNodesHaveRanges=function(t){for(var r=0,i=t.length;r<i;r++){var o=t[r];o.range===null&&(o.range=this._getRangeAt(o.cachedAbsoluteStart,o.cachedAbsoluteEnd))}return t},e.prototype._getRangeAt=function(t,r){return this._buffer.getRangeAt(t,r-t)},e.prototype._changeDecorationImpl=function(t,r){var i=this._decorations[t];if(i){var o=this._validateRangeRelaxedNoAllocations(r),s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,a,o),this._decorationsTree.insert(i)}},e.prototype._changeDecorationOptionsImpl=function(t,r){var i=this._decorations[t];if(i){var o=!!(i.options.overviewRuler&&i.options.overviewRuler.color),s=!!(r.overviewRuler&&r.overviewRuler.color);o!==s?(this._decorationsTree.delete(i),i.setOptions(r),this._decorationsTree.insert(i)):i.setOptions(r)}},e.prototype._deltaDecorationsImpl=function(t,r,i){for(var o=this.getVersionId(),s=r.length,a=0,u=i.length,l=0,f=new Array(u);a<s||l<u;){var h=null;if(a<s){do h=this._decorations[r[a++]];while(!h&&a<s);h&&this._decorationsTree.delete(h)}if(l<u){if(!h){var d=++this._lastDecorationId,g=this._instanceId+";"+d;h=new wY(g,0,0),this._decorations[g]=h}var v=i[l],m=this._validateRangeRelaxedNoAllocations(v.range),y=dU(v.options),b=this._buffer.getOffsetAt(m.startLineNumber,m.startColumn),C=this._buffer.getOffsetAt(m.endLineNumber,m.endColumn);h.ownerId=t,h.reset(o,b,C,m),h.setOptions(y),this._decorationsTree.insert(h),f[l]=h.id,l++}else h&&delete this._decorations[h.id]}return f},e.prototype.setLineTokens=function(t,r){if(t<1||t>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokens.setTokens(this._languageIdentifier.id,t-1,this._buffer.getLineLength(t),r)},e.prototype.setTokens=function(t){if(t.length!==0){for(var r=[],i=0,o=t.length;i<o;i++){var s=t[i];r.push({fromLineNumber:s.startLineNumber,toLineNumber:s.startLineNumber+s.tokens.length-1});for(var a=0,u=s.tokens.length;a<u;a++)this.setLineTokens(s.startLineNumber+a,s.tokens[a])}this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,ranges:r})}},e.prototype.tokenizeViewport=function(t,r){t=Math.max(1,t),r=Math.min(this._buffer.getLineCount(),r),this._tokenization.tokenizeViewport(t,r)},e.prototype.clearTokens=function(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})},e.prototype._emitModelTokensChangedEvent=function(t){this._isDisposing||this._onDidChangeTokens.fire(t)},e.prototype.resetTokenization=function(){this._tokenization.reset()},e.prototype.forceTokenization=function(t){if(t<1||t>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(t)},e.prototype.isCheapToTokenize=function(t){return this._tokenization.isCheapToTokenize(t)},e.prototype.tokenizeIfCheap=function(t){this.isCheapToTokenize(t)&&this.forceTokenization(t)},e.prototype.getLineTokens=function(t){if(t<1||t>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(t)},e.prototype._getLineTokens=function(t){var r=this.getLineContent(t);return this._tokens.getTokens(this._languageIdentifier.id,t-1,r)},e.prototype.getLanguageIdentifier=function(){return this._languageIdentifier},e.prototype.getModeId=function(){return this._languageIdentifier.language},e.prototype.setMode=function(t){if(this._languageIdentifier.id!==t.id){var r={oldLanguage:this._languageIdentifier.language,newLanguage:t.language};this._languageIdentifier=t,this._onDidChangeLanguage.fire(r),this._onDidChangeLanguageConfiguration.fire({})}},e.prototype.getLanguageIdAtPosition=function(t,r){var i=this.validatePosition(new $(t,r)),o=this.getLineTokens(i.lineNumber);return o.getLanguageId(o.findTokenIndexAtOffset(i.column-1))},e.prototype.getWordAtPosition=function(t){this._assertNotDisposed();var r=this.validatePosition(t),i=this.getLineContent(r.lineNumber),o=this._getLineTokens(r.lineNumber),s=o.findTokenIndexAtOffset(r.column-1),a=e._findLanguageBoundaries(o,s),u=a[0],l=a[1],f=HA(r.column,gt.getWordDefinition(o.getLanguageId(s)),i.substring(u,l),u);if(f&&f.startColumn<=t.column&&t.column<=f.endColumn)return f;if(s>0&&u===r.column-1){var h=e._findLanguageBoundaries(o,s-1),d=h[0],g=h[1],v=HA(r.column,gt.getWordDefinition(o.getLanguageId(s-1)),i.substring(d,g),d);if(v&&v.startColumn<=t.column&&t.column<=v.endColumn)return v}return null},e._findLanguageBoundaries=function(t,r){for(var i=t.getLanguageId(r),o=0,s=r;s>=0&&t.getLanguageId(s)===i;s--)o=t.getStartOffset(s);for(var a=t.getLineContent().length,s=r,u=t.getCount();s<u&&t.getLanguageId(s)===i;s++)a=t.getEndOffset(s);return[o,a]},e.prototype.getWordUntilPosition=function(t){var r=this.getWordAtPosition(t);return r?{word:r.word.substr(0,t.column-r.startColumn),startColumn:r.startColumn,endColumn:t.column}:{word:"",startColumn:t.column,endColumn:t.column}},e.prototype.findMatchingBracketUp=function(t,r){var i=t.toLowerCase(),o=this.validatePosition(r),s=this._getLineTokens(o.lineNumber),a=s.getLanguageId(s.findTokenIndexAtOffset(o.column-1)),u=gt.getBracketsSupport(a);if(!u)return null;var l=u.textIsBracket[i];return l?this._findMatchingBracketUp(l,o):null},e.prototype.matchBracket=function(t){return this._matchBracket(this.validatePosition(t))},e.prototype._matchBracket=function(t){var r=t.lineNumber,i=this._getLineTokens(r),o=this._buffer.getLineContent(r),s=i.findTokenIndexAtOffset(t.column-1);if(s<0)return null;var a=gt.getBracketsSupport(i.getLanguageId(s));if(a&&!gh(i.getStandardTokenType(s))){for(var u=Math.max(i.getStartOffset(s),t.column-1-a.maxBracketLength),l=Math.min(i.getEndOffset(s),t.column-1+a.maxBracketLength),f=null;;){var h=vh.findNextBracketInToken(a.forwardRegex,r,o,u,l);if(!h)break;if(h.startColumn<=t.column&&t.column<=h.endColumn){var d=o.substring(h.startColumn-1,h.endColumn-1);d=d.toLowerCase();var g=this._matchFoundBracket(h,a.textIsBracket[d],a.textIsOpenBracket[d]);g&&(f=g)}u=h.endColumn-1}if(f)return f}if(s>0&&i.getStartOffset(s)===t.column-1){var l=i.getStartOffset(s);s--;var v=gt.getBracketsSupport(i.getLanguageId(s));if(v&&!gh(i.getStandardTokenType(s))){var u=Math.max(i.getStartOffset(s),t.column-1-v.maxBracketLength),h=vh.findPrevBracketInToken(v.reversedRegex,r,o,u,l);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn){var d=o.substring(h.startColumn-1,h.endColumn-1);d=d.toLowerCase();var g=this._matchFoundBracket(h,v.textIsBracket[d],v.textIsOpenBracket[d]);if(g)return g}}}return null},e.prototype._matchFoundBracket=function(t,r,i){if(!r)return null;if(i){var o=this._findMatchingBracketDown(r,t.getEndPosition());if(o)return[t,o]}else{var o=this._findMatchingBracketUp(r,t.getStartPosition());if(o)return[t,o]}return null},e.prototype._findMatchingBracketUp=function(t,r){for(var i=t.languageIdentifier.id,o=t.reversedRegex,s=-1,a=r.lineNumber;a>=1;a--){var u=this._getLineTokens(a),l=u.getCount(),f=this._buffer.getLineContent(a),h=l-1,d=-1;for(a===r.lineNumber&&(h=u.findTokenIndexAtOffset(r.column-1),d=r.column-1);h>=0;h--){var g=u.getLanguageId(h),v=u.getStandardTokenType(h),m=u.getStartOffset(h),y=u.getEndOffset(h);if(d===-1&&(d=y),g===i&&!gh(v))for(;;){var b=vh.findPrevBracketInToken(o,a,f,m,d);if(!b)break;var C=f.substring(b.startColumn-1,b.endColumn-1);if(C=C.toLowerCase(),C===t.open?s++:C===t.close&&s--,s===0)return b;d=b.startColumn-1}d=-1}}return null},e.prototype._findMatchingBracketDown=function(t,r){for(var i=t.languageIdentifier.id,o=t.forwardRegex,s=1,a=r.lineNumber,u=this.getLineCount();a<=u;a++){var l=this._getLineTokens(a),f=l.getCount(),h=this._buffer.getLineContent(a),d=0,g=0;for(a===r.lineNumber&&(d=l.findTokenIndexAtOffset(r.column-1),g=r.column-1);d<f;d++){var v=l.getLanguageId(d),m=l.getStandardTokenType(d),y=l.getStartOffset(d),b=l.getEndOffset(d);if(g===0&&(g=y),v===i&&!gh(m))for(;;){var C=vh.findNextBracketInToken(o,a,h,g,b);if(!C)break;var E=h.substring(C.startColumn-1,C.endColumn-1);if(E=E.toLowerCase(),E===t.open?s++:E===t.close&&s--,s===0)return C;g=C.endColumn-1}g=0}}return null},e.prototype.findPrevBracket=function(t){for(var r=this.validatePosition(t),i=-1,o=null,s=r.lineNumber;s>=1;s--){var a=this._getLineTokens(s),u=a.getCount(),l=this._buffer.getLineContent(s),f=u-1,h=-1;for(s===r.lineNumber&&(f=a.findTokenIndexAtOffset(r.column-1),h=r.column-1);f>=0;f--){var d=a.getLanguageId(f),g=a.getStandardTokenType(f),v=a.getStartOffset(f),m=a.getEndOffset(f);if(h===-1&&(h=m),i!==d&&(i=d,o=gt.getBracketsSupport(i)),o&&!gh(g)){var y=vh.findPrevBracketInToken(o.reversedRegex,s,l,v,h);if(y)return this._toFoundBracket(o,y)}h=-1}}return null},e.prototype.findNextBracket=function(t){for(var r=this.validatePosition(t),i=-1,o=null,s=r.lineNumber,a=this.getLineCount();s<=a;s++){var u=this._getLineTokens(s),l=u.getCount(),f=this._buffer.getLineContent(s),h=0,d=0;for(s===r.lineNumber&&(h=u.findTokenIndexAtOffset(r.column-1),d=r.column-1);h<l;h++){var g=u.getLanguageId(h),v=u.getStandardTokenType(h),m=u.getStartOffset(h),y=u.getEndOffset(h);if(d===0&&(d=m),i!==g&&(i=g,o=gt.getBracketsSupport(i)),o&&!gh(v)){var b=vh.findNextBracketInToken(o.forwardRegex,s,f,d,y);if(b)return this._toFoundBracket(o,b)}d=0}}return null},e.prototype._toFoundBracket=function(t,r){if(!r)return null;var i=this.getValueInRange(r);i=i.toLowerCase();var o=t.textIsBracket[i];return o?{range:r,open:o.open,close:o.close,isOpen:t.textIsOpenBracket[i]}:null},e.computeIndentLevel=function(t,r){for(var i=0,o=0,s=t.length;o<s;){var a=t.charCodeAt(o);if(a===32)i++;else if(a===9)i=i-i%r+r;else break;o++}return o===s?-1:i},e.prototype._computeIndentLevel=function(t){return e.computeIndentLevel(this._buffer.getLineContent(t+1),this._options.tabSize)},e.prototype.getActiveIndentGuide=function(t,r,i){var o=this;this._assertNotDisposed();var s=this.getLineCount();if(t<1||t>s)throw new Error("Illegal value for lineNumber");for(var a=gt.getFoldingRules(this._languageIdentifier.id),u=!!(a&&a.offSide),l=-2,f=-1,h=-2,d=-1,g=function(K){if(l!==-1&&(l===-2||l>K-1)){l=-1,f=-1;for(var X=K-2;X>=0;X--){var se=o._computeIndentLevel(X);if(se>=0){l=X,f=se;break}}}if(h===-2){h=-1,d=-1;for(var X=K;X<s;X++){var we=o._computeIndentLevel(X);if(we>=0){h=X,d=we;break}}}},v=-2,m=-1,y=-2,b=-1,C=function(K){if(v===-2){v=-1,m=-1;for(var X=K-2;X>=0;X--){var se=o._computeIndentLevel(X);if(se>=0){v=X,m=se;break}}}if(y!==-1&&(y===-2||y<K-1)){y=-1,b=-1;for(var X=K;X<s;X++){var we=o._computeIndentLevel(X);if(we>=0){y=X,b=we;break}}}},E=0,D=!0,k=0,I=!0,T=0,A=0;D||I;A++){var M=t-A,L=t+A;if(A!==0&&(M<1||M<r)&&(D=!1),A!==0&&(L>s||L>i)&&(I=!1),A>5e4&&(D=!1,I=!1),D){var F=void 0,W=this._computeIndentLevel(M-1);if(W>=0?(h=M-1,d=W,F=Math.ceil(W/this._options.indentSize)):(g(M),F=this._getIndentLevelForWhitespaceLine(u,f,d)),A===0){if(E=M,k=L,T=F,T===0)return{startLineNumber:E,endLineNumber:k,indent:T};continue}F>=T?E=M:D=!1}if(I){var z=void 0,W=this._computeIndentLevel(L-1);W>=0?(v=L-1,m=W,z=Math.ceil(W/this._options.indentSize)):(C(L),z=this._getIndentLevelForWhitespaceLine(u,m,b)),z>=T?k=L:I=!1}}return{startLineNumber:E,endLineNumber:k,indent:T}},e.prototype.getLinesIndentGuides=function(t,r){this._assertNotDisposed();var i=this.getLineCount();if(t<1||t>i)throw new Error("Illegal value for startLineNumber");if(r<1||r>i)throw new Error("Illegal value for endLineNumber");for(var o=gt.getFoldingRules(this._languageIdentifier.id),s=!!(o&&o.offSide),a=new Array(r-t+1),u=-2,l=-1,f=-2,h=-1,d=t;d<=r;d++){var g=d-t,v=this._computeIndentLevel(d-1);if(v>=0){u=d-1,l=v,a[g]=Math.ceil(v/this._options.indentSize);continue}if(u===-2){u=-1,l=-1;for(var m=d-2;m>=0;m--){var y=this._computeIndentLevel(m);if(y>=0){u=m,l=y;break}}}if(f!==-1&&(f===-2||f<d-1)){f=-1,h=-1;for(var m=d;m<i;m++){var y=this._computeIndentLevel(m);if(y>=0){f=m,h=y;break}}}a[g]=this._getIndentLevelForWhitespaceLine(s,l,h)}return a},e.prototype._getIndentLevelForWhitespaceLine=function(t,r,i){return r===-1||i===-1?0:r<i?1+Math.floor(r/this._options.indentSize):r===i?Math.ceil(i/this._options.indentSize):t?Math.ceil(i/this._options.indentSize):1+Math.floor(i/this._options.indentSize)},e.MODEL_SYNC_LIMIT=50*1024*1024,e.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,e.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,e.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:pa.tabSize,indentSize:pa.indentSize,insertSpaces:pa.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:pa.trimAutoWhitespace,largeFileOptimizations:pa.largeFileOptimizations},e}(te),fU=function(){function n(){this._decorationsTree0=new iU,this._decorationsTree1=new iU}return n.prototype.intervalSearch=function(e,t,r,i,o){var s=this._decorationsTree0.intervalSearch(e,t,r,i,o),a=this._decorationsTree1.intervalSearch(e,t,r,i,o);return s.concat(a)},n.prototype.search=function(e,t,r,i){if(r)return this._decorationsTree1.search(e,t,i);var o=this._decorationsTree0.search(e,t,i),s=this._decorationsTree1.search(e,t,i);return o.concat(s)},n.prototype.collectNodesFromOwner=function(e){var t=this._decorationsTree0.collectNodesFromOwner(e),r=this._decorationsTree1.collectNodesFromOwner(e);return t.concat(r)},n.prototype.collectNodesPostOrder=function(){var e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder();return e.concat(t)},n.prototype.insert=function(e){yT(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)},n.prototype.delete=function(e){yT(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)},n.prototype.resolveNode=function(e,t){yT(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)},n.prototype.acceptReplace=function(e,t,r,i){this._decorationsTree0.acceptReplace(e,t,r,i),this._decorationsTree1.acceptReplace(e,t,r,i)},n}();function rh(n){return n.replace(/[^a-z0-9\-_]/gi," ")}var xY=function(){function n(e){this.color=e.color||Ay,this.darkColor=e.darkColor||Ay}return n}(),OEe=function(n){G0(e,n);function e(t){var r=n.call(this,t)||this;return r._resolvedColor=null,r.position=typeof t.position=="number"?t.position:hs.Center,r}return e.prototype.getColor=function(t){return this._resolvedColor||(t.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,t):this._resolvedColor=this._resolveColor(this.color,t)),this._resolvedColor},e.prototype.invalidateCachedColor=function(){this._resolvedColor=null},e.prototype._resolveColor=function(t,r){if(typeof t=="string")return t;var i=t?r.getColor(t.id):null;return i?i.toString():Ay},e}(xY),REe=function(n){G0(e,n);function e(t){var r=n.call(this,t)||this;return r.position=t.position,r}return e.prototype.getColor=function(t){return this._resolvedColor||(t.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,t):this._resolvedColor=this._resolveColor(this.color,t)),this._resolvedColor},e.prototype.invalidateCachedColor=function(){this._resolvedColor=void 0},e.prototype._resolveColor=function(t,r){return typeof t=="string"?Z.fromHex(t):r.getColor(t.id)},e}(xY),tt=function(){function n(e){this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?rh(e.className):null,this.hoverMessage=Ug(e.hoverMessage),this.glyphMarginHoverMessage=Ug(e.glyphMarginHoverMessage),this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new OEe(e.overviewRuler):null,this.minimap=e.minimap?new REe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?rh(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?rh(e.linesDecorationsClassName):null,this.marginClassName=e.marginClassName?rh(e.marginClassName):null,this.inlineClassName=e.inlineClassName?rh(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?rh(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?rh(e.afterContentClassName):null}return n.register=function(e){return new n(e)},n.createDynamic=function(e){return new n(e)},n}();tt.EMPTY=tt.register({});var hU=[tt.register({stickiness:0}),tt.register({stickiness:1}),tt.register({stickiness:2}),tt.register({stickiness:3})];function dU(n){return n instanceof tt?n:tt.createDynamic(n)}var MEe=function(n){G0(e,n);function e(){var t=n.call(this)||this;return t._actual=t._register(new j),t.event=t._actual.event,t._deferredCnt=0,t._shouldFire=!1,t}return e.prototype.beginDeferredEmit=function(){this._deferredCnt++},e.prototype.endDeferredEmit=function(){this._deferredCnt--,this._deferredCnt===0&&this._shouldFire&&(this._shouldFire=!1,this._actual.fire({}))},e.prototype.fire=function(){this._shouldFire=!0},e}(te),PEe=function(n){G0(e,n);function e(){var t=n.call(this)||this;return t._fastEmitter=t._register(new j),t.fastEvent=t._fastEmitter.event,t._slowEmitter=t._register(new j),t.slowEvent=t._slowEmitter.event,t._deferredCnt=0,t._deferredEvent=null,t}return e.prototype.beginDeferredEmit=function(){this._deferredCnt++},e.prototype.endDeferredEmit=function(){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){var t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}},e.prototype.fire=function(t){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(t):this._deferredEvent=t;return}this._fastEmitter.fire(t),this._slowEmitter.fire(t)},e}(te),FEe=function(){return!0},pU=function(){return!1},BEe=function(n){return n===" "||n==="	"};function gU(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}var DY=function(){function n(e,t,r){this._languageIdentifier=e;var i=r.editor;this.readOnly=i.readOnly,this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.pageSize=Math.max(1,Math.floor(i.layoutInfo.height/i.fontInfo.lineHeight)-2),this.lineHeight=i.lineHeight,this.useTabStops=i.useTabStops,this.wordSeparators=i.wordSeparators,this.emptySelectionClipboard=i.emptySelectionClipboard,this.copyWithSyntaxHighlighting=i.copyWithSyntaxHighlighting,this.multiCursorMergeOverlapping=i.multiCursorMergeOverlapping,this.autoClosingBrackets=i.autoClosingBrackets,this.autoClosingQuotes=i.autoClosingQuotes,this.autoClosingOvertype=i.autoClosingOvertype,this.autoSurround=i.autoSurround,this.autoIndent=i.autoIndent,this.autoClosingPairsOpen2=new Map,this.autoClosingPairsClose2=new Map,this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:n._getShouldAutoClose(e,this.autoClosingQuotes),bracket:n._getShouldAutoClose(e,this.autoClosingBrackets)};var o=n._getAutoClosingPairs(e);if(o)for(var s=0,a=o;s<a.length;s++){var u=a[s];gU(this.autoClosingPairsOpen2,u.open.charAt(u.open.length-1),u),u.close.length===1&&gU(this.autoClosingPairsClose2,u.close,u)}var l=n._getSurroundingPairs(e);if(l)for(var f=0,h=l;f<h.length;f++){var u=h[f];this.surroundingPairs[u.open]=u.close}}return n.shouldRecreate=function(e){return e.layoutInfo||e.wordSeparators||e.emptySelectionClipboard||e.multiCursorMergeOverlapping||e.autoClosingBrackets||e.autoClosingQuotes||e.autoClosingOvertype||e.autoSurround||e.useTabStops||e.lineHeight||e.readOnly},Object.defineProperty(n.prototype,"electricChars",{get:function(){if(!this._electricChars){this._electricChars={};var e=n._getElectricCharacters(this._languageIdentifier);if(e)for(var t=0,r=e;t<r.length;t++){var i=r[t];this._electricChars[i]=!0}}return this._electricChars},enumerable:!0,configurable:!0}),n.prototype.normalizeIndentation=function(e){return Vv.normalizeIndentation(e,this.indentSize,this.insertSpaces)},n._getElectricCharacters=function(e){try{return gt.getElectricCharacters(e.id)}catch(t){return Le(t),null}},n._getAutoClosingPairs=function(e){try{return gt.getAutoClosingPairs(e.id)}catch(t){return Le(t),null}},n._getShouldAutoClose=function(e,t){switch(t){case"beforeWhitespace":return BEe;case"languageDefined":return n._getLanguageDefinedShouldAutoClose(e);case"always":return FEe;case"never":return pU}},n._getLanguageDefinedShouldAutoClose=function(e){try{var t=gt.getAutoCloseBeforeSet(e.id);return function(r){return t.indexOf(r)!==-1}}catch(r){return Le(r),pU}},n._getSurroundingPairs=function(e){try{return gt.getSurroundingPairs(e.id)}catch(t){return Le(t),null}},n}(),Ai=function(){function n(e,t,r,i){this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=r,this.leftoverVisibleColumns=i,this.selection=n._computeSelection(this.selectionStart,this.position)}return n.prototype.equals=function(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)},n.prototype.hasSelection=function(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()},n.prototype.move=function(e,t,r,i){return e?new n(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new $(t,r),i):new n(new R(t,r,t,r),i,new $(t,r),i)},n._computeSelection=function(e,t){var r,i,o,s;return e.isEmpty()?(r=e.startLineNumber,i=e.startColumn,o=t.lineNumber,s=t.column):t.isBeforeOrEqual(e.getStartPosition())?(r=e.endLineNumber,i=e.endColumn,o=t.lineNumber,s=t.column):(r=e.startLineNumber,i=e.startColumn,o=t.lineNumber,s=t.column),new Ce(r,i,o,s)},n}(),vU=function(){function n(e,t,r){this.model=t,this.viewModel=r,this.config=new DY(this.model.getLanguageIdentifier(),this.model.getOptions(),e)}return n.prototype.validateViewPosition=function(e,t){return this.viewModel.coordinatesConverter.validateViewPosition(e,t)},n.prototype.validateViewRange=function(e,t){return this.viewModel.coordinatesConverter.validateViewRange(e,t)},n.prototype.convertViewRangeToModelRange=function(e){return this.viewModel.coordinatesConverter.convertViewRangeToModelRange(e)},n.prototype.convertViewPositionToModelPosition=function(e,t){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new $(e,t))},n.prototype.convertModelPositionToViewPosition=function(e){return this.viewModel.coordinatesConverter.convertModelPositionToViewPosition(e)},n.prototype.convertModelRangeToViewRange=function(e){return this.viewModel.coordinatesConverter.convertModelRangeToViewRange(e)},n.prototype.getCurrentScrollTop=function(){return this.viewModel.viewLayout.getCurrentScrollTop()},n.prototype.getCompletelyVisibleViewRange=function(){return this.viewModel.getCompletelyVisibleViewRange()},n.prototype.getCompletelyVisibleModelRange=function(){var e=this.viewModel.getCompletelyVisibleViewRange();return this.viewModel.coordinatesConverter.convertViewRangeToModelRange(e)},n.prototype.getCompletelyVisibleViewRangeAtScrollTop=function(e){return this.viewModel.getCompletelyVisibleViewRangeAtScrollTop(e)},n.prototype.getVerticalOffsetForViewLine=function(e){return this.viewModel.viewLayout.getVerticalOffsetForLineNumber(e)},n}(),WEe=function(){function n(e){this.modelState=e,this.viewState=null}return n}(),VEe=function(){function n(e){this.modelState=null,this.viewState=e}return n}(),ut=function(){function n(e,t){this.modelState=e,this.viewState=t}return n.fromModelState=function(e){return new WEe(e)},n.fromViewState=function(e){return new VEe(e)},n.fromModelSelection=function(e){var t=e.selectionStartLineNumber,r=e.selectionStartColumn,i=e.positionLineNumber,o=e.positionColumn,s=new Ai(new R(t,r,t,r),0,new $(i,o),0);return n.fromModelState(s)},n.fromModelSelections=function(e){for(var t=[],r=0,i=e.length;r<i;r++)t[r]=this.fromModelSelection(e[r]);return t},n.prototype.equals=function(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)},n}(),to=function(){function n(e,t,r){this.type=e,this.commands=t,this.shouldPushStackElementBefore=r.shouldPushStackElementBefore,this.shouldPushStackElementAfter=r.shouldPushStackElementAfter}return n}(),$t=function(){function n(){}return n.isLowSurrogate=function(e,t,r){var i=e.getLineContent(t);return r<0||r>=i.length?!1:uF(i.charCodeAt(r))},n.isHighSurrogate=function(e,t,r){var i=e.getLineContent(t);return r<0||r>=i.length?!1:ao(i.charCodeAt(r))},n.isInsideSurrogatePair=function(e,t,r){return this.isHighSurrogate(e,t,r-2)},n.visibleColumnFromColumn=function(e,t,r){var i=e.length;i>t-1&&(i=t-1);for(var o=0,s=0;s<i;s++){var a=e.charCodeAt(s);a===9?o=this.nextRenderTabStop(o,r):Sl(a)?o=o+2:o=o+1}return o},n.visibleColumnFromColumn2=function(e,t,r){return this.visibleColumnFromColumn(t.getLineContent(r.lineNumber),r.column,e.tabSize)},n.columnFromVisibleColumn=function(e,t,r){if(t<=0)return 1;for(var i=e.length,o=0,s=0;s<i;s++){var a=e.charCodeAt(s),u=void 0;if(a===9?u=this.nextRenderTabStop(o,r):Sl(a)?u=o+2:u=o+1,u>=t){var l=t-o,f=u-t;return f<l?s+2:s+1}o=u}return i+1},n.columnFromVisibleColumn2=function(e,t,r,i){var o=this.columnFromVisibleColumn(t.getLineContent(r),i,e.tabSize),s=t.getLineMinColumn(r);if(o<s)return s;var a=t.getLineMaxColumn(r);return o>a?a:o},n.nextRenderTabStop=function(e,t){return e+t-e%t},n.nextIndentTabStop=function(e,t){return e+t-e%t},n.prevRenderTabStop=function(e,t){return e-1-(e-1)%t},n.prevIndentTabStop=function(e,t){return e-1-(e-1)%t},n}();function I_(n){return n==="'"||n==='"'||n==="`"}var HEe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yu=function(){function n(e,t,r,i,o,s){r===void 0&&(r=0),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),this.element=e,this.type=t,this.mouseColumn=r,this.position=i,!o&&i&&(o=new R(i.lineNumber,i.column,i.lineNumber,i.column)),this.range=o,this.detail=s}return n._typeToString=function(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"},n.toString=function(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail},n.prototype.toString=function(){return n.toString(this)},n}(),ks=function(){function n(){}return n.isTextArea=function(e){return e.length===2&&e[0]===3&&e[1]===6},n.isChildOfViewLines=function(e){return e.length>=4&&e[0]===3&&e[3]===7},n.isStrictChildOfViewLines=function(e){return e.length>4&&e[0]===3&&e[3]===7},n.isChildOfScrollableElement=function(e){return e.length>=2&&e[0]===3&&e[1]===5},n.isChildOfMinimap=function(e){return e.length>=2&&e[0]===3&&e[1]===8},n.isChildOfContentWidgets=function(e){return e.length>=4&&e[0]===3&&e[3]===1},n.isChildOfOverflowingContentWidgets=function(e){return e.length>=1&&e[0]===2},n.isChildOfOverlayWidgets=function(e){return e.length>=2&&e[0]===3&&e[1]===4},n}(),XO=function(){function n(e,t,r){this.model=e.model,this.layoutInfo=e.configuration.editor.layoutInfo,this.viewDomNode=t.viewDomNode,this.lineHeight=e.configuration.editor.lineHeight,this.typicalHalfwidthCharacterWidth=e.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth,this.lastViewCursorsRenderData=r,this._context=e,this._viewHelper=t}return n.prototype.getZoneAtCoord=function(e){return n.getZoneAtCoord(this._context,e)},n.getZoneAtCoord=function(e,t){var r=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(r){var i=r.verticalOffset+r.height/2,o=e.model.getLineCount(),s=null,a=void 0,u=null;return r.afterLineNumber!==o&&(u=new $(r.afterLineNumber+1,1)),r.afterLineNumber>0&&(s=new $(r.afterLineNumber,e.model.getLineMaxColumn(r.afterLineNumber))),u===null?a=s:s===null?a=u:t<i?a=s:a=u,{viewZoneId:r.id,afterLineNumber:r.afterLineNumber,positionBefore:s,positionAfter:u,position:a}}return null},n.prototype.getFullLineRangeAtCoord=function(e){if(this._context.viewLayout.isAfterLines(e)){var t=this._context.model.getLineCount(),r=this._context.model.getLineMaxColumn(t);return{range:new R(t,r,t,r),isAfterLines:!0}}var i=this._context.viewLayout.getLineNumberAtVerticalOffset(e),o=this._context.model.getLineMaxColumn(i);return{range:new R(i,1,i,o),isAfterLines:!1}},n.prototype.getLineNumberAtVerticalOffset=function(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)},n.prototype.isAfterLines=function(e){return this._context.viewLayout.isAfterLines(e)},n.prototype.getVerticalOffsetForLineNumber=function(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)},n.prototype.findAttribute=function(e,t){return n._findAttribute(e,t,this._viewHelper.viewDomNode)},n._findAttribute=function(e,t,r){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===r)return null;e=e.parentNode}return null},n.prototype.getLineWidth=function(e){return this._viewHelper.getLineWidth(e)},n.prototype.visibleRangeForPosition2=function(e,t){return this._viewHelper.visibleRangeForPosition2(e,t)},n.prototype.getPositionFromDOMInfo=function(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)},n.prototype.getCurrentScrollTop=function(){return this._context.viewLayout.getCurrentScrollTop()},n.prototype.getCurrentScrollLeft=function(){return this._context.viewLayout.getCurrentScrollLeft()},n}(),UEe=function(){function n(e,t,r){this.editorPos=t,this.pos=r,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+r.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+r.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=r.x-t.x<e.layoutInfo.contentLeft&&r.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,LY._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}return n}(),jEe=function(n){HEe(e,n);function e(t,r,i,o){var s=n.call(this,t,r,i)||this;return s._ctx=t,o?(s.target=o,s.targetPath=Eu.collect(o,t.viewDomNode)):(s.target=null,s.targetPath=new Uint8Array(0)),s}return e.prototype.toString=function(){return"pos("+this.pos.x+","+this.pos.y+"), editorPos("+this.editorPos.x+","+this.editorPos.y+"), mouseVerticalOffset: "+this.mouseVerticalOffset+", mouseContentHorizontalOffset: "+this.mouseContentHorizontalOffset+`
	target: `+(this.target?this.target.outerHTML:null)},e.prototype.fulfill=function(t,r,i,o){r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=null);var s=this.mouseColumn;return r&&r.column<this._ctx.model.getLineMaxColumn(r.lineNumber)&&(s=$t.visibleColumnFromColumn(this._ctx.model.getLineContent(r.lineNumber),r.column,this._ctx.model.getOptions().tabSize)+1),new Yu(this.target,t,s,r,i,o)},e.prototype.withTarget=function(t){return new e(this._ctx,this.editorPos,this.pos,t)},e}(UEe),zEe={isAfterLines:!0};function ET(n){return{isAfterLines:!1,horizontalDistanceToText:n}}var LY=function(){function n(e,t){this._context=e,this._viewHelper=t}return n.prototype.mouseTargetIsWidget=function(e){var t=e.target,r=Eu.collect(t,this._viewHelper.viewDomNode);return!!(ks.isChildOfContentWidgets(r)||ks.isChildOfOverflowingContentWidgets(r)||ks.isChildOfOverlayWidgets(r))},n.prototype.createMouseTarget=function(e,t,r,i){var o=new XO(this._context,this._viewHelper,e),s=new jEe(o,t,r,i);try{var a=n._createMouseTarget(o,s,!1);return a}catch{return s.fulfill(0)}},n._createMouseTarget=function(e,t,r){if(t.target===null){if(r)return t.fulfill(0);var i=n._doHitTest(e,t);return i.position?n.createMouseTargetFromHitTestPosition(e,t,i.position.lineNumber,i.position.column):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}var o=t,s=null;return s=s||n._hitTestContentWidget(e,o),s=s||n._hitTestOverlayWidget(e,o),s=s||n._hitTestMinimap(e,o),s=s||n._hitTestScrollbarSlider(e,o),s=s||n._hitTestViewZone(e,o),s=s||n._hitTestMargin(e,o),s=s||n._hitTestViewCursor(e,o),s=s||n._hitTestTextArea(e,o),s=s||n._hitTestViewLines(e,o,r),s=s||n._hitTestScrollbar(e,o),s||t.fulfill(0)},n._hitTestContentWidget=function(e,t){if(ks.isChildOfContentWidgets(t.targetPath)||ks.isChildOfOverflowingContentWidgets(t.targetPath)){var r=e.findAttribute(t.target,"widgetId");return r?t.fulfill(9,null,null,r):t.fulfill(0)}return null},n._hitTestOverlayWidget=function(e,t){if(ks.isChildOfOverlayWidgets(t.targetPath)){var r=e.findAttribute(t.target,"widgetId");return r?t.fulfill(12,null,null,r):t.fulfill(0)}return null},n._hitTestViewCursor=function(e,t){if(t.target)for(var r=e.lastViewCursorsRenderData,i=0,o=r;i<o.length;i++){var s=o[i];if(t.target===s.domNode)return t.fulfill(6,s.position)}if(t.isInContentArea)for(var r=e.lastViewCursorsRenderData,a=t.mouseContentHorizontalOffset,u=t.mouseVerticalOffset,l=0,f=r;l<f.length;l++){var s=f[l];if(!(a<s.contentLeft)&&!(a>s.contentLeft+s.width)){var h=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(h<=u&&u<=h+s.height)return t.fulfill(6,s.position)}}return null},n._hitTestViewZone=function(e,t){var r=e.getZoneAtCoord(t.mouseVerticalOffset);if(r){var i=t.isInContentArea?8:5;return t.fulfill(i,r.position,null,r)}return null},n._hitTestTextArea=function(e,t){return ks.isTextArea(t.targetPath)?t.fulfill(1):null},n._hitTestMargin=function(e,t){if(t.isInMarginArea){var r=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=r.range.getStartPosition(),o=Math.abs(t.pos.x-t.editorPos.x),s={isAfterLines:r.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};return o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,i,r.range,s):(o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,i,r.range,s):(o-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,i,r.range,s)))}return null},n._hitTestViewLines=function(e,t,r){if(!ks.isChildOfViewLines(t.targetPath))return null;if(e.isAfterLines(t.mouseVerticalOffset)){var i=e.model.getLineCount(),o=e.model.getLineMaxColumn(i);return t.fulfill(7,new $(i,o),void 0,zEe)}if(r){if(ks.isStrictChildOfViewLines(t.targetPath)){var s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(s)===0){var a=e.getLineWidth(s),u=ET(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new $(s,1),void 0,u)}}return t.fulfill(0)}var l=n._doHitTest(e,t);return l.position?n.createMouseTargetFromHitTestPosition(e,t,l.position.lineNumber,l.position.column):this._createMouseTarget(e,t.withTarget(l.hitTarget),!0)},n._hitTestMinimap=function(e,t){if(ks.isChildOfMinimap(t.targetPath)){var r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.model.getLineMaxColumn(r);return t.fulfill(11,new $(r,i))}return null},n._hitTestScrollbarSlider=function(e,t){if(ks.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){var r=t.target.className;if(r&&/\b(slider|scrollbar)\b/.test(r)){var i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.model.getLineMaxColumn(i);return t.fulfill(11,new $(i,o))}}return null},n._hitTestScrollbar=function(e,t){if(ks.isChildOfScrollableElement(t.targetPath)){var r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.model.getLineMaxColumn(r);return t.fulfill(11,new $(r,i))}return null},n.prototype.getMouseColumn=function(e,t){var r=this._context.configuration.editor.layoutInfo,i=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-r.contentLeft;return n._getMouseColumn(i,this._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth)},n._getMouseColumn=function(e,t){if(e<0)return 1;var r=Math.round(e/t);return r+1},n.createMouseTargetFromHitTestPosition=function(e,t,r,i){var o=new $(r,i),s=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>s){if(U0&&o.column===1){var a=ET(t.mouseContentHorizontalOffset-s);return t.fulfill(7,new $(r,e.model.getLineMaxColumn(r)),void 0,a)}var u=ET(t.mouseContentHorizontalOffset-s);return t.fulfill(7,o,void 0,u)}var l=e.visibleRangeForPosition2(r,i);if(!l)return t.fulfill(0,o);var f=l.left;if(t.mouseContentHorizontalOffset===f)return t.fulfill(6,o);var h=[];if(h.push({offset:l.left,column:i}),i>1){var d=e.visibleRangeForPosition2(r,i-1);d&&h.push({offset:d.left,column:i-1})}var g=e.model.getLineMaxColumn(r);if(i<g){var v=e.visibleRangeForPosition2(r,i+1);v&&h.push({offset:v.left,column:i+1})}h.sort(function(E,D){return E.offset-D.offset});for(var m=1;m<h.length;m++){var y=h[m-1],b=h[m];if(y.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=b.offset){var C=new R(r,y.column,r,b.column);return t.fulfill(6,o,C)}}return t.fulfill(6,o)},n._doHitTestWithCaretRangeFromPoint=function(e,t){var r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.getVerticalOffsetForLineNumber(r),o=i+Math.floor(e.lineHeight/2),s=t.pos.y+(o-t.mouseVerticalOffset);s<=t.editorPos.y&&(s=t.editorPos.y+1),s>=t.editorPos.y+e.layoutInfo.height&&(s=t.editorPos.y+e.layoutInfo.height-1);var a=new MF(t.pos.x,s),u=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return u.position?u:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())},n._actualDoHitTestWithCaretRangeFromPoint=function(e,t){var r=document.caretRangeFromPoint(t.clientX,t.clientY);if(!r||!r.startContainer)return{position:null,hitTarget:null};var i=r.startContainer,o=null;if(i.nodeType===i.TEXT_NODE){var s=i.parentNode,a=s?s.parentNode:null,u=a?a.parentNode:null,l=u&&u.nodeType===u.ELEMENT_NODE?u.className:null;if(l===ug.CLASS_NAME){var f=e.getPositionFromDOMInfo(s,r.startOffset);return{position:f,hitTarget:null}}else o=i.parentNode}else if(i.nodeType===i.ELEMENT_NODE){var s=i.parentNode,a=s?s.parentNode:null,h=a&&a.nodeType===a.ELEMENT_NODE?a.className:null;if(h===ug.CLASS_NAME){var f=e.getPositionFromDOMInfo(i,i.textContent.length);return{position:f,hitTarget:null}}else o=i}return{position:null,hitTarget:o}},n._doHitTestWithCaretPositionFromPoint=function(e,t){var r=document.caretPositionFromPoint(t.clientX,t.clientY);if(r.offsetNode.nodeType===r.offsetNode.TEXT_NODE){var i=r.offsetNode.parentNode,o=i?i.parentNode:null,s=o?o.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(a===ug.CLASS_NAME){var u=e.getPositionFromDOMInfo(r.offsetNode.parentNode,r.offset);return{position:u,hitTarget:null}}else return{position:null,hitTarget:r.offsetNode.parentNode}}return{position:null,hitTarget:r.offsetNode}},n._doHitTestWithMoveToPoint=function(e,t){var r=null,i=null,o=document.body.createTextRange();try{o.moveToPoint(t.clientX,t.clientY)}catch{return{position:null,hitTarget:null}}o.collapse(!0);var s=o?o.parentElement():null,a=s?s.parentNode:null,u=a?a.parentNode:null,l=u&&u.nodeType===u.ELEMENT_NODE?u.className:"";if(l===ug.CLASS_NAME){var f=o.duplicate();f.moveToElementText(s),f.setEndPoint("EndToStart",o),r=e.getPositionFromDOMInfo(s,f.text.length),f.moveToElementText(e.viewDomNode)}else i=s;return o.moveToElementText(e.viewDomNode),{position:r,hitTarget:i}},n._doHitTest=function(e,t){return document.caretRangeFromPoint?this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint?this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates()):document.body.createTextRange?this._doHitTestWithMoveToPoint(e,t.pos.toClientCoordinates()):{position:null,hitTarget:null}},n}(),kY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function QO(n){return function(e,t){var r=!1;return n&&(r=n.mouseTargetIsWidget(t)),r||t.preventDefault(),t}}var vI=function(n){kY(e,n);function e(t,r,i){var o=n.call(this)||this;o._isFocused=!1,o._context=t,o.viewController=r,o.viewHelper=i,o.mouseTargetFactory=new LY(o._context,i),o._mouseDownOperation=o._register(new qEe(o._context,o.viewController,o.viewHelper,function(u,l){return o._createMouseTarget(u,l)},function(u){return o._getMouseColumn(u)})),o._asyncFocus=o._register(new hr(function(){return o.viewHelper.focusTextArea()},0)),o.lastMouseLeaveTime=-1;var s=new SSe(o.viewHelper.viewDomNode);o._register(s.onContextMenu(o.viewHelper.viewDomNode,function(u){return o._onContextMenu(u,!0)})),o._register(s.onMouseMoveThrottled(o.viewHelper.viewDomNode,function(u){return o._onMouseMove(u)},QO(o.mouseTargetFactory),e.MOUSE_MOVE_MINIMUM_TIME)),o._register(s.onMouseUp(o.viewHelper.viewDomNode,function(u){return o._onMouseUp(u)})),o._register(s.onMouseLeave(o.viewHelper.viewDomNode,function(u){return o._onMouseLeave(u)})),o._register(s.onMouseDown(o.viewHelper.viewDomNode,function(u){return o._onMouseDown(u)}));var a=function(u){if(o.viewController.emitMouseWheel(u),!!o._context.configuration.editor.viewInfo.mouseWheelZoom){var l=new jg(u);if(l.browserEvent.ctrlKey||l.browserEvent.metaKey){var f=Il.getZoomLevel(),h=l.deltaY>0?1:-1;Il.setZoomLevel(f+h),l.preventDefault(),l.stopPropagation()}}};return o._register(ie(o.viewHelper.viewDomNode,uu?"mousewheel":"wheel",a,!0)),o._context.addEventHandler(o),o}return e.prototype.dispose=function(){this._context.removeEventHandler(this),n.prototype.dispose.call(this)},e.prototype.onCursorStateChanged=function(t){return this._mouseDownOperation.onCursorStateChanged(t),!1},e.prototype.onFocusChanged=function(t){return this._isFocused=t.isFocused,!1},e.prototype.onScrollChanged=function(t){return this._mouseDownOperation.onScrollChanged(),!1},e.prototype.getTargetAtClientPoint=function(t,r){var i=new gY(t,r),o=i.toPageCoordinates(),s=vY(this.viewHelper.viewDomNode);if(o.y<s.y||o.y>s.y+s.height||o.x<s.x||o.x>s.x+s.width)return null;var a=this.viewHelper.getLastViewCursorsRenderData();return this.mouseTargetFactory.createMouseTarget(a,s,o,null)},e.prototype._createMouseTarget=function(t,r){var i=this.viewHelper.getLastViewCursorsRenderData();return this.mouseTargetFactory.createMouseTarget(i,t.editorPos,t.pos,r?t.target:null)},e.prototype._getMouseColumn=function(t){return this.mouseTargetFactory.getMouseColumn(t.editorPos,t.pos)},e.prototype._onContextMenu=function(t,r){this.viewController.emitContextMenu({event:t,target:this._createMouseTarget(t,r)})},e.prototype._onMouseMove=function(t){if(!this._mouseDownOperation.isActive()){var r=t.timestamp;r<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:t,target:this._createMouseTarget(t,!0)})}},e.prototype._onMouseLeave=function(t){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:t,target:null})},e.prototype._onMouseUp=function(t){this.viewController.emitMouseUp({event:t,target:this._createMouseTarget(t,!0)})},e.prototype._onMouseDown=function(t){var r=this,i=this._createMouseTarget(t,!0),o=i.type===6||i.type===7,s=i.type===2||i.type===3||i.type===4,a=i.type===3,u=this._context.configuration.editor.viewInfo.selectOnLineNumbers,l=i.type===8||i.type===5,f=i.type===9,h=t.leftButton||t.middleButton;ct&&t.leftButton&&t.ctrlKey&&(h=!1);var d=function(){Ro&&!r._isFocused?r._asyncFocus.schedule():(t.preventDefault(),r.viewHelper.focusTextArea())};if(h&&(o||a&&u))d(),this._mouseDownOperation.start(i.type,t);else if(s)t.preventDefault();else if(l){var g=i.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(g.viewZoneId)&&(d(),this._mouseDownOperation.start(i.type,t),t.preventDefault())}else f&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(d(),t.preventDefault());this.viewController.emitMouseDown({event:t,target:i})},e.MOUSE_MOVE_MINIMUM_TIME=100,e}(K0),qEe=function(n){kY(e,n);function e(t,r,i,o,s){var a=n.call(this)||this;return a._context=t,a._viewController=r,a._viewHelper=i,a._createMouseTarget=o,a._getMouseColumn=s,a._mouseMoveMonitor=a._register(new ESe(a._viewHelper.viewDomNode)),a._onScrollTimeout=a._register(new Ho),a._mouseState=new $Ee,a._currentSelection=new Ce(1,1,1,1),a._isActive=!1,a._lastMouseEvent=null,a}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype.isActive=function(){return this._isActive},e.prototype._onMouseDownThenMove=function(t){this._lastMouseEvent=t,this._mouseState.setModifiers(t);var r=this._findMousePosition(t,!0);r&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:t,target:r}):this._dispatchMouse(r,!0))},e.prototype.start=function(t,r){var i=this;this._lastMouseEvent=r,this._mouseState.setStartedOnLineNumbers(t===3),this._mouseState.setStartButtons(r),this._mouseState.setModifiers(r);var o=this._findMousePosition(r,!0);if(!(!o||!o.position)){if(this._mouseState.trySetCount(r.detail,o.position),r.detail=this._mouseState.count,!this._context.configuration.editor.readOnly&&this._context.configuration.editor.dragAndDrop&&!this._mouseState.altKey&&r.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&o.type===6&&o.position&&this._currentSelection.containsPosition(o.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(QO(null),function(s){return i._onMouseDownThenMove(s)},function(){var s=i._findMousePosition(i._lastMouseEvent,!0);i._viewController.emitMouseDrop({event:i._lastMouseEvent,target:s?i._createMouseTarget(i._lastMouseEvent,!0):null}),i._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(o,r.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(QO(null),function(s){return i._onMouseDownThenMove(s)},function(){return i._stop()}))}},e.prototype._stop=function(){this._isActive=!1,this._onScrollTimeout.cancel()},e.prototype.onScrollChanged=function(){var t=this;this._isActive&&this._onScrollTimeout.setIfNotSet(function(){if(t._lastMouseEvent){var r=t._findMousePosition(t._lastMouseEvent,!1);r&&(t._mouseState.isDragAndDrop||t._dispatchMouse(r,!0))}},10)},e.prototype.onCursorStateChanged=function(t){this._currentSelection=t.selections[0]},e.prototype._getPositionOutsideEditor=function(t){var r=t.editorPos,i=this._context.model,o=this._context.viewLayout,s=this._getMouseColumn(t);if(t.posy<r.y){var a=Math.max(o.getCurrentScrollTop()-(r.y-t.posy),0),u=XO.getZoneAtCoord(this._context,a);if(u){var l=this._helpPositionJumpOverViewZone(u);if(l)return new Yu(null,13,s,l)}var f=o.getLineNumberAtVerticalOffset(a);return new Yu(null,13,s,new $(f,1))}if(t.posy>r.y+r.height){var a=o.getCurrentScrollTop()+(t.posy-r.y),u=XO.getZoneAtCoord(this._context,a);if(u){var l=this._helpPositionJumpOverViewZone(u);if(l)return new Yu(null,13,s,l)}var h=o.getLineNumberAtVerticalOffset(a);return new Yu(null,13,s,new $(h,i.getLineMaxColumn(h)))}var d=o.getLineNumberAtVerticalOffset(o.getCurrentScrollTop()+(t.posy-r.y));return t.posx<r.x?new Yu(null,13,s,new $(d,1)):t.posx>r.x+r.width?new Yu(null,13,s,new $(d,i.getLineMaxColumn(d))):null},e.prototype._findMousePosition=function(t,r){var i=this._getPositionOutsideEditor(t);if(i)return i;var o=this._createMouseTarget(t,r),s=o.position;if(!s)return null;if(o.type===8||o.type===5){var a=this._helpPositionJumpOverViewZone(o.detail);if(a)return new Yu(o.element,o.type,o.mouseColumn,a,null,o.detail)}return o},e.prototype._helpPositionJumpOverViewZone=function(t){var r=new $(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=t.positionBefore,o=t.positionAfter;return i&&o?i.isBefore(r)?i:o:null},e.prototype._dispatchMouse=function(t,r){t.position&&this._viewController.dispatchMouse({position:t.position,mouseColumn:t.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:r,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})},e}(te),$Ee=function(){function n(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}return Object.defineProperty(n.prototype,"altKey",{get:function(){return this._altKey},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ctrlKey",{get:function(){return this._ctrlKey},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"metaKey",{get:function(){return this._metaKey},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"shiftKey",{get:function(){return this._shiftKey},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"leftButton",{get:function(){return this._leftButton},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"middleButton",{get:function(){return this._middleButton},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"startedOnLineNumbers",{get:function(){return this._startedOnLineNumbers},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"count",{get:function(){return this._lastMouseDownCount},enumerable:!0,configurable:!0}),n.prototype.setModifiers=function(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey},n.prototype.setStartButtons=function(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton},n.prototype.setStartedOnLineNumbers=function(e){this._startedOnLineNumbers=e},n.prototype.trySetCount=function(e,t){var r=new Date().getTime();r-this._lastSetMouseDownCountTime>n.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=r,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)},n.CLEAR_MOUSE_DOWN_COUNT_TIME=400,n}(),mI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function TY(n,e){var t={translationY:e.translationY,translationX:e.translationX};return n&&(t.translationY+=n.translationY,t.translationX+=n.translationX),t}var KEe=function(n){mI(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return o.viewHelper.linesContentDomNode.style.msTouchAction="none",o.viewHelper.linesContentDomNode.style.msContentZooming="none",o._installGestureHandlerTimeout=window.setTimeout(function(){if(o._installGestureHandlerTimeout=-1,window.MSGesture){var s=new MSGesture,a=new MSGesture;s.target=o.viewHelper.linesContentDomNode,a.target=o.viewHelper.linesContentDomNode,o.viewHelper.linesContentDomNode.addEventListener("MSPointerDown",function(u){var l=u.pointerType;if(l===(u.MSPOINTER_TYPE_MOUSE||"mouse")){o._lastPointerType="mouse";return}else l===(u.MSPOINTER_TYPE_TOUCH||"touch")?(o._lastPointerType="touch",s.addPointer(u.pointerId)):(o._lastPointerType="pen",a.addPointer(u.pointerId))}),o._register(z0(o.viewHelper.linesContentDomNode,"MSGestureChange",function(u){return o._onGestureChange(u)},TY)),o._register(ie(o.viewHelper.linesContentDomNode,"MSGestureTap",function(u){return o._onCaptureGestureTap(u)},!0))}},100),o._lastPointerType="mouse",o}return e.prototype._onMouseDown=function(t){this._lastPointerType==="mouse"&&n.prototype._onMouseDown.call(this,t)},e.prototype._onCaptureGestureTap=function(t){var r=this,i=new Zg(t,this.viewHelper.viewDomNode),o=this._createMouseTarget(i,!1);o.position&&this.viewController.moveTo(o.position),i.browserEvent.fromElement?(i.preventDefault(),this.viewHelper.focusTextArea()):setTimeout(function(){r.viewHelper.focusTextArea()})},e.prototype._onGestureChange=function(t){this._context.viewLayout.deltaScrollNow(-t.translationX,-t.translationY)},e.prototype.dispose=function(){window.clearTimeout(this._installGestureHandlerTimeout),n.prototype.dispose.call(this)},e}(vI),GEe=function(n){mI(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return o.viewHelper.linesContentDomNode.style.touchAction="none",o._installGestureHandlerTimeout=window.setTimeout(function(){if(o._installGestureHandlerTimeout=-1,window.MSGesture){var s=new MSGesture,a=new MSGesture;s.target=o.viewHelper.linesContentDomNode,a.target=o.viewHelper.linesContentDomNode,o.viewHelper.linesContentDomNode.addEventListener("pointerdown",function(u){var l=u.pointerType;if(l==="mouse"){o._lastPointerType="mouse";return}else l==="touch"?(o._lastPointerType="touch",s.addPointer(u.pointerId)):(o._lastPointerType="pen",a.addPointer(u.pointerId))}),o._register(z0(o.viewHelper.linesContentDomNode,"MSGestureChange",function(u){return o._onGestureChange(u)},TY)),o._register(ie(o.viewHelper.linesContentDomNode,"MSGestureTap",function(u){return o._onCaptureGestureTap(u)},!0))}},100),o._lastPointerType="mouse",o}return e.prototype._onMouseDown=function(t){this._lastPointerType==="mouse"&&n.prototype._onMouseDown.call(this,t)},e.prototype._onCaptureGestureTap=function(t){var r=this,i=new Zg(t,this.viewHelper.viewDomNode),o=this._createMouseTarget(i,!1);o.position&&this.viewController.moveTo(o.position),i.browserEvent.fromElement?(i.preventDefault(),this.viewHelper.focusTextArea()):setTimeout(function(){r.viewHelper.focusTextArea()})},e.prototype._onGestureChange=function(t){this._context.viewLayout.deltaScrollNow(-t.translationX,-t.translationY)},e.prototype.dispose=function(){window.clearTimeout(this._installGestureHandlerTimeout),n.prototype.dispose.call(this)},e}(vI),YEe=function(n){mI(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return Bv.addTarget(o.viewHelper.linesContentDomNode),o._register(ie(o.viewHelper.linesContentDomNode,Ar.Tap,function(s){return o.onTap(s)})),o._register(ie(o.viewHelper.linesContentDomNode,Ar.Change,function(s){return o.onChange(s)})),o._register(ie(o.viewHelper.linesContentDomNode,Ar.Contextmenu,function(s){return o._onContextMenu(new Zg(s,o.viewHelper.viewDomNode),!1)})),o}return e.prototype.onTap=function(t){t.preventDefault(),this.viewHelper.focusTextArea();var r=this._createMouseTarget(new Zg(t,this.viewHelper.viewDomNode),!1);r.position&&this.viewController.moveTo(r.position)},e.prototype.onChange=function(t){this._context.viewLayout.deltaScrollNow(-t.translationX,-t.translationY)},e}(vI),ZEe=function(n){mI(e,n);function e(t,r,i){var o=n.call(this)||this;return window.navigator.msPointerEnabled?o.handler=o._register(new KEe(t,r,i)):window.TouchEvent?o.handler=o._register(new YEe(t,r,i)):window.navigator.pointerEnabled||window.PointerEvent?o.handler=o._register(new GEe(t,r,i)):o.handler=o._register(new vI(t,r,i)),o}return e.prototype.getTargetAtClientPoint=function(t,r){return this.handler.getTargetAtClientPoint(t,r)},e}(te),es=function(){function n(e,t,r,i,o){this.value=e,this.selectionStart=t,this.selectionEnd=r,this.selectionStartPosition=i,this.selectionEndPosition=o}return n.prototype.toString=function(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"},n.readFromTextArea=function(e){return new n(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)},n.prototype.collapseSelection=function(){return new n(this.value,this.value.length,this.value.length,null,null)},n.prototype.writeToTextArea=function(e,t,r){t.setValue(e,this.value),r&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)},n.prototype.deduceEditorPosition=function(e){if(e<=this.selectionStart){var t=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,t,-1)}if(e>=this.selectionEnd){var t=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,t,1)}var r=this.value.substring(this.selectionStart,e);if(r.indexOf("")===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,r,1);var i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,-1)},n.prototype._finishDeduceEditorPosition=function(e,t,r){for(var i=0,o=-1;(o=t.indexOf(`
`,o+1))!==-1;)i++;return[e,r*t.length,i]},n.selectedText=function(e){return new n(e,0,e.length,null,null)},n.deduceInput=function(e,t,r,i){if(!e)return{text:"",replaceCharCnt:0};var o=e.value,s=e.selectionStart,a=e.selectionEnd,u=t.value,l=t.selectionStart,f=t.selectionEnd;i&&o.length>0&&s===a&&l===f&&!Oy(u,o)&&Cl(u,o)&&(s=0,a=0);var h=o.substring(a),d=u.substring(f),g=Dbe(h,d);u=u.substring(0,u.length-g),o=o.substring(0,o.length-g);var v=o.substring(0,s),m=u.substring(0,l),y=aF(v,m);if(u=u.substring(y),o=o.substring(y),l-=y,s-=y,f-=y,a-=y,r&&l===f&&o.length>0){var b=null;if(l===u.length?Oy(u,o)&&(b=u.substring(o.length)):Cl(u,o)&&(b=u.substring(0,u.length-o.length)),b!==null&&b.length>0&&(/\uFE0F/.test(b)||Tbe(b)))return{text:b,replaceCharCnt:0}}if(l===f){if(o===u&&s===0&&a===o.length&&l===u.length&&u.indexOf(`
`)===-1&&Abe(u))return{text:"",replaceCharCnt:0};var C=v.length-y;return{text:u,replaceCharCnt:C}}var E=a-s;return{text:u,replaceCharCnt:E}},n.EMPTY=new n("",0,0,null,null),n}(),XEe=function(){function n(){}return n._getPageOfLine=function(e){return Math.floor((e-1)/n._LINES_PER_PAGE)},n._getRangeForPage=function(e){var t=e*n._LINES_PER_PAGE,r=t+1,i=t+n._LINES_PER_PAGE;return new R(r,1,i+1,1)},n.fromEditorSelection=function(e,t,r,i){var o=n._getPageOfLine(r.startLineNumber),s=n._getRangeForPage(o),a=n._getPageOfLine(r.endLineNumber),u=n._getRangeForPage(a),l=s.intersectRanges(new R(1,1,r.startLineNumber,r.startColumn)),f=t.getValueInRange(l,1),h=t.getLineCount(),d=t.getLineMaxColumn(h),g=u.intersectRanges(new R(r.endLineNumber,r.endColumn,h,d)),v=t.getValueInRange(g,1),m;if(o===a||o+1===a)m=t.getValueInRange(r,1);else{var y=s.intersectRanges(r),b=u.intersectRanges(r);m=t.getValueInRange(y,1)+""+t.getValueInRange(b,1)}if(i){var C=500;f.length>C&&(f=f.substring(f.length-C,f.length)),v.length>C&&(v=v.substring(0,C)),m.length>2*C&&(m=m.substring(0,C)+""+m.substring(m.length-C,m.length))}return new es(f+m+v,f.length,f.length+m.length,new $(r.startLineNumber,r.startColumn),new $(r.endLineNumber,r.endColumn))},n._LINES_PER_PAGE=10,n}(),NY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uS={forceCopyWithSyntaxHighlighting:!1},QEe=function(n){NY(e,n);function e(t,r){var i=n.call(this)||this;i._onFocus=i._register(new j),i.onFocus=i._onFocus.event,i._onBlur=i._register(new j),i.onBlur=i._onBlur.event,i._onKeyDown=i._register(new j),i.onKeyDown=i._onKeyDown.event,i._onKeyUp=i._register(new j),i.onKeyUp=i._onKeyUp.event,i._onCut=i._register(new j),i.onCut=i._onCut.event,i._onPaste=i._register(new j),i.onPaste=i._onPaste.event,i._onType=i._register(new j),i.onType=i._onType.event,i._onCompositionStart=i._register(new j),i.onCompositionStart=i._onCompositionStart.event,i._onCompositionUpdate=i._register(new j),i.onCompositionUpdate=i._onCompositionUpdate.event,i._onCompositionEnd=i._register(new j),i.onCompositionEnd=i._onCompositionEnd.event,i._onSelectionChangeRequest=i._register(new j),i.onSelectionChangeRequest=i._onSelectionChangeRequest.event,i._host=t,i._textArea=i._register(new JEe(r)),i._lastTextAreaEvent=0,i._asyncTriggerCut=i._register(new hr(function(){return i._onCut.fire()},0)),i._textAreaState=es.EMPTY,i._selectionChangeListener=null,i.writeScreenReaderContent("ctor"),i._hasFocus=!1,i._isDoingComposition=!1,i._nextCommand=0,i._register(Br(r.domNode,"keydown",function(u){i._isDoingComposition&&(u.keyCode===109||u.keyCode===1)&&u.stopPropagation(),u.equals(9)&&u.preventDefault(),i._onKeyDown.fire(u)})),i._register(Br(r.domNode,"keyup",function(u){i._onKeyUp.fire(u)})),i._register(ie(r.domNode,"compositionstart",function(u){i._lastTextAreaEvent=1,!i._isDoingComposition&&(i._isDoingComposition=!0,uu||i._setAndWriteTextAreaState("compositionstart",es.EMPTY),i._onCompositionStart.fire())}));var o=function(u,l){var f=i._textAreaState,h=es.readFromTextArea(i._textArea);return[h,es.deduceInput(f,h,u,l)]},s=function(u){var l=i._textAreaState,f=es.selectedText(u),h={text:f.value,replaceCharCnt:l.selectionEnd-l.selectionStart};return[f,h]},a=function(u){return!!(uu&&u==="ja"||Ro&&u.indexOf("zh-Han")===0)};return i._register(ie(r.domNode,"compositionupdate",function(u){if(i._lastTextAreaEvent=2,a(u.locale)){var l=o(!1,!1),f=l[0],h=l[1];i._textAreaState=f,i._onType.fire(h),i._onCompositionUpdate.fire(u);return}var d=s(u.data),g=d[0],v=d[1];i._textAreaState=g,i._onType.fire(v),i._onCompositionUpdate.fire(u)})),i._register(ie(r.domNode,"compositionend",function(u){if(i._lastTextAreaEvent=3,a(u.locale)){var l=o(!1,!1),f=l[0],h=l[1];i._textAreaState=f,i._onType.fire(h)}else{var d=s(u.data),f=d[0],h=d[1];i._textAreaState=f,i._onType.fire(h)}(uu||ky)&&(i._textAreaState=es.readFromTextArea(i._textArea)),i._isDoingComposition&&(i._isDoingComposition=!1,i._onCompositionEnd.fire())})),i._register(ie(r.domNode,"input",function(){var u=i._lastTextAreaEvent===8;if(i._lastTextAreaEvent=4,i._textArea.setIgnoreSelectionChangeTime("received input event"),!i._isDoingComposition){var l=o(ct,u&&ct),f=l[0],h=l[1];h.replaceCharCnt===0&&h.text.length===1&&ao(h.text.charCodeAt(0))||(i._textAreaState=f,i._nextCommand===0?h.text!==""&&i._onType.fire(h):(h.text!==""&&i._onPaste.fire({text:h.text}),i._nextCommand=0))}})),i._register(ie(r.domNode,"cut",function(u){i._lastTextAreaEvent=5,i._textArea.setIgnoreSelectionChangeTime("received cut event"),i._ensureClipboardGetsEditorSelection(u),i._asyncTriggerCut.schedule()})),i._register(ie(r.domNode,"copy",function(u){i._lastTextAreaEvent=6,i._ensureClipboardGetsEditorSelection(u)})),i._register(ie(r.domNode,"paste",function(u){if(i._lastTextAreaEvent=7,i._textArea.setIgnoreSelectionChangeTime("received paste event"),rC.canUseTextData(u)){var l=rC.getTextData(u);l!==""&&i._onPaste.fire({text:l})}else i._textArea.getSelectionStart()!==i._textArea.getSelectionEnd()&&i._setAndWriteTextAreaState("paste",es.EMPTY),i._nextCommand=1})),i._register(ie(r.domNode,"focus",function(){i._lastTextAreaEvent=8,i._setHasFocus(!0)})),i._register(ie(r.domNode,"blur",function(){i._lastTextAreaEvent=9,i._setHasFocus(!1)})),i}return e.prototype._installSelectionChangeListener=function(){var t=this,r=0;return ie(document,"selectionchange",function(i){if(t._hasFocus&&!t._isDoingComposition&&!(!ky||!Hi)){var o=Date.now(),s=o-r;if(r=o,!(s<5)){var a=o-t._textArea.getIgnoreSelectionChangeTime();if(t._textArea.resetSelectionChangeTime(),!(a<100)&&!(!t._textAreaState.selectionStartPosition||!t._textAreaState.selectionEndPosition)){var u=t._textArea.getValue();if(t._textAreaState.value===u){var l=t._textArea.getSelectionStart(),f=t._textArea.getSelectionEnd();if(!(t._textAreaState.selectionStart===l&&t._textAreaState.selectionEnd===f)){var h=t._textAreaState.deduceEditorPosition(l),d=t._host.deduceModelPosition(h[0],h[1],h[2]),g=t._textAreaState.deduceEditorPosition(f),v=t._host.deduceModelPosition(g[0],g[1],g[2]),m=new Ce(d.lineNumber,d.column,v.lineNumber,v.column);t._onSelectionChangeRequest.fire(m)}}}}}})},e.prototype.dispose=function(){n.prototype.dispose.call(this),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)},e.prototype.focusTextArea=function(){this._setHasFocus(!0)},e.prototype.isFocused=function(){return this._hasFocus},e.prototype._setHasFocus=function(t){this._hasFocus!==t&&(this._hasFocus=t,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&(U0?this._setAndWriteTextAreaState("focusgain",es.EMPTY):this.writeScreenReaderContent("focusgain")),this._hasFocus?this._onFocus.fire():this._onBlur.fire())},e.prototype._setAndWriteTextAreaState=function(t,r){this._hasFocus||(r=r.collapseSelection()),r.writeToTextArea(t,this._textArea,this._hasFocus),this._textAreaState=r},e.prototype.writeScreenReaderContent=function(t){this._isDoingComposition||this._setAndWriteTextAreaState(t,this._host.getScreenReaderContent(this._textAreaState))},e.prototype._ensureClipboardGetsEditorSelection=function(t){var r=this._host.getPlainTextToCopy();if(!rC.canUseTextData(t)){this._setAndWriteTextAreaState("copy or cut",es.selectedText(r));return}var i=null;z0e()&&(r.length<65536||uS.forceCopyWithSyntaxHighlighting)&&(i=this._host.getHTMLToCopy()),rC.setTextData(t,r,i)},e}(te),rC=function(){function n(){}return n.canUseTextData=function(e){return!!(e.clipboardData||window.clipboardData)},n.getTextData=function(e){if(e.clipboardData)return e.preventDefault(),e.clipboardData.getData("text/plain");if(window.clipboardData)return e.preventDefault(),window.clipboardData.getData("Text");throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")},n.setTextData=function(e,t,r){if(e.clipboardData){e.clipboardData.setData("text/plain",t),r!==null&&e.clipboardData.setData("text/html",r),e.preventDefault();return}if(window.clipboardData){window.clipboardData.setData("Text",t),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")},n}(),JEe=function(n){NY(e,n);function e(t){var r=n.call(this)||this;return r._actual=t,r._ignoreSelectionChangeTime=0,r}return e.prototype.setIgnoreSelectionChangeTime=function(t){this._ignoreSelectionChangeTime=Date.now()},e.prototype.getIgnoreSelectionChangeTime=function(){return this._ignoreSelectionChangeTime},e.prototype.resetSelectionChangeTime=function(){this._ignoreSelectionChangeTime=0},e.prototype.getValue=function(){return this._actual.domNode.value},e.prototype.setValue=function(t,r){var i=this._actual.domNode;i.value!==r&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=r)},e.prototype.getSelectionStart=function(){return this._actual.domNode.selectionStart},e.prototype.getSelectionEnd=function(){return this._actual.domNode.selectionEnd},e.prototype.setSelectionRange=function(t,r,i){var o=this._actual.domNode,s=document.activeElement===o,a=o.selectionStart,u=o.selectionEnd;if(s&&a===r&&u===i){wl&&window.parent!==window&&o.focus();return}if(s){this.setIgnoreSelectionChangeTime("setSelectionRange"),o.setSelectionRange(r,i),wl&&window.parent!==window&&o.focus();return}try{var l=vbe(o);this.setIgnoreSelectionChangeTime("setSelectionRange"),o.focus(),o.setSelectionRange(r,i),mbe(o,l)}catch{}},e}(te),eIe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fd=function(n){eIe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(K0),AY={ColorContribution:"base.contributions.colors"},tIe=function(){function n(){this._onDidChangeSchema=new j,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}return n.prototype.registerColor=function(e,t,r,i,o){i===void 0&&(i=!1);var s={id:e,description:r,defaults:t,needsTransparency:i,deprecationMessage:o};this.colorsById[e]=s;var a={type:"string",description:r,format:"color-hex",default:"#ff0000"};return o&&(a.deprecationMessage=o),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(r),this._onDidChangeSchema.fire(),e},n.prototype.resolveDefaultColor=function(e,t){var r=this.colorsById[e];if(r&&r.defaults){var i=r.defaults[t.type];return vd(i,t)}},n.prototype.getColorSchema=function(){return this.colorSchema},n.prototype.toString=function(){var e=this,t=function(r,i){var o=r.indexOf(".")===-1?0:1,s=i.indexOf(".")===-1?0:1;return o!==s?o-s:r.localeCompare(i)};return Object.keys(this.colorsById).sort(t).map(function(r){return"- `"+r+"`: "+e.colorsById[r].description}).join(`
`)},n}(),_I=new tIe;qi.add(AY.ColorContribution,_I);function G(n,e,t,r,i){return _I.registerColor(n,e,t,r,i)}var dl=G("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},S("foreground","Overall foreground color. This color is only used if not overridden by a component.")),nIe=G("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},S("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),Qg=G("focusBorder",{dark:Z.fromHex("#0E639C").transparent(.8),light:Z.fromHex("#007ACC").transparent(.4),hc:"#F38518"},S("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),dr=G("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},S("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),ti=G("contrastActiveBorder",{light:null,dark:null,hc:Qg},S("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),yI=G("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},S("textLinkForeground","Foreground color for links in text.")),VF=G("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:Z.black},S("textCodeBlockBackground","Background color for code blocks in text.")),Bd=G("widget.shadow",{dark:"#000000",light:"#A8A8A8",hc:null},S("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),HF=G("input.background",{dark:"#3C3C3C",light:Z.white,hc:Z.black},S("inputBoxBackground","Input box background.")),UF=G("input.foreground",{dark:dl,light:dl,hc:dl},S("inputBoxForeground","Input box foreground.")),jF=G("input.border",{dark:null,light:null,hc:dr},S("inputBoxBorder","Input box border.")),lS=G("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:dr},S("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),cS=G("inputOption.activeBackground",{dark:zc(Qg,.5),light:zc(Qg,.3),hc:null},S("inputOption.activeBackground","Background color of activated options in input fields.")),zF=G("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:Z.black},S("inputValidationInfoBackground","Input validation background color for information severity.")),qF=G("inputValidation.infoForeground",{dark:null,light:null,hc:null},S("inputValidationInfoForeground","Input validation foreground color for information severity.")),$F=G("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:dr},S("inputValidationInfoBorder","Input validation border color for information severity.")),OY=G("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:Z.black},S("inputValidationWarningBackground","Input validation background color for warning severity.")),RY=G("inputValidation.warningForeground",{dark:null,light:null,hc:null},S("inputValidationWarningForeground","Input validation foreground color for warning severity.")),MY=G("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:dr},S("inputValidationWarningBorder","Input validation border color for warning severity.")),PY=G("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:Z.black},S("inputValidationErrorBackground","Input validation background color for error severity.")),FY=G("inputValidation.errorForeground",{dark:null,light:null,hc:null},S("inputValidationErrorForeground","Input validation foreground color for error severity.")),BY=G("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:dr},S("inputValidationErrorBorder","Input validation border color for error severity.")),IT=G("dropdown.background",{dark:"#3C3C3C",light:Z.white,hc:Z.black},S("dropdownBackground","Dropdown background.")),mU=G("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:Z.white},S("dropdownForeground","Dropdown foreground.")),Xh=G("list.focusBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},S("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),WY=G("list.focusForeground",{dark:null,light:null,hc:null},S("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Qh=G("list.activeSelectionBackground",{dark:"#094771",light:"#0074E8",hc:null},S("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Jh=G("list.activeSelectionForeground",{dark:Z.white,light:Z.white,hc:null},S("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),VY=G("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},S("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),HY=G("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},S("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),UY=G("list.inactiveFocusBackground",{dark:null,light:null,hc:null},S("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),jY=G("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},S("listHoverBackground","List/Tree background when hovering over items using the mouse.")),zY=G("list.hoverForeground",{dark:null,light:null,hc:null},S("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),qY=G("list.dropBackground",{dark:Xh,light:Xh,hc:null},S("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),xT=G("list.highlightForeground",{dark:"#0097fb",light:"#0066BF",hc:Qg},S("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),rIe=G("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:Z.black},S("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),iIe=G("listFilterWidget.outline",{dark:Z.transparent,light:Z.transparent,hc:"#f38518"},S("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),oIe=G("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:dr},S("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),sIe=G("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},S("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),aIe=G("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:Z.white},S("pickerGroupForeground","Quick picker color for grouping labels.")),uIe=G("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:Z.white},S("pickerGroupBorder","Quick picker color for grouping borders.")),lIe=G("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:Z.black},S("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),cIe=G("badge.foreground",{dark:Z.white,light:"#333",hc:Z.white},S("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),bI=G("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},S("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),fIe=G("scrollbarSlider.background",{dark:Z.fromHex("#797979").transparent(.4),light:Z.fromHex("#646464").transparent(.4),hc:zc(dr,.6)},S("scrollbarSliderBackground","Scrollbar slider background color.")),hIe=G("scrollbarSlider.hoverBackground",{dark:Z.fromHex("#646464").transparent(.7),light:Z.fromHex("#646464").transparent(.7),hc:zc(dr,.8)},S("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),dIe=G("scrollbarSlider.activeBackground",{dark:Z.fromHex("#BFBFBF").transparent(.4),light:Z.fromHex("#000000").transparent(.6),hc:dr},S("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),pIe=G("progressBar.background",{dark:Z.fromHex("#0E70C0"),light:Z.fromHex("#0E70C0"),hc:dr},S("progressBarBackground","Background color of the progress bar that can show for long running operations.")),gIe=G("menu.border",{dark:null,light:null,hc:dr},S("menuBorder","Border color of menus.")),vIe=G("menu.foreground",{dark:mU,light:dl,hc:mU},S("menuForeground","Foreground color of menu items.")),mIe=G("menu.background",{dark:IT,light:IT,hc:IT},S("menuBackground","Background color of menu items.")),_Ie=G("menu.selectionForeground",{dark:Jh,light:Jh,hc:Jh},S("menuSelectionForeground","Foreground color of the selected menu item in menus.")),yIe=G("menu.selectionBackground",{dark:Qh,light:Qh,hc:Qh},S("menuSelectionBackground","Background color of the selected menu item in menus.")),bIe=G("menu.selectionBorder",{dark:null,light:null,hc:ti},S("menuSelectionBorder","Border color of the selected menu item in menus.")),wIe=G("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:dr},S("menuSeparatorBackground","Color of a separator menu item in menus.")),$Y=G("editorError.foreground",{dark:"#F48771",light:"#E51400",hc:null},S("editorError.foreground","Foreground color of error squigglies in the editor.")),KY=G("editorError.border",{dark:null,light:null,hc:Z.fromHex("#E47777").transparent(.8)},S("errorBorder","Border color of error boxes in the editor.")),fS=G("editorWarning.foreground",{dark:"#CCA700",light:"#E9A700",hc:null},S("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),KF=G("editorWarning.border",{dark:null,light:null,hc:Z.fromHex("#FFCC00").transparent(.8)},S("warningBorder","Border color of warning boxes in the editor.")),hS=G("editorInfo.foreground",{dark:"#75BEFF",light:"#75BEFF",hc:null},S("editorInfo.foreground","Foreground color of info squigglies in the editor.")),GF=G("editorInfo.border",{dark:null,light:null,hc:Z.fromHex("#75BEFF").transparent(.8)},S("infoBorder","Border color of info boxes in the editor.")),CIe=G("editorHint.foreground",{dark:Z.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},S("editorHint.foreground","Foreground color of hint squigglies in the editor.")),SIe=G("editorHint.border",{dark:null,light:null,hc:Z.fromHex("#eeeeee").transparent(.8)},S("hintBorder","Border color of hint boxes in the editor.")),cu=G("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:Z.black},S("editorBackground","Editor background color.")),jc=G("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:Z.white},S("editorForeground","Editor default foreground color.")),fu=G("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},S("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),GY=G("editorWidget.foreground",{dark:dl,light:dl,hc:dl},S("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),ed=G("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:dr},S("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),EIe=G("editorWidget.resizeBorder",{light:null,dark:null,hc:null},S("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),Sg=G("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},S("editorSelectionBackground","Color of the editor selection.")),IIe=G("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},S("editorSelectionForeground","Color of the selected text for high contrast.")),YF=G("editor.inactiveSelectionBackground",{light:zc(Sg,.5),dark:zc(Sg,.5),hc:zc(Sg,.5)},S("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),ZF=G("editor.selectionHighlightBackground",{light:yU(Sg,cu,.3,.6),dark:yU(Sg,cu,.3,.6),hc:null},S("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),xIe=G("editor.selectionHighlightBorder",{light:null,dark:null,hc:ti},S("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),DIe=G("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},S("editorFindMatch","Color of the current search match.")),LIe=G("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},S("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),kIe=G("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},S("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),TIe=G("editor.findMatchBorder",{light:null,dark:null,hc:ti},S("editorFindMatchBorder","Border color of the current search match.")),NIe=G("editor.findMatchHighlightBorder",{light:null,dark:null,hc:ti},S("findMatchHighlightBorder","Border color of the other search matches.")),AIe=G("editor.findRangeHighlightBorder",{dark:null,light:null,hc:zc(ti,.4)},S("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),OIe=G("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},S("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),gd=G("editorHoverWidget.background",{light:fu,dark:fu,hc:fu},S("hoverBackground","Background color of the editor hover.")),XF=G("editorHoverWidget.border",{light:ed,dark:ed,hc:ed},S("hoverBorder","Border color of the editor hover.")),RIe=G("editorHoverWidget.statusBarBackground",{dark:UIe(gd,.2),light:JF(gd,.05),hc:fu},S("statusBarBackground","Background color of the editor hover status bar.")),QF=G("editorLink.activeForeground",{dark:"#4E94CE",light:Z.blue,hc:Z.cyan},S("activeLinkForeground","Color of active links.")),JO=new Z(new Jt(155,185,85,.2)),eR=new Z(new Jt(255,0,0,.2)),YY=G("diffEditor.insertedTextBackground",{dark:JO,light:JO,hc:null},S("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),ZY=G("diffEditor.removedTextBackground",{dark:eR,light:eR,hc:null},S("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),MIe=G("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},S("diffEditorInsertedOutline","Outline color for the text that got inserted.")),PIe=G("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},S("diffEditorRemovedOutline","Outline color for text that got removed.")),FIe=G("diffEditor.border",{dark:null,light:null,hc:dr},S("diffEditorBorder","Border color between the two text editors.")),BIe=G("editor.snippetTabstopHighlightBackground",{dark:new Z(new Jt(124,124,124,.3)),light:new Z(new Jt(10,50,100,.2)),hc:new Z(new Jt(124,124,124,.3))},S("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),WIe=G("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},S("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),VIe=G("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},S("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),HIe=G("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Z(new Jt(10,50,100,.5)),hc:"#525252"},S("snippetFinalTabstopHighlightBorder","Highlight border color of the final stabstop of a snippet.")),DT=G("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},S("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),XY=G("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},S("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),_U=G("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},S("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);function JF(n,e){return function(t){var r=vd(n,t);if(r)return r.darken(e)}}function UIe(n,e){return function(t){var r=vd(n,t);if(r)return r.lighten(e)}}function zc(n,e){return function(t){var r=vd(n,t);if(r)return r.transparent(e)}}function e2(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=vd(o,t);if(s)return s}}}function yU(n,e,t,r){return function(i){var o=vd(n,i);if(o){var s=vd(e,i);return s?o.isDarkerThan(s)?Z.getLighterColor(o,s,t).transparent(r):Z.getDarkerColor(o,s,t).transparent(r):o.transparent(t*r)}}}function vd(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?Z.fromHex(n):e.getColor(n);if(n instanceof Z)return n;if(typeof n=="function")return n(e)}}var QY="vscode://schemas/workbench-colors",JY=qi.as(TF.JSONContribution);JY.registerSchema(QY,_I.getColorSchema());var bU=new hr(function(){return JY.notifySchemaChanged(QY)},200);_I.onDidChangeSchema(function(){bU.isScheduled()||bU.schedule()});var eZ=G("editor.lineHighlightBackground",{dark:null,light:null,hc:null},S("lineHighlight","Background color for the highlight of line at the cursor position.")),tR=G("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},S("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),jIe=G("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},S("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),zIe=G("editor.rangeHighlightBorder",{dark:null,light:null,hc:ti},S("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),tZ=G("editorCursor.foreground",{dark:"#AEAFAD",light:Z.black,hc:Z.white},S("caret","Color of the editor cursor.")),qIe=G("editorCursor.background",null,S("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),td=G("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},S("editorWhitespaces","Color of whitespace characters in the editor.")),wI=G("editorIndentGuide.background",{dark:td,light:td,hc:td},S("editorIndentGuides","Color of the editor indentation guides.")),CI=G("editorIndentGuide.activeBackground",{dark:td,light:td,hc:td},S("editorActiveIndentGuide","Color of the active editor indentation guides.")),nZ=G("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:Z.white},S("editorLineNumbers","Color of editor line numbers.")),LT=G("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:ti},S("editorActiveLineNumber","Color of editor active line number"),!1,S("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),$Ie=G("editorLineNumber.activeForeground",{dark:LT,light:LT,hc:LT},S("editorActiveLineNumber","Color of editor active line number")),KIe=G("editorRuler.foreground",{dark:"#5A5A5A",light:Z.lightgrey,hc:Z.white},S("editorRuler","Color of the editor rulers.")),GIe=G("editorCodeLens.foreground",{dark:"#999999",light:"#999999",hc:"#999999"},S("editorCodeLensForeground","Foreground color of editor code lenses")),YIe=G("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},S("editorBracketMatchBackground","Background color behind matching brackets")),rZ=G("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:dr},S("editorBracketMatchBorder","Color for matching brackets boxes")),ZIe=G("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},S("editorOverviewRulerBorder","Color of the overview ruler border.")),XIe=G("editorGutter.background",{dark:cu,light:cu,hc:cu},S("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),QIe=G("editorUnnecessaryCode.border",{dark:null,light:null,hc:Z.fromHex("#fff").transparent(.8)},S("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),JIe=G("editorUnnecessaryCode.opacity",{dark:Z.fromHex("#000a"),light:Z.fromHex("#0007"),hc:null},S("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),exe=G("editorOverviewRuler.errorForeground",{dark:new Z(new Jt(255,18,18,.7)),light:new Z(new Jt(255,18,18,.7)),hc:new Z(new Jt(255,50,50,1))},S("overviewRuleError","Overview ruler marker color for errors.")),txe=G("editorOverviewRuler.warningForeground",{dark:fS,light:fS,hc:KF},S("overviewRuleWarning","Overview ruler marker color for warnings.")),nxe=G("editorOverviewRuler.infoForeground",{dark:hS,light:hS,hc:GF},S("overviewRuleInfo","Overview ruler marker color for infos."));Xt(function(n,e){var t=n.getColor(cu);t&&e.addRule(".monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: "+t+"; }");var r=n.getColor(jc);r&&e.addRule(".monaco-editor, .monaco-editor .inputarea.ime-input { color: "+r+"; }");var i=n.getColor(XIe);i&&e.addRule(".monaco-editor .margin { background-color: "+i+"; }");var o=n.getColor(jIe);o&&e.addRule(".monaco-editor .rangeHighlight { background-color: "+o+"; }");var s=n.getColor(zIe);s&&e.addRule(".monaco-editor .rangeHighlight { border: 1px "+(n.type==="hc"?"dotted":"solid")+" "+s+"; }");var a=n.getColor(td);a&&e.addRule(".vs-whitespace { color: "+a+" !important; }")});var rxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iZ=function(n){rxe(e,n);function e(t){var r=n.call(this)||this;return r._context=t,r._readConfig(),r._lastCursorModelPosition=new $(1,1),r._renderResult=null,r._context.addEventHandler(r),r}return e.prototype._readConfig=function(){var t=this._context.configuration.editor;this._lineHeight=t.lineHeight,this._renderLineNumbers=t.viewInfo.renderLineNumbers,this._renderCustomLineNumbers=t.viewInfo.renderCustomLineNumbers,this._renderFinalNewline=t.viewInfo.renderFinalNewline,this._lineNumbersLeft=t.layoutInfo.lineNumbersLeft,this._lineNumbersWidth=t.layoutInfo.lineNumbersWidth},e.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return this._readConfig(),!0},e.prototype.onCursorStateChanged=function(t){var r=t.selections[0].getPosition();return this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(r),this._renderLineNumbers===2||this._renderLineNumbers===3},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollTopChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype._getLineRenderLineNumber=function(t){var r=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new $(t,1));if(r.column!==1)return"";var i=r.lineNumber;if(!this._renderFinalNewline){var o=this._context.model.getLineCount(),s=this._context.model.getLineContent(i);if(i===o&&s==="")return""}if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){var a=Math.abs(this._lastCursorModelPosition.lineNumber-i);return a===0?'<span class="relative-current-line-number">'+i+"</span>":String(a)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===i||i%10===0?String(i):"":String(i)},e.prototype.prepareRender=function(t){if(this._renderLineNumbers===0){this._renderResult=null;return}for(var r=Rl?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=t.visibleRange.startLineNumber,o=t.visibleRange.endLineNumber,s='<div class="'+e.CLASS_NAME+r+'" style="left:'+this._lineNumbersLeft.toString()+"px;width:"+this._lineNumbersWidth.toString()+'px;">',a=[],u=i;u<=o;u++){var l=u-i,f=this._getLineRenderLineNumber(u);f?a[l]=s+f+"</div>":a[l]=""}this._renderResult=a},e.prototype.render=function(t,r){if(!this._renderResult)return"";var i=r-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]},e.CLASS_NAME="line-numbers",e}(Fd);Xt(function(n,e){var t=n.getColor(nZ);t&&e.addRule(".monaco-editor .line-numbers { color: "+t+"; }");var r=n.getColor($Ie);r&&e.addRule(".monaco-editor .current-line ~ .line-numbers { color: "+r+"; }")});var ixe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oZ=function(n){ixe(e,n);function e(t){var r=n.call(this,t)||this;return r._canUseLayerHinting=r._context.configuration.editor.canUseLayerHinting,r._contentLeft=r._context.configuration.editor.layoutInfo.contentLeft,r._glyphMarginLeft=r._context.configuration.editor.layoutInfo.glyphMarginLeft,r._glyphMarginWidth=r._context.configuration.editor.layoutInfo.glyphMarginWidth,r._domNode=st(document.createElement("div")),r._domNode.setClassName(e.OUTER_CLASS_NAME),r._domNode.setPosition("absolute"),r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true"),r._glyphMarginBackgroundDomNode=st(document.createElement("div")),r._glyphMarginBackgroundDomNode.setClassName(e.CLASS_NAME),r._domNode.appendChild(r._glyphMarginBackgroundDomNode),r}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype.getDomNode=function(){return this._domNode},e.prototype.onConfigurationChanged=function(t){return t.canUseLayerHinting&&(this._canUseLayerHinting=this._context.configuration.editor.canUseLayerHinting),t.layoutInfo&&(this._contentLeft=this._context.configuration.editor.layoutInfo.contentLeft,this._glyphMarginLeft=this._context.configuration.editor.layoutInfo.glyphMarginLeft,this._glyphMarginWidth=this._context.configuration.editor.layoutInfo.glyphMarginWidth),!0},e.prototype.onScrollChanged=function(t){return n.prototype.onScrollChanged.call(this,t)||t.scrollTopChanged},e.prototype.prepareRender=function(t){},e.prototype.render=function(t){this._domNode.setLayerHinting(this._canUseLayerHinting);var r=t.scrollTop-t.bigNumbersDelta;this._domNode.setTop(-r);var i=Math.min(t.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)},e.CLASS_NAME="glyph-margin",e.OUTER_CLASS_NAME="margin",e}(Cs),oxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sxe=function(){function n(e){this.type=1,this.canUseLayerHinting=e.canUseLayerHinting,this.pixelRatio=e.pixelRatio,this.editorClassName=e.editorClassName,this.lineHeight=e.lineHeight,this.readOnly=e.readOnly,this.accessibilitySupport=e.accessibilitySupport,this.emptySelectionClipboard=e.emptySelectionClipboard,this.copyWithSyntaxHighlighting=e.copyWithSyntaxHighlighting,this.layoutInfo=e.layoutInfo,this.fontInfo=e.fontInfo,this.viewInfo=e.viewInfo,this.wrappingInfo=e.wrappingInfo}return n}(),axe=function(){function n(e){this.type=2,this.selections=e}return n}(),Fp=function(){function n(){this.type=3}return n}(),iC=function(){function n(){this.type=4}return n}(),wU=function(){function n(e){this.type=5,this.isFocused=e}return n}(),oC=function(){function n(){this.type=6}return n}(),sZ=function(){function n(e,t){this.type=7,this.fromLineNumber=e,this.toLineNumber=t}return n}(),nR=function(){function n(e,t){this.type=8,this.fromLineNumber=e,this.toLineNumber=t}return n}(),rR=function(){function n(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}return n}(),t2=function(){function n(e,t,r,i){this.type=10,this.range=e,this.verticalType=t,this.revealHorizontal=r,this.scrollType=i}return n}(),uxe=function(){function n(e){this.type=11,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}return n}(),lxe=function(){function n(e){this.type=12,this.ranges=e}return n}(),cxe=function(){function n(){this.type=15}return n}(),fxe=function(){function n(){this.type=13}return n}(),hxe=function(){function n(){this.type=14}return n}(),dxe=function(){function n(){this.type=16}return n}(),aZ=function(n){oxe(e,n);function e(){var t=n.call(this)||this;return t._listeners=[],t._collector=null,t._collectorCnt=0,t}return e.prototype.dispose=function(){this._listeners=[],n.prototype.dispose.call(this)},e.prototype._beginEmit=function(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new pxe),this._collector},e.prototype._endEmit=function(){if(this._collectorCnt--,this._collectorCnt===0){var t=this._collector.finalize();this._collector=null,t.length>0&&this._emit(t)}},e.prototype._emit=function(t){for(var r=this._listeners.slice(0),i=0,o=r.length;i<o;i++)gxe(r[i],t)},e.prototype.addEventListener=function(t){var r=this;return this._listeners.push(t),en(function(){for(var i=r._listeners,o=0,s=i.length;o<s;o++)if(i[o]===t){i.splice(o,1);break}})},e}(te),pxe=function(){function n(){this._eventsLen=0,this._events=[],this._eventsLen=0}return n.prototype.emit=function(e){this._events[this._eventsLen++]=e},n.prototype.finalize=function(){var e=this._events;return this._events=[],e},n}();function gxe(n,e){try{n(e)}catch(t){Le(t)}}var vxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mxe=function(){function n(e,t,r){this.top=e,this.left=t,this.width=r}return n.prototype.setWidth=function(e){return new n(this.top,this.left,e)},n}(),sC=uu||wl,CU=function(){function n(){this._lastState=null}return n.prototype.set=function(e){this._lastState=e},n.prototype.get=function(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState:(this._lastState=null,null)},n.INSTANCE=new n,n}(),_xe=function(n){vxe(e,n);function e(t,r,i){var o=n.call(this,t)||this;o._primaryCursorVisibleRange=null,o._viewController=r,o._viewHelper=i;var s=o._context.configuration.editor;o._accessibilitySupport=s.accessibilitySupport,o._contentLeft=s.layoutInfo.contentLeft,o._contentWidth=s.layoutInfo.contentWidth,o._contentHeight=s.layoutInfo.contentHeight,o._scrollLeft=0,o._scrollTop=0,o._fontInfo=s.fontInfo,o._lineHeight=s.lineHeight,o._emptySelectionClipboard=s.emptySelectionClipboard,o._copyWithSyntaxHighlighting=s.copyWithSyntaxHighlighting,o._visibleTextArea=null,o._selections=[new Ce(1,1,1,1)],o.textArea=st(document.createElement("textarea")),Eu.write(o.textArea,6),o.textArea.setClassName("inputarea"),o.textArea.setAttribute("wrap","off"),o.textArea.setAttribute("autocorrect","off"),o.textArea.setAttribute("autocapitalize","off"),o.textArea.setAttribute("autocomplete","off"),o.textArea.setAttribute("spellcheck","false"),o.textArea.setAttribute("aria-label",s.viewInfo.ariaLabel),o.textArea.setAttribute("role","textbox"),o.textArea.setAttribute("aria-multiline","true"),o.textArea.setAttribute("aria-haspopup","false"),o.textArea.setAttribute("aria-autocomplete","both"),o.textAreaCover=st(document.createElement("div")),o.textAreaCover.setPosition("absolute");var a={getLineCount:function(){return o._context.model.getLineCount()},getLineMaxColumn:function(l){return o._context.model.getLineMaxColumn(l)},getValueInRange:function(l,f){return o._context.model.getValueInRange(l,f)}},u={getPlainTextToCopy:function(){var l=o._context.model.getPlainTextToCopy(o._selections,o._emptySelectionClipboard,Hi),f=o._context.model.getEOL(),h=o._emptySelectionClipboard&&o._selections.length===1&&o._selections[0].isEmpty(),d=Array.isArray(l)?l:null,g=Array.isArray(l)?l.join(f):l,v=null;if(h||d){var m=wl?g.replace(/\r\n/g,`
`):g;v={lastCopiedValue:m,isFromEmptySelection:o._emptySelectionClipboard&&o._selections.length===1&&o._selections[0].isEmpty(),multicursorText:d}}return CU.INSTANCE.set(v),g},getHTMLToCopy:function(){return!o._copyWithSyntaxHighlighting&&!uS.forceCopyWithSyntaxHighlighting?null:o._context.model.getHTMLToCopy(o._selections,o._emptySelectionClipboard)},getScreenReaderContent:function(l){if($1)return es.EMPTY;if(o._accessibilitySupport===1){if(ct){var f=o._selections[0];if(f.isEmpty()){var h=f.getStartPosition(),d=o._getWordBeforePosition(h);if(d.length===0&&(d=o._getCharacterBeforePosition(h)),d.length>0)return new es(d,d.length,d.length,h,h)}}return es.EMPTY}return XEe.fromEditorSelection(l,a,o._selections[0],o._accessibilitySupport===0)},deduceModelPosition:function(l,f,h){return o._context.model.deduceModelPositionRelativeToViewPosition(l,f,h)}};return o._textAreaInput=o._register(new QEe(u,o.textArea)),o._register(o._textAreaInput.onKeyDown(function(l){o._viewController.emitKeyDown(l)})),o._register(o._textAreaInput.onKeyUp(function(l){o._viewController.emitKeyUp(l)})),o._register(o._textAreaInput.onPaste(function(l){var f=CU.INSTANCE.get(l.text),h=!1,d=null;f&&(h=o._emptySelectionClipboard&&f.isFromEmptySelection,d=f.multicursorText),o._viewController.paste("keyboard",l.text,h,d)})),o._register(o._textAreaInput.onCut(function(){o._viewController.cut("keyboard")})),o._register(o._textAreaInput.onType(function(l){l.replaceCharCnt?o._viewController.replacePreviousChar("keyboard",l.text,l.replaceCharCnt):o._viewController.type("keyboard",l.text)})),o._register(o._textAreaInput.onSelectionChangeRequest(function(l){o._viewController.setSelection("keyboard",l)})),o._register(o._textAreaInput.onCompositionStart(function(){var l=o._selections[0].startLineNumber,f=o._selections[0].startColumn;o._context.privateViewEventBus.emit(new t2(new R(l,f,l,f),0,!0,1));var h=o._viewHelper.visibleRangeForPositionRelativeToEditor(l,f);h&&(o._visibleTextArea=new mxe(o._context.viewLayout.getVerticalOffsetForLineNumber(l),h.left,sC?0:1),o._render()),o.textArea.setClassName("inputarea ime-input"),o._viewController.compositionStart("keyboard")})),o._register(o._textAreaInput.onCompositionUpdate(function(l){uu?o._visibleTextArea=o._visibleTextArea.setWidth(0):o._visibleTextArea=o._visibleTextArea.setWidth(yxe(l.data,o._fontInfo)),o._render()})),o._register(o._textAreaInput.onCompositionEnd(function(){o._visibleTextArea=null,o._render(),o.textArea.setClassName("inputarea"),o._viewController.compositionEnd("keyboard")})),o._register(o._textAreaInput.onFocus(function(){o._context.privateViewEventBus.emit(new wU(!0))})),o._register(o._textAreaInput.onBlur(function(){o._context.privateViewEventBus.emit(new wU(!1))})),o}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype._getWordBeforePosition=function(t){for(var r=this._context.model.getLineContent(t.lineNumber),i=Nu(this._context.configuration.editor.wordSeparators),o=t.column,s=0;o>1;){var a=r.charCodeAt(o-2),u=i.get(a);if(u!==0||s>50)return r.substring(o-1,t.column-1);s++,o--}return r.substring(0,t.column-1)},e.prototype._getCharacterBeforePosition=function(t){if(t.column>1){var r=this._context.model.getLineContent(t.lineNumber),i=r.charAt(t.column-2);if(!ao(i.charCodeAt(0)))return i}return""},e.prototype.onConfigurationChanged=function(t){var r=this._context.configuration.editor;return t.fontInfo&&(this._fontInfo=r.fontInfo),t.viewInfo&&this.textArea.setAttribute("aria-label",r.viewInfo.ariaLabel),t.layoutInfo&&(this._contentLeft=r.layoutInfo.contentLeft,this._contentWidth=r.layoutInfo.contentWidth,this._contentHeight=r.layoutInfo.contentHeight),t.lineHeight&&(this._lineHeight=r.lineHeight),t.accessibilitySupport&&(this._accessibilitySupport=r.accessibilitySupport,this._textAreaInput.writeScreenReaderContent("strategy changed")),t.emptySelectionClipboard&&(this._emptySelectionClipboard=r.emptySelectionClipboard),t.copyWithSyntaxHighlighting&&(this._copyWithSyntaxHighlighting=r.copyWithSyntaxHighlighting),!0},e.prototype.onCursorStateChanged=function(t){return this._selections=t.selections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return this._scrollLeft=t.scrollLeft,this._scrollTop=t.scrollTop,!0},e.prototype.onZonesChanged=function(t){return!0},e.prototype.isFocused=function(){return this._textAreaInput.isFocused()},e.prototype.focusTextArea=function(){this._textAreaInput.focusTextArea()},e.prototype.prepareRender=function(t){var r=new $(this._selections[0].positionLineNumber,this._selections[0].positionColumn);this._primaryCursorVisibleRange=t.visibleRangeForPosition(r)},e.prototype.render=function(t){this._textAreaInput.writeScreenReaderContent("render"),this._render()},e.prototype._render=function(){if(this._visibleTextArea){this._renderInsideEditor(this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight,!0);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}var t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}var r=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(r<0||r>this._contentHeight){this._renderAtTopLeft();return}this._renderInsideEditor(r,t,sC?0:1,sC?0:1,!1)},e.prototype._renderInsideEditor=function(t,r,i,o,s){var a=this.textArea,u=this.textAreaCover;s?_s.applyFontInfo(a,this._fontInfo):(a.setFontSize(1),a.setLineHeight(this._fontInfo.lineHeight)),a.setTop(t),a.setLeft(r),a.setWidth(i),a.setHeight(o),u.setTop(0),u.setLeft(0),u.setWidth(0),u.setHeight(0)},e.prototype._renderAtTopLeft=function(){var t=this.textArea,r=this.textAreaCover;if(_s.applyFontInfo(t,this._fontInfo),t.setTop(0),t.setLeft(0),r.setTop(0),r.setLeft(0),sC){t.setWidth(0),t.setHeight(0),r.setWidth(0),r.setHeight(0);return}t.setWidth(1),t.setHeight(1),r.setWidth(1),r.setHeight(1),this._context.configuration.editor.viewInfo.glyphMargin?r.setClassName("monaco-editor-background textAreaCover "+oZ.OUTER_CLASS_NAME):this._context.configuration.editor.viewInfo.renderLineNumbers!==0?r.setClassName("monaco-editor-background textAreaCover "+iZ.CLASS_NAME):r.setClassName("monaco-editor-background textAreaCover")},e}(Cs);function yxe(n,e){var t=document.createElement("canvas"),r=t.getContext("2d");r.font=bxe(e);var i=r.measureText(n);return wl?i.width+2:i.width}function bxe(n){return wxe("normal",n.fontWeight,n.fontSize,n.lineHeight,n.fontFamily)}function wxe(n,e,t,r,i){return n+" normal "+e+" "+t+"px / "+r+"px "+i}var n_=function(){function n(){}return n.columnSelect=function(e,t,r,i,o,s){for(var a=Math.abs(o-r)+1,u=r>o,l=i>s,f=i<s,h=[],d=0;d<a;d++){var g=r+(u?-d:d),v=$t.columnFromVisibleColumn2(e,t,g,i),m=$t.columnFromVisibleColumn2(e,t,g,s),y=$t.visibleColumnFromColumn2(e,t,new $(g,v)),b=$t.visibleColumnFromColumn2(e,t,new $(g,m));f&&(y>s||b<i)||l&&(b>i||y<s)||h.push(new Ai(new R(g,v,g,v),0,new $(g,m),0))}if(h.length===0)for(var d=0;d<a;d++){var g=r+(u?-d:d),C=t.getLineMaxColumn(g);h.push(new Ai(new R(g,C,g,C),0,new $(g,C),0))}return{viewStates:h,reversed:u,fromLineNumber:r,fromVisualColumn:i,toLineNumber:o,toVisualColumn:s}},n.columnSelectLeft=function(e,t,r){var i=r.toViewVisualColumn;return i>1&&i--,n.columnSelect(e,t,r.fromViewLineNumber,r.fromViewVisualColumn,r.toViewLineNumber,i)},n.columnSelectRight=function(e,t,r){for(var i=0,o=Math.min(r.fromViewLineNumber,r.toViewLineNumber),s=Math.max(r.fromViewLineNumber,r.toViewLineNumber),a=o;a<=s;a++){var u=t.getLineMaxColumn(a),l=$t.visibleColumnFromColumn2(e,t,new $(a,u));i=Math.max(i,l)}var f=r.toViewVisualColumn;return f<i&&f++,this.columnSelect(e,t,r.fromViewLineNumber,r.fromViewVisualColumn,r.toViewLineNumber,f)},n.columnSelectUp=function(e,t,r,i){var o=i?e.pageSize:1,s=Math.max(1,r.toViewLineNumber-o);return this.columnSelect(e,t,r.fromViewLineNumber,r.fromViewVisualColumn,s,r.toViewVisualColumn)},n.columnSelectDown=function(e,t,r,i){var o=i?e.pageSize:1,s=Math.min(t.getLineCount(),r.toViewLineNumber+o);return this.columnSelect(e,t,r.fromViewLineNumber,r.fromViewVisualColumn,s,r.toViewVisualColumn)},n}(),ur=function(){function n(e,t,r){r===void 0&&(r=!1),this._range=e,this._text=t,this.insertsAutoWhitespace=r}return n.prototype.getEditOperations=function(e,t){t.addTrackedEditOperation(this._range,this._text)},n.prototype.computeCursorState=function(e,t){var r=t.getInverseEditOperations(),i=r[0].range;return new Ce(i.endLineNumber,i.endColumn,i.endLineNumber,i.endColumn)},n}(),aC=function(){function n(e,t,r){r===void 0&&(r=!1),this._range=e,this._text=t,this.insertsAutoWhitespace=r}return n.prototype.getEditOperations=function(e,t){t.addTrackedEditOperation(this._range,this._text)},n.prototype.computeCursorState=function(e,t){var r=t.getInverseEditOperations(),i=r[0].range;return new Ce(i.startLineNumber,i.startColumn,i.startLineNumber,i.startColumn)},n}(),iR=function(){function n(e,t,r,i,o){o===void 0&&(o=!1),this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=r,this.insertsAutoWhitespace=o}return n.prototype.getEditOperations=function(e,t){t.addTrackedEditOperation(this._range,this._text)},n.prototype.computeCursorState=function(e,t){var r=t.getInverseEditOperations(),i=r[0].range;return new Ce(i.endLineNumber+this._lineNumberDeltaOffset,i.endColumn+this._columnDeltaOffset,i.endLineNumber+this._lineNumberDeltaOffset,i.endColumn+this._columnDeltaOffset)},n}(),dS=function(){function n(e,t,r){this._range=e,this._text=t,this._initialSelection=r,this._selectionId=null}return n.prototype.getEditOperations=function(e,t){t.addEditOperation(this._range,this._text),this._selectionId=t.trackSelection(this._initialSelection)},n.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this._selectionId)},n}(),uC=function(){function n(e,t,r){this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=r}return n}(),Yn=function(){function n(){}return n.left=function(e,t,r,i){return i>t.getLineMinColumn(r)?$t.isLowSurrogate(t,r,i-2)?i=i-2:i=i-1:r>1&&(r=r-1,i=t.getLineMaxColumn(r)),new uC(r,i,0)},n.moveLeft=function(e,t,r,i,o){var s,a;if(r.hasSelection()&&!i)s=r.selection.startLineNumber,a=r.selection.startColumn;else{var u=n.left(e,t,r.position.lineNumber,r.position.column-(o-1));s=u.lineNumber,a=u.column}return r.move(i,s,a,0)},n.right=function(e,t,r,i){return i<t.getLineMaxColumn(r)?$t.isHighSurrogate(t,r,i-1)?i=i+2:i=i+1:r<t.getLineCount()&&(r=r+1,i=t.getLineMinColumn(r)),new uC(r,i,0)},n.moveRight=function(e,t,r,i,o){var s,a;if(r.hasSelection()&&!i)s=r.selection.endLineNumber,a=r.selection.endColumn;else{var u=n.right(e,t,r.position.lineNumber,r.position.column+(o-1));s=u.lineNumber,a=u.column}return r.move(i,s,a,0)},n.down=function(e,t,r,i,o,s,a){var u=$t.visibleColumnFromColumn(t.getLineContent(r),i,e.tabSize)+o;r=r+s;var l=t.getLineCount();return r>l?(r=l,a?i=t.getLineMaxColumn(r):(i=Math.min(t.getLineMaxColumn(r),i),$t.isInsideSurrogatePair(t,r,i)&&(i=i-1))):(i=$t.columnFromVisibleColumn2(e,t,r,u),$t.isInsideSurrogatePair(t,r,i)&&(i=i-1)),o=u-$t.visibleColumnFromColumn(t.getLineContent(r),i,e.tabSize),new uC(r,i,o)},n.moveDown=function(e,t,r,i,o){var s,a;r.hasSelection()&&!i?(s=r.selection.endLineNumber,a=r.selection.endColumn):(s=r.position.lineNumber,a=r.position.column);var u=n.down(e,t,s,a,r.leftoverVisibleColumns,o,!0);return r.move(i,u.lineNumber,u.column,u.leftoverVisibleColumns)},n.translateDown=function(e,t,r){var i=r.selection,o=n.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,r.selectionStartLeftoverVisibleColumns,1,!1),s=n.down(e,t,i.positionLineNumber,i.positionColumn,r.leftoverVisibleColumns,1,!1);return new Ai(new R(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new $(s.lineNumber,s.column),s.leftoverVisibleColumns)},n.up=function(e,t,r,i,o,s,a){var u=$t.visibleColumnFromColumn(t.getLineContent(r),i,e.tabSize)+o;return r=r-s,r<1?(r=1,a?i=t.getLineMinColumn(r):(i=Math.min(t.getLineMaxColumn(r),i),$t.isInsideSurrogatePair(t,r,i)&&(i=i-1))):(i=$t.columnFromVisibleColumn2(e,t,r,u),$t.isInsideSurrogatePair(t,r,i)&&(i=i-1)),o=u-$t.visibleColumnFromColumn(t.getLineContent(r),i,e.tabSize),new uC(r,i,o)},n.moveUp=function(e,t,r,i,o){var s,a;r.hasSelection()&&!i?(s=r.selection.startLineNumber,a=r.selection.startColumn):(s=r.position.lineNumber,a=r.position.column);var u=n.up(e,t,s,a,r.leftoverVisibleColumns,o,!0);return r.move(i,u.lineNumber,u.column,u.leftoverVisibleColumns)},n.translateUp=function(e,t,r){var i=r.selection,o=n.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,r.selectionStartLeftoverVisibleColumns,1,!1),s=n.up(e,t,i.positionLineNumber,i.positionColumn,r.leftoverVisibleColumns,1,!1);return new Ai(new R(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new $(s.lineNumber,s.column),s.leftoverVisibleColumns)},n.moveToBeginningOfLine=function(e,t,r,i){var o=r.position.lineNumber,s=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||s,u,l=r.position.column;return l===a?u=s:u=a,r.move(i,o,u,0)},n.moveToEndOfLine=function(e,t,r,i){var o=r.position.lineNumber,s=t.getLineMaxColumn(o);return r.move(i,o,s,0)},n.moveToBeginningOfBuffer=function(e,t,r,i){return r.move(i,1,1,0)},n.moveToEndOfBuffer=function(e,t,r,i){var o=t.getLineCount(),s=t.getLineMaxColumn(o);return r.move(i,o,s,0)},n}(),oR=function(){function n(){}return n.deleteRight=function(e,t,r,i){for(var o=[],s=e!==3,a=0,u=i.length;a<u;a++){var l=i[a],f=l;if(f.isEmpty()){var h=l.getPosition(),d=Yn.right(t,r,h.lineNumber,h.column);f=new R(d.lineNumber,d.column,h.lineNumber,h.column)}if(f.isEmpty()){o[a]=null;continue}f.startLineNumber!==f.endLineNumber&&(s=!0),o[a]=new ur(f,"")}return[s,o]},n._isAutoClosingPairDelete=function(e,t,r){if(e.autoClosingBrackets==="never"&&e.autoClosingQuotes==="never")return!1;for(var i=0,o=r.length;i<o;i++){var s=r[i],a=s.getPosition();if(!s.isEmpty())return!1;var u=t.getLineContent(a.lineNumber),l=u[a.column-2],f=e.autoClosingPairsOpen2.get(l);if(!f)return!1;if(I_(l)){if(e.autoClosingQuotes==="never")return!1}else if(e.autoClosingBrackets==="never")return!1;for(var h=u[a.column-1],d=!1,g=0,v=f;g<v.length;g++){var m=v[g];m.open===l&&m.close===h&&(d=!0)}if(!d)return!1}return!0},n._runAutoClosingPairDelete=function(e,t,r){for(var i=[],o=0,s=r.length;o<s;o++){var a=r[o].getPosition(),u=new R(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[o]=new ur(u,"")}return[!0,i]},n.deleteLeft=function(e,t,r,i){if(this._isAutoClosingPairDelete(t,r,i))return this._runAutoClosingPairDelete(t,r,i);for(var o=[],s=e!==2,a=0,u=i.length;a<u;a++){var l=i[a],f=l;if(f.isEmpty()){var h=l.getPosition();if(t.useTabStops&&h.column>1){var d=r.getLineContent(h.lineNumber),g=Mo(d),v=g===-1?d.length+1:g+1;if(h.column<=v){var m=$t.visibleColumnFromColumn2(t,r,h),y=$t.prevIndentTabStop(m,t.indentSize),b=$t.columnFromVisibleColumn2(t,r,h.lineNumber,y);f=new R(h.lineNumber,b,h.lineNumber,h.column)}else f=new R(h.lineNumber,h.column-1,h.lineNumber,h.column)}else{var C=Yn.left(t,r,h.lineNumber,h.column);f=new R(C.lineNumber,C.column,h.lineNumber,h.column)}}if(f.isEmpty()){o[a]=null;continue}f.startLineNumber!==f.endLineNumber&&(s=!0),o[a]=new ur(f,"")}return[s,o]},n.cut=function(e,t,r){for(var i=[],o=0,s=r.length;o<s;o++){var a=r[o];if(a.isEmpty())if(e.emptySelectionClipboard){var u=a.getPosition(),l=void 0,f=void 0,h=void 0,d=void 0;u.lineNumber<t.getLineCount()?(l=u.lineNumber,f=1,h=u.lineNumber+1,d=1):u.lineNumber>1?(l=u.lineNumber-1,f=t.getLineMaxColumn(u.lineNumber-1),h=u.lineNumber,d=t.getLineMaxColumn(u.lineNumber)):(l=u.lineNumber,f=1,h=u.lineNumber,d=t.getLineMaxColumn(u.lineNumber));var g=new R(l,f,h,d);g.isEmpty()?i[o]=null:i[o]=new ur(g,"")}else i[o]=null;else i[o]=new ur(a,"")}return new to(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})},n}(),Cxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zr=function(){function n(){}return n._createWord=function(e,t,r,i,o){return{start:i,end:o,wordType:t,nextCharClass:r}},n._findPreviousWordOnLine=function(e,t,r){var i=t.getLineContent(r.lineNumber);return this._doFindPreviousWordOnLine(i,e,r)},n._doFindPreviousWordOnLine=function(e,t,r){for(var i=0,o=r.column-2;o>=0;o--){var s=e.charCodeAt(o),a=t.get(s);if(a===0){if(i===2)return this._createWord(e,i,a,o+1,this._findEndOfWord(e,t,i,o+1));i=1}else if(a===2){if(i===1)return this._createWord(e,i,a,o+1,this._findEndOfWord(e,t,i,o+1));i=2}else if(a===1&&i!==0)return this._createWord(e,i,a,o+1,this._findEndOfWord(e,t,i,o+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null},n._findEndOfWord=function(e,t,r,i){for(var o=e.length,s=i;s<o;s++){var a=e.charCodeAt(s),u=t.get(a);if(u===1||r===1&&u===2||r===2&&u===0)return s}return o},n._findNextWordOnLine=function(e,t,r){var i=t.getLineContent(r.lineNumber);return this._doFindNextWordOnLine(i,e,r)},n._doFindNextWordOnLine=function(e,t,r){for(var i=0,o=e.length,s=r.column-1;s<o;s++){var a=e.charCodeAt(s),u=t.get(a);if(u===0){if(i===2)return this._createWord(e,i,u,this._findStartOfWord(e,t,i,s-1),s);i=1}else if(u===2){if(i===1)return this._createWord(e,i,u,this._findStartOfWord(e,t,i,s-1),s);i=2}else if(u===1&&i!==0)return this._createWord(e,i,u,this._findStartOfWord(e,t,i,s-1),s)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,o-1),o):null},n._findStartOfWord=function(e,t,r,i){for(var o=i;o>=0;o--){var s=e.charCodeAt(o),a=t.get(s);if(a===1||r===1&&a===2||r===2&&a===0)return o+1}return 0},n.moveWordLeft=function(e,t,r,i){var o=r.lineNumber,s=r.column,a=!1;s===1&&o>1&&(a=!0,o=o-1,s=t.getLineMaxColumn(o));var u=n._findPreviousWordOnLine(e,t,new $(o,s));if(i===0){if(u&&!a){var l=t.getLineLastNonWhitespaceColumn(o);if(l<s)return new $(o,u.end+1)}return new $(o,u?u.start+1:1)}if(i===1)return u&&u.wordType===2&&u.end-u.start===1&&u.nextCharClass===0&&(u=n._findPreviousWordOnLine(e,t,new $(o,u.start+1))),new $(o,u?u.start+1:1);if(i===3){for(;u&&u.wordType===2;)u=n._findPreviousWordOnLine(e,t,new $(o,u.start+1));return new $(o,u?u.start+1:1)}return u&&s<=u.end+1&&(u=n._findPreviousWordOnLine(e,t,new $(o,u.start+1))),new $(o,u?u.end+1:1)},n._moveWordPartLeft=function(e,t){var r=t.lineNumber,i=e.getLineMaxColumn(r);if(t.column===1)return r>1?new $(r-1,e.getLineMaxColumn(r-1)):t;for(var o=e.getLineContent(r),s=t.column-1;s>1;s--){var a=o.charCodeAt(s-2),u=o.charCodeAt(s-1);if(a!==95&&u===95)return new $(r,s);if(ol(a)&&ha(u))return new $(r,s);if(ha(a)&&ha(u)&&s+1<i){var l=o.charCodeAt(s);if(ol(l))return new $(r,s)}}return new $(r,1)},n.moveWordRight=function(e,t,r,i){var o=r.lineNumber,s=r.column,a=!1;s===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,s=1);var u=n._findNextWordOnLine(e,t,new $(o,s));if(i===2)u&&u.wordType===2&&u.end-u.start===1&&u.nextCharClass===0&&(u=n._findNextWordOnLine(e,t,new $(o,u.end+1))),u?s=u.end+1:s=t.getLineMaxColumn(o);else if(i===3){for(;u&&u.wordType===2;)u=n._findNextWordOnLine(e,t,new $(o,u.end+1));u?s=u.end+1:s=t.getLineMaxColumn(o)}else u&&!a&&s>=u.start+1&&(u=n._findNextWordOnLine(e,t,new $(o,u.end+1))),u?s=u.start+1:s=t.getLineMaxColumn(o);return new $(o,s)},n._moveWordPartRight=function(e,t){var r=t.lineNumber,i=e.getLineMaxColumn(r);if(t.column===i)return r<e.getLineCount()?new $(r+1,1):t;for(var o=e.getLineContent(r),s=t.column+1;s<i;s++){var a=o.charCodeAt(s-2),u=o.charCodeAt(s-1);if(a===95&&u!==95)return new $(r,s);if(ol(a)&&ha(u))return new $(r,s);if(ha(a)&&ha(u)&&s+1<i){var l=o.charCodeAt(s);if(ol(l))return new $(r,s)}}return new $(r,i)},n._deleteWordLeftWhitespace=function(e,t){var r=e.getLineContent(t.lineNumber),i=t.column-2,o=gf(r,i);return o+1<i?new R(t.lineNumber,o+2,t.lineNumber,t.column):null},n.deleteWordLeft=function(e,t,r,i,o){if(!r.isEmpty())return r;var s=new $(r.positionLineNumber,r.positionColumn),a=s.lineNumber,u=s.column;if(a===1&&u===1)return null;if(i){var l=this._deleteWordLeftWhitespace(t,s);if(l)return l}var f=n._findPreviousWordOnLine(e,t,s);return o===0?f?u=f.start+1:u>1?u=1:(a--,u=t.getLineMaxColumn(a)):(f&&u<=f.end+1&&(f=n._findPreviousWordOnLine(e,t,new $(a,f.start+1))),f?u=f.end+1:u>1?u=1:(a--,u=t.getLineMaxColumn(a))),new R(a,u,s.lineNumber,s.column)},n._deleteWordPartLeft=function(e,t){if(!t.isEmpty())return t;var r=t.getPosition(),i=n._moveWordPartLeft(e,r);return new R(r.lineNumber,r.column,i.lineNumber,i.column)},n._findFirstNonWhitespaceChar=function(e,t){for(var r=e.length,i=t;i<r;i++){var o=e.charAt(i);if(o!==" "&&o!=="	")return i}return r},n._deleteWordRightWhitespace=function(e,t){var r=e.getLineContent(t.lineNumber),i=t.column-1,o=this._findFirstNonWhitespaceChar(r,i);return i+1<o?new R(t.lineNumber,t.column,t.lineNumber,o+1):null},n.deleteWordRight=function(e,t,r,i,o){if(!r.isEmpty())return r;var s=new $(r.positionLineNumber,r.positionColumn),a=s.lineNumber,u=s.column,l=t.getLineCount(),f=t.getLineMaxColumn(a);if(a===l&&u===f)return null;if(i){var h=this._deleteWordRightWhitespace(t,s);if(h)return h}var d=n._findNextWordOnLine(e,t,s);return o===2?d?u=d.end+1:u<f||a===l?u=f:(a++,d=n._findNextWordOnLine(e,t,new $(a,1)),d?u=d.start+1:u=t.getLineMaxColumn(a)):(d&&u>=d.start+1&&(d=n._findNextWordOnLine(e,t,new $(a,d.end+1))),d?u=d.start+1:u<f||a===l?u=f:(a++,d=n._findNextWordOnLine(e,t,new $(a,1)),d?u=d.start+1:u=t.getLineMaxColumn(a))),new R(a,u,s.lineNumber,s.column)},n._deleteWordPartRight=function(e,t){if(!t.isEmpty())return t;var r=t.getPosition(),i=n._moveWordPartRight(e,r);return new R(r.lineNumber,r.column,i.lineNumber,i.column)},n.word=function(e,t,r,i,o){var s=Nu(e.wordSeparators),a=n._findPreviousWordOnLine(s,t,o),u=n._findNextWordOnLine(s,t,o);if(!i){var l,f;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(l=a.start+1,f=a.end+1):u&&u.wordType===1&&u.start<=o.column-1&&o.column-1<=u.end?(l=u.start+1,f=u.end+1):(a?l=a.end+1:l=1,u?f=u.start+1:f=t.getLineMaxColumn(o.lineNumber)),new Ai(new R(o.lineNumber,l,o.lineNumber,f),0,new $(o.lineNumber,f),0)}var h,d;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(h=a.start+1,d=a.end+1):u&&u.wordType===1&&u.start<o.column-1&&o.column-1<u.end?(h=u.start+1,d=u.end+1):(h=o.column,d=o.column);var g=o.lineNumber,v;if(r.selectionStart.containsPosition(o))v=r.selectionStart.endColumn;else if(o.isBeforeOrEqual(r.selectionStart.getStartPosition())){v=h;var m=new $(g,v);r.selectionStart.containsPosition(m)&&(v=r.selectionStart.endColumn)}else{v=d;var m=new $(g,v);r.selectionStart.containsPosition(m)&&(v=r.selectionStart.startColumn)}return r.move(!0,g,v,0)},n}(),SI=function(n){Cxe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.deleteWordPartLeft=function(t,r,i,o){var s=lC([zr.deleteWordLeft(t,r,i,o,0),zr.deleteWordLeft(t,r,i,o,2),zr._deleteWordPartLeft(r,i)]);return s.sort(R.compareRangesUsingEnds),s[2]},e.deleteWordPartRight=function(t,r,i,o){var s=lC([zr.deleteWordRight(t,r,i,o,0),zr.deleteWordRight(t,r,i,o,2),zr._deleteWordPartRight(r,i)]);return s.sort(R.compareRangesUsingStarts),s[0]},e.moveWordPartLeft=function(t,r,i){var o=lC([zr.moveWordLeft(t,r,i,0),zr.moveWordLeft(t,r,i,2),zr._moveWordPartLeft(r,i)]);return o.sort($.compare),o[2]},e.moveWordPartRight=function(t,r,i){var o=lC([zr.moveWordRight(t,r,i,0),zr.moveWordRight(t,r,i,2),zr._moveWordPartRight(r,i)]);return o.sort($.compare),o[0]},e}(zr);function lC(n){return n.filter(function(e){return!!e})}var Tr=function(){function n(){}return n.addCursorDown=function(e,t,r){for(var i=[],o=0,s=0,a=t.length;s<a;s++){var u=t[s];i[o++]=new ut(u.modelState,u.viewState),r?i[o++]=ut.fromModelState(Yn.translateDown(e.config,e.model,u.modelState)):i[o++]=ut.fromViewState(Yn.translateDown(e.config,e.viewModel,u.viewState))}return i},n.addCursorUp=function(e,t,r){for(var i=[],o=0,s=0,a=t.length;s<a;s++){var u=t[s];i[o++]=new ut(u.modelState,u.viewState),r?i[o++]=ut.fromModelState(Yn.translateUp(e.config,e.model,u.modelState)):i[o++]=ut.fromViewState(Yn.translateUp(e.config,e.viewModel,u.viewState))}return i},n.moveToBeginningOfLine=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o];i[o]=this._moveToLineStart(e,a,r)}return i},n._moveToLineStart=function(e,t,r){var i=t.viewState.position.column,o=t.modelState.position.column,s=i===o,a=t.viewState.position.lineNumber,u=e.viewModel.getLineFirstNonWhitespaceColumn(a),l=i===u;return!s&&!l?this._moveToLineStartByView(e,t,r):this._moveToLineStartByModel(e,t,r)},n._moveToLineStartByView=function(e,t,r){return ut.fromViewState(Yn.moveToBeginningOfLine(e.config,e.viewModel,t.viewState,r))},n._moveToLineStartByModel=function(e,t,r){return ut.fromModelState(Yn.moveToBeginningOfLine(e.config,e.model,t.modelState,r))},n.moveToEndOfLine=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o];i[o]=this._moveToLineEnd(e,a,r)}return i},n._moveToLineEnd=function(e,t,r){var i=t.viewState.position,o=e.viewModel.getLineMaxColumn(i.lineNumber),s=i.column===o,a=t.modelState.position,u=e.model.getLineMaxColumn(a.lineNumber),l=o-i.column===u-a.column;return s||l?this._moveToLineEndByModel(e,t,r):this._moveToLineEndByView(e,t,r)},n._moveToLineEndByView=function(e,t,r){return ut.fromViewState(Yn.moveToEndOfLine(e.config,e.viewModel,t.viewState,r))},n._moveToLineEndByModel=function(e,t,r){return ut.fromModelState(Yn.moveToEndOfLine(e.config,e.model,t.modelState,r))},n.expandLineSelection=function(e,t){for(var r=[],i=0,o=t.length;i<o;i++){var s=t[i],a=s.viewState.selection,u=a.startLineNumber,l=e.viewModel.getLineCount(),f=a.endLineNumber,h=void 0;f===l?h=e.viewModel.getLineMaxColumn(l):(f++,h=1),r[i]=ut.fromViewState(new Ai(new R(u,1,u,1),0,new $(f,h),0))}return r},n.moveToBeginningOfBuffer=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o];i[o]=ut.fromModelState(Yn.moveToBeginningOfBuffer(e.config,e.model,a.modelState,r))}return i},n.moveToEndOfBuffer=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o];i[o]=ut.fromModelState(Yn.moveToEndOfBuffer(e.config,e.model,a.modelState,r))}return i},n.selectAll=function(e,t){var r=e.model.getLineCount(),i=e.model.getLineMaxColumn(r);return ut.fromModelState(new Ai(new R(1,1,1,1),0,new $(r,i),0))},n.line=function(e,t,r,i,o){var s=e.model.validatePosition(i),a=o?e.validateViewPosition(new $(o.lineNumber,o.column),s):e.convertModelPositionToViewPosition(s);if(!r||!t.modelState.hasSelection()){var u=e.model.getLineCount(),l=s.lineNumber+1,f=1;return l>u&&(l=u,f=e.model.getLineMaxColumn(l)),ut.fromModelState(new Ai(new R(s.lineNumber,1,l,f),0,new $(l,f),0))}var h=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<h)return ut.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(s.lineNumber>h){var u=e.viewModel.getLineCount(),d=a.lineNumber+1,g=1;return d>u&&(d=u,g=e.viewModel.getLineMaxColumn(d)),ut.fromViewState(t.viewState.move(t.modelState.hasSelection(),d,g,0))}else{var v=t.modelState.selectionStart.getEndPosition();return ut.fromModelState(t.modelState.move(t.modelState.hasSelection(),v.lineNumber,v.column,0))}},n.word=function(e,t,r,i){var o=e.model.validatePosition(i);return ut.fromModelState(zr.word(e.config,e.model,t.modelState,r,o))},n.cancelSelection=function(e,t){if(!t.modelState.hasSelection())return new ut(t.modelState,t.viewState);var r=t.viewState.position.lineNumber,i=t.viewState.position.column;return ut.fromViewState(new Ai(new R(r,i,r,i),0,new $(r,i),0))},n.moveTo=function(e,t,r,i,o){var s=e.model.validatePosition(i),a=o?e.validateViewPosition(new $(o.lineNumber,o.column),s):e.convertModelPositionToViewPosition(s);return ut.fromViewState(t.viewState.move(r,a.lineNumber,a.column,0))},n.move=function(e,t,r){var i=r.select,o=r.value;switch(r.direction){case 0:return r.unit===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,o);case 1:return r.unit===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,o);case 2:return r.unit===2?this._moveUpByViewLines(e,t,i,o):this._moveUpByModelLines(e,t,i,o);case 3:return r.unit===2?this._moveDownByViewLines(e,t,i,o):this._moveDownByModelLines(e,t,i,o);case 4:return this._moveToViewMinColumn(e,t,i);case 5:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 6:return this._moveToViewCenterColumn(e,t,i);case 7:return this._moveToViewMaxColumn(e,t,i);case 8:return this._moveToViewLastNonWhitespaceColumn(e,t,i);case 9:{var s=t[0],a=e.getCompletelyVisibleModelRange(),u=this._firstLineNumberInRange(e.model,a,o),l=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,s,i,u,l)]}case 11:{var s=t[0],a=e.getCompletelyVisibleModelRange(),u=this._lastLineNumberInRange(e.model,a,o),l=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,s,i,u,l)]}case 10:{var s=t[0],a=e.getCompletelyVisibleModelRange(),u=Math.round((a.startLineNumber+a.endLineNumber)/2),l=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,s,i,u,l)]}case 12:{for(var f=e.getCompletelyVisibleViewRange(),h=[],d=0,g=t.length;d<g;d++){var s=t[d];h[d]=this.findPositionInViewportIfOutside(e,s,f,i)}return h}}return null},n.findPositionInViewportIfOutside=function(e,t,r,i){var o=t.viewState.position.lineNumber;if(r.startLineNumber<=o&&o<=r.endLineNumber-1)return new ut(t.modelState,t.viewState);o>r.endLineNumber-1&&(o=r.endLineNumber-1),o<r.startLineNumber&&(o=r.startLineNumber);var s=e.viewModel.getLineFirstNonWhitespaceColumn(o);return this._moveToViewPosition(e,t,i,o,s)},n._firstLineNumberInRange=function(e,t,r){var i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+r-1)},n._lastLineNumberInRange=function(e,t,r){var i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-r+1)},n._moveLeft=function(e,t,r,i){for(var o=[],s=0,a=t.length;s<a;s++){var u=t[s],l=Yn.moveLeft(e.config,e.viewModel,u.viewState,r,i);if(i===1&&l.position.lineNumber!==u.viewState.position.lineNumber){var f=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(l.position);f.lineNumber===u.modelState.position.lineNumber&&(l=Yn.moveLeft(e.config,e.viewModel,l,r,1))}o[s]=ut.fromViewState(l)}return o},n._moveHalfLineLeft=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=a.viewState.position.lineNumber,l=Math.round(e.viewModel.getLineContent(u).length/2);i[o]=ut.fromViewState(Yn.moveLeft(e.config,e.viewModel,a.viewState,r,l))}return i},n._moveRight=function(e,t,r,i){for(var o=[],s=0,a=t.length;s<a;s++){var u=t[s],l=Yn.moveRight(e.config,e.viewModel,u.viewState,r,i);if(i===1&&l.position.lineNumber!==u.viewState.position.lineNumber){var f=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(l.position);f.lineNumber===u.modelState.position.lineNumber&&(l=Yn.moveRight(e.config,e.viewModel,l,r,1))}o[s]=ut.fromViewState(l)}return o},n._moveHalfLineRight=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=a.viewState.position.lineNumber,l=Math.round(e.viewModel.getLineContent(u).length/2);i[o]=ut.fromViewState(Yn.moveRight(e.config,e.viewModel,a.viewState,r,l))}return i},n._moveDownByViewLines=function(e,t,r,i){for(var o=[],s=0,a=t.length;s<a;s++){var u=t[s];o[s]=ut.fromViewState(Yn.moveDown(e.config,e.viewModel,u.viewState,r,i))}return o},n._moveDownByModelLines=function(e,t,r,i){for(var o=[],s=0,a=t.length;s<a;s++){var u=t[s];o[s]=ut.fromModelState(Yn.moveDown(e.config,e.model,u.modelState,r,i))}return o},n._moveUpByViewLines=function(e,t,r,i){for(var o=[],s=0,a=t.length;s<a;s++){var u=t[s];o[s]=ut.fromViewState(Yn.moveUp(e.config,e.viewModel,u.viewState,r,i))}return o},n._moveUpByModelLines=function(e,t,r,i){for(var o=[],s=0,a=t.length;s<a;s++){var u=t[s];o[s]=ut.fromModelState(Yn.moveUp(e.config,e.model,u.modelState,r,i))}return o},n._moveToViewPosition=function(e,t,r,i,o){return ut.fromViewState(t.viewState.move(r,i,o,0))},n._moveToModelPosition=function(e,t,r,i,o){return ut.fromModelState(t.modelState.move(r,i,o,0))},n._moveToViewMinColumn=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=a.viewState.position.lineNumber,l=e.viewModel.getLineMinColumn(u);i[o]=this._moveToViewPosition(e,a,r,u,l)}return i},n._moveToViewFirstNonWhitespaceColumn=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=a.viewState.position.lineNumber,l=e.viewModel.getLineFirstNonWhitespaceColumn(u);i[o]=this._moveToViewPosition(e,a,r,u,l)}return i},n._moveToViewCenterColumn=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=a.viewState.position.lineNumber,l=Math.round((e.viewModel.getLineMaxColumn(u)+e.viewModel.getLineMinColumn(u))/2);i[o]=this._moveToViewPosition(e,a,r,u,l)}return i},n._moveToViewMaxColumn=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=a.viewState.position.lineNumber,l=e.viewModel.getLineMaxColumn(u);i[o]=this._moveToViewPosition(e,a,r,u,l)}return i},n._moveToViewLastNonWhitespaceColumn=function(e,t,r){for(var i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=a.viewState.position.lineNumber,l=e.viewModel.getLineLastNonWhitespaceColumn(u);i[o]=this._moveToViewPosition(e,a,r,u,l)}return i},n}(),pS;(function(n){var e=function(r){if(!di(r))return!1;var i=r;return!(!bu(i.to)||!Mi(i.select)&&!zK(i.select)||!Mi(i.by)&&!bu(i.by)||!Mi(i.value)&&!yl(i.value))};n.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down'
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(r){if(!r.to)return null;var i;switch(r.to){case n.RawDirection.Left:i=0;break;case n.RawDirection.Right:i=1;break;case n.RawDirection.Up:i=2;break;case n.RawDirection.Down:i=3;break;case n.RawDirection.WrappedLineStart:i=4;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=5;break;case n.RawDirection.WrappedLineColumnCenter:i=6;break;case n.RawDirection.WrappedLineEnd:i=7;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=8;break;case n.RawDirection.ViewPortTop:i=9;break;case n.RawDirection.ViewPortBottom:i=11;break;case n.RawDirection.ViewPortCenter:i=10;break;case n.RawDirection.ViewPortIfOutside:i=12;break;default:return null}var o=0;switch(r.by){case n.RawUnit.Line:o=1;break;case n.RawUnit.WrappedLine:o=2;break;case n.RawUnit.Character:o=3;break;case n.RawUnit.HalfLine:o=4;break}return{direction:i,unit:o,select:!!r.select,value:r.value||1}}n.parse=t})(pS||(pS={}));var kT=Object.create(null);function ih(n,e){kT[n]||(kT[n]=["",n]);for(var t=kT[n],r=t.length;r<=e;r++)t[r]=t[r-1]+n;return t[e]}var xh=function(){function n(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}return n.unshiftIndent=function(e,t,r,i,o){var s=$t.visibleColumnFromColumn(e,t,r);if(o){var a=ih(" ",i),u=$t.prevIndentTabStop(s,i),l=u/i;return ih(a,l)}else{var a="	",u=$t.prevRenderTabStop(s,r),l=u/r;return ih(a,l)}},n.shiftIndent=function(e,t,r,i,o){var s=$t.visibleColumnFromColumn(e,t,r);if(o){var a=ih(" ",i),u=$t.nextIndentTabStop(s,i),l=u/i;return ih(a,l)}else{var a="	",u=$t.nextRenderTabStop(s,r),l=u/r;return ih(a,l)}},n.prototype._addEditOperation=function(e,t,r){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,r):e.addEditOperation(t,r)},n.prototype.getEditOperations=function(e,t){var r=this._selection.startLineNumber,i=this._selection.endLineNumber;this._selection.endColumn===1&&r!==i&&(i=i-1);var o=this._opts,s=o.tabSize,a=o.indentSize,u=o.insertSpaces,l=r===i;if(this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(r))&&(this._useLastEditRangeForCursorEndPosition=!0),this._opts.useTabStops)for(var f=0,h=0,d=r;d<=i;d++,f=h){h=0;var g=e.getLineContent(d),v=Mo(g);if(!(this._opts.isUnshift&&(g.length===0||v===0))&&!(!l&&!this._opts.isUnshift&&g.length===0)){if(v===-1&&(v=g.length),d>1){var m=$t.visibleColumnFromColumn(g,v+1,s);if(m%a!==0&&e.isCheapToTokenize(d-1)){var y=gt.getRawEnterActionAtPosition(e,d-1,e.getLineMaxColumn(d-1));if(y){if(h=f,y.appendText)for(var b=0,C=y.appendText.length;b<C&&h<a&&y.appendText.charCodeAt(b)===32;b++)h++;y.removeText&&(h=Math.max(0,h-y.removeText));for(var b=0;b<h&&!(v===0||g.charCodeAt(v-1)!==32);b++)v--}}}if(!(this._opts.isUnshift&&v===0)){var E=void 0;this._opts.isUnshift?E=n.unshiftIndent(g,v+1,s,a,u):E=n.shiftIndent(g,v+1,s,a,u),this._addEditOperation(t,new R(d,1,d,v+1),E),d===r&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=v+1)}}}else for(var D=u?ih(" ",a):"	",d=r;d<=i;d++){var g=e.getLineContent(d),v=Mo(g);if(!(this._opts.isUnshift&&(g.length===0||v===0))&&!(!l&&!this._opts.isUnshift&&g.length===0)&&(v===-1&&(v=g.length),!(this._opts.isUnshift&&v===0)))if(this._opts.isUnshift){v=Math.min(v,a);for(var k=0;k<v;k++){var I=g.charCodeAt(k);if(I===9){v=k+1;break}}this._addEditOperation(t,new R(d,1,d,v+1),"")}else this._addEditOperation(t,new R(d,1,d,1),D),d===r&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}this._selectionId=t.trackSelection(this._selection)},n.prototype.computeCursorState=function(e,t){if(this._useLastEditRangeForCursorEndPosition){var r=t.getInverseEditOperations()[0];return new Ce(r.range.endLineNumber,r.range.endColumn,r.range.endLineNumber,r.range.endColumn)}var i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){var o=this._selection.startColumn,s=i.startColumn;return s<=o?i:i.getDirection()===0?new Ce(i.startLineNumber,o,i.endLineNumber,i.endColumn):new Ce(i.endLineNumber,i.endColumn,i.startLineNumber,o)}return i},n}(),Sxe=function(){function n(e,t,r){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=r}return n.prototype.getEditOperations=function(e,t){t.addTrackedEditOperation(new R(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new R(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)},n.prototype.computeCursorState=function(e,t){var r=t.getInverseEditOperations(),i=r[0].range,o=r[1].range;return new Ce(i.endLineNumber,i.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)},n}(),Exe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ma=function(){function n(){}return n.indent=function(e,t,r){if(t===null||r===null)return[];for(var i=[],o=0,s=r.length;o<s;o++)i[o]=new xh(r[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops});return i},n.outdent=function(e,t,r){for(var i=[],o=0,s=r.length;o<s;o++)i[o]=new xh(r[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops});return i},n.shiftIndent=function(e,t,r){return r=r||1,xh.shiftIndent(t,t.length+r,e.tabSize,e.indentSize,e.insertSpaces)},n.unshiftIndent=function(e,t,r){return r=r||1,xh.unshiftIndent(t,t.length+r,e.tabSize,e.indentSize,e.insertSpaces)},n._distributedPaste=function(e,t,r,i){for(var o=[],s=0,a=r.length;s<a;s++)o[s]=new ur(r[s],i[s]);return new to(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})},n._simplePaste=function(e,t,r,i,o){for(var s=[],a=0,u=r.length;a<u;a++){var l=r[a],f=l.getPosition();if(o&&i.indexOf(`
`)!==i.length-1&&(o=!1),o&&l.startLineNumber!==l.endLineNumber&&(o=!1),o&&l.startColumn===t.getLineMinColumn(l.startLineNumber)&&l.endColumn===t.getLineMaxColumn(l.startLineNumber)&&(o=!1),o){var h=new R(f.lineNumber,1,f.lineNumber,1);s[a]=new ur(h,i)}else s[a]=new ur(l,i)}return new to(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})},n._distributePasteToCursors=function(e,t,r,i){if(r||e.length===1)return null;if(i&&i.length===e.length)return i;t.charCodeAt(t.length-1)===10&&(t=t.substr(0,t.length-1));var o=t.split(/\r\n|\r|\n/);return o.length===e.length?o:null},n.paste=function(e,t,r,i,o,s){var a=this._distributePasteToCursors(r,i,o,s);return a?(r=r.sort(R.compareRangesUsingStarts),this._distributedPaste(e,t,r,a)):this._simplePaste(e,t,r,i,o)},n._goodIndentForLine=function(e,t,r){var i=null,o="",s=e.autoIndent?gt.getInheritIndentForLine(t,r,!1):null;if(s)i=s.action,o=s.indentation;else if(r>1){var a=void 0;for(a=r-1;a>=1;a--){var u=t.getLineContent(a),l=gf(u);if(l>=0)break}if(a<1)return null;var f=t.getLineMaxColumn(a),h=gt.getEnterAction(t,new R(a,f,a,f));h&&(o=h.indentation,i=h.enterAction,i&&(o+=i.appendText))}return i&&(i===xn.Indent&&(o=n.shiftIndent(e,o)),i===xn.Outdent&&(o=n.unshiftIndent(e,o)),o=e.normalizeIndentation(o)),o||null},n._replaceJumpToNextIndent=function(e,t,r,i){var o="",s=r.getStartPosition();if(e.insertSpaces)for(var a=$t.visibleColumnFromColumn2(e,t,s),u=e.indentSize,l=u-a%u,f=0;f<l;f++)o+=" ";else o="	";return new ur(r,o,i)},n.tab=function(e,t,r){for(var i=[],o=0,s=r.length;o<s;o++){var a=r[o];if(a.isEmpty()){var u=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(u)&&t.isCheapToTokenize(a.startLineNumber)){var l=this._goodIndentForLine(e,t,a.startLineNumber);l=l||"	";var f=e.normalizeIndentation(l);if(!Oy(u,f)){i[o]=new ur(new R(a.startLineNumber,1,a.startLineNumber,u.length+1),f,!0);continue}}i[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){var h=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==h){i[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[o]=new xh(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops})}}return i},n.replacePreviousChar=function(e,t,r,i,o,s){for(var a=[],u=0,l=i.length;u<l;u++){var f=i[u];if(!f.isEmpty()){a[u]=null;continue}var h=f.getPosition(),d=Math.max(1,h.column-s),g=new R(h.lineNumber,d,h.lineNumber,h.column);a[u]=new ur(g,o)}return new to(1,a,{shouldPushStackElementBefore:e!==1,shouldPushStackElementAfter:!1})},n._typeCommand=function(e,t,r){return r?new aC(e,t,!0):new ur(e,t,!0)},n._enter=function(e,t,r,i){if(!t.isCheapToTokenize(i.getStartPosition().lineNumber)){var o=t.getLineContent(i.startLineNumber),s=ln(o).substring(0,i.startColumn-1);return n._typeCommand(i,`
`+e.normalizeIndentation(s),r)}var a=gt.getEnterAction(t,i);if(a){var u=a.enterAction,l=a.indentation;if(u.indentAction===xn.None)return n._typeCommand(i,`
`+e.normalizeIndentation(l+u.appendText),r);if(u.indentAction===xn.Indent)return n._typeCommand(i,`
`+e.normalizeIndentation(l+u.appendText),r);if(u.indentAction===xn.IndentOutdent){var f=e.normalizeIndentation(l),h=e.normalizeIndentation(l+u.appendText),d=`
`+h+`
`+f;return r?new aC(i,d,!0):new iR(i,d,-1,h.length-f.length,!0)}else if(u.indentAction===xn.Outdent){var g=n.unshiftIndent(e,l);return n._typeCommand(i,`
`+e.normalizeIndentation(g+u.appendText),r)}}if(!e.autoIndent){var v=t.getLineContent(i.startLineNumber),m=ln(v).substring(0,i.startColumn-1);return n._typeCommand(i,`
`+e.normalizeIndentation(m),r)}var y=gt.getIndentForEnter(t,i,{unshiftIndent:function(M){return n.unshiftIndent(e,M)},shiftIndent:function(M){return n.shiftIndent(e,M)},normalizeIndentation:function(M){return e.normalizeIndentation(M)}},e.autoIndent),b=t.getLineContent(i.startLineNumber),C=ln(b).substring(0,i.startColumn-1);if(y){var E=$t.visibleColumnFromColumn2(e,t,i.getEndPosition()),D=i.endColumn,k=`
`;C!==e.normalizeIndentation(y.beforeEnter)&&(k=e.normalizeIndentation(y.beforeEnter)+b.substring(C.length,i.startColumn-1)+`
`,i=new R(i.startLineNumber,1,i.endLineNumber,i.endColumn));var I=t.getLineContent(i.endLineNumber),T=Mo(I);if(T>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,T+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),r)return new aC(i,k+e.normalizeIndentation(y.afterEnter),!0);var A=0;return D<=T+1&&(e.insertSpaces||(E=Math.ceil(E/e.indentSize)),A=Math.min(E+1-e.normalizeIndentation(y.afterEnter).length-1,0)),new iR(i,k+e.normalizeIndentation(y.afterEnter),0,A,!0)}else return n._typeCommand(i,`
`+e.normalizeIndentation(C),r)},n._isAutoIndentType=function(e,t,r){if(!e.autoIndent)return!1;for(var i=0,o=r.length;i<o;i++)if(!t.isCheapToTokenize(r[i].getEndPosition().lineNumber))return!1;return!0},n._runAutoIndentType=function(e,t,r,i){var o=gt.getIndentationAtPosition(t,r.startLineNumber,r.startColumn),s=gt.getIndentActionForType(t,r,i,{shiftIndent:function(u){return n.shiftIndent(e,u)},unshiftIndent:function(u){return n.unshiftIndent(e,u)}});if(s===null)return null;if(s!==e.normalizeIndentation(o)){var a=t.getLineFirstNonWhitespaceColumn(r.startLineNumber);return a===0?n._typeCommand(new R(r.startLineNumber,0,r.endLineNumber,r.endColumn),e.normalizeIndentation(s)+i,!1):n._typeCommand(new R(r.startLineNumber,0,r.endLineNumber,r.endColumn),e.normalizeIndentation(s)+t.getLineContent(r.startLineNumber).substring(a-1,r.startColumn-1)+i,!1)}return null},n._isAutoClosingOvertype=function(e,t,r,i,o){if(e.autoClosingOvertype==="never"||!e.autoClosingPairsClose2.has(o))return!1;for(var s=0,a=r.length;s<a;s++){var u=r[s];if(!u.isEmpty())return!1;var l=u.getPosition(),f=t.getLineContent(l.lineNumber),h=f.charAt(l.column-1);if(h!==o)return!1;if(e.autoClosingOvertype==="auto"){for(var d=!1,g=0,v=i.length;g<v;g++){var m=i[g];if(l.lineNumber===m.startLineNumber&&l.column===m.startColumn){d=!0;break}}if(!d)return!1}}return!0},n._runAutoClosingOvertype=function(e,t,r,i,o){for(var s=[],a=0,u=i.length;a<u;a++){var l=i[a],f=l.getPosition(),h=new R(f.lineNumber,f.column,f.lineNumber,f.column+1);s[a]=new ur(h,o)}return new to(1,s,{shouldPushStackElementBefore:e!==1,shouldPushStackElementAfter:!1})},n._isBeforeClosingBrace=function(e,t,r){var i=e.autoClosingPairsClose2.get(r);if(!i)return!1;for(var o=t.open===t.close,s=0,a=i;s<a.length;s++){var u=a[s],l=u.open===u.close;if(!(!o&&l))return!0}return!1},n._findAutoClosingPairOpen=function(e,t,r,i){var o=e.autoClosingPairsOpen2.get(i);if(!o)return null;for(var s=null,a=0,u=o;a<u.length;a++){var l=u[a];if(s===null||l.open.length>s.open.length){for(var f=!0,h=0,d=r;h<d.length;h++){var g=d[h],v=t.getValueInRange(new R(g.lineNumber,g.column-l.open.length+1,g.lineNumber,g.column));if(v+i!==l.open){f=!1;break}}f&&(s=l)}}return s},n._isAutoClosingOpenCharType=function(e,t,r,i,o){var s=I_(i),a=s?e.autoClosingQuotes:e.autoClosingBrackets;if(a==="never")return null;var u=this._findAutoClosingPairOpen(e,t,r.map(function(D){return D.getPosition()}),i);if(!u)return null;for(var l=s?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket,f=0,h=r.length;f<h;f++){var d=r[f];if(!d.isEmpty())return null;var g=d.getPosition(),v=t.getLineContent(g.lineNumber);if(v.length>g.column-1){var m=v.charAt(g.column-1),y=n._isBeforeClosingBrace(e,u,m);if(!y&&!l(m))return null}if(!t.isCheapToTokenize(g.lineNumber))return null;if(u.open.length===1&&s&&a!=="always"){var b=Nu(e.wordSeparators);if(o&&g.column>1&&b.get(v.charCodeAt(g.column-2))===0||!o&&g.column>2&&b.get(v.charCodeAt(g.column-3))===0)return null}t.forceTokenization(g.lineNumber);var C=t.getLineTokens(g.lineNumber),E=!1;try{E=gt.shouldAutoClosePair(u,C,o?g.column:g.column-1)}catch(D){Le(D)}if(!E)return null}return u},n._runAutoClosingOpenCharType=function(e,t,r,i,o,s,a){for(var u=[],l=0,f=i.length;l<f;l++){var h=i[l];u[l]=new uZ(h,o,s,a.close)}return new to(1,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})},n._shouldSurroundChar=function(e,t){return I_(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"},n._isSurroundSelectionType=function(e,t,r,i){if(!n._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;for(var o=I_(i),s=0,a=r.length;s<a;s++){var u=r[s];if(u.isEmpty())return!1;for(var l=!0,f=u.startLineNumber;f<=u.endLineNumber;f++){var h=t.getLineContent(f),d=f===u.startLineNumber?u.startColumn-1:0,g=f===u.endLineNumber?u.endColumn-1:h.length,v=h.substring(d,g);if(/[^ \t]/.test(v)){l=!1;break}}if(l)return!1;if(o&&u.startLineNumber===u.endLineNumber&&u.startColumn+1===u.endColumn){var m=t.getValueInRange(u);if(I_(m))return!1}}return!0},n._runSurroundSelectionType=function(e,t,r,i,o){for(var s=[],a=0,u=i.length;a<u;a++){var l=i[a],f=t.surroundingPairs[o];s[a]=new Sxe(l,o,f)}return new to(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})},n._isTypeInterceptorElectricChar=function(e,t,r){return!!(r.length===1&&t.isCheapToTokenize(r[0].getEndPosition().lineNumber))},n._typeInterceptorElectricChar=function(e,t,r,i,o){if(!t.electricChars.hasOwnProperty(o)||!i.isEmpty())return null;var s=i.getPosition();r.forceTokenization(s.lineNumber);var a=r.getLineTokens(s.lineNumber),u;try{u=gt.onElectricCharacter(o,a,s.column)}catch(D){return Le(D),null}if(!u)return null;if(u.matchOpenBracket){var l=(a.getLineContent()+o).lastIndexOf(u.matchOpenBracket)+1,f=r.findMatchingBracketUp(u.matchOpenBracket,{lineNumber:s.lineNumber,column:l});if(f){if(f.startLineNumber===s.lineNumber)return null;var h=r.getLineContent(f.startLineNumber),d=ln(h),g=t.normalizeIndentation(d),v=r.getLineContent(s.lineNumber),m=r.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,y=v.substring(m-1,s.column-1),b=g+y+o,C=new R(s.lineNumber,1,s.lineNumber,s.column),E=new ur(C,b);return new to(1,[E],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null},n.compositionEndWithInterceptors=function(e,t,r,i,o){for(var s=null,a=0,u=i;a<u.length;a++){var l=u[a];if(!l.isEmpty())return null;var f=l.getPosition(),h=r.getValueInRange(new R(f.lineNumber,f.column-1,f.lineNumber,f.column));if(s===null)s=h;else if(s!==h)return null}if(!s)return null;if(this._isAutoClosingOvertype(t,r,i,o,s)){var d=i.map(function(v){return new ur(new R(v.positionLineNumber,v.positionColumn,v.positionLineNumber,v.positionColumn+1),"",!1)});return new to(1,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}var g=this._isAutoClosingOpenCharType(t,r,i,s,!1);return g?this._runAutoClosingOpenCharType(e,t,r,i,s,!1,g):null},n.typeWithInterceptors=function(e,t,r,i,o,s){if(s===`
`){for(var a=[],u=0,l=i.length;u<l;u++)a[u]=n._enter(t,r,!1,i[u]);return new to(1,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoIndentType(t,r,i)){for(var f=[],h=!1,u=0,l=i.length;u<l;u++)if(f[u]=this._runAutoIndentType(t,r,i[u],s),!f[u]){h=!0;break}if(!h)return new to(1,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,r,i,o,s))return this._runAutoClosingOvertype(e,t,r,i,s);var d=this._isAutoClosingOpenCharType(t,r,i,s,!0);if(d)return this._runAutoClosingOpenCharType(e,t,r,i,s,!0,d);if(this._isSurroundSelectionType(t,r,i,s))return this._runSurroundSelectionType(e,t,r,i,s);if(this._isTypeInterceptorElectricChar(t,r,i)){var g=this._typeInterceptorElectricChar(e,t,r,i[0],s);if(g)return g}for(var v=[],u=0,l=i.length;u<l;u++)v[u]=new ur(i[u],s);var m=e!==1;return s===" "&&(m=!0),new to(1,v,{shouldPushStackElementBefore:m,shouldPushStackElementAfter:!1})},n.typeWithoutInterceptors=function(e,t,r,i,o){for(var s=[],a=0,u=i.length;a<u;a++)s[a]=new ur(i[a],o);return new to(1,s,{shouldPushStackElementBefore:e!==1,shouldPushStackElementAfter:!1})},n.lineInsertBefore=function(e,t,r){if(t===null||r===null)return[];for(var i=[],o=0,s=r.length;o<s;o++){var a=r[o].positionLineNumber;if(a===1)i[o]=new aC(new R(1,1,1,1),`
`);else{a--;var u=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new R(a,u,a,u))}}return i},n.lineInsertAfter=function(e,t,r){if(t===null||r===null)return[];for(var i=[],o=0,s=r.length;o<s;o++){var a=r[o].positionLineNumber,u=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new R(a,u,a,u))}return i},n.lineBreakInsert=function(e,t,r){for(var i=[],o=0,s=r.length;o<s;o++)i[o]=this._enter(e,t,!0,r[o]);return i},n}(),uZ=function(n){Exe(e,n);function e(t,r,i,o){var s=n.call(this,t,(i?r:"")+o,0,-o.length)||this;return s._openCharacter=r,s._closeCharacter=o,s.closeCharacterRange=null,s.enclosingRange=null,s}return e.prototype.computeCursorState=function(t,r){var i=r.getInverseEditOperations(),o=i[0].range;return this.closeCharacterRange=new R(o.startLineNumber,o.endColumn-this._closeCharacter.length,o.endLineNumber,o.endColumn),this.enclosingRange=new R(o.startLineNumber,o.endColumn-this._openCharacter.length-this._closeCharacter.length,o.endLineNumber,o.endColumn),n.prototype.computeCursorState.call(this,t,r)},e}(iR),P;(function(n){n.editorTextFocus=new Re("editorTextFocus",!1),n.focus=new Re("editorFocus",!1),n.textInputFocus=new Re("textInputFocus",!1),n.readOnly=new Re("editorReadonly",!1),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new Re("editorHasSelection",!1),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new Re("editorHasMultipleSelections",!1),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new Re("editorTabMovesFocus",!1),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInEmbeddedEditor=new Re("isInEmbeddedEditor",!1),n.canUndo=new Re("canUndo",!1),n.canRedo=new Re("canRedo",!1),n.languageId=new Re("editorLangId",""),n.hasCompletionItemProvider=new Re("editorHasCompletionItemProvider",!1),n.hasCodeActionsProvider=new Re("editorHasCodeActionsProvider",!1),n.hasCodeLensProvider=new Re("editorHasCodeLensProvider",!1),n.hasDefinitionProvider=new Re("editorHasDefinitionProvider",!1),n.hasDeclarationProvider=new Re("editorHasDeclarationProvider",!1),n.hasImplementationProvider=new Re("editorHasImplementationProvider",!1),n.hasTypeDefinitionProvider=new Re("editorHasTypeDefinitionProvider",!1),n.hasHoverProvider=new Re("editorHasHoverProvider",!1),n.hasDocumentHighlightProvider=new Re("editorHasDocumentHighlightProvider",!1),n.hasDocumentSymbolProvider=new Re("editorHasDocumentSymbolProvider",!1),n.hasReferenceProvider=new Re("editorHasReferenceProvider",!1),n.hasRenameProvider=new Re("editorHasRenameProvider",!1),n.hasSignatureHelpProvider=new Re("editorHasSignatureHelpProvider",!1),n.hasDocumentFormattingProvider=new Re("editorHasDocumentFormattingProvider",!1),n.hasDocumentSelectionFormattingProvider=new Re("editorHasDocumentSelectionFormattingProvider",!1),n.hasMultipleDocumentFormattingProvider=new Re("editorHasMultipleDocumentFormattingProvider",!1),n.hasMultipleDocumentSelectionFormattingProvider=new Re("editorHasMultipleDocumentSelectionFormattingProvider",!1)})(P||(P={}));var _t=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ft=0,wn=function(n){_t(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.runEditorCommand=function(t,r,i){var o=r._getCursors();o&&this.runCoreEditorCommand(o,i||{})},e}($i),gS;(function(n){var e=function(r){if(!di(r))return!1;var i=r;return!(!bu(i.to)||!Mi(i.by)&&!bu(i.by)||!Mi(i.value)&&!yl(i.value)||!Mi(i.revealCursor)&&!zK(i.revealCursor))};n.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},n.RawDirection={Up:"up",Down:"down"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(r){var i;switch(r.to){case n.RawDirection.Up:i=1;break;case n.RawDirection.Down:i=2;break;default:return null}var o;switch(r.by){case n.RawUnit.Line:o=1;break;case n.RawUnit.WrappedLine:o=2;break;case n.RawUnit.Page:o=3;break;case n.RawUnit.HalfPage:o=4;break;default:o=2}var s=Math.floor(r.value||1),a=!!r.revealCursor;return{direction:i,unit:o,value:s,revealCursor:a,select:!!r.select}}n.parse=t})(gS||(gS={}));var lg;(function(n){var e=function(t){if(!di(t))return!1;var r=t;return!(!yl(r.lineNumber)||!Mi(r.at)&&!bu(r.at))};n.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed .\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:"number"},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(lg||(lg={}));var li;(function(n){var e=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._inSelectionMode=b.inSelectionMode,C}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,[Tr.moveTo(b.context,b.getPrimaryCursor(),this._inSelectionMode,C.position,C.viewPosition)]),b.reveal(!0,0,0)},y}(wn);n.MoveTo=ee(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),n.MoveToSelect=ee(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));var t=function(m){_t(y,m);function y(){return m!==null&&m.apply(this,arguments)||this}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement();var E=this._getColumnSelectResult(b.context,b.getPrimaryCursor(),b.getColumnSelectData(),C);b.setStates(C.source,3,E.viewStates.map(function(D){return ut.fromViewState(D)})),b.setColumnSelectData({isReal:!0,fromViewLineNumber:E.fromLineNumber,fromViewVisualColumn:E.fromVisualColumn,toViewLineNumber:E.toLineNumber,toViewVisualColumn:E.toVisualColumn}),b.reveal(!0,E.reversed?1:2,0)},y}(wn);n.ColumnSelect=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"columnSelect",precondition:void 0})||this}return y.prototype._getColumnSelectResult=function(b,C,E,D){var k=b.model.validatePosition(D.position),I=b.validateViewPosition(new $(D.viewPosition.lineNumber,D.viewPosition.column),k),T=E.fromViewLineNumber,A=E.fromViewVisualColumn;return!E.isReal&&D.setAnchorIfNotSet&&(T=I.lineNumber,A=D.mouseColumn-1),n_.columnSelect(b.config,b.viewModel,T,A,I.lineNumber,D.mouseColumn-1)},y}(t))),n.CursorColumnSelectLeft=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:3599,linux:{primary:0}}})||this}return y.prototype._getColumnSelectResult=function(b,C,E,D){return n_.columnSelectLeft(b.config,b.viewModel,E)},y}(t))),n.CursorColumnSelectRight=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:3601,linux:{primary:0}}})||this}return y.prototype._getColumnSelectResult=function(b,C,E,D){return n_.columnSelectRight(b.config,b.viewModel,E)},y}(t)));var r=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._isPaged=b.isPaged,C}return y.prototype._getColumnSelectResult=function(b,C,E,D){return n_.columnSelectUp(b.config,b.viewModel,E,this._isPaged)},y}(t);n.CursorColumnSelectUp=ee(new r({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:3600,linux:{primary:0}}})),n.CursorColumnSelectPageUp=ee(new r({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:3595,linux:{primary:0}}}));var i=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._isPaged=b.isPaged,C}return y.prototype._getColumnSelectResult=function(b,C,E,D){return n_.columnSelectDown(b.config,b.viewModel,E,this._isPaged)},y}(t);n.CursorColumnSelectDown=ee(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:3602,linux:{primary:0}}})),n.CursorColumnSelectPageDown=ee(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:3596,linux:{primary:0}}}));var o=function(m){_t(y,m);function y(){return m.call(this,{id:"cursorMove",precondition:void 0,description:pS.description})||this}return y.prototype.runCoreEditorCommand=function(b,C){var E=pS.parse(C);E&&this._runCursorMove(b,C.source,E)},y.prototype._runCursorMove=function(b,C,E){b.context.model.pushStackElement(),b.setStates(C,3,Tr.move(b.context,b.getAll(),E)),b.reveal(!0,0,0)},y}(wn);n.CursorMoveImpl=o,n.CursorMove=ee(new o);var s=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._staticArgs=b.args,C}return y.prototype.runCoreEditorCommand=function(b,C){var E=this._staticArgs;this._staticArgs.value===-1&&(E={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:b.context.config.pageSize}),n.CursorMove._runCursorMove(b,C.source,E)},y}(wn);n.CursorLeft=ee(new s({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),n.CursorLeftSelect=ee(new s({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:1039}})),n.CursorRight=ee(new s({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),n.CursorRightSelect=ee(new s({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:1041}})),n.CursorUp=ee(new s({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),n.CursorUpSelect=ee(new s({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),n.CursorPageUp=ee(new s({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:11}})),n.CursorPageUpSelect=ee(new s({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:1035}})),n.CursorDown=ee(new s({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),n.CursorDownSelect=ee(new s({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),n.CursorPageDown=ee(new s({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:12}})),n.CursorPageDownSelect=ee(new s({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:1036}})),n.CreateCursor=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"createCursor",precondition:void 0})||this}return y.prototype.runCoreEditorCommand=function(b,C){var E=b.context,D;C.wholeLine?D=Tr.line(E,b.getPrimaryCursor(),!1,C.position,C.viewPosition):D=Tr.moveTo(E,b.getPrimaryCursor(),!1,C.position,C.viewPosition);var k=b.getAll();if(k.length>1)for(var I=D.modelState?D.modelState.position:null,T=D.viewState?D.viewState.position:null,A=0,M=k.length;A<M;A++){var L=k[A];if(!(I&&!L.modelState.selection.containsPosition(I))&&!(T&&!L.viewState.selection.containsPosition(T))){k.splice(A,1),b.context.model.pushStackElement(),b.setStates(C.source,3,k);return}}k.push(D),b.context.model.pushStackElement(),b.setStates(C.source,3,k)},y}(wn))),n.LastCursorMoveToSelect=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"_lastCursorMoveToSelect",precondition:void 0})||this}return y.prototype.runCoreEditorCommand=function(b,C){var E=b.context,D=b.getLastAddedCursorIndex(),k=b.getAll(),I=k.slice(0);I[D]=Tr.moveTo(E,k[D],!0,C.position,C.viewPosition),b.context.model.pushStackElement(),b.setStates(C.source,3,I)},y}(wn)));var a=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._inSelectionMode=b.inSelectionMode,C}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,Tr.moveToBeginningOfLine(b.context,b.getAll(),this._inSelectionMode)),b.reveal(!0,0,0)},y}(wn);n.CursorHome=ee(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),n.CursorHomeSelect=ee(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}})),n.CursorLineStart=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"cursorLineStart",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:0,mac:{primary:287}}})||this}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,this._exec(b.context,b.getAll())),b.reveal(!0,0,0)},y.prototype._exec=function(b,C){for(var E=[],D=0,k=C.length;D<k;D++){var I=C[D],T=I.modelState.position.lineNumber;E[D]=ut.fromModelState(I.modelState.move(!1,T,1,0))}return E},y}(wn)));var u=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._inSelectionMode=b.inSelectionMode,C}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,Tr.moveToEndOfLine(b.context,b.getAll(),this._inSelectionMode)),b.reveal(!0,0,0)},y}(wn);n.CursorEnd=ee(new u({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}}})),n.CursorEndSelect=ee(new u({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}}})),n.CursorLineEnd=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:0,mac:{primary:291}}})||this}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,this._exec(b.context,b.getAll())),b.reveal(!0,0,0)},y.prototype._exec=function(b,C){for(var E=[],D=0,k=C.length;D<k;D++){var I=C[D],T=I.modelState.position.lineNumber,A=b.model.getLineMaxColumn(T);E[D]=ut.fromModelState(I.modelState.move(!1,T,A,0))}return E},y}(wn)));var l=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._inSelectionMode=b.inSelectionMode,C}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,Tr.moveToBeginningOfBuffer(b.context,b.getAll(),this._inSelectionMode)),b.reveal(!0,0,0)},y}(wn);n.CursorTop=ee(new l({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:2062,mac:{primary:2064}}})),n.CursorTopSelect=ee(new l({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:3086,mac:{primary:3088}}}));var f=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._inSelectionMode=b.inSelectionMode,C}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,Tr.moveToEndOfBuffer(b.context,b.getAll(),this._inSelectionMode)),b.reveal(!0,0,0)},y}(wn);n.CursorBottom=ee(new f({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:2061,mac:{primary:2066}}})),n.CursorBottomSelect=ee(new f({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:3085,mac:{primary:3090}}}));var h=function(m){_t(y,m);function y(){return m.call(this,{id:"editorScroll",precondition:void 0,description:gS.description})||this}return y.prototype.runCoreEditorCommand=function(b,C){var E=gS.parse(C);E&&this._runEditorScroll(b,C.source,E)},y.prototype._runEditorScroll=function(b,C,E){var D=this._computeDesiredScrollTop(b.context,E);if(E.revealCursor){var k=b.context.getCompletelyVisibleViewRangeAtScrollTop(D);b.setStates(C,3,[Tr.findPositionInViewportIfOutside(b.context,b.getPrimaryCursor(),k,E.select)])}b.scrollTo(D)},y.prototype._computeDesiredScrollTop=function(b,C){if(C.unit===1){var E=b.getCompletelyVisibleModelRange(),D=void 0;C.direction===1?D=Math.max(1,E.startLineNumber-C.value):D=Math.min(b.model.getLineCount(),E.startLineNumber+C.value);var k=b.convertModelPositionToViewPosition(new $(D,1));return b.getVerticalOffsetForViewLine(k.lineNumber)}var I;C.unit===3?I=b.config.pageSize*C.value:C.unit===4?I=Math.round(b.config.pageSize/2)*C.value:I=C.value;var T=(C.direction===1?-1:1)*I;return b.getCurrentScrollTop()+T*b.config.lineHeight},y}(wn);n.EditorScrollImpl=h,n.EditorScroll=ee(new h),n.ScrollLineUp=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"scrollLineUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:2064,mac:{primary:267}}})||this}return y.prototype.runCoreEditorCommand=function(b,C){n.EditorScroll._runEditorScroll(b,C.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})},y}(wn))),n.ScrollPageUp=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"scrollPageUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})||this}return y.prototype.runCoreEditorCommand=function(b,C){n.EditorScroll._runEditorScroll(b,C.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})},y}(wn))),n.ScrollLineDown=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"scrollLineDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:2066,mac:{primary:268}}})||this}return y.prototype.runCoreEditorCommand=function(b,C){n.EditorScroll._runEditorScroll(b,C.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})},y}(wn))),n.ScrollPageDown=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"scrollPageDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})||this}return y.prototype.runCoreEditorCommand=function(b,C){n.EditorScroll._runEditorScroll(b,C.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})},y}(wn)));var d=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._inSelectionMode=b.inSelectionMode,C}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,[Tr.word(b.context,b.getPrimaryCursor(),this._inSelectionMode,C.position)]),b.reveal(!0,0,0)},y}(wn);n.WordSelect=ee(new d({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),n.WordSelectDrag=ee(new d({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),n.LastCursorWordSelect=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"lastCursorWordSelect",precondition:void 0})||this}return y.prototype.runCoreEditorCommand=function(b,C){var E=b.context,D=b.getLastAddedCursorIndex(),k=b.getAll(),I=k.slice(0),T=k[D];I[D]=Tr.word(E,T,T.modelState.hasSelection(),C.position),E.model.pushStackElement(),b.setStates(C.source,3,I)},y}(wn)));var g=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._inSelectionMode=b.inSelectionMode,C}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,[Tr.line(b.context,b.getPrimaryCursor(),this._inSelectionMode,C.position,C.viewPosition)]),b.reveal(!1,0,0)},y}(wn);n.LineSelect=ee(new g({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),n.LineSelectDrag=ee(new g({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));var v=function(m){_t(y,m);function y(b){var C=m.call(this,b)||this;return C._inSelectionMode=b.inSelectionMode,C}return y.prototype.runCoreEditorCommand=function(b,C){var E=b.getLastAddedCursorIndex(),D=b.getAll(),k=D.slice(0);k[E]=Tr.line(b.context,D[E],this._inSelectionMode,C.position,C.viewPosition),b.context.model.pushStackElement(),b.setStates(C.source,3,k)},y}(wn);n.LastCursorLineSelect=ee(new v({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),n.LastCursorLineSelectDrag=ee(new v({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),n.ExpandLineSelection=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"expandLineSelection",precondition:void 0,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:2090}})||this}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,Tr.expandLineSelection(b.context,b.getAll())),b.reveal(!0,0,0)},y}(wn))),n.CancelSelection=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"cancelSelection",precondition:P.hasNonEmptySelection,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:9,secondary:[1033]}})||this}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,[Tr.cancelSelection(b.context,b.getPrimaryCursor())]),b.reveal(!0,0,0)},y}(wn))),n.RemoveSecondaryCursors=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"removeSecondaryCursors",precondition:P.hasMultipleSelections,kbOpts:{weight:ft+1,kbExpr:P.textInputFocus,primary:9,secondary:[1033]}})||this}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,[b.getPrimaryCursor()]),b.reveal(!0,0,0)},y}(wn))),n.RevealLine=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"revealLine",precondition:void 0,description:lg.description})||this}return y.prototype.runCoreEditorCommand=function(b,C){var E=C,D=(E.lineNumber||0)+1;D<1&&(D=1);var k=b.context.model.getLineCount();D>k&&(D=k);var I=new R(D,1,D,b.context.model.getLineMaxColumn(D)),T=0;if(E.at)switch(E.at){case lg.RawAtArgument.Top:T=3;break;case lg.RawAtArgument.Center:T=1;break;case lg.RawAtArgument.Bottom:T=4;break}var A=b.context.convertModelRangeToViewRange(I);b.revealRange(!1,A,T,0)},y}(wn))),n.SelectAll=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"selectAll",precondition:void 0})||this}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,[Tr.selectAll(b.context,b.getPrimaryCursor())])},y}(wn))),n.SetSelection=ee(new(function(m){_t(y,m);function y(){return m.call(this,{id:"setSelection",precondition:void 0})||this}return y.prototype.runCoreEditorCommand=function(b,C){b.context.model.pushStackElement(),b.setStates(C.source,3,[ut.fromModelSelection(C.selection)])},y}(wn)))})(li||(li={}));var sR;(function(n){var e=function(t){_t(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.runEditorCommand=function(i,o,s){var a=o._getCursors();a&&this.runCoreEditingCommand(o,a,s||{})},r}($i);n.CoreEditingCommand=e,n.LineBreakInsert=ee(new(function(t){_t(r,t);function r(){return t.call(this,{id:"lineBreakInsert",precondition:P.writable,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:0,mac:{primary:301}}})||this}return r.prototype.runCoreEditingCommand=function(i,o,s){i.pushUndoStop(),i.executeCommands(this.id,ma.lineBreakInsert(o.context.config,o.context.model,o.getAll().map(function(a){return a.modelState.selection})))},r}(e))),n.Outdent=ee(new(function(t){_t(r,t);function r(){return t.call(this,{id:"outdent",precondition:P.writable,kbOpts:{weight:ft,kbExpr:_e.and(P.editorTextFocus,P.tabDoesNotMoveFocus),primary:1026}})||this}return r.prototype.runCoreEditingCommand=function(i,o,s){i.pushUndoStop(),i.executeCommands(this.id,ma.outdent(o.context.config,o.context.model,o.getAll().map(function(a){return a.modelState.selection}))),i.pushUndoStop()},r}(e))),n.Tab=ee(new(function(t){_t(r,t);function r(){return t.call(this,{id:"tab",precondition:P.writable,kbOpts:{weight:ft,kbExpr:_e.and(P.editorTextFocus,P.tabDoesNotMoveFocus),primary:2}})||this}return r.prototype.runCoreEditingCommand=function(i,o,s){i.pushUndoStop(),i.executeCommands(this.id,ma.tab(o.context.config,o.context.model,o.getAll().map(function(a){return a.modelState.selection}))),i.pushUndoStop()},r}(e))),n.DeleteLeft=ee(new(function(t){_t(r,t);function r(){return t.call(this,{id:"deleteLeft",precondition:P.writable,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})||this}return r.prototype.runCoreEditingCommand=function(i,o,s){var a=oR.deleteLeft(o.getPrevEditOperationType(),o.context.config,o.context.model,o.getAll().map(function(f){return f.modelState.selection})),u=a[0],l=a[1];u&&i.pushUndoStop(),i.executeCommands(this.id,l),o.setPrevEditOperationType(2)},r}(e))),n.DeleteRight=ee(new(function(t){_t(r,t);function r(){return t.call(this,{id:"deleteRight",precondition:P.writable,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})||this}return r.prototype.runCoreEditingCommand=function(i,o,s){var a=oR.deleteRight(o.getPrevEditOperationType(),o.context.config,o.context.model,o.getAll().map(function(f){return f.modelState.selection})),u=a[0],l=a[1];u&&i.pushUndoStop(),i.executeCommands(this.id,l),o.setPrevEditOperationType(3)},r}(e)))})(sR||(sR={}));function md(n){n.register()}var n2=function(n){_t(e,n);function e(t){var r=n.call(this,t)||this;return r._editorHandler=t.editorHandler,r._inputHandler=t.inputHandler,r}return e.prototype.runCommand=function(t,r){var i=t.get(an).getFocusedCodeEditor();if(i&&i.hasTextFocus())return this._runEditorHandler(t,i,r);var o=document.activeElement;if(o&&["input","textarea"].indexOf(o.tagName.toLowerCase())>=0){document.execCommand(this._inputHandler);return}var s=t.get(an).getActiveCodeEditor();if(s)return s.focus(),this._runEditorHandler(t,s,r)},e.prototype._runEditorHandler=function(t,r,i){var o=this._editorHandler;typeof o=="string"?r.trigger("keyboard",o,i):(i=i||{},i.source="keyboard",o.runEditorCommand(t,r,i))},e}(RF),vS=function(n){_t(e,n);function e(t,r,i){var o=n.call(this,{id:t,precondition:void 0,description:i})||this;return o._handlerId=r,o}return e.prototype.runCommand=function(t,r){var i=t.get(an).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,r)},e}(RF);md(new n2({editorHandler:li.SelectAll,inputHandler:"selectAll",id:"editor.action.selectAll",precondition:P.textInputFocus,kbOpts:{weight:ft,kbExpr:null,primary:2079},menubarOpts:{menuId:22,group:"1_basic",title:S({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1}}));md(new n2({editorHandler:Ht.Undo,inputHandler:"undo",id:Ht.Undo,precondition:P.writable,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:2104},menubarOpts:{menuId:14,group:"1_do",title:S({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1}}));md(new vS("default:"+Ht.Undo,Ht.Undo));md(new n2({editorHandler:Ht.Redo,inputHandler:"redo",id:Ht.Redo,precondition:P.writable,kbOpts:{weight:ft,kbExpr:P.textInputFocus,primary:2103,secondary:[3128],mac:{primary:3128}},menubarOpts:{menuId:14,group:"1_do",title:S({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2}}));md(new vS("default:"+Ht.Redo,Ht.Redo));function Hv(n,e){md(new vS("default:"+n,n)),md(new vS(n,n,e))}Hv(Ht.Type,{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Hv(Ht.ReplacePreviousChar);Hv(Ht.CompositionStart);Hv(Ht.CompositionEnd);Hv(Ht.Paste);Hv(Ht.Cut);var Ixe=function(){function n(e,t,r,i){this.configuration=e,this.viewModel=t,this.outgoingEvents=r,this.commandDelegate=i}return n.prototype._execMouseCommand=function(e,t){t.source="mouse",this.commandDelegate.executeEditorCommand(e,t)},n.prototype.paste=function(e,t,r,i){this.commandDelegate.paste(e,t,r,i)},n.prototype.type=function(e,t){this.commandDelegate.type(e,t)},n.prototype.replacePreviousChar=function(e,t,r){this.commandDelegate.replacePreviousChar(e,t,r)},n.prototype.compositionStart=function(e){this.commandDelegate.compositionStart(e)},n.prototype.compositionEnd=function(e){this.commandDelegate.compositionEnd(e)},n.prototype.cut=function(e){this.commandDelegate.cut(e)},n.prototype.setSelection=function(e,t){this.commandDelegate.executeEditorCommand(li.SetSelection,{source:e,selection:t})},n.prototype._validateViewColumn=function(e){var t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new $(e.lineNumber,t):e},n.prototype._hasMulticursorModifier=function(e){switch(this.configuration.editor.multiCursorModifier){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey}return!1},n.prototype._hasNonMulticursorModifier=function(e){switch(this.configuration.editor.multiCursorModifier){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey}return!1},n.prototype.dispatchMouse=function(e){e.middleButton?e.inSelectionMode?this._columnSelect(e.position,e.mouseColumn,!0):this.moveTo(e.position):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!1):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)},n.prototype._usualArgs=function(e){return e=this._validateViewColumn(e),{position:this._convertViewToModelPosition(e),viewPosition:e}},n.prototype.moveTo=function(e){this._execMouseCommand(li.MoveTo,this._usualArgs(e))},n.prototype._moveToSelect=function(e){this._execMouseCommand(li.MoveToSelect,this._usualArgs(e))},n.prototype._columnSelect=function(e,t,r){e=this._validateViewColumn(e),this._execMouseCommand(li.ColumnSelect,{position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,setAnchorIfNotSet:r})},n.prototype._createCursor=function(e,t){e=this._validateViewColumn(e),this._execMouseCommand(li.CreateCursor,{position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})},n.prototype._lastCursorMoveToSelect=function(e){this._execMouseCommand(li.LastCursorMoveToSelect,this._usualArgs(e))},n.prototype._wordSelect=function(e){this._execMouseCommand(li.WordSelect,this._usualArgs(e))},n.prototype._wordSelectDrag=function(e){this._execMouseCommand(li.WordSelectDrag,this._usualArgs(e))},n.prototype._lastCursorWordSelect=function(e){this._execMouseCommand(li.LastCursorWordSelect,this._usualArgs(e))},n.prototype._lineSelect=function(e){this._execMouseCommand(li.LineSelect,this._usualArgs(e))},n.prototype._lineSelectDrag=function(e){this._execMouseCommand(li.LineSelectDrag,this._usualArgs(e))},n.prototype._lastCursorLineSelect=function(e){this._execMouseCommand(li.LastCursorLineSelect,this._usualArgs(e))},n.prototype._lastCursorLineSelectDrag=function(e){this._execMouseCommand(li.LastCursorLineSelectDrag,this._usualArgs(e))},n.prototype._selectAll=function(){this._execMouseCommand(li.SelectAll,{})},n.prototype._convertViewToModelPosition=function(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)},n.prototype.emitKeyDown=function(e){this.outgoingEvents.emitKeyDown(e)},n.prototype.emitKeyUp=function(e){this.outgoingEvents.emitKeyUp(e)},n.prototype.emitContextMenu=function(e){this.outgoingEvents.emitContextMenu(e)},n.prototype.emitMouseMove=function(e){this.outgoingEvents.emitMouseMove(e)},n.prototype.emitMouseLeave=function(e){this.outgoingEvents.emitMouseLeave(e)},n.prototype.emitMouseUp=function(e){this.outgoingEvents.emitMouseUp(e)},n.prototype.emitMouseDown=function(e){this.outgoingEvents.emitMouseDown(e)},n.prototype.emitMouseDrag=function(e){this.outgoingEvents.emitMouseDrag(e)},n.prototype.emitMouseDrop=function(e){this.outgoingEvents.emitMouseDrop(e)},n.prototype.emitMouseWheel=function(e){this.outgoingEvents.emitMouseWheel(e)},n}(),lZ=function(){function n(e){this._createLine=e,this._set(1,[])}return n.prototype.flush=function(){this._set(1,[])},n.prototype._set=function(e,t){this._lines=t,this._rendLineNumberStart=e},n.prototype._get=function(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}},n.prototype.getStartLineNumber=function(){return this._rendLineNumberStart},n.prototype.getEndLineNumber=function(){return this._rendLineNumberStart+this._lines.length-1},n.prototype.getCount=function(){return this._lines.length},n.prototype.getLine=function(e){var t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]},n.prototype.onLinesDeleted=function(e,t){if(this.getCount()===0)return null;var r=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<r){var o=t-e+1;return this._rendLineNumberStart-=o,null}if(e>i)return null;for(var s=0,a=0,u=r;u<=i;u++){var l=u-this._rendLineNumberStart;e<=u&&u<=t&&(a===0?(s=l,a=1):a++)}if(e<r){var f=0;t<r?f=t-e+1:f=r-e,this._rendLineNumberStart-=f}var h=this._lines.splice(s,a);return h},n.prototype.onLinesChanged=function(e,t){if(this.getCount()===0)return!1;for(var r=this.getStartLineNumber(),i=this.getEndLineNumber(),o=!1,s=e;s<=t;s++)s>=r&&s<=i&&(this._lines[s-this._rendLineNumberStart].onContentChanged(),o=!0);return o},n.prototype.onLinesInserted=function(e,t){if(this.getCount()===0)return null;var r=t-e+1,i=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=r,null;if(e>o)return null;if(r+e>o){var s=this._lines.splice(e-this._rendLineNumberStart,o-e+1);return s}for(var a=[],u=0;u<r;u++)a[u]=this._createLine();var l=e-this._rendLineNumberStart,f=this._lines.slice(0,l),h=this._lines.slice(l,this._lines.length-r),d=this._lines.slice(this._lines.length-r,this._lines.length);return this._lines=f.concat(a).concat(h),d},n.prototype.onTokensChanged=function(e){if(this.getCount()===0)return!1;for(var t=this.getStartLineNumber(),r=this.getEndLineNumber(),i=!1,o=0,s=e.length;o<s;o++){var a=e[o];if(!(a.toLineNumber<t||a.fromLineNumber>r))for(var u=Math.max(t,a.fromLineNumber),l=Math.min(r,a.toLineNumber),f=u;f<=l;f++){var h=f-this._rendLineNumberStart;this._lines[h].onTokensChanged(),i=!0}}return i},n}(),cZ=function(){function n(e){var t=this;this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new lZ(function(){return t._host.createVisibleLine()})}return n.prototype._createDomNode=function(){var e=st(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e},n.prototype.onConfigurationChanged=function(e){return e.layoutInfo},n.prototype.onFlushed=function(e){return this._linesCollection.flush(),!0},n.prototype.onLinesChanged=function(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)},n.prototype.onLinesDeleted=function(e){var t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(var r=0,i=t.length;r<i;r++){var o=t[r].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0},n.prototype.onLinesInserted=function(e){var t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(var r=0,i=t.length;r<i;r++){var o=t[r].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0},n.prototype.onScrollChanged=function(e){return e.scrollTopChanged},n.prototype.onTokensChanged=function(e){return this._linesCollection.onTokensChanged(e.ranges)},n.prototype.onZonesChanged=function(e){return!0},n.prototype.getStartLineNumber=function(){return this._linesCollection.getStartLineNumber()},n.prototype.getEndLineNumber=function(){return this._linesCollection.getEndLineNumber()},n.prototype.getVisibleLine=function(e){return this._linesCollection.getLine(e)},n.prototype.renderLines=function(e){var t=this._linesCollection._get(),r=new xxe(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=r.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)},n}(),xxe=function(){function n(e,t,r){this.domNode=e,this.host=t,this.viewportData=r}return n.prototype.render=function(e,t,r,i){var o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||r<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=r-t+1,o.lines=[];for(var s=t;s<=r;s++)o.lines[s-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,i),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(r-o.rendLineNumberStart,o.linesLength-1),i,t),o.rendLineNumberStart>t){var a=t,u=Math.min(r,o.rendLineNumberStart-1);a<=u&&(this._insertLinesBefore(o,a,u,i,t),o.linesLength+=u-a+1)}else if(o.rendLineNumberStart<t){var l=Math.min(o.linesLength,t-o.rendLineNumberStart);l>0&&(this._removeLinesBefore(o,l),o.linesLength-=l)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<r){var a=o.rendLineNumberStart+o.linesLength,u=r;a<=u&&(this._insertLinesAfter(o,a,u,i,t),o.linesLength+=u-a+1)}else if(o.rendLineNumberStart+o.linesLength-1>r){var a=Math.max(0,r-o.rendLineNumberStart+1),u=o.linesLength-1,l=u-a+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,i),o},n.prototype._renderUntouchedLines=function(e,t,r,i,o){for(var s=e.rendLineNumberStart,a=e.lines,u=t;u<=r;u++){var l=s+u;a[u].layoutLine(l,i[l-o])}},n.prototype._insertLinesBefore=function(e,t,r,i,o){for(var s=[],a=0,u=t;u<=r;u++)s[a++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)},n.prototype._removeLinesBefore=function(e,t){for(var r=0;r<t;r++){var i=e.lines[r].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)},n.prototype._insertLinesAfter=function(e,t,r,i,o){for(var s=[],a=0,u=t;u<=r;u++)s[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)},n.prototype._removeLinesAfter=function(e,t){for(var r=e.linesLength-t,i=0;i<t;i++){var o=e.lines[r+i].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(r,t)},n.prototype._finishRenderingNewLines=function(e,t,r,i){var o=this.domNode.lastChild;t||!o?this.domNode.innerHTML=r:o.insertAdjacentHTML("afterend",r);for(var s=this.domNode.lastChild,a=e.linesLength-1;a>=0;a--){var u=e.lines[a];i[a]&&(u.setDomNode(s),s=s.previousSibling)}},n.prototype._finishRenderingInvalidLines=function(e,t,r){var i=document.createElement("div");i.innerHTML=t;for(var o=0;o<e.linesLength;o++){var s=e.lines[o];if(r[o]){var a=i.firstChild,u=s.getDomNode();u.parentNode.replaceChild(a,u),s.setDomNode(a)}}},n.prototype._finishRendering=function(e,t,r){var i=n._sb,o=e.linesLength,s=e.lines,a=e.rendLineNumberStart,u=[];{i.reset();for(var l=!1,f=0;f<o;f++){var h=s[f];u[f]=!1;var d=h.getDomNode();if(!d){var g=h.renderLine(f+a,r[f],this.viewportData,i);g&&(u[f]=!0,l=!0)}}l&&this._finishRenderingNewLines(e,t,i.build(),u)}{i.reset();for(var v=!1,m=[],f=0;f<o;f++){var h=s[f];if(m[f]=!1,!u[f]){var g=h.renderLine(f+a,r[f],this.viewportData,i);g&&(m[f]=!0,v=!0)}}v&&this._finishRenderingInvalidLines(e,i.build(),m)}},n._sb=Hy(1e5),n}(),r2=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fZ=function(n){r2(e,n);function e(t){var r=n.call(this,t)||this;return r._visibleLines=new cZ(r),r.domNode=r._visibleLines.domNode,r._dynamicOverlays=[],r._isFocused=!1,r.domNode.setClassName("view-overlays"),r}return e.prototype.shouldRender=function(){if(n.prototype.shouldRender.call(this))return!0;for(var t=0,r=this._dynamicOverlays.length;t<r;t++){var i=this._dynamicOverlays[t];if(i.shouldRender())return!0}return!1},e.prototype.dispose=function(){n.prototype.dispose.call(this);for(var t=0,r=this._dynamicOverlays.length;t<r;t++){var i=this._dynamicOverlays[t];i.dispose()}this._dynamicOverlays=[]},e.prototype.getDomNode=function(){return this.domNode},e.prototype.createVisibleLine=function(){return new Dxe(this._context.configuration,this._dynamicOverlays)},e.prototype.addDynamicOverlay=function(t){this._dynamicOverlays.push(t)},e.prototype.onConfigurationChanged=function(t){this._visibleLines.onConfigurationChanged(t);for(var r=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),o=r;o<=i;o++){var s=this._visibleLines.getVisibleLine(o);s.onConfigurationChanged(t)}return!0},e.prototype.onFlushed=function(t){return this._visibleLines.onFlushed(t)},e.prototype.onFocusChanged=function(t){return this._isFocused=t.isFocused,!0},e.prototype.onLinesChanged=function(t){return this._visibleLines.onLinesChanged(t)},e.prototype.onLinesDeleted=function(t){return this._visibleLines.onLinesDeleted(t)},e.prototype.onLinesInserted=function(t){return this._visibleLines.onLinesInserted(t)},e.prototype.onScrollChanged=function(t){return this._visibleLines.onScrollChanged(t)||!0},e.prototype.onTokensChanged=function(t){return this._visibleLines.onTokensChanged(t)},e.prototype.onZonesChanged=function(t){return this._visibleLines.onZonesChanged(t)},e.prototype.prepareRender=function(t){for(var r=this._dynamicOverlays.filter(function(a){return a.shouldRender()}),i=0,o=r.length;i<o;i++){var s=r[i];s.prepareRender(t),s.onDidRender()}},e.prototype.render=function(t){this._viewOverlaysRender(t),this.domNode.toggleClassName("focused",this._isFocused)},e.prototype._viewOverlaysRender=function(t){this._visibleLines.renderLines(t.viewportData)},e}(Cs),Dxe=function(){function n(e,t){this._configuration=e,this._lineHeight=this._configuration.editor.lineHeight,this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}return n.prototype.getDomNode=function(){return this._domNode?this._domNode.domNode:null},n.prototype.setDomNode=function(e){this._domNode=st(e)},n.prototype.onContentChanged=function(){},n.prototype.onTokensChanged=function(){},n.prototype.onConfigurationChanged=function(e){e.lineHeight&&(this._lineHeight=this._configuration.editor.lineHeight)},n.prototype.renderLine=function(e,t,r,i){for(var o="",s=0,a=this._dynamicOverlays.length;s<a;s++){var u=this._dynamicOverlays[s];o+=u.render(r.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,i.appendASCIIString('<div style="position:absolute;top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;width:100%;height:"),i.appendASCIIString(String(this._lineHeight)),i.appendASCIIString('px;">'),i.appendASCIIString(o),i.appendASCIIString("</div>"),!0)},n.prototype.layoutLine=function(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))},n}(),Lxe=function(n){r2(e,n);function e(t){var r=n.call(this,t)||this;return r._contentWidth=r._context.configuration.editor.layoutInfo.contentWidth,r.domNode.setHeight(0),r}return e.prototype.onConfigurationChanged=function(t){return t.layoutInfo&&(this._contentWidth=this._context.configuration.editor.layoutInfo.contentWidth),n.prototype.onConfigurationChanged.call(this,t)},e.prototype.onScrollChanged=function(t){return n.prototype.onScrollChanged.call(this,t)||t.scrollWidthChanged},e.prototype._viewOverlaysRender=function(t){n.prototype._viewOverlaysRender.call(this,t),this.domNode.setWidth(Math.max(t.scrollWidth,this._contentWidth))},e}(fZ),kxe=function(n){r2(e,n);function e(t){var r=n.call(this,t)||this;return r._contentLeft=r._context.configuration.editor.layoutInfo.contentLeft,r.domNode.setClassName("margin-view-overlays"),r.domNode.setWidth(1),_s.applyFontInfo(r.domNode,r._context.configuration.editor.fontInfo),r}return e.prototype.onConfigurationChanged=function(t){var r=!1;return t.fontInfo&&(_s.applyFontInfo(this.domNode,this._context.configuration.editor.fontInfo),r=!0),t.layoutInfo&&(this._contentLeft=this._context.configuration.editor.layoutInfo.contentLeft,r=!0),n.prototype.onConfigurationChanged.call(this,t)||r},e.prototype.onScrollChanged=function(t){return n.prototype.onScrollChanged.call(this,t)||t.scrollHeightChanged},e.prototype._viewOverlaysRender=function(t){n.prototype._viewOverlaysRender.call(this,t);var r=Math.min(t.scrollHeight,1e6);this.domNode.setHeight(r),this.domNode.setWidth(this._contentLeft)},e}(fZ),Txe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),r_=function(){function n(e,t){this.top=e,this.left=t}return n}(),Nxe=function(n){Txe(e,n);function e(t,r){var i=n.call(this,t)||this;return i._viewDomNode=r,i._widgets={},i.domNode=st(document.createElement("div")),Eu.write(i.domNode,1),i.domNode.setClassName("contentWidgets"),i.domNode.setPosition("absolute"),i.domNode.setTop(0),i.overflowingContentWidgetsDomNode=st(document.createElement("div")),Eu.write(i.overflowingContentWidgetsDomNode,2),i.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets"),i}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this._widgets={}},e.prototype.onConfigurationChanged=function(t){for(var r=Object.keys(this._widgets),i=0,o=r;i<o.length;i++){var s=o[i];this._widgets[s].onConfigurationChanged(t)}return!0},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onLineMappingChanged=function(t){for(var r=Object.keys(this._widgets),i=0,o=r;i<o.length;i++){var s=o[i];this._widgets[s].onLineMappingChanged(t)}return!0},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return!0},e.prototype.onZonesChanged=function(t){return!0},e.prototype.addWidget=function(t){var r=new Axe(this._context,this._viewDomNode,t);this._widgets[r.id]=r,r.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(r.domNode):this.domNode.appendChild(r.domNode),this.setShouldRender()},e.prototype.setWidgetPosition=function(t,r,i,o){var s=this._widgets[t.getId()];s.setPosition(r,i,o),this.setShouldRender()},e.prototype.removeWidget=function(t){var r=t.getId();if(this._widgets.hasOwnProperty(r)){var i=this._widgets[r];delete this._widgets[r];var o=i.domNode.domNode;o.parentNode.removeChild(o),o.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}},e.prototype.shouldSuppressMouseDownOnWidget=function(t){return this._widgets.hasOwnProperty(t)?this._widgets[t].suppressMouseDown:!1},e.prototype.onBeforeRender=function(t){for(var r=Object.keys(this._widgets),i=0,o=r;i<o.length;i++){var s=o[i];this._widgets[s].onBeforeRender(t)}},e.prototype.prepareRender=function(t){for(var r=Object.keys(this._widgets),i=0,o=r;i<o.length;i++){var s=o[i];this._widgets[s].prepareRender(t)}},e.prototype.render=function(t){for(var r=Object.keys(this._widgets),i=0,o=r;i<o.length;i++){var s=o[i];this._widgets[s].render(t)}},e}(Cs),Axe=function(){function n(e,t,r){this._context=e,this._viewDomNode=t,this._actual=r,this.domNode=st(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1,this._fixedOverflowWidgets=this._context.configuration.editor.viewInfo.fixedOverflowWidgets,this._contentWidth=this._context.configuration.editor.layoutInfo.contentWidth,this._contentLeft=this._context.configuration.editor.layoutInfo.contentLeft,this._lineHeight=this._context.configuration.editor.lineHeight,this._position=null,this._range=null,this._viewPosition=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}return n.prototype.onConfigurationChanged=function(e){e.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),e.layoutInfo&&(this._contentLeft=this._context.configuration.editor.layoutInfo.contentLeft,this._contentWidth=this._context.configuration.editor.layoutInfo.contentWidth,this._maxWidth=this._getMaxWidth())},n.prototype.onLineMappingChanged=function(e){this._setPosition(this._position,this._range)},n.prototype._setPosition=function(e,t){if(this._position=e,this._range=t,this._viewPosition=null,this._viewRange=null,this._position){var r=this._context.model.validateModelPosition(this._position);this._context.model.coordinatesConverter.modelPositionIsVisible(r)&&(this._viewPosition=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(r))}if(this._range){var i=this._context.model.validateModelRange(this._range);this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(i)}},n.prototype._getMaxWidth=function(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth},n.prototype.setPosition=function(e,t,r){this._setPosition(e,t),this._preference=r,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1},n.prototype._layoutBoxInViewport=function(e,t,r,i,o){var s=e.top,a=s,u=t.top+this._lineHeight,l=o.viewportHeight-u,f=s-i,h=a>=i,d=u,g=l>=i,v=e.left,m=t.left;return v+r>o.scrollLeft+o.viewportWidth&&(v=o.scrollLeft+o.viewportWidth-r),m+r>o.scrollLeft+o.viewportWidth&&(m=o.scrollLeft+o.viewportWidth-r),v<o.scrollLeft&&(v=o.scrollLeft),m<o.scrollLeft&&(m=o.scrollLeft),{fitsAbove:h,aboveTop:f,aboveLeft:v,fitsBelow:g,belowTop:d,belowLeft:m}},n.prototype._layoutBoxInPage=function(e,t,r,i,o){var s=e.left-o.scrollLeft,a=t.left-o.scrollLeft,u=e.top-i,l=t.top+this._lineHeight,f=s+this._contentLeft,h=a+this._contentLeft,d=Wr(this._viewDomNode.domNode),g=d.top+u-nu.scrollY,v=d.top+l-nu.scrollY,m=d.left+f-nu.scrollX,y=d.left+h-nu.scrollX,b=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,C=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,E=22,D=22,k=g>=E,I=v+i<=C-D;if(m+r+20>b){var T=m-(b-r-20);m-=T,f-=T}if(y+r+20>b){var T=y-(b-r-20);y-=T,h-=T}if(m<0){var T=m;m-=T,f-=T}if(y<0){var T=y;y-=T,h-=T}return this._fixedOverflowWidgets&&(u=g,l=v,f=m,h=y),{fitsAbove:k,aboveTop:u,aboveLeft:f,fitsBelow:I,belowTop:l,belowLeft:h}},n.prototype._prepareRenderWidgetAtExactPositionOverflowing=function(e){return new r_(e.top,e.left+this._contentLeft)},n.prototype._getTopAndBottomLeft=function(e){if(!this._viewPosition)return[null,null];var t=e.visibleRangeForPosition(this._viewPosition);if(!t)return[null,null];var r=e.getVerticalOffsetForLineNumber(this._viewPosition.lineNumber)-e.scrollTop,i=new r_(r,t.left),o=this._viewPosition.lineNumber,s=t.left;if(this._viewRange){var a=e.linesVisibleRangesForRange(this._viewRange,!1);if(a&&a.length>0)for(var u=a.length-1;u>=0;u--){var l=a[u];if(l.lineNumber>=o){l.lineNumber>o&&(o=l.lineNumber,s=1073741824);for(var f=0,h=l.ranges.length;f<h;f++){var d=l.ranges[f];d.left<s&&(s=d.left)}}}}var g=e.getVerticalOffsetForLineNumber(o)-e.scrollTop,v=new r_(g,s);return[i,v]},n.prototype._prepareRenderWidget=function(e){var t=this._getTopAndBottomLeft(e),r=t[0],i=t[1];if(!r||!i)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){var o=this.domNode.domNode;this._cachedDomNodeClientWidth=o.clientWidth,this._cachedDomNodeClientHeight=o.clientHeight}var s;if(this.allowEditorOverflow?s=this._layoutBoxInPage(r,i,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):s=this._layoutBoxInViewport(r,i,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e),this._preference)for(var a=1;a<=2;a++)for(var u=0,l=this._preference;u<l.length;u++){var f=l[u];if(f===1){if(!s)return null;if(a===2||s.fitsAbove)return new r_(s.aboveTop,s.aboveLeft)}else if(f===2){if(!s)return null;if(a===2||s.fitsBelow)return new r_(s.belowTop,s.belowLeft)}else return this.allowEditorOverflow?this._prepareRenderWidgetAtExactPositionOverflowing(r):r}return null},n.prototype.onBeforeRender=function(e){!this._viewPosition||!this._preference||this._viewPosition.lineNumber<e.startLineNumber||this._viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)},n.prototype.prepareRender=function(e){this._renderData=this._prepareRenderWidget(e)},n.prototype.render=function(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden"));return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.top),this.domNode.setLeft(this._renderData.left)):(this.domNode.setTop(this._renderData.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0)},n}(),Oxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rxe=function(n){Oxe(e,n);function e(t){var r=n.call(this)||this;return r._context=t,r._lineHeight=r._context.configuration.editor.lineHeight,r._renderLineHighlight=r._context.configuration.editor.viewInfo.renderLineHighlight,r._selectionIsEmpty=!0,r._primaryCursorLineNumber=1,r._scrollWidth=0,r._contentWidth=r._context.configuration.editor.layoutInfo.contentWidth,r._context.addEventHandler(r),r}return e.prototype.dispose=function(){this._context.removeEventHandler(this),n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return t.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),t.viewInfo&&(this._renderLineHighlight=this._context.configuration.editor.viewInfo.renderLineHighlight),t.layoutInfo&&(this._contentWidth=this._context.configuration.editor.layoutInfo.contentWidth),!0},e.prototype.onCursorStateChanged=function(t){var r=!1,i=t.selections[0].positionLineNumber;this._primaryCursorLineNumber!==i&&(this._primaryCursorLineNumber=i,r=!0);var o=t.selections[0].isEmpty();return this._selectionIsEmpty!==o?(this._selectionIsEmpty=o,!0):r},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollWidthChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype.prepareRender=function(t){this._scrollWidth=t.scrollWidth},e.prototype.render=function(t,r){if(r===this._primaryCursorLineNumber)if(this._shouldShowCurrentLine()){var i=this._willRenderMarginCurrentLine(),o="current-line"+(i?" current-line-both":"");return'<div class="'+o+'" style="width:'+String(Math.max(this._scrollWidth,this._contentWidth))+"px; height:"+String(this._lineHeight)+'px;"></div>'}else return"";return""},e.prototype._shouldShowCurrentLine=function(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty},e.prototype._willRenderMarginCurrentLine=function(){return this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all"},e}(Fd);Xt(function(n,e){var t=n.getColor(eZ);if(t&&e.addRule(".monaco-editor .view-overlays .current-line { background-color: "+t+"; }"),!t||t.isTransparent()||n.defines(tR)){var r=n.getColor(tR);r&&(e.addRule(".monaco-editor .view-overlays .current-line { border: 2px solid "+r+"; }"),n.type==="hc"&&e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"))}});var Mxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pxe=function(n){Mxe(e,n);function e(t){var r=n.call(this)||this;return r._context=t,r._lineHeight=r._context.configuration.editor.lineHeight,r._renderLineHighlight=r._context.configuration.editor.viewInfo.renderLineHighlight,r._selectionIsEmpty=!0,r._primaryCursorLineNumber=1,r._contentLeft=r._context.configuration.editor.layoutInfo.contentLeft,r._context.addEventHandler(r),r}return e.prototype.dispose=function(){this._context.removeEventHandler(this),n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return t.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),t.viewInfo&&(this._renderLineHighlight=this._context.configuration.editor.viewInfo.renderLineHighlight),t.layoutInfo&&(this._contentLeft=this._context.configuration.editor.layoutInfo.contentLeft),!0},e.prototype.onCursorStateChanged=function(t){var r=!1,i=t.selections[0].positionLineNumber;this._primaryCursorLineNumber!==i&&(this._primaryCursorLineNumber=i,r=!0);var o=t.selections[0].isEmpty();return this._selectionIsEmpty!==o?(this._selectionIsEmpty=o,!0):r},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onZonesChanged=function(t){return!0},e.prototype.prepareRender=function(t){},e.prototype.render=function(t,r){if(r===this._primaryCursorLineNumber){var i="current-line";if(this._shouldShowCurrentLine()){var o=this._willRenderContentCurrentLine();i="current-line current-line-margin"+(o?" current-line-margin-both":"")}return'<div class="'+i+'" style="width:'+String(this._contentLeft)+"px; height:"+String(this._lineHeight)+'px;"></div>'}return""},e.prototype._shouldShowCurrentLine=function(){return this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all"},e.prototype._willRenderContentCurrentLine=function(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty},e}(Fd);Xt(function(n,e){var t=n.getColor(eZ);if(t)e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { background-color: "+t+"; border: none; }");else{var r=n.getColor(tR);r&&e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid "+r+"; }"),n.type==="hc"&&e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")}});var Fxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bxe=function(n){Fxe(e,n);function e(t){var r=n.call(this)||this;return r._context=t,r._lineHeight=r._context.configuration.editor.lineHeight,r._typicalHalfwidthCharacterWidth=r._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth,r._renderResult=null,r._context.addEventHandler(r),r}return e.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return t.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),t.fontInfo&&(this._typicalHalfwidthCharacterWidth=this._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth),!0},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollTopChanged||t.scrollWidthChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype.prepareRender=function(t){for(var r=t.getDecorationsInViewport(),i=[],o=0,s=0,a=r.length;s<a;s++){var u=r[s];u.options.className&&(i[o++]=u)}i=i.sort(function(v,m){if(v.options.zIndex<m.options.zIndex)return-1;if(v.options.zIndex>m.options.zIndex)return 1;var y=v.options.className,b=m.options.className;return y<b?-1:y>b?1:R.compareRangesUsingStarts(v.range,m.range)});for(var l=t.visibleRange.startLineNumber,f=t.visibleRange.endLineNumber,h=[],d=l;d<=f;d++){var g=d-l;h[g]=""}this._renderWholeLineDecorations(t,i,h),this._renderNormalDecorations(t,i,h),this._renderResult=h},e.prototype._renderWholeLineDecorations=function(t,r,i){for(var o=String(this._lineHeight),s=t.visibleRange.startLineNumber,a=t.visibleRange.endLineNumber,u=0,l=r.length;u<l;u++){var f=r[u];if(f.options.isWholeLine)for(var h='<div class="cdr '+f.options.className+'" style="left:0;width:100%;height:'+o+'px;"></div>',d=Math.max(f.range.startLineNumber,s),g=Math.min(f.range.endLineNumber,a),v=d;v<=g;v++){var m=v-s;i[m]+=h}}},e.prototype._renderNormalDecorations=function(t,r,i){for(var o=String(this._lineHeight),s=t.visibleRange.startLineNumber,a=null,u=!1,l=null,f=0,h=r.length;f<h;f++){var d=r[f];if(!d.options.isWholeLine){var g=d.options.className,v=!!d.options.showIfCollapsed,m=d.range;if(v&&m.endColumn===1&&m.endLineNumber!==m.startLineNumber&&(m=new R(m.startLineNumber,m.startColumn,m.endLineNumber-1,this._context.model.getLineMaxColumn(m.endLineNumber-1))),a===g&&u===v&&R.areIntersectingOrTouching(l,m)){l=R.plusRange(l,m);continue}a!==null&&this._renderNormalDecoration(t,l,a,u,o,s,i),a=g,u=v,l=m}}a!==null&&this._renderNormalDecoration(t,l,a,u,o,s,i)},e.prototype._renderNormalDecoration=function(t,r,i,o,s,a,u){var l=t.linesVisibleRangesForRange(r,i==="findMatch");if(l)for(var f=0,h=l.length;f<h;f++){var d=l[f],g=d.lineNumber-a;if(o&&d.ranges.length===1){var v=d.ranges[0];v.width===0&&(d.ranges[0]=new Hc(v.left,this._typicalHalfwidthCharacterWidth))}for(var m=0,y=d.ranges.length;m<y;m++){var b=d.ranges[m],C='<div class="cdr '+i+'" style="left:'+String(b.left)+"px;width:"+String(b.width)+"px;height:"+s+'px;"></div>';u[g]+=C}}},e.prototype.render=function(t,r){if(!this._renderResult)return"";var i=r-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]},e}(Fd),Wxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bo=function(n){Wxe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){this._register(ie(t,Ye.CLICK,function(i){return r(new Rr(i))}))},e.prototype.onmousedown=function(t,r){this._register(ie(t,Ye.MOUSE_DOWN,function(i){return r(new Rr(i))}))},e.prototype.onmouseover=function(t,r){this._register(ie(t,Ye.MOUSE_OVER,function(i){return r(new Rr(i))}))},e.prototype.onnonbubblingmouseout=function(t,r){this._register(nF(t,function(i){return r(new Rr(i))}))},e.prototype.onkeydown=function(t,r){this._register(ie(t,Ye.KEY_DOWN,function(i){return r(new Sn(i))}))},e.prototype.onkeyup=function(t,r){this._register(ie(t,Ye.KEY_UP,function(i){return r(new Sn(i))}))},e.prototype.oninput=function(t,r){this._register(ie(t,Ye.INPUT,r))},e.prototype.onblur=function(t,r){this._register(ie(t,Ye.BLUR,r))},e.prototype.onfocus=function(t,r){this._register(ie(t,Ye.FOCUS,r))},e.prototype.onchange=function(t,r){this._register(ie(t,Ye.CHANGE,r))},e}(te),Vxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jg=11,Hxe=function(n){Vxe(e,n);function e(t){var r=n.call(this)||this;return r._onActivate=t.onActivate,r.bgDomNode=document.createElement("div"),r.bgDomNode.className="arrow-background",r.bgDomNode.style.position="absolute",r.bgDomNode.style.width=t.bgWidth+"px",r.bgDomNode.style.height=t.bgHeight+"px",typeof t.top<"u"&&(r.bgDomNode.style.top="0px"),typeof t.left<"u"&&(r.bgDomNode.style.left="0px"),typeof t.bottom<"u"&&(r.bgDomNode.style.bottom="0px"),typeof t.right<"u"&&(r.bgDomNode.style.right="0px"),r.domNode=document.createElement("div"),r.domNode.className=t.className,r.domNode.style.position="absolute",r.domNode.style.width=Jg+"px",r.domNode.style.height=Jg+"px",typeof t.top<"u"&&(r.domNode.style.top=t.top+"px"),typeof t.left<"u"&&(r.domNode.style.left=t.left+"px"),typeof t.bottom<"u"&&(r.domNode.style.bottom=t.bottom+"px"),typeof t.right<"u"&&(r.domNode.style.right=t.right+"px"),r._mouseMoveMonitor=r._register(new Pd),r.onmousedown(r.bgDomNode,function(i){return r._arrowMouseDown(i)}),r.onmousedown(r.domNode,function(i){return r._arrowMouseDown(i)}),r._mousedownRepeatTimer=r._register(new Mv),r._mousedownScheduleRepeatTimer=r._register(new Ho),r}return e.prototype._arrowMouseDown=function(t){var r=this,i=function(){r._mousedownRepeatTimer.cancelAndSet(function(){return r._onActivate()},1e3/24)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(i,200),this._mouseMoveMonitor.startMonitoring(Wv,function(o){},function(){r._mousedownRepeatTimer.cancel(),r._mousedownScheduleRepeatTimer.cancel()}),t.preventDefault()},e}(bo),Uxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jxe=function(n){Uxe(e,n);function e(t,r,i){var o=n.call(this)||this;return o._visibility=t,o._visibleClassName=r,o._invisibleClassName=i,o._domNode=null,o._isVisible=!1,o._isNeeded=!1,o._shouldBeVisible=!1,o._revealTimer=o._register(new Ho),o}return e.prototype.applyVisibilitySetting=function(t){return this._visibility===2?!1:this._visibility===3?!0:t},e.prototype.setShouldBeVisible=function(t){var r=this.applyVisibilitySetting(t);this._shouldBeVisible!==r&&(this._shouldBeVisible=r,this.ensureVisibility())},e.prototype.setIsNeeded=function(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())},e.prototype.setDomNode=function(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)},e.prototype.ensureVisibility=function(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)},e.prototype._reveal=function(){var t=this;this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(function(){t._domNode&&t._domNode.setClassName(t._visibleClassName)},0))},e.prototype._hide=function(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(t?" fade":"")))},e}(te),zxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qxe=140,hZ=function(n){zxe(e,n);function e(t){var r=n.call(this)||this;return r._lazyRender=t.lazyRender,r._host=t.host,r._scrollable=t.scrollable,r._scrollbarState=t.scrollbarState,r._visibilityController=r._register(new jxe(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),r._mouseMoveMonitor=r._register(new Pd),r._shouldRender=!0,r.domNode=st(document.createElement("div")),r.domNode.setAttribute("role","presentation"),r.domNode.setAttribute("aria-hidden","true"),r._visibilityController.setDomNode(r.domNode),r.domNode.setPosition("absolute"),r.onmousedown(r.domNode.domNode,function(i){return r._domNodeMouseDown(i)}),r}return e.prototype._createArrow=function(t){var r=this._register(new Hxe(t));this.domNode.domNode.appendChild(r.bgDomNode),this.domNode.domNode.appendChild(r.domNode)},e.prototype._createSlider=function(t,r,i,o){var s=this;this.slider=st(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(r),typeof i=="number"&&this.slider.setWidth(i),typeof o=="number"&&this.slider.setHeight(o),this.slider.setLayerHinting(!0),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,function(a){a.leftButton&&(a.preventDefault(),s._sliderMouseDown(a,function(){}))}),this.onclick(this.slider.domNode,function(a){a.leftButton&&a.stopPropagation()})},e.prototype._onElementSize=function(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender},e.prototype._onElementScrollSize=function(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender},e.prototype._onElementScrollPosition=function(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender},e.prototype.beginReveal=function(){this._visibilityController.setShouldBeVisible(!0)},e.prototype.beginHide=function(){this._visibilityController.setShouldBeVisible(!1)},e.prototype.render=function(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))},e.prototype._domNodeMouseDown=function(t){t.target===this.domNode.domNode&&this._onMouseDown(t)},e.prototype.delegateMouseDown=function(t){var r=this.domNode.domNode.getClientRects()[0].top,i=r+this._scrollbarState.getSliderPosition(),o=r+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderMousePosition(t);i<=s&&s<=o?t.leftButton&&(t.preventDefault(),this._sliderMouseDown(t,function(){})):this._onMouseDown(t)},e.prototype._onMouseDown=function(t){var r,i;if(t.target===this.domNode.domNode&&typeof t.browserEvent.offsetX=="number"&&typeof t.browserEvent.offsetY=="number")r=t.browserEvent.offsetX,i=t.browserEvent.offsetY;else{var o=Wr(this.domNode.domNode);r=t.posx-o.left,i=t.posy-o.top}this._setDesiredScrollPositionNow(this._scrollbarState.getDesiredScrollPositionFromOffset(this._mouseDownRelativePosition(r,i))),t.leftButton&&(t.preventDefault(),this._sliderMouseDown(t,function(){}))},e.prototype._sliderMouseDown=function(t,r){var i=this,o=this._sliderMousePosition(t),s=this._sliderOrthogonalMousePosition(t),a=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(Wv,function(u){var l=i._sliderOrthogonalMousePosition(u),f=Math.abs(l-s);if(Hi&&f>qxe){i._setDesiredScrollPositionNow(a.getScrollPosition());return}var h=i._sliderMousePosition(u),d=h-o;i._setDesiredScrollPositionNow(a.getDesiredScrollPositionFromDelta(d))},function(){i.slider.toggleClassName("active",!1),i._host.onDragEnd(),r()}),this._host.onDragStart()},e.prototype._setDesiredScrollPositionNow=function(t){var r={};this.writeScrollPosition(r,t),this._scrollable.setScrollPositionNow(r)},e}(bo),$xe=20,dZ=function(){function n(e,t,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(r),this._arrowSize=Math.round(e),this._visibleSize=0,this._scrollSize=0,this._scrollPosition=0,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}return n.prototype.clone=function(){var e=new n(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize);return e.setVisibleSize(this._visibleSize),e.setScrollSize(this._scrollSize),e.setScrollPosition(this._scrollPosition),e},n.prototype.setVisibleSize=function(e){var t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1},n.prototype.setScrollSize=function(e){var t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1},n.prototype.setScrollPosition=function(e){var t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1},n._computeValues=function(e,t,r,i,o){var s=Math.max(0,r-e),a=Math.max(0,s-2*t),u=i>0&&i>r;if(!u)return{computedAvailableSize:Math.round(s),computedIsNeeded:u,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};var l=Math.round(Math.max($xe,Math.floor(r*a/i))),f=(a-l)/(i-r),h=o*f;return{computedAvailableSize:Math.round(s),computedIsNeeded:u,computedSliderSize:Math.round(l),computedSliderRatio:f,computedSliderPosition:Math.round(h)}},n.prototype._refreshComputedValues=function(){var e=n._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition},n.prototype.getArrowSize=function(){return this._arrowSize},n.prototype.getScrollPosition=function(){return this._scrollPosition},n.prototype.getRectangleLargeSize=function(){return this._computedAvailableSize},n.prototype.getRectangleSmallSize=function(){return this._scrollbarSize},n.prototype.isNeeded=function(){return this._computedIsNeeded},n.prototype.getSliderSize=function(){return this._computedSliderSize},n.prototype.getSliderPosition=function(){return this._computedSliderPosition},n.prototype.getDesiredScrollPositionFromOffset=function(e){if(!this._computedIsNeeded)return 0;var t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)},n.prototype.getDesiredScrollPositionFromDelta=function(e){if(!this._computedIsNeeded)return 0;var t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)},n}(),Kxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gxe=function(n){Kxe(e,n);function e(t,r,i){var o=n.call(this,{lazyRender:r.lazyRender,host:i,scrollbarState:new dZ(r.horizontalHasArrows?r.arrowSize:0,r.horizontal===2?0:r.horizontalScrollbarSize,r.vertical===2?0:r.verticalScrollbarSize),visibility:r.horizontal,extraScrollbarClassName:"horizontal",scrollable:t})||this;if(r.horizontalHasArrows){var s=(r.arrowSize-Jg)/2,a=(r.horizontalScrollbarSize-Jg)/2;o._createArrow({className:"left-arrow",top:a,left:s,bottom:void 0,right:void 0,bgWidth:r.arrowSize,bgHeight:r.horizontalScrollbarSize,onActivate:function(){return o._host.onMouseWheel(new jg(null,1,0))}}),o._createArrow({className:"right-arrow",top:a,left:void 0,bottom:void 0,right:s,bgWidth:r.arrowSize,bgHeight:r.horizontalScrollbarSize,onActivate:function(){return o._host.onMouseWheel(new jg(null,-1,0))}})}return o._createSlider(Math.floor((r.horizontalScrollbarSize-r.horizontalSliderSize)/2),0,void 0,r.horizontalSliderSize),o}return e.prototype._updateSlider=function(t,r){this.slider.setWidth(t),this.slider.setLeft(r)},e.prototype._renderDomNode=function(t,r){this.domNode.setWidth(t),this.domNode.setHeight(r),this.domNode.setLeft(0),this.domNode.setBottom(0)},e.prototype.onDidScroll=function(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender},e.prototype._mouseDownRelativePosition=function(t,r){return t},e.prototype._sliderMousePosition=function(t){return t.posx},e.prototype._sliderOrthogonalMousePosition=function(t){return t.posy},e.prototype.writeScrollPosition=function(t,r){t.scrollLeft=r},e}(hZ),Yxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zxe=function(n){Yxe(e,n);function e(t,r,i){var o=n.call(this,{lazyRender:r.lazyRender,host:i,scrollbarState:new dZ(r.verticalHasArrows?r.arrowSize:0,r.vertical===2?0:r.verticalScrollbarSize,0),visibility:r.vertical,extraScrollbarClassName:"vertical",scrollable:t})||this;if(r.verticalHasArrows){var s=(r.arrowSize-Jg)/2,a=(r.verticalScrollbarSize-Jg)/2;o._createArrow({className:"up-arrow",top:s,left:a,bottom:void 0,right:void 0,bgWidth:r.verticalScrollbarSize,bgHeight:r.arrowSize,onActivate:function(){return o._host.onMouseWheel(new jg(null,0,1))}}),o._createArrow({className:"down-arrow",top:void 0,left:a,bottom:s,right:void 0,bgWidth:r.verticalScrollbarSize,bgHeight:r.arrowSize,onActivate:function(){return o._host.onMouseWheel(new jg(null,0,-1))}})}return o._createSlider(0,Math.floor((r.verticalScrollbarSize-r.verticalSliderSize)/2),r.verticalSliderSize,void 0),o}return e.prototype._updateSlider=function(t,r){this.slider.setHeight(t),this.slider.setTop(r)},e.prototype._renderDomNode=function(t,r){this.domNode.setWidth(r),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)},e.prototype.onDidScroll=function(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender},e.prototype._mouseDownRelativePosition=function(t,r){return r},e.prototype._sliderMousePosition=function(t){return t.posy},e.prototype._sliderOrthogonalMousePosition=function(t){return t.posx},e.prototype.writeScrollPosition=function(t,r){t.scrollTop=r},e}(hZ),Xxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qxe=function(){function n(e,t,r,i,o,s){e=e|0,t=t|0,r=r|0,i=i|0,o=o|0,s=s|0,e<0&&(e=0),r+e>t&&(r=t-e),r<0&&(r=0),i<0&&(i=0),s+i>o&&(s=o-i),s<0&&(s=0),this.width=e,this.scrollWidth=t,this.scrollLeft=r,this.height=i,this.scrollHeight=o,this.scrollTop=s}return n.prototype.equals=function(e){return this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop},n.prototype.withScrollDimensions=function(e){return new n(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,this.scrollTop)},n.prototype.withScrollPosition=function(e){return new n(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.scrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.scrollTop)},n.prototype.createScrollEvent=function(e){var t=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,i=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,s=this.scrollHeight!==e.scrollHeight,a=this.scrollTop!==e.scrollTop;return{width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:t,scrollWidthChanged:r,scrollLeftChanged:i,heightChanged:o,scrollHeightChanged:s,scrollTopChanged:a}},n}(),pZ=function(n){Xxe(e,n);function e(t,r){var i=n.call(this)||this;return i._onScroll=i._register(new j),i.onScroll=i._onScroll.event,i._smoothScrollDuration=t,i._scheduleAtNextAnimationFrame=r,i._state=new Qxe(0,0,0,0,0,0),i._smoothScrolling=null,i}return e.prototype.dispose=function(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),n.prototype.dispose.call(this)},e.prototype.setSmoothScrollDuration=function(t){this._smoothScrollDuration=t},e.prototype.validateScrollPosition=function(t){return this._state.withScrollPosition(t)},e.prototype.getScrollDimensions=function(){return this._state},e.prototype.setScrollDimensions=function(t){var r=this._state.withScrollDimensions(t);this._setState(r),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)},e.prototype.getFutureScrollPosition=function(){return this._smoothScrolling?this._smoothScrolling.to:this._state},e.prototype.getCurrentScrollPosition=function(){return this._state},e.prototype.setScrollPositionNow=function(t){var r=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(r)},e.prototype.setScrollPositionSmooth=function(t){var r=this;if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:typeof t.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:typeof t.scrollTop>"u"?this._smoothScrolling.to.scrollTop:t.scrollTop};var i=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;var o=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration);this._smoothScrolling.dispose(),this._smoothScrolling=o}else{var i=this._state.withScrollPosition(t);this._smoothScrolling=eDe.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(function(){r._smoothScrolling&&(r._smoothScrolling.animationFrameDisposable=null,r._performSmoothScrolling())})},e.prototype._performSmoothScrolling=function(){var t=this;if(this._smoothScrolling){var r=this._smoothScrolling.tick(),i=this._state.withScrollPosition(r);if(this._setState(i),r.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(function(){t._smoothScrolling&&(t._smoothScrolling.animationFrameDisposable=null,t._performSmoothScrolling())})}},e.prototype._setState=function(t){var r=this._state;r.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(r)))},e}(te),SU=function(){function n(e,t,r){this.scrollLeft=e,this.scrollTop=t,this.isDone=r}return n}();function TT(n,e){var t=e-n;return function(r){return n+t*nDe(r)}}function Jxe(n,e,t){return function(r){return r<t?n(r/t):e((r-t)/(1-t))}}var eDe=function(){function n(e,t,r,i){this.from=e,this.to=t,this.duration=i,this._startTime=r,this.animationFrameDisposable=null,this._initAnimations()}return n.prototype._initAnimations=function(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)},n.prototype._initAnimation=function(e,t,r){var i=Math.abs(e-t);if(i>2.5*r){var o=void 0,s=void 0;return e<t?(o=e+.75*r,s=t-.75*r):(o=e-.75*r,s=t+.75*r),Jxe(TT(e,o),TT(s,t),.33)}return TT(e,t)},n.prototype.dispose=function(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)},n.prototype.acceptScrollDimensions=function(e){this.to=e.withScrollPosition(this.to),this._initAnimations()},n.prototype.tick=function(){return this._tick(Date.now())},n.prototype._tick=function(e){var t=(e-this._startTime)/this.duration;if(t<1){var r=this.scrollLeft(t),i=this.scrollTop(t);return new SU(r,i,!1)}return new SU(this.to.scrollLeft,this.to.scrollTop,!0)},n.prototype.combine=function(e,t,r){return n.start(e,t,r)},n.start=function(e,t,r){r=r+10;var i=Date.now()-10;return new n(e,t,i,r)},n}();function tDe(n){return Math.pow(n,3)}function nDe(n){return 1-tDe(1-n)}var EI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rDe=500,EU=50,iDe=function(){function n(e,t,r){this.timestamp=e,this.deltaX=t,this.deltaY=r,this.score=0}return n}(),oDe=function(){function n(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}return n.prototype.isPhysicalMouseWheel=function(){if(this._front===-1&&this._rear===-1)return!1;var e=1,t=0,r=1,i=this._rear;do{var o=i===this._front?e:Math.pow(2,-r);if(e-=o,t+=this._memory[i].score*o,i===this._front)break;i=(this._capacity+i-1)%this._capacity,r++}while(!0);return t<=.5},n.prototype.accept=function(e,t,r){var i=new iDe(e,t,r);i.score=this._computeScore(i),this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)},n.prototype._computeScore=function(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;var t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(Math.abs(e.deltaX-Math.round(e.deltaX))>0||Math.abs(e.deltaY-Math.round(e.deltaY))>0)&&(t+=.25),Math.min(Math.max(t,0),1)},n.INSTANCE=new n,n}(),gZ=function(n){EI(e,n);function e(t,r,i){var o=n.call(this)||this;o._onScroll=o._register(new j),o.onScroll=o._onScroll.event,t.style.overflow="hidden",o._options=IU(r),o._scrollable=i,o._register(o._scrollable.onScroll(function(a){o._onDidScroll(a),o._onScroll.fire(a)}));var s={onMouseWheel:function(a){return o._onMouseWheel(a)},onDragStart:function(){return o._onDragStart()},onDragEnd:function(){return o._onDragEnd()}};return o._verticalScrollbar=o._register(new Zxe(o._scrollable,o._options,s)),o._horizontalScrollbar=o._register(new Gxe(o._scrollable,o._options,s)),o._domNode=document.createElement("div"),o._domNode.className="monaco-scrollable-element "+o._options.className,o._domNode.setAttribute("role","presentation"),o._domNode.style.position="relative",o._domNode.style.overflow="hidden",o._domNode.appendChild(t),o._domNode.appendChild(o._horizontalScrollbar.domNode.domNode),o._domNode.appendChild(o._verticalScrollbar.domNode.domNode),o._options.useShadows?(o._leftShadowDomNode=st(document.createElement("div")),o._leftShadowDomNode.setClassName("shadow"),o._domNode.appendChild(o._leftShadowDomNode.domNode),o._topShadowDomNode=st(document.createElement("div")),o._topShadowDomNode.setClassName("shadow"),o._domNode.appendChild(o._topShadowDomNode.domNode),o._topLeftShadowDomNode=st(document.createElement("div")),o._topLeftShadowDomNode.setClassName("shadow top-left-corner"),o._domNode.appendChild(o._topLeftShadowDomNode.domNode)):(o._leftShadowDomNode=null,o._topShadowDomNode=null,o._topLeftShadowDomNode=null),o._listenOnDomNode=o._options.listenOnDomNode||o._domNode,o._mouseWheelToDispose=[],o._setListeningToMouseWheel(o._options.handleMouseWheel),o.onmouseover(o._listenOnDomNode,function(a){return o._onMouseOver(a)}),o.onnonbubblingmouseout(o._listenOnDomNode,function(a){return o._onMouseOut(a)}),o._hideTimeout=o._register(new Ho),o._isDragging=!1,o._mouseIsOver=!1,o._shouldRender=!0,o._revealOnScroll=!0,o}return e.prototype.dispose=function(){this._mouseWheelToDispose=Ue(this._mouseWheelToDispose),n.prototype.dispose.call(this)},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getOverviewRulerLayoutInfo=function(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}},e.prototype.delegateVerticalScrollbarMouseDown=function(t){this._verticalScrollbar.delegateMouseDown(t)},e.prototype.getScrollDimensions=function(){return this._scrollable.getScrollDimensions()},e.prototype.setScrollDimensions=function(t){this._scrollable.setScrollDimensions(t)},e.prototype.updateClassName=function(t){this._options.className=t,ct&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className},e.prototype.updateOptions=function(t){var r=IU(t);this._options.handleMouseWheel=r.handleMouseWheel,this._options.mouseWheelScrollSensitivity=r.mouseWheelScrollSensitivity,this._options.fastScrollSensitivity=r.fastScrollSensitivity,this._setListeningToMouseWheel(this._options.handleMouseWheel),this._options.lazyRender||this._render()},e.prototype._setListeningToMouseWheel=function(t){var r=this,i=this._mouseWheelToDispose.length>0;if(i!==t&&(this._mouseWheelToDispose=Ue(this._mouseWheelToDispose),t)){var o=function(s){r._onMouseWheel(new jg(s))};this._mouseWheelToDispose.push(ie(this._listenOnDomNode,uu?"mousewheel":"wheel",o))}},e.prototype._onMouseWheel=function(t){var r,i=oDe.INSTANCE;if(i.accept(Date.now(),t.deltaX,t.deltaY),t.deltaY||t.deltaX){var o=t.deltaY*this._options.mouseWheelScrollSensitivity,s=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.flipAxes&&(r=[s,o],o=r[0],s=r[1]);var a=!ct&&t.browserEvent&&t.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=o,o=0),t.browserEvent&&t.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);var u=this._scrollable.getFutureScrollPosition(),l={};if(o){var f=u.scrollTop-EU*o;this._verticalScrollbar.writeScrollPosition(l,f)}if(s){var h=u.scrollLeft-EU*s;this._horizontalScrollbar.writeScrollPosition(l,h)}if(l=this._scrollable.validateScrollPosition(l),u.scrollLeft!==l.scrollLeft||u.scrollTop!==l.scrollTop){var d=this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel();d?this._scrollable.setScrollPositionSmooth(l):this._scrollable.setScrollPositionNow(l),this._shouldRender=!0}}(this._options.alwaysConsumeMouseWheel||this._shouldRender)&&(t.preventDefault(),t.stopPropagation())},e.prototype._onDidScroll=function(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()},e.prototype.renderNow=function(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()},e.prototype._render=function(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){var t=this._scrollable.getCurrentScrollPosition(),r=t.scrollTop>0,i=t.scrollLeft>0;this._leftShadowDomNode.setClassName("shadow"+(i?" left":"")),this._topShadowDomNode.setClassName("shadow"+(r?" top":"")),this._topLeftShadowDomNode.setClassName("shadow top-left-corner"+(r?" top":"")+(i?" left":""))}},e.prototype._onDragStart=function(){this._isDragging=!0,this._reveal()},e.prototype._onDragEnd=function(){this._isDragging=!1,this._hide()},e.prototype._onMouseOut=function(t){this._mouseIsOver=!1,this._hide()},e.prototype._onMouseOver=function(t){this._mouseIsOver=!0,this._reveal()},e.prototype._reveal=function(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()},e.prototype._hide=function(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())},e.prototype._scheduleHide=function(){var t=this;!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(function(){return t._hide()},rDe)},e}(bo),Y0=function(n){EI(e,n);function e(t,r){var i=this;r=r||{},r.mouseWheelSmoothScroll=!1;var o=new pZ(0,function(s){return ef(s)});return i=n.call(this,t,r,o)||this,i._register(o),i}return e.prototype.setScrollPosition=function(t){this._scrollable.setScrollPositionNow(t)},e.prototype.getScrollPosition=function(){return this._scrollable.getCurrentScrollPosition()},e}(gZ),sDe=function(n){EI(e,n);function e(t,r,i){return n.call(this,t,r,i)||this}return e}(gZ),Z0=function(n){EI(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i._element=t,i.onScroll(function(o){o.scrollTopChanged&&(i._element.scrollTop=o.scrollTop),o.scrollLeftChanged&&(i._element.scrollLeft=o.scrollLeft)}),i.scanDomNode(),i}return e.prototype.scanDomNode=function(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})},e}(Y0);function IU(n){var e={lazyRender:typeof n.lazyRender<"u"?n.lazyRender:!1,className:typeof n.className<"u"?n.className:"",useShadows:typeof n.useShadows<"u"?n.useShadows:!0,handleMouseWheel:typeof n.handleMouseWheel<"u"?n.handleMouseWheel:!0,flipAxes:typeof n.flipAxes<"u"?n.flipAxes:!1,alwaysConsumeMouseWheel:typeof n.alwaysConsumeMouseWheel<"u"?n.alwaysConsumeMouseWheel:!1,scrollYToX:typeof n.scrollYToX<"u"?n.scrollYToX:!1,mouseWheelScrollSensitivity:typeof n.mouseWheelScrollSensitivity<"u"?n.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof n.fastScrollSensitivity<"u"?n.fastScrollSensitivity:5,mouseWheelSmoothScroll:typeof n.mouseWheelSmoothScroll<"u"?n.mouseWheelSmoothScroll:!0,arrowSize:typeof n.arrowSize<"u"?n.arrowSize:11,listenOnDomNode:typeof n.listenOnDomNode<"u"?n.listenOnDomNode:null,horizontal:typeof n.horizontal<"u"?n.horizontal:1,horizontalScrollbarSize:typeof n.horizontalScrollbarSize<"u"?n.horizontalScrollbarSize:10,horizontalSliderSize:typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:0,horizontalHasArrows:typeof n.horizontalHasArrows<"u"?n.horizontalHasArrows:!1,vertical:typeof n.vertical<"u"?n.vertical:1,verticalScrollbarSize:typeof n.verticalScrollbarSize<"u"?n.verticalScrollbarSize:10,verticalHasArrows:typeof n.verticalHasArrows<"u"?n.verticalHasArrows:!1,verticalSliderSize:typeof n.verticalSliderSize<"u"?n.verticalSliderSize:0};return e.horizontalSliderSize=typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof n.verticalSliderSize<"u"?n.verticalSliderSize:e.verticalScrollbarSize,ct&&(e.className+=" mac"),e}var aDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uDe=function(n){aDe(e,n);function e(t,r,i,o){var s=n.call(this,t)||this,a=s._context.configuration.editor,u=a.viewInfo.scrollbar,l={listenOnDomNode:i.domNode,className:"editor-scrollable "+aS(t.theme.type),useShadows:!1,lazyRender:!0,vertical:u.vertical,horizontal:u.horizontal,verticalHasArrows:u.verticalHasArrows,horizontalHasArrows:u.horizontalHasArrows,verticalScrollbarSize:u.verticalScrollbarSize,verticalSliderSize:u.verticalSliderSize,horizontalScrollbarSize:u.horizontalScrollbarSize,horizontalSliderSize:u.horizontalSliderSize,handleMouseWheel:u.handleMouseWheel,arrowSize:u.arrowSize,mouseWheelScrollSensitivity:u.mouseWheelScrollSensitivity,fastScrollSensitivity:u.fastScrollSensitivity};s.scrollbar=s._register(new sDe(r.domNode,l,s._context.viewLayout.scrollable)),Eu.write(s.scrollbar.getDomNode(),5),s.scrollbarDomNode=st(s.scrollbar.getDomNode()),s.scrollbarDomNode.setPosition("absolute"),s._setLayout();var f=function(h,d,g){var v={};{var m=h.scrollTop;m&&(v.scrollTop=s._context.viewLayout.getCurrentScrollTop()+m,h.scrollTop=0)}if(g){var y=h.scrollLeft;y&&(v.scrollLeft=s._context.viewLayout.getCurrentScrollLeft()+y,h.scrollLeft=0)}s._context.viewLayout.setScrollPositionNow(v)};return s._register(ie(i.domNode,"scroll",function(h){return f(i.domNode,!0,!0)})),s._register(ie(r.domNode,"scroll",function(h){return f(r.domNode,!0,!1)})),s._register(ie(o.domNode,"scroll",function(h){return f(o.domNode,!0,!1)})),s._register(ie(s.scrollbarDomNode.domNode,"scroll",function(h){return f(s.scrollbarDomNode.domNode,!0,!1)})),s}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype._setLayout=function(){var t=this._context.configuration.editor.layoutInfo;this.scrollbarDomNode.setLeft(t.contentLeft);var r=this._context.configuration.editor.viewInfo.minimap.side;r==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.contentHeight)},e.prototype.getOverviewRulerLayoutInfo=function(){return this.scrollbar.getOverviewRulerLayoutInfo()},e.prototype.getDomNode=function(){return this.scrollbarDomNode},e.prototype.delegateVerticalScrollbarMouseDown=function(t){this.scrollbar.delegateVerticalScrollbarMouseDown(t)},e.prototype.onConfigurationChanged=function(t){if(t.viewInfo){var r=this._context.configuration.editor,i={handleMouseWheel:r.viewInfo.scrollbar.handleMouseWheel,mouseWheelScrollSensitivity:r.viewInfo.scrollbar.mouseWheelScrollSensitivity,fastScrollSensitivity:r.viewInfo.scrollbar.fastScrollSensitivity};this.scrollbar.updateOptions(i)}return t.layoutInfo&&this._setLayout(),!0},e.prototype.onScrollChanged=function(t){return!0},e.prototype.onThemeChanged=function(t){return this.scrollbar.updateClassName("editor-scrollable "+aS(this._context.theme.type)),!0},e.prototype.prepareRender=function(t){},e.prototype.render=function(t){this.scrollbar.renderNow()},e}(Cs),vZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),i2=function(){function n(e,t,r){this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(r)}return n}(),o2=function(n){vZ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._render=function(t,r,i){for(var o=[],s=t;s<=r;s++){var a=s-t;o[a]=[]}if(i.length===0)return o;i.sort(function(b,C){return b.className===C.className?b.startLineNumber===C.startLineNumber?b.endLineNumber-C.endLineNumber:b.startLineNumber-C.startLineNumber:b.className<C.className?-1:1});for(var u=null,l=0,f=0,h=i.length;f<h;f++){var d=i[f],g=d.className,v=Math.max(d.startLineNumber,t)-t,m=Math.min(d.endLineNumber,r)-t;u===g?(v=Math.max(l+1,v),l=Math.max(l,m)):(u=g,l=m);for(var y=v;y<=l;y++)o[y].push(u)}return o},e}(Fd),lDe=function(n){vZ(e,n);function e(t){var r=n.call(this)||this;return r._context=t,r._lineHeight=r._context.configuration.editor.lineHeight,r._glyphMargin=r._context.configuration.editor.viewInfo.glyphMargin,r._glyphMarginLeft=r._context.configuration.editor.layoutInfo.glyphMarginLeft,r._glyphMarginWidth=r._context.configuration.editor.layoutInfo.glyphMarginWidth,r._renderResult=null,r._context.addEventHandler(r),r}return e.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return t.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),t.viewInfo&&(this._glyphMargin=this._context.configuration.editor.viewInfo.glyphMargin),t.layoutInfo&&(this._glyphMarginLeft=this._context.configuration.editor.layoutInfo.glyphMarginLeft,this._glyphMarginWidth=this._context.configuration.editor.layoutInfo.glyphMarginWidth),!0},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollTopChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype._getDecorations=function(t){for(var r=t.getDecorationsInViewport(),i=[],o=0,s=0,a=r.length;s<a;s++){var u=r[s],l=u.options.glyphMarginClassName;l&&(i[o++]=new i2(u.range.startLineNumber,u.range.endLineNumber,l))}return i},e.prototype.prepareRender=function(t){if(!this._glyphMargin){this._renderResult=null;return}for(var r=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber,o=this._render(r,i,this._getDecorations(t)),s=this._lineHeight.toString(),a=this._glyphMarginLeft.toString(),u=this._glyphMarginWidth.toString(),l='" style="left:'+a+"px;width:"+u+"px;height:"+s+'px;"></div>',f=[],h=r;h<=i;h++){var d=h-r,g=o[d];g.length===0?f[d]="":f[d]='<div class="cgmr '+g.join(" ")+l}this._renderResult=f},e.prototype.render=function(t,r){if(!this._renderResult)return"";var i=r-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]},e}(o2),cDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fDe=function(n){cDe(e,n);function e(t){var r=n.call(this)||this;r._context=t,r._primaryLineNumber=0,r._lineHeight=r._context.configuration.editor.lineHeight,r._spaceWidth=r._context.configuration.editor.fontInfo.spaceWidth,r._enabled=r._context.configuration.editor.viewInfo.renderIndentGuides,r._activeIndentEnabled=r._context.configuration.editor.viewInfo.highlightActiveIndentGuide;var i=r._context.configuration.editor.wrappingInfo.wrappingColumn;return r._maxIndentLeft=i===-1?-1:i*r._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth,r._renderResult=null,r._context.addEventHandler(r),r}return e.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){if(t.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),t.fontInfo&&(this._spaceWidth=this._context.configuration.editor.fontInfo.spaceWidth),t.viewInfo&&(this._enabled=this._context.configuration.editor.viewInfo.renderIndentGuides,this._activeIndentEnabled=this._context.configuration.editor.viewInfo.highlightActiveIndentGuide),t.wrappingInfo||t.fontInfo){var r=this._context.configuration.editor.wrappingInfo.wrappingColumn;this._maxIndentLeft=r===-1?-1:r*this._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth}return!0},e.prototype.onCursorStateChanged=function(t){var r=t.selections[0],i=r.isEmpty()?r.positionLineNumber:0;return this._primaryLineNumber!==i?(this._primaryLineNumber=i,!0):!1},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollTopChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype.onLanguageConfigurationChanged=function(t){return!0},e.prototype.prepareRender=function(t){if(!this._enabled){this._renderResult=null;return}var r=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber,o=this._context.model.getOptions().indentSize,s=o*this._spaceWidth,a=t.scrollWidth,u=this._lineHeight,l=this._context.model.getLinesIndentGuides(r,i),f=0,h=0,d=0;if(this._activeIndentEnabled&&this._primaryLineNumber){var g=this._context.model.getActiveIndentGuide(this._primaryLineNumber,r,i);f=g.startLineNumber,h=g.endLineNumber,d=g.indent}for(var v=[],m=r;m<=i;m++){for(var y=f<=m&&m<=h,b=m-r,C=l[b],E="",D=t.visibleRangeForPosition(new $(m,1)),k=D?D.left:0,I=1;I<=C;I++){var T=y&&I===d?"cigra":"cigr";if(E+='<div class="'+T+'" style="left:'+k+"px;height:"+u+"px;width:"+s+'px"></div>',k+=s,k>a||this._maxIndentLeft>0&&k>this._maxIndentLeft)break}v[b]=E}this._renderResult=v},e.prototype.render=function(t,r){if(!this._renderResult)return"";var i=r-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]},e}(Fd);Xt(function(n,e){var t=n.getColor(wI);t&&e.addRule(".monaco-editor .lines-content .cigr { box-shadow: 1px 0 0 0 "+t+" inset; }");var r=n.getColor(CI)||t;r&&e.addRule(".monaco-editor .lines-content .cigra { box-shadow: 1px 0 0 0 "+r+" inset; }")});var hDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dDe=function(){function n(){this._currentVisibleRange=new R(1,1,1,1)}return n.prototype.getCurrentVisibleRange=function(){return this._currentVisibleRange},n.prototype.setCurrentVisibleRange=function(e){this._currentVisibleRange=e},n}(),pDe=function(){function n(e,t,r,i,o,s){this.lineNumber=e,this.startColumn=t,this.endColumn=r,this.startScrollTop=i,this.stopScrollTop=o,this.scrollType=s}return n}(),gDe=function(n){hDe(e,n);function e(t,r){var i=n.call(this,t)||this;i._linesContent=r,i._textRangeRestingSpot=document.createElement("div"),i._visibleLines=new cZ(i),i.domNode=i._visibleLines.domNode;var o=i._context.configuration;return i._lineHeight=o.editor.lineHeight,i._typicalHalfwidthCharacterWidth=o.editor.fontInfo.typicalHalfwidthCharacterWidth,i._isViewportWrapping=o.editor.wrappingInfo.isViewportWrapping,i._revealHorizontalRightPadding=o.editor.viewInfo.revealHorizontalRightPadding,i._scrollOff=o.editor.viewInfo.cursorSurroundingLines,i._canUseLayerHinting=o.editor.canUseLayerHinting,i._viewLineOptions=new Z8(o,i._context.theme.type),Eu.write(i.domNode,7),i.domNode.setClassName("view-lines"),_s.applyFontInfo(i.domNode,o.editor.fontInfo),i._maxLineWidth=0,i._asyncUpdateLineWidths=new hr(function(){i._updateLineWidthsSlow()},200),i._lastRenderedData=new dDe,i._horizontalRevealRequest=null,i}return e.prototype.dispose=function(){this._asyncUpdateLineWidths.dispose(),n.prototype.dispose.call(this)},e.prototype.getDomNode=function(){return this.domNode},e.prototype.createVisibleLine=function(){return new ug(this._viewLineOptions)},e.prototype.onConfigurationChanged=function(t){this._visibleLines.onConfigurationChanged(t),t.wrappingInfo&&(this._maxLineWidth=0);var r=this._context.configuration;return t.lineHeight&&(this._lineHeight=r.editor.lineHeight),t.fontInfo&&(this._typicalHalfwidthCharacterWidth=r.editor.fontInfo.typicalHalfwidthCharacterWidth),t.wrappingInfo&&(this._isViewportWrapping=r.editor.wrappingInfo.isViewportWrapping),t.viewInfo&&(this._revealHorizontalRightPadding=r.editor.viewInfo.revealHorizontalRightPadding,this._scrollOff=r.editor.viewInfo.cursorSurroundingLines),t.canUseLayerHinting&&(this._canUseLayerHinting=r.editor.canUseLayerHinting),t.fontInfo&&_s.applyFontInfo(this.domNode,r.editor.fontInfo),this._onOptionsMaybeChanged(),t.layoutInfo&&(this._maxLineWidth=0),!0},e.prototype._onOptionsMaybeChanged=function(){var t=this._context.configuration,r=new Z8(t,this._context.theme.type);if(!this._viewLineOptions.equals(r)){this._viewLineOptions=r;for(var i=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber(),s=i;s<=o;s++){var a=this._visibleLines.getVisibleLine(s);a.onOptionsChanged(this._viewLineOptions)}return!0}return!1},e.prototype.onCursorStateChanged=function(t){for(var r=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),o=!1,s=r;s<=i;s++)o=this._visibleLines.getVisibleLine(s).onSelectionChanged()||o;return o},e.prototype.onDecorationsChanged=function(t){for(var r=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),o=r;o<=i;o++)this._visibleLines.getVisibleLine(o).onDecorationsChanged();return!0},e.prototype.onFlushed=function(t){var r=this._visibleLines.onFlushed(t);return this._maxLineWidth=0,r},e.prototype.onLinesChanged=function(t){return this._visibleLines.onLinesChanged(t)},e.prototype.onLinesDeleted=function(t){return this._visibleLines.onLinesDeleted(t)},e.prototype.onLinesInserted=function(t){return this._visibleLines.onLinesInserted(t)},e.prototype.onRevealRangeRequest=function(t){var r=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),t.range,t.verticalType),i=this._context.viewLayout.validateScrollPosition({scrollTop:r});t.revealHorizontal?t.range.startLineNumber!==t.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:this._horizontalRevealRequest=new pDe(t.range.startLineNumber,t.range.startColumn,t.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,t.scrollType):this._horizontalRevealRequest=null;var o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop);return t.scrollType===0&&o>this._lineHeight?this._context.viewLayout.setScrollPositionSmooth(i):this._context.viewLayout.setScrollPositionNow(i),!0},e.prototype.onScrollChanged=function(t){if(this._horizontalRevealRequest&&t.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&t.scrollTopChanged){var r=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(t.scrollTop<r||t.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(t.scrollWidth),this._visibleLines.onScrollChanged(t)||!0},e.prototype.onTokensChanged=function(t){return this._visibleLines.onTokensChanged(t)},e.prototype.onZonesChanged=function(t){return this._context.viewLayout.onMaxLineWidthChanged(this._maxLineWidth),this._visibleLines.onZonesChanged(t)},e.prototype.onThemeChanged=function(t){return this._onOptionsMaybeChanged()},e.prototype.getPositionFromDOMInfo=function(t,r){var i=this._getViewLineDomNode(t);if(i===null)return null;var o=this._getLineNumberFor(i);if(o===-1||o<1||o>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(o)===1)return new $(o,1);var s=this._visibleLines.getStartLineNumber(),a=this._visibleLines.getEndLineNumber();if(o<s||o>a)return null;var u=this._visibleLines.getVisibleLine(o).getColumnOfNodeOffset(o,t,r),l=this._context.model.getLineMinColumn(o);return u<l&&(u=l),new $(o,u)},e.prototype._getViewLineDomNode=function(t){for(;t&&t.nodeType===1;){if(t.className===ug.CLASS_NAME)return t;t=t.parentElement}return null},e.prototype._getLineNumberFor=function(t){for(var r=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),o=r;o<=i;o++){var s=this._visibleLines.getVisibleLine(o);if(t===s.getDomNode())return o}return-1},e.prototype.getLineWidth=function(t){var r=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();return t<r||t>i?-1:this._visibleLines.getVisibleLine(t).getWidth()},e.prototype.linesVisibleRangesForRange=function(t,r){if(this.shouldRender())return null;var i=t.endLineNumber,o=R.intersectRanges(t,this._lastRenderedData.getCurrentVisibleRange());if(!o)return null;var s=[],a=0,u=new Y8(this.domNode.domNode,this._textRangeRestingSpot),l=0;r&&(l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new $(o.startLineNumber,1)).lineNumber);for(var f=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber(),d=o.startLineNumber;d<=o.endLineNumber;d++)if(!(d<f||d>h)){var g=d===o.startLineNumber?o.startColumn:1,v=d===o.endLineNumber?o.endColumn:this._context.model.getLineMaxColumn(d),m=this._visibleLines.getVisibleLine(d).getVisibleRangesForRange(g,v,u);if(!(!m||m.length===0)){if(r&&d<i){var y=l;l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new $(d+1,1)).lineNumber,y!==l&&(m[m.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[a++]=new TSe(d,m)}}return a===0?null:s},e.prototype.visibleRangesForRange2=function(t){if(this.shouldRender())return null;var r=R.intersectRanges(t,this._lastRenderedData.getCurrentVisibleRange());if(!r)return null;for(var i=[],o=new Y8(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getStartLineNumber(),a=this._visibleLines.getEndLineNumber(),u=r.startLineNumber;u<=r.endLineNumber;u++)if(!(u<s||u>a)){var l=u===r.startLineNumber?r.startColumn:1,f=u===r.endLineNumber?r.endColumn:this._context.model.getLineMaxColumn(u),h=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(l,f,o);!h||h.length===0||(i=i.concat(h))}return i.length===0?null:i},e.prototype.visibleRangeForPosition=function(t){var r=this.visibleRangesForRange2(new R(t.lineNumber,t.column,t.lineNumber,t.column));return r?r[0]:null},e.prototype.updateLineWidths=function(){this._updateLineWidths(!1)},e.prototype._updateLineWidthsFast=function(){return this._updateLineWidths(!0)},e.prototype._updateLineWidthsSlow=function(){this._updateLineWidths(!1)},e.prototype._updateLineWidths=function(t){for(var r=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),o=1,s=!0,a=r;a<=i;a++){var u=this._visibleLines.getVisibleLine(a);if(t&&!u.getWidthIsFast()){s=!1;continue}o=Math.max(o,u.getWidth())}return s&&r===1&&i===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(o),s},e.prototype.prepareRender=function(){throw new Error("Not supported")},e.prototype.render=function(){throw new Error("Not supported")},e.prototype.renderText=function(t){if(this._visibleLines.renderLines(t),this._lastRenderedData.setCurrentVisibleRange(t.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){var r=this._horizontalRevealRequest.lineNumber,i=this._horizontalRevealRequest.startColumn,o=this._horizontalRevealRequest.endColumn,s=this._horizontalRevealRequest.scrollType;if(t.startLineNumber<=r&&r<=t.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();var a=this._computeScrollLeftToRevealRange(r,i,o),u=this._isViewportWrapping;u||this._ensureMaxLineWidth(a.maxHorizontalOffset),s===0?this._context.viewLayout.setScrollPositionSmooth({scrollLeft:a.scrollLeft}):this._context.viewLayout.setScrollPositionNow({scrollLeft:a.scrollLeft})}}this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),this._linesContent.setLayerHinting(this._canUseLayerHinting);var l=this._context.viewLayout.getCurrentScrollTop()-t.bigNumbersDelta;this._linesContent.setTop(-l),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())},e.prototype._ensureMaxLineWidth=function(t){var r=Math.ceil(t);this._maxLineWidth<r&&(this._maxLineWidth=r,this._context.viewLayout.onMaxLineWidthChanged(this._maxLineWidth))},e.prototype._computeScrollTopToRevealRange=function(t,r,i){var o=t.top,s=t.height,a=o+s,u,l;u=this._context.viewLayout.getVerticalOffsetForLineNumber(r.startLineNumber),l=this._context.viewLayout.getVerticalOffsetForLineNumber(r.endLineNumber)+this._lineHeight;var f=Math.min(s/this._lineHeight/2,this._scrollOff);u-=f*this._lineHeight,l+=Math.max(0,f-1)*this._lineHeight,(i===0||i===4)&&(l+=this._lineHeight);var h;if(i===1||i===2)if(i===2&&o<=u&&l<=a)h=o;else{var d=(u+l)/2;h=Math.max(0,d-s/2)}else h=this._computeMinimumScrolling(o,a,u,l,i===3,i===4);return h},e.prototype._computeScrollLeftToRevealRange=function(t,r,i){var o=0,s=this._context.viewLayout.getCurrentViewport(),a=s.left,u=a+s.width,l=this.visibleRangesForRange2(new R(t,r,t,i)),f=Number.MAX_VALUE,h=0;if(!l)return{scrollLeft:a,maxHorizontalOffset:o};for(var d=0,g=l;d<g.length;d++){var v=g[d];v.left<f&&(f=v.left),v.left+v.width>h&&(h=v.left+v.width)}o=h,f=Math.max(0,f-e.HORIZONTAL_EXTRA_PX),h+=this._revealHorizontalRightPadding;var m=this._computeMinimumScrolling(a,u,f,h);return{scrollLeft:m,maxHorizontalOffset:o}},e.prototype._computeMinimumScrolling=function(t,r,i,o,s,a){t=t|0,r=r|0,i=i|0,o=o|0,s=!!s,a=!!a;var u=r-t,l=o-i;if(l<u){if(s)return i;if(a)return Math.max(0,o-u);if(i<t)return i;if(o>r)return Math.max(0,o-u)}else return i;return t},e.HORIZONTAL_EXTRA_PX=30,e}(Cs),vDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mDe=function(n){vDe(e,n);function e(t){var r=n.call(this)||this;return r._context=t,r._decorationsLeft=r._context.configuration.editor.layoutInfo.decorationsLeft,r._decorationsWidth=r._context.configuration.editor.layoutInfo.decorationsWidth,r._renderResult=null,r._context.addEventHandler(r),r}return e.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return t.layoutInfo&&(this._decorationsLeft=this._context.configuration.editor.layoutInfo.decorationsLeft,this._decorationsWidth=this._context.configuration.editor.layoutInfo.decorationsWidth),!0},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollTopChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype._getDecorations=function(t){for(var r=t.getDecorationsInViewport(),i=[],o=0,s=0,a=r.length;s<a;s++){var u=r[s],l=u.options.linesDecorationsClassName;l&&(i[o++]=new i2(u.range.startLineNumber,u.range.endLineNumber,l))}return i},e.prototype.prepareRender=function(t){for(var r=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber,o=this._render(r,i,this._getDecorations(t)),s=this._decorationsLeft.toString(),a=this._decorationsWidth.toString(),u='" style="left:'+s+"px;width:"+a+'px;"></div>',l=[],f=r;f<=i;f++){for(var h=f-r,d=o[h],g="",v=0,m=d.length;v<m;v++)g+='<div class="cldr '+d[v]+u;l[h]=g}this._renderResult=l},e.prototype.render=function(t,r){return this._renderResult?this._renderResult[r-t]:""},e}(o2),_De=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yDe=function(n){_De(e,n);function e(t){var r=n.call(this)||this;return r._context=t,r._renderResult=null,r._context.addEventHandler(r),r}return e.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return!0},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollTopChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype._getDecorations=function(t){for(var r=t.getDecorationsInViewport(),i=[],o=0,s=0,a=r.length;s<a;s++){var u=r[s],l=u.options.marginClassName;l&&(i[o++]=new i2(u.range.startLineNumber,u.range.endLineNumber,l))}return i},e.prototype.prepareRender=function(t){for(var r=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber,o=this._render(r,i,this._getDecorations(t)),s=[],a=r;a<=i;a++){for(var u=a-r,l=o[u],f="",h=0,d=l.length;h<d;h++)f+='<div class="cmdr '+l[h]+'" style=""></div>';s[u]=f}this._renderResult=s},e.prototype.render=function(t,r){return this._renderResult?this._renderResult[r-t]:""},e}(o2),NT=function(){function n(e,t,r,i){this.r=n._clamp(e),this.g=n._clamp(t),this.b=n._clamp(r),this.a=n._clamp(i)}return n._clamp=function(e){return e<0?0:e>255?255:e|0},n.Empty=new n(0,0,0,0),n}(),mZ=function(){function n(){var e=this;this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._updateColorMap(),mn.onDidChange(function(t){t.changedColorMap&&e._updateColorMap()})}return n.getInstance=function(){return this._INSTANCE||(this._INSTANCE=new n),this._INSTANCE},n.prototype._updateColorMap=function(){var e=mn.getColorMap();if(!e){this._colors=[NT.Empty],this._backgroundIsLight=!0;return}this._colors=[NT.Empty];for(var t=1;t<e.length;t++){var r=e[t].rgba;this._colors[t]=new NT(r.r,r.g,r.b,Math.round(r.a*255))}var i=e[2].getRelativeLuminance();this._backgroundIsLight=i>=.5,this._onDidChange.fire(void 0)},n.prototype.getColor=function(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]},n.prototype.backgroundIsLight=function(){return this._backgroundIsLight},n._INSTANCE=null,n}(),bDe=function(){function n(e,t){var r=760;if(e.length!==r)throw new Error("Invalid x2CharData");var i=2*1*95;if(t.length!==i)throw new Error("Invalid x1CharData");this.x2charData=e,this.x1charData=t,this.x2charDataLight=n.soften(e,12/15),this.x1charDataLight=n.soften(t,50/60)}return n.soften=function(e,t){for(var r=new Uint8ClampedArray(e.length),i=0,o=e.length;i<o;i++)r[i]=e[i]*t;return r},n._getChIndex=function(e){return e-=32,e<0&&(e+=95),e%95},n.prototype.x2RenderChar=function(e,t,r,i,o,s,a){if(t+2>e.width||r+4>e.height){console.warn("bad render request outside image data");return}var u=a?this.x2charDataLight:this.x2charData,l=n._getChIndex(i),f=e.width*4,h=s.r,d=s.g,g=s.b,v=o.r-h,m=o.g-d,y=o.b-g,b=e.data,C=l*4*2,E=r*f+t*4;{var D=u[C]/255;b[E+0]=h+v*D,b[E+1]=d+m*D,b[E+2]=g+y*D}{var D=u[C+1]/255;b[E+4]=h+v*D,b[E+5]=d+m*D,b[E+6]=g+y*D}E+=f;{var D=u[C+2]/255;b[E+0]=h+v*D,b[E+1]=d+m*D,b[E+2]=g+y*D}{var D=u[C+3]/255;b[E+4]=h+v*D,b[E+5]=d+m*D,b[E+6]=g+y*D}E+=f;{var D=u[C+4]/255;b[E+0]=h+v*D,b[E+1]=d+m*D,b[E+2]=g+y*D}{var D=u[C+5]/255;b[E+4]=h+v*D,b[E+5]=d+m*D,b[E+6]=g+y*D}E+=f;{var D=u[C+6]/255;b[E+0]=h+v*D,b[E+1]=d+m*D,b[E+2]=g+y*D}{var D=u[C+7]/255;b[E+4]=h+v*D,b[E+5]=d+m*D,b[E+6]=g+y*D}},n.prototype.x1RenderChar=function(e,t,r,i,o,s,a){if(t+1>e.width||r+2>e.height){console.warn("bad render request outside image data");return}var u=a?this.x1charDataLight:this.x1charData,l=n._getChIndex(i),f=e.width*4,h=s.r,d=s.g,g=s.b,v=o.r-h,m=o.g-d,y=o.b-g,b=e.data,C=l*2*1,E=r*f+t*4;{var D=u[C]/255;b[E+0]=h+v*D,b[E+1]=d+m*D,b[E+2]=g+y*D}E+=f;{var D=u[C+1]/255;b[E+0]=h+v*D,b[E+1]=d+m*D,b[E+2]=g+y*D}},n.prototype.x2BlockRenderChar=function(e,t,r,i,o,s){if(t+2>e.width||r+4>e.height){console.warn("bad render request outside image data");return}var a=e.width*4,u=.5,l=o.r,f=o.g,h=o.b,d=i.r-l,g=i.g-f,v=i.b-h,m=l+d*u,y=f+g*u,b=h+v*u,C=e.data,E=r*a+t*4;C[E+0]=m,C[E+1]=y,C[E+2]=b,C[E+4]=m,C[E+5]=y,C[E+6]=b,E+=a,C[E+0]=m,C[E+1]=y,C[E+2]=b,C[E+4]=m,C[E+5]=y,C[E+6]=b,E+=a,C[E+0]=m,C[E+1]=y,C[E+2]=b,C[E+4]=m,C[E+5]=y,C[E+6]=b,E+=a,C[E+0]=m,C[E+1]=y,C[E+2]=b,C[E+4]=m,C[E+5]=y,C[E+6]=b},n.prototype.x1BlockRenderChar=function(e,t,r,i,o,s){if(t+1>e.width||r+2>e.height){console.warn("bad render request outside image data");return}var a=e.width*4,u=.5,l=o.r,f=o.g,h=o.b,d=i.r-l,g=i.g-f,v=i.b-h,m=l+d*u,y=f+g*u,b=h+v*u,C=e.data,E=r*a+t*4;C[E+0]=m,C[E+1]=y,C[E+2]=b,E+=a,C[E+0]=m,C[E+1]=y,C[E+2]=b},n}();function xU(n){for(var e=new Uint8ClampedArray(n.length),t=0,r=n.length;t<r;t++)e[t]=n[t];return e}var AT=null;function wDe(){if(!AT){var n=xU(LU);LU=null;var e=xU(DU);DU=null,AT=new bDe(e,n)}return AT}var DU=[0,0,0,0,0,0,0,0,39,14,39,14,14,5,29,10,96,96,29,29,0,0,0,0,49,113,195,214,227,166,135,42,40,29,194,38,75,148,197,187,145,0,160,61,75,143,2,183,138,58,163,6,177,223,197,227,38,13,11,4,0,0,0,0,10,54,52,8,62,4,71,122,73,2,19,40,10,50,155,36,79,70,145,121,7,5,0,0,2,1,36,12,204,166,16,5,0,0,0,0,1,0,154,34,0,0,0,0,96,83,0,0,0,0,0,0,0,0,46,34,0,82,2,56,53,3,146,0,146,119,152,132,152,131,145,119,170,42,15,42,15,42,172,194,131,132,0,139,80,28,227,143,159,135,15,118,11,126,171,144,20,124,88,106,217,196,0,106,189,92,168,43,5,130,164,133,130,115,183,65,134,120,141,141,170,196,2,106,31,32,105,2,145,130,116,114,132,135,138,140,138,113,147,137,81,183,129,94,0,0,21,16,4,3,46,34,0,0,45,34,1,0,160,49,0,0,43,143,203,23,1,76,0,0,38,28,131,96,38,28,0,0,168,31,29,191,98,0,118,139,5,113,45,13,37,6,97,115,161,179,204,105,223,224,83,52,111,100,184,186,120,132,212,145,180,139,174,161,212,182,104,162,131,0,131,0,104,161,219,120,110,116,110,116,219,120,207,154,163,40,147,22,207,154,202,159,161,47,145,23,111,0,139,154,144,30,144,135,139,187,110,110,168,161,150,145,110,110,185,162,43,16,43,16,185,162,73,129,0,110,0,110,191,87,149,149,236,48,195,91,146,149,146,0,146,0,146,0,187,173,200,201,222,215,172,147,95,95,193,97,224,129,159,206,97,192,155,139,153,115,153,115,156,140,189,158,123,136,190,64,111,0,155,139,153,115,153,114,156,241,197,148,150,152,170,116,110,157,156,128,169,14,13,159,158,149,212,189,43,16,43,16,43,16,148,110,148,110,147,109,182,151,133,121,106,118,114,103,89,66,94,94,211,188,205,207,139,168,151,152,87,76,101,79,151,152,130,156,125,116,47,29,43,16,169,228,11,103,120,6,230,176,55,49,55,6,55,6,193,102,92,0,71,0,13,30,0,147,63,43,12,43,12,43,142,152,71,53,61,61,0,0,0,0,0,0,0,0,0,0,158,146,25,2,0,0,0,0,0,0,0,0,107,130,170,194,176,188,109,0,203,159,113,111,202,158,0,0,135,135,114,0,136,135,0,109,187,190,148,126,177,187,0,0,149,130,218,105,169,135,37,113,146,113,49,13,49,13,0,0,178,195,147,114,255,255,109,0,193,149,110,109,109,109,12,15,125,41,33,41,144,188,1,6,75,53,10,53,210,161,110,0,152,148,210,60,110,156,213,5,63,5,63,5,45,111,0,0,232,172,190,168,190,169,0,0,190,144,109,109,109,109,0,0,168,140,148,111,168,140,0,0,200,151,113,110,255,158,0,0,184,188,147,139,186,255,0,0,122,130,111,0,109,0,0,0,132,69,109,93,110,136,51,5,205,103,61,6,47,106,0,0,110,109,110,122,155,179,0,0,132,120,113,114,84,63,0,0,124,108,202,189,160,174,0,0,144,142,79,57,159,146,0,0,138,138,119,117,255,69,0,0,97,198,47,38,208,84,23,112,41,14,157,7,121,192,35,11,35,11,35,11,160,61,129,9,40,19,20,139,236,44,0,0,15,3,97,93,0,0],LU=[0,0,23,12,53,0,130,127,58,149,67,77,72,198,13,0,25,51,25,49,94,2,8,64,0,24,0,21,0,9,19,27,126,126,51,80,72,105,87,98,73,93,106,85,111,123,87,30,116,126,123,110,4,16,9,28,21,53,8,62,23,52,73,21,132,183,78,142,168,175,70,70,128,128,123,110,125,43,100,139,125,119,78,78,54,77,139,139,33,87,201,117,162,149,130,130,138,60,130,172,149,127,95,98,95,25,118,135,110,85,147,175,105,110,121,30,101,113,34,68,20,26,34,68,56,0,0,44,3,0,27,175,80,133,31,66,85,147,32,150,90,25,45,230,77,101,36,83,22,84,71,118,44,44,52,172,38,101,35,130,40,197,43,197,29,26,23,103,67,44,25,129,29,85,27,177,33,97,32,145,33,77,38,96,20,55,36,95,2,22],CDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function n1(n){return n===2?4:n===4?6:n===1?2:3}function OT(n){return n===2||n===4?2:1}var SDe=140,kU=function(){function n(e){var t=e.editor.pixelRatio,r=e.editor.layoutInfo,i=e.editor.viewInfo,o=e.editor.fontInfo;this.renderMinimap=r.renderMinimap|0,this.scrollBeyondLastLine=i.scrollBeyondLastLine,this.showSlider=i.minimap.showSlider,this.pixelRatio=t,this.typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this.lineHeight=e.editor.lineHeight,this.minimapLeft=r.minimapLeft,this.minimapWidth=r.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=Math.max(1,Math.floor(t*this.minimapWidth)),this.canvasInnerHeight=Math.max(1,Math.floor(t*this.minimapHeight)),this.canvasOuterWidth=this.canvasInnerWidth/t,this.canvasOuterHeight=this.canvasInnerHeight/t}return n.prototype.equals=function(e){return this.renderMinimap===e.renderMinimap&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight},n}(),EDe=function(){function n(e,t,r,i,o,s,a){this.scrollTop=e,this.scrollHeight=t,this._computedSliderRatio=r,this.sliderTop=i,this.sliderHeight=o,this.startLineNumber=s,this.endLineNumber=a}return n.prototype.getDesiredScrollTopFromDelta=function(e){var t=this.sliderTop+e;return Math.round(t/this._computedSliderRatio)},n.create=function(e,t,r,i,o,s,a,u,l){var f=e.pixelRatio,h=n1(e.renderMinimap),d=Math.floor(e.canvasInnerHeight/h),g=e.lineHeight,v;if(o&&r!==s){var m=r-t+1;v=Math.floor(m*h/f)}else{var y=i/g;v=Math.floor(y*h/f)}var b;e.scrollBeyondLastLine?b=(s-1)*h/f:b=Math.max(0,s*h/f-v),b=Math.min(e.minimapHeight-v,b);var C=b/(u-i),E=a*C,D=0;if(e.scrollBeyondLastLine){var y=i/g;D=y}if(d>=s+D){var k=1,I=s;return new n(a,u,C,E,v,k,I)}else{var k=Math.max(1,Math.floor(t-E*f/h));l&&l.scrollHeight===u&&(l.scrollTop>a&&(k=Math.min(k,l.startLineNumber)),l.scrollTop<a&&(k=Math.max(k,l.startLineNumber)));var I=Math.min(s,k+d-1);return new n(a,u,C,E,v,k,I)}},n}(),_Z=function(){function n(e){this.dy=e}return n.prototype.onContentChanged=function(){this.dy=-1},n.prototype.onTokensChanged=function(){this.dy=-1},n.INVALID=new n(-1),n}(),TU=function(){function n(e,t,r){this.renderedLayout=e,this._imageData=t,this._renderedLines=new lZ(function(){return _Z.INVALID}),this._renderedLines._set(e.startLineNumber,r)}return n.prototype.linesEquals=function(e){if(!this.scrollEquals(e))return!1;for(var t=this._renderedLines._get(),r=t.lines,i=0,o=r.length;i<o;i++)if(r[i].dy===-1)return!1;return!0},n.prototype.scrollEquals=function(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber},n.prototype._get=function(){var e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}},n.prototype.onLinesChanged=function(e){return this._renderedLines.onLinesChanged(e.fromLineNumber,e.toLineNumber)},n.prototype.onLinesDeleted=function(e){this._renderedLines.onLinesDeleted(e.fromLineNumber,e.toLineNumber)},n.prototype.onLinesInserted=function(e){this._renderedLines.onLinesInserted(e.fromLineNumber,e.toLineNumber)},n.prototype.onTokensChanged=function(e){return this._renderedLines.onTokensChanged(e.ranges)},n}(),IDe=function(){function n(e,t,r,i){this._backgroundFillData=n._createBackgroundFillData(t,r,i),this._buffers=[e.createImageData(t,r),e.createImageData(t,r)],this._lastUsedBuffer=0}return n.prototype.getBuffer=function(){this._lastUsedBuffer=1-this._lastUsedBuffer;var e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e},n._createBackgroundFillData=function(e,t,r){for(var i=r.r,o=r.g,s=r.b,a=new Uint8ClampedArray(e*t*4),u=0,l=0;l<t;l++)for(var f=0;f<e;f++)a[u]=i,a[u+1]=o,a[u+2]=s,a[u+3]=255,u+=4;return a},n}(),xDe=function(n){CDe(e,n);function e(t){var r=n.call(this,t)||this;return r._renderDecorations=!1,r._options=new kU(r._context.configuration),r._lastRenderData=null,r._buffers=null,r._domNode=st(document.createElement("div")),Eu.write(r._domNode,8),r._domNode.setClassName(r._getMinimapDomNodeClassName()),r._domNode.setPosition("absolute"),r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true"),r._shadow=st(document.createElement("div")),r._shadow.setClassName("minimap-shadow-hidden"),r._domNode.appendChild(r._shadow),r._canvas=st(document.createElement("canvas")),r._canvas.setPosition("absolute"),r._canvas.setLeft(0),r._domNode.appendChild(r._canvas),r._decorationsCanvas=st(document.createElement("canvas")),r._decorationsCanvas.setPosition("absolute"),r._decorationsCanvas.setClassName("minimap-decorations-layer"),r._decorationsCanvas.setLeft(0),r._domNode.appendChild(r._decorationsCanvas),r._slider=st(document.createElement("div")),r._slider.setPosition("absolute"),r._slider.setClassName("minimap-slider"),r._slider.setLayerHinting(!0),r._domNode.appendChild(r._slider),r._sliderHorizontal=st(document.createElement("div")),r._sliderHorizontal.setPosition("absolute"),r._sliderHorizontal.setClassName("minimap-slider-horizontal"),r._slider.appendChild(r._sliderHorizontal),r._tokensColorTracker=mZ.getInstance(),r._applyLayout(),r._mouseDownListener=Br(r._domNode.domNode,"mousedown",function(i){i.preventDefault();var o=r._options.renderMinimap;if(o!==0&&r._lastRenderData){var s=n1(o),a=r._options.pixelRatio*i.browserEvent.offsetY,u=Math.floor(a/s),l=u+r._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,r._context.model.getLineCount()),r._context.privateViewEventBus.emit(new t2(new R(l,1,l,1),1,!1,0))}}),r._sliderMouseMoveMonitor=new Pd,r._sliderMouseDownListener=Br(r._slider.domNode,"mousedown",function(i){if(i.preventDefault(),i.stopPropagation(),i.leftButton&&r._lastRenderData){var o=i.posy,s=i.posx,a=r._lastRenderData.renderedLayout;r._slider.toggleClassName("active",!0),r._sliderMouseMoveMonitor.startMonitoring(Wv,function(u){var l=Math.abs(u.posx-s);if(Hi&&l>SDe){r._context.viewLayout.setScrollPositionNow({scrollTop:a.scrollTop});return}var f=u.posy-o;r._context.viewLayout.setScrollPositionNow({scrollTop:a.getDesiredScrollTopFromDelta(f)})},function(){r._slider.toggleClassName("active",!1)})}}),r}return e.prototype.dispose=function(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),n.prototype.dispose.call(this)},e.prototype._getMinimapDomNodeClassName=function(){return this._options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"},e.prototype.getDomNode=function(){return this._domNode},e.prototype._applyLayout=function(){this._domNode.setLeft(this._options.minimapLeft),this._domNode.setWidth(this._options.minimapWidth),this._domNode.setHeight(this._options.minimapHeight),this._shadow.setHeight(this._options.minimapHeight),this._canvas.setWidth(this._options.canvasOuterWidth),this._canvas.setHeight(this._options.canvasOuterHeight),this._canvas.domNode.width=this._options.canvasInnerWidth,this._canvas.domNode.height=this._options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._options.canvasInnerHeight,this._slider.setWidth(this._options.minimapWidth)},e.prototype._getBuffer=function(){return this._buffers||(this._buffers=new IDe(this._canvas.domNode.getContext("2d"),this._options.canvasInnerWidth,this._options.canvasInnerHeight,this._tokensColorTracker.getColor(2))),this._buffers.getBuffer()},e.prototype._onOptionsMaybeChanged=function(){var t=new kU(this._context.configuration);return this._options.equals(t)?!1:(this._options=t,this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName()),!0)},e.prototype.onConfigurationChanged=function(t){return this._onOptionsMaybeChanged()},e.prototype.onFlushed=function(t){return this._lastRenderData=null,!0},e.prototype.onLinesChanged=function(t){return this._lastRenderData?this._lastRenderData.onLinesChanged(t):!1},e.prototype.onLinesDeleted=function(t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(t),!0},e.prototype.onLinesInserted=function(t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(t),!0},e.prototype.onScrollChanged=function(t){return this._renderDecorations=!0,!0},e.prototype.onTokensChanged=function(t){return this._lastRenderData?this._lastRenderData.onTokensChanged(t):!1},e.prototype.onTokensColorsChanged=function(t){return this._lastRenderData=null,this._buffers=null,!0},e.prototype.onZonesChanged=function(t){return this._lastRenderData=null,!0},e.prototype.onDecorationsChanged=function(t){return this._renderDecorations=!0,!0},e.prototype.onThemeChanged=function(t){return this._context.model.invalidateMinimapColorCache(),this._renderDecorations=!!this._lastDecorations,!!this._lastDecorations},e.prototype.prepareRender=function(t){},e.prototype.render=function(t){var r=this._options.renderMinimap;if(r===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}t.scrollLeft+t.viewportWidth>=t.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");var i=EDe.create(this._options,t.visibleRange.startLineNumber,t.visibleRange.endLineNumber,t.viewportHeight,t.viewportData.whitespaceViewportData.length>0,this._context.model.getLineCount(),t.scrollTop,t.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight);var o=t.scrollLeft/this._options.typicalHalfwidthCharacterWidth,s=Math.min(this._options.minimapWidth,Math.round(o*OT(this._options.renderMinimap)/this._options.pixelRatio));this._sliderHorizontal.setLeft(s),this._sliderHorizontal.setWidth(this._options.minimapWidth-s),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)},e.prototype.renderDecorations=function(t){if(this._renderDecorations){this._renderDecorations=!1;var r=this._context.model.getDecorationsInViewport(new R(t.startLineNumber,1,t.endLineNumber,this._context.model.getLineMaxColumn(t.endLineNumber))),i=this._options,o=i.renderMinimap,s=i.canvasInnerWidth,a=i.canvasInnerHeight,u=n1(o),l=OT(o),f=this._context.model.getOptions().tabSize,h=this._decorationsCanvas.domNode.getContext("2d");h.clearRect(0,0,s,a);for(var d=new Map,g=0;g<r.length;g++){var v=r[g];if(v.options.minimap)for(var m=v.range.startLineNumber;m<=v.range.endLineNumber;m++)this.renderDecorationOnLine(h,d,v,t,m,u,u,f,l)}this._lastDecorations=r}},e.prototype.renderDecorationOnLine=function(t,r,i,o,s,a,u,l,f){var h=(s-o.startLineNumber)*u,d=r.get(s),g=!d;if(!d){var v=this._context.model.getLineContent(s);d=[0];for(var m=1;m<v.length+1;m++){var y=v.charCodeAt(m-1),b=y===9?l*f:Sl(y)?2*f:f;d[m]=d[m-1]+b}r.set(s,d)}var C=i.range,E=C.startColumn,D=C.endColumn,k=C.startLineNumber,I=C.endLineNumber,T=k===s?d[E-1]:0,A=I>s?d.length-1:D-1;if(A>0){var M=d[A]-T||2;this.renderDecoration(t,i.options.minimap,T,h,M,a)}g&&this.renderLineHighlight(t,i.options.minimap,h,a)},e.prototype.renderLineHighlight=function(t,r,i,o){var s=r.getColor(this._context.theme);t.fillStyle=s&&s.transparent(.5).toString()||"",t.fillRect(0,i,t.canvas.width,o)},e.prototype.renderDecoration=function(t,r,i,o,s,a){var u=r.getColor(this._context.theme);t.fillStyle=u&&u.toString()||"",t.fillRect(i,o,s,a)},e.prototype.renderLines=function(t){var r=this._options.renderMinimap,i=t.startLineNumber,o=t.endLineNumber,s=n1(r);if(this._lastRenderData&&this._lastRenderData.linesEquals(t)){var a=this._lastRenderData._get();return new TU(t,a.imageData,a.lines)}for(var u=this._getBuffer(),l=e._renderUntouchedLines(u,i,o,s,this._lastRenderData),f=l[0],h=l[1],d=l[2],g=this._context.model.getMinimapLinesRenderingData(i,o,d),v=g.tabSize,m=this._tokensColorTracker.getColor(2),y=this._tokensColorTracker.backgroundIsLight(),b=0,C=[],E=0,D=o-i+1;E<D;E++)d[E]&&e._renderLine(u,m,y,r,this._tokensColorTracker,wDe(),b,v,g.data[E]),C[E]=new _Z(b),b+=s;var k=f===-1?0:f,I=h===-1?u.height:h,T=I-k,A=this._canvas.domNode.getContext("2d");return A.putImageData(u,0,0,0,k,u.width,T),new TU(t,u,C)},e._renderUntouchedLines=function(t,r,i,o,s){var a=[];if(!s){for(var u=0,l=i-r+1;u<l;u++)a[u]=!0;return[-1,-1,a]}for(var f=s._get(),h=f.imageData.data,d=f.rendLineNumberStart,g=f.lines,v=g.length,m=t.width,y=t.data,b=(i-r+1)*o*m*4,C=-1,E=-1,D=-1,k=-1,I=-1,T=-1,A=0,M=r;M<=i;M++){var L=M-r,F=M-d,W=F>=0&&F<v?g[F].dy:-1;if(W===-1){a[L]=!0,A+=o;continue}var z=W*m*4,K=(W+o)*m*4,X=A*m*4,se=(A+o)*m*4;k===z&&T===X?(k=K,T=se):(D!==-1&&(y.set(h.subarray(D,k),I),C===-1&&D===0&&D===I&&(C=k),E===-1&&k===b&&D===I&&(E=D)),D=z,k=K,I=X,T=se),a[L]=!1,A+=o}D!==-1&&(y.set(h.subarray(D,k),I),C===-1&&D===0&&D===I&&(C=k),E===-1&&k===b&&D===I&&(E=D));var we=C===-1?-1:C/(m*4),ae=E===-1?-1:E/(m*4);return[we,ae,a]},e._renderLine=function(t,r,i,o,s,a,u,l,f){for(var h=f.content,d=f.tokens,g=OT(o),v=t.width-g,m=0,y=0,b=0,C=0,E=d.getCount();C<E;C++)for(var D=d.getEndOffset(C),k=d.getForeground(C),I=s.getColor(k);y<D;y++){if(m>v)return;var T=h.charCodeAt(y);if(T===9){var A=l-(y+b)%l;b+=A-1,m+=A*g}else if(T===32)m+=g;else for(var M=Sl(T)?2:1,L=0;L<M;L++)if(o===2?a.x2RenderChar(t,m,u,T,I,r,i):o===1?a.x1RenderChar(t,m,u,T,I,r,i):o===4?a.x2BlockRenderChar(t,m,u,I,r,i):a.x1BlockRenderChar(t,m,u,I,r,i),m+=g,m>v)return}},e}(Cs);Xt(function(n,e){var t=n.getColor(fIe);if(t){var r=t.transparent(.5);e.addRule(".monaco-editor .minimap-slider, .monaco-editor .minimap-slider .minimap-slider-horizontal { background: "+r+"; }")}var i=n.getColor(hIe);if(i){var o=i.transparent(.5);e.addRule(".monaco-editor .minimap-slider:hover, .monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: "+o+"; }")}var s=n.getColor(dIe);if(s){var a=s.transparent(.5);e.addRule(".monaco-editor .minimap-slider.active, .monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: "+a+"; }")}var u=n.getColor(bI);u&&e.addRule(".monaco-editor .minimap-shadow-visible { box-shadow: "+u+" -6px 0 6px -6px inset; }")});var DDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LDe=function(n){DDe(e,n);function e(t){var r=n.call(this,t)||this;return r._widgets={},r._verticalScrollbarWidth=r._context.configuration.editor.layoutInfo.verticalScrollbarWidth,r._minimapWidth=r._context.configuration.editor.layoutInfo.minimapWidth,r._horizontalScrollbarHeight=r._context.configuration.editor.layoutInfo.horizontalScrollbarHeight,r._editorHeight=r._context.configuration.editor.layoutInfo.height,r._editorWidth=r._context.configuration.editor.layoutInfo.width,r._domNode=st(document.createElement("div")),Eu.write(r._domNode,4),r._domNode.setClassName("overlayWidgets"),r}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this._widgets={}},e.prototype.getDomNode=function(){return this._domNode},e.prototype.onConfigurationChanged=function(t){return t.layoutInfo?(this._verticalScrollbarWidth=this._context.configuration.editor.layoutInfo.verticalScrollbarWidth,this._minimapWidth=this._context.configuration.editor.layoutInfo.minimapWidth,this._horizontalScrollbarHeight=this._context.configuration.editor.layoutInfo.horizontalScrollbarHeight,this._editorHeight=this._context.configuration.editor.layoutInfo.height,this._editorWidth=this._context.configuration.editor.layoutInfo.width,!0):!1},e.prototype.addWidget=function(t){var r=st(t.getDomNode());this._widgets[t.getId()]={widget:t,preference:null,domNode:r},r.setPosition("absolute"),r.setAttribute("widgetId",t.getId()),this._domNode.appendChild(r),this.setShouldRender()},e.prototype.setWidgetPosition=function(t,r){var i=this._widgets[t.getId()];return i.preference===r?!1:(i.preference=r,this.setShouldRender(),!0)},e.prototype.removeWidget=function(t){var r=t.getId();if(this._widgets.hasOwnProperty(r)){var i=this._widgets[r],o=i.domNode.domNode;delete this._widgets[r],o.parentNode.removeChild(o),this.setShouldRender()}},e.prototype._renderWidget=function(t){var r=t.domNode;if(t.preference===null){r.unsetTop();return}if(t.preference===0)r.setTop(0),r.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(t.preference===1){var i=r.domNode.clientHeight;r.setTop(this._editorHeight-i-2*this._horizontalScrollbarHeight),r.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else t.preference===2&&(r.setTop(0),r.domNode.style.right="50%")},e.prototype.prepareRender=function(t){},e.prototype.render=function(t){this._domNode.setWidth(this._editorWidth);for(var r=Object.keys(this._widgets),i=0,o=r.length;i<o;i++){var s=r[i];this._renderWidget(this._widgets[s])}},e}(Cs),kDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),TDe=function(){function n(e,t){this.lineHeight=e.editor.lineHeight,this.pixelRatio=e.editor.pixelRatio,this.overviewRulerLanes=e.editor.viewInfo.overviewRulerLanes,this.renderBorder=e.editor.viewInfo.overviewRulerBorder;var r=t.getColor(ZIe);this.borderColor=r?r.toString():null,this.hideCursor=e.editor.viewInfo.hideCursorInOverviewRuler;var i=t.getColor(tZ);this.cursorColor=i?i.transparent(.7).toString():null,this.themeType=t.type;var o=e.editor.viewInfo.minimap.enabled,s=e.editor.viewInfo.minimap.side,a=o?mn.getDefaultBackground():null;a===null||s==="left"?this.backgroundColor=null:this.backgroundColor=Z.Format.CSS.formatHex(a);var u=e.editor.layoutInfo.overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0;var l=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes),f=l[0],h=l[1];this.x=f,this.w=h}return n.prototype._initLanes=function(e,t,r){var i=t-e;if(r>=3){var o=Math.floor(i/3),s=Math.floor(i/3),a=i-o-s,u=e,l=u+o,f=u+o+a;return[[0,u,l,u,f,u,l,u],[0,o,a,o+a,s,o+a+s,a+s,o+a+s]]}else if(r===2){var o=Math.floor(i/2),s=i-o,u=e,f=u+o;return[[0,u,u,u,f,u,u,u],[0,o,o,o,s,o+s,o+s,o+s]]}else{var h=e,d=i;return[[0,h,h,h,h,h,h,h],[0,d,d,d,d,d,d,d]]}},n.prototype.equals=function(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight},n}(),NDe=function(n){kDe(e,n);function e(t){var r=n.call(this,t)||this;return r._domNode=st(document.createElement("canvas")),r._domNode.setClassName("decorationsOverviewRuler"),r._domNode.setPosition("absolute"),r._domNode.setLayerHinting(!0),r._domNode.setAttribute("aria-hidden","true"),r._updateSettings(!1),r._tokensColorTrackerListener=mn.onDidChange(function(i){i.changedColorMap&&r._updateSettings(!0)}),r._cursorPositions=[],r}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this._tokensColorTrackerListener.dispose()},e.prototype._updateSettings=function(t){var r=new TDe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(r)?!1:(this._settings=r,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,t&&this._render(),!0)},e.prototype.onConfigurationChanged=function(t){return this._updateSettings(!1)},e.prototype.onCursorStateChanged=function(t){this._cursorPositions=[];for(var r=0,i=t.selections.length;r<i;r++)this._cursorPositions[r]=t.selections[r].getPosition();return this._cursorPositions.sort($.compare),!0},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollHeightChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype.onThemeChanged=function(t){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)},e.prototype.getDomNode=function(){return this._domNode.domNode},e.prototype.prepareRender=function(t){},e.prototype.render=function(t){this._render()},e.prototype._render=function(){var t=this._settings.canvasWidth,r=this._settings.canvasHeight,i=this._settings.lineHeight,o=this._context.viewLayout,s=this._context.viewLayout.getScrollHeight(),a=r/s,u=this._context.model.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,f=l/2|0,h=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?h.clearRect(0,0,t,r):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,t,r));var d=this._settings.x,g=this._settings.w,v=Object.keys(u);v.sort();for(var m=0,y=v.length;m<y;m++){var b=v[m],C=u[b];h.fillStyle=b;for(var E=0,D=0,k=0,I=0,T=C.length;I<T;I++){var A=C[3*I],M=C[3*I+1],L=C[3*I+2],F=o.getVerticalOffsetForLineNumber(M)*a|0,W=(o.getVerticalOffsetForLineNumber(L)+i)*a|0,z=W-F;if(z<l){var K=(F+W)/2|0;K<f?K=f:K+f>r&&(K=r-f),F=K-f,W=K+f}F>k+1||A!==E?(I!==0&&h.fillRect(d[E],D,g[E],k-D),E=A,D=F,k=W):W>k&&(k=W)}h.fillRect(d[E],D,g[E],k-D)}if(!this._settings.hideCursor&&this._settings.cursorColor){var X=2*this._settings.pixelRatio|0,se=X/2|0,we=this._settings.x[7],ae=this._settings.w[7];h.fillStyle=this._settings.cursorColor;for(var D=-100,k=-100,I=0,T=this._cursorPositions.length;I<T;I++){var Dt=this._cursorPositions[I],K=o.getVerticalOffsetForLineNumber(Dt.lineNumber)*a|0;K<se?K=se:K+se>r&&(K=r-se);var F=K-se,W=F+X;F>k+1?(I!==0&&h.fillRect(we,D,ae,k-D),D=F,k=W):W>k&&(k=W)}h.fillRect(we,D,ae,k-D)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,r),h.stroke(),h.moveTo(0,0),h.lineTo(t,0),h.stroke())},e}(Cs),NU=function(){function n(e,t,r){this.from=e|0,this.to=t|0,this.colorId=r|0}return n.compare=function(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId},n}(),$y=function(){function n(e,t,r){this.startLineNumber=e,this.endLineNumber=t,this.color=r,this._colorZone=null}return n.compare=function(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1},n.prototype.setColorZone=function(e){this._colorZone=e},n.prototype.getColorZones=function(){return this._colorZone},n}(),ADe=function(){function n(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}return n.prototype.getId2Color=function(){return this._id2Color},n.prototype.setZones=function(e){this._zones=e,this._zones.sort($y.compare)},n.prototype.setLineHeight=function(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)},n.prototype.setPixelRatio=function(e){this._pixelRatio=e,this._colorZonesInvalid=!0},n.prototype.getDOMWidth=function(){return this._domWidth},n.prototype.getCanvasWidth=function(){return this._domWidth*this._pixelRatio},n.prototype.setDOMWidth=function(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)},n.prototype.getDOMHeight=function(){return this._domHeight},n.prototype.getCanvasHeight=function(){return this._domHeight*this._pixelRatio},n.prototype.setDOMHeight=function(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)},n.prototype.getOuterHeight=function(){return this._outerHeight},n.prototype.setOuterHeight=function(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)},n.prototype.resolveColorZones=function(){for(var e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),r=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),o=r/i,s=Math.floor(4*this._pixelRatio/2),a=[],u=0,l=this._zones.length;u<l;u++){var f=this._zones[u];if(!e){var h=f.getColorZones();if(h){a.push(h);continue}}var d=Math.floor(o*this._getVerticalOffsetForLine(f.startLineNumber)),g=Math.floor(o*(this._getVerticalOffsetForLine(f.endLineNumber)+t)),v=Math.floor((d+g)/2),m=g-v;m<s&&(m=s),v-m<0&&(v=m),v+m>r&&(v=r-m);var y=f.color,b=this._color2Id[y];b||(b=++this._lastAssignedId,this._color2Id[y]=b,this._id2Color[b]=y);var C=new NU(v-m,v+m,b);f.setColorZone(C),a.push(C)}return this._colorZonesInvalid=!1,a.sort(NU.compare),a},n}(),ODe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RDe=function(n){ODe(e,n);function e(t,r){var i=n.call(this)||this;return i._context=t,i._domNode=st(document.createElement("canvas")),i._domNode.setClassName(r),i._domNode.setPosition("absolute"),i._domNode.setLayerHinting(!0),i._zoneManager=new ADe(function(o){return i._context.viewLayout.getVerticalOffsetForLineNumber(o)}),i._zoneManager.setDOMWidth(0),i._zoneManager.setDOMHeight(0),i._zoneManager.setOuterHeight(i._context.viewLayout.getScrollHeight()),i._zoneManager.setLineHeight(i._context.configuration.editor.lineHeight),i._zoneManager.setPixelRatio(i._context.configuration.editor.pixelRatio),i._context.addEventHandler(i),i}return e.prototype.dispose=function(){this._context.removeEventHandler(this),n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return t.lineHeight&&(this._zoneManager.setLineHeight(this._context.configuration.editor.lineHeight),this._render()),t.pixelRatio&&(this._zoneManager.setPixelRatio(this._context.configuration.editor.pixelRatio),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0},e.prototype.onFlushed=function(t){return this._render(),!0},e.prototype.onScrollChanged=function(t){return t.scrollHeightChanged&&(this._zoneManager.setOuterHeight(t.scrollHeight),this._render()),!0},e.prototype.onZonesChanged=function(t){return this._render(),!0},e.prototype.getDomNode=function(){return this._domNode.domNode},e.prototype.setLayout=function(t){this._domNode.setTop(t.top),this._domNode.setRight(t.right);var r=!1;r=this._zoneManager.setDOMWidth(t.width)||r,r=this._zoneManager.setDOMHeight(t.height)||r,r&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())},e.prototype.setZones=function(t){this._zoneManager.setZones(t),this._render()},e.prototype._render=function(){if(this._zoneManager.getOuterHeight()===0)return!1;var t=this._zoneManager.getCanvasWidth(),r=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),o=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,t,r),i.length>0&&this._renderOneLane(s,i,o,t),!0},e.prototype._renderOneLane=function(t,r,i,o){for(var s=0,a=0,u=0,l=0,f=r;l<f.length;l++){var h=f[l],d=h.colorId,g=h.from,v=h.to;d!==s?(t.fillRect(0,a,o,u-a),s=d,t.fillStyle=i[s],a=g,u=v):u>=g?u=Math.max(u,v):(t.fillRect(0,a,o,u-a),a=g,u=v)}t.fillRect(0,a,o,u-a)},e}(K0),MDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PDe=function(n){MDe(e,n);function e(t){var r=n.call(this,t)||this;return r.domNode=st(document.createElement("div")),r.domNode.setAttribute("role","presentation"),r.domNode.setAttribute("aria-hidden","true"),r.domNode.setClassName("view-rulers"),r._renderedRulers=[],r._rulers=r._context.configuration.editor.viewInfo.rulers,r._typicalHalfwidthCharacterWidth=r._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth,r}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return t.viewInfo||t.layoutInfo||t.fontInfo?(this._rulers=this._context.configuration.editor.viewInfo.rulers,this._typicalHalfwidthCharacterWidth=this._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth,!0):!1},e.prototype.onScrollChanged=function(t){return t.scrollHeightChanged},e.prototype.prepareRender=function(t){},e.prototype._ensureRulersCount=function(){var t=this._renderedRulers.length,r=this._rulers.length;if(t!==r){if(t<r){for(var i=this._context.model.getOptions().tabSize,o=i,s=r-t;s>0;){var a=st(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),s--}return}for(var u=t-r;u>0;){var a=this._renderedRulers.pop();this.domNode.removeChild(a),u--}}},e.prototype.render=function(t){this._ensureRulersCount();for(var r=0,i=this._rulers.length;r<i;r++){var o=this._renderedRulers[r];o.setHeight(Math.min(t.scrollHeight,1e6)),o.setLeft(this._rulers[r]*this._typicalHalfwidthCharacterWidth)}},e}(Cs);Xt(function(n,e){var t=n.getColor(KIe);t&&e.addRule(".monaco-editor .view-ruler { box-shadow: 1px 0 0 0 "+t+" inset; }")});var FDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BDe=function(n){FDe(e,n);function e(t){var r=n.call(this,t)||this;return r._scrollTop=0,r._width=0,r._updateWidth(),r._shouldShow=!1,r._useShadows=r._context.configuration.editor.viewInfo.scrollbar.useShadows,r._domNode=st(document.createElement("div")),r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true"),r}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype._updateShouldShow=function(){var t=this._useShadows&&this._scrollTop>0;return this._shouldShow!==t?(this._shouldShow=t,!0):!1},e.prototype.getDomNode=function(){return this._domNode},e.prototype._updateWidth=function(){var t=this._context.configuration.editor.layoutInfo,r=0;return t.renderMinimap===0||t.minimapWidth>0&&t.minimapLeft===0?r=t.width:r=t.width-t.minimapWidth-t.verticalScrollbarWidth,this._width!==r?(this._width=r,!0):!1},e.prototype.onConfigurationChanged=function(t){var r=!1;return t.viewInfo&&(this._useShadows=this._context.configuration.editor.viewInfo.scrollbar.useShadows),t.layoutInfo&&(r=this._updateWidth()),this._updateShouldShow()||r},e.prototype.onScrollChanged=function(t){return this._scrollTop=t.scrollTop,this._updateShouldShow()},e.prototype.prepareRender=function(t){},e.prototype.render=function(t){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")},e}(Cs);Xt(function(n,e){var t=n.getColor(bI);t&&e.addRule(".monaco-editor .scroll-decoration { box-shadow: "+t+" 0 6px 6px -6px inset; }")});var WDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VDe=function(){function n(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}return n}(),HDe=function(){function n(e,t){this.lineNumber=e,this.ranges=t}return n}();function UDe(n){return new VDe(n)}function jDe(n){return new HDe(n.lineNumber,n.ranges.map(UDe))}var zDe=uu,qDe=function(n){WDe(e,n);function e(t){var r=n.call(this)||this;return r._previousFrameVisibleRangesWithStyle=[],r._context=t,r._lineHeight=r._context.configuration.editor.lineHeight,r._roundedSelection=r._context.configuration.editor.viewInfo.roundedSelection,r._typicalHalfwidthCharacterWidth=r._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth,r._selections=[],r._renderResult=null,r._context.addEventHandler(r),r}return e.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,n.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return t.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),t.viewInfo&&(this._roundedSelection=this._context.configuration.editor.viewInfo.roundedSelection),t.fontInfo&&(this._typicalHalfwidthCharacterWidth=this._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth),!0},e.prototype.onCursorStateChanged=function(t){return this._selections=t.selections.slice(0),!0},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollTopChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype._visibleRangesHaveGaps=function(t){for(var r=0,i=t.length;r<i;r++){var o=t[r];if(o.ranges.length>1)return!0}return!1},e.prototype._enrichVisibleRangesWithStyle=function(t,r,i){var o=this._typicalHalfwidthCharacterWidth/4,s=null,a=null;if(i&&i.length>0&&r.length>0){var u=r[0].lineNumber;if(u===t.startLineNumber)for(var l=0;!s&&l<i.length;l++)i[l].lineNumber===u&&(s=i[l].ranges[0]);var f=r[r.length-1].lineNumber;if(f===t.endLineNumber)for(var l=i.length-1;!a&&l>=0;l--)i[l].lineNumber===f&&(a=i[l].ranges[0]);s&&!s.startStyle&&(s=null),a&&!a.startStyle&&(a=null)}for(var l=0,h=r.length;l<h;l++){var d=r[l].ranges[0],g=d.left,v=d.left+d.width,m={top:0,bottom:0},y={top:0,bottom:0};if(l>0){var b=r[l-1].ranges[0].left,C=r[l-1].ranges[0].left+r[l-1].ranges[0].width;cC(g-b)<o?m.top=2:g>b&&(m.top=1),cC(v-C)<o?y.top=2:b<v&&v<C&&(y.top=1)}else s&&(m.top=s.startStyle.top,y.top=s.endStyle.top);if(l+1<h){var E=r[l+1].ranges[0].left,D=r[l+1].ranges[0].left+r[l+1].ranges[0].width;cC(g-E)<o?m.bottom=2:E<g&&g<D&&(m.bottom=1),cC(v-D)<o?y.bottom=2:v<D&&(y.bottom=1)}else a&&(m.bottom=a.startStyle.bottom,y.bottom=a.endStyle.bottom);d.startStyle=m,d.endStyle=y}},e.prototype._getVisibleRangesWithStyle=function(t,r,i){var o=r.linesVisibleRangesForRange(t,!0)||[],s=o.map(jDe),a=this._visibleRangesHaveGaps(s);return!zDe&&!a&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(r.visibleRange,s,i),s},e.prototype._createSelectionPiece=function(t,r,i,o,s){return'<div class="cslr '+i+'" style="top:'+t.toString()+"px;left:"+o.toString()+"px;width:"+s.toString()+"px;height:"+r+'px;"></div>'},e.prototype._actualRenderOneSelection=function(t,r,i,o){for(var s=o.length>0&&o[0].ranges[0].startStyle,a=this._lineHeight.toString(),u=(this._lineHeight-1).toString(),l=o.length>0?o[0].lineNumber:0,f=o.length>0?o[o.length-1].lineNumber:0,h=0,d=o.length;h<d;h++){for(var g=o[h],v=g.lineNumber,m=v-r,y=i&&(v===f||v===l)?u:a,b=i&&v===l?1:0,C="",E=0,D=g.ranges.length;E<D;E++){var k=g.ranges[E];if(s){var I=k.startStyle,T=k.endStyle;if(I.top===1||I.bottom===1){C+=this._createSelectionPiece(b,y,e.SELECTION_CLASS_NAME,k.left-e.ROUNDED_PIECE_WIDTH,e.ROUNDED_PIECE_WIDTH);var A=e.EDITOR_BACKGROUND_CLASS_NAME;I.top===1&&(A+=" "+e.SELECTION_TOP_RIGHT),I.bottom===1&&(A+=" "+e.SELECTION_BOTTOM_RIGHT),C+=this._createSelectionPiece(b,y,A,k.left-e.ROUNDED_PIECE_WIDTH,e.ROUNDED_PIECE_WIDTH)}if(T.top===1||T.bottom===1){C+=this._createSelectionPiece(b,y,e.SELECTION_CLASS_NAME,k.left+k.width,e.ROUNDED_PIECE_WIDTH);var M=e.EDITOR_BACKGROUND_CLASS_NAME;T.top===1&&(M+=" "+e.SELECTION_TOP_LEFT),T.bottom===1&&(M+=" "+e.SELECTION_BOTTOM_LEFT),C+=this._createSelectionPiece(b,y,M,k.left+k.width,e.ROUNDED_PIECE_WIDTH)}}var L=e.SELECTION_CLASS_NAME;if(s){var I=k.startStyle,T=k.endStyle;I.top===0&&(L+=" "+e.SELECTION_TOP_LEFT),I.bottom===0&&(L+=" "+e.SELECTION_BOTTOM_LEFT),T.top===0&&(L+=" "+e.SELECTION_TOP_RIGHT),T.bottom===0&&(L+=" "+e.SELECTION_BOTTOM_RIGHT)}C+=this._createSelectionPiece(b,y,L,k.left,k.width)}t[m]+=C}},e.prototype.prepareRender=function(t){for(var r=[],i=t.visibleRange.startLineNumber,o=t.visibleRange.endLineNumber,s=i;s<=o;s++){var a=s-i;r[a]=""}for(var u=[],l=0,f=this._selections.length;l<f;l++){var h=this._selections[l];if(h.isEmpty()){u[l]=null;continue}var d=this._getVisibleRangesWithStyle(h,t,this._previousFrameVisibleRangesWithStyle[l]);u[l]=d,this._actualRenderOneSelection(r,i,this._selections.length>1,d)}this._previousFrameVisibleRangesWithStyle=u,this._renderResult=r},e.prototype.render=function(t,r){if(!this._renderResult)return"";var i=r-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]},e.SELECTION_CLASS_NAME="selected-text",e.SELECTION_TOP_LEFT="top-left-radius",e.SELECTION_BOTTOM_LEFT="bottom-left-radius",e.SELECTION_TOP_RIGHT="top-right-radius",e.SELECTION_BOTTOM_RIGHT="bottom-right-radius",e.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",e.ROUNDED_PIECE_WIDTH=10,e}(Fd);Xt(function(n,e){var t=n.getColor(Sg);t&&e.addRule(".monaco-editor .focused .selected-text { background-color: "+t+"; }");var r=n.getColor(YF);r&&e.addRule(".monaco-editor .selected-text { background-color: "+r+"; }");var i=n.getColor(IIe);i&&e.addRule(".monaco-editor .view-line span.inline-selected-text { color: "+i+"; }")});function cC(n){return n<0?-n:n}var AU=function(){function n(e,t,r,i,o,s){this.top=e,this.left=t,this.width=r,this.height=i,this.textContent=o,this.textContentClassName=s}return n}(),OU=function(){function n(e){this._context=e,this._cursorStyle=this._context.configuration.editor.viewInfo.cursorStyle,this._lineHeight=this._context.configuration.editor.lineHeight,this._typicalHalfwidthCharacterWidth=this._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(this._context.configuration.editor.viewInfo.cursorWidth,this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=st(document.createElement("div")),this._domNode.setClassName("cursor"),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),_s.applyFontInfo(this._domNode,this._context.configuration.editor.fontInfo),this._domNode.setDisplay("none"),this._position=new $(1,1),this._lastRenderedContent="",this._renderData=null}return n.prototype.getDomNode=function(){return this._domNode},n.prototype.getPosition=function(){return this._position},n.prototype.show=function(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)},n.prototype.hide=function(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)},n.prototype.onConfigurationChanged=function(e){return e.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),e.fontInfo&&(_s.applyFontInfo(this._domNode,this._context.configuration.editor.fontInfo),this._typicalHalfwidthCharacterWidth=this._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth),e.viewInfo&&(this._cursorStyle=this._context.configuration.editor.viewInfo.cursorStyle,this._lineCursorWidth=Math.min(this._context.configuration.editor.viewInfo.cursorWidth,this._typicalHalfwidthCharacterWidth)),!0},n.prototype.onCursorPositionChanged=function(e){return this._position=e,!0},n.prototype._prepareRender=function(e){var t="",r="";if(this._cursorStyle===vn.Line||this._cursorStyle===vn.LineThin){var i=e.visibleRangeForPosition(this._position);if(!i)return null;var o;if(this._cursorStyle===vn.Line){if(o=o8(this._lineCursorWidth>0?this._lineCursorWidth:2),o>2){var s=this._context.model.getLineContent(this._position.lineNumber);t=s.charAt(this._position.column-1)}}else o=o8(1);var a=i.left;o>=2&&a>=1&&(a-=1);var u=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new AU(u,a,o,this._lineHeight,t,r)}var l=e.linesVisibleRangesForRange(new R(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+1),!1);if(!l||l.length===0||l[0].ranges.length===0)return null;var f=l[0].ranges[0],h=f.width<1?this._typicalHalfwidthCharacterWidth:f.width;if(this._cursorStyle===vn.Block){var d=this._context.model.getViewLineData(this._position.lineNumber);t=d.content.charAt(this._position.column-1),ao(d.content.charCodeAt(this._position.column-1))&&(t+=d.content.charAt(this._position.column));var g=d.tokens.findTokenIndexAtOffset(this._position.column-1);r=d.tokens.getClassName(g)}var v=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,m=this._lineHeight;return(this._cursorStyle===vn.Underline||this._cursorStyle===vn.UnderlineThin)&&(v+=this._lineHeight-2,m=2),new AU(v,f.left,h,m,t,r)},n.prototype.prepareRender=function(e){this._renderData=this._prepareRender(e)},n.prototype.render=function(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName("cursor "+this._renderData.textContentClassName),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)},n}(),$De=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KDe=function(n){$De(e,n);function e(t){var r=n.call(this,t)||this;return r._readOnly=r._context.configuration.editor.readOnly,r._cursorBlinking=r._context.configuration.editor.viewInfo.cursorBlinking,r._cursorStyle=r._context.configuration.editor.viewInfo.cursorStyle,r._cursorSmoothCaretAnimation=r._context.configuration.editor.viewInfo.cursorSmoothCaretAnimation,r._selectionIsEmpty=!0,r._isVisible=!1,r._primaryCursor=new OU(r._context),r._secondaryCursors=[],r._renderData=[],r._domNode=st(document.createElement("div")),r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true"),r._updateDomClassName(),r._domNode.appendChild(r._primaryCursor.getDomNode()),r._startCursorBlinkAnimation=new Ho,r._cursorFlatBlinkInterval=new Mv,r._blinkingEnabled=!1,r._editorHasFocus=!1,r._updateBlinking(),r}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()},e.prototype.getDomNode=function(){return this._domNode},e.prototype.onConfigurationChanged=function(t){t.readOnly&&(this._readOnly=this._context.configuration.editor.readOnly),t.viewInfo&&(this._cursorBlinking=this._context.configuration.editor.viewInfo.cursorBlinking,this._cursorStyle=this._context.configuration.editor.viewInfo.cursorStyle,this._cursorSmoothCaretAnimation=this._context.configuration.editor.viewInfo.cursorSmoothCaretAnimation),this._primaryCursor.onConfigurationChanged(t),this._updateBlinking(),t.viewInfo&&this._updateDomClassName();for(var r=0,i=this._secondaryCursors.length;r<i;r++)this._secondaryCursors[r].onConfigurationChanged(t);return!0},e.prototype._onCursorPositionChanged=function(t,r){if(this._primaryCursor.onCursorPositionChanged(t),this._updateBlinking(),this._secondaryCursors.length<r.length)for(var i=r.length-this._secondaryCursors.length,o=0;o<i;o++){var s=new OU(this._context);this._domNode.domNode.insertBefore(s.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(s)}else if(this._secondaryCursors.length>r.length)for(var a=this._secondaryCursors.length-r.length,o=0;o<a;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1);for(var o=0;o<r.length;o++)this._secondaryCursors[o].onCursorPositionChanged(r[o])},e.prototype.onCursorStateChanged=function(t){for(var r=[],i=0,o=t.selections.length;i<o;i++)r[i]=t.selections[i].getPosition();this._onCursorPositionChanged(r[0],r.slice(1));var s=t.selections[0].isEmpty();return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,this._updateDomClassName()),!0},e.prototype.onDecorationsChanged=function(t){return!0},e.prototype.onFlushed=function(t){return!0},e.prototype.onFocusChanged=function(t){return this._editorHasFocus=t.isFocused,this._updateBlinking(),!1},e.prototype.onLinesChanged=function(t){return!0},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype.onScrollChanged=function(t){return!0},e.prototype.onTokensChanged=function(t){var r=function(a){for(var u=0,l=t.ranges.length;u<l;u++)if(t.ranges[u].fromLineNumber<=a.lineNumber&&a.lineNumber<=t.ranges[u].toLineNumber)return!0;return!1};if(r(this._primaryCursor.getPosition()))return!0;for(var i=0,o=this._secondaryCursors;i<o.length;i++){var s=o[i];if(r(s.getPosition()))return!0}return!1},e.prototype.onZonesChanged=function(t){return!0},e.prototype._getCursorBlinking=function(){return this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0},e.prototype._updateBlinking=function(){var t=this;this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();var r=this._getCursorBlinking(),i=r===0,o=r===5;i?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!i&&!o&&(r===1?this._cursorFlatBlinkInterval.cancelAndSet(function(){t._isVisible?t._hide():t._show()},e.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(function(){t._blinkingEnabled=!0,t._updateDomClassName()},e.BLINK_INTERVAL))},e.prototype._updateDomClassName=function(){this._domNode.setClassName(this._getClassName())},e.prototype._getClassName=function(){var t="cursors-layer";switch(this._selectionIsEmpty||(t+=" has-selection"),this._cursorStyle){case vn.Line:t+=" cursor-line-style";break;case vn.Block:t+=" cursor-block-style";break;case vn.Underline:t+=" cursor-underline-style";break;case vn.LineThin:t+=" cursor-line-thin-style";break;case vn.BlockOutline:t+=" cursor-block-outline-style";break;case vn.UnderlineThin:t+=" cursor-underline-thin-style";break;default:t+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:t+=" cursor-blink";break;case 2:t+=" cursor-smooth";break;case 3:t+=" cursor-phase";break;case 4:t+=" cursor-expand";break;case 5:t+=" cursor-solid";break;default:t+=" cursor-solid"}else t+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(t+=" cursor-smooth-caret-animation"),t},e.prototype._show=function(){this._primaryCursor.show();for(var t=0,r=this._secondaryCursors.length;t<r;t++)this._secondaryCursors[t].show();this._isVisible=!0},e.prototype._hide=function(){this._primaryCursor.hide();for(var t=0,r=this._secondaryCursors.length;t<r;t++)this._secondaryCursors[t].hide();this._isVisible=!1},e.prototype.prepareRender=function(t){this._primaryCursor.prepareRender(t);for(var r=0,i=this._secondaryCursors.length;r<i;r++)this._secondaryCursors[r].prepareRender(t)},e.prototype.render=function(t){var r=[],i=0,o=this._primaryCursor.render(t);o&&(r[i++]=o);for(var s=0,a=this._secondaryCursors.length;s<a;s++){var u=this._secondaryCursors[s].render(t);u&&(r[i++]=u)}this._renderData=r},e.prototype.getLastRenderData=function(){return this._renderData},e.BLINK_INTERVAL=500,e}(Cs);Xt(function(n,e){var t=n.getColor(tZ);if(t){var r=n.getColor(qIe);r||(r=t.opposite()),e.addRule(".monaco-editor .cursor { background-color: "+t+"; border-color: "+t+"; color: "+r+"; }"),n.type==="hc"&&e.addRule(".monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid "+r+"; border-right: 1px solid "+r+"; }")}});var GDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YDe=function(n){GDe(e,n);function e(t){var r=n.call(this,t)||this;return r._lineHeight=r._context.configuration.editor.lineHeight,r._contentWidth=r._context.configuration.editor.layoutInfo.contentWidth,r._contentLeft=r._context.configuration.editor.layoutInfo.contentLeft,r.domNode=st(document.createElement("div")),r.domNode.setClassName("view-zones"),r.domNode.setPosition("absolute"),r.domNode.setAttribute("role","presentation"),r.domNode.setAttribute("aria-hidden","true"),r.marginDomNode=st(document.createElement("div")),r.marginDomNode.setClassName("margin-view-zones"),r.marginDomNode.setPosition("absolute"),r.marginDomNode.setAttribute("role","presentation"),r.marginDomNode.setAttribute("aria-hidden","true"),r._zones={},r}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this._zones={}},e.prototype._recomputeWhitespacesProps=function(){for(var t=!1,r=Object.keys(this._zones),i=0,o=r.length;i<o;i++){var s=r[i],a=this._zones[s],u=this._computeWhitespaceProps(a.delegate);this._context.viewLayout.changeWhitespace(s,u.afterViewLineNumber,u.heightInPx)&&(this._safeCallOnComputedHeight(a.delegate,u.heightInPx),t=!0)}return t},e.prototype.onConfigurationChanged=function(t){return t.lineHeight?(this._lineHeight=this._context.configuration.editor.lineHeight,this._recomputeWhitespacesProps()):(t.layoutInfo&&(this._contentWidth=this._context.configuration.editor.layoutInfo.contentWidth,this._contentLeft=this._context.configuration.editor.layoutInfo.contentLeft),!0)},e.prototype.onLineMappingChanged=function(t){var r=this._recomputeWhitespacesProps();return r&&this._context.viewLayout.onHeightMaybeChanged(),r},e.prototype.onLinesDeleted=function(t){return!0},e.prototype.onScrollChanged=function(t){return t.scrollTopChanged||t.scrollWidthChanged},e.prototype.onZonesChanged=function(t){return!0},e.prototype.onLinesInserted=function(t){return!0},e.prototype._getZoneOrdinal=function(t){return typeof t.afterColumn<"u"?t.afterColumn:1e4},e.prototype._computeWhitespaceProps=function(t){if(t.afterLineNumber===0)return{afterViewLineNumber:0,heightInPx:this._heightInPixels(t),minWidthInPx:this._minWidthInPixels(t)};var r;if(typeof t.afterColumn<"u")r=this._context.model.validateModelPosition({lineNumber:t.afterLineNumber,column:t.afterColumn});else{var i=this._context.model.validateModelPosition({lineNumber:t.afterLineNumber,column:1}).lineNumber;r=new $(i,this._context.model.getModelLineMaxColumn(i))}var o;r.column===this._context.model.getModelLineMaxColumn(r.lineNumber)?o=this._context.model.validateModelPosition({lineNumber:r.lineNumber+1,column:1}):o=this._context.model.validateModelPosition({lineNumber:r.lineNumber,column:r.column+1});var s=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(r),a=this._context.model.coordinatesConverter.modelPositionIsVisible(o);return{afterViewLineNumber:s.lineNumber,heightInPx:a?this._heightInPixels(t):0,minWidthInPx:this._minWidthInPixels(t)}},e.prototype.addZone=function(t){var r=this._computeWhitespaceProps(t),i=this._context.viewLayout.addWhitespace(r.afterViewLineNumber,this._getZoneOrdinal(t),r.heightInPx,r.minWidthInPx),o={whitespaceId:i,delegate:t,isVisible:!1,domNode:st(t.domNode),marginDomNode:t.marginDomNode?st(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,r.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId},e.prototype.removeZone=function(t){if(this._zones.hasOwnProperty(t)){var r=this._zones[t];return delete this._zones[t],this._context.viewLayout.removeWhitespace(r.whitespaceId),r.domNode.removeAttribute("monaco-visible-view-zone"),r.domNode.removeAttribute("monaco-view-zone"),r.domNode.domNode.parentNode.removeChild(r.domNode.domNode),r.marginDomNode&&(r.marginDomNode.removeAttribute("monaco-visible-view-zone"),r.marginDomNode.removeAttribute("monaco-view-zone"),r.marginDomNode.domNode.parentNode.removeChild(r.marginDomNode.domNode)),this.setShouldRender(),!0}return!1},e.prototype.layoutZone=function(t){var r=!1;if(this._zones.hasOwnProperty(t)){var i=this._zones[t],o=this._computeWhitespaceProps(i.delegate);r=this._context.viewLayout.changeWhitespace(i.whitespaceId,o.afterViewLineNumber,o.heightInPx)||r,r&&(this._safeCallOnComputedHeight(i.delegate,o.heightInPx),this.setShouldRender())}return r},e.prototype.shouldSuppressMouseDownOnViewZone=function(t){if(this._zones.hasOwnProperty(t)){var r=this._zones[t];return!!r.delegate.suppressMouseDown}return!1},e.prototype._heightInPixels=function(t){return typeof t.heightInPx=="number"?t.heightInPx:typeof t.heightInLines=="number"?this._lineHeight*t.heightInLines:this._lineHeight},e.prototype._minWidthInPixels=function(t){return typeof t.minWidthInPx=="number"?t.minWidthInPx:0},e.prototype._safeCallOnComputedHeight=function(t,r){if(typeof t.onComputedHeight=="function")try{t.onComputedHeight(r)}catch(i){Le(i)}},e.prototype._safeCallOnDomNodeTop=function(t,r){if(typeof t.onDomNodeTop=="function")try{t.onDomNodeTop(r)}catch(i){Le(i)}},e.prototype.prepareRender=function(t){},e.prototype.render=function(t){for(var r=t.viewportData.whitespaceViewportData,i={},o=!1,s=0,a=r.length;s<a;s++)i[r[s].id]=r[s],o=!0;for(var u=Object.keys(this._zones),s=0,a=u.length;s<a;s++){var l=u[s],f=this._zones[l],h=0,d=0,g="none";i.hasOwnProperty(l)?(h=i[l].verticalOffset-t.bigNumbersDelta,d=i[l].height,g="block",f.isVisible||(f.domNode.setAttribute("monaco-visible-view-zone","true"),f.isVisible=!0),this._safeCallOnDomNodeTop(f.delegate,t.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(f.isVisible&&(f.domNode.removeAttribute("monaco-visible-view-zone"),f.isVisible=!1),this._safeCallOnDomNodeTop(f.delegate,t.getScrolledTopFromAbsoluteTop(-1e6))),f.domNode.setTop(h),f.domNode.setHeight(d),f.domNode.setDisplay(g),f.marginDomNode&&(f.marginDomNode.setTop(h),f.marginDomNode.setHeight(d),f.marginDomNode.setDisplay(g))}o&&(this.domNode.setWidth(Math.max(t.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))},e}(Cs),ZDe=function(){function n(e,t,r,i){this.configuration=e,this.theme=t,this.model=r,this.viewLayout=r.viewLayout,this.privateViewEventBus=i}return n.prototype.addEventHandler=function(e){this.privateViewEventBus.addEventHandler(e)},n.prototype.removeEventHandler=function(e){this.privateViewEventBus.removeEventHandler(e)},n}(),XDe=function(){function n(e){this._eventHandlerGateKeeper=e,this._eventHandlers=[],this._eventQueue=null,this._isConsumingQueue=!1}return n.prototype.addEventHandler=function(e){for(var t=0,r=this._eventHandlers.length;t<r;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)},n.prototype.removeEventHandler=function(e){for(var t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}},n.prototype.emit=function(e){this._eventQueue?this._eventQueue.push(e):this._eventQueue=[e],this._isConsumingQueue||this.consumeQueue()},n.prototype.emitMany=function(e){this._eventQueue?this._eventQueue=this._eventQueue.concat(e):this._eventQueue=e,this._isConsumingQueue||this.consumeQueue()},n.prototype.consumeQueue=function(){var e=this;this._eventHandlerGateKeeper(function(){try{e._isConsumingQueue=!0,e._doConsumeQueue()}finally{e._isConsumingQueue=!1}})},n.prototype._doConsumeQueue=function(){for(;this._eventQueue;){var e=this._eventQueue;this._eventQueue=null;for(var t=this._eventHandlers.slice(0),r=0,i=t.length;r<i;r++)t[r].handleEvents(e)}},n}(),QDe=function(){function n(e,t,r,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=r,this._model=i,this.visibleRange=new R(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}return n.prototype.getViewLineRenderingData=function(e){return this._model.getViewLineRenderingData(this.visibleRange,e)},n.prototype.getDecorationsInViewport=function(){return this._model.getDecorationsInViewport(this.visibleRange)},n}(),JDe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RT=function(){throw new Error("Invalid change accessor")},eLe=function(n){JDe(e,n);function e(t,r,i,o,s,a){var u=n.call(this)||this;u._cursor=s,u._renderAnimationFrame=null,u.outgoingEvents=a;var l=new Ixe(r,o,u.outgoingEvents,t);u.eventDispatcher=new XDe(function(C){return u._renderOnce(C)}),u.eventDispatcher.addEventHandler(u),u._context=new ZDe(r,i.getTheme(),o,u.eventDispatcher),u._register(i.onThemeChange(function(C){u._context.theme=C,u.eventDispatcher.emit(new cxe),u.render(!0,!1)})),u.viewParts=[],u._textAreaHandler=new _xe(u._context,l,u.createTextAreaHandlerHelper()),u.viewParts.push(u._textAreaHandler),u.linesContent=st(document.createElement("div")),u.linesContent.setClassName("lines-content monaco-editor-background"),u.linesContent.setPosition("absolute"),u.domNode=st(document.createElement("div")),u.domNode.setClassName(u.getEditorClassName()),u.overflowGuardContainer=st(document.createElement("div")),Eu.write(u.overflowGuardContainer,3),u.overflowGuardContainer.setClassName("overflow-guard"),u._scrollbar=new uDe(u._context,u.linesContent,u.domNode,u.overflowGuardContainer),u.viewParts.push(u._scrollbar),u.viewLines=new gDe(u._context,u.linesContent),u.viewZones=new YDe(u._context),u.viewParts.push(u.viewZones);var f=new NDe(u._context);u.viewParts.push(f);var h=new BDe(u._context);u.viewParts.push(h);var d=new Lxe(u._context);u.viewParts.push(d),d.addDynamicOverlay(new Rxe(u._context)),d.addDynamicOverlay(new qDe(u._context)),d.addDynamicOverlay(new fDe(u._context)),d.addDynamicOverlay(new Bxe(u._context));var g=new kxe(u._context);u.viewParts.push(g),g.addDynamicOverlay(new Pxe(u._context)),g.addDynamicOverlay(new lDe(u._context)),g.addDynamicOverlay(new yDe(u._context)),g.addDynamicOverlay(new mDe(u._context)),g.addDynamicOverlay(new iZ(u._context));var v=new oZ(u._context);v.getDomNode().appendChild(u.viewZones.marginDomNode),v.getDomNode().appendChild(g.getDomNode()),u.viewParts.push(v),u.contentWidgets=new Nxe(u._context,u.domNode),u.viewParts.push(u.contentWidgets),u.viewCursors=new KDe(u._context),u.viewParts.push(u.viewCursors),u.overlayWidgets=new LDe(u._context),u.viewParts.push(u.overlayWidgets);var m=new PDe(u._context);u.viewParts.push(m);var y=new xDe(u._context);if(u.viewParts.push(y),f){var b=u._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(f.getDomNode(),b.insertBefore)}return u.linesContent.appendChild(d.getDomNode()),u.linesContent.appendChild(m.domNode),u.linesContent.appendChild(u.viewZones.domNode),u.linesContent.appendChild(u.viewLines.getDomNode()),u.linesContent.appendChild(u.contentWidgets.domNode),u.linesContent.appendChild(u.viewCursors.getDomNode()),u.overflowGuardContainer.appendChild(v.getDomNode()),u.overflowGuardContainer.appendChild(u._scrollbar.getDomNode()),u.overflowGuardContainer.appendChild(h.getDomNode()),u.overflowGuardContainer.appendChild(u._textAreaHandler.textArea),u.overflowGuardContainer.appendChild(u._textAreaHandler.textAreaCover),u.overflowGuardContainer.appendChild(u.overlayWidgets.getDomNode()),u.overflowGuardContainer.appendChild(y.getDomNode()),u.domNode.appendChild(u.overflowGuardContainer),u.domNode.appendChild(u.contentWidgets.overflowingContentWidgetsDomNode),u._setLayout(),u.pointerHandler=u._register(new ZEe(u._context,l,u.createPointerHandlerHelper())),u._register(o.addEventListener(function(C){u.eventDispatcher.emitMany(C)})),u._register(u._cursor.addEventListener(function(C){u.eventDispatcher.emitMany(C)})),u}return e.prototype._flushAccumulatedAndRenderNow=function(){this._renderNow()},e.prototype.createPointerHandlerHelper=function(){var t=this;return{viewDomNode:this.domNode.domNode,linesContentDomNode:this.linesContent.domNode,focusTextArea:function(){t.focus()},getLastViewCursorsRenderData:function(){return t.viewCursors.getLastRenderData()||[]},shouldSuppressMouseDownOnViewZone:function(r){return t.viewZones.shouldSuppressMouseDownOnViewZone(r)},shouldSuppressMouseDownOnWidget:function(r){return t.contentWidgets.shouldSuppressMouseDownOnWidget(r)},getPositionFromDOMInfo:function(r,i){return t._flushAccumulatedAndRenderNow(),t.viewLines.getPositionFromDOMInfo(r,i)},visibleRangeForPosition2:function(r,i){return t._flushAccumulatedAndRenderNow(),t.viewLines.visibleRangeForPosition(new $(r,i))},getLineWidth:function(r){return t._flushAccumulatedAndRenderNow(),t.viewLines.getLineWidth(r)}}},e.prototype.createTextAreaHandlerHelper=function(){var t=this;return{visibleRangeForPositionRelativeToEditor:function(r,i){return t._flushAccumulatedAndRenderNow(),t.viewLines.visibleRangeForPosition(new $(r,i))}}},e.prototype._setLayout=function(){var t=this._context.configuration.editor.layoutInfo;this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this.overflowGuardContainer.setWidth(t.width),this.overflowGuardContainer.setHeight(t.height),this.linesContent.setWidth(1e6),this.linesContent.setHeight(1e6)},e.prototype.getEditorClassName=function(){var t=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.editor.editorClassName+" "+aS(this._context.theme.type)+t},e.prototype.onConfigurationChanged=function(t){return t.editorClassName&&this.domNode.setClassName(this.getEditorClassName()),t.layoutInfo&&this._setLayout(),!1},e.prototype.onFocusChanged=function(t){return this.domNode.setClassName(this.getEditorClassName()),this._context.model.setHasFocus(t.isFocused),t.isFocused?this.outgoingEvents.emitViewFocusGained():this.outgoingEvents.emitViewFocusLost(),!1},e.prototype.onScrollChanged=function(t){return this.outgoingEvents.emitScrollChanged(t),!1},e.prototype.onThemeChanged=function(t){return this.domNode.setClassName(this.getEditorClassName()),!1},e.prototype.dispose=function(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this.eventDispatcher.removeEventHandler(this),this.outgoingEvents.dispose(),this.viewLines.dispose();for(var t=0,r=this.viewParts.length;t<r;t++)this.viewParts[t].dispose();this.viewParts=[],n.prototype.dispose.call(this)},e.prototype._renderOnce=function(t){var r=RU(t);return this._scheduleRender(),r},e.prototype._scheduleRender=function(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=dG(this._onRenderScheduled.bind(this),100))},e.prototype._onRenderScheduled=function(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()},e.prototype._renderNow=function(){var t=this;RU(function(){return t._actualRender()})},e.prototype._getViewPartsToRender=function(){for(var t=[],r=0,i=0,o=this.viewParts.length;i<o;i++){var s=this.viewParts[i];s.shouldRender()&&(t[r++]=s)}return t},e.prototype._actualRender=function(){if(nbe(this.domNode.domNode)){var t=this._getViewPartsToRender();if(!(!this.viewLines.shouldRender()&&t.length===0)){var r=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(r.startLineNumber,r.endLineNumber,r.centeredLineNumber);var i=new QDe(this._cursor.getViewSelections(),r,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this.contentWidgets.shouldRender()&&this.contentWidgets.onBeforeRender(i),this.viewLines.shouldRender()&&(this.viewLines.renderText(i),this.viewLines.onDidRender(),t=this._getViewPartsToRender());for(var o=new kSe(this._context.viewLayout,i,this.viewLines),s=0,a=t.length;s<a;s++){var u=t[s];u.prepareRender(o)}for(var s=0,a=t.length;s<a;s++){var u=t[s];u.render(o),u.onDidRender()}}}},e.prototype.delegateVerticalScrollbarMouseDown=function(t){this._scrollbar.delegateVerticalScrollbarMouseDown(t)},e.prototype.restoreState=function(t){this._context.viewLayout.setScrollPositionNow({scrollTop:t.scrollTop}),this._context.model.tokenizeViewport(),this._renderNow(),this.viewLines.updateLineWidths(),this._context.viewLayout.setScrollPositionNow({scrollLeft:t.scrollLeft})},e.prototype.getOffsetForColumn=function(t,r){var i=this._context.model.validateModelPosition({lineNumber:t,column:r}),o=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();var s=this.viewLines.visibleRangeForPosition(new $(o.lineNumber,o.column));return s?s.left:-1},e.prototype.getTargetAtClientPoint=function(t,r){return this.pointerHandler.getTargetAtClientPoint(t,r)},e.prototype.createOverviewRuler=function(t){return new RDe(this._context,t)},e.prototype.change=function(t){var r=this,i=!1;return this._renderOnce(function(){var o={addZone:function(s){return i=!0,r.viewZones.addZone(s)},removeZone:function(s){s&&(i=r.viewZones.removeZone(s)||i)},layoutZone:function(s){s&&(i=r.viewZones.layoutZone(s)||i)}};tLe(t,o),o.addZone=RT,o.removeZone=RT,o.layoutZone=RT,i&&(r._context.viewLayout.onHeightMaybeChanged(),r._context.privateViewEventBus.emit(new hxe))}),i},e.prototype.render=function(t,r){if(r){this.viewLines.forceShouldRender();for(var i=0,o=this.viewParts.length;i<o;i++){var s=this.viewParts[i];s.forceShouldRender()}}t?this._flushAccumulatedAndRenderNow():this._scheduleRender()},e.prototype.focus=function(){this._textAreaHandler.focusTextArea()},e.prototype.isFocused=function(){return this._textAreaHandler.isFocused()},e.prototype.addContentWidget=function(t){this.contentWidgets.addWidget(t.widget),this.layoutContentWidget(t),this._scheduleRender()},e.prototype.layoutContentWidget=function(t){var r=t.position?t.position.position:null,i=t.position&&t.position.range||null,o=t.position?t.position.preference:null;this.contentWidgets.setWidgetPosition(t.widget,r,i,o),this._scheduleRender()},e.prototype.removeContentWidget=function(t){this.contentWidgets.removeWidget(t.widget),this._scheduleRender()},e.prototype.addOverlayWidget=function(t){this.overlayWidgets.addWidget(t.widget),this.layoutOverlayWidget(t),this._scheduleRender()},e.prototype.layoutOverlayWidget=function(t){var r=t.position?t.position.preference:null,i=this.overlayWidgets.setWidgetPosition(t.widget,r);i&&this._scheduleRender()},e.prototype.removeOverlayWidget=function(t){this.overlayWidgets.removeWidget(t.widget),this._scheduleRender()},e}(K0);function RU(n){try{return n()}catch(e){Le(e)}}function tLe(n,e){try{return n(e)}catch(t){Le(t)}}var nLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rLe=function(n){nLe(e,n);function e(t){var r=n.call(this)||this;return r.onDidScroll=null,r.onDidGainFocus=null,r.onDidLoseFocus=null,r.onKeyDown=null,r.onKeyUp=null,r.onContextMenu=null,r.onMouseMove=null,r.onMouseLeave=null,r.onMouseUp=null,r.onMouseDown=null,r.onMouseDrag=null,r.onMouseDrop=null,r.onMouseWheel=null,r._viewModel=t,r}return e.prototype.emitScrollChanged=function(t){this.onDidScroll&&this.onDidScroll(t)},e.prototype.emitViewFocusGained=function(){this.onDidGainFocus&&this.onDidGainFocus(void 0)},e.prototype.emitViewFocusLost=function(){this.onDidLoseFocus&&this.onDidLoseFocus(void 0)},e.prototype.emitKeyDown=function(t){this.onKeyDown&&this.onKeyDown(t)},e.prototype.emitKeyUp=function(t){this.onKeyUp&&this.onKeyUp(t)},e.prototype.emitContextMenu=function(t){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(t))},e.prototype.emitMouseMove=function(t){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(t))},e.prototype.emitMouseLeave=function(t){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(t))},e.prototype.emitMouseUp=function(t){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(t))},e.prototype.emitMouseDown=function(t){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(t))},e.prototype.emitMouseDrag=function(t){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(t))},e.prototype.emitMouseDrop=function(t){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(t))},e.prototype.emitMouseWheel=function(t){this.onMouseWheel&&this.onMouseWheel(t)},e.prototype._convertViewToModelMouseEvent=function(t){return t.target?{event:t.event,target:this._convertViewToModelMouseTarget(t.target)}:t},e.prototype._convertViewToModelMouseTarget=function(t){return new iLe(t.element,t.type,t.mouseColumn,t.position?this._convertViewToModelPosition(t.position):null,t.range?this._convertViewToModelRange(t.range):null,t.detail)},e.prototype._convertViewToModelPosition=function(t){return this._viewModel.coordinatesConverter.convertViewPositionToModelPosition(t)},e.prototype._convertViewToModelRange=function(t){return this._viewModel.coordinatesConverter.convertViewRangeToModelRange(t)},e}(te),iLe=function(){function n(e,t,r,i,o,s){this.element=e,this.type=t,this.mouseColumn=r,this.position=i,this.range=o,this.detail=s}return n.prototype.toString=function(){return Yu.toString(this)},n}(),MU=function(){function n(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Ai(new R(1,1,1,1),0,new $(1,1),0),new Ai(new R(1,1,1,1),0,new $(1,1),0))}return n.prototype.dispose=function(e){this._removeTrackedRange(e)},n.prototype.startTrackingSelection=function(e){this._trackSelection=!0,this._updateTrackedRange(e)},n.prototype.stopTrackingSelection=function(e){this._trackSelection=!1,this._removeTrackedRange(e)},n.prototype._updateTrackedRange=function(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))},n.prototype._removeTrackedRange=function(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)},n.prototype.asCursorState=function(){return new ut(this.modelState,this.viewState)},n.prototype.readSelectionFromMarkers=function(e){var t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.getDirection()===0?new Ce(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Ce(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)},n.prototype.ensureValidState=function(e){this._setState(e,this.modelState,this.viewState)},n.prototype.setState=function(e,t,r){this._setState(e,t,r)},n.prototype._setState=function(e,t,r){if(t){var i=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new Ai(i,s,o,a)}else{if(!r)return;var i=e.model.validateRange(e.convertViewRangeToModelRange(r.selectionStart)),o=e.model.validatePosition(e.convertViewPositionToModelPosition(r.position.lineNumber,r.position.column));t=new Ai(i,r.selectionStartLeftoverVisibleColumns,o,r.leftoverVisibleColumns)}if(r){var f=e.validateViewRange(r.selectionStart,t.selectionStart),h=e.validateViewPosition(r.position,t.position);r=new Ai(f,t.selectionStartLeftoverVisibleColumns,h,t.leftoverVisibleColumns)}else{var u=e.convertModelPositionToViewPosition(new $(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),l=e.convertModelPositionToViewPosition(new $(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),f=new R(u.lineNumber,u.column,l.lineNumber,l.column),h=e.convertModelPositionToViewPosition(t.position);r=new Ai(f,t.selectionStartLeftoverVisibleColumns,h,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=r,this._updateTrackedRange(e)},n}(),PU=function(){function n(e){this.context=e,this.primaryCursor=new MU(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}return n.prototype.dispose=function(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()},n.prototype.startTrackingSelections=function(){this.primaryCursor.startTrackingSelection(this.context);for(var e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)},n.prototype.stopTrackingSelections=function(){this.primaryCursor.stopTrackingSelection(this.context);for(var e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)},n.prototype.updateContext=function(e){this.context=e},n.prototype.ensureValidState=function(){this.primaryCursor.ensureValidState(this.context);for(var e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)},n.prototype.readSelectionFromMarkers=function(){var e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(var t=0,r=this.secondaryCursors.length;t<r;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e},n.prototype.getAll=function(){var e=[];e[0]=this.primaryCursor.asCursorState();for(var t=0,r=this.secondaryCursors.length;t<r;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e},n.prototype.getViewPositions=function(){var e=[];e[0]=this.primaryCursor.viewState.position;for(var t=0,r=this.secondaryCursors.length;t<r;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e},n.prototype.getSelections=function(){var e=[];e[0]=this.primaryCursor.modelState.selection;for(var t=0,r=this.secondaryCursors.length;t<r;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e},n.prototype.getViewSelections=function(){var e=[];e[0]=this.primaryCursor.viewState.selection;for(var t=0,r=this.secondaryCursors.length;t<r;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e},n.prototype.setSelections=function(e){this.setStates(ut.fromModelSelections(e))},n.prototype.getPrimaryCursor=function(){return this.primaryCursor.asCursorState()},n.prototype.setStates=function(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))},n.prototype._setSecondaryStates=function(e){var t=this.secondaryCursors.length,r=e.length;if(t<r)for(var i=r-t,o=0;o<i;o++)this._addSecondaryCursor();else if(t>r)for(var s=t-r,o=0;o<s;o++)this._removeSecondaryCursor(this.secondaryCursors.length-1);for(var o=0;o<r;o++)this.secondaryCursors[o].setState(this.context,e[o].modelState,e[o].viewState)},n.prototype.killSecondaryCursors=function(){this._setSecondaryStates([])},n.prototype._addSecondaryCursor=function(){this.secondaryCursors.push(new MU(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length},n.prototype.getLastAddedCursorIndex=function(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex},n.prototype._removeSecondaryCursor=function(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)},n.prototype._getAll=function(){var e=[];e[0]=this.primaryCursor;for(var t=0,r=this.secondaryCursors.length;t<r;t++)e[t+1]=this.secondaryCursors[t];return e},n.prototype.normalize=function(){if(this.secondaryCursors.length!==0){for(var e=this._getAll(),t=[],r=0,i=e.length;r<i;r++)t.push({index:r,selection:e[r].modelState.selection});t.sort(function(L,F){return L.selection.startLineNumber===F.selection.startLineNumber?L.selection.startColumn-F.selection.startColumn:L.selection.startLineNumber-F.selection.startLineNumber});for(var o=0;o<t.length-1;o++){var s=t[o],a=t[o+1],u=s.selection,l=a.selection;if(this.context.config.multiCursorMergeOverlapping){var f=void 0;if(l.isEmpty()||u.isEmpty()?f=l.getStartPosition().isBeforeOrEqual(u.getEndPosition()):f=l.getStartPosition().isBefore(u.getEndPosition()),f){var h=s.index<a.index?o:o+1,d=s.index<a.index?o+1:o,g=t[d].index,v=t[h].index,m=t[d].selection,y=t[h].selection;if(!m.equalsSelection(y)){var b=m.plusRange(y),C=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn,E=y.selectionStartLineNumber===y.startLineNumber&&y.selectionStartColumn===y.startColumn,D=void 0;g===this.lastAddedCursorIndex?(D=C,this.lastAddedCursorIndex=v):D=E;var k=void 0;D?k=new Ce(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):k=new Ce(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[h].selection=k;var I=ut.fromModelSelection(k);e[v].setState(this.context,I.modelState,I.viewState)}for(var T=0,A=t;T<A.length;T++){var M=A[T];M.index>g&&M.index--}e.splice(g,1),t.splice(d,1),this._removeSecondaryCursor(g-1),o--}}}}},n}(),oLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function sLe(n){for(var e=0,t=n.length;e<t;e++)if(n[e].type===6)return!0;return!1}var aLe=function(){function n(e,t,r){this.selections=e,this.source=t,this.reason=r}return n}(),MT=function(){function n(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getAll()}return n.prototype.equals=function(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(var t=0,r=this.cursorState.length;t<r;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0},n}(),PT=function(){function n(e,t,r){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=r}return n.getAllAutoClosedCharacters=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t=t.concat(o.getAutoClosedCharactersRanges())}return t},n.prototype.dispose=function(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])},n.prototype.getAutoClosedCharactersRanges=function(){for(var e=[],t=0;t<this._autoClosedCharactersDecorations.length;t++){var r=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);r&&e.push(r)}return e},n.prototype.isValid=function(e){for(var t=[],r=0;r<this._autoClosedEnclosingDecorations.length;r++){var i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[r]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(R.compareRangesUsingStarts),e.sort(R.compareRangesUsingStarts);for(var r=0;r<e.length;r++)if(r>=t.length||!t[r].strictContainsRange(e[r]))return!1;return!0},n}(),FU=function(n){oLe(e,n);function e(t,r,i){var o=n.call(this)||this;o._onDidReachMaxCursorCount=o._register(new j),o.onDidReachMaxCursorCount=o._onDidReachMaxCursorCount.event,o._onDidAttemptReadOnlyEdit=o._register(new j),o.onDidAttemptReadOnlyEdit=o._onDidAttemptReadOnlyEdit.event,o._onDidChange=o._register(new j),o.onDidChange=o._onDidChange.event,o._configuration=t,o._model=r,o._knownModelVersionId=o._model.getVersionId(),o._viewModel=i,o.context=new vU(o._configuration,o._model,o._viewModel),o._cursors=new PU(o.context),o._isHandling=!1,o._isDoingComposition=!1,o._columnSelectData=null,o._autoClosedActions=[],o._prevEditOperationType=0,o._register(o._model.onDidChangeRawContent(function(a){if(o._knownModelVersionId=a.versionId,!o._isHandling){var u=a.containsEvent(1);o._onModelContentChanged(u)}})),o._register(i.addEventListener(function(a){sLe(a)&&o._knownModelVersionId===o._model.getVersionId()&&o.setStates("viewModel",0,o.getAll())}));var s=function(){o.context=new vU(o._configuration,o._model,o._viewModel),o._cursors.updateContext(o.context)};return o._register(o._model.onDidChangeLanguage(function(a){s()})),o._register(o._model.onDidChangeLanguageConfiguration(function(){s()})),o._register(o._model.onDidChangeOptions(function(){s()})),o._register(o._configuration.onDidChange(function(a){DY.shouldRecreate(a)&&s()})),o}return e.prototype.dispose=function(){this._cursors.dispose(),this._autoClosedActions=Ue(this._autoClosedActions),n.prototype.dispose.call(this)},e.prototype._validateAutoClosedActions=function(){if(this._autoClosedActions.length>0)for(var t=this._cursors.getSelections(),r=0;r<this._autoClosedActions.length;r++){var i=this._autoClosedActions[r];i.isValid(t)||(i.dispose(),this._autoClosedActions.splice(r,1),r--)}},e.prototype.getPrimaryCursor=function(){return this._cursors.getPrimaryCursor()},e.prototype.getLastAddedCursorIndex=function(){return this._cursors.getLastAddedCursorIndex()},e.prototype.getAll=function(){return this._cursors.getAll()},e.prototype.setStates=function(t,r,i){i!==null&&i.length>e.MAX_CURSOR_COUNT&&(i=i.slice(0,e.MAX_CURSOR_COUNT),this._onDidReachMaxCursorCount.fire(void 0));var o=new MT(this._model,this);this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,r,o)},e.prototype.setColumnSelectData=function(t){this._columnSelectData=t},e.prototype.reveal=function(t,r,i){this._revealRange(r,0,t,i)},e.prototype.revealRange=function(t,r,i,o){this.emitCursorRevealRange(r,i,t,o)},e.prototype.scrollTo=function(t){this._viewModel.viewLayout.setScrollPositionSmooth({scrollTop:t})},e.prototype.saveState=function(){for(var t=[],r=this._cursors.getSelections(),i=0,o=r.length;i<o;i++){var s=r[i];t.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return t},e.prototype.restoreState=function(t){for(var r=[],i=0,o=t.length;i<o;i++){var s=t[i],a=1,u=1;s.position&&s.position.lineNumber&&(a=s.position.lineNumber),s.position&&s.position.column&&(u=s.position.column);var l=a,f=u;s.selectionStart&&s.selectionStart.lineNumber&&(l=s.selectionStart.lineNumber),s.selectionStart&&s.selectionStart.column&&(f=s.selectionStart.column),r.push({selectionStartLineNumber:l,selectionStartColumn:f,positionLineNumber:a,positionColumn:u})}this.setStates("restoreState",0,ut.fromModelSelections(r)),this.reveal(!0,0,1)},e.prototype._onModelContentChanged=function(t){if(this._prevEditOperationType=0,t)this._cursors.dispose(),this._cursors=new PU(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary("model",1,null);else{var r=this._cursors.readSelectionFromMarkers();this.setStates("modelChange",2,ut.fromModelSelections(r))}},e.prototype.getSelection=function(){return this._cursors.getPrimaryCursor().modelState.selection},e.prototype.getColumnSelectData=function(){if(this._columnSelectData)return this._columnSelectData;var t=this._cursors.getPrimaryCursor(),r=t.viewState.position,i=r.lineNumber,o=$t.visibleColumnFromColumn2(this.context.config,this.context.viewModel,r);return{isReal:!1,fromViewLineNumber:i,fromViewVisualColumn:o,toViewLineNumber:i,toViewVisualColumn:o}},e.prototype.getSelections=function(){return this._cursors.getSelections()},e.prototype.getViewSelections=function(){return this._cursors.getViewSelections()},e.prototype.getPosition=function(){return this._cursors.getPrimaryCursor().modelState.position},e.prototype.setSelections=function(t,r){this.setStates(t,0,ut.fromModelSelections(r))},e.prototype.getPrevEditOperationType=function(){return this._prevEditOperationType},e.prototype.setPrevEditOperationType=function(t){this._prevEditOperationType=t},e.prototype._pushAutoClosedAction=function(t,r){for(var i=[],o=[],s=0,a=t.length;s<a;s++)i.push({range:t[s],options:{inlineClassName:"auto-closed-character",stickiness:1}}),o.push({range:r[s],options:{stickiness:1}});var u=this._model.deltaDecorations([],i),l=this._model.deltaDecorations([],o);this._autoClosedActions.push(new PT(this._model,u,l))},e.prototype._executeEditOperation=function(t){if(t){t.shouldPushStackElementBefore&&this._model.pushStackElement();var r=uLe.executeCommands(this._model,this._cursors.getSelections(),t.commands);if(r){this._interpretCommandResult(r);for(var i=[],o=[],s=0;s<t.commands.length;s++){var a=t.commands[s];a instanceof uZ&&a.enclosingRange&&a.closeCharacterRange&&(i.push(a.closeCharacterRange),o.push(a.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,o),this._prevEditOperationType=t.type}t.shouldPushStackElementAfter&&this._model.pushStackElement()}},e.prototype._interpretCommandResult=function(t){(!t||t.length===0)&&(t=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(t),this._cursors.normalize()},e.prototype._emitStateChangedIfNecessary=function(t,r,i){var o=new MT(this._model,this);if(o.equals(i))return!1;var s=this._cursors.getSelections(),a=this._cursors.getViewSelections();try{var u=this._beginEmit();u.emit(new axe(a))}finally{this._endEmit()}return(!i||i.cursorState.length!==o.cursorState.length||o.cursorState.some(function(l,f){return!l.modelState.equals(i.cursorState[f].modelState)}))&&this._onDidChange.fire(new aLe(s,t||"keyboard",r)),!0},e.prototype._revealRange=function(t,r,i,o){var s=this._cursors.getViewPositions(),a=s[0];if(t===1)for(var u=1;u<s.length;u++)s[u].isBefore(a)&&(a=s[u]);else if(t===2)for(var u=1;u<s.length;u++)a.isBeforeOrEqual(s[u])&&(a=s[u]);else if(s.length>1)return;var l=new R(a.lineNumber,a.column,a.lineNumber,a.column);this.emitCursorRevealRange(l,r,i,o)},e.prototype.emitCursorRevealRange=function(t,r,i,o){try{var s=this._beginEmit();s.emit(new t2(t,r,i,o))}finally{this._endEmit()}},e.prototype._findAutoClosingPairs=function(t){if(!t.length)return null;for(var r=[],i=0,o=t.length;i<o;i++){var s=t[i];if(!s.text||s.text.indexOf(`
`)>=0)return null;var a=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!a)return null;var u=a[1],l=this.context.config.autoClosingPairsClose2.get(u);if(!l||l.length!==1)return null;var f=l[0].open,h=s.text.length-a[2].length-1,d=s.text.lastIndexOf(f,h-1);if(d===-1)return null;r.push([d,h])}return r},e.prototype.executeEdits=function(t,r,i){var o=this,s=null;t==="snippet"&&(s=this._findAutoClosingPairs(r)),s&&(r[0]._isTracked=!0);var a=[],u=[],l=this._model.pushEditOperations(this.getSelections(),r,function(f){if(s)for(var h=0,d=s.length;h<d;h++){var g=s[h],v=g[0],m=g[1],y=f[h],b=y.range.startLineNumber,C=y.range.startColumn-1+v,E=y.range.startColumn-1+m;a.push(new R(b,E+1,b,E+2)),u.push(new R(b,C+1,b,E+2))}var D=i(f);return D&&(o._isHandling=!0),D});l&&(this._isHandling=!1,this.setSelections(t,l)),a.length>0&&this._pushAutoClosedAction(a,u)},e.prototype.trigger=function(t,r,i){var o=Ht;if(r===o.CompositionStart){this._isDoingComposition=!0;return}if(r===o.CompositionEnd&&(this._isDoingComposition=!1),this._configuration.editor.readOnly){this._onDidAttemptReadOnlyEdit.fire(void 0);return}var s=new MT(this._model,this),a=0;r!==o.Undo&&r!==o.Redo&&this._cursors.stopTrackingSelections(),this._cursors.ensureValidState(),this._isHandling=!0;try{switch(r){case o.Type:this._type(t,i.text);break;case o.ReplacePreviousChar:this._replacePreviousChar(i.text,i.replaceCharCnt);break;case o.Paste:a=4,this._paste(i.text,i.pasteOnNewLine,i.multicursorText);break;case o.Cut:this._cut();break;case o.Undo:a=5,this._interpretCommandResult(this._model.undo());break;case o.Redo:a=6,this._interpretCommandResult(this._model.redo());break;case o.ExecuteCommand:this._externalExecuteCommand(i);break;case o.ExecuteCommands:this._externalExecuteCommands(i);break;case o.CompositionEnd:this._interpretCompositionEnd(t);break}}catch(u){Le(u)}this._isHandling=!1,r!==o.Undo&&r!==o.Redo&&this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,a,s)&&this._revealRange(0,0,!0,0)},e.prototype._interpretCompositionEnd=function(t){if(!this._isDoingComposition&&t==="keyboard"){var r=PT.getAllAutoClosedCharacters(this._autoClosedActions);this._executeEditOperation(ma.compositionEndWithInterceptors(this._prevEditOperationType,this.context.config,this.context.model,this.getSelections(),r))}},e.prototype._type=function(t,r){if(!this._isDoingComposition&&t==="keyboard")for(var i=0,o=r.length;i<o;i++){var s=r.charCodeAt(i),a=void 0;ao(s)&&i+1<o?(a=r.charAt(i)+r.charAt(i+1),i++):a=r.charAt(i);var u=PT.getAllAutoClosedCharacters(this._autoClosedActions);this._executeEditOperation(ma.typeWithInterceptors(this._prevEditOperationType,this.context.config,this.context.model,this.getSelections(),u,a))}else this._executeEditOperation(ma.typeWithoutInterceptors(this._prevEditOperationType,this.context.config,this.context.model,this.getSelections(),r))},e.prototype._replacePreviousChar=function(t,r){this._executeEditOperation(ma.replacePreviousChar(this._prevEditOperationType,this.context.config,this.context.model,this.getSelections(),t,r))},e.prototype._paste=function(t,r,i){this._executeEditOperation(ma.paste(this.context.config,this.context.model,this.getSelections(),t,r,i))},e.prototype._cut=function(){this._executeEditOperation(oR.cut(this.context.config,this.context.model,this.getSelections()))},e.prototype._externalExecuteCommand=function(t){this._cursors.killSecondaryCursors(),this._executeEditOperation(new to(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e.prototype._externalExecuteCommands=function(t){this._executeEditOperation(new to(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e.MAX_CURSOR_COUNT=1e4,e}(aZ),uLe=function(){function n(){}return n.executeCommands=function(e,t,r){for(var i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(i,r),s=0,a=i.trackedRanges.length;s<a;s++)i.model._setTrackedRange(i.trackedRanges[s],null,0);return o},n._innerExecuteCommands=function(e,t){if(this._arrayIsEmpty(t))return null;var r=this._getEditOperations(e,t);if(r.operations.length===0)return null;var i=r.operations,o=this._getLoserCursorMap(i);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;for(var s=[],a=0,u=i.length;a<u;a++)o.hasOwnProperty(i[a].identifier.major.toString())||s.push(i[a]);r.hadTrackedEditOperation&&s.length>0&&(s[0]._isTracked=!0);var l=e.model.pushEditOperations(e.selectionsBefore,s,function(m){for(var y=[],b=0;b<e.selectionsBefore.length;b++)y[b]=[];for(var C=0,E=m;C<E.length;C++){var D=E[C];D.identifier&&y[D.identifier.major].push(D)}for(var k=function(A,M){return A.identifier.minor-M.identifier.minor},I=[],T=function(A){y[A].length>0?(y[A].sort(k),I[A]=t[A].computeCursorState(e.model,{getInverseEditOperations:function(){return y[A]},getTrackedSelection:function(M){var L=parseInt(M,10),F=e.model._getTrackedRange(e.trackedRanges[L]);return e.trackedRangesDirection[L]===0?new Ce(F.startLineNumber,F.startColumn,F.endLineNumber,F.endColumn):new Ce(F.endLineNumber,F.endColumn,F.startLineNumber,F.startColumn)}})):I[A]=e.selectionsBefore[A]},b=0;b<e.selectionsBefore.length;b++)T(b);return I});l||(l=e.selectionsBefore);var f=[];for(var h in o)o.hasOwnProperty(h)&&f.push(parseInt(h,10));f.sort(function(m,y){return y-m});for(var d=0,g=f;d<g.length;d++){var v=g[d];l.splice(v,1)}return l},n._arrayIsEmpty=function(e){for(var t=0,r=e.length;t<r;t++)if(e[t])return!1;return!0},n._getEditOperations=function(e,t){for(var r=[],i=!1,o=0,s=t.length;o<s;o++){var a=t[o];if(a){var u=this._getEditOperationsFromCommand(e,o,a);r=r.concat(u.operations),i=i||u.hadTrackedEditOperation}}return{operations:r,hadTrackedEditOperation:i}},n._getEditOperationsFromCommand=function(e,t,r){var i=[],o=0,s=function(h,d){h.isEmpty()&&d===""||i.push({identifier:{major:t,minor:o++},range:h,text:d,forceMoveMarkers:!1,isAutoWhitespaceEdit:r.insertsAutoWhitespace})},a=!1,u=function(h,d){a=!0,s(h,d)},l=function(h,d){var g;if(h.isEmpty())if(typeof d=="boolean")d?g=2:g=3;else{var v=e.model.getLineMaxColumn(h.startLineNumber);h.startColumn===v?g=2:g=3}else g=1;var m=e.trackedRanges.length,y=e.model._setTrackedRange(null,h,g);return e.trackedRanges[m]=y,e.trackedRangesDirection[m]=h.getDirection(),m.toString()},f={addEditOperation:s,addTrackedEditOperation:u,trackSelection:l};try{r.getEditOperations(e.model,f)}catch(h){return Le(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}},n._getLoserCursorMap=function(e){e=e.slice(0),e.sort(function(u,l){return-R.compareRangesUsingEnds(u.range,l.range)});for(var t={},r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(i.range.getStartPosition().isBefore(o.range.getEndPosition())){var s=void 0;i.identifier.major>o.identifier.major?s=i.identifier.major:s=o.identifier.major,t[s.toString()]=!0;for(var a=0;a<e.length;a++)e[a].identifier.major===s&&(e.splice(a,1),a<r&&r--,a--);r>0&&r--}}return t},n}(),yZ=function(){function n(e,t,r,i,o,s){this.id=e,this.label=t,this.alias=r,this._precondition=i,this._run=o,this._contextKeyService=s}return n.prototype.isSupported=function(){return this._contextKeyService.contextMatchesRules(this._precondition)},n.prototype.run=function(){if(!this.isSupported())return Promise.resolve(void 0);var e=this._run();return e||Promise.resolve(void 0)},n}(),BU={getInitialState:function(){return q0},tokenize2:function(n,e,t){return CF(0,n,e,t)}};function WU(n,e){return e===void 0&&(e=BU),cLe(n,e||BU)}function lLe(n,e,t,r,i,o){for(var s="<div>",a=r,u=0,l=0,f=e.getCount();l<f;l++){var h=e.getEndOffset(l);if(!(h<=r)){for(var d="";a<h&&a<i;a++){var g=n.charCodeAt(a);switch(g){case 9:var v=o-(a+u)%o;for(u+=v-1;v>0;)d+="&nbsp;",v--;break;case 60:d+="&lt;";break;case 62:d+="&gt;";break;case 38:d+="&amp;";break;case 0:d+="&#00;";break;case 65279:case 8232:d+="";break;case 13:d+="&#8203";break;case 32:d+="&nbsp;";break;default:d+=String.fromCharCode(g)}}if(s+='<span style="'+e.getInlineStyle(l,t)+'">'+d+"</span>",h>i||a>=i)break}}return s+="</div>",s}function cLe(n,e){for(var t='<div class="monaco-tokenized-source">',r=n.split(/\r\n|\r|\n/),i=e.getInitialState(),o=0,s=r.length;o<s;o++){var a=r[o];o>0&&(t+="<br/>");var u=e.tokenize2(a,i,0);wa.convertToEndOffset(u.tokens,a.length);for(var l=new wa(u.tokens,a),f=l.inflate(),h=0,d=0,g=f.getCount();d<g;d++){var v=f.getClassName(d),m=f.getEndOffset(d);t+='<span class="'+v+'">'+fs(a.substring(h,m))+"</span>",h=m}i=u.endState}return t+="</div>",t}var fLe=function(){function n(){this._instanceId=LG(++n.INSTANCE_COUNT),this._heights=[],this._minWidths=[],this._ids=[],this._afterLineNumbers=[],this._ordinals=[],this._prefixSum=[],this._prefixSumValidIndex=-1,this._whitespaceId2Index={},this._lastWhitespaceId=0,this._minWidth=-1}return n.findInsertionIndex=function(e,t,r,i){for(var o=0,s=e.length;o<s;){var a=o+s>>>1;t===e[a]?i<r[a]?s=a:o=a+1:t<e[a]?s=a:o=a+1}return o},n.prototype.insertWhitespace=function(e,t,r,i){e=e|0,t=t|0,r=r|0,i=i|0;var o=this._instanceId+ ++this._lastWhitespaceId,s=n.findInsertionIndex(this._afterLineNumbers,e,this._ordinals,t);return this._insertWhitespaceAtIndex(o,s,e,t,r,i),this._minWidth=-1,o},n.prototype._insertWhitespaceAtIndex=function(e,t,r,i,o,s){t=t|0,r=r|0,i=i|0,o=o|0,s=s|0,this._heights.splice(t,0,o),this._minWidths.splice(t,0,s),this._ids.splice(t,0,e),this._afterLineNumbers.splice(t,0,r),this._ordinals.splice(t,0,i),this._prefixSum.splice(t,0,0);for(var a=Object.keys(this._whitespaceId2Index),u=0,l=a.length;u<l;u++){var f=a[u],h=this._whitespaceId2Index[f];h>=t&&(this._whitespaceId2Index[f]=h+1)}this._whitespaceId2Index[e]=t,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)},n.prototype.changeWhitespace=function(e,t,r){t=t|0,r=r|0;var i=!1;return i=this.changeWhitespaceHeight(e,r)||i,i=this.changeWhitespaceAfterLineNumber(e,t)||i,i},n.prototype.changeWhitespaceHeight=function(e,t){if(t=t|0,this._whitespaceId2Index.hasOwnProperty(e)){var r=this._whitespaceId2Index[e];if(this._heights[r]!==t)return this._heights[r]=t,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,r-1),!0}return!1},n.prototype.changeWhitespaceAfterLineNumber=function(e,t){if(t=t|0,this._whitespaceId2Index.hasOwnProperty(e)){var r=this._whitespaceId2Index[e];if(this._afterLineNumbers[r]!==t){var i=this._ordinals[r],o=this._heights[r],s=this._minWidths[r];this.removeWhitespace(e);var a=n.findInsertionIndex(this._afterLineNumbers,t,this._ordinals,i);return this._insertWhitespaceAtIndex(e,a,t,i,o,s),!0}}return!1},n.prototype.removeWhitespace=function(e){if(this._whitespaceId2Index.hasOwnProperty(e)){var t=this._whitespaceId2Index[e];return delete this._whitespaceId2Index[e],this._removeWhitespaceAtIndex(t),this._minWidth=-1,!0}return!1},n.prototype._removeWhitespaceAtIndex=function(e){e=e|0,this._heights.splice(e,1),this._minWidths.splice(e,1),this._ids.splice(e,1),this._afterLineNumbers.splice(e,1),this._ordinals.splice(e,1),this._prefixSum.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1);for(var t=Object.keys(this._whitespaceId2Index),r=0,i=t.length;r<i;r++){var o=t[r],s=this._whitespaceId2Index[o];s>=e&&(this._whitespaceId2Index[o]=s-1)}},n.prototype.onLinesDeleted=function(e,t){e=e|0,t=t|0;for(var r=0,i=this._afterLineNumbers.length;r<i;r++){var o=this._afterLineNumbers[r];e<=o&&o<=t?this._afterLineNumbers[r]=e-1:o>t&&(this._afterLineNumbers[r]-=t-e+1)}},n.prototype.onLinesInserted=function(e,t){e=e|0,t=t|0;for(var r=0,i=this._afterLineNumbers.length;r<i;r++){var o=this._afterLineNumbers[r];e<=o&&(this._afterLineNumbers[r]+=t-e+1)}},n.prototype.getTotalHeight=function(){return this._heights.length===0?0:this.getAccumulatedHeight(this._heights.length-1)},n.prototype.getAccumulatedHeight=function(e){e=e|0;var t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._prefixSum[0]=this._heights[0],t++);for(var r=t;r<=e;r++)this._prefixSum[r]=this._prefixSum[r-1]+this._heights[r];return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._prefixSum[e]},n.prototype.getAccumulatedHeightBeforeLineNumber=function(e){e=e|0;var t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getAccumulatedHeight(t)},n.prototype._findLastWhitespaceBeforeLineNumber=function(e){e=e|0;for(var t=this._afterLineNumbers,r=0,i=t.length-1;r<=i;){var o=i-r|0,s=o/2|0,a=r+s|0;if(t[a]<e){if(a+1>=t.length||t[a+1]>=e)return a;r=a+1|0}else i=a-1|0}return-1},n.prototype._findFirstWhitespaceAfterLineNumber=function(e){e=e|0;var t=this._findLastWhitespaceBeforeLineNumber(e),r=t+1;return r<this._heights.length?r:-1},n.prototype.getFirstWhitespaceIndexAfterLineNumber=function(e){return e=e|0,this._findFirstWhitespaceAfterLineNumber(e)},n.prototype.getCount=function(){return this._heights.length},n.prototype.getMinWidth=function(){if(this._minWidth===-1){for(var e=0,t=0,r=this._minWidths.length;t<r;t++)e=Math.max(e,this._minWidths[t]);this._minWidth=e}return this._minWidth},n.prototype.getAfterLineNumberForWhitespaceIndex=function(e){return e=e|0,this._afterLineNumbers[e]},n.prototype.getIdForWhitespaceIndex=function(e){return e=e|0,this._ids[e]},n.prototype.getHeightForWhitespaceIndex=function(e){return e=e|0,this._heights[e]},n.prototype.getWhitespaces=function(e){e=e|0;for(var t=[],r=0;r<this._heights.length;r++)t.push({id:this._ids[r],afterLineNumber:this._afterLineNumbers[r],heightInLines:this._heights[r]/e});return t},n.INSTANCE_COUNT=0,n}(),hLe=function(){function n(e,t){this._lineCount=e,this._lineHeight=t,this._whitespaces=new fLe}return n.prototype.setLineHeight=function(e){this._lineHeight=e},n.prototype.onFlushed=function(e){this._lineCount=e},n.prototype.insertWhitespace=function(e,t,r,i){return this._whitespaces.insertWhitespace(e,t,r,i)},n.prototype.changeWhitespace=function(e,t,r){return this._whitespaces.changeWhitespace(e,t,r)},n.prototype.removeWhitespace=function(e){return this._whitespaces.removeWhitespace(e)},n.prototype.onLinesDeleted=function(e,t){this._lineCount-=t-e+1,this._whitespaces.onLinesDeleted(e,t)},n.prototype.onLinesInserted=function(e,t){this._lineCount+=t-e+1,this._whitespaces.onLinesInserted(e,t)},n.prototype.getLinesTotalHeight=function(){var e=this._lineHeight*this._lineCount,t=this._whitespaces.getTotalHeight();return e+t},n.prototype.getVerticalOffsetForLineNumber=function(e){e=e|0;var t;e>1?t=this._lineHeight*(e-1):t=0;var r=this._whitespaces.getAccumulatedHeightBeforeLineNumber(e);return t+r},n.prototype.getWhitespaceAccumulatedHeightBeforeLineNumber=function(e){return this._whitespaces.getAccumulatedHeightBeforeLineNumber(e)},n.prototype.getWhitespaceMinWidth=function(){return this._whitespaces.getMinWidth()},n.prototype.isAfterLines=function(e){var t=this.getLinesTotalHeight();return e>t},n.prototype.getLineNumberAtOrAfterVerticalOffset=function(e){if(e=e|0,e<0)return 1;for(var t=this._lineCount|0,r=this._lineHeight,i=1,o=t;i<o;){var s=(i+o)/2|0,a=this.getVerticalOffsetForLineNumber(s)|0;if(e>=a+r)i=s+1;else{if(e>=a)return s;o=s}}return i>t?t:i},n.prototype.getLinesViewportData=function(e,t){e=e|0,t=t|0;var r=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(i)|0,s=this._lineCount|0,a=this._whitespaces.getFirstWhitespaceIndexAfterLineNumber(i)|0,u=this._whitespaces.getCount()|0,l,f;a===-1?(a=u,f=s+1,l=0):(f=this._whitespaces.getAfterLineNumberForWhitespaceIndex(a)|0,l=this._whitespaces.getHeightForWhitespaceIndex(a)|0);var h=o,d=h,g=5e5,v=0;o>=g&&(v=Math.floor(o/g)*g,v=Math.floor(v/r)*r,d-=v);for(var m=[],y=e+(t-e)/2,b=-1,C=i;C<=s;C++){if(b===-1){var E=h,D=h+r;(E<=y&&y<D||E>y)&&(b=C)}for(h+=r,m[C-i]=d,d+=r;f===C;)d+=l,h+=l,a++,a>=u?f=s+1:(f=this._whitespaces.getAfterLineNumberForWhitespaceIndex(a)|0,l=this._whitespaces.getHeightForWhitespaceIndex(a)|0);if(h>=t){s=C;break}}b===-1&&(b=s);var k=this.getVerticalOffsetForLineNumber(s)|0,I=i,T=s;return I<T&&o<e&&I++,I<T&&k+r>t&&T--,{bigNumbersDelta:v,startLineNumber:i,endLineNumber:s,relativeVerticalOffset:m,centeredLineNumber:b,completelyVisibleStartLineNumber:I,completelyVisibleEndLineNumber:T}},n.prototype.getVerticalOffsetForWhitespaceIndex=function(e){e=e|0;var t=this._whitespaces.getAfterLineNumberForWhitespaceIndex(e),r;t>=1?r=this._lineHeight*t:r=0;var i;return e>0?i=this._whitespaces.getAccumulatedHeight(e-1):i=0,r+i},n.prototype.getWhitespaceIndexAtOrAfterVerticallOffset=function(e){e=e|0;var t,r=0,i=this._whitespaces.getCount()-1,o,s;if(i<0)return-1;var a=this.getVerticalOffsetForWhitespaceIndex(i),u=this._whitespaces.getHeightForWhitespaceIndex(i);if(e>=a+u)return-1;for(;r<i;)if(t=Math.floor((r+i)/2),o=this.getVerticalOffsetForWhitespaceIndex(t),s=this._whitespaces.getHeightForWhitespaceIndex(t),e>=o+s)r=t+1;else{if(e>=o)return t;i=t}return r},n.prototype.getWhitespaceAtVerticalOffset=function(e){e=e|0;var t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this._whitespaces.getCount())return null;var r=this.getVerticalOffsetForWhitespaceIndex(t);if(r>e)return null;var i=this._whitespaces.getHeightForWhitespaceIndex(t),o=this._whitespaces.getIdForWhitespaceIndex(t),s=this._whitespaces.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:s,verticalOffset:r,height:i}},n.prototype.getWhitespaceViewportData=function(e,t){e=e|0,t=t|0;var r=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this._whitespaces.getCount()-1;if(r<0)return[];for(var o=[],s=r;s<=i;s++){var a=this.getVerticalOffsetForWhitespaceIndex(s),u=this._whitespaces.getHeightForWhitespaceIndex(s);if(a>=t)break;o.push({id:this._whitespaces.getIdForWhitespaceIndex(s),afterLineNumber:this._whitespaces.getAfterLineNumberForWhitespaceIndex(s),verticalOffset:a,height:u})}return o},n.prototype.getWhitespaces=function(){return this._whitespaces.getWhitespaces(this._lineHeight)},n}(),dLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pLe=125,gLe=function(n){dLe(e,n);function e(t,r,i){var o=n.call(this)||this;return o._configuration=t,o._linesLayout=new hLe(r,o._configuration.editor.lineHeight),o.scrollable=o._register(new pZ(0,i)),o._configureSmoothScrollDuration(),o.scrollable.setScrollDimensions({width:t.editor.layoutInfo.contentWidth,height:t.editor.layoutInfo.contentHeight}),o.onDidScroll=o.scrollable.onScroll,o._updateHeight(),o}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype.onHeightMaybeChanged=function(){this._updateHeight()},e.prototype._configureSmoothScrollDuration=function(){this.scrollable.setSmoothScrollDuration(this._configuration.editor.viewInfo.smoothScrolling?pLe:0)},e.prototype.onConfigurationChanged=function(t){t.lineHeight&&this._linesLayout.setLineHeight(this._configuration.editor.lineHeight),t.layoutInfo&&this.scrollable.setScrollDimensions({width:this._configuration.editor.layoutInfo.contentWidth,height:this._configuration.editor.layoutInfo.contentHeight}),t.viewInfo&&this._configureSmoothScrollDuration(),this._updateHeight()},e.prototype.onFlushed=function(t){this._linesLayout.onFlushed(t)},e.prototype.onLinesDeleted=function(t,r){this._linesLayout.onLinesDeleted(t,r)},e.prototype.onLinesInserted=function(t,r){this._linesLayout.onLinesInserted(t,r)},e.prototype._getHorizontalScrollbarHeight=function(t){return this._configuration.editor.viewInfo.scrollbar.horizontal===2||t.width>=t.scrollWidth?0:this._configuration.editor.viewInfo.scrollbar.horizontalScrollbarSize},e.prototype._getTotalHeight=function(){var t=this.scrollable.getScrollDimensions(),r=this._linesLayout.getLinesTotalHeight();return this._configuration.editor.viewInfo.scrollBeyondLastLine?r+=t.height-this._configuration.editor.lineHeight:r+=this._getHorizontalScrollbarHeight(t),Math.max(t.height,r)},e.prototype._updateHeight=function(){this.scrollable.setScrollDimensions({scrollHeight:this._getTotalHeight()})},e.prototype.getCurrentViewport=function(){var t=this.scrollable.getScrollDimensions(),r=this.scrollable.getCurrentScrollPosition();return new A8(r.scrollTop,r.scrollLeft,t.width,t.height)},e.prototype.getFutureViewport=function(){var t=this.scrollable.getScrollDimensions(),r=this.scrollable.getFutureScrollPosition();return new A8(r.scrollTop,r.scrollLeft,t.width,t.height)},e.prototype._computeScrollWidth=function(t,r){var i=this._configuration.editor.wrappingInfo.isViewportWrapping;if(!i){var o=this._configuration.editor.viewInfo.scrollBeyondLastColumn*this._configuration.editor.fontInfo.typicalHalfwidthCharacterWidth,s=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o,r,s)}return Math.max(t,r)},e.prototype.onMaxLineWidthChanged=function(t){var r=this._computeScrollWidth(t,this.getCurrentViewport().width);this.scrollable.setScrollDimensions({scrollWidth:r}),this._updateHeight()},e.prototype.saveState=function(){var t=this.scrollable.getFutureScrollPosition(),r=t.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(r),o=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:r,scrollTopWithoutViewZones:r-o,scrollLeft:t.scrollLeft}},e.prototype.addWhitespace=function(t,r,i,o){return this._linesLayout.insertWhitespace(t,r,i,o)},e.prototype.changeWhitespace=function(t,r,i){return this._linesLayout.changeWhitespace(t,r,i)},e.prototype.removeWhitespace=function(t){return this._linesLayout.removeWhitespace(t)},e.prototype.getVerticalOffsetForLineNumber=function(t){return this._linesLayout.getVerticalOffsetForLineNumber(t)},e.prototype.isAfterLines=function(t){return this._linesLayout.isAfterLines(t)},e.prototype.getLineNumberAtVerticalOffset=function(t){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t)},e.prototype.getWhitespaceAtVerticalOffset=function(t){return this._linesLayout.getWhitespaceAtVerticalOffset(t)},e.prototype.getLinesViewportData=function(){var t=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(t.top,t.top+t.height)},e.prototype.getLinesViewportDataAtScrollTop=function(t){var r=this.scrollable.getScrollDimensions();return t+r.height>r.scrollHeight&&(t=r.scrollHeight-r.height),t<0&&(t=0),this._linesLayout.getLinesViewportData(t,t+r.height)},e.prototype.getWhitespaceViewportData=function(){var t=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(t.top,t.top+t.height)},e.prototype.getWhitespaces=function(){return this._linesLayout.getWhitespaces()},e.prototype.getScrollWidth=function(){var t=this.scrollable.getScrollDimensions();return t.scrollWidth},e.prototype.getScrollHeight=function(){var t=this.scrollable.getScrollDimensions();return t.scrollHeight},e.prototype.getCurrentScrollLeft=function(){var t=this.scrollable.getCurrentScrollPosition();return t.scrollLeft},e.prototype.getCurrentScrollTop=function(){var t=this.scrollable.getCurrentScrollPosition();return t.scrollTop},e.prototype.validateScrollPosition=function(t){return this.scrollable.validateScrollPosition(t)},e.prototype.setScrollPositionNow=function(t){this.scrollable.setScrollPositionNow(t)},e.prototype.setScrollPositionSmooth=function(t){this.scrollable.setScrollPositionSmooth(t)},e.prototype.deltaScrollNow=function(t,r){var i=this.scrollable.getCurrentScrollPosition();this.scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+t,scrollTop:i.scrollTop+r})},e}(te),vLe=function(){function n(e,t){this.outputLineIndex=e,this.outputOffset=t}return n}(),mLe=function(){function n(e){this._lines=e}return n.prototype.convertViewPositionToModelPosition=function(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)},n.prototype.convertViewRangeToModelRange=function(e){var t=this._lines.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this._lines.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new R(t.lineNumber,t.column,r.lineNumber,r.column)},n.prototype.validateViewPosition=function(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)},n.prototype.validateViewRange=function(e,t){var r=this._lines.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this._lines.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new R(r.lineNumber,r.column,i.lineNumber,i.column)},n.prototype.convertModelPositionToViewPosition=function(e){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column)},n.prototype.convertModelRangeToViewRange=function(e){var t=this._lines.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn),r=this._lines.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn);return new R(t.lineNumber,t.column,r.lineNumber,r.column)},n.prototype.modelPositionIsVisible=function(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)},n}(),_Le=function(){function n(e,t,r,i,o,s){this.model=e,this._validModelVersionId=-1,this.tabSize=r,this.wrappingColumn=i,this.columnsForFullWidthChar=o,this.wrappingIndent=s,this.linePositionMapperFactory=t,this._constructLines(!0)}return n.prototype.dispose=function(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])},n.prototype.createCoordinatesConverter=function(){return new mLe(this)},n.prototype._ensureValidState=function(){var e=this.model.getVersionId();if(e!==this._validModelVersionId)throw new Error("ViewModel is out of sync with Model!");this.lines.length!==this.model.getLineCount()&&this._constructLines(!1)},n.prototype._constructLines=function(e){var t=this;this.lines=[],e&&(this.hiddenAreasIds=[]);for(var r=this.model.getLinesContent(),i=r.length,o=new Uint32Array(i),s=this.hiddenAreasIds.map(function(m){return t.model.getDecorationRange(m)}).sort(R.compareRangesUsingStarts),a=1,u=0,l=-1,f=l+1<s.length?u+1:i+2,h=0;h<i;h++){var d=h+1;d===f&&(l++,a=s[l].startLineNumber,u=s[l].endLineNumber,f=l+1<s.length?u+1:i+2);var g=d>=a&&d<=u,v=FT(this.linePositionMapperFactory,r[h],this.tabSize,this.wrappingColumn,this.columnsForFullWidthChar,this.wrappingIndent,!g);o[h]=v.getViewLineCount(),this.lines[h]=v}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new hCe(o)},n.prototype.getHiddenAreas=function(){var e=this;return this.hiddenAreasIds.map(function(t){return e.model.getDecorationRange(t)})},n.prototype._reduceRanges=function(e){var t=this;if(e.length===0)return[];for(var r=e.map(function(f){return t.model.validateRange(f)}).sort(R.compareRangesUsingStarts),i=[],o=r[0].startLineNumber,s=r[0].endLineNumber,a=1,u=r.length;a<u;a++){var l=r[a];l.startLineNumber>s+1?(i.push(new R(o,1,s,1)),o=l.startLineNumber,s=l.endLineNumber):l.endLineNumber>s&&(s=l.endLineNumber)}return i.push(new R(o,1,s,1)),i},n.prototype.setHiddenAreas=function(e){var t=this,r=this._reduceRanges(e),i=this.hiddenAreasIds.map(function(D){return t.model.getDecorationRange(D)}).sort(R.compareRangesUsingStarts);if(r.length===i.length){for(var o=!1,s=0;s<r.length;s++)if(!r[s].equalsRange(i[s])){o=!0;break}if(!o)return!1}for(var a=[],u=0,l=r;u<l.length;u++){var f=l[u];a.push({range:f,options:tt.EMPTY})}this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,a);for(var h=r,d=1,g=0,v=-1,m=v+1<h.length?g+1:this.lines.length+2,y=!1,s=0;s<this.lines.length;s++){var b=s+1;b===m&&(v++,d=h[v].startLineNumber,g=h[v].endLineNumber,m=v+1<h.length?g+1:this.lines.length+2);var C=!1;if(b>=d&&b<=g?this.lines[s].isVisible()&&(this.lines[s]=this.lines[s].setVisible(!1),C=!0):(y=!0,this.lines[s].isVisible()||(this.lines[s]=this.lines[s].setVisible(!0),C=!0)),C){var E=this.lines[s].getViewLineCount();this.prefixSumComputer.changeValue(s,E)}}return y||this.setHiddenAreas([]),!0},n.prototype.modelPositionIsVisible=function(e,t){return e<1||e>this.lines.length?!1:this.lines[e-1].isVisible()},n.prototype.setTabSize=function(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1),!0)},n.prototype.setWrappingSettings=function(e,t,r){return this.wrappingIndent===e&&this.wrappingColumn===t&&this.columnsForFullWidthChar===r?!1:(this.wrappingIndent=e,this.wrappingColumn=t,this.columnsForFullWidthChar=r,this._constructLines(!1),!0)},n.prototype.onModelFlushed=function(){this._constructLines(!0)},n.prototype.onModelLinesDeleted=function(e,t,r){if(e<=this._validModelVersionId)return null;var i=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,o=this.prefixSumComputer.getAccumulatedValue(r-1);return this.lines.splice(t-1,r-t+1),this.prefixSumComputer.removeValues(t-1,r-t+1),new nR(i,o)},n.prototype.onModelLinesInserted=function(e,t,r,i){if(e<=this._validModelVersionId)return null;for(var o=this.getHiddenAreas(),s=!1,a=new $(t,1),u=0,l=o;u<l.length;u++){var f=l[u];if(f.containsPosition(a)){s=!0;break}}for(var h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,d=0,g=[],v=new Uint32Array(i.length),m=0,y=i.length;m<y;m++){var b=FT(this.linePositionMapperFactory,i[m],this.tabSize,this.wrappingColumn,this.columnsForFullWidthChar,this.wrappingIndent,!s);g.push(b);var C=b.getViewLineCount();d+=C,v[m]=C}return this.lines=this.lines.slice(0,t-1).concat(g).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,v),new rR(h,h+d-1)},n.prototype.onModelLineChanged=function(e,t,r){if(e<=this._validModelVersionId)return[!1,null,null,null];var i=t-1,o=this.lines[i].getViewLineCount(),s=this.lines[i].isVisible(),a=FT(this.linePositionMapperFactory,r,this.tabSize,this.wrappingColumn,this.columnsForFullWidthChar,this.wrappingIndent,s);this.lines[i]=a;var u=this.lines[i].getViewLineCount(),l=!1,f=0,h=-1,d=0,g=-1,v=0,m=-1;o>u?(f=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,h=f+u-1,v=h+1,m=v+(o-u)-1,l=!0):o<u?(f=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,h=f+o-1,d=h+1,g=d+(u-o)-1,l=!0):(f=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,h=f+u-1),this.prefixSumComputer.changeValue(i,u);var y=f<=h?new sZ(f,h):null,b=d<=g?new rR(d,g):null,C=v<=m?new nR(v,m):null;return[l,y,b,C]},n.prototype.acceptVersionId=function(e){this._validModelVersionId=e,this.lines.length===1&&!this.lines[0].isVisible()&&this.setHiddenAreas([])},n.prototype.getViewLineCount=function(){return this._ensureValidState(),this.prefixSumComputer.getTotalValue()},n.prototype._toValidViewLineNumber=function(e){if(e<1)return 1;var t=this.getViewLineCount();return e>t?t:e},n.prototype.warmUpLookupCache=function(e,t){this.prefixSumComputer.warmUpCache(e-1,t-1)},n.prototype.getActiveIndentGuide=function(e,t,r){this._ensureValidState(),e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),r=this._toValidViewLineNumber(r);var i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),s=this.convertViewPositionToModelPosition(r,this.getViewLineMinColumn(r)),a=this.model.getActiveIndentGuide(i.lineNumber,o.lineNumber,s.lineNumber),u=this.convertModelPositionToViewPosition(a.startLineNumber,1),l=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:u.lineNumber,endLineNumber:l.lineNumber,indent:a.indent}},n.prototype.getViewLinesIndentGuides=function(e,t){this._ensureValidState(),e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);for(var r=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t)),o=[],s=[],a=[],u=r.lineNumber-1,l=i.lineNumber-1,f=null,h=u;h<=l;h++){var d=this.lines[h];if(d.isVisible()){var g=d.getViewLineNumberOfModelPosition(0,h===u?r.column:1),v=d.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(h+1)),m=v-g+1,y=0;m>1&&d.getViewLineMinColumn(this.model,h+1,v)===1&&(y=g===0?1:2),s.push(m),a.push(y),f===null&&(f=new $(h+1,0))}else f!==null&&(o=o.concat(this.model.getLinesIndentGuides(f.lineNumber,h)),f=null)}f!==null&&(o=o.concat(this.model.getLinesIndentGuides(f.lineNumber,i.lineNumber)),f=null);for(var b=t-e+1,C=new Array(b),E=0,D=0,k=o.length;D<k;D++){var I=o[D],m=Math.min(b-E,s[D]),y=a[D],T=void 0;y===2?T=0:y===1?T=1:T=m;for(var A=0;A<m;A++)A===T&&(I=0),C[E++]=I}return C},n.prototype.getViewLineContent=function(e){this._ensureValidState(),e=this._toValidViewLineNumber(e);var t=this.prefixSumComputer.getIndexOf(e-1),r=t.index,i=t.remainder;return this.lines[r].getViewLineContent(this.model,r+1,i)},n.prototype.getViewLineLength=function(e){this._ensureValidState(),e=this._toValidViewLineNumber(e);var t=this.prefixSumComputer.getIndexOf(e-1),r=t.index,i=t.remainder;return this.lines[r].getViewLineLength(this.model,r+1,i)},n.prototype.getViewLineMinColumn=function(e){this._ensureValidState(),e=this._toValidViewLineNumber(e);var t=this.prefixSumComputer.getIndexOf(e-1),r=t.index,i=t.remainder;return this.lines[r].getViewLineMinColumn(this.model,r+1,i)},n.prototype.getViewLineMaxColumn=function(e){this._ensureValidState(),e=this._toValidViewLineNumber(e);var t=this.prefixSumComputer.getIndexOf(e-1),r=t.index,i=t.remainder;return this.lines[r].getViewLineMaxColumn(this.model,r+1,i)},n.prototype.getViewLineData=function(e){this._ensureValidState(),e=this._toValidViewLineNumber(e);var t=this.prefixSumComputer.getIndexOf(e-1),r=t.index,i=t.remainder;return this.lines[r].getViewLineData(this.model,r+1,i)},n.prototype.getViewLinesData=function(e,t,r){this._ensureValidState(),e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);for(var i=this.prefixSumComputer.getIndexOf(e-1),o=e,s=i.index,a=i.remainder,u=[],l=s,f=this.model.getLineCount();l<f;l++){var h=this.lines[l];if(h.isVisible()){var d=l===s?a:0,g=h.getViewLineCount()-d,v=!1;o+g>t&&(v=!0,g=t-o+1);var m=d+g;if(h.getViewLinesData(this.model,l+1,d,m,o-e,r,u),o+=g,v)break}}return u},n.prototype.validateViewPosition=function(e,t,r){this._ensureValidState(),e=this._toValidViewLineNumber(e);var i=this.prefixSumComputer.getIndexOf(e-1),o=i.index,s=i.remainder,a=this.lines[o],u=a.getViewLineMinColumn(this.model,o+1,s),l=a.getViewLineMaxColumn(this.model,o+1,s);t<u&&(t=u),t>l&&(t=l);var f=a.getModelColumnOfViewPosition(s,t),h=this.model.validatePosition(new $(o+1,f));return h.equals(r)?new $(e,t):this.convertModelPositionToViewPosition(r.lineNumber,r.column)},n.prototype.convertViewPositionToModelPosition=function(e,t){this._ensureValidState(),e=this._toValidViewLineNumber(e);var r=this.prefixSumComputer.getIndexOf(e-1),i=r.index,o=r.remainder,s=this.lines[i].getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new $(i+1,s))},n.prototype.convertModelPositionToViewPosition=function(e,t){this._ensureValidState();for(var r=this.model.validatePosition(new $(e,t)),i=r.lineNumber,o=r.column,s=i-1,a=!1;s>0&&!this.lines[s].isVisible();)s--,a=!0;if(s===0&&!this.lines[s].isVisible())return new $(1,1);var u=1+(s===0?0:this.prefixSumComputer.getAccumulatedValue(s-1)),l;return a?l=this.lines[s].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(s+1)):l=this.lines[i-1].getViewPositionOfModelPosition(u,o),l},n.prototype._getViewLineNumberForModelPosition=function(e,t){var r=e-1;if(this.lines[r].isVisible()){var i=1+(r===0?0:this.prefixSumComputer.getAccumulatedValue(r-1));return this.lines[r].getViewLineNumberOfModelPosition(i,t)}for(;r>0&&!this.lines[r].isVisible();)r--;if(r===0&&!this.lines[r].isVisible())return 1;var o=1+(r===0?0:this.prefixSumComputer.getAccumulatedValue(r-1));return this.lines[r].getViewLineNumberOfModelPosition(o,this.model.getLineMaxColumn(r+1))},n.prototype.getAllOverviewRulerDecorations=function(e,t,r){for(var i=this.model.getOverviewRulerDecorations(e,t),o=new CZ,s=0,a=i;s<a.length;s++){var u=a[s],l=u.options.overviewRuler,f=l?l.position:0;if(f!==0){var h=l.getColor(r),d=this._getViewLineNumberForModelPosition(u.range.startLineNumber,u.range.startColumn),g=this._getViewLineNumberForModelPosition(u.range.endLineNumber,u.range.endColumn);o.accept(h,d,g,f)}}return o.result},n.prototype.getDecorationsInRange=function(e,t,r){var i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-i.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new R(i.lineNumber,1,o.lineNumber,o.column),t,r);for(var s=[],a=i.lineNumber-1,u=o.lineNumber-1,l=null,f=a;f<=u;f++){var h=this.lines[f];if(h.isVisible())l===null&&(l=new $(f+1,f===a?i.column:1));else if(l!==null){var d=this.model.getLineMaxColumn(f);s=s.concat(this.model.getDecorationsInRange(new R(l.lineNumber,l.column,f,d),t,r)),l=null}}l!==null&&(s=s.concat(this.model.getDecorationsInRange(new R(l.lineNumber,l.column,o.lineNumber,o.column),t,r)),l=null),s.sort(function(D,k){var I=R.compareRangesUsingStarts(D.range,k.range);return I===0?D.id<k.id?-1:D.id>k.id?1:0:I});for(var g=[],v=0,m=null,y=0,b=s;y<b.length;y++){var C=b[y],E=C.id;m!==E&&(m=E,g[v++]=C)}return g},n}(),bZ=function(){function n(){}return n.prototype.isVisible=function(){return!0},n.prototype.setVisible=function(e){return e?this:wZ.INSTANCE},n.prototype.getViewLineCount=function(){return 1},n.prototype.getViewLineContent=function(e,t,r){return e.getLineContent(t)},n.prototype.getViewLineLength=function(e,t,r){return e.getLineLength(t)},n.prototype.getViewLineMinColumn=function(e,t,r){return e.getLineMinColumn(t)},n.prototype.getViewLineMaxColumn=function(e,t,r){return e.getLineMaxColumn(t)},n.prototype.getViewLineData=function(e,t,r){var i=e.getLineTokens(t),o=i.getLineContent();return new LF(o,!1,1,o.length+1,i.inflate())},n.prototype.getViewLinesData=function(e,t,r,i,o,s,a){if(!s[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)},n.prototype.getModelColumnOfViewPosition=function(e,t){return t},n.prototype.getViewPositionOfModelPosition=function(e,t){return new $(e,t)},n.prototype.getViewLineNumberOfModelPosition=function(e,t){return e},n.INSTANCE=new n,n}(),wZ=function(){function n(){}return n.prototype.isVisible=function(){return!1},n.prototype.setVisible=function(e){return e?bZ.INSTANCE:this},n.prototype.getViewLineCount=function(){return 0},n.prototype.getViewLineContent=function(e,t,r){throw new Error("Not supported")},n.prototype.getViewLineLength=function(e,t,r){throw new Error("Not supported")},n.prototype.getViewLineMinColumn=function(e,t,r){throw new Error("Not supported")},n.prototype.getViewLineMaxColumn=function(e,t,r){throw new Error("Not supported")},n.prototype.getViewLineData=function(e,t,r){throw new Error("Not supported")},n.prototype.getViewLinesData=function(e,t,r,i,o,s,a){throw new Error("Not supported")},n.prototype.getModelColumnOfViewPosition=function(e,t){throw new Error("Not supported")},n.prototype.getViewPositionOfModelPosition=function(e,t){throw new Error("Not supported")},n.prototype.getViewLineNumberOfModelPosition=function(e,t){throw new Error("Not supported")},n.INSTANCE=new n,n}(),yLe=function(){function n(e,t){this.positionMapper=e,this.wrappedIndent=this.positionMapper.getWrappedLinesIndent(),this.wrappedIndentLength=this.wrappedIndent.length,this.outputLineCount=this.positionMapper.getOutputLineCount(),this._isVisible=t}return n.prototype.isVisible=function(){return this._isVisible},n.prototype.setVisible=function(e){return this._isVisible=e,this},n.prototype.getViewLineCount=function(){return this._isVisible?this.outputLineCount:0},n.prototype.getInputStartOffsetOfOutputLineIndex=function(e){return this.positionMapper.getInputOffsetOfOutputPosition(e,0)},n.prototype.getInputEndOffsetOfOutputLineIndex=function(e,t,r){return r+1===this.outputLineCount?e.getLineMaxColumn(t)-1:this.positionMapper.getInputOffsetOfOutputPosition(r+1,0)},n.prototype.getViewLineContent=function(e,t,r){if(!this._isVisible)throw new Error("Not supported");var i=this.getInputStartOffsetOfOutputLineIndex(r),o=this.getInputEndOffsetOfOutputLineIndex(e,t,r),s=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:o+1});return r>0&&(s=this.wrappedIndent+s),s},n.prototype.getViewLineLength=function(e,t,r){if(!this._isVisible)throw new Error("Not supported");var i=this.getInputStartOffsetOfOutputLineIndex(r),o=this.getInputEndOffsetOfOutputLineIndex(e,t,r),s=o-i;return r>0&&(s=this.wrappedIndent.length+s),s},n.prototype.getViewLineMinColumn=function(e,t,r){if(!this._isVisible)throw new Error("Not supported");return r>0?this.wrappedIndentLength+1:1},n.prototype.getViewLineMaxColumn=function(e,t,r){if(!this._isVisible)throw new Error("Not supported");return this.getViewLineContent(e,t,r).length+1},n.prototype.getViewLineData=function(e,t,r){if(!this._isVisible)throw new Error("Not supported");var i=this.getInputStartOffsetOfOutputLineIndex(r),o=this.getInputEndOffsetOfOutputLineIndex(e,t,r),s=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:o+1});r>0&&(s=this.wrappedIndent+s);var a=r>0?this.wrappedIndentLength+1:1,u=s.length+1,l=r+1<this.getViewLineCount(),f=0;r>0&&(f=this.wrappedIndentLength);var h=e.getLineTokens(t);return new LF(s,l,a,u,h.sliceAndInflate(i,o,f))},n.prototype.getViewLinesData=function(e,t,r,i,o,s,a){if(!this._isVisible)throw new Error("Not supported");for(var u=r;u<i;u++){var l=o+u-r;if(!s[l]){a[l]=null;continue}a[l]=this.getViewLineData(e,t,u)}},n.prototype.getModelColumnOfViewPosition=function(e,t){if(!this._isVisible)throw new Error("Not supported");var r=t-1;return e>0&&(r<this.wrappedIndentLength?r=0:r-=this.wrappedIndentLength),this.positionMapper.getInputOffsetOfOutputPosition(e,r)+1},n.prototype.getViewPositionOfModelPosition=function(e,t){if(!this._isVisible)throw new Error("Not supported");var r=this.positionMapper.getOutputPositionOfInputOffset(t-1),i=r.outputLineIndex,o=r.outputOffset+1;return i>0&&(o+=this.wrappedIndentLength),new $(e+i,o)},n.prototype.getViewLineNumberOfModelPosition=function(e,t){if(!this._isVisible)throw new Error("Not supported");var r=this.positionMapper.getOutputPositionOfInputOffset(t-1);return e+r.outputLineIndex},n}();function FT(n,e,t,r,i,o,s){var a=n.createLineMapping(e,t,r,i,o);return a===null?s?bZ.INSTANCE:wZ.INSTANCE:new yLe(a,s)}var bLe=function(){function n(e){this._lines=e}return n.prototype._validPosition=function(e){return this._lines.model.validatePosition(e)},n.prototype._validRange=function(e){return this._lines.model.validateRange(e)},n.prototype.convertViewPositionToModelPosition=function(e){return this._validPosition(e)},n.prototype.convertViewRangeToModelRange=function(e){return this._validRange(e)},n.prototype.validateViewPosition=function(e,t){return this._validPosition(t)},n.prototype.validateViewRange=function(e,t){return this._validRange(t)},n.prototype.convertModelPositionToViewPosition=function(e){return this._validPosition(e)},n.prototype.convertModelRangeToViewRange=function(e){return this._validRange(e)},n.prototype.modelPositionIsVisible=function(e){var t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)},n}(),wLe=function(){function n(e){this.model=e}return n.prototype.dispose=function(){},n.prototype.createCoordinatesConverter=function(){return new bLe(this)},n.prototype.getHiddenAreas=function(){return[]},n.prototype.setHiddenAreas=function(e){return!1},n.prototype.setTabSize=function(e){return!1},n.prototype.setWrappingSettings=function(e,t,r){return!1},n.prototype.onModelFlushed=function(){},n.prototype.onModelLinesDeleted=function(e,t,r){return new nR(t,r)},n.prototype.onModelLinesInserted=function(e,t,r,i){return new rR(t,r)},n.prototype.onModelLineChanged=function(e,t,r){return[!1,new sZ(t,t),null,null]},n.prototype.acceptVersionId=function(e){},n.prototype.getViewLineCount=function(){return this.model.getLineCount()},n.prototype.warmUpLookupCache=function(e,t){},n.prototype.getActiveIndentGuide=function(e,t,r){return{startLineNumber:e,endLineNumber:e,indent:0}},n.prototype.getViewLinesIndentGuides=function(e,t){for(var r=t-e+1,i=new Array(r),o=0;o<r;o++)i[o]=0;return i},n.prototype.getViewLineContent=function(e){return this.model.getLineContent(e)},n.prototype.getViewLineLength=function(e){return this.model.getLineLength(e)},n.prototype.getViewLineMinColumn=function(e){return this.model.getLineMinColumn(e)},n.prototype.getViewLineMaxColumn=function(e){return this.model.getLineMaxColumn(e)},n.prototype.getViewLineData=function(e){var t=this.model.getLineTokens(e),r=t.getLineContent();return new LF(r,!1,1,r.length+1,t.inflate())},n.prototype.getViewLinesData=function(e,t,r){var i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);for(var o=[],s=e;s<=t;s++){var a=s-e;r[a]||(o[a]=null),o[a]=this.getViewLineData(s)}return o},n.prototype.getAllOverviewRulerDecorations=function(e,t,r){for(var i=this.model.getOverviewRulerDecorations(e,t),o=new CZ,s=0,a=i;s<a.length;s++){var u=a[s],l=u.options.overviewRuler,f=l?l.position:0;if(f!==0){var h=l.getColor(r),d=u.range.startLineNumber,g=u.range.endLineNumber;o.accept(h,d,g,f)}}return o.result},n.prototype.getDecorationsInRange=function(e,t,r){return this.model.getDecorationsInRange(e,t,r)},n}(),CZ=function(){function n(){this.result=Object.create(null)}return n.prototype.accept=function(e,t,r,i){var o=this.result[e];if(o){var s=o[o.length-3],a=o[o.length-1];if(s===i&&a+1>=t){r>a&&(o[o.length-1]=r);return}o.push(i,t,r)}else this.result[e]=[i,t,r]},n}(),CLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SLe=function(n){CLe(e,n);function e(t,r,i){for(var o=n.call(this,0)||this,s=0;s<t.length;s++)o.set(t.charCodeAt(s),1);for(var s=0;s<r.length;s++)o.set(r.charCodeAt(s),2);for(var s=0;s<i.length;s++)o.set(i.charCodeAt(s),3);return o}return e.prototype.get=function(t){return t>=12352&&t<=12543||t>=13312&&t<=19903||t>=19968&&t<=40959?4:n.prototype.get.call(this,t)},e}(dI),ELe=function(){function n(e,t,r){this.classifier=new SLe(e,t,r)}return n.nextVisibleColumn=function(e,t,r,i){return e=+e,t=+t,i=+i,r?e+(t-e%t):e+i},n.prototype.createLineMapping=function(e,t,r,i,o){if(r===-1)return null;t=+t,r=+r,i=+i,o=+o;var s=0,a="",u=-1;if(o!==0&&(u=Mo(e),u!==-1)){a=e.substring(0,u);for(var l=0;l<u;l++)s=n.nextVisibleColumn(s,t,e.charCodeAt(l)===9,1);var f=0;o===2?f=1:o===3&&(f=2);for(var l=0;l<f;l++)a+="	",s=n.nextVisibleColumn(s,t,!0,1);s+i>r&&(a="",s=0)}for(var h=this.classifier,d=0,g=[],v=0,m=0,y=-1,b=0,C=-1,E=0,D=e.length,l=0;l<D;l++){var k=e.charCodeAt(l),I=k===9,T=h.get(k);if(uF(k)){m=m+1;continue}if(T===1&&(y=l,b=s),T===4&&l>0){var A=e.charCodeAt(l-1),M=h.get(A);M!==1&&(y=l,b=s)}var L=1;if(Sl(k)&&(L=i),m=n.nextVisibleColumn(m,t,I,L),m>r&&l!==0){var F=void 0,W=void 0;y!==-1&&b<=r?(F=y,W=b):C!==-1&&E<=r?(F=C,W=E):(F=l,W=s),g[v++]=F-d,d=F,m=n.nextVisibleColumn(W,t,I,L),y=-1,b=0,C=-1,E=0}if(y!==-1&&(b=n.nextVisibleColumn(b,t,I,L)),C!==-1&&(E=n.nextVisibleColumn(E,t,I,L)),T===2&&(o===0||l>=u)&&(y=l+1,b=s),T===4&&l<D-1){var z=e.charCodeAt(l+1),K=h.get(z);K!==2&&(y=l+1,b=s)}T===3&&(C=l+1,E=s)}return v===0?null:(g[v++]=D-d,new ILe(new EF(cCe(g)),a))},n}(),ILe=function(){function n(e,t){this._prefixSums=e,this._wrappedLinesIndent=t}return n.prototype.getOutputLineCount=function(){return this._prefixSums.getCount()},n.prototype.getWrappedLinesIndent=function(){return this._wrappedLinesIndent},n.prototype.getInputOffsetOfOutputPosition=function(e,t){return e===0?t:this._prefixSums.getAccumulatedValue(e-1)+t},n.prototype.getOutputPositionOfInputOffset=function(e){var t=this._prefixSums.getIndexOf(e);return new vLe(t.index,t.remainder)},n}(),xLe=function(){function n(e,t,r,i,o){this.editorId=e,this.model=t,this.configuration=r,this._linesCollection=i,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}return n.prototype._clearCachedModelDecorationsResolver=function(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null},n.prototype.dispose=function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()},n.prototype.reset=function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()},n.prototype.onModelDecorationsChanged=function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()},n.prototype.onLineMappingChanged=function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()},n.prototype._getOrCreateViewModelDecoration=function(e){var t=e.id,r=this._decorationsCache[t];if(!r){var i=e.range,o=e.options,s=void 0;if(o.isWholeLine){var a=this._coordinatesConverter.convertModelPositionToViewPosition(new $(i.startLineNumber,1)),u=this._coordinatesConverter.convertModelPositionToViewPosition(new $(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)));s=new R(a.lineNumber,a.column,u.lineNumber,u.column)}else s=this._coordinatesConverter.convertModelRangeToViewRange(i);r=new KCe(s,o),this._decorationsCache[t]=r}return r},n.prototype.getDecorationsViewportData=function(e){var t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver},n.prototype._getDecorationsViewportData=function(e){for(var t=this._linesCollection.getDecorationsInRange(e,this.editorId,this.configuration.editor.readOnly),r=e.startLineNumber,i=e.endLineNumber,o=[],s=0,a=[],u=r;u<=i;u++)a[u-r]=[];for(var l=0,f=t.length;l<f;l++){var h=t[l],d=h.options,g=this._getOrCreateViewModelDecoration(h),v=g.range;if(o[s++]=g,d.inlineClassName)for(var m=new QC(v,d.inlineClassName,d.inlineClassNameAffectsLetterSpacing?3:0),y=Math.max(r,v.startLineNumber),b=Math.min(i,v.endLineNumber),u=y;u<=b;u++)a[u-r].push(m);if(d.beforeContentClassName&&r<=v.startLineNumber&&v.startLineNumber<=i){var m=new QC(new R(v.startLineNumber,v.startColumn,v.startLineNumber,v.startColumn),d.beforeContentClassName,1);a[v.startLineNumber-r].push(m)}if(d.afterContentClassName&&r<=v.endLineNumber&&v.endLineNumber<=i){var m=new QC(new R(v.endLineNumber,v.endColumn,v.endLineNumber,v.endColumn),d.afterContentClassName,2);a[v.endLineNumber-r].push(m)}}return{decorations:o,inlineDecorations:a}},n}(),DLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LLe=function(n){DLe(e,n);function e(t,r,i,o){var s=n.call(this)||this;if(s.editorId=t,s.configuration=r,s.model=i,s._tokenizeViewportSoon=s._register(new hr(function(){return s.tokenizeViewport()},50)),s.hasFocus=!1,s.viewportStartLine=-1,s.viewportStartLineTrackedRange=null,s.viewportStartLineDelta=0,s.model.isTooLargeForTokenization())s.lines=new wLe(s.model);else{var a=s.configuration.editor,u=new ELe(a.wrappingInfo.wordWrapBreakBeforeCharacters,a.wrappingInfo.wordWrapBreakAfterCharacters,a.wrappingInfo.wordWrapBreakObtrusiveCharacters);s.lines=new _Le(s.model,u,s.model.getOptions().tabSize,a.wrappingInfo.wrappingColumn,a.fontInfo.typicalFullwidthCharacterWidth/a.fontInfo.typicalHalfwidthCharacterWidth,a.wrappingInfo.wrappingIndent)}return s.coordinatesConverter=s.lines.createCoordinatesConverter(),s.viewLayout=s._register(new gLe(s.configuration,s.getLineCount(),o)),s._register(s.viewLayout.onDidScroll(function(l){l.scrollTopChanged&&s._tokenizeViewportSoon.schedule();try{var f=s._beginEmit();f.emit(new uxe(l))}finally{s._endEmit()}})),s.decorations=new xLe(s.editorId,s.model,s.configuration,s.lines,s.coordinatesConverter),s._registerModelEvents(),s._register(s.configuration.onDidChange(function(l){try{var f=s._beginEmit();s._onConfigurationChanged(f,l)}finally{s._endEmit()}})),s._register(mZ.getInstance().onDidChange(function(){try{var l=s._beginEmit();l.emit(new fxe)}finally{s._endEmit()}})),s}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this.decorations.dispose(),this.lines.dispose(),this.viewportStartLineTrackedRange=this.model._setTrackedRange(this.viewportStartLineTrackedRange,null,1)},e.prototype.tokenizeViewport=function(){var t=this.viewLayout.getLinesViewportData(),r=this.coordinatesConverter.convertViewPositionToModelPosition(new $(t.startLineNumber,1)),i=this.coordinatesConverter.convertViewPositionToModelPosition(new $(t.endLineNumber,1));this.model.tokenizeViewport(r.lineNumber,i.lineNumber)},e.prototype.setHasFocus=function(t){this.hasFocus=t},e.prototype._onConfigurationChanged=function(t,r){var i=null;if(this.viewportStartLine!==-1){var o=new $(this.viewportStartLine,this.getLineMinColumn(this.viewportStartLine));i=this.coordinatesConverter.convertViewPositionToModelPosition(o)}var s=!1,a=this.configuration.editor;if(this.lines.setWrappingSettings(a.wrappingInfo.wrappingIndent,a.wrappingInfo.wrappingColumn,a.fontInfo.typicalFullwidthCharacterWidth/a.fontInfo.typicalHalfwidthCharacterWidth)&&(t.emit(new iC),t.emit(new oC),t.emit(new Fp),this.decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(s=!0)),r.readOnly&&(this.decorations.reset(),t.emit(new Fp)),t.emit(new sxe(r)),this.viewLayout.onConfigurationChanged(r),s&&i){var u=this.coordinatesConverter.convertModelPositionToViewPosition(i),l=this.viewLayout.getVerticalOffsetForLineNumber(u.lineNumber);this.viewLayout.setScrollPositionNow({scrollTop:l+this.viewportStartLineDelta})}},e.prototype._registerModelEvents=function(){var t=this;this._register(this.model.onDidChangeRawContentFast(function(r){try{for(var i=t._beginEmit(),o=!1,s=!1,a=r.changes,u=r.versionId,l=0,f=a.length;l<f;l++){var h=a[l];switch(h.changeType){case 1:{t.lines.onModelFlushed(),i.emit(new iC),t.decorations.reset(),t.viewLayout.onFlushed(t.getLineCount()),o=!0;break}case 3:{var d=t.lines.onModelLinesDeleted(u,h.fromLineNumber,h.toLineNumber);d!==null&&(i.emit(d),t.viewLayout.onLinesDeleted(d.fromLineNumber,d.toLineNumber)),o=!0;break}case 4:{var g=t.lines.onModelLinesInserted(u,h.fromLineNumber,h.toLineNumber,h.detail);g!==null&&(i.emit(g),t.viewLayout.onLinesInserted(g.fromLineNumber,g.toLineNumber)),o=!0;break}case 2:{var v=t.lines.onModelLineChanged(u,h.lineNumber,h.detail),m=v[0],y=v[1],g=v[2],d=v[3];s=m,y&&i.emit(y),g&&(i.emit(g),t.viewLayout.onLinesInserted(g.fromLineNumber,g.toLineNumber)),d&&(i.emit(d),t.viewLayout.onLinesDeleted(d.fromLineNumber,d.toLineNumber));break}case 5:break}}t.lines.acceptVersionId(u),t.viewLayout.onHeightMaybeChanged(),!o&&s&&(i.emit(new oC),i.emit(new Fp),t.decorations.onLineMappingChanged())}finally{t._endEmit()}if(t.viewportStartLine=-1,t.configuration.setMaxLineNumber(t.model.getLineCount()),!t.hasFocus&&t.model.getAttachedEditorCount()>=2&&t.viewportStartLineTrackedRange){var b=t.model._getTrackedRange(t.viewportStartLineTrackedRange);if(b){var C=t.coordinatesConverter.convertModelPositionToViewPosition(b.getStartPosition()),E=t.viewLayout.getVerticalOffsetForLineNumber(C.lineNumber);t.viewLayout.setScrollPositionNow({scrollTop:E+t.viewportStartLineDelta})}}})),this._register(this.model.onDidChangeTokens(function(r){for(var i=[],o=0,s=r.ranges.length;o<s;o++){var a=r.ranges[o],u=t.coordinatesConverter.convertModelPositionToViewPosition(new $(a.fromLineNumber,1)).lineNumber,l=t.coordinatesConverter.convertModelPositionToViewPosition(new $(a.toLineNumber,t.model.getLineMaxColumn(a.toLineNumber))).lineNumber;i[o]={fromLineNumber:u,toLineNumber:l}}try{var f=t._beginEmit();f.emit(new lxe(i))}finally{t._endEmit()}r.tokenizationSupportChanged&&t._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(function(r){try{var i=t._beginEmit();i.emit(new dxe)}finally{t._endEmit()}})),this._register(this.model.onDidChangeOptions(function(r){if(t.lines.setTabSize(t.model.getOptions().tabSize)){t.decorations.onLineMappingChanged(),t.viewLayout.onFlushed(t.getLineCount());try{var i=t._beginEmit();i.emit(new iC),i.emit(new oC),i.emit(new Fp)}finally{t._endEmit()}}})),this._register(this.model.onDidChangeDecorations(function(r){t.decorations.onModelDecorationsChanged();try{var i=t._beginEmit();i.emit(new Fp)}finally{t._endEmit()}}))},e.prototype.setHiddenAreas=function(t){try{var r=this._beginEmit(),i=this.lines.setHiddenAreas(t);i&&(r.emit(new iC),r.emit(new oC),r.emit(new Fp),this.decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._endEmit()}},e.prototype.getVisibleRanges=function(){var t=this.getCompletelyVisibleViewRange(),r=this.coordinatesConverter.convertViewRangeToModelRange(t),i=this.lines.getHiddenAreas();if(i.length===0)return[r];for(var o=[],s=0,a=r.startLineNumber,u=r.startColumn,l=r.endLineNumber,f=r.endColumn,h=0,d=i.length;h<d;h++){var g=i[h].startLineNumber,v=i[h].endLineNumber;v<a||g>l||(a<g&&(o[s++]=new R(a,u,g-1,this.model.getLineMaxColumn(g-1))),a=v+1,u=1)}return(a<l||a===l&&u<f)&&(o[s++]=new R(a,u,l,f)),o},e.prototype.getCompletelyVisibleViewRange=function(){var t=this.viewLayout.getLinesViewportData(),r=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new R(r,this.getLineMinColumn(r),i,this.getLineMaxColumn(i))},e.prototype.getCompletelyVisibleViewRangeAtScrollTop=function(t){var r=this.viewLayout.getLinesViewportDataAtScrollTop(t),i=r.completelyVisibleStartLineNumber,o=r.completelyVisibleEndLineNumber;return new R(i,this.getLineMinColumn(i),o,this.getLineMaxColumn(o))},e.prototype.saveState=function(){var t=this.viewLayout.saveState(),r=t.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(r),o=this.coordinatesConverter.convertViewPositionToModelPosition(new $(i,this.getLineMinColumn(i))),s=this.viewLayout.getVerticalOffsetForLineNumber(i)-r;return{scrollLeft:t.scrollLeft,firstPosition:o,firstPositionDeltaTop:s}},e.prototype.reduceRestoreState=function(t){if(typeof t.firstPosition>"u")return this._reduceRestoreStateCompatibility(t);var r=this.model.validatePosition(t.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(r),o=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-t.firstPositionDeltaTop;return{scrollLeft:t.scrollLeft,scrollTop:o}},e.prototype._reduceRestoreStateCompatibility=function(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTopWithoutViewZones}},e.prototype.getTabSize=function(){return this.model.getOptions().tabSize},e.prototype.getOptions=function(){return this.model.getOptions()},e.prototype.getLineCount=function(){return this.lines.getViewLineCount()},e.prototype.setViewport=function(t,r,i){this.lines.warmUpLookupCache(t,r),this.viewportStartLine=t;var o=this.coordinatesConverter.convertViewPositionToModelPosition(new $(t,this.getLineMinColumn(t)));this.viewportStartLineTrackedRange=this.model._setTrackedRange(this.viewportStartLineTrackedRange,new R(o.lineNumber,o.column,o.lineNumber,o.column),1);var s=this.viewLayout.getVerticalOffsetForLineNumber(t),a=this.viewLayout.getCurrentScrollTop();this.viewportStartLineDelta=a-s},e.prototype.getActiveIndentGuide=function(t,r,i){return this.lines.getActiveIndentGuide(t,r,i)},e.prototype.getLinesIndentGuides=function(t,r){return this.lines.getViewLinesIndentGuides(t,r)},e.prototype.getLineContent=function(t){return this.lines.getViewLineContent(t)},e.prototype.getLineLength=function(t){return this.lines.getViewLineLength(t)},e.prototype.getLineMinColumn=function(t){return this.lines.getViewLineMinColumn(t)},e.prototype.getLineMaxColumn=function(t){return this.lines.getViewLineMaxColumn(t)},e.prototype.getLineFirstNonWhitespaceColumn=function(t){var r=Mo(this.getLineContent(t));return r===-1?0:r+1},e.prototype.getLineLastNonWhitespaceColumn=function(t){var r=gf(this.getLineContent(t));return r===-1?0:r+2},e.prototype.getDecorationsInViewport=function(t){return this.decorations.getDecorationsViewportData(t).decorations},e.prototype.getViewLineRenderingData=function(t,r){var i=this.model.mightContainRTL(),o=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),a=this.lines.getViewLineData(r),u=this.decorations.getDecorationsViewportData(t).inlineDecorations,l=u[r-t.startLineNumber];return new ka(a.minColumn,a.maxColumn,a.content,a.continuesWithWrappedLine,i,o,a.tokens,l,s)},e.prototype.getViewLineData=function(t){return this.lines.getViewLineData(t)},e.prototype.getMinimapLinesRenderingData=function(t,r,i){var o=this.lines.getViewLinesData(t,r,i);return new $Ce(this.getTabSize(),o)},e.prototype.getAllOverviewRulerDecorations=function(t){return this.lines.getAllOverviewRulerDecorations(this.editorId,this.configuration.editor.readOnly,t)},e.prototype.invalidateOverviewRulerColorCache=function(){for(var t=this.model.getOverviewRulerDecorations(),r=0,i=t;r<i.length;r++){var o=i[r],s=o.options.overviewRuler;s&&s.invalidateCachedColor()}},e.prototype.invalidateMinimapColorCache=function(){for(var t=this.model.getAllDecorations(),r=0,i=t;r<i.length;r++){var o=i[r],s=o.options.minimap;s&&s.invalidateCachedColor()}},e.prototype.getValueInRange=function(t,r){var i=this.coordinatesConverter.convertViewRangeToModelRange(t);return this.model.getValueInRange(i,r)},e.prototype.getModelLineMaxColumn=function(t){return this.model.getLineMaxColumn(t)},e.prototype.validateModelPosition=function(t){return this.model.validatePosition(t)},e.prototype.validateModelRange=function(t){return this.model.validateRange(t)},e.prototype.deduceModelPositionRelativeToViewPosition=function(t,r,i){var o=this.coordinatesConverter.convertViewPositionToModelPosition(t);this.model.getEOL().length===2&&(r<0?r-=i:r+=i);var s=this.model.getOffsetAt(o),a=s+r;return this.model.getPositionAt(a)},e.prototype.getEOL=function(){return this.model.getEOL()},e.prototype.getPlainTextToCopy=function(t,r,i){var o=this,s=i?`\r
`:this.model.getEOL();t=t.slice(0),t.sort(R.compareRangesUsingStarts);var a=t.filter(function(m){return!m.isEmpty()});if(a.length===0){if(!r)return"";for(var u=t.map(function(m){var y=new $(m.startLineNumber,1);return o.coordinatesConverter.convertViewPositionToModelPosition(y).lineNumber}),l="",f=0;f<u.length;f++)f>0&&u[f-1]===u[f]||(l+=this.model.getLineContent(u[f])+s);return l}for(var h=[],d=0,g=a;d<g.length;d++){var v=g[d];h.push(this.getValueInRange(v,i?2:0))}return h.length===1?h[0]:h},e.prototype.getHTMLToCopy=function(t,r){if(this.model.getLanguageIdentifier().id===1||t.length!==1)return null;var i=this.coordinatesConverter.convertViewRangeToModelRange(t[0]);if(i.isEmpty()){if(!r)return null;var o=i.startLineNumber;i=new R(o,this.model.getLineMinColumn(o),o,this.model.getLineMaxColumn(o))}var s=this.configuration.editor.fontInfo,a=this._getColorMap(),u=s.fontFamily===Rh.fontFamily?s.fontFamily:"'"+s.fontFamily+"', "+Rh.fontFamily;return'<div style="'+("color: "+a[1]+";")+("background-color: "+a[2]+";")+("font-family: "+u+";")+("font-weight: "+s.fontWeight+";")+("font-size: "+s.fontSize+"px;")+("line-height: "+s.lineHeight+"px;")+'white-space: pre;">'+this._getHTMLToCopy(i,a)+"</div>"},e.prototype._getHTMLToCopy=function(t,r){for(var i=t.startLineNumber,o=t.startColumn,s=t.endLineNumber,a=t.endColumn,u=this.getTabSize(),l="",f=i;f<=s;f++){var h=this.model.getLineTokens(f),d=h.getLineContent(),g=f===i?o-1:0,v=f===s?a-1:d.length;d===""?l+="<br>":l+=lLe(d,h.inflate(),r,g,v,u)}return l},e.prototype._getColorMap=function(){var t=mn.getColorMap(),r=["#000000"];if(t)for(var i=1,o=t.length;i<o;i++)r[i]=Z.Format.CSS.formatHex(t[i]);return r},e}(aZ),ev=function(){function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._entries=new Map;for(var r=0,i=e;r<i.length;r++){var o=i[r],s=o[0],a=o[1];this.set(s,a)}}return n.prototype.set=function(e,t){var r=this._entries.get(e);return this._entries.set(e,t),r},n.prototype.has=function(e){return this._entries.has(e)},n.prototype.get=function(e){return this._entries.get(e)},n}(),Au=xt("accessibilityService"),X0=new Re("accessibilityModeEnabled",!1),Q0=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kLe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},oh=function(n,e){return function(t,r){e(t,r,n)}},TLe=0,mS="showUnused",NLe=function(){function n(e,t,r,i,o,s){this.model=e,this.viewModel=t,this.cursor=r,this.view=i,this.hasRealView=o,this.listenersToRemove=s}return n.prototype.dispose=function(){Ue(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.cursor.dispose(),this.viewModel.dispose()},n}(),s2=function(n){Q0(e,n);function e(t,r,i,o,s,a,u,l,f,h){var d=n.call(this)||this;d._onDidDispose=d._register(new j),d.onDidDispose=d._onDidDispose.event,d._onDidChangeModelContent=d._register(new j),d.onDidChangeModelContent=d._onDidChangeModelContent.event,d._onDidChangeModelLanguage=d._register(new j),d.onDidChangeModelLanguage=d._onDidChangeModelLanguage.event,d._onDidChangeModelLanguageConfiguration=d._register(new j),d.onDidChangeModelLanguageConfiguration=d._onDidChangeModelLanguageConfiguration.event,d._onDidChangeModelOptions=d._register(new j),d.onDidChangeModelOptions=d._onDidChangeModelOptions.event,d._onDidChangeModelDecorations=d._register(new j),d.onDidChangeModelDecorations=d._onDidChangeModelDecorations.event,d._onDidChangeConfiguration=d._register(new j),d.onDidChangeConfiguration=d._onDidChangeConfiguration.event,d._onDidChangeModel=d._register(new j),d.onDidChangeModel=d._onDidChangeModel.event,d._onDidChangeCursorPosition=d._register(new j),d.onDidChangeCursorPosition=d._onDidChangeCursorPosition.event,d._onDidChangeCursorSelection=d._register(new j),d.onDidChangeCursorSelection=d._onDidChangeCursorSelection.event,d._onDidAttemptReadOnlyEdit=d._register(new j),d.onDidAttemptReadOnlyEdit=d._onDidAttemptReadOnlyEdit.event,d._onDidLayoutChange=d._register(new j),d.onDidLayoutChange=d._onDidLayoutChange.event,d._editorTextFocus=d._register(new VU),d.onDidFocusEditorText=d._editorTextFocus.onDidChangeToTrue,d.onDidBlurEditorText=d._editorTextFocus.onDidChangeToFalse,d._editorWidgetFocus=d._register(new VU),d.onDidFocusEditorWidget=d._editorWidgetFocus.onDidChangeToTrue,d.onDidBlurEditorWidget=d._editorWidgetFocus.onDidChangeToFalse,d._onWillType=d._register(new j),d.onWillType=d._onWillType.event,d._onDidType=d._register(new j),d.onDidType=d._onDidType.event,d._onCompositionStart=d._register(new j),d.onCompositionStart=d._onCompositionStart.event,d._onCompositionEnd=d._register(new j),d.onCompositionEnd=d._onCompositionEnd.event,d._onDidPaste=d._register(new j),d.onDidPaste=d._onDidPaste.event,d._onMouseUp=d._register(new j),d.onMouseUp=d._onMouseUp.event,d._onMouseDown=d._register(new j),d.onMouseDown=d._onMouseDown.event,d._onMouseDrag=d._register(new j),d.onMouseDrag=d._onMouseDrag.event,d._onMouseDrop=d._register(new j),d.onMouseDrop=d._onMouseDrop.event,d._onContextMenu=d._register(new j),d.onContextMenu=d._onContextMenu.event,d._onMouseMove=d._register(new j),d.onMouseMove=d._onMouseMove.event,d._onMouseLeave=d._register(new j),d.onMouseLeave=d._onMouseLeave.event,d._onMouseWheel=d._register(new j),d.onMouseWheel=d._onMouseWheel.event,d._onKeyUp=d._register(new j),d.onKeyUp=d._onKeyUp.event,d._onKeyDown=d._register(new j),d.onKeyDown=d._onKeyDown.event,d._onDidScrollChange=d._register(new j),d.onDidScrollChange=d._onDidScrollChange.event,d._onDidChangeViewZones=d._register(new j),d.onDidChangeViewZones=d._onDidChangeViewZones.event,d._domElement=t,d._id=++TLe,d._decorationTypeKeysToIds={},d._decorationTypeSubtypes={},d.isSimpleWidget=i.isSimpleWidget||!1,d._telemetryData=i.telemetryData,r=r||{},d._configuration=d._register(d._createConfiguration(r,h)),d._register(d._configuration.onDidChange(function(C){d._onDidChangeConfiguration.fire(C),C.layoutInfo&&d._onDidLayoutChange.fire(d._configuration.editor.layoutInfo),d._configuration.editor.showUnused?d._domElement.classList.add(mS):d._domElement.classList.remove(mS)})),d._contextKeyService=d._register(u.createScoped(d._domElement)),d._notificationService=f,d._codeEditorService=s,d._commandService=a,d._themeService=l,d._register(new ALe(d,d._contextKeyService)),d._register(new OLe(d,d._contextKeyService)),d._instantiationService=o.createChild(new ev([rt,d._contextKeyService])),d._modelData=null,d._contributions={},d._actions={},d._focusTracker=new RLe(t),d._focusTracker.onChange(function(){d._editorWidgetFocus.setValue(d._focusTracker.hasFocus())}),d._contentWidgets={},d._overlayWidgets={};var g;Array.isArray(i.contributions)?g=i.contributions:g=$_.getEditorContributions();for(var v=0,m=g.length;v<m;v++){var y=g[v];try{var b=d._instantiationService.createInstance(y,d);d._contributions[b.getId()]=b}catch(C){Le(C)}}return $_.getEditorActions().forEach(function(C){var E=new yZ(C.id,C.label,C.alias,tI(C.precondition),function(){return d._instantiationService.invokeFunction(function(D){return Promise.resolve(C.runEditorCommand(D,d,null))})},d._contextKeyService);d._actions[E.id]=E}),d._codeEditorService.addCodeEditor(d),d}return e.prototype._createConfiguration=function(t,r){return new _s(this.isSimpleWidget,t,this._domElement,r)},e.prototype.getId=function(){return this.getEditorType()+":"+this._id},e.prototype.getEditorType=function(){return uI.ICodeEditor},e.prototype.dispose=function(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();for(var t=Object.keys(this._contributions),r=0,i=t.length;r<i;r++){var o=t[r];this._contributions[o].dispose()}this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),n.prototype.dispose.call(this)},e.prototype.invokeWithinContext=function(t){return this._instantiationService.invokeFunction(t)},e.prototype.updateOptions=function(t){this._configuration.updateOptions(t)},e.prototype.getConfiguration=function(){return this._configuration.editor},e.prototype.getRawConfiguration=function(){return this._configuration.getRawOptions()},e.prototype.getValue=function(t){if(t===void 0&&(t=null),!this._modelData)return"";var r=!!(t&&t.preserveBOM),i=0;return t&&t.lineEnding&&t.lineEnding===`
`?i=1:t&&t.lineEnding&&t.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,r)},e.prototype.setValue=function(t){this._modelData&&this._modelData.model.setValue(t)},e.prototype.getModel=function(){return this._modelData?this._modelData.model:null},e.prototype.setModel=function(t){t===void 0&&(t=null);var r=t;if(!(this._modelData===null&&r===null)&&!(this._modelData&&this._modelData.model===r)){var i=this._detachModel();this._attachModel(r);var o={oldModelUrl:i?i.uri:null,newModelUrl:r?r.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(i)}},e.prototype._removeDecorationTypes=function(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(var t in this._decorationTypeSubtypes){var r=this._decorationTypeSubtypes[t];for(var i in r)this._removeDecorationType(t+"-"+i)}this._decorationTypeSubtypes={}}},e.prototype.getVisibleRanges=function(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]},e.prototype.getWhitespaces=function(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]},e._getVerticalOffsetForPosition=function(t,r,i){var o=t.model.validatePosition({lineNumber:r,column:i}),s=t.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return t.viewModel.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber)},e.prototype.getTopForLineNumber=function(t){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,1):-1},e.prototype.getTopForPosition=function(t,r){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,r):-1},e.prototype.setHiddenAreas=function(t){this._modelData&&this._modelData.viewModel.setHiddenAreas(t.map(function(r){return R.lift(r)}))},e.prototype.getVisibleColumnFromPosition=function(t){if(!this._modelData)return t.column;var r=this._modelData.model.validatePosition(t),i=this._modelData.model.getOptions().tabSize;return $t.visibleColumnFromColumn(this._modelData.model.getLineContent(r.lineNumber),r.column,i)+1},e.prototype.getPosition=function(){return this._modelData?this._modelData.cursor.getPosition():null},e.prototype.setPosition=function(t){if(this._modelData){if(!$.isIPosition(t))throw new Error("Invalid arguments");this._modelData.cursor.setSelections("api",[{selectionStartLineNumber:t.lineNumber,selectionStartColumn:t.column,positionLineNumber:t.lineNumber,positionColumn:t.column}])}},e.prototype._sendRevealRange=function(t,r,i,o){if(this._modelData){if(!R.isIRange(t))throw new Error("Invalid arguments");var s=this._modelData.model.validateRange(t),a=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.cursor.emitCursorRevealRange(a,r,i,o)}},e.prototype.revealLine=function(t,r){r===void 0&&(r=0),this._revealLine(t,0,r)},e.prototype.revealLineInCenter=function(t,r){r===void 0&&(r=0),this._revealLine(t,1,r)},e.prototype.revealLineInCenterIfOutsideViewport=function(t,r){r===void 0&&(r=0),this._revealLine(t,2,r)},e.prototype._revealLine=function(t,r,i){if(typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new R(t,1,t,1),r,!1,i)},e.prototype.revealPosition=function(t,r){r===void 0&&(r=0),this._revealPosition(t,0,!0,r)},e.prototype.revealPositionInCenter=function(t,r){r===void 0&&(r=0),this._revealPosition(t,1,!0,r)},e.prototype.revealPositionInCenterIfOutsideViewport=function(t,r){r===void 0&&(r=0),this._revealPosition(t,2,!0,r)},e.prototype._revealPosition=function(t,r,i,o){if(!$.isIPosition(t))throw new Error("Invalid arguments");this._sendRevealRange(new R(t.lineNumber,t.column,t.lineNumber,t.column),r,i,o)},e.prototype.getSelection=function(){return this._modelData?this._modelData.cursor.getSelection():null},e.prototype.getSelections=function(){return this._modelData?this._modelData.cursor.getSelections():null},e.prototype.setSelection=function(t){var r=Ce.isISelection(t),i=R.isIRange(t);if(!r&&!i)throw new Error("Invalid arguments");if(r)this._setSelectionImpl(t);else if(i){var o={selectionStartLineNumber:t.startLineNumber,selectionStartColumn:t.startColumn,positionLineNumber:t.endLineNumber,positionColumn:t.endColumn};this._setSelectionImpl(o)}},e.prototype._setSelectionImpl=function(t){if(this._modelData){var r=new Ce(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn);this._modelData.cursor.setSelections("api",[r])}},e.prototype.revealLines=function(t,r,i){i===void 0&&(i=0),this._revealLines(t,r,0,i)},e.prototype.revealLinesInCenter=function(t,r,i){i===void 0&&(i=0),this._revealLines(t,r,1,i)},e.prototype.revealLinesInCenterIfOutsideViewport=function(t,r,i){i===void 0&&(i=0),this._revealLines(t,r,2,i)},e.prototype._revealLines=function(t,r,i,o){if(typeof t!="number"||typeof r!="number")throw new Error("Invalid arguments");this._sendRevealRange(new R(t,1,r,1),i,!1,o)},e.prototype.revealRange=function(t,r,i,o){r===void 0&&(r=0),i===void 0&&(i=!1),o===void 0&&(o=!0),this._revealRange(t,i?1:0,o,r)},e.prototype.revealRangeInCenter=function(t,r){r===void 0&&(r=0),this._revealRange(t,1,!0,r)},e.prototype.revealRangeInCenterIfOutsideViewport=function(t,r){r===void 0&&(r=0),this._revealRange(t,2,!0,r)},e.prototype.revealRangeAtTop=function(t,r){r===void 0&&(r=0),this._revealRange(t,3,!0,r)},e.prototype._revealRange=function(t,r,i,o){if(!R.isIRange(t))throw new Error("Invalid arguments");this._sendRevealRange(R.lift(t),r,i,o)},e.prototype.setSelections=function(t,r){if(r===void 0&&(r="api"),!!this._modelData){if(!t||t.length===0)throw new Error("Invalid arguments");for(var i=0,o=t.length;i<o;i++)if(!Ce.isISelection(t[i]))throw new Error("Invalid arguments");this._modelData.cursor.setSelections(r,t)}},e.prototype.getScrollWidth=function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1},e.prototype.getScrollLeft=function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1},e.prototype.getScrollHeight=function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1},e.prototype.getScrollTop=function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1},e.prototype.setScrollLeft=function(t){if(this._modelData){if(typeof t!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPositionNow({scrollLeft:t})}},e.prototype.setScrollTop=function(t){if(this._modelData){if(typeof t!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPositionNow({scrollTop:t})}},e.prototype.setScrollPosition=function(t){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPositionNow(t)},e.prototype.saveViewState=function(){if(!this._modelData)return null;for(var t={},r=Object.keys(this._contributions),i=0,o=r;i<o.length;i++){var s=o[i],a=this._contributions[s];typeof a.saveViewState=="function"&&(t[s]=a.saveViewState())}var u=this._modelData.cursor.saveState(),l=this._modelData.viewModel.saveState();return{cursorState:u,viewState:l,contributionsState:t}},e.prototype.restoreViewState=function(t){if(!(!this._modelData||!this._modelData.hasRealView)){var r=t;if(r&&r.cursorState&&r.viewState){var i=r.cursorState;Array.isArray(i)?this._modelData.cursor.restoreState(i):this._modelData.cursor.restoreState([i]);for(var o=r.contributionsState||{},s=Object.keys(this._contributions),a=0,u=s.length;a<u;a++){var l=s[a],f=this._contributions[l];typeof f.restoreViewState=="function"&&f.restoreViewState(o[l])}var h=this._modelData.viewModel.reduceRestoreState(r.viewState);this._modelData.view.restoreState(h)}}},e.prototype.getContribution=function(t){return this._contributions[t]||null},e.prototype.getActions=function(){for(var t=[],r=Object.keys(this._actions),i=0,o=r.length;i<o;i++){var s=r[i];t.push(this._actions[s])}return t},e.prototype.getSupportedActions=function(){var t=this.getActions();return t=t.filter(function(r){return r.isSupported()}),t},e.prototype.getAction=function(t){return this._actions[t]||null},e.prototype.trigger=function(t,r,i){if(i=i||{},r===Ht.Type){if(!this._modelData||typeof i.text!="string"||i.text.length===0)return;t==="keyboard"&&this._onWillType.fire(i.text),this._modelData.cursor.trigger(t,r,i),t==="keyboard"&&this._onDidType.fire(i.text);return}if(r===Ht.Paste){if(!this._modelData||typeof i.text!="string"||i.text.length===0)return;var o=this._modelData.cursor.getSelection().getStartPosition();this._modelData.cursor.trigger(t,r,i);var s=this._modelData.cursor.getSelection().getStartPosition();t==="keyboard"&&this._onDidPaste.fire(new R(o.lineNumber,o.column,s.lineNumber,s.column));return}r===Ht.CompositionStart&&this._onCompositionStart.fire(),r===Ht.CompositionEnd&&this._onCompositionEnd.fire();var a=this.getAction(r);if(a){Promise.resolve(a.run()).then(void 0,Le);return}this._modelData&&(this._triggerEditorCommand(t,r,i)||this._modelData.cursor.trigger(t,r,i))},e.prototype._triggerEditorCommand=function(t,r,i){var o=this,s=$_.getEditorCommand(r);return s?(i=i||{},i.source=t,this._instantiationService.invokeFunction(function(a){Promise.resolve(s.runEditorCommand(a,o,i)).then(void 0,Le)}),!0):!1},e.prototype._getCursors=function(){return this._modelData?this._modelData.cursor:null},e.prototype.pushUndoStop=function(){return!this._modelData||this._configuration.editor.readOnly?!1:(this._modelData.model.pushStackElement(),!0)},e.prototype.executeEdits=function(t,r,i){if(!this._modelData||this._configuration.editor.readOnly)return!1;var o;return i?Array.isArray(i)?o=function(){return i}:o=i:o=function(){return null},this._modelData.cursor.executeEdits(t,r,o),!0},e.prototype.executeCommand=function(t,r){this._modelData&&this._modelData.cursor.trigger(t,Ht.ExecuteCommand,r)},e.prototype.executeCommands=function(t,r){this._modelData&&this._modelData.cursor.trigger(t,Ht.ExecuteCommands,r)},e.prototype.changeDecorations=function(t){return this._modelData?this._modelData.model.changeDecorations(t,this._id):null},e.prototype.getLineDecorations=function(t){return this._modelData?this._modelData.model.getLineDecorations(t,this._id,this._configuration.editor.readOnly):null},e.prototype.deltaDecorations=function(t,r){return this._modelData?t.length===0&&r.length===0?t:this._modelData.model.deltaDecorations(t,r,this._id):[]},e.prototype.removeDecorations=function(t){var r=this._decorationTypeKeysToIds[t];r&&this.deltaDecorations(r,[]),this._decorationTypeKeysToIds.hasOwnProperty(t)&&delete this._decorationTypeKeysToIds[t],this._decorationTypeSubtypes.hasOwnProperty(t)&&delete this._decorationTypeSubtypes[t]},e.prototype.getLayoutInfo=function(){return this._configuration.editor.layoutInfo},e.prototype.createOverviewRuler=function(t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(t)},e.prototype.getDomNode=function(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode},e.prototype.delegateVerticalScrollbarMouseDown=function(t){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(t)},e.prototype.layout=function(t){this._configuration.observeReferenceElement(t),this.render()},e.prototype.focus=function(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()},e.prototype.hasTextFocus=function(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()},e.prototype.hasWidgetFocus=function(){return this._focusTracker&&this._focusTracker.hasFocus()},e.prototype.addContentWidget=function(t){var r={widget:t,position:t.getPosition()};this._contentWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[t.getId()]=r,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(r)},e.prototype.layoutContentWidget=function(t){var r=t.getId();if(this._contentWidgets.hasOwnProperty(r)){var i=this._contentWidgets[r];i.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}},e.prototype.removeContentWidget=function(t){var r=t.getId();if(this._contentWidgets.hasOwnProperty(r)){var i=this._contentWidgets[r];delete this._contentWidgets[r],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}},e.prototype.addOverlayWidget=function(t){var r={widget:t,position:t.getPosition()};this._overlayWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[t.getId()]=r,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(r)},e.prototype.layoutOverlayWidget=function(t){var r=t.getId();if(this._overlayWidgets.hasOwnProperty(r)){var i=this._overlayWidgets[r];i.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}},e.prototype.removeOverlayWidget=function(t){var r=t.getId();if(this._overlayWidgets.hasOwnProperty(r)){var i=this._overlayWidgets[r];delete this._overlayWidgets[r],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}},e.prototype.changeViewZones=function(t){if(!(!this._modelData||!this._modelData.hasRealView)){var r=this._modelData.view.change(t);r&&this._onDidChangeViewZones.fire()}},e.prototype.getTargetAtClientPoint=function(t,r){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(t,r)},e.prototype.getScrolledVisiblePosition=function(t){if(!this._modelData||!this._modelData.hasRealView)return null;var r=this._modelData.model.validatePosition(t),i=this._configuration.editor.layoutInfo,o=e._getVerticalOffsetForPosition(this._modelData,r.lineNumber,r.column)-this.getScrollTop(),s=this._modelData.view.getOffsetForColumn(r.lineNumber,r.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:o,left:s,height:this._configuration.editor.lineHeight}},e.prototype.getOffsetForColumn=function(t,r){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(t,r)},e.prototype.render=function(t){t===void 0&&(t=!1),!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.render(!0,t)},e.prototype.applyFontInfo=function(t){_s.applyFontInfoSlow(t,this._configuration.editor.fontInfo)},e.prototype._attachModel=function(t){var r=this;if(!t){this._modelData=null;return}var i=[];this._domElement.setAttribute("data-mode-id",t.getLanguageIdentifier().language),this._configuration.setIsDominatedByLongLines(t.isDominatedByLongLines()),this._configuration.setMaxLineNumber(t.getLineCount()),t.onBeforeAttached();var o=new LLe(this._id,this._configuration,t,function(v){return ef(v)});i.push(t.onDidChangeDecorations(function(v){return r._onDidChangeModelDecorations.fire(v)})),i.push(t.onDidChangeLanguage(function(v){r._domElement.setAttribute("data-mode-id",t.getLanguageIdentifier().language),r._onDidChangeModelLanguage.fire(v)})),i.push(t.onDidChangeLanguageConfiguration(function(v){return r._onDidChangeModelLanguageConfiguration.fire(v)})),i.push(t.onDidChangeContent(function(v){return r._onDidChangeModelContent.fire(v)})),i.push(t.onDidChangeOptions(function(v){return r._onDidChangeModelOptions.fire(v)})),i.push(t.onWillDispose(function(){return r.setModel(null)}));var s=new FU(this._configuration,t,o);i.push(s.onDidReachMaxCursorCount(function(){r._notificationService.warn(S("cursors.maximum","The number of cursors has been limited to {0}.",FU.MAX_CURSOR_COUNT))})),i.push(s.onDidAttemptReadOnlyEdit(function(){r._onDidAttemptReadOnlyEdit.fire(void 0)})),i.push(s.onDidChange(function(v){for(var m=[],y=0,b=v.selections.length;y<b;y++)m[y]=v.selections[y].getPosition();var C={position:m[0],secondaryPositions:m.slice(1),reason:v.reason,source:v.source};r._onDidChangeCursorPosition.fire(C);var E={selection:v.selections[0],secondarySelections:v.selections.slice(1),source:v.source,reason:v.reason};r._onDidChangeCursorSelection.fire(E)}));var a=this._createView(o,s),u=a[0],l=a[1];if(l){this._domElement.appendChild(u.domNode.domNode);for(var f=Object.keys(this._contentWidgets),h=0,d=f.length;h<d;h++){var g=f[h];u.addContentWidget(this._contentWidgets[g])}f=Object.keys(this._overlayWidgets);for(var h=0,d=f.length;h<d;h++){var g=f[h];u.addOverlayWidget(this._overlayWidgets[g])}u.render(!1,!0),u.domNode.domNode.setAttribute("data-uri",t.uri.toString())}this._modelData=new NLe(t,o,s,u,l,i)},e.prototype._createView=function(t,r){var i=this,o;this.isSimpleWidget?o={executeEditorCommand:function(u,l){u.runCoreEditorCommand(r,l)},paste:function(u,l,f,h){i.trigger(u,Ht.Paste,{text:l,pasteOnNewLine:f,multicursorText:h})},type:function(u,l){i.trigger(u,Ht.Type,{text:l})},replacePreviousChar:function(u,l,f){i.trigger(u,Ht.ReplacePreviousChar,{text:l,replaceCharCnt:f})},compositionStart:function(u){i.trigger(u,Ht.CompositionStart,void 0)},compositionEnd:function(u){i.trigger(u,Ht.CompositionEnd,void 0)},cut:function(u){i.trigger(u,Ht.Cut,void 0)}}:o={executeEditorCommand:function(u,l){u.runCoreEditorCommand(r,l)},paste:function(u,l,f,h){i._commandService.executeCommand(Ht.Paste,{text:l,pasteOnNewLine:f,multicursorText:h})},type:function(u,l){i._commandService.executeCommand(Ht.Type,{text:l})},replacePreviousChar:function(u,l,f){i._commandService.executeCommand(Ht.ReplacePreviousChar,{text:l,replaceCharCnt:f})},compositionStart:function(u){i._commandService.executeCommand(Ht.CompositionStart,{})},compositionEnd:function(u){i._commandService.executeCommand(Ht.CompositionEnd,{})},cut:function(u){i._commandService.executeCommand(Ht.Cut,{})}};var s=new rLe(t);s.onDidGainFocus=function(){i._editorTextFocus.setValue(!0),i._editorWidgetFocus.setValue(!0)},s.onDidScroll=function(u){return i._onDidScrollChange.fire(u)},s.onDidLoseFocus=function(){return i._editorTextFocus.setValue(!1)},s.onContextMenu=function(u){return i._onContextMenu.fire(u)},s.onMouseDown=function(u){return i._onMouseDown.fire(u)},s.onMouseUp=function(u){return i._onMouseUp.fire(u)},s.onMouseDrag=function(u){return i._onMouseDrag.fire(u)},s.onMouseDrop=function(u){return i._onMouseDrop.fire(u)},s.onKeyUp=function(u){return i._onKeyUp.fire(u)},s.onMouseMove=function(u){return i._onMouseMove.fire(u)},s.onMouseLeave=function(u){return i._onMouseLeave.fire(u)},s.onMouseWheel=function(u){return i._onMouseWheel.fire(u)},s.onKeyDown=function(u){return i._onKeyDown.fire(u)};var a=new eLe(o,this._configuration,this._themeService,t,r,s);return[a,!0]},e.prototype._postDetachModelCleanup=function(t){t&&t.removeAllDecorationsWithOwnerId(this._id)},e.prototype._detachModel=function(){if(!this._modelData)return null;var t=this._modelData.model,r=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),r&&this._domElement.removeChild(r),t},e.prototype._removeDecorationType=function(t){this._codeEditorService.removeDecorationType(t)},e.prototype.hasModel=function(){return this._modelData!==null},e=kLe([oh(3,Hn),oh(4,an),oh(5,bi),oh(6,rt),oh(7,Ir),oh(8,Hr),oh(9,Au)],e),e}(te),VU=function(n){Q0(e,n);function e(){var t=n.call(this)||this;return t._onDidChangeToTrue=t._register(new j),t.onDidChangeToTrue=t._onDidChangeToTrue.event,t._onDidChangeToFalse=t._register(new j),t.onDidChangeToFalse=t._onDidChangeToFalse.event,t._value=0,t}return e.prototype.setValue=function(t){var r=t?2:1;this._value!==r&&(this._value=r,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())},e}(te),ALe=function(n){Q0(e,n);function e(t,r){var i=n.call(this)||this;return i._editor=t,r.createKey("editorId",t.getId()),i._editorFocus=P.focus.bindTo(r),i._textInputFocus=P.textInputFocus.bindTo(r),i._editorTextFocus=P.editorTextFocus.bindTo(r),i._editorTabMovesFocus=P.tabMovesFocus.bindTo(r),i._editorReadonly=P.readOnly.bindTo(r),i._hasMultipleSelections=P.hasMultipleSelections.bindTo(r),i._hasNonEmptySelection=P.hasNonEmptySelection.bindTo(r),i._canUndo=P.canUndo.bindTo(r),i._canRedo=P.canRedo.bindTo(r),i._register(i._editor.onDidChangeConfiguration(function(){return i._updateFromConfig()})),i._register(i._editor.onDidChangeCursorSelection(function(){return i._updateFromSelection()})),i._register(i._editor.onDidFocusEditorWidget(function(){return i._updateFromFocus()})),i._register(i._editor.onDidBlurEditorWidget(function(){return i._updateFromFocus()})),i._register(i._editor.onDidFocusEditorText(function(){return i._updateFromFocus()})),i._register(i._editor.onDidBlurEditorText(function(){return i._updateFromFocus()})),i._register(i._editor.onDidChangeModel(function(){return i._updateFromModel()})),i._register(i._editor.onDidChangeConfiguration(function(){return i._updateFromModel()})),i._updateFromConfig(),i._updateFromSelection(),i._updateFromFocus(),i._updateFromModel(),i}return e.prototype._updateFromConfig=function(){var t=this._editor.getConfiguration();this._editorTabMovesFocus.set(t.tabFocusMode),this._editorReadonly.set(t.readOnly)},e.prototype._updateFromSelection=function(){var t=this._editor.getSelections();t?(this._hasMultipleSelections.set(t.length>1),this._hasNonEmptySelection.set(t.some(function(r){return!r.isEmpty()}))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())},e.prototype._updateFromFocus=function(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())},e.prototype._updateFromModel=function(){var t=this._editor.getModel();this._canUndo.set(!!(t&&t.canUndo())),this._canRedo.set(!!(t&&t.canRedo()))},e}(te),OLe=function(n){Q0(e,n);function e(t,r){var i=n.call(this)||this;i._editor=t,i._contextKeyService=r,i._langId=P.languageId.bindTo(r),i._hasCompletionItemProvider=P.hasCompletionItemProvider.bindTo(r),i._hasCodeActionsProvider=P.hasCodeActionsProvider.bindTo(r),i._hasCodeLensProvider=P.hasCodeLensProvider.bindTo(r),i._hasDefinitionProvider=P.hasDefinitionProvider.bindTo(r),i._hasDeclarationProvider=P.hasDeclarationProvider.bindTo(r),i._hasImplementationProvider=P.hasImplementationProvider.bindTo(r),i._hasTypeDefinitionProvider=P.hasTypeDefinitionProvider.bindTo(r),i._hasHoverProvider=P.hasHoverProvider.bindTo(r),i._hasDocumentHighlightProvider=P.hasDocumentHighlightProvider.bindTo(r),i._hasDocumentSymbolProvider=P.hasDocumentSymbolProvider.bindTo(r),i._hasReferenceProvider=P.hasReferenceProvider.bindTo(r),i._hasRenameProvider=P.hasRenameProvider.bindTo(r),i._hasSignatureHelpProvider=P.hasSignatureHelpProvider.bindTo(r),i._hasDocumentFormattingProvider=P.hasDocumentFormattingProvider.bindTo(r),i._hasDocumentSelectionFormattingProvider=P.hasDocumentSelectionFormattingProvider.bindTo(r),i._hasMultipleDocumentFormattingProvider=P.hasMultipleDocumentFormattingProvider.bindTo(r),i._hasMultipleDocumentSelectionFormattingProvider=P.hasMultipleDocumentSelectionFormattingProvider.bindTo(r),i._isInWalkThrough=P.isInEmbeddedEditor.bindTo(r);var o=function(){return i._update()};return i._register(t.onDidChangeModel(o)),i._register(t.onDidChangeModelLanguage(o)),i._register(ru.onDidChange(o)),i._register(hl.onDidChange(o)),i._register(Zh.onDidChange(o)),i._register(By.onDidChange(o)),i._register(eS.onDidChange(o)),i._register(tS.onDidChange(o)),i._register(nS.onDidChange(o)),i._register(Fy.onDidChange(o)),i._register($g.onDidChange(o)),i._register(Ic.onDidChange(o)),i._register(Q1.onDidChange(o)),i._register(J1.onDidChange(o)),i._register(z_.onDidChange(o)),i._register(va.onDidChange(o)),i._register(Yh.onDidChange(o)),o(),i}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype.reset=function(){var t=this;this._contextKeyService.bufferChangeEvents(function(){t._langId.reset(),t._hasCompletionItemProvider.reset(),t._hasCodeActionsProvider.reset(),t._hasCodeLensProvider.reset(),t._hasDefinitionProvider.reset(),t._hasDeclarationProvider.reset(),t._hasImplementationProvider.reset(),t._hasTypeDefinitionProvider.reset(),t._hasHoverProvider.reset(),t._hasDocumentHighlightProvider.reset(),t._hasDocumentSymbolProvider.reset(),t._hasReferenceProvider.reset(),t._hasRenameProvider.reset(),t._hasDocumentFormattingProvider.reset(),t._hasDocumentSelectionFormattingProvider.reset(),t._hasSignatureHelpProvider.reset(),t._isInWalkThrough.reset()})},e.prototype._update=function(){var t=this,r=this._editor.getModel();if(!r){this.reset();return}this._contextKeyService.bufferChangeEvents(function(){t._langId.set(r.getLanguageIdentifier().language),t._hasCompletionItemProvider.set(ru.has(r)),t._hasCodeActionsProvider.set(hl.has(r)),t._hasCodeLensProvider.set(Zh.has(r)),t._hasDefinitionProvider.set(By.has(r)),t._hasDeclarationProvider.set(eS.has(r)),t._hasImplementationProvider.set(tS.has(r)),t._hasTypeDefinitionProvider.set(nS.has(r)),t._hasHoverProvider.set(Fy.has(r)),t._hasDocumentHighlightProvider.set($g.has(r)),t._hasDocumentSymbolProvider.set(Ic.has(r)),t._hasReferenceProvider.set(Q1.has(r)),t._hasRenameProvider.set(J1.has(r)),t._hasSignatureHelpProvider.set(Yh.has(r)),t._hasDocumentFormattingProvider.set(z_.has(r)||va.has(r)),t._hasDocumentSelectionFormattingProvider.set(va.has(r)),t._hasMultipleDocumentFormattingProvider.set(z_.all(r).length+va.all(r).length>1),t._hasMultipleDocumentSelectionFormattingProvider.set(va.all(r).length>1),t._isInWalkThrough.set(r.uri.scheme===rn.walkThroughSnippet)})},e}(te),RLe=function(n){Q0(e,n);function e(t){var r=n.call(this)||this;return r._onChange=r._register(new j),r.onChange=r._onChange.event,r._hasFocus=!1,r._domFocusTracker=r._register(Ty(t)),r._register(r._domFocusTracker.onDidFocus(function(){r._hasFocus=!0,r._onChange.fire(void 0)})),r._register(r._domFocusTracker.onDidBlur(function(){r._hasFocus=!1,r._onChange.fire(void 0)})),r}return e.prototype.hasFocus=function(){return this._hasFocus},e}(te),MLe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),PLe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function BT(n){return MLe+encodeURIComponent(n.toString())+PLe}var FLe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),BLe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function WLe(n){return FLe+encodeURIComponent(n.toString())+BLe}Xt(function(n,e){var t=n.getColor(KY);t&&e.addRule(".monaco-editor .squiggly-error { border-bottom: 4px double "+t+"; }");var r=n.getColor($Y);r&&e.addRule('.monaco-editor .squiggly-error { background: url("data:image/svg+xml,'+BT(r)+'") repeat-x bottom left; }');var i=n.getColor(KF);i&&e.addRule(".monaco-editor .squiggly-warning { border-bottom: 4px double "+i+"; }");var o=n.getColor(fS);o&&e.addRule('.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,'+BT(o)+'") repeat-x bottom left; }');var s=n.getColor(GF);s&&e.addRule(".monaco-editor .squiggly-info { border-bottom: 4px double "+s+"; }");var a=n.getColor(hS);a&&e.addRule('.monaco-editor .squiggly-info { background: url("data:image/svg+xml,'+BT(a)+'") repeat-x bottom left; }');var u=n.getColor(SIe);u&&e.addRule(".monaco-editor .squiggly-hint { border-bottom: 2px dotted "+u+"; }");var l=n.getColor(CIe);l&&e.addRule('.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,'+WLe(l)+'") no-repeat bottom left; }');var f=n.getColor(JIe);f&&e.addRule("."+mS+" .monaco-editor .squiggly-inline-unnecessary { opacity: "+f.rgba.a+"; }");var h=n.getColor(QIe);h&&e.addRule("."+mS+" .monaco-editor .squiggly-unnecessary { border-bottom: 2px dashed "+h+"; }");var d=n.getColor(jc)||"inherit";e.addRule(".monaco-editor .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: "+d+"}")});var VLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HLe=!1,II=function(n){VLe(e,n);function e(t,r,i){i===void 0&&(i={});var o=n.call(this)||this;return o._state=3,o._onDidEnablementChange=o._register(new j),o.onDidEnablementChange=o._onDidEnablementChange.event,o._onDidStart=o._register(new j),o.onDidStart=o._onDidStart.event,o._onDidChange=o._register(new j),o.onDidChange=o._onDidChange.event,o._onDidReset=o._register(new j),o.onDidReset=o._onDidReset.event,o._onDidEnd=o._register(new j),o.onDidEnd=o._onDidEnd.event,o.linkedSash=void 0,o.orthogonalStartSashDisposables=o._register(new De),o.orthogonalEndSashDisposables=o._register(new De),o.el=ce(t,ke(".monaco-sash")),ct&&de(o.el,"mac"),o._register(pt(o.el,"mousedown")(o.onMouseDown,o)),o._register(pt(o.el,"dblclick")(o.onMouseDoubleClick,o)),Bv.addTarget(o.el),o._register(pt(o.el,Ar.Start)(o.onTouchStart,o)),$1&&de(o.el,"touch"),o.setOrientation(i.orientation||0),o.hidden=!1,o.layoutProvider=r,o.orthogonalStartSash=i.orthogonalStartSash,o.orthogonalEndSash=i.orthogonalEndSash,vt(o.el,"debug",HLe),o}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state!==t&&(vt(this.el,"disabled",t===0),vt(this.el,"minimum",t===1),vt(this.el,"maximum",t===2),this._state=t,this._onDidEnablementChange.fire(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orthogonalStartSash",{get:function(){return this._orthogonalStartSash},set:function(t){this.orthogonalStartSashDisposables.clear(),t?(this.orthogonalStartSashDisposables.add(t.onDidEnablementChange(this.onOrthogonalStartSashEnablementChange,this)),this.onOrthogonalStartSashEnablementChange(t.state)):this.onOrthogonalStartSashEnablementChange(0),this._orthogonalStartSash=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orthogonalEndSash",{get:function(){return this._orthogonalEndSash},set:function(t){this.orthogonalEndSashDisposables.clear(),t?(this.orthogonalEndSashDisposables.add(t.onDidEnablementChange(this.onOrthogonalEndSashEnablementChange,this)),this.onOrthogonalEndSashEnablementChange(t.state)):this.onOrthogonalEndSashEnablementChange(0),this._orthogonalEndSash=t},enumerable:!0,configurable:!0}),e.prototype.setOrientation=function(t){this.orientation=t,this.orientation===1?(de(this.el,"horizontal"),qe(this.el,"vertical")):(qe(this.el,"horizontal"),de(this.el,"vertical")),this.layoutProvider&&this.layout()},e.prototype.onMouseDown=function(t){var r=this;nn.stop(t,!1);var i=!1;if(!t.__orthogonalSashEvent){var o=this.getOrthogonalSash(t);o&&(i=!0,t.__orthogonalSashEvent=!0,o.onMouseDown(t))}if(this.linkedSash&&!t.__linkedSashEvent&&(t.__linkedSashEvent=!0,this.linkedSash.onMouseDown(t)),!!this.state){for(var s=i8("iframe").concat(i8("webview")),a=0,u=s;a<u.length;a++){var l=u[a];l.style.pointerEvents="none"}var f=new Rr(t),h=f.posx,d=f.posy,g=f.altKey,v={startX:h,currentX:h,startY:d,currentY:d,altKey:g};de(this.el,"active"),this._onDidStart.fire(v);var m=pf(this.el),y=function(){var D="";i?D="all-scroll":r.orientation===1?r.state===1?D="s-resize":r.state===2?D="n-resize":D=ct?"row-resize":"ns-resize":r.state===1?D="e-resize":r.state===2?D="w-resize":D=ct?"col-resize":"ew-resize",m.innerHTML="* { cursor: "+D+" !important; }"},b=new De;y(),i||this.onDidEnablementChange(y,null,b);var C=function(D){nn.stop(D,!1);var k=new Rr(D),I={startX:h,currentX:k.posx,startY:d,currentY:k.posy,altKey:g};r._onDidChange.fire(I)},E=function(D){nn.stop(D,!1),r.el.removeChild(m),qe(r.el,"active"),r._onDidEnd.fire(),b.dispose();for(var k=0,I=s;k<I.length;k++){var T=I[k];T.style.pointerEvents="auto"}};pt(window,"mousemove")(C,null,b),pt(window,"mouseup")(E,null,b)}},e.prototype.onMouseDoubleClick=function(t){var r=this.getOrthogonalSash(t);r&&r._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()},e.prototype.onTouchStart=function(t){var r=this;nn.stop(t);var i=[],o=t.pageX,s=t.pageY,a=t.altKey;this._onDidStart.fire({startX:o,currentX:o,startY:s,currentY:s,altKey:a}),i.push(ie(this.el,Ar.Change,function(u){yl(u.pageX)&&yl(u.pageY)&&r._onDidChange.fire({startX:o,currentX:u.pageX,startY:s,currentY:u.pageY,altKey:a})})),i.push(ie(this.el,Ar.End,function(u){r._onDidEnd.fire(),Ue(i)}))},e.prototype.layout=function(){var t=$1?20:4;if(this.orientation===0){var r=this.layoutProvider;this.el.style.left=r.getVerticalSashLeft(this)-t/2+"px",r.getVerticalSashTop&&(this.el.style.top=r.getVerticalSashTop(this)+"px"),r.getVerticalSashHeight&&(this.el.style.height=r.getVerticalSashHeight(this)+"px")}else{var i=this.layoutProvider;this.el.style.top=i.getHorizontalSashTop(this)-t/2+"px",i.getHorizontalSashLeft&&(this.el.style.left=i.getHorizontalSashLeft(this)+"px"),i.getHorizontalSashWidth&&(this.el.style.width=i.getHorizontalSashWidth(this)+"px")}},e.prototype.hide=function(){this.hidden=!0,this.el.style.display="none",this.el.setAttribute("aria-hidden","true")},e.prototype.onOrthogonalStartSashEnablementChange=function(t){vt(this.el,"orthogonal-start",t!==0)},e.prototype.onOrthogonalEndSashEnablementChange=function(t){vt(this.el,"orthogonal-end",t!==0)},e.prototype.getOrthogonalSash=function(t){if(this.orientation===0){if(t.offsetY<=4)return this.orthogonalStartSash;if(t.offsetY>=this.el.clientHeight-4)return this.orthogonalEndSash}else{if(t.offsetX<=4)return this.orthogonalStartSash;if(t.offsetX>=this.el.clientWidth-4)return this.orthogonalEndSash}},e.prototype.dispose=function(){n.prototype.dispose.call(this),this.el&&this.el.parentElement&&this.el.parentElement.removeChild(this.el),this.el=null},e}(te),eg=function(){function n(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=!1),this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=r}return n}(),SZ=[];function J0(n,e,t){SZ.push([n,new eg(e,[],t)])}function ULe(){return SZ}var EZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),a2=xt("IEditorCancelService"),IZ=new Re("cancellableOperation",!1);J0(a2,function(){function n(){this._tokens=new WeakMap}return n.prototype.add=function(e,t){var r=this._tokens.get(e);r||(r=e.invokeWithinContext(function(o){var s=IZ.bindTo(o.get(rt)),a=new bl;return{key:s,tokens:a}}),this._tokens.set(e,r));var i;return r.key.set(!0),i=r.tokens.push(t),function(){i&&(i(),r.key.set(!r.tokens.isEmpty()),i=void 0)}},n.prototype.cancel=function(e){var t=this._tokens.get(e);if(t){var r=t.tokens.pop();r&&(r.cancel(),t.key.set(!t.tokens.isEmpty()))}},n}(),!0);var jLe=function(n){EZ(e,n);function e(t,r){var i=n.call(this,r)||this;return i.editor=t,i._unregister=t.invokeWithinContext(function(o){return o.get(a2).add(t,i)}),i}return e.prototype.dispose=function(){this._unregister(),n.prototype.dispose.call(this)},e}(hd);ee(new(function(n){EZ(e,n);function e(){return n.call(this,{id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:IZ})||this}return e.prototype.runEditorCommand=function(t,r){t.get(a2).cancel(r)},e}($i)));var xZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),u2=function(){function n(e,t){if(this.flags=t,this.flags&1){var r=e.getModel();this.modelVersionId=r?Nt("{0}#{1}",r.uri.toString(),r.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}return n.prototype._equals=function(e){if(!(e instanceof n))return!1;var t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))},n.prototype.validate=function(e){return this._equals(new n(e,this.flags))},n}(),l2=function(n){xZ(e,n);function e(t,r,i){var o=n.call(this,t,i)||this;return o.editor=t,o._listener=new De,r&4&&o._listener.add(t.onDidChangeCursorPosition(function(s){return o.cancel()})),r&2&&o._listener.add(t.onDidChangeCursorSelection(function(s){return o.cancel()})),r&8&&o._listener.add(t.onDidScrollChange(function(s){return o.cancel()})),r&1&&(o._listener.add(t.onDidChangeModel(function(s){return o.cancel()})),o._listener.add(t.onDidChangeModelContent(function(s){return o.cancel()}))),o}return e.prototype.dispose=function(){this._listener.dispose(),n.prototype.dispose.call(this)},e}(jLe),c2=function(n){xZ(e,n);function e(t,r){var i=n.call(this,r)||this;return i._listener=t.onDidChangeContent(function(){return i.cancel()}),i}return e.prototype.dispose=function(){this._listener.dispose(),n.prototype.dispose.call(this)},e}(hd),aR=function(){function n(e,t){this._visiblePosition=e,this._visiblePositionScrollDelta=t}return n.capture=function(e){var t=null,r=0;if(e.getScrollTop()!==0){var i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();var o=e.getTopForPosition(t.lineNumber,t.column);r=e.getScrollTop()-o}}return new n(t,r)},n.prototype.restore=function(e){if(this._visiblePosition){var t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}},n}(),xI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),f2=function(n){xI(e,n);function e(t,r,i){var o=n.call(this)||this;return o.options=i,o._context=t||o,o._action=r,r instanceof ds&&o._register(r.onDidChange(function(s){o.element&&o.handleActionChangeEvent(s)})),o}return e.prototype.handleActionChangeEvent=function(t){t.enabled!==void 0&&this.updateEnabled(),t.checked!==void 0&&this.updateChecked(),t.class!==void 0&&this.updateClass(),t.label!==void 0&&(this.updateLabel(),this.updateTooltip()),t.tooltip!==void 0&&this.updateTooltip()},Object.defineProperty(e.prototype,"actionRunner",{get:function(){return this._actionRunner},set:function(t){this._actionRunner=t},enumerable:!0,configurable:!0}),e.prototype.getAction=function(){return this._action},e.prototype.isEnabled=function(){return this._action.enabled},e.prototype.setActionContext=function(t){this._context=t},e.prototype.render=function(t){var r=this;this.element=t,Bv.addTarget(t);var i=this.options&&this.options.draggable;i&&(t.draggable=!0),this._register(ie(this.element,Ar.Tap,function(o){return r.onClick(o)})),this._register(ie(this.element,Ye.MOUSE_DOWN,function(o){i||nn.stop(o,!0),r._action.enabled&&o.button===0&&r.element&&de(r.element,"active")})),this._register(ie(this.element,Ye.CLICK,function(o){nn.stop(o,!0),r.options&&r.options.isMenu?r.onClick(o):ZK(function(){return r.onClick(o)})})),this._register(ie(this.element,Ye.DBLCLICK,function(o){nn.stop(o,!0)})),[Ye.MOUSE_UP,Ye.MOUSE_OUT].forEach(function(o){r._register(ie(r.element,o,function(s){nn.stop(s),qe(r.element,"active")}))})},e.prototype.onClick=function(t){nn.stop(t,!0);var r;Pc(this._context)?r=t:(r=this._context,di(r)&&(r.event=t)),this._actionRunner.run(this._action,r)},e.prototype.focus=function(){this.element&&(this.element.focus(),de(this.element,"focused"))},e.prototype.blur=function(){this.element&&(this.element.blur(),qe(this.element,"focused"))},e.prototype.updateEnabled=function(){},e.prototype.updateLabel=function(){},e.prototype.updateTooltip=function(){},e.prototype.updateClass=function(){},e.prototype.updateChecked=function(){},e.prototype.dispose=function(){this.element&&(eF(this.element),this.element=void 0),n.prototype.dispose.call(this)},e}(te),DI=function(n){xI(e,n);function e(t){var r=n.call(this,e.ID,t,t?"separator text":"separator")||this;return r.checked=!1,r.radio=!1,r.enabled=!1,r}return e.ID="vs.actions.separator",e}(ds),_S=function(n){xI(e,n);function e(t,r,i){i===void 0&&(i={});var o=n.call(this,t,r,i)||this;return o.options=i,o.options.icon=i.icon!==void 0?i.icon:!1,o.options.label=i.label!==void 0?i.label:!0,o.cssClass="",o}return e.prototype.render=function(t){n.prototype.render.call(this,t),this.element&&(this.label=ce(this.element,ke("a.action-label"))),this._action.id===DI.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button"),this.options.label&&this.options.keybinding&&this.element&&(ce(this.element,ke("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()},e.prototype.focus=function(){n.prototype.focus.call(this),this.label.focus()},e.prototype.updateLabel=function(){this.options.label&&(this.label.textContent=this.getAction().label)},e.prototype.updateTooltip=function(){var t=null;this.getAction().tooltip?t=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(t=this.getAction().label,this.options.keybinding&&(t=S({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",t,this.options.keybinding))),t&&(this.label.title=t)},e.prototype.updateClass=function(){this.cssClass&&aI(this.label,this.cssClass),this.options.icon?(this.cssClass=this.getAction().class,de(this.label,"icon"),this.cssClass&&tF(this.label,this.cssClass),this.updateEnabled()):qe(this.label,"icon")},e.prototype.updateEnabled=function(){this.getAction().enabled?(this.label.removeAttribute("aria-disabled"),this.element&&qe(this.element,"disabled"),qe(this.label,"disabled"),this.label.tabIndex=0):(this.label.setAttribute("aria-disabled","true"),this.element&&de(this.element,"disabled"),de(this.label,"disabled"),oF(this.label))},e.prototype.updateChecked=function(){this.getAction().checked?de(this.label,"checked"):qe(this.label,"checked")},e}(f2),HU={orientation:0,context:null,triggerKeys:{keys:[3,10],keyDown:!1}},eb=function(n){xI(e,n);function e(t,r){r===void 0&&(r=HU);var i=n.call(this)||this;i._onDidBlur=i._register(new j),i.onDidBlur=i._onDidBlur.event,i._onDidCancel=i._register(new j),i.onDidCancel=i._onDidCancel.event,i._onDidRun=i._register(new j),i.onDidRun=i._onDidRun.event,i._onDidBeforeRun=i._register(new j),i.onDidBeforeRun=i._onDidBeforeRun.event,i.options=r,i._context=r.context,i.options.triggerKeys||(i.options.triggerKeys=HU.triggerKeys),i.options.actionRunner?i._actionRunner=i.options.actionRunner:(i._actionRunner=new cY,i._register(i._actionRunner)),i._register(i._actionRunner.onDidRun(function(a){return i._onDidRun.fire(a)})),i._register(i._actionRunner.onDidBeforeRun(function(a){return i._onDidBeforeRun.fire(a)})),i.viewItems=[],i.focusedItem=void 0,i.domNode=document.createElement("div"),i.domNode.className="monaco-action-bar",r.animated!==!1&&de(i.domNode,"animated");var o,s;switch(i.options.orientation){case 0:o=15,s=17;break;case 1:o=17,s=15,i.domNode.className+=" reverse";break;case 2:o=16,s=18,i.domNode.className+=" vertical";break;case 3:o=18,s=16,i.domNode.className+=" vertical reverse";break}return i._register(ie(i.domNode,Ye.KEY_DOWN,function(a){var u=new Sn(a),l=!0;u.equals(o)?i.focusPrevious():u.equals(s)?i.focusNext():u.equals(9)?i.cancel():i.isTriggerKeyEvent(u)?i.options.triggerKeys&&i.options.triggerKeys.keyDown&&i.doTrigger(u):l=!1,l&&(u.preventDefault(),u.stopPropagation())})),i._register(ie(i.domNode,Ye.KEY_UP,function(a){var u=new Sn(a);i.isTriggerKeyEvent(u)?(i.options.triggerKeys&&!i.options.triggerKeys.keyDown&&i.doTrigger(u),u.preventDefault(),u.stopPropagation()):(u.equals(2)||u.equals(1026))&&i.updateFocusedItem()})),i.focusTracker=i._register(Ty(i.domNode)),i._register(i.focusTracker.onDidBlur(function(){(document.activeElement===i.domNode||!wu(document.activeElement,i.domNode))&&(i._onDidBlur.fire(),i.focusedItem=void 0)})),i._register(i.focusTracker.onDidFocus(function(){return i.updateFocusedItem()})),i.actionsList=document.createElement("ul"),i.actionsList.className="actions-container",i.actionsList.setAttribute("role","toolbar"),i.options.ariaLabel&&i.actionsList.setAttribute("aria-label",i.options.ariaLabel),i.domNode.appendChild(i.actionsList),t.appendChild(i.domNode),i}return e.prototype.isTriggerKeyEvent=function(t){var r=!1;return this.options.triggerKeys&&this.options.triggerKeys.keys.forEach(function(i){r=r||t.equals(i)}),r},e.prototype.updateFocusedItem=function(){for(var t=0;t<this.actionsList.children.length;t++){var r=this.actionsList.children[t];if(wu(document.activeElement,r)){this.focusedItem=t;break}}},Object.defineProperty(e.prototype,"context",{get:function(){return this._context},set:function(t){this._context=t,this.viewItems.forEach(function(r){return r.setActionContext(t)})},enumerable:!0,configurable:!0}),e.prototype.getContainer=function(){return this.domNode},e.prototype.push=function(t,r){var i=this;r===void 0&&(r={});var o=Array.isArray(t)?t:[t],s=yl(r.index)?r.index:null;o.forEach(function(a){var u=document.createElement("li");u.className="action-item",u.setAttribute("role","presentation"),i._register(ie(u,Ye.CONTEXT_MENU,function(f){f.preventDefault(),f.stopPropagation()}));var l;i.options.actionViewItemProvider&&(l=i.options.actionViewItemProvider(a)),l||(l=new _S(i.context,a,r)),l.actionRunner=i._actionRunner,l.setActionContext(i.context),l.render(u),s===null||s<0||s>=i.actionsList.children.length?(i.actionsList.appendChild(u),i.viewItems.push(l)):(i.actionsList.insertBefore(u,i.actionsList.children[s]),i.viewItems.splice(s,0,l),s++)})},e.prototype.clear=function(){this.viewItems=Ue(this.viewItems),ms(this.actionsList)},e.prototype.isEmpty=function(){return this.viewItems.length===0},e.prototype.focus=function(t){var r=!1,i=void 0;t===void 0?r=!0:typeof t=="number"?i=t:typeof t=="boolean"&&(r=t),r&&typeof this.focusedItem>"u"?(this.focusedItem=this.viewItems.length-1,this.focusNext()):(i!==void 0&&(this.focusedItem=i),this.updateFocus())},e.prototype.focusNext=function(){typeof this.focusedItem>"u"&&(this.focusedItem=this.viewItems.length-1);var t=this.focusedItem,r;do this.focusedItem=(this.focusedItem+1)%this.viewItems.length,r=this.viewItems[this.focusedItem];while(this.focusedItem!==t&&!r.isEnabled());this.focusedItem===t&&!r.isEnabled()&&(this.focusedItem=void 0),this.updateFocus()},e.prototype.focusPrevious=function(){typeof this.focusedItem>"u"&&(this.focusedItem=0);var t=this.focusedItem,r;do this.focusedItem=this.focusedItem-1,this.focusedItem<0&&(this.focusedItem=this.viewItems.length-1),r=this.viewItems[this.focusedItem];while(this.focusedItem!==t&&!r.isEnabled());this.focusedItem===t&&!r.isEnabled()&&(this.focusedItem=void 0),this.updateFocus(!0)},e.prototype.updateFocus=function(t){typeof this.focusedItem>"u"&&this.actionsList.focus();for(var r=0;r<this.viewItems.length;r++){var i=this.viewItems[r],o=i;r===this.focusedItem?U_(o.isEnabled)&&(o.isEnabled()&&U_(o.focus)?o.focus(t):this.actionsList.focus()):U_(o.blur)&&o.blur()}},e.prototype.doTrigger=function(t){if(!(typeof this.focusedItem>"u")){var r=this.viewItems[this.focusedItem];if(r instanceof f2){var i=r._context===null||r._context===void 0?t:r._context;this.run(r._action,i)}}},e.prototype.cancel=function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this._onDidCancel.fire()},e.prototype.run=function(t,r){return this._actionRunner.run(t,r)},e.prototype.dispose=function(){Ue(this.viewItems),this.viewItems=[],eF(this.getContainer()),n.prototype.dispose.call(this)},e}(te),h2=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fC=3,i_=function(){function n(e,t,r,i){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=r,this.modifiedLineEnd=i}return n.prototype.getType=function(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0},n}(),WT=function(){function n(e){this.entries=e}return n}(),zLe=function(n){h2(e,n);function e(t){var r=n.call(this)||this;return r._width=0,r._diffEditor=t,r._isVisible=!1,r.shadow=st(document.createElement("div")),r.shadow.setClassName("diff-review-shadow"),r.actionBarContainer=st(document.createElement("div")),r.actionBarContainer.setClassName("diff-review-actions"),r._actionBar=r._register(new eb(r.actionBarContainer.domNode)),r._actionBar.push(new ds("diffreview.close",S("label.close","Close"),"close-diff-review",!0,function(){return r.hide(),Promise.resolve(null)}),{label:!1,icon:!0}),r.domNode=st(document.createElement("div")),r.domNode.setClassName("diff-review monaco-editor-background"),r._content=st(document.createElement("div")),r._content.setClassName("diff-review-content"),r.scrollbar=r._register(new Z0(r._content.domNode,{})),r.domNode.domNode.appendChild(r.scrollbar.getDomNode()),r._register(t.onDidUpdateDiff(function(){r._isVisible&&(r._diffs=r._compute(),r._render())})),r._register(t.getModifiedEditor().onDidChangeCursorPosition(function(){r._isVisible&&r._render()})),r._register(t.getOriginalEditor().onDidFocusEditorWidget(function(){r._isVisible&&r.hide()})),r._register(t.getModifiedEditor().onDidFocusEditorWidget(function(){r._isVisible&&r.hide()})),r._register(Br(r.domNode.domNode,"click",function(i){i.preventDefault();var o=TO(i.target,"diff-review-row");o&&r._goToRow(o)})),r._register(Br(r.domNode.domNode,"keydown",function(i){(i.equals(18)||i.equals(2066)||i.equals(530))&&(i.preventDefault(),r._goToRow(r._getNextRow())),(i.equals(16)||i.equals(2064)||i.equals(528))&&(i.preventDefault(),r._goToRow(r._getPrevRow())),(i.equals(9)||i.equals(2057)||i.equals(521)||i.equals(1033))&&(i.preventDefault(),r.hide()),(i.equals(10)||i.equals(3))&&(i.preventDefault(),r.accept())})),r._diffs=[],r._currentDiff=null,r}return e.prototype.prev=function(){var t=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){for(var r=-1,i=0,o=this._diffs.length;i<o;i++)if(this._diffs[i]===this._currentDiff){r=i;break}t=this._diffs.length+r-1}else t=this._findDiffIndex(this._diffEditor.getPosition());this._diffs.length!==0&&(t=t%this._diffs.length,this._diffEditor.setPosition(new $(this._diffs[t].entries[0].modifiedLineStart,1)),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow()))},e.prototype.next=function(){var t=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){for(var r=-1,i=0,o=this._diffs.length;i<o;i++)if(this._diffs[i]===this._currentDiff){r=i;break}t=r+1}else t=this._findDiffIndex(this._diffEditor.getPosition());this._diffs.length!==0&&(t=t%this._diffs.length,this._diffEditor.setPosition(new $(this._diffs[t].entries[0].modifiedLineStart,1)),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow()))},e.prototype.accept=function(){var t=-1,r=this._getCurrentFocusedRow();if(r){var i=parseInt(r.getAttribute("data-line"),10);isNaN(i)||(t=i)}this.hide(),t!==-1&&(this._diffEditor.setPosition(new $(t,1)),this._diffEditor.revealPosition(new $(t,1),1))},e.prototype.hide=function(){this._isVisible=!1,this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()},e.prototype._getPrevRow=function(){var t=this._getCurrentFocusedRow();return t?t.previousElementSibling?t.previousElementSibling:t:this._getFirstRow()},e.prototype._getNextRow=function(){var t=this._getCurrentFocusedRow();return t?t.nextElementSibling?t.nextElementSibling:t:this._getFirstRow()},e.prototype._getFirstRow=function(){return this.domNode.domNode.querySelector(".diff-review-row")},e.prototype._getCurrentFocusedRow=function(){var t=document.activeElement;return t&&/diff-review-row/.test(t.className)?t:null},e.prototype._goToRow=function(t){var r=this._getCurrentFocusedRow();t.tabIndex=0,t.focus(),r&&r!==t&&(r.tabIndex=-1),this.scrollbar.scanDomNode()},e.prototype.isVisible=function(){return this._isVisible},e.prototype.layout=function(t,r,i){this._width=r,this.shadow.setTop(t-6),this.shadow.setWidth(r),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(t),this.domNode.setWidth(r),this.domNode.setHeight(i),this._content.setHeight(i),this._content.setWidth(r),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))},e.prototype._compute=function(){var t=this._diffEditor.getLineChanges();if(!t||t.length===0)return[];var r=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel();return!r||!i?[]:e._mergeAdjacent(t,r.getLineCount(),i.getLineCount())},e._mergeAdjacent=function(t,r,i){if(!t||t.length===0)return[];for(var o=[],s=0,a=0,u=t.length;a<u;a++){var l=t[a],f=l.originalStartLineNumber,h=l.originalEndLineNumber,d=l.modifiedStartLineNumber,g=l.modifiedEndLineNumber,v=[],m=0;{var y=h===0?f:f-1,b=g===0?d:d-1,C=1,E=1;if(a>0){var D=t[a-1];D.originalEndLineNumber===0?C=D.originalStartLineNumber+1:C=D.originalEndLineNumber+1,D.modifiedEndLineNumber===0?E=D.modifiedStartLineNumber+1:E=D.modifiedEndLineNumber+1}var k=y-fC+1,I=b-fC+1;if(k<C){var T=C-k;k=k+T,I=I+T}if(I<E){var T=E-I;k=k+T,I=I+T}v[m++]=new i_(k,y,I,b)}h!==0&&(v[m++]=new i_(f,h,0,0)),g!==0&&(v[m++]=new i_(0,0,d,g));{var A=h===0?f+1:h+1,M=g===0?d+1:g+1,L=r,F=i;if(a+1<u){var W=t[a+1];W.originalEndLineNumber===0?L=W.originalStartLineNumber:L=W.originalStartLineNumber-1,W.modifiedEndLineNumber===0?F=W.modifiedStartLineNumber:F=W.modifiedStartLineNumber-1}var z=A+fC-1,K=M+fC-1;if(z>L){var T=L-z;z=z+T,K=K+T}if(K>F){var T=F-K;z=z+T,K=K+T}v[m++]=new i_(A,z,M,K)}o[s++]=new WT(v)}for(var X=o[0].entries,se=[],we=0,a=1,u=o.length;a<u;a++){var ae=o[a].entries,Dt=X[X.length-1],At=ae[0];if(Dt.getType()===0&&At.getType()===0&&At.originalLineStart<=Dt.originalLineEnd){X[X.length-1]=new i_(Dt.originalLineStart,At.originalLineEnd,Dt.modifiedLineStart,At.modifiedLineEnd),X=X.concat(ae.slice(1));continue}se[we++]=new WT(X),X=ae}return se[we++]=new WT(X),se},e.prototype._findDiffIndex=function(t){for(var r=t.lineNumber,i=0,o=this._diffs.length;i<o;i++){var s=this._diffs[i].entries,a=s[s.length-1].modifiedLineEnd;if(r<=a)return i}return 0},e.prototype._render=function(){var t=this._diffEditor.getOriginalEditor().getConfiguration(),r=this._diffEditor.getModifiedEditor().getConfiguration(),i=this._diffEditor.getOriginalEditor().getModel(),o=this._diffEditor.getModifiedEditor().getModel(),s=i.getOptions(),a=o.getOptions();if(!this._isVisible||!i||!o){ms(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}var u=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[u]!==this._currentDiff){this._currentDiff=this._diffs[u];var l=this._diffs[u].entries,f=document.createElement("div");f.className="diff-review-table",f.setAttribute("role","list"),_s.applyFontInfoSlow(f,r.fontInfo);for(var h=0,d=0,g=0,v=0,m=0,y=l.length;m<y;m++){var b=l[m],C=b.originalLineStart,E=b.originalLineEnd,D=b.modifiedLineStart,k=b.modifiedLineEnd;C!==0&&(h===0||C<h)&&(h=C),E!==0&&(d===0||E>d)&&(d=E),D!==0&&(g===0||D<g)&&(g=D),k!==0&&(v===0||k>v)&&(v=k)}var I=document.createElement("div");I.className="diff-review-row";var T=document.createElement("div");T.className="diff-review-cell diff-review-summary";var A=d-h+1,M=v-g+1;T.appendChild(document.createTextNode(u+1+"/"+this._diffs.length+": @@ -"+h+","+A+" +"+g+","+M+" @@")),I.setAttribute("data-line",String(g));var L=function(K){return K===0?S("no_lines","no lines"):K===1?S("one_line","1 line"):S("more_lines","{0} lines",K)},F=L(A),W=L(M);I.setAttribute("aria-label",S({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines", "1 line" or "X lines", localized separately.']},"Difference {0} of {1}: original {2}, {3}, modified {4}, {5}",u+1,this._diffs.length,h,F,g,W)),I.appendChild(T),I.setAttribute("role","listitem"),f.appendChild(I);for(var z=g,m=0,y=l.length;m<y;m++){var b=l[m];e._renderSection(f,b,z,this._width,t,i,s,r,o,a),b.modifiedLineStart!==0&&(z=b.modifiedLineEnd)}ms(this._content.domNode),this._content.domNode.appendChild(f),this.scrollbar.scanDomNode()}},e._renderSection=function(t,r,i,o,s,a,u,l,f,h){var d=r.getType(),g="diff-review-row",v="",m="diff-review-spacer";switch(d){case 1:g="diff-review-row line-insert",v=" char-insert",m="diff-review-spacer insert-sign";break;case 2:g="diff-review-row line-delete",v=" char-delete",m="diff-review-spacer delete-sign";break}for(var y=r.originalLineStart,b=r.originalLineEnd,C=r.modifiedLineStart,E=r.modifiedLineEnd,D=Math.max(E-C,b-y),k=s.layoutInfo.glyphMarginWidth+s.layoutInfo.lineNumbersWidth,I=10+l.layoutInfo.glyphMarginWidth+l.layoutInfo.lineNumbersWidth,T=0;T<=D;T++){var A=y===0?0:y+T,M=C===0?0:C+T,L=document.createElement("div");L.style.minWidth=o+"px",L.className=g,L.setAttribute("role","listitem"),M!==0&&(i=M),L.setAttribute("data-line",String(i));var F=document.createElement("div");F.className="diff-review-cell",L.appendChild(F);var W=document.createElement("span");W.style.width=k+"px",W.style.minWidth=k+"px",W.className="diff-review-line-number"+v,A!==0?W.appendChild(document.createTextNode(String(A))):W.innerHTML="&nbsp;",F.appendChild(W);var z=document.createElement("span");z.style.width=I+"px",z.style.minWidth=I+"px",z.style.paddingRight="10px",z.className="diff-review-line-number"+v,M!==0?z.appendChild(document.createTextNode(String(M))):z.innerHTML="&nbsp;",F.appendChild(z);var K=document.createElement("span");K.className=m,K.innerHTML="&nbsp;&nbsp;",F.appendChild(K);var X=void 0;M!==0?(F.insertAdjacentHTML("beforeend",this._renderLine(f,l,h.tabSize,M)),X=f.getLineContent(M)):(F.insertAdjacentHTML("beforeend",this._renderLine(a,s,u.tabSize,A)),X=a.getLineContent(A)),X.length===0&&(X=S("blankLine","blank"));var se="";switch(d){case 0:se=S("equalLine","original {0}, modified {1}: {2}",A,M,X);break;case 1:se=S("insertLine","+ modified {0}: {1}",M,X);break;case 2:se=S("deleteLine","- original {0}: {1}",A,X);break}L.setAttribute("aria-label",se),t.appendChild(L)}},e._renderLine=function(t,r,i,o){var s=t.getLineContent(o),a=(16384|2<<23)>>>0,u=new Uint32Array(2);u[0]=s.length,u[1]=a;var l=new wa(u,s),f=ka.isBasicASCII(s,t.mightContainNonBasicASCII()),h=ka.containsRTL(s,f,t.mightContainRTL()),d=gI(new Pv(r.fontInfo.isMonospace&&!r.viewInfo.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,s,!1,f,h,0,l,[],i,r.fontInfo.spaceWidth,r.viewInfo.stopRenderingLineAfter,r.viewInfo.renderWhitespace,r.viewInfo.renderControlCharacters,r.viewInfo.fontLigatures,null));return d.html},e}(te);Xt(function(n,e){var t=n.getColor(nZ);t&&e.addRule(".monaco-diff-editor .diff-review-line-number { color: "+t+"; }");var r=n.getColor(bI);r&&e.addRule(".monaco-diff-editor .diff-review-shadow { box-shadow: "+r+" 0 -6px 6px -6px inset; }")});var qLe=function(n){h2(e,n);function e(){return n.call(this,{id:"editor.action.diffReview.next",label:S("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:_e.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})||this}return e.prototype.run=function(t,r){var i=DZ(t);i&&i.diffReviewNext()},e}(Ne),$Le=function(n){h2(e,n);function e(){return n.call(this,{id:"editor.action.diffReview.prev",label:S("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:_e.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})||this}return e.prototype.run=function(t,r){var i=DZ(t);i&&i.diffReviewPrev()},e}(Ne);function DZ(n){for(var e=n.get(an),t=e.listDiffEditors(),r=0,i=t.length;r<i;r++){var o=t[r];if(o.hasWidgetFocus())return o}return null}re(qLe);re($Le);var vf=xt("contextViewService"),Wd=xt("contextMenuService"),KLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VT=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},HT=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},GLe=function(n){KLe(e,n);function e(t,r,i,o,s,a){var u=n.call(this)||this;u._viewZoneId=t,u._marginDomNode=r,u.editor=i,u.diff=o,u._contextMenuService=s,u._clipboardService=a,u._visibility=!1,u._marginDomNode.style.zIndex="10",u._diffActions=document.createElement("div"),u._diffActions.className="lightbulb-glyph",u._diffActions.style.position="absolute";var l=i.getConfiguration().lineHeight,f=i.getModel().getEOL();u._diffActions.style.right="0px",u._diffActions.style.visibility="hidden",u._diffActions.style.height=l+"px",u._diffActions.style.lineHeight=l+"px",u._marginDomNode.appendChild(u._diffActions);var h=[];h.push(new ds("diff.clipboard.copyDeletedContent",o.originalEndLineNumber>o.modifiedStartLineNumber?S("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):S("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"),void 0,!0,function(){return VT(u,void 0,void 0,function(){return HT(this,function(m){switch(m.label){case 0:return[4,this._clipboardService.writeText(o.originalContent.join(f)+f)];case 1:return m.sent(),[2]}})})}));var d=0,g=void 0;o.originalEndLineNumber>o.modifiedStartLineNumber&&(g=new ds("diff.clipboard.copyDeletedLineContent",S("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",o.originalStartLineNumber),void 0,!0,function(){return VT(u,void 0,void 0,function(){return HT(this,function(m){switch(m.label){case 0:return[4,this._clipboardService.writeText(o.originalContent[d])];case 1:return m.sent(),[2]}})})}),h.push(g));var v=i.getConfiguration().readOnly;return v||h.push(new ds("diff.inline.revertChange",S("diff.inline.revertChange.label","Revert this change"),void 0,!0,function(){return VT(u,void 0,void 0,function(){var m,m;return HT(this,function(y){return o.modifiedEndLineNumber===0?(m=i.getModel().getLineMaxColumn(o.modifiedStartLineNumber),i.executeEdits("diffEditor",[{range:new R(o.modifiedStartLineNumber,m,o.modifiedStartLineNumber,m),text:f+o.originalContent.join(f)}])):(m=i.getModel().getLineMaxColumn(o.modifiedEndLineNumber),i.executeEdits("diffEditor",[{range:new R(o.modifiedStartLineNumber,1,o.modifiedEndLineNumber,m),text:o.originalContent.join(f)}])),[2]})})})),u._register(Br(u._diffActions,"mousedown",function(m){var y=Wr(u._diffActions),b=y.top,C=y.height,E=Math.floor(l/3);m.preventDefault(),u._contextMenuService.showContextMenu({getAnchor:function(){return{x:m.posx,y:b+C+E}},getActions:function(){return g&&(g.label=S("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",o.originalStartLineNumber+d)),h},autoSelectFirstItem:!0})})),u._register(i.onMouseMove(function(m){if(m.target.type===8||m.target.type===5){var y=m.target.detail.viewZoneId;y===u._viewZoneId?(u.visibility=!0,d=u._updateLightBulbPosition(u._marginDomNode,m.event.browserEvent.y,l)):u.visibility=!1}else u.visibility=!1})),u}return Object.defineProperty(e.prototype,"visibility",{get:function(){return this._visibility},set:function(t){this._visibility!==t&&(this._visibility=t,t?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")},enumerable:!0,configurable:!0}),e.prototype._updateLightBulbPosition=function(t,r,i){var o=Wr(t).top,s=r-o,a=Math.floor(s/i),u=a*i;return this._diffActions.style.top=u+"px",a},e}(te),Uv=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YLe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},sh=function(n,e){return function(t,r){e(t,r,n)}},UU=function(){function n(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this.inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}return n.prototype.getForeignViewZones=function(e){var t=this;return e.filter(function(r){return!t._zonesMap[String(r.id)]})},n.prototype.clean=function(e){var t=this;this._zones.length>0&&e.changeViewZones(function(r){for(var i=0,o=t._zones.length;i<o;i++)r.removeZone(t._zones[i])}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])},n.prototype.apply=function(e,t,r,i){var o=this,s=i?aR.capture(e):null;e.changeViewZones(function(a){for(var u=0,l=o._zones.length;u<l;u++)a.removeZone(o._zones[u]);for(var u=0,f=o.inlineDiffMargins.length;u<f;u++)o.inlineDiffMargins[u].dispose();o._zones=[],o._zonesMap={},o.inlineDiffMargins=[];for(var u=0,h=r.zones.length;u<h;u++){var d=r.zones[u];d.suppressMouseDown=!1;var g=a.addZone(d);o._zones.push(g),o._zonesMap[String(g)]=!0,r.zones[u].diff&&d.marginDomNode&&o._clipboardService&&o.inlineDiffMargins.push(new GLe(g,d.marginDomNode,e,r.zones[u].diff,o._contextMenuService,o._clipboardService))}}),s&&s.restore(e),this._decorations=e.deltaDecorations(this._decorations,r.decorations),t&&t.setZones(r.overviewZones)},n}(),ZLe=0,uR=function(n){Uv(e,n);function e(t,r,i,o,s,a,u,l,f,h){var d=n.call(this)||this;d._onDidDispose=d._register(new j),d.onDidDispose=d._onDidDispose.event,d._onDidUpdateDiff=d._register(new j),d.onDidUpdateDiff=d._onDidUpdateDiff.event,d._lastOriginalWarning=null,d._lastModifiedWarning=null,d._editorWorkerService=o,d._codeEditorService=u,d._contextKeyService=d._register(s.createScoped(t)),d._contextKeyService.createKey("isInDiffEditor",!0),d._themeService=l,d._notificationService=f,d.id=++ZLe,d._domElement=t,r=r||{},d._renderSideBySide=!0,typeof r.renderSideBySide<"u"&&(d._renderSideBySide=r.renderSideBySide),d._ignoreTrimWhitespace=!0,typeof r.ignoreTrimWhitespace<"u"&&(d._ignoreTrimWhitespace=r.ignoreTrimWhitespace),d._renderIndicators=!0,typeof r.renderIndicators<"u"&&(d._renderIndicators=r.renderIndicators),d._originalIsEditable=!1,typeof r.originalEditable<"u"&&(d._originalIsEditable=!!r.originalEditable),d._updateDecorationsRunner=d._register(new hr(function(){return d._updateDecorations()},0)),d._containerDomElement=document.createElement("div"),d._containerDomElement.className=e._getClassName(d._themeService.getTheme(),d._renderSideBySide),d._containerDomElement.style.position="relative",d._containerDomElement.style.height="100%",d._domElement.appendChild(d._containerDomElement),d._overviewViewportDomElement=st(document.createElement("div")),d._overviewViewportDomElement.setClassName("diffViewport"),d._overviewViewportDomElement.setPosition("absolute"),d._overviewDomElement=document.createElement("div"),d._overviewDomElement.className="diffOverview",d._overviewDomElement.style.position="absolute",d._overviewDomElement.appendChild(d._overviewViewportDomElement.domNode),d._register(Br(d._overviewDomElement,"mousedown",function(E){d.modifiedEditor.delegateVerticalScrollbarMouseDown(E)})),d._containerDomElement.appendChild(d._overviewDomElement),d._originalDomNode=document.createElement("div"),d._originalDomNode.className="editor original",d._originalDomNode.style.position="absolute",d._originalDomNode.style.height="100%",d._containerDomElement.appendChild(d._originalDomNode),d._modifiedDomNode=document.createElement("div"),d._modifiedDomNode.className="editor modified",d._modifiedDomNode.style.position="absolute",d._modifiedDomNode.style.height="100%",d._containerDomElement.appendChild(d._modifiedDomNode),d._beginUpdateDecorationsTimeout=-1,d._currentlyChangingViewZones=!1,d._diffComputationToken=0,d._originalEditorState=new UU(h,i),d._modifiedEditorState=new UU(h,i),d._isVisible=!0,d._isHandlingScrollEvent=!1,d._width=0,d._height=0,d._reviewHeight=0,d._diffComputationResult=null;var g=d._contextKeyService.createScoped();g.createKey("isInDiffLeftEditor",!0);var v=new ev;v.set(rt,g);var m=a.createChild(v),y=d._contextKeyService.createScoped();y.createKey("isInDiffRightEditor",!0);var b=new ev;b.set(rt,y);var C=a.createChild(b);return d.originalEditor=d._createLeftHandSideEditor(r,m),d.modifiedEditor=d._createRightHandSideEditor(r,C),d._originalOverviewRuler=null,d._modifiedOverviewRuler=null,d._reviewPane=new zLe(d),d._containerDomElement.appendChild(d._reviewPane.domNode.domNode),d._containerDomElement.appendChild(d._reviewPane.shadow.domNode),d._containerDomElement.appendChild(d._reviewPane.actionBarContainer.domNode),r.automaticLayout?(d._measureDomElementToken=new Mv,d._measureDomElementToken.cancelAndSet(function(){return d._measureDomElement(!1)},100)):d._measureDomElementToken=null,d._enableSplitViewResizing=!0,typeof r.enableSplitViewResizing<"u"&&(d._enableSplitViewResizing=r.enableSplitViewResizing),d._renderSideBySide?d._setStrategy(new zU(d._createDataSource(),d._enableSplitViewResizing)):d._setStrategy(new qU(d._createDataSource(),d._enableSplitViewResizing)),d._register(l.onThemeChange(function(E){d._strategy&&d._strategy.applyColors(E)&&d._updateDecorationsRunner.schedule(),d._containerDomElement.className=e._getClassName(d._themeService.getTheme(),d._renderSideBySide)})),d._codeEditorService.addDiffEditor(d),d}return e.prototype.hasWidgetFocus=function(){return wu(document.activeElement,this._domElement)},e.prototype.diffReviewNext=function(){this._reviewPane.next()},e.prototype.diffReviewPrev=function(){this._reviewPane.prev()},e._getClassName=function(t,r){var i="monaco-diff-editor monaco-editor-background ";return r&&(i+="side-by-side "),i+=aS(t.type),i},e.prototype._recreateOverviewRulers=function(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this.originalEditor.hasModel()&&(this._originalOverviewRuler=this.originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this.modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this.modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers()},e.prototype._createLeftHandSideEditor=function(t,r){var i=this,o=this._createInnerEditor(r,this._originalDomNode,this._adjustOptionsForLeftHandSide(t,this._originalIsEditable));return this._register(o.onDidScrollChange(function(s){i._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(i._isHandlingScrollEvent=!0,i.modifiedEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),i._isHandlingScrollEvent=!1,i._layoutOverviewViewport())})),this._register(o.onDidChangeViewZones(function(){i._onViewZonesChanged()})),this._register(o.onDidChangeModelContent(function(){i._isVisible&&i._beginUpdateDecorationsSoon()})),o},e.prototype._createRightHandSideEditor=function(t,r){var i=this,o=this._createInnerEditor(r,this._modifiedDomNode,this._adjustOptionsForRightHandSide(t));return this._register(o.onDidScrollChange(function(s){i._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(i._isHandlingScrollEvent=!0,i.originalEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),i._isHandlingScrollEvent=!1,i._layoutOverviewViewport())})),this._register(o.onDidChangeViewZones(function(){i._onViewZonesChanged()})),this._register(o.onDidChangeConfiguration(function(s){s.fontInfo&&o.getModel()&&i._onViewZonesChanged()})),this._register(o.onDidChangeModelContent(function(){i._isVisible&&i._beginUpdateDecorationsSoon()})),o},e.prototype._createInnerEditor=function(t,r,i){return t.createInstance(s2,r,i,{})},e.prototype.dispose=function(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._measureDomElementToken&&this._measureDomElementToken.dispose(),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this.originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this.modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),n.prototype.dispose.call(this)},e.prototype.getId=function(){return this.getEditorType()+":"+this.id},e.prototype.getEditorType=function(){return uI.IDiffEditor},e.prototype.getLineChanges=function(){return this._diffComputationResult?this._diffComputationResult.changes:null},e.prototype.getOriginalEditor=function(){return this.originalEditor},e.prototype.getModifiedEditor=function(){return this.modifiedEditor},e.prototype.updateOptions=function(t){var r=!1;typeof t.renderSideBySide<"u"&&this._renderSideBySide!==t.renderSideBySide&&(this._renderSideBySide=t.renderSideBySide,r=!0);var i=!1;typeof t.ignoreTrimWhitespace<"u"&&this._ignoreTrimWhitespace!==t.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=t.ignoreTrimWhitespace,i=!0),typeof t.renderIndicators<"u"&&this._renderIndicators!==t.renderIndicators&&(this._renderIndicators=t.renderIndicators,i=!0),i&&this._beginUpdateDecorations(),typeof t.originalEditable<"u"&&(this._originalIsEditable=!!t.originalEditable),this.modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(t)),this.originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(t,this._originalIsEditable)),typeof t.enableSplitViewResizing<"u"&&(this._enableSplitViewResizing=t.enableSplitViewResizing),this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing),r&&(this._renderSideBySide?this._setStrategy(new zU(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new qU(this._createDataSource(),this._enableSplitViewResizing)),this._containerDomElement.className=e._getClassName(this._themeService.getTheme(),this._renderSideBySide))},e.prototype.getModel=function(){return{original:this.originalEditor.getModel(),modified:this.modifiedEditor.getModel()}},e.prototype.setModel=function(t){if(t&&(!t.original||!t.modified))throw new Error(t.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this.originalEditor.setModel(t?t.original:null),this.modifiedEditor.setModel(t?t.modified:null),this._updateDecorationsRunner.cancel(),t&&(this.originalEditor.setScrollTop(0),this.modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,t?(this._recreateOverviewRulers(),this._beginUpdateDecorations()):this._diffComputationResult=null,this._layoutOverviewViewport()},e.prototype.getDomNode=function(){return this._domElement},e.prototype.getVisibleColumnFromPosition=function(t){return this.modifiedEditor.getVisibleColumnFromPosition(t)},e.prototype.getPosition=function(){return this.modifiedEditor.getPosition()},e.prototype.setPosition=function(t){this.modifiedEditor.setPosition(t)},e.prototype.revealLine=function(t,r){r===void 0&&(r=0),this.modifiedEditor.revealLine(t,r)},e.prototype.revealLineInCenter=function(t,r){r===void 0&&(r=0),this.modifiedEditor.revealLineInCenter(t,r)},e.prototype.revealLineInCenterIfOutsideViewport=function(t,r){r===void 0&&(r=0),this.modifiedEditor.revealLineInCenterIfOutsideViewport(t,r)},e.prototype.revealPosition=function(t,r){r===void 0&&(r=0),this.modifiedEditor.revealPosition(t,r)},e.prototype.revealPositionInCenter=function(t,r){r===void 0&&(r=0),this.modifiedEditor.revealPositionInCenter(t,r)},e.prototype.revealPositionInCenterIfOutsideViewport=function(t,r){r===void 0&&(r=0),this.modifiedEditor.revealPositionInCenterIfOutsideViewport(t,r)},e.prototype.getSelection=function(){return this.modifiedEditor.getSelection()},e.prototype.getSelections=function(){return this.modifiedEditor.getSelections()},e.prototype.setSelection=function(t){this.modifiedEditor.setSelection(t)},e.prototype.setSelections=function(t){this.modifiedEditor.setSelections(t)},e.prototype.revealLines=function(t,r,i){i===void 0&&(i=0),this.modifiedEditor.revealLines(t,r,i)},e.prototype.revealLinesInCenter=function(t,r,i){i===void 0&&(i=0),this.modifiedEditor.revealLinesInCenter(t,r,i)},e.prototype.revealLinesInCenterIfOutsideViewport=function(t,r,i){i===void 0&&(i=0),this.modifiedEditor.revealLinesInCenterIfOutsideViewport(t,r,i)},e.prototype.revealRange=function(t,r,i,o){r===void 0&&(r=0),i===void 0&&(i=!1),o===void 0&&(o=!0),this.modifiedEditor.revealRange(t,r,i,o)},e.prototype.revealRangeInCenter=function(t,r){r===void 0&&(r=0),this.modifiedEditor.revealRangeInCenter(t,r)},e.prototype.revealRangeInCenterIfOutsideViewport=function(t,r){r===void 0&&(r=0),this.modifiedEditor.revealRangeInCenterIfOutsideViewport(t,r)},e.prototype.revealRangeAtTop=function(t,r){r===void 0&&(r=0),this.modifiedEditor.revealRangeAtTop(t,r)},e.prototype.getSupportedActions=function(){return this.modifiedEditor.getSupportedActions()},e.prototype.saveViewState=function(){var t=this.originalEditor.saveViewState(),r=this.modifiedEditor.saveViewState();return{original:t,modified:r}},e.prototype.restoreViewState=function(t){if(t.original&&t.modified){var r=t;this.originalEditor.restoreViewState(r.original),this.modifiedEditor.restoreViewState(r.modified)}},e.prototype.layout=function(t){this._measureDomElement(!1,t)},e.prototype.focus=function(){this.modifiedEditor.focus()},e.prototype.hasTextFocus=function(){return this.originalEditor.hasTextFocus()||this.modifiedEditor.hasTextFocus()},e.prototype.trigger=function(t,r,i){this.modifiedEditor.trigger(t,r,i)},e.prototype.changeDecorations=function(t){return this.modifiedEditor.changeDecorations(t)},e.prototype._measureDomElement=function(t,r){if(r=r||{width:this._containerDomElement.clientWidth,height:this._containerDomElement.clientHeight},r.width<=0){this._width=0,this._height=0,this._reviewHeight=0;return}!t&&r.width===this._width&&r.height===this._height||(this._width=r.width,this._height=r.height,this._reviewHeight=this._reviewPane.isVisible()?this._height:0,this._doLayout())},e.prototype._layoutOverviewRulers=function(){if(!(!this._originalOverviewRuler||!this._modifiedOverviewRuler)){var t=e.ENTIRE_DIFF_OVERVIEW_WIDTH-2*e.ONE_OVERVIEW_WIDTH,r=this.modifiedEditor.getLayoutInfo();r&&(this._originalOverviewRuler.setLayout({top:0,width:e.ONE_OVERVIEW_WIDTH,right:t+e.ONE_OVERVIEW_WIDTH,height:this._height-this._reviewHeight}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:e.ONE_OVERVIEW_WIDTH,height:this._height-this._reviewHeight}))}},e.prototype._onViewZonesChanged=function(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()},e.prototype._beginUpdateDecorationsSoon=function(){var t=this;this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(function(){return t._beginUpdateDecorations()},e.UPDATE_DIFF_DECORATIONS_DELAY)},e._equals=function(t,r){return!t&&!r?!0:!t||!r?!1:t.toString()===r.toString()},e.prototype._beginUpdateDecorations=function(){var t=this;this._beginUpdateDecorationsTimeout=-1;var r=this.originalEditor.getModel(),i=this.modifiedEditor.getModel();if(!(!r||!i)){this._diffComputationToken++;var o=this._diffComputationToken;if(!this._editorWorkerService.canComputeDiff(r.uri,i.uri)){(!e._equals(r.uri,this._lastOriginalWarning)||!e._equals(i.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=r.uri,this._lastModifiedWarning=i.uri,this._notificationService.warn(S("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._editorWorkerService.computeDiff(r.uri,i.uri,this._ignoreTrimWhitespace).then(function(s){o===t._diffComputationToken&&r===t.originalEditor.getModel()&&i===t.modifiedEditor.getModel()&&(t._diffComputationResult=s,t._updateDecorationsRunner.schedule(),t._onDidUpdateDiff.fire())},function(s){o===t._diffComputationToken&&r===t.originalEditor.getModel()&&i===t.modifiedEditor.getModel()&&(t._diffComputationResult=null,t._updateDecorationsRunner.schedule())})}},e.prototype._cleanViewZonesAndDecorations=function(){this._originalEditorState.clean(this.originalEditor),this._modifiedEditorState.clean(this.modifiedEditor)},e.prototype._updateDecorations=function(){if(!(!this.originalEditor.getModel()||!this.modifiedEditor.getModel()||!this._originalOverviewRuler||!this._modifiedOverviewRuler)){var t=this._diffComputationResult?this._diffComputationResult.changes:[],r=this._originalEditorState.getForeignViewZones(this.originalEditor.getWhitespaces()),i=this._modifiedEditorState.getForeignViewZones(this.modifiedEditor.getWhitespaces()),o=this._strategy.getEditorsDiffDecorations(t,this._ignoreTrimWhitespace,this._renderIndicators,r,i,this.originalEditor,this.modifiedEditor);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this.originalEditor,this._originalOverviewRuler,o.original,!1),this._modifiedEditorState.apply(this.modifiedEditor,this._modifiedOverviewRuler,o.modified,!0)}finally{this._currentlyChangingViewZones=!1}}},e.prototype._adjustOptionsForSubEditor=function(t){var r=tl(t||{});return r.inDiffEditor=!0,r.wordWrap="off",r.wordWrapMinified=!1,r.automaticLayout=!1,r.scrollbar=r.scrollbar||{},r.scrollbar.vertical="visible",r.folding=!1,r.codeLens=!1,r.fixedOverflowWidgets=!0,r.minimap||(r.minimap={}),r.minimap.enabled=!1,r},e.prototype._adjustOptionsForLeftHandSide=function(t,r){var i=this._adjustOptionsForSubEditor(t);return i.readOnly=!r,i.overviewRulerLanes=1,i.extraEditorClassName="original-in-monaco-diff-editor",i},e.prototype._adjustOptionsForRightHandSide=function(t){var r=this._adjustOptionsForSubEditor(t);return r.revealHorizontalRightPadding=Tu.viewInfo.revealHorizontalRightPadding+e.ENTIRE_DIFF_OVERVIEW_WIDTH,r.scrollbar.verticalHasArrows=!1,r.extraEditorClassName="modified-in-monaco-diff-editor",r},e.prototype.doLayout=function(){this._measureDomElement(!0)},e.prototype._doLayout=function(){var t=this._strategy.layout();this._originalDomNode.style.width=t+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=this._width-t+"px",this._modifiedDomNode.style.left=t+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=this._height-this._reviewHeight+"px",this._overviewDomElement.style.width=e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=this._width-e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(e.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this.originalEditor.layout({width:t,height:this._height-this._reviewHeight}),this.modifiedEditor.layout({width:this._width-t-e.ENTIRE_DIFF_OVERVIEW_WIDTH,height:this._height-this._reviewHeight}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(this._height-this._reviewHeight,this._width,this._reviewHeight),this._layoutOverviewViewport()},e.prototype._layoutOverviewViewport=function(){var t=this._computeOverviewViewport();t?(this._overviewViewportDomElement.setTop(t.top),this._overviewViewportDomElement.setHeight(t.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))},e.prototype._computeOverviewViewport=function(){var t=this.modifiedEditor.getLayoutInfo();if(!t)return null;var r=this.modifiedEditor.getScrollTop(),i=this.modifiedEditor.getScrollHeight(),o=Math.max(0,t.contentHeight),s=Math.max(0,o-2*0),a=i>0?s/i:0,u=Math.max(0,Math.floor(t.contentHeight*a)),l=Math.floor(r*a);return{height:u,top:l}},e.prototype._createDataSource=function(){var t=this;return{getWidth:function(){return t._width},getHeight:function(){return t._height-t._reviewHeight},getContainerDomNode:function(){return t._containerDomElement},relayoutEditors:function(){t._doLayout()},getOriginalEditor:function(){return t.originalEditor},getModifiedEditor:function(){return t.modifiedEditor}}},e.prototype._setStrategy=function(t){this._strategy&&this._strategy.dispose(),this._strategy=t,t.applyColors(this._themeService.getTheme()),this._diffComputationResult&&this._updateDecorations(),this._measureDomElement(!0)},e.prototype._getLineChangeAtOrBeforeLineNumber=function(t,r){var i=this._diffComputationResult?this._diffComputationResult.changes:[];if(i.length===0||t<r(i[0]))return null;for(var o=0,s=i.length-1;o<s;){var a=Math.floor((o+s)/2),u=r(i[a]),l=a+1<=s?r(i[a+1]):Number.MAX_VALUE;t<u?s=a-1:t>=l?o=a+1:(o=a,s=a)}return i[o]},e.prototype._getEquivalentLineForOriginalLineNumber=function(t){var r=this._getLineChangeAtOrBeforeLineNumber(t,function(l){return l.originalStartLineNumber});if(!r)return t;var i=r.originalStartLineNumber+(r.originalEndLineNumber>0?-1:0),o=r.modifiedStartLineNumber+(r.modifiedEndLineNumber>0?-1:0),s=r.originalEndLineNumber>0?r.originalEndLineNumber-r.originalStartLineNumber+1:0,a=r.modifiedEndLineNumber>0?r.modifiedEndLineNumber-r.modifiedStartLineNumber+1:0,u=t-i;return u<=s?o+Math.min(u,a):o+a-s+u},e.prototype._getEquivalentLineForModifiedLineNumber=function(t){var r=this._getLineChangeAtOrBeforeLineNumber(t,function(l){return l.modifiedStartLineNumber});if(!r)return t;var i=r.originalStartLineNumber+(r.originalEndLineNumber>0?-1:0),o=r.modifiedStartLineNumber+(r.modifiedEndLineNumber>0?-1:0),s=r.originalEndLineNumber>0?r.originalEndLineNumber-r.originalStartLineNumber+1:0,a=r.modifiedEndLineNumber>0?r.modifiedEndLineNumber-r.modifiedStartLineNumber+1:0,u=t-o;return u<=a?i+Math.min(u,s):i+s-a+u},e.prototype.getDiffLineInformationForOriginal=function(t){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(t)}:null},e.prototype.getDiffLineInformationForModified=function(t){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(t)}:null},e.ONE_OVERVIEW_WIDTH=15,e.ENTIRE_DIFF_OVERVIEW_WIDTH=30,e.UPDATE_DIFF_DECORATIONS_DELAY=200,e=YLe([sh(3,qs),sh(4,rt),sh(5,Hn),sh(6,an),sh(7,Ir),sh(8,Hr),sh(9,Wd)],e),e}(te),LZ=function(n){Uv(e,n);function e(t){var r=n.call(this)||this;return r._dataSource=t,r._insertColor=null,r._removeColor=null,r}return e.prototype.applyColors=function(t){var r=(t.getColor(YY)||JO).transparent(2),i=(t.getColor(ZY)||eR).transparent(2),o=!r.equals(this._insertColor)||!i.equals(this._removeColor);return this._insertColor=r,this._removeColor=i,o},e.prototype.getEditorsDiffDecorations=function(t,r,i,o,s,a,u){s=s.sort(function(d,g){return d.afterLineNumber-g.afterLineNumber}),o=o.sort(function(d,g){return d.afterLineNumber-g.afterLineNumber});var l=this._getViewZones(t,o,s,a,u,i),f=this._getOriginalEditorDecorations(t,r,i,a,u),h=this._getModifiedEditorDecorations(t,r,i,a,u);return{original:{decorations:f.decorations,overviewZones:f.overviewZones,zones:l.original},modified:{decorations:h.decorations,overviewZones:h.overviewZones,zones:l.modified}}},e}(te),jU=function(){function n(e){this._source=e,this._index=-1,this.current=null,this.advance()}return n.prototype.advance=function(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null},n}(),kZ=function(){function n(e,t,r){this.lineChanges=e,this.originalForeignVZ=t,this.modifiedForeignVZ=r}return n.prototype.getViewZones=function(){for(var e={original:[],modified:[]},t=0,r=0,i=0,o=0,s=0,a=0,u=function(L,F){return L.afterLineNumber-F.afterLineNumber},l=function(L,F){if(F.domNode===null&&L.length>0){var W=L[L.length-1];if(W.afterLineNumber===F.afterLineNumber&&W.domNode===null){W.heightInLines+=F.heightInLines;return}}L.push(F)},f=new jU(this.modifiedForeignVZ),h=new jU(this.originalForeignVZ),d=0,g=this.lineChanges.length;d<=g;d++){var v=d<g?this.lineChanges[d]:null;v!==null?(i=v.originalStartLineNumber+(v.originalEndLineNumber>0?-1:0),o=v.modifiedStartLineNumber+(v.modifiedEndLineNumber>0?-1:0),r=v.originalEndLineNumber>0?v.originalEndLineNumber-v.originalStartLineNumber+1:0,t=v.modifiedEndLineNumber>0?v.modifiedEndLineNumber-v.modifiedStartLineNumber+1:0,s=Math.max(v.originalStartLineNumber,v.originalEndLineNumber),a=Math.max(v.modifiedStartLineNumber,v.modifiedEndLineNumber)):(i+=1e7+r,o+=1e7+t,s=i,a=o);for(var m=[],y=[];f.current&&f.current.afterLineNumber<=a;){var b=void 0;f.current.afterLineNumber<=o?b=i-o+f.current.afterLineNumber:b=s;var C=null;v&&v.modifiedStartLineNumber<=f.current.afterLineNumber&&f.current.afterLineNumber<=v.modifiedEndLineNumber&&(C=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),m.push({afterLineNumber:b,heightInLines:f.current.heightInLines,domNode:null,marginDomNode:C}),f.advance()}for(;h.current&&h.current.afterLineNumber<=s;){var b=void 0;h.current.afterLineNumber<=i?b=o-i+h.current.afterLineNumber:b=a,y.push({afterLineNumber:b,heightInLines:h.current.heightInLines,domNode:null}),h.advance()}if(v!==null&&Eg(v)){var E=this._produceOriginalFromDiff(v,r,t);E&&m.push(E)}if(v!==null&&Ig(v)){var E=this._produceModifiedFromDiff(v,r,t);E&&y.push(E)}var D=0,k=0;for(m=m.sort(u),y=y.sort(u);D<m.length&&k<y.length;){var I=m[D],T=y[k],A=I.afterLineNumber-i,M=T.afterLineNumber-o;A<M?(l(e.original,I),D++):M<A?(l(e.modified,T),k++):I.shouldNotShrink?(l(e.original,I),D++):T.shouldNotShrink?(l(e.modified,T),k++):I.heightInLines>=T.heightInLines?(I.heightInLines-=T.heightInLines,k++):(T.heightInLines-=I.heightInLines,D++)}for(;D<m.length;)l(e.original,m[D]),D++;for(;k<y.length;)l(e.modified,y[k]),k++}return{original:n._ensureDomNodes(e.original),modified:n._ensureDomNodes(e.modified)}},n._ensureDomNodes=function(e){return e.map(function(t){return t.domNode||(t.domNode=JLe()),t})},n}();function el(n,e,t,r,i){return{range:new R(n,e,t,r),options:i}}var Ti={charDelete:tt.register({className:"char-delete"}),charDeleteWholeLine:tt.register({className:"char-delete",isWholeLine:!0}),charInsert:tt.register({className:"char-insert"}),charInsertWholeLine:tt.register({className:"char-insert",isWholeLine:!0}),lineInsert:tt.register({className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:tt.register({className:"line-insert",linesDecorationsClassName:"insert-sign",marginClassName:"line-insert",isWholeLine:!0}),lineDelete:tt.register({className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:tt.register({className:"line-delete",linesDecorationsClassName:"delete-sign",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:tt.register({marginClassName:"line-delete"})},zU=function(n){Uv(e,n);function e(t,r){var i=n.call(this,t)||this;return i._disableSash=r===!1,i._sashRatio=null,i._sashPosition=null,i._startSashPosition=null,i._sash=i._register(new II(i._dataSource.getContainerDomNode(),i)),i._disableSash&&(i._sash.state=0),i._sash.onDidStart(function(){return i.onSashDragStart()}),i._sash.onDidChange(function(o){return i.onSashDrag(o)}),i._sash.onDidEnd(function(){return i.onSashDragEnd()}),i._sash.onDidReset(function(){return i.onSashReset()}),i}return e.prototype.setEnableSplitViewResizing=function(t){var r=t===!1;this._disableSash!==r&&(this._disableSash=r,this._sash.state=this._disableSash?0:3)},e.prototype.layout=function(t){t===void 0&&(t=this._sashRatio);var r=this._dataSource.getWidth(),i=r-uR.ENTIRE_DIFF_OVERVIEW_WIDTH,o=Math.floor((t||.5)*i),s=Math.floor(.5*i);return o=this._disableSash?s:o||s,i>e.MINIMUM_EDITOR_WIDTH*2?(o<e.MINIMUM_EDITOR_WIDTH&&(o=e.MINIMUM_EDITOR_WIDTH),o>i-e.MINIMUM_EDITOR_WIDTH&&(o=i-e.MINIMUM_EDITOR_WIDTH)):o=s,this._sashPosition!==o&&(this._sashPosition=o,this._sash.layout()),this._sashPosition},e.prototype.onSashDragStart=function(){this._startSashPosition=this._sashPosition},e.prototype.onSashDrag=function(t){var r=this._dataSource.getWidth(),i=r-uR.ENTIRE_DIFF_OVERVIEW_WIDTH,o=this.layout((this._startSashPosition+(t.currentX-t.startX))/i);this._sashRatio=o/i,this._dataSource.relayoutEditors()},e.prototype.onSashDragEnd=function(){this._sash.layout()},e.prototype.onSashReset=function(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()},e.prototype.getVerticalSashTop=function(t){return 0},e.prototype.getVerticalSashLeft=function(t){return this._sashPosition},e.prototype.getVerticalSashHeight=function(t){return this._dataSource.getHeight()},e.prototype._getViewZones=function(t,r,i,o,s){var a=new XLe(t,r,i);return a.getViewZones()},e.prototype._getOriginalEditorDecorations=function(t,r,i,o,s){for(var a=String(this._removeColor),u={decorations:[],overviewZones:[]},l=o.getModel(),f=0,h=t.length;f<h;f++){var d=t[f];if(Ig(d)&&(u.decorations.push({range:new R(d.originalStartLineNumber,1,d.originalEndLineNumber,Number.MAX_VALUE),options:i?Ti.lineDeleteWithSign:Ti.lineDelete}),(!Eg(d)||!d.charChanges)&&u.decorations.push(el(d.originalStartLineNumber,1,d.originalEndLineNumber,Number.MAX_VALUE,Ti.charDeleteWholeLine)),u.overviewZones.push(new $y(d.originalStartLineNumber,d.originalEndLineNumber,a)),d.charChanges))for(var g=0,v=d.charChanges.length;g<v;g++){var m=d.charChanges[g];if(Ig(m))if(r)for(var y=m.originalStartLineNumber;y<=m.originalEndLineNumber;y++){var b=void 0,C=void 0;y===m.originalStartLineNumber?b=m.originalStartColumn:b=l.getLineFirstNonWhitespaceColumn(y),y===m.originalEndLineNumber?C=m.originalEndColumn:C=l.getLineLastNonWhitespaceColumn(y),u.decorations.push(el(y,b,y,C,Ti.charDelete))}else u.decorations.push(el(m.originalStartLineNumber,m.originalStartColumn,m.originalEndLineNumber,m.originalEndColumn,Ti.charDelete))}}return u},e.prototype._getModifiedEditorDecorations=function(t,r,i,o,s){for(var a=String(this._insertColor),u={decorations:[],overviewZones:[]},l=s.getModel(),f=0,h=t.length;f<h;f++){var d=t[f];if(Eg(d)&&(u.decorations.push({range:new R(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,Number.MAX_VALUE),options:i?Ti.lineInsertWithSign:Ti.lineInsert}),(!Ig(d)||!d.charChanges)&&u.decorations.push(el(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,Number.MAX_VALUE,Ti.charInsertWholeLine)),u.overviewZones.push(new $y(d.modifiedStartLineNumber,d.modifiedEndLineNumber,a)),d.charChanges))for(var g=0,v=d.charChanges.length;g<v;g++){var m=d.charChanges[g];if(Eg(m))if(r)for(var y=m.modifiedStartLineNumber;y<=m.modifiedEndLineNumber;y++){var b=void 0,C=void 0;y===m.modifiedStartLineNumber?b=m.modifiedStartColumn:b=l.getLineFirstNonWhitespaceColumn(y),y===m.modifiedEndLineNumber?C=m.modifiedEndColumn:C=l.getLineLastNonWhitespaceColumn(y),u.decorations.push(el(y,b,y,C,Ti.charInsert))}else u.decorations.push(el(m.modifiedStartLineNumber,m.modifiedStartColumn,m.modifiedEndLineNumber,m.modifiedEndColumn,Ti.charInsert))}}return u},e.MINIMUM_EDITOR_WIDTH=100,e}(LZ),XLe=function(n){Uv(e,n);function e(t,r,i){return n.call(this,t,r,i)||this}return e.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion=function(){return null},e.prototype._produceOriginalFromDiff=function(t,r,i){return i>r?{afterLineNumber:Math.max(t.originalStartLineNumber,t.originalEndLineNumber),heightInLines:i-r,domNode:null}:null},e.prototype._produceModifiedFromDiff=function(t,r,i){return r>i?{afterLineNumber:Math.max(t.modifiedStartLineNumber,t.modifiedEndLineNumber),heightInLines:r-i,domNode:null}:null},e}(kZ),qU=function(n){Uv(e,n);function e(t,r){var i=n.call(this,t)||this;return i.decorationsLeft=t.getOriginalEditor().getLayoutInfo().decorationsLeft,i._register(t.getOriginalEditor().onDidLayoutChange(function(o){i.decorationsLeft!==o.decorationsLeft&&(i.decorationsLeft=o.decorationsLeft,t.relayoutEditors())})),i}return e.prototype.setEnableSplitViewResizing=function(t){},e.prototype._getViewZones=function(t,r,i,o,s,a){var u=new QLe(t,r,i,o,s,a);return u.getViewZones()},e.prototype._getOriginalEditorDecorations=function(t,r,i,o,s){for(var a=String(this._removeColor),u={decorations:[],overviewZones:[]},l=0,f=t.length;l<f;l++){var h=t[l];Ig(h)&&(u.decorations.push({range:new R(h.originalStartLineNumber,1,h.originalEndLineNumber,Number.MAX_VALUE),options:Ti.lineDeleteMargin}),u.overviewZones.push(new $y(h.originalStartLineNumber,h.originalEndLineNumber,a)))}return u},e.prototype._getModifiedEditorDecorations=function(t,r,i,o,s){for(var a=String(this._insertColor),u={decorations:[],overviewZones:[]},l=s.getModel(),f=0,h=t.length;f<h;f++){var d=t[f];if(Eg(d))if(u.decorations.push({range:new R(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,Number.MAX_VALUE),options:i?Ti.lineInsertWithSign:Ti.lineInsert}),u.overviewZones.push(new $y(d.modifiedStartLineNumber,d.modifiedEndLineNumber,a)),d.charChanges)for(var g=0,v=d.charChanges.length;g<v;g++){var m=d.charChanges[g];if(Eg(m))if(r)for(var y=m.modifiedStartLineNumber;y<=m.modifiedEndLineNumber;y++){var b=void 0,C=void 0;y===m.modifiedStartLineNumber?b=m.modifiedStartColumn:b=l.getLineFirstNonWhitespaceColumn(y),y===m.modifiedEndLineNumber?C=m.modifiedEndColumn:C=l.getLineLastNonWhitespaceColumn(y),u.decorations.push(el(y,b,y,C,Ti.charInsert))}else u.decorations.push(el(m.modifiedStartLineNumber,m.modifiedStartColumn,m.modifiedEndLineNumber,m.modifiedEndColumn,Ti.charInsert))}else u.decorations.push(el(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,Number.MAX_VALUE,Ti.charInsertWholeLine))}return u},e.prototype.layout=function(){return Math.max(5,this.decorationsLeft)},e}(LZ),QLe=function(n){Uv(e,n);function e(t,r,i,o,s,a){var u=n.call(this,t,r,i)||this;return u.originalModel=o.getModel(),u.modifiedEditorConfiguration=s.getConfiguration(),u.modifiedEditorTabSize=s.getModel().getOptions().tabSize,u.renderIndicators=a,u}return e.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion=function(){var t=document.createElement("div");return t.className="inline-added-margin-view-zone",t},e.prototype._produceOriginalFromDiff=function(t,r,i){var o=document.createElement("div");return o.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(t.originalStartLineNumber,t.originalEndLineNumber),heightInLines:i,domNode:document.createElement("div"),marginDomNode:o}},e.prototype._produceModifiedFromDiff=function(t,r,i){var o=[];if(t.charChanges)for(var s=0,a=t.charChanges.length;s<a;s++){var u=t.charChanges[s];Ig(u)&&o.push(new QC(new R(u.originalStartLineNumber,u.originalStartColumn,u.originalEndLineNumber,u.originalEndColumn),"char-delete",0))}for(var l=Hy(1e4),f=[],h=this.modifiedEditorConfiguration.layoutInfo.decorationsWidth,d=this.modifiedEditorConfiguration.lineHeight,g=this.modifiedEditorConfiguration.fontInfo.typicalHalfwidthCharacterWidth,v=0,m=[],y=t.originalStartLineNumber;y<=t.originalEndLineNumber;y++)if(v=Math.max(v,this._renderOriginalLine(y-t.originalStartLineNumber,this.originalModel,this.modifiedEditorConfiguration,this.modifiedEditorTabSize,y,o,l)),m.push(this.originalModel.getLineContent(y)),this.renderIndicators){var b=y-t.originalStartLineNumber;f=f.concat(['<div class="delete-sign" style="position:absolute;top:'+b*d+"px;width:"+h+"px;height:"+d+'px;right:0;"></div>'])}v+=this.modifiedEditorConfiguration.viewInfo.scrollBeyondLastColumn;var C=document.createElement("div");C.className="view-lines line-delete",C.innerHTML=l.build(),_s.applyFontInfoSlow(C,this.modifiedEditorConfiguration.fontInfo);var E=document.createElement("div");return E.className="inline-deleted-margin-view-zone",E.innerHTML=f.join(""),_s.applyFontInfoSlow(E,this.modifiedEditorConfiguration.fontInfo),{shouldNotShrink:!0,afterLineNumber:t.modifiedEndLineNumber===0?t.modifiedStartLineNumber:t.modifiedStartLineNumber-1,heightInLines:r,minWidthInPx:v*g,domNode:C,marginDomNode:E,diff:{originalStartLineNumber:t.originalStartLineNumber,originalEndLineNumber:t.originalEndLineNumber,modifiedStartLineNumber:t.modifiedStartLineNumber,modifiedEndLineNumber:t.modifiedEndLineNumber,originalContent:m}}},e.prototype._renderOriginalLine=function(t,r,i,o,s,a,u){var l=r.getLineTokens(s),f=l.getLineContent(),h=Uy.filter(a,s,1,f.length+1);u.appendASCIIString('<div class="view-line'),a.length===0&&u.appendASCIIString(" char-delete"),u.appendASCIIString('" style="top:'),u.appendASCIIString(String(t*i.lineHeight)),u.appendASCIIString('px;width:1000000px;">');var d=ka.isBasicASCII(f,r.mightContainNonBasicASCII()),g=ka.containsRTL(f,d,r.mightContainRTL()),v=DF(new Pv(i.fontInfo.isMonospace&&!i.viewInfo.disableMonospaceOptimizations,i.fontInfo.canUseHalfwidthRightwardsArrow,f,!1,d,g,0,l,h,o,i.fontInfo.spaceWidth,i.viewInfo.stopRenderingLineAfter,i.viewInfo.renderWhitespace,i.viewInfo.renderControlCharacters,i.viewInfo.fontLigatures,null),u);u.appendASCIIString("</div>");var m=v.characterMapping.getAbsoluteOffsets();return m.length>0?m[m.length-1]:0},e}(kZ);function Eg(n){return n.modifiedEndLineNumber>0}function Ig(n){return n.originalEndLineNumber>0}function JLe(){var n=document.createElement("div");return n.className="diagonal-fill",n}Xt(function(n,e){var t=n.getColor(YY);t&&(e.addRule(".monaco-editor .line-insert, .monaco-editor .char-insert { background-color: "+t+"; }"),e.addRule(".monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: "+t+"; }"),e.addRule(".monaco-editor .inline-added-margin-view-zone { background-color: "+t+"; }"));var r=n.getColor(ZY);r&&(e.addRule(".monaco-editor .line-delete, .monaco-editor .char-delete { background-color: "+r+"; }"),e.addRule(".monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: "+r+"; }"),e.addRule(".monaco-editor .inline-deleted-margin-view-zone { background-color: "+r+"; }"));var i=n.getColor(MIe);i&&e.addRule(".monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px "+(n.type==="hc"?"dashed":"solid")+" "+i+"; }");var o=n.getColor(PIe);o&&e.addRule(".monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px "+(n.type==="hc"?"dashed":"solid")+" "+o+"; }");var s=n.getColor(bI);s&&e.addRule(".monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px "+s+"; }");var a=n.getColor(FIe);a&&e.addRule(".monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid "+a+"; }")});var Vd=xt("themeService"),er=xt("keybindingService"),LI=xt("clipboardService"),d2=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),p2=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cn=function(n,e){return function(t,r){e(t,r,n)}},eke=0,$U=!1;function tke(){$U||($U=!0,sSe(document.body))}var TZ=function(n){d2(e,n);function e(t,r,i,o,s,a,u,l,f,h){var d=this;return r=r||{},r.ariaLabel=r.ariaLabel||q_.editorViewAccessibleLabel,r.ariaLabel=r.ariaLabel+";"+(Ro?q_.accessibilityHelpMessageIE:q_.accessibilityHelpMessage),d=n.call(this,t,r,{},i,o,s,a,l,f,h)||this,u instanceof oY?d._standaloneKeybindingService=u:d._standaloneKeybindingService=null,tke(),d}return e.prototype.addCommand=function(t,r,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;var o="DYNAMIC_"+ ++eke,s=_e.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(o,t,r,s),o},e.prototype.createContextKey=function(t,r){return this._contextKeyService.createKey(t,r)},e.prototype.addAction=function(t){var r=this;if(typeof t.id!="string"||typeof t.label!="string"||typeof t.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),te.None;var i=t.id,o=t.label,s=_e.and(_e.equals("editorId",this.getId()),_e.deserialize(t.precondition)),a=t.keybindings,u=_e.and(s,_e.deserialize(t.keybindingContext)),l=t.contextMenuGroupId||null,f=t.contextMenuOrder||0,h=function(){return Promise.resolve(t.run(r))},d=new De,g=this.getId()+":"+i;if(d.add(oi.registerCommand(g,h)),l){var v={command:{id:g,title:o},when:s,group:l,order:f};d.add(Ta.appendMenuItem(7,v))}if(Array.isArray(a))for(var m=0,y=a;m<y.length;m++){var b=y[m];d.add(this._standaloneKeybindingService.addDynamicKeybinding(g,b,h,u))}var C=new yZ(g,o,o,s,h,this._contextKeyService);return this._actions[i]=C,d.add(en(function(){delete r._actions[i]})),d},e=p2([cn(2,Hn),cn(3,an),cn(4,bi),cn(5,rt),cn(6,er),cn(7,Ir),cn(8,Hr),cn(9,Au)],e),e}(s2),nke=function(n){d2(e,n);function e(t,r,i,o,s,a,u,l,f,h,d,g,v){var m=this;sS(g,r,!1),r=r||{},typeof r.theme=="string"&&h.setTheme(r.theme);var y=r.model;delete r.model,m=n.call(this,t,r,o,s,a,u,l,h,d,v)||this,m._contextViewService=f,m._configurationService=g,m._register(i);var b;if(typeof y>"u"?(b=self.monaco.editor.createModel(r.value||"",r.language||"text/plain"),m._ownsModel=!0):(b=y,m._ownsModel=!1),m._attachModel(b),b){var C={oldModelUrl:null,newModelUrl:b.uri};m._onDidChangeModel.fire(C)}return m}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype.updateOptions=function(t){sS(this._configurationService,t,!1),n.prototype.updateOptions.call(this,t)},e.prototype._attachModel=function(t){n.prototype._attachModel.call(this,t),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)},e.prototype._postDetachModelCleanup=function(t){n.prototype._postDetachModelCleanup.call(this,t),t&&this._ownsModel&&(t.dispose(),this._ownsModel=!1)},e=p2([cn(3,Hn),cn(4,an),cn(5,bi),cn(6,rt),cn(7,er),cn(8,vf),cn(9,Vd),cn(10,Hr),cn(11,Vr),cn(12,Au)],e),e}(TZ),rke=function(n){d2(e,n);function e(t,r,i,o,s,a,u,l,f,h,d,g,v,m){var y=this;return sS(g,r,!0),r=r||{},typeof r.theme=="string"&&(r.theme=h.setTheme(r.theme)),y=n.call(this,t,r,m,l,s,o,f,h,d,v)||this,y._contextViewService=u,y._configurationService=g,y._register(i),y._contextViewService.setContainer(y._containerDomElement),y}return e.prototype.dispose=function(){n.prototype.dispose.call(this)},e.prototype.updateOptions=function(t){sS(this._configurationService,t,!0),n.prototype.updateOptions.call(this,t)},e.prototype._createInnerEditor=function(t,r,i){return t.createInstance(TZ,r,i)},e.prototype.getOriginalEditor=function(){return n.prototype.getOriginalEditor.call(this)},e.prototype.getModifiedEditor=function(){return n.prototype.getModifiedEditor.call(this)},e.prototype.addCommand=function(t,r,i){return this.getModifiedEditor().addCommand(t,r,i)},e.prototype.createContextKey=function(t,r){return this.getModifiedEditor().createContextKey(t,r)},e.prototype.addAction=function(t){return this.getModifiedEditor().addAction(t)},e=p2([cn(3,Hn),cn(4,rt),cn(5,er),cn(6,vf),cn(7,qs),cn(8,an),cn(9,Vd),cn(10,Hr),cn(11,Vr),cn(12,Wd),cn(13,$h(LI))],e),e}(uR),g2=xt("IWorkspaceEditService"),mf=xt("modeService"),ike=function(){function n(e){this._languageIdentifier=e}return n.prototype.getId=function(){return this._languageIdentifier.language},n}(),UT="text/plain",KU="application/unknown",yS=[],NZ=[],AZ=[];function hC(n,e){e===void 0&&(e=!1);var t=oke(n);yS.push(t),t.userConfigured?AZ.push(t):NZ.push(t),e&&!t.userConfigured&&yS.forEach(function(r){r.mime===t.mime||r.userConfigured||(t.extension&&r.extension===t.extension&&console.warn("Overwriting extension <<"+t.extension+">> to now point to mime <<"+t.mime+">>"),t.filename&&r.filename===t.filename&&console.warn("Overwriting filename <<"+t.filename+">> to now point to mime <<"+t.mime+">>"),t.filepattern&&r.filepattern===t.filepattern&&console.warn("Overwriting filepattern <<"+t.filepattern+">> to now point to mime <<"+t.mime+">>"),t.firstline&&r.firstline===t.firstline&&console.warn("Overwriting firstline <<"+t.firstline+">> to now point to mime <<"+t.mime+">>"))})}function oke(n){return{id:n.id,mime:n.mime,filename:n.filename,extension:n.extension,filepattern:n.filepattern,firstline:n.firstline,userConfigured:n.userConfigured,filenameLowercase:n.filename?n.filename.toLowerCase():void 0,extensionLowercase:n.extension?n.extension.toLowerCase():void 0,filepatternLowercase:n.filepattern?n.filepattern.toLowerCase():void 0,filepatternOnPath:n.filepattern?n.filepattern.indexOf(Qn.sep)>=0:!1}}function ske(n,e){var t;if(n)switch(n.scheme){case rn.file:t=n.fsPath;break;case rn.data:var r=tf.parseMetaData(n);t=r.get(tf.META_DATA_LABEL);break;default:t=n.path}if(!t)return[KU];t=t.toLowerCase();var i=dd(t),o=GU(t,i,AZ);if(o)return[o,UT];var s=GU(t,i,NZ);if(s)return[s,UT];if(e){var a=ake(e);if(a)return[a,UT]}return[KU]}function GU(n,e,t){for(var r=null,i=null,o=null,s=t.length-1;s>=0;s--){var a=t[s];if(e===a.filenameLowercase){r=a;break}if(a.filepattern&&(!i||a.filepattern.length>i.filepattern.length)){var u=a.filepatternOnPath?n:e;MG(a.filepatternLowercase,u)&&(i=a)}a.extension&&(!o||a.extension.length>o.extension.length)&&Cl(e,a.extensionLowercase)&&(o=a)}return r?r.mime:i?i.mime:o?o.mime:null}function ake(n){if(cF(n)&&(n=n.substr(1)),n.length>0)for(var e=yS.length-1;e>=0;e--){var t=yS[e];if(t.firstline){var r=n.match(t.firstline);if(r&&r.length>0)return t.mime}}return null}var uke={ModesRegistry:"editor.modesRegistry"},lke=function(){function n(){this._onDidChangeLanguages=new j,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}return n.prototype.registerLanguage=function(e){this._languages.push(e),this._onDidChangeLanguages.fire(void 0)},n.prototype.getLanguages=function(){return[].concat(this._languages).concat(this._dynamicLanguages)},n}(),nd=new lke;qi.add(uke.ModesRegistry,nd);var v2="plaintext",OZ=new yF(v2,1);nd.registerLanguage({id:v2,extensions:[".txt",".gitignore"],aliases:[S("plainText.alias","Plain Text"),"text"],mimetypes:["text/plain"]});gt.register(OZ,{brackets:[["(",")"],["[","]"],["{","}"]]});var cke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ah=Object.prototype.hasOwnProperty,fke=function(n){cke(e,n);function e(t,r){t===void 0&&(t=!0),r===void 0&&(r=!1);var i=n.call(this)||this;return i._onDidChange=i._register(new j),i.onDidChange=i._onDidChange.event,i._warnOnOverwrite=r,i._nextLanguageId2=1,i._languageIdToLanguage=[],i._languageToLanguageId=Object.create(null),i._languages={},i._mimeTypesMap={},i._nameMap={},i._lowercaseNameMap={},t&&(i._initializeFromRegistry(),i._register(nd.onDidChangeLanguages(function(o){return i._initializeFromRegistry()}))),i}return e.prototype._initializeFromRegistry=function(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={};var t=nd.getLanguages();this._registerLanguages(t)},e.prototype._registerLanguages=function(t){for(var r=this,i=0,o=t;i<o.length;i++){var s=o[i];this._registerLanguage(s)}this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(function(a){var u=r._languages[a];u.name&&(r._nameMap[u.name]=u.identifier),u.aliases.forEach(function(l){r._lowercaseNameMap[l.toLowerCase()]=u.identifier}),u.mimetypes.forEach(function(l){r._mimeTypesMap[l]=u.identifier})}),qi.as(Fv.Configuration).registerOverrideIdentifiers(nd.getLanguages().map(function(a){return a.id})),this._onDidChange.fire()},e.prototype._getLanguageId=function(t){if(this._languageToLanguageId[t])return this._languageToLanguageId[t];var r=this._nextLanguageId2++;return this._languageIdToLanguage[r]=t,this._languageToLanguageId[t]=r,r},e.prototype._registerLanguage=function(t){var r=t.id,i;if(ah.call(this._languages,r))i=this._languages[r];else{var o=this._getLanguageId(r);i={identifier:new yF(r,o),name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[r]=i}this._mergeLanguage(i,t)},e.prototype._mergeLanguage=function(t,r){var i,o=r.id,s=null;if(Array.isArray(r.mimetypes)&&r.mimetypes.length>0&&((i=t.mimetypes).push.apply(i,r.mimetypes),s=r.mimetypes[0]),s||(s="text/x-"+o,t.mimetypes.push(s)),Array.isArray(r.extensions))for(var a=0,u=r.extensions;a<u.length;a++){var l=u[a];hC({id:o,mime:s,extension:l},this._warnOnOverwrite),t.extensions.push(l)}if(Array.isArray(r.filenames))for(var f=0,h=r.filenames;f<h.length;f++){var d=h[f];hC({id:o,mime:s,filename:d},this._warnOnOverwrite),t.filenames.push(d)}if(Array.isArray(r.filenamePatterns))for(var g=0,v=r.filenamePatterns;g<v.length;g++){var m=v[g];hC({id:o,mime:s,filepattern:m},this._warnOnOverwrite)}if(typeof r.firstLine=="string"&&r.firstLine.length>0){var y=r.firstLine;y.charAt(0)!=="^"&&(y="^"+y);try{var b=new RegExp(y);Ibe(b)||hC({id:o,mime:s,firstline:b},this._warnOnOverwrite)}catch(A){Le(A)}}t.aliases.push(o);var C=null;if(typeof r.aliases<"u"&&Array.isArray(r.aliases)&&(r.aliases.length===0?C=[null]:C=r.aliases),C!==null)for(var E=0,D=C;E<D.length;E++){var k=D[E];!k||k.length===0||t.aliases.push(k)}var I=C!==null&&C.length>0;if(!(I&&C[0]===null)){var T=(I?C[0]:null)||o;(I||!t.name)&&(t.name=T)}r.configuration&&t.configurationFiles.push(r.configuration)},e.prototype.isRegisteredMode=function(t){return ah.call(this._mimeTypesMap,t)?!0:ah.call(this._languages,t)},e.prototype.getModeIdForLanguageNameLowercase=function(t){return ah.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t].language:null},e.prototype.extractModeIds=function(t){var r=this;return t?t.split(",").map(function(i){return i.trim()}).map(function(i){return ah.call(r._mimeTypesMap,i)?r._mimeTypesMap[i].language:i}).filter(function(i){return ah.call(r._languages,i)}):[]},e.prototype.getLanguageIdentifier=function(t){if(t===wF||t===0)return iS;var r;if(typeof t=="string")r=t;else if(r=this._languageIdToLanguage[t],!r)return null;return ah.call(this._languages,r)?this._languages[r].identifier:null},e.prototype.getModeIdsFromFilepathOrFirstLine=function(t,r){if(!t&&!r)return[];var i=ske(t,r);return this.extractModeIds(i.join(","))},e}(te),hke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YU=function(n){hke(e,n);function e(t,r){var i=n.call(this)||this;return i._onDidChange=i._register(new j),i.onDidChange=i._onDidChange.event,i._selector=r,i.languageIdentifier=i._selector(),i._register(t(function(){return i._evaluate()})),i}return e.prototype._evaluate=function(){var t=this._selector();t.id!==this.languageIdentifier.id&&(this.languageIdentifier=t,this._onDidChange.fire(this.languageIdentifier))},e}(te),dke=function(){function n(e){var t=this;e===void 0&&(e=!1),this._onDidCreateMode=new j,this.onDidCreateMode=this._onDidCreateMode.event,this._onLanguagesMaybeChanged=new j,this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,this._instantiatedModes={},this._registry=new fke(!0,e),this._registry.onDidChange(function(){return t._onLanguagesMaybeChanged.fire()})}return n.prototype.isRegisteredMode=function(e){return this._registry.isRegisteredMode(e)},n.prototype.getModeIdForLanguageName=function(e){return this._registry.getModeIdForLanguageNameLowercase(e)},n.prototype.getModeIdByFilepathOrFirstLine=function(e,t){var r=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return r.length>0?r[0]:null},n.prototype.getModeId=function(e){var t=this._registry.extractModeIds(e);return t.length>0?t[0]:null},n.prototype.getLanguageIdentifier=function(e){return this._registry.getLanguageIdentifier(e)},n.prototype.create=function(e){var t=this;return new YU(this.onLanguagesMaybeChanged,function(){var r=t.getModeId(e);return t._createModeAndGetLanguageIdentifier(r)})},n.prototype.createByFilepathOrFirstLine=function(e,t){var r=this;return new YU(this.onLanguagesMaybeChanged,function(){var i=r.getModeIdByFilepathOrFirstLine(e,t);return r._createModeAndGetLanguageIdentifier(i)})},n.prototype._createModeAndGetLanguageIdentifier=function(e){var t=this.getLanguageIdentifier(e||"plaintext")||iS;return this._getOrCreateMode(t.language),t},n.prototype.triggerMode=function(e){var t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")},n.prototype._getOrCreateMode=function(e){if(!this._instantiatedModes.hasOwnProperty(e)){var t=this.getLanguageIdentifier(e)||iS;this._instantiatedModes[e]=new ike(t),this._onDidCreateMode.fire(this._instantiatedModes[e])}return this._instantiatedModes[e]},n}(),pke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gke=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ZU=function(n,e){return function(t,r){e(t,r,n)}};function dC(n){return n.toString()}var vke=function(){function n(e,t,r){this._modelEventListeners=new De,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(function(){return t(e)})),this._modelEventListeners.add(e.onDidChangeLanguage(function(i){return r(e,i)}))}return n.prototype._disposeLanguageSelection=function(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null),this._languageSelection&&(this._languageSelection.dispose(),this._languageSelection=null)},n.prototype.dispose=function(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()},n.prototype.setLanguage=function(e){var t=this;this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(function(){return t.model.setMode(e.languageIdentifier)}),this.model.setMode(e.languageIdentifier)},n}(),mke=Rl||ct?1:2,_ke=function(n){pke(e,n);function e(t,r){var i=n.call(this)||this;return i._onModelAdded=i._register(new j),i.onModelAdded=i._onModelAdded.event,i._onModelRemoved=i._register(new j),i.onModelRemoved=i._onModelRemoved.event,i._onModelModeChanged=i._register(new j),i.onModelModeChanged=i._onModelModeChanged.event,i._configurationService=t,i._resourcePropertiesService=r,i._models={},i._modelCreationOptionsByLanguageAndResource=Object.create(null),i._configurationServiceSubscription=i._configurationService.onDidChangeConfiguration(function(o){return i._updateModelOptions()}),i._updateModelOptions(),i}return e._readModelOptions=function(t,r){var i=pa.tabSize;if(t.editor&&typeof t.editor.tabSize<"u"){var o=parseInt(t.editor.tabSize,10);isNaN(o)||(i=o),i<1&&(i=1)}var s=i;if(t.editor&&typeof t.editor.indentSize<"u"&&t.editor.indentSize!=="tabSize"){var a=parseInt(t.editor.indentSize,10);isNaN(a)||(s=a),s<1&&(s=1)}var u=pa.insertSpaces;t.editor&&typeof t.editor.insertSpaces<"u"&&(u=t.editor.insertSpaces==="false"?!1:!!t.editor.insertSpaces);var l=mke,f=t.eol;f===`\r
`?l=2:f===`
`&&(l=1);var h=pa.trimAutoWhitespace;t.editor&&typeof t.editor.trimAutoWhitespace<"u"&&(h=t.editor.trimAutoWhitespace==="false"?!1:!!t.editor.trimAutoWhitespace);var d=pa.detectIndentation;t.editor&&typeof t.editor.detectIndentation<"u"&&(d=t.editor.detectIndentation==="false"?!1:!!t.editor.detectIndentation);var g=pa.largeFileOptimizations;return t.editor&&typeof t.editor.largeFileOptimizations<"u"&&(g=t.editor.largeFileOptimizations==="false"?!1:!!t.editor.largeFileOptimizations),{isForSimpleWidget:r,tabSize:i,indentSize:s,insertSpaces:u,detectIndentation:d,defaultEOL:l,trimAutoWhitespace:h,largeFileOptimizations:g}},e.prototype.getCreationOptions=function(t,r,i){var o=this._modelCreationOptionsByLanguageAndResource[t+r];if(!o){var s=this._configurationService.getValue("editor",{overrideIdentifier:t,resource:r}),a=this._resourcePropertiesService.getEOL(r,t);o=e._readModelOptions({editor:s,eol:a},i),this._modelCreationOptionsByLanguageAndResource[t+r]=o}return o},e.prototype._updateModelOptions=function(){var t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);for(var r=Object.keys(this._models),i=0,o=r.length;i<o;i++){var s=r[i],a=this._models[s],u=a.model.getLanguageIdentifier().language,l=a.model.uri,f=t[u+l],h=this.getCreationOptions(u,l,a.model.isForSimpleWidget);e._setModelOptionsForModel(a.model,h,f)}},e._setModelOptionsForModel=function(t,r,i){i&&i.detectIndentation===r.detectIndentation&&i.insertSpaces===r.insertSpaces&&i.tabSize===r.tabSize&&i.indentSize===r.indentSize&&i.trimAutoWhitespace===r.trimAutoWhitespace||(r.detectIndentation?(t.detectIndentation(r.insertSpaces,r.tabSize),t.updateOptions({trimAutoWhitespace:r.trimAutoWhitespace})):t.updateOptions({insertSpaces:r.insertSpaces,tabSize:r.tabSize,indentSize:r.indentSize,trimAutoWhitespace:r.trimAutoWhitespace}))},e.prototype.dispose=function(){this._configurationServiceSubscription.dispose(),n.prototype.dispose.call(this)},e.prototype._createModelData=function(t,r,i,o){var s=this,a=this.getCreationOptions(r.language,i,o),u=new Vv(t,a,r,i),l=dC(u.uri);if(this._models[l])throw new Error("ModelService: Cannot add model because it already exists!");var f=new vke(u,function(h){return s._onWillDispose(h)},function(h,d){return s._onDidChangeLanguage(h,d)});return this._models[l]=f,f},e.prototype.createModel=function(t,r,i,o){o===void 0&&(o=!1);var s;return r?(s=this._createModelData(t,r.languageIdentifier,i,o),this.setMode(s.model,r)):s=this._createModelData(t,OZ,i,o),this._onModelAdded.fire(s.model),s.model},e.prototype.setMode=function(t,r){if(r){var i=this._models[dC(t.uri)];i&&i.setLanguage(r)}},e.prototype.getModels=function(){for(var t=[],r=Object.keys(this._models),i=0,o=r.length;i<o;i++){var s=r[i];t.push(this._models[s].model)}return t},e.prototype.getModel=function(t){var r=dC(t),i=this._models[r];return i?i.model:null},e.prototype._onWillDispose=function(t){var r=dC(t.uri),i=this._models[r];delete this._models[r],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[t.getLanguageIdentifier().language+t.uri],this._onModelRemoved.fire(t)},e.prototype._onDidChangeLanguage=function(t,r){var i=r.oldLanguage,o=t.getLanguageIdentifier().language,s=this.getCreationOptions(i,t.uri,t.isForSimpleWidget),a=this.getCreationOptions(o,t.uri,t.isForSimpleWidget);e._setModelOptionsForModel(t,a,s),this._onModelModeChanged.fire({model:t,oldModeId:i})},e=gke([ZU(0,Vr),ZU(1,UG)],e),e}(te),yke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bke=function(n){yke(e,n);function e(){var t=n.call(this)||this;return t._onCodeEditorAdd=t._register(new j),t.onCodeEditorAdd=t._onCodeEditorAdd.event,t._onCodeEditorRemove=t._register(new j),t.onCodeEditorRemove=t._onCodeEditorRemove.event,t._onDiffEditorAdd=t._register(new j),t._onDiffEditorRemove=t._register(new j),t._codeEditors=Object.create(null),t._diffEditors=Object.create(null),t}return e.prototype.addCodeEditor=function(t){this._codeEditors[t.getId()]=t,this._onCodeEditorAdd.fire(t)},e.prototype.removeCodeEditor=function(t){delete this._codeEditors[t.getId()]&&this._onCodeEditorRemove.fire(t)},e.prototype.listCodeEditors=function(){var t=this;return Object.keys(this._codeEditors).map(function(r){return t._codeEditors[r]})},e.prototype.addDiffEditor=function(t){this._diffEditors[t.getId()]=t,this._onDiffEditorAdd.fire(t)},e.prototype.removeDiffEditor=function(t){delete this._diffEditors[t.getId()]&&this._onDiffEditorRemove.fire(t)},e.prototype.listDiffEditors=function(){var t=this;return Object.keys(this._diffEditors).map(function(r){return t._diffEditors[r]})},e.prototype.getFocusedCodeEditor=function(){for(var t=null,r=this.listCodeEditors(),i=0,o=r;i<o.length;i++){var s=o[i];if(s.hasTextFocus())return s;s.hasWidgetFocus()&&(t=s)}return t},e}(te),wke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cke=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ske=function(n,e){return function(t,r){e(t,r,n)}},Eke=function(n){wke(e,n);function e(t,r){r===void 0&&(r=pf());var i=n.call(this)||this;return i._decorationOptionProviders=new Map,i._styleSheet=r,i._themeService=t,i}return e.prototype.registerDecorationType=function(t,r,i){var o=this._decorationOptionProviders.get(t);if(!o){var s={styleSheet:this._styleSheet,key:t,parentTypeKey:i,options:r||Object.create(null)};i?o=new Ike(this._themeService,s):o=new xke(this._themeService,s),this._decorationOptionProviders.set(t,o)}o.refCount++},e.prototype.removeDecorationType=function(t){var r=this._decorationOptionProviders.get(t);r&&(r.refCount--,r.refCount<=0&&(this._decorationOptionProviders.delete(t),r.dispose(),this.listCodeEditors().forEach(function(i){return i.removeDecorations(t)})))},e.prototype.resolveDecorationOptions=function(t,r){var i=this._decorationOptionProviders.get(t);if(!i)throw new Error("Unknown decoration type key: "+t);return i.getOptions(this,r)},e=Cke([Ske(0,Ir)],e),e}(bke),Ike=function(){function n(e,t){this._parentTypeKey=t.parentTypeKey,this.refCount=0,this._beforeContentRules=new bS(3,t,e),this._afterContentRules=new bS(4,t,e)}return n.prototype.getOptions=function(e,t){var r=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(r.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(r.afterContentClassName=this._afterContentRules.className),r},n.prototype.dispose=function(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null)},n}(),xke=function(){function n(e,t){var r=this;this._disposables=new De,this.refCount=0;var i=function(f){var h=new bS(f,t,e);if(r._disposables.add(h),h.hasContent)return h.className},o=function(f){var h=new bS(f,t,e);return r._disposables.add(h),h.hasContent?{className:h.className,hasLetterSpacing:h.hasLetterSpacing}:null};this.className=i(0);var s=o(1);s&&(this.inlineClassName=s.className,this.inlineClassNameAffectsLetterSpacing=s.hasLetterSpacing),this.beforeContentClassName=i(3),this.afterContentClassName=i(4),this.glyphMarginClassName=i(2);var a=t.options;this.isWholeLine=!!a.isWholeLine,this.stickiness=a.rangeBehavior;var u=a.light&&a.light.overviewRulerColor||a.overviewRulerColor,l=a.dark&&a.dark.overviewRulerColor||a.overviewRulerColor;(typeof u<"u"||typeof l<"u")&&(this.overviewRuler={color:u||l,darkColor:l||u,position:a.overviewRulerLane||hs.Center})}return n.prototype.getOptions=function(e,t){return t?{inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness}:this},n.prototype.dispose=function(){this._disposables.dispose()},n}(),o_={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",width:"width:{0};",height:"height:{0};"},bS=function(){function n(e,t,r){var i=this;this._theme=r.getTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;var o=jT.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(o=o+" "+jT.getClassName(this._providerArgs.parentTypeKey,e)),this._className=o,this._unThemedSelector=jT.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=r.onThemeChange(function(s){i._theme=r.getTheme(),i._removeCSS(),i._buildCSS()}):this._themeListener=null}return n.prototype.dispose=function(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)},Object.defineProperty(n.prototype,"hasContent",{get:function(){return this._hasContent},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasLetterSpacing",{get:function(){return this._hasLetterSpacing},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),n.prototype._buildCSS=function(){var e=this._providerArgs.options,t,r,i;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),r=this.getCSSTextForModelDecorationClassName(e.light),i=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),r=this.getCSSTextForModelDecorationInlineClassName(e.light),i=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),r=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),i=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),r=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),i=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),r=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),i=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;default:throw new Error("Unknown rule type: "+this._ruleType)}var o=this._providerArgs.styleSheet.sheet,s=!1;t.length>0&&(o.insertRule(this._unThemedSelector+" {"+t+"}",0),s=!0),r.length>0&&(o.insertRule(".vs"+this._unThemedSelector+" {"+r+"}",0),s=!0),i.length>0&&(o.insertRule(".vs-dark"+this._unThemedSelector+", .hc-black"+this._unThemedSelector+" {"+i+"}",0),s=!0),this._hasContent=s},n.prototype._removeCSS=function(){NO(this._unThemedSelector,this._providerArgs.styleSheet)},n.prototype.getCSSTextForModelDecorationClassName=function(e){if(!e)return"";var t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")},n.prototype.getCSSTextForModelDecorationInlineClassName=function(e){if(!e)return"";var t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")},n.prototype.getCSSTextForModelDecorationContentClassName=function(e){if(!e)return"";var t=[];if(typeof e<"u"){if(this.collectBorderSettingsCSSText(e,t),typeof e.contentIconPath<"u"&&t.push(Nt(o_.contentIconPath,s8(bt.revive(e.contentIconPath)))),typeof e.contentText=="string"){var r=e.contentText.match(/^.*$/m)[0],i=r.replace(/['\\]/g,"\\$&");t.push(Nt(o_.contentText,i))}this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","color","opacity","backgroundColor","margin"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")},n.prototype.getCSSTextForModelDecorationGlyphMarginClassName=function(e){if(!e)return"";var t=[];return typeof e.gutterIconPath<"u"&&(t.push(Nt(o_.gutterIconPath,s8(bt.revive(e.gutterIconPath)))),typeof e.gutterIconSize<"u"&&t.push(Nt(o_.gutterIconSize,e.gutterIconSize))),t.join("")},n.prototype.collectBorderSettingsCSSText=function(e,t){return this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)?(t.push(Nt("box-sizing: border-box;")),!0):!1},n.prototype.collectCSSText=function(e,t,r){for(var i=r.length,o=0,s=t;o<s.length;o++){var a=s[o],u=this.resolveValue(e[a]);typeof u=="string"&&r.push(Nt(o_[a],u))}return r.length!==i},n.prototype.resolveValue=function(e){if(dwe(e)){this._usesThemeColors=!0;var t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e},n}(),jT=function(){function n(){}return n.getClassName=function(e,t){return"ced-"+e+"-"+t},n.getSelector=function(e,t,r){var i=".monaco-editor ."+this.getClassName(e,r);return t&&(i=i+"."+this.getClassName(t,r)),r===3?i+="::before":r===4&&(i+="::after"),i},n}(),Dke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lke=function(n){Dke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getActiveCodeEditor=function(){return null},e.prototype.openCodeEditor=function(t,r,i){return r?Promise.resolve(this.doOpenEditor(r,t)):Promise.resolve(null)},e.prototype.doOpenEditor=function(t,r){var i=this.findModel(t,r.resource);if(!i){if(r.resource){var o=r.resource.scheme;if(o===rn.http||o===rn.https)return mG(r.resource.toString()),t}return null}var s=r.options?r.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")t.setSelection(s),t.revealRangeInCenter(s,1);else{var a={lineNumber:s.startLineNumber,column:s.startColumn};t.setPosition(a),t.revealPositionInCenter(a,1)}return t},e.prototype.findModel=function(t,r){var i=t.getModel();return i&&i.uri.toString()!==r.toString()?null:i},e}(Eke),kke=function(){function n(e,t,r,i,o){this.token=e,this.index=t,this.fontStyle=r,this.foreground=i,this.background=o}return n}();function Tke(n){if(!n||!Array.isArray(n))return[];for(var e=[],t=0,r=0,i=n.length;r<i;r++){var o=n[r],s=-1;if(typeof o.fontStyle=="string"){s=0;for(var a=o.fontStyle.split(" "),u=0,l=a.length;u<l;u++){var f=a[u];switch(f){case"italic":s=s|1;break;case"bold":s=s|2;break;case"underline":s=s|4;break}}}var h=null;typeof o.foreground=="string"&&(h=o.foreground);var d=null;typeof o.background=="string"&&(d=o.background),e[t++]=new kke(o.token||"",r,s,h,d)}return e}function Nke(n,e){n.sort(function(b,C){var E=Pke(b.token,C.token);return E!==0?E:b.index-C.index});for(var t=0,r="000000",i="ffffff";n.length>=1&&n[0].token==="";){var o=n.shift();o.fontStyle!==-1&&(t=o.fontStyle),o.foreground!==null&&(r=o.foreground),o.background!==null&&(i=o.background)}for(var s=new Oke,a=0,u=e;a<u.length;a++){var l=u[a];s.getId(l)}for(var f=s.getId(r),h=s.getId(i),d=new Fke(t,f,h),g=new Bke(d),v=0,m=n.length;v<m;v++){var y=n[v];g.insert(y.token,y.fontStyle,s.getId(y.foreground),s.getId(y.background))}return new RZ(s,g)}var Ake=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/,Oke=function(){function n(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}return n.prototype.getId=function(e){if(e===null)return 0;var t=e.match(Ake);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();var r=this._color2id.get(e);return r||(r=++this._lastColorId,this._color2id.set(e,r),this._id2color[r]=Z.fromHex("#"+e),r)},n.prototype.getColorMap=function(){return this._id2color.slice(0)},n}(),RZ=function(){function n(e,t){this._colorMap=e,this._root=t,this._cache=new Map}return n.createFromRawTokenTheme=function(e,t){return this.createFromParsedTokenTheme(Tke(e),t)},n.createFromParsedTokenTheme=function(e,t){return Nke(e,t)},n.prototype.getColorMap=function(){return this._colorMap.getColorMap()},n.prototype._match=function(e){return this._root.match(e)},n.prototype.match=function(e,t){var r=this._cache.get(t);if(typeof r>"u"){var i=this._match(t),o=Mke(t);r=(i.metadata|o<<8)>>>0,this._cache.set(t,r)}return(r|e<<0)>>>0},n}(),Rke=/\b(comment|string|regex|regexp)\b/;function Mke(n){var e=n.match(Rke);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function Pke(n,e){return n<e?-1:n>e?1:0}var Fke=function(){function n(e,t,r){this._fontStyle=e,this._foreground=t,this._background=r,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}return n.prototype.clone=function(){return new n(this._fontStyle,this._foreground,this._background)},n.prototype.acceptOverwrite=function(e,t,r){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),r!==0&&(this._background=r),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0},n}(),Bke=function(){function n(e){this._mainRule=e,this._children=new Map}return n.prototype.match=function(e){if(e==="")return this._mainRule;var t=e.indexOf("."),r,i;t===-1?(r=e,i=""):(r=e.substring(0,t),i=e.substring(t+1));var o=this._children.get(r);return typeof o<"u"?o.match(i):this._mainRule},n.prototype.insert=function(e,t,r,i){if(e===""){this._mainRule.acceptOverwrite(t,r,i);return}var o=e.indexOf("."),s,a;o===-1?(s=e,a=""):(s=e.substring(0,o),a=e.substring(o+1));var u=this._children.get(s);typeof u>"u"&&(u=new n(this._mainRule.clone()),this._children.set(s,u)),u.insert(a,t,r,i)},n}();function Wke(n){for(var e=[],t=1,r=n.length;t<r;t++){var i=n[t];e[t]=".mtk"+t+" { color: "+i+"; }"}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}var Ql,Jl,Bp,Vke={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"09885A"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"09885A"},{token:"attribute.value.unit",foreground:"09885A"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"FF00FF"}],colors:(Ql={},Ql[cu]="#FFFFFE",Ql[jc]="#000000",Ql[YF]="#E5EBF1",Ql[wI]="#D3D3D3",Ql[CI]="#939393",Ql[ZF]="#ADD6FF4D",Ql)},Hke={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:(Jl={},Jl[cu]="#1E1E1E",Jl[jc]="#D4D4D4",Jl[YF]="#3A3D41",Jl[wI]="#404040",Jl[CI]="#707070",Jl[ZF]="#ADD6FF26",Jl)},Uke={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:(Bp={},Bp[cu]="#000000",Bp[jc]="#FFFFFF",Bp[wI]="#FFFFFF",Bp[CI]="#FFFFFF",Bp)},Mh="vs",wS="vs-dark",Ky="hc-black",jke=qi.as(AY.ColorContribution),zke=qi.as(mY.ThemingContribution),MZ=function(){function n(e,t){this.themeData=t;var r=t.base;e.length>0?(this.id=r+" "+e,this.themeName=e):(this.id=r,this.themeName=r),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}return Object.defineProperty(n.prototype,"base",{get:function(){return this.themeData.base},enumerable:!0,configurable:!0}),n.prototype.notifyBaseUpdated=function(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)},n.prototype.getColors=function(){if(!this.colors){var e=new Map;for(var t in this.themeData.colors)e.set(t,Z.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){var r=lR(this.themeData.base);for(var t in r.colors)e.has(t)||e.set(t,Z.fromHex(r.colors[t]))}this.colors=e}return this.colors},n.prototype.getColor=function(e,t){var r=this.getColors().get(e);if(r)return r;if(t!==!1)return this.getDefault(e)},n.prototype.getDefault=function(e){var t=this.defaultColors[e];return t||(t=jke.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)},n.prototype.defines=function(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)},Object.defineProperty(n.prototype,"type",{get:function(){switch(this.base){case Mh:return"light";case Ky:return"hc";default:return"dark"}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tokenTheme",{get:function(){if(!this._tokenTheme){var e=[],t=[];if(this.themeData.inherit){var r=lR(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=RZ.createFromRawTokenTheme(e,t)}return this._tokenTheme},enumerable:!0,configurable:!0}),n}();function zT(n){return n===Mh||n===wS||n===Ky}function lR(n){switch(n){case Mh:return Vke;case wS:return Hke;case Ky:return Uke}}function qT(n){var e=lR(n);return new MZ(n,e)}var qke=function(){function n(){this.environment=Object.create(null),this._onThemeChange=new j,this._onIconThemeChange=new j,this._knownThemes=new Map,this._knownThemes.set(Mh,qT(Mh)),this._knownThemes.set(wS,qT(wS)),this._knownThemes.set(Ky,qT(Ky)),this._styleElement=pf(),this._styleElement.className="monaco-colors",this.setTheme(Mh)}return Object.defineProperty(n.prototype,"onThemeChange",{get:function(){return this._onThemeChange.event},enumerable:!0,configurable:!0}),n.prototype.defineTheme=function(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!zT(t.base)&&!zT(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new MZ(e,t)),zT(e)&&this._knownThemes.forEach(function(r){r.base===e&&r.notifyBaseUpdated()}),this._theme&&this._theme.themeName===e&&this.setTheme(e)},n.prototype.getTheme=function(){return this._theme},n.prototype.setTheme=function(e){var t=this,r;if(this._knownThemes.has(e)?r=this._knownThemes.get(e):r=this._knownThemes.get(Mh),this._theme===r)return r.id;this._theme=r;var i=[],o={},s={addRule:function(l){o[l]||(i.push(l),o[l]=!0)}};zke.getThemingParticipants().forEach(function(l){return l(r,s,t.environment)});var a=r.tokenTheme,u=a.getColorMap();return s.addRule(Wke(u)),this._styleElement.innerHTML=i.join(`
`),mn.setColorMap(u),this._onThemeChange.fire(r),r.id},n.prototype.getIconTheme=function(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}},n}(),kI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$ke=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Kke=function(n,e){return function(t,r){e(t,r,n)}},CS="data-keybinding-context",m2=function(){function n(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}return n.prototype.setValue=function(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1},n.prototype.removeValue=function(e){return e in this._value?(delete this._value[e],!0):!1},n.prototype.getValue=function(e){var t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t},n}(),SS=function(n){kI(e,n);function e(){return n.call(this,-1,null)||this}return e.prototype.setValue=function(t,r){return!1},e.prototype.removeValue=function(t){return!1},e.prototype.getValue=function(t){},e.INSTANCE=new e,e}(m2),Gke=function(n){kI(e,n);function e(t,r,i){var o=n.call(this,t,null)||this;return o._configurationService=r,o._values=new Map,o._listener=o._configurationService.onDidChangeConfiguration(function(s){if(s.source===6){var a=Ry(o._values);o._values.clear(),i.fire(new QU(a))}else{for(var u=[],l=0,f=s.affectedKeys;l<f.length;l++){var h=f[l],d="config."+h;o._values.has(d)&&(o._values.delete(d),u.push(d))}i.fire(new QU(u))}}),o}return e.prototype.dispose=function(){this._listener.dispose()},e.prototype.getValue=function(t){if(t.indexOf(e._keyPrefix)!==0)return n.prototype.getValue.call(this,t);if(this._values.has(t))return this._values.get(t);var r=t.substr(e._keyPrefix.length),i=this._configurationService.getValue(r),o=void 0;switch(typeof i){case"number":case"boolean":case"string":o=i;break}return this._values.set(t,o),o},e.prototype.setValue=function(t,r){return n.prototype.setValue.call(this,t,r)},e.prototype.removeValue=function(t){return n.prototype.removeValue.call(this,t)},e._keyPrefix="config.",e}(m2),Yke=function(){function n(e,t,r){this._service=e,this._key=t,this._defaultValue=r,this.reset()}return n.prototype.set=function(e){this._service.setContext(this._key,e)},n.prototype.reset=function(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)},n.prototype.get=function(){return this._service.getContextKeyValue(this._key)},n}(),XU=function(){function n(e){this.key=e}return n.prototype.affectsSome=function(e){return e.has(this.key)},n}(),QU=function(){function n(e){this.keys=e}return n.prototype.affectsSome=function(e){for(var t=0,r=this.keys;t<r.length;t++){var i=r[t];if(e.has(i))return!0}return!1},n}(),Zke=function(){function n(e){this.events=e}return n.prototype.affectsSome=function(e){for(var t=0,r=this.events;t<r.length;t++){var i=r[t];if(i.affectsSome(e))return!0}return!1},n}(),PZ=function(){function n(e){this._onDidChangeContext=new x0e({merge:function(t){return new Zke(t)}}),this._isDisposed=!1,this._myContextId=e}return n.prototype.createKey=function(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Yke(this,e,t)},Object.defineProperty(n.prototype,"onDidChangeContext",{get:function(){return this._onDidChangeContext.event},enumerable:!0,configurable:!0}),n.prototype.bufferChangeEvents=function(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}},n.prototype.createScoped=function(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Qke(this,e)},n.prototype.contextMatchesRules=function(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");var t=this.getContextValuesContainer(this._myContextId),r=eY.contextMatchesRules(t,e);return r},n.prototype.getContextKeyValue=function(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)},n.prototype.setContext=function(e,t){if(!this._isDisposed){var r=this.getContextValuesContainer(this._myContextId);r&&r.setValue(e,t)&&this._onDidChangeContext.fire(new XU(e))}},n.prototype.removeContext=function(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new XU(e))},n.prototype.getContext=function(e){return this._isDisposed?SS.INSTANCE:this.getContextValuesContainer(Jke(e))},n}(),Xke=function(n){kI(e,n);function e(t){var r=n.call(this,0)||this;r._contexts=new Map,r._toDispose=new De,r._lastContextId=0;var i=new Gke(r._myContextId,t,r._onDidChangeContext);return r._contexts.set(r._myContextId,i),r._toDispose.add(i),r}return e.prototype.dispose=function(){this._isDisposed=!0,this._toDispose.dispose()},e.prototype.getContextValuesContainer=function(t){return this._isDisposed?SS.INSTANCE:this._contexts.get(t)||SS.INSTANCE},e.prototype.createChildContext=function(t){if(t===void 0&&(t=this._myContextId),this._isDisposed)throw new Error("ContextKeyService has been disposed");var r=++this._lastContextId;return this._contexts.set(r,new m2(r,this.getContextValuesContainer(t))),r},e.prototype.disposeContext=function(t){this._isDisposed||this._contexts.delete(t)},e=$ke([Kke(0,Vr)],e),e}(PZ),Qke=function(n){kI(e,n);function e(t,r){var i=n.call(this,t.createChildContext())||this;return i._parent=t,r&&(i._domNode=r,i._domNode.setAttribute(CS,String(i._myContextId))),i}return e.prototype.dispose=function(){this._isDisposed=!0,this._parent.disposeContext(this._myContextId),this._domNode&&(this._domNode.removeAttribute(CS),this._domNode=void 0)},Object.defineProperty(e.prototype,"onDidChangeContext",{get:function(){return We.any(this._parent.onDidChangeContext,this._onDidChangeContext.event)},enumerable:!0,configurable:!0}),e.prototype.getContextValuesContainer=function(t){return this._isDisposed?SS.INSTANCE:this._parent.getContextValuesContainer(t)},e.prototype.createChildContext=function(t){if(t===void 0&&(t=this._myContextId),this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(t)},e.prototype.disposeContext=function(t){this._isDisposed||this._parent.disposeContext(t)},e}(PZ);function Jke(n){for(;n;){if(n.hasAttribute(CS)){var e=n.getAttribute(CS);return e?parseInt(e,10):NaN}n=n.parentElement}return 0}oi.registerCommand(A1e,function(n,e,t){n.get(rt).createKey(String(e),t)});var tb=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cR=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,$T=/(&amp;)?(&amp;)([^\s&])/g,eTe=function(n){tb(e,n);function e(t,r,i){var o=n.call(this,i||"submenu",t,"",!0)||this;return o.entries=r,o}return e}(ds),FZ=function(n){tb(e,n);function e(t,r,i){i===void 0&&(i={});var o=this;de(t,"monaco-menu-container"),t.setAttribute("role","presentation");var s=document.createElement("div");de(s,"monaco-menu"),s.setAttribute("role","presentation"),o=n.call(this,s,{orientation:2,actionViewItemProvider:function(l){return o.doGetActionViewItem(l,i,a)},context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,triggerKeys:{keys:[3].concat(ct?[10]:[]),keyDown:!0}})||this,o.menuElement=s,o._onScroll=o._register(new j),o.actionsList.setAttribute("role","menu"),o.actionsList.tabIndex=0,o.menuDisposables=o._register(new De),ie(s,Ye.KEY_DOWN,function(l){var f=new Sn(l);f.equals(2)&&l.preventDefault()}),i.enableMnemonics&&o.menuDisposables.add(ie(s,Ye.KEY_DOWN,function(l){var f=l.key.toLocaleLowerCase();if(o.mnemonics.has(f)){nn.stop(l,!0);var h=o.mnemonics.get(f);if(h.length===1&&(h[0]instanceof JU&&o.focusItemByElement(h[0].container),h[0].onClick(l)),h.length>1){var d=h.shift();d&&(o.focusItemByElement(d.container),h.push(d)),o.mnemonics.set(f,h)}}})),Rl&&o._register(ie(s,Ye.KEY_DOWN,function(l){var f=new Sn(l);f.equals(14)||f.equals(11)?(o.focusedItem=o.viewItems.length-1,o.focusNext(),nn.stop(l,!0)):(f.equals(13)||f.equals(12))&&(o.focusedItem=0,o.focusPrevious(),nn.stop(l,!0))})),o._register(ie(o.domNode,Ye.MOUSE_OUT,function(l){var f=l.relatedTarget;wu(f,o.domNode)||(o.focusedItem=void 0,o.scrollTopHold=o.menuElement.scrollTop,o.updateFocus(),l.stopPropagation())})),o._register(ie(o.domNode,Ye.MOUSE_UP,function(l){nn.stop(l,!0)})),o._register(ie(o.actionsList,Ye.MOUSE_OVER,function(l){var f=l.target;if(!(!f||!wu(f,o.actionsList)||f===o.actionsList)){for(;f.parentElement!==o.actionsList&&f.parentElement!==null;)f=f.parentElement;if(La(f,"action-item")){var h=o.focusedItem;o.scrollTopHold=o.menuElement.scrollTop,o.setFocusedItem(f),h!==o.focusedItem&&o.updateFocus()}}}));var a={parent:o};o.mnemonics=new Map,o.push(r,{icon:!0,label:!0,isMenu:!0}),o.scrollableElement=o._register(new Z0(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));var u=o.scrollableElement.getDomNode();return u.style.position=null,s.style.maxHeight=Math.max(10,window.innerHeight-t.getBoundingClientRect().top-30)+"px",o.menuDisposables.add(o.scrollableElement.onScroll(function(){o._onScroll.fire()},o)),o._register(ie(o.menuElement,Ye.SCROLL,function(l){o.scrollTopHold!==void 0&&(o.menuElement.scrollTop=o.scrollTopHold,o.scrollTopHold=void 0),o.scrollableElement.scanDomNode()})),t.appendChild(o.scrollableElement.getDomNode()),o.scrollableElement.scanDomNode(),o.viewItems.filter(function(l){return!(l instanceof KT)}).forEach(function(l,f,h){l.updatePositionInSet(f+1,h.length)}),o}return e.prototype.style=function(t){var r=this.getContainer(),i=t.foregroundColor?""+t.foregroundColor:null,o=t.backgroundColor?""+t.backgroundColor:null,s=t.borderColor?"2px solid "+t.borderColor:null,a=t.shadowColor?"0 2px 4px "+t.shadowColor:null;r.style.border=s,this.domNode.style.color=i,this.domNode.style.backgroundColor=o,r.style.boxShadow=a,this.viewItems&&this.viewItems.forEach(function(u){(u instanceof fR||u instanceof KT)&&u.style(t)})},e.prototype.getContainer=function(){return this.scrollableElement.getDomNode()},Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollOffset",{get:function(){return this.menuElement.scrollTop},enumerable:!0,configurable:!0}),e.prototype.focusItemByElement=function(t){var r=this.focusedItem;this.setFocusedItem(t),r!==this.focusedItem&&this.updateFocus()},e.prototype.setFocusedItem=function(t){for(var r=0;r<this.actionsList.children.length;r++){var i=this.actionsList.children[r];if(t===i){this.focusedItem=r;break}}},e.prototype.doGetActionViewItem=function(t,r,i){if(t instanceof DI)return new KT(r.context,t,{icon:!0});if(t instanceof eTe){var o=new JU(t,t.entries,i,r);if(r.enableMnemonics){var s=o.getMnemonic();if(s&&o.isEnabled()){var a=[];this.mnemonics.has(s)&&(a=this.mnemonics.get(s)),a.push(o),this.mnemonics.set(s,a)}}return o}else{var u={enableMnemonics:r.enableMnemonics};if(r.getKeyBinding){var l=r.getKeyBinding(t);if(l){var f=l.getLabel();f&&(u.keybinding=f)}}var o=new fR(r.context,t,u);if(r.enableMnemonics){var s=o.getMnemonic();if(s&&o.isEnabled()){var a=[];this.mnemonics.has(s)&&(a=this.mnemonics.get(s)),a.push(o),this.mnemonics.set(s,a)}}return o}},e}(eb),fR=function(n){tb(e,n);function e(t,r,i){i===void 0&&(i={});var o=this;if(i.isMenu=!0,o=n.call(this,r,r,i)||this,o.options=i,o.options.icon=i.icon!==void 0?i.icon:!1,o.options.label=i.label!==void 0?i.label:!0,o.cssClass="",o.options.label&&i.enableMnemonics){var s=o.getAction().label;if(s){var a=cR.exec(s);a&&(o.mnemonic=(a[1]?a[1]:a[3]).toLocaleLowerCase())}}return o.runOnceToEnableMouseUp=new hr(function(){o.element&&o._register(ie(o.element,Ye.MOUSE_UP,function(u){nn.stop(u,!0),o.onClick(u)}))},50),o._register(o.runOnceToEnableMouseUp),o}return e.prototype.render=function(t){n.prototype.render.call(this,t),this.element&&(this.container=t,this.item=ce(this.element,ke("a.action-menu-item")),this._action.id===DI.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",""+this.mnemonic)),this.check=ce(this.item,ke("span.menu-item-check")),this.check.setAttribute("role","none"),this.label=ce(this.item,ke("span.action-label")),this.options.label&&this.options.keybinding&&(ce(this.item,ke("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())},e.prototype.blur=function(){n.prototype.blur.call(this),this.applyStyle()},e.prototype.focus=function(){n.prototype.focus.call(this),this.item.focus(),this.applyStyle()},e.prototype.updatePositionInSet=function(t,r){this.item.setAttribute("aria-posinset",""+t),this.item.setAttribute("aria-setsize",""+r)},e.prototype.updateLabel=function(){if(this.options.label){var t=this.getAction().label;if(t){var r=tTe(t);this.options.enableMnemonics||(t=r),this.label.setAttribute("aria-label",r.replace(/&&/g,"&"));var i=cR.exec(t);if(i){t=fs(t),$T.lastIndex=0;for(var o=$T.exec(t);o&&o[1];)o=$T.exec(t);o&&(t=t.substr(0,o.index)+'<u aria-hidden="true">'+o[3]+"</u>"+t.substr(o.index+o[0].length)),t=t.replace(/&amp;&amp;/g,"&amp;"),this.item.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else t=t.replace(/&&/g,"&")}this.label.innerHTML=t.trim()}},e.prototype.updateTooltip=function(){var t=null;this.getAction().tooltip?t=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(t=this.getAction().label,this.options.keybinding&&(t=S({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",t,this.options.keybinding))),t&&(this.item.title=t)},e.prototype.updateClass=function(){this.cssClass&&aI(this.item,this.cssClass),this.options.icon?(this.cssClass=this.getAction().class||"",de(this.label,"icon"),this.cssClass&&tF(this.label,this.cssClass),this.updateEnabled()):qe(this.label,"icon")},e.prototype.updateEnabled=function(){this.getAction().enabled?(this.element&&qe(this.element,"disabled"),qe(this.item,"disabled"),this.item.tabIndex=0):(this.element&&de(this.element,"disabled"),de(this.item,"disabled"),oF(this.item))},e.prototype.updateChecked=function(){this.getAction().checked?(de(this.item,"checked"),this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked","true")):(qe(this.item,"checked"),this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked","false"))},e.prototype.getMnemonic=function(){return this.mnemonic},e.prototype.applyStyle=function(){if(this.menuStyle){var t=this.element&&La(this.element,"focused"),r=t&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=t&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:this.menuStyle.backgroundColor,o=t&&this.menuStyle.selectionBorderColor?"thin solid "+this.menuStyle.selectionBorderColor:null;this.item.style.color=r?""+r:null,this.check.style.backgroundColor=r?""+r:null,this.item.style.backgroundColor=i?""+i:null,this.container.style.border=o}},e.prototype.style=function(t){this.menuStyle=t,this.applyStyle()},e}(f2),JU=function(n){tb(e,n);function e(t,r,i,o){var s=n.call(this,t,t,o)||this;return s.submenuActions=r,s.parentData=i,s.submenuOptions=o,s.submenuDisposables=s._register(new De),s.showScheduler=new hr(function(){s.mouseOver&&(s.cleanupExistingSubmenu(!1),s.createSubmenu(!1))},250),s.hideScheduler=new hr(function(){s.element&&!wu(document.activeElement,s.element)&&s.parentData.submenu===s.mysubmenu&&(s.parentData.parent.focus(!1),s.cleanupExistingSubmenu(!0))},750),s}return e.prototype.render=function(t){var r=this;n.prototype.render.call(this,t),this.element&&(de(this.item,"monaco-submenu-item"),this.item.setAttribute("aria-haspopup","true"),this.submenuIndicator=ce(this.item,ke("span.submenu-indicator")),this.submenuIndicator.setAttribute("aria-hidden","true"),this._register(ie(this.element,Ye.KEY_UP,function(i){var o=new Sn(i);(o.equals(17)||o.equals(3))&&(nn.stop(i,!0),r.createSubmenu(!0))})),this._register(ie(this.element,Ye.KEY_DOWN,function(i){var o=new Sn(i);document.activeElement===r.item&&(o.equals(17)||o.equals(3))&&nn.stop(i,!0)})),this._register(ie(this.element,Ye.MOUSE_OVER,function(i){r.mouseOver||(r.mouseOver=!0,r.showScheduler.schedule())})),this._register(ie(this.element,Ye.MOUSE_LEAVE,function(i){r.mouseOver=!1})),this._register(ie(this.element,Ye.FOCUS_OUT,function(i){r.element&&!wu(document.activeElement,r.element)&&r.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(function(){r.parentData.parent.focus(!1),r.cleanupExistingSubmenu(!1)})))},e.prototype.onClick=function(t){nn.stop(t,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!1)},e.prototype.cleanupExistingSubmenu=function(t){this.parentData.submenu&&(t||this.parentData.submenu!==this.mysubmenu)&&(this.parentData.submenu.dispose(),this.parentData.submenu=void 0,this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0))},e.prototype.createSubmenu=function(t){var r=this;if(t===void 0&&(t=!0),!!this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.submenuContainer=ce(this.element,ke("div.monaco-submenu")),tF(this.submenuContainer,"menubar-menu-items-holder","context-view"),this.parentData.submenu=new FZ(this.submenuContainer,this.submenuActions,this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);var i=this.element.getBoundingClientRect(),o=this.submenuContainer.getBoundingClientRect(),s=getComputedStyle(this.parentData.parent.domNode),a=parseFloat(s.paddingTop||"0")||0;window.innerWidth<=i.right+o.width?(this.submenuContainer.style.left="10px",this.submenuContainer.style.top=this.element.offsetTop-this.parentData.parent.scrollOffset+i.height+"px"):(this.submenuContainer.style.left=this.element.offsetWidth+"px",this.submenuContainer.style.top=this.element.offsetTop-this.parentData.parent.scrollOffset-a+"px"),this.submenuDisposables.add(ie(this.submenuContainer,Ye.KEY_UP,function(u){var l=new Sn(u);l.equals(15)&&(nn.stop(u,!0),r.parentData.parent.focus(),r.parentData.submenu&&(r.parentData.submenu.dispose(),r.parentData.submenu=void 0),r.submenuDisposables.clear(),r.submenuContainer=void 0)})),this.submenuDisposables.add(ie(this.submenuContainer,Ye.KEY_DOWN,function(u){var l=new Sn(u);l.equals(15)&&nn.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(function(){r.parentData.parent.focus(),r.parentData.submenu&&(r.parentData.submenu.dispose(),r.parentData.submenu=void 0),r.submenuDisposables.clear(),r.submenuContainer=void 0})),this.parentData.submenu.focus(t),this.mysubmenu=this.parentData.submenu}},e.prototype.applyStyle=function(){if(n.prototype.applyStyle.call(this),!!this.menuStyle){var t=this.element&&La(this.element,"focused"),r=t&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator.style.backgroundColor=r?""+r:null,this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}},e.prototype.dispose=function(){n.prototype.dispose.call(this),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)},e}(fR),KT=function(n){tb(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.style=function(t){this.label.style.borderBottomColor=t.separatorColor?""+t.separatorColor:null},e}(_S);function tTe(n){var e=cR,t=e.exec(n);if(!t)return n;var r=!t[1];return n.replace(e,r?"$2$3":"").trim()}var hR=function(){return hR=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},hR.apply(this,arguments)};function BZ(n,e){var t=Object.create(null);for(var r in e){var i=e[r];typeof i=="string"?t[r]=n.getColor(i):typeof i=="function"&&(t[r]=i(n))}return t}function TI(n,e,t){function r(i){var o=BZ(n.getTheme(),e);typeof t=="function"?t(o):t.style(o)}return r(n.getTheme()),n.onThemeChange(r)}function nTe(n,e,t){return TI(e,{badgeBackground:lIe,badgeForeground:cIe,badgeBorder:dr},n)}function rTe(n,e,t){return TI(e,{foreground:t&&t.foreground||dl,background:t&&t.background||cu,borderColor:t&&t.borderColor||dr,widgetShadow:t&&t.widgetShadow||Bd,progressBarBackground:t&&t.progressBarBackground||pIe,pickerGroupForeground:t&&t.pickerGroupForeground||aIe,pickerGroupBorder:t&&t.pickerGroupBorder||uIe,inputBackground:t&&t.inputBackground||HF,inputForeground:t&&t.inputForeground||UF,inputBorder:t&&t.inputBorder||jF,inputValidationInfoBorder:t&&t.inputValidationInfoBorder||$F,inputValidationInfoBackground:t&&t.inputValidationInfoBackground||zF,inputValidationInfoForeground:t&&t.inputValidationInfoForeground||qF,inputValidationWarningBorder:t&&t.inputValidationWarningBorder||MY,inputValidationWarningBackground:t&&t.inputValidationWarningBackground||OY,inputValidationWarningForeground:t&&t.inputValidationWarningForeground||RY,inputValidationErrorBorder:t&&t.inputValidationErrorBorder||BY,inputValidationErrorBackground:t&&t.inputValidationErrorBackground||PY,inputValidationErrorForeground:t&&t.inputValidationErrorForeground||FY,listFocusBackground:t&&t.listFocusBackground||Xh,listFocusForeground:t&&t.listFocusForeground||WY,listActiveSelectionBackground:t&&t.listActiveSelectionBackground||JF(Qh,.1),listActiveSelectionForeground:t&&t.listActiveSelectionForeground||Jh,listFocusAndSelectionBackground:t&&t.listFocusAndSelectionBackground||Qh,listFocusAndSelectionForeground:t&&t.listFocusAndSelectionForeground||Jh,listInactiveSelectionBackground:t&&t.listInactiveSelectionBackground||VY,listInactiveSelectionForeground:t&&t.listInactiveSelectionForeground||HY,listInactiveFocusBackground:t&&t.listInactiveFocusBackground||UY,listHoverBackground:t&&t.listHoverBackground||jY,listHoverForeground:t&&t.listHoverForeground||zY,listDropBackground:t&&t.listDropBackground||qY,listFocusOutline:t&&t.listFocusOutline||ti,listSelectionOutline:t&&t.listSelectionOutline||ti,listHoverOutline:t&&t.listHoverOutline||ti},n)}function WZ(n,e,t){return TI(e,_r(t||Object.create(null),VZ,!1),n)}var VZ={listFocusBackground:Xh,listFocusForeground:WY,listActiveSelectionBackground:JF(Qh,.1),listActiveSelectionForeground:Jh,listFocusAndSelectionBackground:Qh,listFocusAndSelectionForeground:Jh,listInactiveSelectionBackground:VY,listInactiveSelectionForeground:HY,listInactiveFocusBackground:UY,listHoverBackground:jY,listHoverForeground:zY,listDropBackground:qY,listFocusOutline:ti,listSelectionOutline:ti,listHoverOutline:ti,listFilterWidgetBackground:rIe,listFilterWidgetOutline:iIe,listFilterWidgetNoMatchesOutline:oIe,listMatchesShadow:Bd,treeIndentGuidesStroke:sIe},iTe={shadowColor:Bd,borderColor:gIe,foregroundColor:vIe,backgroundColor:mIe,selectionForegroundColor:_Ie,selectionBackgroundColor:yIe,selectionBorderColor:bIe,separatorColor:wIe};function oTe(n,e,t){return TI(e,hR({},iTe,t),n)}var sTe=function(){function n(e,t,r,i,o){this.contextViewService=e,this.telemetryService=t,this.notificationService=r,this.keybindingService=i,this.themeService=o,this.options={blockMouse:!0}}return n.prototype.configure=function(e){this.options=e},n.prototype.showContextMenu=function(e){var t=this,r=e.getActions();if(r.length){this.focusToReturn=document.activeElement;var i;this.contextViewService.showContextView({getAnchor:function(){return e.getAnchor()},canRelayout:!1,anchorAlignment:e.anchorAlignment,render:function(o){var s=e.getMenuClassName?e.getMenuClassName():"";s&&(o.className+=" "+s),t.options.blockMouse&&(t.block=o.appendChild(ke(".context-view-block")));var a=new De,u=e.actionRunner||new cY;return u.onDidBeforeRun(t.onActionRun,t,a),u.onDidRun(t.onDidActionRun,t,a),i=new FZ(o,r,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:u,getKeyBinding:e.getKeyBinding?e.getKeyBinding:function(l){return t.keybindingService.lookupKeybinding(l.id)}}),a.add(oTe(i,t.themeService)),i.onDidCancel(function(){return t.contextViewService.hideContextView(!0)},null,a),i.onDidBlur(function(){return t.contextViewService.hideContextView(!0)},null,a),pt(window,Ye.BLUR)(function(){t.contextViewService.hideContextView(!0)},null,a),pt(window,Ye.MOUSE_DOWN)(function(l){if(!l.defaultPrevented){var f=new Rr(l),h=f.target;if(!f.rightButton){for(;h;){if(h===o)return;h=h.parentElement}t.contextViewService.hideContextView(!0)}}},null,a),au(a,i)},focus:function(){i&&i.focus(!!e.autoSelectFirstItem)},onHide:function(o){e.onHide&&e.onHide(!!o),t.block&&(eF(t.block),t.block=null),t.focusToReturn&&t.focusToReturn.focus()}})}},n.prototype.onActionRun=function(e){this.telemetryService&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()},n.prototype.onDidActionRun=function(e){e.error&&this.notificationService&&this.notificationService.error(e.error)},n}(),aTe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uTe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},s_=function(n,e){return function(t,r){e(t,r,n)}},lTe=function(n){aTe(e,n);function e(t,r,i,o,s){var a=n.call(this)||this;return a._onDidContextMenu=a._register(new j),a.contextMenuHandler=new sTe(i,t,r,o,s),a}return e.prototype.configure=function(t){this.contextMenuHandler.configure(t)},e.prototype.showContextMenu=function(t){this.contextMenuHandler.showContextMenu(t),this._onDidContextMenu.fire()},e=uTe([s_(0,$0),s_(1,Hr),s_(2,vf),s_(3,er),s_(4,Ir)],e),e}(te),no;(function(n){function e(o,s){if(o.start>=s.end||s.start>=o.end)return{start:0,end:0};var a=Math.max(o.start,s.start),u=Math.min(o.end,s.end);return u-a<=0?{start:0,end:0}:{start:a,end:u}}n.intersect=e;function t(o){return o.end-o.start<=0}n.isEmpty=t;function r(o,s){return!t(e(o,s))}n.intersects=r;function i(o,s){var a=[],u={start:o.start,end:Math.min(s.start,o.end)},l={start:Math.max(s.end,o.start),end:o.end};return t(u)||a.push(u),t(l)||a.push(l),a}n.relativeComplement=i})(no||(no={}));var cTe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function e9(n,e,t){var r=t.offset+t.size;return t.position===0?e<=n-r?r:e<=t.offset?t.offset-e:Math.max(n-e,0):e<=t.offset?t.offset-e:e<=n-r?r:0}var fTe=function(n){cTe(e,n);function e(t){var r=n.call(this)||this;return r.container=null,r.delegate=null,r.toDisposeOnClean=te.None,r.toDisposeOnSetContainer=te.None,r.view=ke(".context-view"),yr(r.view),r.setContainer(t),r._register(en(function(){return r.setContainer(null)})),r}return e.prototype.setContainer=function(t){var r=this;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.container.removeChild(this.view),this.container=null),t){this.container=t,this.container.appendChild(this.view);var i=new De;e.BUBBLE_UP_EVENTS.forEach(function(o){i.add(Br(r.container,o,function(s){r.onDOMEvent(s,!1)}))}),e.BUBBLE_DOWN_EVENTS.forEach(function(o){i.add(Br(r.container,o,function(s){r.onDOMEvent(s,!0)},!0))}),this.toDisposeOnSetContainer=i}},e.prototype.show=function(t){this.isVisible()&&this.hide(),ms(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",Yr(this.view),this.toDisposeOnClean=t.render(this.view)||te.None,this.delegate=t,this.doLayout(),this.delegate.focus&&this.delegate.focus()},e.prototype.layout=function(){if(this.isVisible()){if(this.delegate.canRelayout===!1){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}},e.prototype.doLayout=function(){if(this.isVisible()){var t=this.delegate.getAnchor(),r;if(gbe(t)){var i=Wr(t);r={top:i.top,left:i.left,width:i.width,height:i.height}}else r={top:t.y,left:t.x,width:t.width||1,height:t.height||2};var o=ua(this.view),s=kO(this.view),a=this.delegate.anchorPosition||0,u=this.delegate.anchorAlignment||0,l={offset:r.top-window.pageYOffset,size:r.height,position:a===0?0:1},f;u===0?f={offset:r.left,size:0,position:0}:f={offset:r.left+r.width,size:0,position:1};var h=e9(window.innerHeight,s,l)+window.pageYOffset;no.intersects({start:h,end:h+s},{start:l.offset,end:l.offset+l.size})&&(f.size=r.width,u===1&&(f.offset=r.left));var d=e9(window.innerWidth,o,f);aI(this.view,"top","bottom","left","right"),de(this.view,a===0?"bottom":"top"),de(this.view,u===0?"left":"right");var g=Wr(this.container);this.view.style.top=h-g.top+"px",this.view.style.left=d-g.left+"px",this.view.style.width="initial"}},e.prototype.hide=function(t){var r=this.delegate;this.delegate=null,r&&r.onHide&&r.onHide(t),this.toDisposeOnClean.dispose(),yr(this.view)},e.prototype.isVisible=function(){return!!this.delegate},e.prototype.onDOMEvent=function(t,r){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(t,document.activeElement):r&&!wu(t.target,this.container)&&this.hide())},e.prototype.dispose=function(){this.hide(),n.prototype.dispose.call(this)},e.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],e.BUBBLE_DOWN_EVENTS=["click"],e}(te),HZ=xt("layoutService"),hTe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dTe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pTe=function(n,e){return function(t,r){e(t,r,n)}},gTe=function(n){hTe(e,n);function e(t){var r=n.call(this)||this;return r.layoutService=t,r.contextView=r._register(new fTe(t.container)),r.layout(),r._register(t.onLayout(function(){return r.layout()})),r}return e.prototype.setContainer=function(t){this.contextView.setContainer(t)},e.prototype.showContextView=function(t){this.contextView.show(t)},e.prototype.layout=function(){this.contextView.layout()},e.prototype.hideContextView=function(t){this.contextView.hide(t)},e=dTe([pTe(0,HZ)],e),e}(te),vTe=xt("dialogService"),_2=Object.prototype.hasOwnProperty;function t9(n){var e=[];for(var t in n)_2.call(n,t)&&e.push(n[t]);return e}function n9(n){for(var e in n)if(_2.call(n,e))return n[e]}function GT(n,e){var t=function(o){if(_2.call(n,o)){var s=e({key:o,value:n[o]},function(){delete n[o]});if(s===!1)return{value:void 0}}};for(var r in n){var i=t(r);if(typeof i=="object")return i.value}}var mTe=function(){function n(){this.map=new Map}return n.prototype.add=function(e,t){var r=this.map.get(e);r||(r=new Set,this.map.set(e,r)),r.add(t)},n.prototype.delete=function(e,t){var r=this.map.get(e);r&&(r.delete(t),r.size===0&&this.map.delete(e))},n.prototype.forEach=function(e,t){var r=this.map.get(e);r&&r.forEach(t)},n}();function _Te(n){return{data:n,incoming:Object.create(null),outgoing:Object.create(null)}}var yTe=function(){function n(e){this._hashFn=e,this._nodes=Object.create(null)}return n.prototype.roots=function(){var e=[];return GT(this._nodes,function(t){qK(t.value.outgoing)&&e.push(t.value)}),e},n.prototype.insertEdge=function(e,t){var r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);r.outgoing[this._hashFn(t)]=i,i.incoming[this._hashFn(e)]=r},n.prototype.removeNode=function(e){var t=this._hashFn(e);delete this._nodes[t],GT(this._nodes,function(r){delete r.value.outgoing[t],delete r.value.incoming[t]})},n.prototype.lookupOrInsertNode=function(e){var t=this._hashFn(e),r=this._nodes[t];return r||(r=_Te(e),this._nodes[t]=r),r},n.prototype.isEmpty=function(){for(var e in this._nodes)return!1;return!0},n.prototype.toString=function(){var e=[];return GT(this._nodes,function(t){e.push(t.key+", (incoming)["+Object.keys(t.value.incoming).join(", ")+"], (outgoing)["+Object.keys(t.value.outgoing).join(",")+"]")}),e.join(`
`)},n}(),UZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bTe=typeof Proxy=="function",r9=function(n){UZ(e,n);function e(t){var r=n.call(this,"cyclic dependency between services")||this;return r.message=t.toString(),r}return e}(Error),i9=function(){function n(e,t,r){e===void 0&&(e=new ev),t===void 0&&(t=!1),this._services=e,this._strict=t,this._parent=r,this._services.set(Hn,this)}return n.prototype.createChild=function(e){return new n(e,this._strict,this)},n.prototype.invokeFunction=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=YT.traceInvocation(e),s=!1;try{var a={get:function(u,l){if(s)throw y0e("service accessor is only valid during the invocation of its target method");var f=t._getOrCreateServiceInstance(u,o);if(!f&&l!==$h)throw new Error("[invokeFunction] unknown service '"+u+"'");return f}};return e.apply(void 0,[a].concat(r))}finally{s=!0,o.stop()}},n.prototype.createInstance=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i,o;return e instanceof eg?(i=YT.traceCreation(e.ctor),o=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=YT.traceCreation(e),o=this._createInstance(e,t,i)),i.stop(),o},n.prototype._createInstance=function(e,t,r){t===void 0&&(t=[]);for(var i=ba.getServiceDependencies(e).sort(function(d,g){return d.index-g.index}),o=[],s=0,a=i;s<a.length;s++){var u=a[s],l=this._getOrCreateServiceInstance(u.id,r);if(!l&&this._strict&&!u.optional)throw new Error("[createInstance] "+e.name+" depends on UNKNOWN service "+u.id+".");o.push(l)}var f=i.length>0?i[0].index:t.length;if(t.length!==f){console.warn("[createInstance] First service dependency of "+e.name+" at position "+(f+1)+" conflicts with "+t.length+" static arguments");var h=f-t.length;h>0?t=t.concat(new Array(h)):t=t.slice(0,f)}return new(e.bind.apply(e,[void 0].concat(t.concat(o))))},n.prototype._setServiceInstance=function(e,t){if(this._services.get(e)instanceof eg)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")},n.prototype._getServiceInstanceOrDescriptor=function(e){var t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t},n.prototype._getOrCreateServiceInstance=function(e,t){var r=this._getServiceInstanceOrDescriptor(e);return r instanceof eg?this._createAndCacheServiceInstance(e,r,t.branch(e,!0)):(t.branch(e,!1),r)},n.prototype._createAndCacheServiceInstance=function(e,t,r){for(var i=new yTe(function(C){return C.id.toString()}),o=0,s=[{id:e,desc:t,_trace:r}];s.length;){var a=s.pop();if(i.lookupOrInsertNode(a),o++>100)throw new r9(i);for(var u=0,l=ba.getServiceDependencies(a.desc.ctor);u<l.length;u++){var f=l[u],h=this._getServiceInstanceOrDescriptor(f.id);if(!h&&!f.optional&&console.warn("[createInstance] "+e+" depends on "+f.id+" which is NOT registered."),h instanceof eg){var d={id:f.id,desc:h,_trace:a._trace.branch(f.id,!0)};i.insertEdge(a,d),s.push(d)}}}for(;;){var g=i.roots();if(g.length===0){if(!i.isEmpty())throw new r9(i);break}for(var v=0,m=g;v<m.length;v++){var y=m[v].data,b=this._createServiceInstanceWithOwner(y.id,y.desc.ctor,y.desc.staticArguments,y.desc.supportsDelayedInstantiation,y._trace);this._setServiceInstance(y.id,b),i.removeNode(y)}}return this._getServiceInstanceOrDescriptor(e)},n.prototype._createServiceInstanceWithOwner=function(e,t,r,i,o){if(r===void 0&&(r=[]),this._services.get(e)instanceof eg)return this._createServiceInstance(t,r,i,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,r,i,o);throw new Error("illegalState - creating UNKNOWN service instance")},n.prototype._createServiceInstance=function(e,t,r,i){var o=this;if(t===void 0&&(t=[]),!r||!bTe)return this._createInstance(e,t,i);var s=new DO(function(){return o._createInstance(e,t,i)});return new Proxy(Object.create(null),{get:function(a,u){return s.getValue()[u]},set:function(a,u,l){return s.getValue()[u]=l,!0}})},n}(),YT=function(){function n(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}return n.traceInvocation=function(e){return n._None},n.traceCreation=function(e){return n._None},n.prototype.branch=function(e,t){var r=new n(2,e.toString());return this._dep.push([e,t,r]),r},n.prototype.stop=function(){var e=Date.now()-this._start;n._totals+=e;var t=!1;function r(o,s){for(var a=[],u=new Array(o+1).join("	"),l=0,f=s._dep;l<f.length;l++){var h=f[l],d=h[0],g=h[1],v=h[2];if(g&&v){t=!0,a.push(u+"CREATES -> "+d);var m=r(o+1,v);m&&a.push(m)}else a.push(u+"uses -> "+d)}return a.join(`
`)}var i=[(this.type===0?"CREATE":"CALL")+" "+this.name,""+r(1,this),"DONE, took "+e.toFixed(2)+"ms (grand total "+n._totals.toFixed(2)+"ms)"];(e>2||t)&&console.log(i.join(`
`))},n._None=new(function(e){UZ(t,e);function t(){return e.call(this,-1,null)||this}return t.prototype.stop=function(){},t.prototype.branch=function(){return this},t}(n)),n._totals=0,n}(),wTe="label",NI=xt(wTe),ES;(function(n){n.TREE="tree",n.FORM="form"})(ES||(ES={}));function o9(n,e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];if(!(n.start>=o.range.end)){if(n.end<o.range.start)break;var s=no.intersect(n,o.range);no.isEmpty(s)||t.push({range:s,size:o.size})}}return t}function dR(n,e){var t=n.start,r=n.end;return{start:t+e,end:r+e}}function CTe(n){for(var e=[],t=null,r=0,i=n;r<i.length;r++){var o=i[r],s=o.range.start,a=o.range.end,u=o.size;if(t&&u===t.size){t.range.end=a;continue}t={range:{start:s,end:a},size:u},e.push(t)}return e}function STe(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return CTe(n.reduce(function(t,r){return t.concat(r)},[]))}var s9=function(){function n(){this.groups=[],this._size=0}return n.prototype.splice=function(e,t,r){r===void 0&&(r=[]);var i=r.length-t,o=o9({start:0,end:e},this.groups),s=o9({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(function(u){return{range:dR(u.range,i),size:u.size}}),a=r.map(function(u,l){return{range:{start:e+l,end:e+l+1},size:u.size}});this.groups=STe(o,a,s),this._size=this.groups.reduce(function(u,l){return u+l.size*(l.range.end-l.range.start)},0)},Object.defineProperty(n.prototype,"count",{get:function(){var e=this.groups.length;return e?this.groups[e-1].range.end:0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),n.prototype.indexAt=function(e){if(e<0)return-1;for(var t=0,r=0,i=0,o=this.groups;i<o.length;i++){var s=o[i],a=s.range.end-s.range.start,u=r+a*s.size;if(e<u)return t+Math.floor((e-r)/s.size);t+=a,r=u}return t},n.prototype.indexAfter=function(e){return Math.min(this.indexAt(e)+1,this.count)},n.prototype.positionAt=function(e){if(e<0)return-1;for(var t=0,r=0,i=0,o=this.groups;i<o.length;i++){var s=o[i],a=s.range.end-s.range.start,u=r+a;if(e<u)return t+(e-r)*s.size;t+=a*s.size,r=u}return-1},n.prototype.dispose=function(){this.groups=null},n}();function ETe(n){try{n.parentElement&&n.parentElement.removeChild(n)}catch{}}var ITe=function(){function n(e){this.renderers=e,this.cache=new Map}return n.prototype.alloc=function(e){var t=this.getTemplateCache(e).pop();if(!t){var r=ke(".monaco-list-row"),i=this.getRenderer(e),o=i.renderTemplate(r);t={domNode:r,templateId:e,templateData:o}}return t},n.prototype.release=function(e){e&&this.releaseRow(e)},n.prototype.releaseRow=function(e){var t=e.domNode,r=e.templateId;t&&(qe(t,"scrolling"),ETe(t));var i=this.getTemplateCache(r);i.push(e)},n.prototype.getTemplateCache=function(e){var t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t},n.prototype.garbageCollect=function(){var e=this;this.renderers&&(this.cache.forEach(function(t,r){for(var i=0,o=t;i<o.length;i++){var s=o[i],a=e.getRenderer(r);a.disposeTemplate(s.templateData),s.domNode=null,s.templateData=null}}),this.cache.clear())},n.prototype.dispose=function(){this.garbageCollect(),this.cache.clear(),this.renderers=null},n.prototype.getRenderer=function(e){var t=this.renderers.get(e);if(!t)throw new Error("No renderer found for "+e);return t},n}(),jZ={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:"text/plain"},xTe=function(){function n(e){this.data=e}return n.prototype.update=function(){},n.prototype.getData=function(){return this.data},n}(),ns={CurrentDragAndDropData:void 0},uh=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},lh={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:function(n){return[n]},getDragURI:function(){return null},onDragStart:function(){},onDragOver:function(){return!1},drop:function(){}},horizontalScrolling:!1},Gy=function(){function n(e){this.elements=e}return n.prototype.update=function(){},n.prototype.getData=function(){return this.elements},n}(),DTe=function(){function n(e){this.elements=e}return n.prototype.update=function(){},n.prototype.getData=function(){return this.elements},n}(),LTe=function(){function n(){this.types=[],this.files=[]}return n.prototype.update=function(e){var t;if(e.types&&(t=this.types).splice.apply(t,[0,this.types.length].concat(e.types)),e.files){this.files.splice(0,this.files.length);for(var r=0;r<e.files.length;r++){var i=e.files.item(r);i&&(i.size||i.type)&&this.files.push(i)}}},n.prototype.getData=function(){return{types:this.types,files:this.files}},n}();function kTe(n,e){return Array.isArray(n)&&Array.isArray(e)?hf(n,e):n===e}var TTe=function(){function n(e,t,r,i){var o=this;if(i===void 0&&(i=lh),this.virtualDelegate=t,this.domId="list_id_"+ ++n.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Rv(50),this.splicing=!1,this.dragOverAnimationStopDisposable=te.None,this.dragOverMouseY=0,this.canUseTranslate3d=void 0,this.canDrop=!1,this.currentDragFeedbackDisposable=te.None,this.onDragLeaveTimeout=te.None,this._onDidChangeContentHeight=new j,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new s9;for(var s=0,a=r;s<a.length;s++){var u=a[s];this.renderers.set(u.templateId,u)}this.cache=new ITe(this.renderers),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",de(this.domNode,this.domId),this.domNode.tabIndex=0,vt(this.domNode,"mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this.horizontalScrolling=Lp(i,function(l){return l.horizontalScrolling},lh.horizontalScrolling),vt(this.domNode,"horizontal-scrolling",this.horizontalScrolling),this.additionalScrollHeight=typeof i.additionalScrollHeight>"u"?0:i.additionalScrollHeight,this.ariaProvider=i.ariaProvider||{getSetSize:function(l,f,h){return h},getPosInSet:function(l,f){return f+1}},this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",Bv.addTarget(this.rowsContainer),this.scrollableElement=new Y0(this.rowsContainer,{alwaysConsumeMouseWheel:!0,horizontal:this.horizontalScrolling?1:2,vertical:Lp(i,function(l){return l.verticalScrollMode},lh.verticalScrollMode),useShadows:Lp(i,function(l){return l.useShadows},lh.useShadows)}),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.disposables=[this.rangeMap,this.scrollableElement,this.cache],this.scrollableElement.onScroll(this.onScroll,this,this.disposables),pt(this.rowsContainer,Ar.Change)(this.onTouchChange,this,this.disposables),pt(this.scrollableElement.getDomNode(),"scroll")(function(l){return l.target.scrollTop=0},null,this.disposables),We.map(pt(this.domNode,"dragover"),function(l){return o.toDragEvent(l)})(this.onDragOver,this,this.disposables),We.map(pt(this.domNode,"drop"),function(l){return o.toDragEvent(l)})(this.onDrop,this,this.disposables),pt(this.domNode,"dragleave")(this.onDragLeave,this,this.disposables),pt(window,"dragend")(this.onDragEnd,this,this.disposables),this.setRowLineHeight=Lp(i,function(l){return l.setRowLineHeight},lh.setRowLineHeight),this.supportDynamicHeights=Lp(i,function(l){return l.supportDynamicHeights},lh.supportDynamicHeights),this.dnd=Lp(i,function(l){return l.dnd},lh.dnd),this.layout()}return Object.defineProperty(n.prototype,"contentHeight",{get:function(){return this.rangeMap.size},enumerable:!0,configurable:!0}),n.prototype.splice=function(e,t,r){if(r===void 0&&(r=[]),this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,r)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}},n.prototype._splice=function(e,t,r){var i,o=this;r===void 0&&(r=[]);for(var s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),a={start:e,end:e+t},u=no.intersect(s,a),l=u.start;l<u.end;l++)this.removeItemFromDOM(l);var f={start:e+t,end:this.items.length},h=no.intersect(f,s),d=no.relativeComplement(f,s),g=r.map(function(z){return{id:String(o.itemId++),element:z,templateId:o.virtualDelegate.getTemplateId(z),size:o.virtualDelegate.getHeight(z),width:void 0,hasDynamicHeight:!!o.virtualDelegate.hasDynamicHeight&&o.virtualDelegate.hasDynamicHeight(z),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:te.None}}),v;e===0&&t>=this.items.length?(this.rangeMap=new s9,this.rangeMap.splice(0,0,g),this.items=g,v=[]):(this.rangeMap.splice(e,t,g),v=(i=this.items).splice.apply(i,[e,t].concat(g)));for(var m=r.length-t,y=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=dR(h,m),C=no.intersect(y,b),l=C.start;l<C.end;l++)this.updateItemInDOM(this.items[l],l);for(var E=no.relativeComplement(b,y),D=0,k=E;D<k.length;D++)for(var I=k[D],l=I.start;l<I.end;l++)this.removeItemFromDOM(l);for(var T=d.map(function(z){return dR(z,m)}),A={start:e,end:e+r.length},M=[A].concat(T).map(function(z){return no.intersect(y,z)}),L=this.getNextToLastElement(M),F=0,W=M;F<W.length;F++)for(var I=W[F],l=I.start;l<I.end;l++)this.insertItemInDOM(l,L);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),v.map(function(z){return z.element})},n.prototype.eventuallyUpdateScrollDimensions=function(){var e=this;this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=this._scrollHeight+"px",this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=ef(function(){e.scrollableElement.setScrollDimensions({scrollHeight:e.scrollHeight}),e.updateScrollWidth(),e.scrollableElementUpdateDisposable=null}))},n.prototype.eventuallyUpdateScrollWidth=function(){var e=this;this.horizontalScrolling&&this.scrollableElementWidthDelayer.trigger(function(){return e.updateScrollWidth()})},n.prototype.updateScrollWidth=function(){if(this.horizontalScrolling){this.items.length===0&&this.scrollableElement.setScrollDimensions({scrollWidth:0});for(var e=0,t=0,r=this.items;t<r.length;t++){var i=r[t];typeof i.width<"u"&&(e=Math.max(e,i.width))}this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e+10})}},n.prototype.rerender=function(){if(this.supportDynamicHeights){for(var e=0,t=this.items;e<t.length;e++){var r=t[e];r.lastDynamicHeightWidth=void 0}this._rerender(this.lastRenderTop,this.lastRenderHeight)}},Object.defineProperty(n.prototype,"length",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"renderHeight",{get:function(){var e=this.scrollableElement.getScrollDimensions();return e.height},enumerable:!0,configurable:!0}),n.prototype.element=function(e){return this.items[e].element},n.prototype.domElement=function(e){var t=this.items[e].row;return t&&t.domNode},n.prototype.elementHeight=function(e){return this.items[e].size},n.prototype.elementTop=function(e){return this.rangeMap.positionAt(e)},n.prototype.indexAt=function(e){return this.rangeMap.indexAt(e)},n.prototype.indexAfter=function(e){return this.rangeMap.indexAfter(e)},n.prototype.layout=function(e,t){var r={height:typeof e=="number"?e:pG(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,r.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(r),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:G1(this.domNode)}))},n.prototype.render=function(e,t,r,i){for(var o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=this.getRenderRange(e,t),a=no.relativeComplement(s,o),u=no.relativeComplement(o,s),l=this.getNextToLastElement(a),f=0,h=a;f<h.length;f++)for(var d=h[f],g=d.start;g<d.end;g++)this.insertItemInDOM(g,l);for(var v=0,m=u;v<m.length;v++)for(var d=m[v],g=d.start;g<d.end;g++)this.removeItemFromDOM(g);var y=!Hi&&!wl&&q1()===0;if(y){var b="translate3d(-"+r+"px, -"+e+"px, 0px)";this.rowsContainer.style.transform=b,this.rowsContainer.style.webkitTransform=b,y!==this.canUseTranslate3d&&(this.rowsContainer.style.left="0",this.rowsContainer.style.top="0")}else this.rowsContainer.style.left="-"+r+"px",this.rowsContainer.style.top="-"+e+"px",y!==this.canUseTranslate3d&&(this.rowsContainer.style.transform="",this.rowsContainer.style.webkitTransform="");this.horizontalScrolling&&(this.rowsContainer.style.width=Math.max(i,this.renderWidth)+"px"),this.canUseTranslate3d=y,this.lastRenderTop=e,this.lastRenderHeight=t},n.prototype.insertItemInDOM=function(e,t){var r=this,i=this.items[e];if(!i.row){i.row=this.cache.alloc(i.templateId);var o=this.ariaProvider.getRole?this.ariaProvider.getRole(i.element):"treeitem";i.row.domNode.setAttribute("role",o);var s=this.ariaProvider.isChecked?this.ariaProvider.isChecked(i.element):void 0;typeof s<"u"&&i.row.domNode.setAttribute("aria-checked",String(s))}i.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);var a=this.renderers.get(i.templateId);if(!a)throw new Error("No renderer found for template id "+i.templateId);a&&a.renderElement(i.element,e,i.row.templateData,i.size);var u=this.dnd.getDragURI(i.element);if(i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!u,u){var l=pt(i.row.domNode,"dragstart");i.dragStartDisposable=l(function(f){return r.onDragStart(i.element,u,f)})}this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())},n.prototype.measureItemWidth=function(e){if(!(!e.row||!e.row.domNode)){e.row.domNode.style.width="fit-content",e.width=G1(e.row.domNode);var t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}},n.prototype.updateItemInDOM=function(e,t){e.row.domNode.style.top=this.elementTop(t)+"px",e.row.domNode.style.height=e.size+"px",this.setRowLineHeight&&(e.row.domNode.style.lineHeight=e.size+"px"),e.row.domNode.setAttribute("data-index",""+t),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("aria-setsize",String(this.ariaProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.ariaProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),vt(e.row.domNode,"drop-target",e.dropTarget)},n.prototype.removeItemFromDOM=function(e){var t=this.items[e];t.dragStartDisposable.dispose();var r=this.renderers.get(t.templateId);r&&r.disposeElement&&r.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null,this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()},n.prototype.getScrollTop=function(){var e=this.scrollableElement.getScrollPosition();return e.scrollTop},n.prototype.setScrollTop=function(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e})},Object.defineProperty(n.prototype,"scrollTop",{get:function(){return this.getScrollTop()},set:function(e){this.setScrollTop(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollHeight",{get:function(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMouseClick",{get:function(){var e=this;return We.map(pt(this.domNode,"click"),function(t){return e.toMouseEvent(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMouseDblClick",{get:function(){var e=this;return We.map(pt(this.domNode,"dblclick"),function(t){return e.toMouseEvent(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMouseMiddleClick",{get:function(){var e=this;return We.filter(We.map(pt(this.domNode,"auxclick"),function(t){return e.toMouseEvent(t)}),function(t){return t.browserEvent.button===1})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMouseDown",{get:function(){var e=this;return We.map(pt(this.domNode,"mousedown"),function(t){return e.toMouseEvent(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onContextMenu",{get:function(){var e=this;return We.map(pt(this.domNode,"contextmenu"),function(t){return e.toMouseEvent(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onTouchStart",{get:function(){var e=this;return We.map(pt(this.domNode,"touchstart"),function(t){return e.toTouchEvent(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onTap",{get:function(){var e=this;return We.map(pt(this.rowsContainer,Ar.Tap),function(t){return e.toGestureEvent(t)})},enumerable:!0,configurable:!0}),n.prototype.toMouseEvent=function(e){var t=this.getItemIndexFromEventTarget(e.target||null),r=typeof t>"u"?void 0:this.items[t],i=r&&r.element;return{browserEvent:e,index:t,element:i}},n.prototype.toTouchEvent=function(e){var t=this.getItemIndexFromEventTarget(e.target||null),r=typeof t>"u"?void 0:this.items[t],i=r&&r.element;return{browserEvent:e,index:t,element:i}},n.prototype.toGestureEvent=function(e){var t=this.getItemIndexFromEventTarget(e.initialTarget||null),r=typeof t>"u"?void 0:this.items[t],i=r&&r.element;return{browserEvent:e,index:t,element:i}},n.prototype.toDragEvent=function(e){var t=this.getItemIndexFromEventTarget(e.target||null),r=typeof t>"u"?void 0:this.items[t],i=r&&r.element;return{browserEvent:e,index:t,element:i}},n.prototype.onScroll=function(e){try{this.render(e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height)}catch(t){throw console.error("Got bad scroll event:",e),t}},n.prototype.onTouchChange=function(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY},n.prototype.onDragStart=function(e,t,r){if(r.dataTransfer){var i=this.dnd.getDragElements(e);if(r.dataTransfer.effectAllowed="copyMove",r.dataTransfer.setData(jZ.RESOURCES,JSON.stringify([t])),r.dataTransfer.setDragImage){var o=void 0;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(i)),typeof o>"u"&&(o=String(i.length));var s=ke(".monaco-drag-image");s.textContent=o,document.body.appendChild(s),r.dataTransfer.setDragImage(s,-10,-10),setTimeout(function(){return document.body.removeChild(s)},0)}this.currentDragData=new Gy(i),ns.CurrentDragAndDropData=new DTe(i),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,r)}},n.prototype.onDragOver=function(e){var t=this;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),ns.CurrentDragAndDropData&&ns.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(ns.CurrentDragAndDropData)this.currentDragData=ns.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new LTe}var r=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof r=="boolean"?r:r.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof r!="boolean"&&r.effect===0?"copy":"move";var i;if(typeof r!="boolean"&&r.feedback?i=r.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=HK(i).filter(function(l){return l>=-1&&l<t.length}).sort(),i=i[0]===-1?[-1]:i,i.length===0)throw new Error("Invalid empty feedback list");if(kTe(this.currentDragFeedback,i))return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)de(this.domNode,"drop-target"),this.currentDragFeedbackDisposable=en(function(){return qe(t.domNode,"drop-target")});else{for(var o=0,s=i;o<s.length;o++){var a=s[o],u=this.items[a];u.dropTarget=!0,u.row&&u.row.domNode&&de(u.row.domNode,"drop-target")}this.currentDragFeedbackDisposable=en(function(){for(var l=0,f=i;l<f.length;l++){var h=f[l],d=t.items[h];d.dropTarget=!1,d.row&&d.row.domNode&&qe(d.row.domNode,"drop-target")}})}return!0},n.prototype.onDragLeave=function(){var e=this;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=zg(function(){return e.clearDragOverFeedback()},100)},n.prototype.onDrop=function(e){if(this.canDrop){var t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,ns.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}},n.prototype.onDragEnd=function(){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,ns.CurrentDragAndDropData=void 0},n.prototype.clearDragOverFeedback=function(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=te.None},n.prototype.setupDragAndDropScrollTopAnimation=function(e){var t=this;if(!this.dragOverAnimationDisposable){var r=iF(this.domNode).top;this.dragOverAnimationDisposable=wbe(this.animateDragAndDropScrollTop.bind(this,r))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=zg(function(){t.dragOverAnimationDisposable&&(t.dragOverAnimationDisposable.dispose(),t.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY},n.prototype.animateDragAndDropScrollTop=function(e){if(this.dragOverMouseY!==void 0){var t=this.dragOverMouseY-e,r=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>r&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-r))))}},n.prototype.teardownDragAndDropScrollTopAnimation=function(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},n.prototype.getItemIndexFromEventTarget=function(e){for(var t=e;t instanceof HTMLElement&&t!==this.rowsContainer;){var r=t.getAttribute("data-index");if(r){var i=Number(r);if(!isNaN(i))return i}t=t.parentElement}},n.prototype.getRenderRange=function(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}},n.prototype._rerender=function(e,t){var r=this.getRenderRange(e,t),i,o;e===this.elementTop(r.start)?(i=r.start,o=0):r.end-r.start>1&&(i=r.start+1,o=this.elementTop(i)-e);for(var s=0;;){for(var a=this.getRenderRange(e,t),u=!1,l=a.start;l<a.end;l++){var f=this.probeDynamicHeight(l);f!==0&&this.rangeMap.splice(l,1,[this.items[l]]),s+=f,u=u||f!==0}if(!u){s!==0&&this.eventuallyUpdateScrollDimensions();for(var h=no.relativeComplement(r,a),d=0,g=h;d<g.length;d++)for(var v=g[d],l=v.start;l<v.end;l++)this.items[l].row&&this.removeItemFromDOM(l);for(var m=no.relativeComplement(a,r),y=0,b=m;y<b.length;y++)for(var v=b[y],l=v.start;l<v.end;l++){var C=l+1,E=C<this.items.length?this.items[C].row:null,D=E?E.domNode:null;this.insertItemInDOM(l,D)}for(var l=a.start;l<a.end;l++)this.items[l].row&&this.updateItemInDOM(this.items[l],l);typeof i=="number"&&(this.scrollTop=this.elementTop(i)-o),this._onDidChangeContentHeight.fire(this.contentHeight);return}}},n.prototype.probeDynamicHeight=function(e){var t=this.items[e];if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth)return 0;var r=t.size,i=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);var o=this.renderers.get(t.templateId);return o&&(o.renderElement(t.element,e,i.templateData,void 0),o.disposeElement&&o.disposeElement(t.element,e,i.templateData,void 0)),t.size=i.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(i.domNode),this.cache.release(i),t.size-r},n.prototype.getNextToLastElement=function(e){var t=e[e.length-1];if(!t)return null;var r=this.items[t.end];return!r||!r.row?null:r.row.domNode},n.prototype.getElementDomId=function(e){return this.domId+"_"+e},n.prototype.dispose=function(){if(this.items){for(var e=0,t=this.items;e<t.length;e++){var r=t[e];if(r.row){var i=this.renderers.get(r.row.templateId);i&&i.disposeTemplate(r.row.templateData)}}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.disposables=Ue(this.disposables)},n.InstanceCount=0,uh([Ts],n.prototype,"onMouseClick",null),uh([Ts],n.prototype,"onMouseDblClick",null),uh([Ts],n.prototype,"onMouseMiddleClick",null),uh([Ts],n.prototype,"onMouseDown",null),uh([Ts],n.prototype,"onContextMenu",null),uh([Ts],n.prototype,"onTouchStart",null),uh([Ts],n.prototype,"onTap",null),n}(),NTe=function(){function n(e){this.spliceables=e}return n.prototype.splice=function(e,t,r){this.spliceables.forEach(function(i){return i.splice(e,t,r)})},n}();function la(n,e,t){return Math.min(Math.max(n,e),t)}function zZ(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t,r){for(var i=0,o=n.length;i<o;i++){var s=n[i](t,r);if(s)return s}return null}}var y2=ATe.bind(void 0,!0);function ATe(n,e,t){if(!t||t.length<e.length)return null;var r;return n?r=IG(t,e):r=t.indexOf(e)===0,r?e.length>0?[{start:0,end:e.length}]:[]:null}function OTe(n,e){var t=e.toLowerCase().indexOf(n.toLowerCase());return t===-1?null:[{start:t,end:t+n.length}]}function RTe(n,e){return pR(n.toLowerCase(),e.toLowerCase(),0,0)}function pR(n,e,t,r){if(t===n.length)return[];if(r===e.length)return null;if(n[t]===e[r]){var i=null;return(i=pR(n,e,t+1,r+1))?$Z({start:r,end:r+1},i):null}return pR(n,e,t,r+1)}function b2(n){return 97<=n&&n<=122}function AI(n){return 65<=n&&n<=90}function w2(n){return 48<=n&&n<=57}function MTe(n){return n===32||n===9||n===10||n===13}var PTe=new Set;"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?".split("").forEach(function(n){return PTe.add(n.charCodeAt(0))});function qZ(n){return b2(n)||AI(n)||w2(n)}function $Z(n,e){return e.length===0?e=[n]:n.end===e[0].start?e[0].start=n.start:e.unshift(n),e}function KZ(n,e){for(var t=e;t<n.length;t++){var r=n.charCodeAt(t);if(AI(r)||w2(r)||t>0&&!qZ(n.charCodeAt(t-1)))return t}return n.length}function gR(n,e,t,r){if(t===n.length)return[];if(r===e.length)return null;if(n[t]!==e[r].toLowerCase())return null;var i=null,o=r+1;for(i=gR(n,e,t+1,r+1);!i&&(o=KZ(e,o))<e.length;)i=gR(n,e,t+1,o),o++;return i===null?null:$Z({start:r,end:r+1},i)}function FTe(n){for(var e=0,t=0,r=0,i=0,o=0,s=0;s<n.length;s++)o=n.charCodeAt(s),AI(o)&&e++,b2(o)&&t++,qZ(o)&&r++,w2(o)&&i++;var a=e/n.length,u=t/n.length,l=r/n.length,f=i/n.length;return{upperPercent:a,lowerPercent:u,alphaPercent:l,numericPercent:f}}function BTe(n){var e=n.upperPercent,t=n.lowerPercent;return t===0&&e>.6}function WTe(n){var e=n.upperPercent,t=n.lowerPercent,r=n.alphaPercent,i=n.numericPercent;return t>.2&&e<.8&&r>.6&&i<.2}function VTe(n){for(var e=0,t=0,r=0,i=0,o=0;o<n.length;o++)r=n.charCodeAt(o),AI(r)&&e++,b2(r)&&t++,MTe(r)&&i++;return(e===0||t===0)&&i===0?n.length<=30:e<=5}function GZ(n,e){if(!e||(e=e.trim(),e.length===0)||!VTe(n)||e.length>60)return null;var t=FTe(e);if(!WTe(t)){if(!BTe(t))return null;e=e.toLowerCase()}var r=null,i=0;for(n=n.toLowerCase();i<e.length&&(r=gR(n,e,0,i))===null;)i=KZ(e,i+1);return r}var HTe=zZ(y2,GZ,OTe),UTe=zZ(y2,GZ,RTe),a9=new qg(1e4);function YZ(n,e,t){if(t===void 0&&(t=!1),typeof n!="string"||typeof e!="string")return null;var r=a9.get(n);r||(r=new RegExp(Ebe(n),"i"),a9.set(n,r));var i=r.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?UTe(n,e):HTe(n,e)}function jTe(n,e,t,r,i,o){var s=Yy(n,e,0,r,i,0,!0);if(s)return s;for(var a=0,u=0,l=o,f=0;f<e.length&&f<Dc;++f){var h=i.indexOf(e.charAt(f),l);if(h>=0)u+=1,a+=Math.pow(2,h),l=h+1;else if(a!==0)break}return[u,a,o]}function C2(n){if(typeof n>"u")return[];for(var e=n[1].toString(2),t=n[2],r=[],i=t;i<Dc;i++)if(e[e.length-(i+1)]==="1"){var o=r[r.length-1];o&&o.end===i?o.end=i+1:r.push({start:i,end:i+1})}return r}var Dc=128;function S2(){for(var n=[],e=[0],t=1;t<=Dc;t++)e.push(-t);for(var t=0;t<=Dc;t++){var r=e.slice(0);r[0]=-t,n.push(r)}return n}var qu=S2(),ZZ=S2(),bh=S2();function ZT(n,e){if(e<0||e>=n.length)return!1;var t=n.charCodeAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:return!0;default:return!1}}function zTe(n,e){if(e<0||e>=n.length)return!1;var t=n.charCodeAt(e);switch(t){case 32:case 9:return!0;default:return!1}}function u9(n,e,t){return e[n]!==t[n]}function qTe(n,e,t,r,i,o){for(;e<t&&i<o;)n[e]===r[i]&&(e+=1),i+=1;return e===t}var Ea;(function(n){n.Default=Object.freeze([-100,0,0]);function e(t){return!t||t[0]===-100&&t[1]===0&&t[2]===0}n.isDefault=e})(Ea||(Ea={}));function Yy(n,e,t,r,i,o,s){var a=n.length>Dc?Dc:n.length,u=r.length>Dc?Dc:r.length;if(!(t>=a||o>=u||a>u)&&qTe(e,t,a,i,o,u)){var l=1,f=1,h=t,d=o;for(l=1,h=t;h<a;l++,h++)for(f=1,d=o;d<u;f++,d++){var g=$Te(n,e,h,t,r,i,d);ZZ[l][f]=g;var v=qu[l-1][f-1]+(g>1?1:g),m=qu[l-1][f]+-1,y=qu[l][f-1]+-1;y>=m?y>v?(qu[l][f]=y,bh[l][f]=4):y===v?(qu[l][f]=y,bh[l][f]=6):(qu[l][f]=v,bh[l][f]=2):m>v?(qu[l][f]=m,bh[l][f]=1):m===v?(qu[l][f]=m,bh[l][f]=3):(qu[l][f]=v,bh[l][f]=2)}if(IS=0,xS=-100,QZ=o,JZ=s,eX(l-1,f-1,a===u?1:0,0,!1),IS!==0)return[xS,XZ,o]}}function $Te(n,e,t,r,i,o,s){return e[t]!==o[s]?-1:s===t-r||u9(s,i,o)&&(s===0||!u9(s-1,i,o))?n[t]===i[s]?7:5:ZT(o,s)&&(s===0||!ZT(o,s-1))||ZT(o,s-1)||zTe(o,s-1)?5:1}var IS=0,XZ=0,xS=0,QZ=0,JZ=!1;function eX(n,e,t,r,i){if(!(IS>=10||t<-25)){for(var o=0;n>0&&e>0;){var s=ZZ[n][e],a=bh[n][e];if(a===4)e-=1,i?t-=5:r!==0&&(t-=1),i=!1,o=0;else if(a&2)if(a&4&&eX(n,e-1,r!==0?t-1:t,r,i),t+=s,n-=1,e-=1,i=!0,r+=Math.pow(2,e+QZ),s===1){if(o+=1,n===0&&!JZ)return}else t+=1+o*(s-1),o=0;else return}t-=e>=3?9:e*3,IS+=1,t>xS&&(xS=t,XZ=r)}}function KTe(n,e,t,r,i,o,s){return GTe(n,e,t,r,i,o,!0,s)}function GTe(n,e,t,r,i,o,s,a){var u=Yy(n,e,t,r,i,o,a);if(u&&!s)return u;if(n.length>=3)for(var l=Math.min(7,n.length-1),f=t+1;f<l;f++){var h=YTe(n,f);if(h){var d=Yy(h,h.toLowerCase(),t,r,i,o,a);d&&(d[0]-=3,(!u||d[0]>u[0])&&(u=d))}}return u}function YTe(n,e){if(!(e+1>=n.length)){var t=n[e],r=n[e+1];if(t!==r)return n.slice(0,e)+r+t+n.slice(e+2)}}var ZTe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DS=function(){return DS=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},DS.apply(this,arguments)},r1=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},XTe=function(){function n(e){this.trait=e,this.renderedElements=[]}return Object.defineProperty(n.prototype,"templateId",{get:function(){return"template:"+this.trait.trait},enumerable:!0,configurable:!0}),n.prototype.renderTemplate=function(e){return e},n.prototype.renderElement=function(e,t,r){var i=Mc(this.renderedElements,function(s){return s.templateData===r});if(i>=0){var o=this.renderedElements[i];this.trait.unrender(r),o.index=t}else{var o={index:t,templateData:r};this.renderedElements.push(o)}this.trait.renderIndex(t,r)},n.prototype.splice=function(e,t,r){for(var i=[],o=0,s=this.renderedElements;o<s.length;o++){var a=s[o];a.index<e?i.push(a):a.index>=e+t&&i.push({index:a.index+r-t,templateData:a.templateData})}this.renderedElements=i},n.prototype.renderIndexes=function(e){for(var t=0,r=this.renderedElements;t<r.length;t++){var i=r[t],o=i.index,s=i.templateData;e.indexOf(o)>-1&&this.trait.renderIndex(o,s)}},n.prototype.disposeTemplate=function(e){var t=Mc(this.renderedElements,function(r){return r.templateData===e});t<0||this.renderedElements.splice(t,1)},n}(),tX=function(){function n(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new j,this.onChange=this._onChange.event}return Object.defineProperty(n.prototype,"trait",{get:function(){return this._trait},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"renderer",{get:function(){return new XTe(this)},enumerable:!0,configurable:!0}),n.prototype.splice=function(e,t,r){var i=r.length-t,o=e+t,s=this.sortedIndexes.filter(function(a){return a<e}).concat(r.map(function(a,u){return a?u+e:-1}).filter(function(a){return a!==-1}),this.sortedIndexes.filter(function(a){return a>=o}).map(function(a){return a+i}));this.renderer.splice(e,t,r.length),this._set(s,s)},n.prototype.renderIndex=function(e,t){vt(t,this._trait,this.contains(e))},n.prototype.unrender=function(e){qe(e,this._trait)},n.prototype.set=function(e,t){return this._set(e,e.slice().sort(c9),t)},n.prototype._set=function(e,t,r){var i=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;var s=vR(o,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:r}),i},n.prototype.get=function(){return this.indexes},n.prototype.contains=function(e){return JE(this.sortedIndexes,e,c9)>=0},n.prototype.dispose=function(){this._onChange=Ue(this._onChange)},r1([Ts],n.prototype,"renderer",null),n}(),QTe=function(n){ZTe(e,n);function e(){return n.call(this,"focused")||this}return e.prototype.renderIndex=function(t,r){n.prototype.renderIndex.call(this,t,r),this.contains(t)?r.setAttribute("aria-selected","true"):r.removeAttribute("aria-selected")},e}(tX),l9=function(){function n(e,t,r){this.trait=e,this.view=t,this.identityProvider=r}return n.prototype.splice=function(e,t,r){var i=this;if(!this.identityProvider)return this.trait.splice(e,t,r.map(function(){return!1}));var o=this.trait.get().map(function(a){return i.identityProvider.getId(i.view.element(a)).toString()}),s=r.map(function(a){return o.indexOf(i.identityProvider.getId(a).toString())>-1});this.trait.splice(e,t,s)},n}();function Zy(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}var JTe=function(){function n(e,t,r){this.list=e,this.view=t,this.disposables=new De;var i=r.multipleSelectionSupport!==!1;this.openController=r.openController||sX;var o=We.chain(pt(t.domNode,"keydown")).filter(function(s){return!Zy(s.target)}).map(function(s){return new Sn(s)});o.filter(function(s){return s.keyCode===3}).on(this.onEnter,this,this.disposables),o.filter(function(s){return s.keyCode===16}).on(this.onUpArrow,this,this.disposables),o.filter(function(s){return s.keyCode===18}).on(this.onDownArrow,this,this.disposables),o.filter(function(s){return s.keyCode===11}).on(this.onPageUpArrow,this,this.disposables),o.filter(function(s){return s.keyCode===12}).on(this.onPageDownArrow,this,this.disposables),o.filter(function(s){return s.keyCode===9}).on(this.onEscape,this,this.disposables),i&&o.filter(function(s){return(ct?s.metaKey:s.ctrlKey)&&s.keyCode===31}).on(this.onCtrlA,this,this.disposables)}return n.prototype.onEnter=function(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent),this.openController.shouldOpen(e.browserEvent)&&this.list.open(this.list.getFocus(),e.browserEvent)},n.prototype.onUpArrow=function(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()},n.prototype.onDownArrow=function(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()},n.prototype.onPageUpArrow=function(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()},n.prototype.onPageDownArrow=function(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()},n.prototype.onCtrlA=function(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(eo(this.list.length),e.browserEvent),this.view.domNode.focus()},n.prototype.onEscape=function(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.view.domNode.focus()},n.prototype.dispose=function(){this.disposables.dispose()},n}(),cg;(function(n){n[n.Idle=0]="Idle",n[n.Typing=1]="Typing"})(cg||(cg={}));function nX(n){return n.ctrlKey||n.metaKey||n.altKey?!1:n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30||n.keyCode>=93&&n.keyCode<=102||n.keyCode>=80&&n.keyCode<=90}var eNe=function(){function n(e,t,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=r,this.enabled=!1,this.state=cg.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.enabledDisposables=new De,this.disposables=new De,this.updateOptions(e.options)}return n.prototype.updateOptions=function(e){var t=typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation;t?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)},n.prototype.enable=function(){var e=this;if(!this.enabled){var t=We.chain(pt(this.view.domNode,"keydown")).filter(function(o){return!Zy(o.target)}).filter(function(){return e.automaticKeyboardNavigation||e.triggered}).map(function(o){return new Sn(o)}).filter(this.keyboardNavigationLabelProvider.mightProducePrintableCharacter?function(o){return e.keyboardNavigationLabelProvider.mightProducePrintableCharacter(o)}:function(o){return nX(o)}).forEach(function(o){o.stopPropagation(),o.preventDefault()}).map(function(o){return o.browserEvent.key}).event,r=We.debounce(t,function(){return null},800),i=We.reduce(We.any(t,r),function(o,s){return s===null?null:(o||"")+s});i(this.onInput,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}},n.prototype.disable=function(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)},n.prototype.onInput=function(e){if(!e){this.state=cg.Idle,this.triggered=!1;return}var t=this.list.getFocus(),r=t.length>0?t[0]:0,i=this.state===cg.Idle?1:0;this.state=cg.Typing;for(var o=0;o<this.list.length;o++){var s=(r+o+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),u=a&&a.toString();if(typeof u>"u"||y2(e,u)){this.list.setFocus([s]),this.list.reveal(s);return}}},n.prototype.dispose=function(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()},n}(),tNe=function(){function n(e,t){this.list=e,this.view=t,this.disposables=new De;var r=We.chain(pt(t.domNode,"keydown")).filter(function(i){return!Zy(i.target)}).map(function(i){return new Sn(i)});r.filter(function(i){return i.keyCode===2&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey}).on(this.onTab,this,this.disposables)}return n.prototype.onTab=function(e){if(e.target===this.view.domNode){var t=this.list.getFocus();if(t.length!==0){var r=this.view.domElement(t[0]);if(r){var i=r.querySelector("[tabIndex]");if(!(!i||!(i instanceof HTMLElement)||i.tabIndex===-1)){var o=window.getComputedStyle(i);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}}}}},n.prototype.dispose=function(){this.disposables.dispose()},n}();function rX(n){return ct?n.browserEvent.metaKey:n.browserEvent.ctrlKey}function iX(n){return n.browserEvent.shiftKey}function oX(n){return n instanceof MouseEvent&&n.button===2}var nNe={isSelectionSingleChangeEvent:rX,isSelectionRangeChangeEvent:iX},sX={shouldOpen:function(n){return n instanceof MouseEvent?!oX(n):!0}},aX=function(){function n(e){this.list=e,this.disposables=new De,this.multipleSelectionSupport=e.options.multipleSelectionSupport!==!1,this.multipleSelectionSupport&&(this.multipleSelectionController=e.options.multipleSelectionController||nNe),this.openController=e.options.openController||sX,this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),Bv.addTarget(e.getHTMLElement())),e.onMouseClick(this.onPointer,this,this.disposables),e.onMouseMiddleClick(this.onPointer,this,this.disposables),e.onTap(this.onPointer,this,this.disposables)}return n.prototype.isSelectionSingleChangeEvent=function(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):ct?e.browserEvent.metaKey:e.browserEvent.ctrlKey},n.prototype.isSelectionRangeChangeEvent=function(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):e.browserEvent.shiftKey},n.prototype.isSelectionChangeEvent=function(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)},n.prototype.onMouseDown=function(e){document.activeElement!==e.browserEvent.target&&this.list.domFocus()},n.prototype.onContextMenu=function(e){var t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)},n.prototype.onPointer=function(e){if(this.mouseSupport&&!Zy(e.browserEvent.target)){var t=this.list.getFocus()[0],r=this.list.getSelection();t=t===void 0?r[0]:t;var i=e.index;if(typeof i>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent);return}if(this.multipleSelectionSupport&&this.isSelectionRangeChangeEvent(e))return this.changeSelection(e,t);if(this.multipleSelectionSupport&&this.isSelectionChangeEvent(e))return this.changeSelection(e,t);this.list.setFocus([i],e.browserEvent),oX(e.browserEvent)||(this.list.setSelection([i],e.browserEvent),this.openController.shouldOpen(e.browserEvent)&&this.list.open([i],e.browserEvent))}},n.prototype.onDoubleClick=function(e){if(!Zy(e.browserEvent.target)&&!(this.multipleSelectionSupport&&this.isSelectionChangeEvent(e))){var t=this.list.getFocus();this.list.setSelection(t,e.browserEvent),this.list.pin(t)}},n.prototype.changeSelection=function(e,t){var r=e.index;if(this.isSelectionRangeChangeEvent(e)&&t!==void 0){var i=Math.min(t,r),o=Math.max(t,r),s=eo(i,o+1),a=this.list.getSelection(),u=oNe(vR(a,[t]),t);if(u.length===0)return;var l=vR(s,sNe(a,u));this.list.setSelection(l,e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){var a=this.list.getSelection(),l=a.filter(function(d){return d!==r});this.list.setFocus([r]),a.length===l.length?this.list.setSelection(l.concat([r]),e.browserEvent):this.list.setSelection(l,e.browserEvent)}},n.prototype.dispose=function(){this.disposables.dispose()},n}(),uX=function(){function n(e,t){this.styleElement=e,this.selectorSuffix=t}return n.prototype.style=function(e){var t=this.selectorSuffix?"."+this.selectorSuffix:"",r=[];e.listFocusBackground&&(r.push(".monaco-list"+t+":focus .monaco-list-row.focused { background-color: "+e.listFocusBackground+"; }"),r.push(".monaco-list"+t+":focus .monaco-list-row.focused:hover { background-color: "+e.listFocusBackground+"; }")),e.listFocusForeground&&r.push(".monaco-list"+t+":focus .monaco-list-row.focused { color: "+e.listFocusForeground+"; }"),e.listActiveSelectionBackground&&(r.push(".monaco-list"+t+":focus .monaco-list-row.selected { background-color: "+e.listActiveSelectionBackground+"; }"),r.push(".monaco-list"+t+":focus .monaco-list-row.selected:hover { background-color: "+e.listActiveSelectionBackground+"; }")),e.listActiveSelectionForeground&&r.push(".monaco-list"+t+":focus .monaco-list-row.selected { color: "+e.listActiveSelectionForeground+"; }"),e.listFocusAndSelectionBackground&&r.push(`
				.monaco-drag-image,
				.monaco-list`+t+":focus .monaco-list-row.selected.focused { background-color: "+e.listFocusAndSelectionBackground+`; }
			`),e.listFocusAndSelectionForeground&&r.push(`
				.monaco-drag-image,
				.monaco-list`+t+":focus .monaco-list-row.selected.focused { color: "+e.listFocusAndSelectionForeground+`; }
			`),e.listInactiveFocusBackground&&(r.push(".monaco-list"+t+" .monaco-list-row.focused { background-color:  "+e.listInactiveFocusBackground+"; }"),r.push(".monaco-list"+t+" .monaco-list-row.focused:hover { background-color:  "+e.listInactiveFocusBackground+"; }")),e.listInactiveSelectionBackground&&(r.push(".monaco-list"+t+" .monaco-list-row.selected { background-color:  "+e.listInactiveSelectionBackground+"; }"),r.push(".monaco-list"+t+" .monaco-list-row.selected:hover { background-color:  "+e.listInactiveSelectionBackground+"; }")),e.listInactiveSelectionForeground&&r.push(".monaco-list"+t+" .monaco-list-row.selected { color: "+e.listInactiveSelectionForeground+"; }"),e.listHoverBackground&&r.push(".monaco-list"+t+":not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color:  "+e.listHoverBackground+"; }"),e.listHoverForeground&&r.push(".monaco-list"+t+" .monaco-list-row:hover:not(.selected):not(.focused) { color:  "+e.listHoverForeground+"; }"),e.listSelectionOutline&&r.push(".monaco-list"+t+" .monaco-list-row.selected { outline: 1px dotted "+e.listSelectionOutline+"; outline-offset: -1px; }"),e.listFocusOutline&&r.push(`
				.monaco-drag-image,
				.monaco-list`+t+":focus .monaco-list-row.focused { outline: 1px solid "+e.listFocusOutline+`; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&r.push(".monaco-list"+t+" .monaco-list-row.focused { outline: 1px dotted "+e.listInactiveFocusOutline+"; outline-offset: -1px; }"),e.listHoverOutline&&r.push(".monaco-list"+t+" .monaco-list-row:hover { outline: 1px dashed "+e.listHoverOutline+"; outline-offset: -1px; }"),e.listDropBackground&&r.push(`
				.monaco-list`+t+`.drop-target,
				.monaco-list`+t+" .monaco-list-row.drop-target { background-color: "+e.listDropBackground+` !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&r.push(".monaco-list-type-filter { background-color: "+e.listFilterWidgetBackground+" }"),e.listFilterWidgetOutline&&r.push(".monaco-list-type-filter { border: 1px solid "+e.listFilterWidgetOutline+"; }"),e.listFilterWidgetNoMatchesOutline&&r.push(".monaco-list-type-filter.no-matches { border: 1px solid "+e.listFilterWidgetNoMatchesOutline+"; }"),e.listMatchesShadow&&r.push(".monaco-list-type-filter { box-shadow: 1px 1px 1px "+e.listMatchesShadow+"; }");var i=r.join(`
`);i!==this.styleElement.innerHTML&&(this.styleElement.innerHTML=i)},n}(),rNe={listFocusBackground:Z.fromHex("#073655"),listActiveSelectionBackground:Z.fromHex("#0E639C"),listActiveSelectionForeground:Z.fromHex("#FFFFFF"),listFocusAndSelectionBackground:Z.fromHex("#094771"),listFocusAndSelectionForeground:Z.fromHex("#FFFFFF"),listInactiveSelectionBackground:Z.fromHex("#3F3F46"),listHoverBackground:Z.fromHex("#2A2D2E"),listDropBackground:Z.fromHex("#383B3D"),treeIndentGuidesStroke:Z.fromHex("#a9a9a9")},iNe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:function(){return null},onDragStart:function(){},onDragOver:function(){return!1},drop:function(){}},ariaRootRole:ES.TREE};function oNe(n,e){var t=n.indexOf(e);if(t===-1)return[];for(var r=[],i=t-1;i>=0&&n[i]===e-(t-i);)r.push(n[i--]);for(r.reverse(),i=t;i<n.length&&n[i]===e+(i-t);)r.push(n[i++]);return r}function vR(n,e){for(var t=[],r=0,i=0;r<n.length||i<e.length;)if(r>=n.length)t.push(e[i++]);else if(i>=e.length)t.push(n[r++]);else if(n[r]===e[i]){t.push(n[r]),r++,i++;continue}else n[r]<e[i]?t.push(n[r++]):t.push(e[i++]);return t}function sNe(n,e){for(var t=[],r=0,i=0;r<n.length||i<e.length;)if(r>=n.length)t.push(e[i++]);else if(i>=e.length)t.push(n[r++]);else if(n[r]===e[i]){r++,i++;continue}else n[r]<e[i]?t.push(n[r++]):i++;return t}var c9=function(n,e){return n-e},aNe=function(){function n(e,t){this._templateId=e,this.renderers=t}return Object.defineProperty(n.prototype,"templateId",{get:function(){return this._templateId},enumerable:!0,configurable:!0}),n.prototype.renderTemplate=function(e){return this.renderers.map(function(t){return t.renderTemplate(e)})},n.prototype.renderElement=function(e,t,r,i){for(var o=0,s=0,a=this.renderers;s<a.length;s++){var u=a[s];u.renderElement(e,t,r[o++],i)}},n.prototype.disposeElement=function(e,t,r,i){for(var o=0,s=0,a=this.renderers;s<a.length;s++){var u=a[s];u.disposeElement&&u.disposeElement(e,t,r[o],i),o+=1}},n.prototype.disposeTemplate=function(e){for(var t=0,r=0,i=this.renderers;r<i.length;r++){var o=i[r];o.disposeTemplate(e[t++])}},n}(),uNe=function(){function n(e){this.accessibilityProvider=e,this.templateId="a18n"}return n.prototype.renderTemplate=function(e){return e},n.prototype.renderElement=function(e,t,r){var i=this.accessibilityProvider.getAriaLabel(e);i?r.setAttribute("aria-label",i):r.removeAttribute("aria-label");var o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?r.setAttribute("aria-level",""+o):r.removeAttribute("aria-level")},n.prototype.disposeTemplate=function(e){},n}(),lNe=function(){function n(e,t){this.list=e,this.dnd=t}return n.prototype.getDragElements=function(e){var t=this.list.getSelectedElements(),r=t.indexOf(e)>-1?t:[e];return r},n.prototype.getDragURI=function(e){return this.dnd.getDragURI(e)},n.prototype.getDragLabel=function(e){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e)},n.prototype.onDragStart=function(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)},n.prototype.onDragOver=function(e,t,r,i){return this.dnd.onDragOver(e,t,r,i)},n.prototype.drop=function(e,t,r,i){this.dnd.drop(e,t,r,i)},n}(),lX=function(){function n(e,t,r,i){i===void 0&&(i=iNe),this._options=i,this.eventBufferer=new YP,this.disposables=new De,this._onDidOpen=new j,this.onDidOpen=this._onDidOpen.event,this._onPin=new j,this.didJustPressContextMenuKey=!1,this._onDidDispose=new j,this.onDidDispose=this._onDidDispose.event,this.focus=new QTe,this.selection=new tX("selected"),_r(i,rNe,!1);var o=[this.focus.renderer,this.selection.renderer];i.accessibilityProvider&&o.push(new uNe(i.accessibilityProvider)),r=r.map(function(u){return new aNe(u.templateId,o.concat([u]))});var s=DS({},i,{dnd:i.dnd&&new lNe(this,i.dnd)});if(this.view=new TTe(e,t,r,s),typeof i.ariaRole!="string"?this.view.domNode.setAttribute("role",ES.TREE):this.view.domNode.setAttribute("role",i.ariaRole),this.styleElement=pf(this.view.domNode),this.styleController=i.styleController||new uX(this.styleElement,this.view.domId),this.spliceable=new NTe([new l9(this.focus,this.view,i.identityProvider),new l9(this.selection,this.view,i.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.onDidFocus=We.map(pt(this.view.domNode,"focus",!0),function(){return null}),this.onDidBlur=We.map(pt(this.view.domNode,"blur",!0),function(){return null}),this.disposables.add(new tNe(this,this.view)),typeof i.keyboardSupport!="boolean"||i.keyboardSupport){var a=new JTe(this,this.view,i);this.disposables.add(a)}i.keyboardNavigationLabelProvider&&(this.typeLabelController=new eNe(this,this.view,i.keyboardNavigationLabelProvider),this.disposables.add(this.typeLabelController)),this.disposables.add(this.createMouseController(i)),this.onFocusChange(this._onFocusChange,this,this.disposables),this.onSelectionChange(this._onSelectionChange,this,this.disposables),i.ariaLabel&&this.view.domNode.setAttribute("aria-label",S("aria list","{0}. Use the navigation keys to navigate.",i.ariaLabel)),this.style(i)}return Object.defineProperty(n.prototype,"onFocusChange",{get:function(){var e=this;return We.map(this.eventBufferer.wrapEvent(this.focus.onChange),function(t){return e.toListEvent(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onSelectionChange",{get:function(){var e=this;return We.map(this.eventBufferer.wrapEvent(this.selection.onChange),function(t){return e.toListEvent(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"domId",{get:function(){return this.view.domId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMouseClick",{get:function(){return this.view.onMouseClick},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMouseDblClick",{get:function(){return this.view.onMouseDblClick},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMouseMiddleClick",{get:function(){return this.view.onMouseMiddleClick},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMouseDown",{get:function(){return this.view.onMouseDown},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onTouchStart",{get:function(){return this.view.onTouchStart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onTap",{get:function(){return this.view.onTap},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onContextMenu",{get:function(){var e=this,t=We.chain(pt(this.view.domNode,"keydown")).map(function(o){return new Sn(o)}).filter(function(o){return e.didJustPressContextMenuKey=o.keyCode===58||o.shiftKey&&o.keyCode===68}).filter(function(o){return o.preventDefault(),o.stopPropagation(),!1}).event,r=We.chain(pt(this.view.domNode,"keyup")).filter(function(){var o=e.didJustPressContextMenuKey;return e.didJustPressContextMenuKey=!1,o}).filter(function(){return e.getFocus().length>0&&!!e.view.domElement(e.getFocus()[0])}).map(function(o){var s=e.getFocus()[0],a=e.view.element(s),u=e.view.domElement(s);return{index:s,element:a,anchor:u,browserEvent:o}}).event,i=We.chain(this.view.onContextMenu).filter(function(){return!e.didJustPressContextMenuKey}).map(function(o){var s=o.element,a=o.index,u=o.browserEvent;return{element:s,index:a,anchor:{x:u.clientX+1,y:u.clientY},browserEvent:u}}).event;return We.any(t,r,i)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onKeyDown",{get:function(){return pt(this.view.domNode,"keydown")},enumerable:!0,configurable:!0}),n.prototype.createMouseController=function(e){return new aX(this)},n.prototype.updateOptions=function(e){e===void 0&&(e={}),this._options=DS({},this._options,e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options)},Object.defineProperty(n.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),n.prototype.splice=function(e,t,r){var i=this;if(r===void 0&&(r=[]),e<0||e>this.view.length)throw new Error("Invalid start index: "+e);if(t<0)throw new Error("Invalid delete count: "+t);t===0&&r.length===0||this.eventBufferer.bufferEvents(function(){return i.spliceable.splice(e,t,r)})},n.prototype.rerender=function(){this.view.rerender()},n.prototype.element=function(e){return this.view.element(e)},Object.defineProperty(n.prototype,"length",{get:function(){return this.view.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"contentHeight",{get:function(){return this.view.contentHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollTop",{get:function(){return this.view.getScrollTop()},set:function(e){this.view.setScrollTop(e)},enumerable:!0,configurable:!0}),n.prototype.domFocus=function(){this.view.domNode.focus()},n.prototype.layout=function(e,t){this.view.layout(e,t)},n.prototype.setSelection=function(e,t){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o<0||o>=this.length)throw new Error("Invalid index "+o)}this.selection.set(e,t)},n.prototype.getSelection=function(){return this.selection.get()},n.prototype.getSelectedElements=function(){var e=this;return this.getSelection().map(function(t){return e.view.element(t)})},n.prototype.setFocus=function(e,t){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o<0||o>=this.length)throw new Error("Invalid index "+o)}this.focus.set(e,t)},n.prototype.focusNext=function(e,t,r,i){if(e===void 0&&(e=1),t===void 0&&(t=!1),this.length!==0){var o=this.focus.get(),s=this.findNextIndex(o.length>0?o[0]+e:0,t,i);s>-1&&this.setFocus([s],r)}},n.prototype.focusPrevious=function(e,t,r,i){if(e===void 0&&(e=1),t===void 0&&(t=!1),this.length!==0){var o=this.focus.get(),s=this.findPreviousIndex(o.length>0?o[0]-e:0,t,i);s>-1&&this.setFocus([s],r)}},n.prototype.focusNextPage=function(e,t){var r=this,i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;var o=this.view.element(i),s=this.getFocusedElements()[0];if(s!==o){var a=this.findPreviousIndex(i,!1,t);a>-1&&s!==this.view.element(a)?this.setFocus([a],e):this.setFocus([i],e)}else{var u=this.view.getScrollTop();this.view.setScrollTop(u+this.view.renderHeight-this.view.elementHeight(i)),this.view.getScrollTop()!==u&&setTimeout(function(){return r.focusNextPage(e,t)},0)}},n.prototype.focusPreviousPage=function(e,t){var r=this,i,o=this.view.getScrollTop();o===0?i=this.view.indexAt(o):i=this.view.indexAfter(o-1);var s=this.view.element(i),a=this.getFocusedElements()[0];if(a!==s){var u=this.findNextIndex(i,!1,t);u>-1&&a!==this.view.element(u)?this.setFocus([u],e):this.setFocus([i],e)}else{var l=o;this.view.setScrollTop(o-this.view.renderHeight),this.view.getScrollTop()!==l&&setTimeout(function(){return r.focusPreviousPage(e,t)},0)}},n.prototype.focusLast=function(e,t){if(this.length!==0){var r=this.findPreviousIndex(this.length-1,!1,t);r>-1&&this.setFocus([r],e)}},n.prototype.focusFirst=function(e,t){if(this.length!==0){var r=this.findNextIndex(0,!1,t);r>-1&&this.setFocus([r],e)}},n.prototype.findNextIndex=function(e,t,r){t===void 0&&(t=!1);for(var i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!r||r(this.element(e)))return e;e++}return-1},n.prototype.findPreviousIndex=function(e,t,r){t===void 0&&(t=!1);for(var i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!r||r(this.element(e)))return e;e--}return-1},n.prototype.getFocus=function(){return this.focus.get()},n.prototype.getFocusedElements=function(){var e=this;return this.getFocus().map(function(t){return e.view.element(t)})},n.prototype.reveal=function(e,t){if(e<0||e>=this.length)throw new Error("Invalid index "+e);var r=this.view.getScrollTop(),i=this.view.elementTop(e),o=this.view.elementHeight(e);if(yl(t)){var s=o-this.view.renderHeight;this.view.setScrollTop(s*la(t,0,1)+i)}else{var a=i+o,u=r+this.view.renderHeight;i<r?this.view.setScrollTop(i):a>=u&&this.view.setScrollTop(a-this.view.renderHeight)}},n.prototype.getRelativeTop=function(e){if(e<0||e>=this.length)throw new Error("Invalid index "+e);var t=this.view.getScrollTop(),r=this.view.elementTop(e),i=this.view.elementHeight(e);if(r<t||r+i>t+this.view.renderHeight)return null;var o=i-this.view.renderHeight;return Math.abs((t-r)/o)},n.prototype.getHTMLElement=function(){return this.view.domNode},n.prototype.open=function(e,t){for(var r=this,i=0,o=e;i<o.length;i++){var s=o[i];if(s<0||s>=this.length)throw new Error("Invalid index "+s)}this._onDidOpen.fire({indexes:e,elements:e.map(function(a){return r.view.element(a)}),browserEvent:t})},n.prototype.pin=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(i<0||i>=this.length)throw new Error("Invalid index "+i)}this._onPin.fire(e)},n.prototype.style=function(e){this.styleController.style(e)},n.prototype.toListEvent=function(e){var t=this,r=e.indexes,i=e.browserEvent;return{indexes:r,elements:r.map(function(o){return t.view.element(o)}),browserEvent:i}},n.prototype._onFocusChange=function(){var e=this.focus.get();e.length>0?this.view.domNode.setAttribute("aria-activedescendant",this.view.getElementDomId(e[0])):this.view.domNode.removeAttribute("aria-activedescendant"),this.view.domNode.setAttribute("role","tree"),vt(this.view.domNode,"element-focused",e.length>0)},n.prototype._onSelectionChange=function(){var e=this.selection.get();vt(this.view.domNode,"selection-none",e.length===0),vt(this.view.domNode,"selection-single",e.length===1),vt(this.view.domNode,"selection-multiple",e.length>1)},n.prototype.dispose=function(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidOpen.dispose(),this._onPin.dispose(),this._onDidDispose.dispose()},r1([Ts],n.prototype,"onFocusChange",null),r1([Ts],n.prototype,"onSelectionChange",null),r1([Ts],n.prototype,"onContextMenu",null),n}();function cX(n){return typeof n=="object"&&"visibility"in n&&"data"in n}function mR(n){switch(n){case!0:return 1;case!1:return 0;default:return n}}function fX(n){var e=n.element,t=n.collapsed,r=Nr.map(Nr.fromArray(n.children),fX);return{element:e,children:r,collapsed:t}}var cNe=function(){function n(e,t,r){r===void 0&&(r={}),this.list=e,this.rootRef=[],this.eventBufferer=new YP,this._onDidChangeCollapseState=new j,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new j,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new j,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof r.collapseByDefault>"u"?!1:r.collapseByDefault,this.filter=r.filter,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.root={parent:void 0,element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visible:!0,filterData:void 0}}return n.prototype.splice=function(e,t,r,i,o){var s,a=this;if(e.length===0)throw new Error("Invalid tree location");for(var u=this.getParentNodeWithListIndex(e),l=u.parentNode,f=u.listIndex,h=u.revealed,d=u.visible,g=[],v=Nr.map(Nr.from(r),function(z){return a.createTreeNode(z,l,l.visible?1:0,h,g,i)}),m=e[e.length-1],y=0,b=m;b>=0&&b<l.children.length;b--){var C=l.children[b];if(C.visible){y=C.visibleChildIndex;break}}var E=[],D=0,k=0;Nr.forEach(v,function(z){E.push(z),k+=z.renderNodeCount,z.visible&&(z.visibleChildIndex=y+D++)});for(var I=(s=l.children).splice.apply(s,[m,t].concat(E)),T=0,A=0,M=I;A<M.length;A++){var C=M[A];C.visible&&T++}if(T!==0)for(var b=m+E.length;b<l.children.length;b++){var C=l.children[b];C.visible&&(C.visibleChildIndex-=T)}if(l.visibleChildrenCount+=D-T,h&&d){var L=I.reduce(function(z,K){return z+K.renderNodeCount},0);this._updateAncestorsRenderNodeCount(l,k-L),this.list.splice(f,L,g)}if(I.length>0&&o){var F=function(z){o(z),z.children.forEach(F)};I.forEach(F)}var W=Nr.map(Nr.fromArray(I),fX);return this._onDidSplice.fire({insertedNodes:E,deletedNodes:I}),W},n.prototype.rerender=function(e){if(e.length===0)throw new Error("Invalid tree location");var t=this.getTreeNodeWithListIndex(e),r=t.node,i=t.listIndex,o=t.revealed;o&&this.list.splice(i,1,[r])},n.prototype.getListIndex=function(e){var t=this.getTreeNodeWithListIndex(e),r=t.listIndex,i=t.visible,o=t.revealed;return i&&o?r:-1},n.prototype.getListRenderCount=function(e){return this.getTreeNode(e).renderNodeCount},n.prototype.isCollapsed=function(e){return this.getTreeNode(e).collapsed},n.prototype.setCollapsed=function(e,t,r){var i=this,o=this.getTreeNode(e);return typeof t>"u"&&(t=!o.collapsed),this.eventBufferer.bufferEvents(function(){return i._setCollapsed(e,t,r)})},n.prototype._setCollapsed=function(e,t,r){var i=this.getTreeNodeWithListIndex(e),o=i.node,s=i.listIndex,a=i.revealed,u=this._setListNodeCollapsed(o,s,a,t,r||!1);if(o!==this.root&&this.autoExpandSingleChildren&&!t&&!r){for(var l=-1,f=0;f<o.children.length;f++){var h=o.children[f];if(h.visible)if(l>-1){l=-1;break}else l=f}l>-1&&this._setCollapsed(e.concat([l]),!1,!1)}return u},n.prototype._setListNodeCollapsed=function(e,t,r,i,o){var s=this._setNodeCollapsed(e,i,o,!1);if(!r||!e.visible)return s;var a=e.renderNodeCount,u=this.updateNodeAfterCollapseChange(e),l=a-(t===-1?0:1);return this.list.splice(t+1,l,u.slice(1)),s},n.prototype._setNodeCollapsed=function(e,t,r,i){var o=e.collapsible&&e.collapsed!==t;if(e.collapsible&&(e.collapsed=t,o&&this._onDidChangeCollapseState.fire({node:e,deep:i})),r)for(var s=0,a=e.children;s<a.length;s++){var u=a[s];o=this._setNodeCollapsed(u,t,!0,!0)||o}return o},n.prototype.expandTo=function(e){var t=this;this.eventBufferer.bufferEvents(function(){for(var r=t.getTreeNode(e);r.parent;)r=r.parent,e=e.slice(0,e.length-1),r.collapsed&&t._setCollapsed(e,!1)})},n.prototype.refilter=function(){var e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)},n.prototype.createTreeNode=function(e,t,r,i,o,s){var a=this,u={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visible:!0,filterData:void 0},l=this._filterNode(u,r);i&&o.push(u);var f=Nr.from(e.children),h=i&&l!==0&&!u.collapsed,d=Nr.map(f,function(m){return a.createTreeNode(m,u,l,h,o,s)}),g=0,v=1;return Nr.forEach(d,function(m){u.children.push(m),v+=m.renderNodeCount,m.visible&&(m.visibleChildIndex=g++)}),u.collapsible=u.collapsible||u.children.length>0,u.visibleChildrenCount=g,u.visible=l===2?g>0:l===1,u.visible?u.collapsed||(u.renderNodeCount=v):(u.renderNodeCount=0,i&&o.pop()),s&&s(u),u},n.prototype.updateNodeAfterCollapseChange=function(e){var t=e.renderNodeCount,r=[];return this._updateNodeAfterCollapseChange(e,r),this._updateAncestorsRenderNodeCount(e.parent,r.length-t),r},n.prototype._updateNodeAfterCollapseChange=function(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(var r=0,i=e.children;r<i.length;r++){var o=i[r];e.renderNodeCount+=this._updateNodeAfterCollapseChange(o,t)}return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount},n.prototype.updateNodeAfterFilterChange=function(e){var t=e.renderNodeCount,r=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,r),this._updateAncestorsRenderNodeCount(e.parent,r.length-t),r},n.prototype._updateNodeAfterFilterChange=function(e,t,r,i){i===void 0&&(i=!0);var o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,!1;i&&r.push(e)}var s=r.length;e.renderNodeCount=e===this.root?0:1;var a=!1;if(!e.collapsed||o!==0){for(var u=0,l=0,f=e.children;l<f.length;l++){var h=f[l];a=this._updateNodeAfterFilterChange(h,o,r,i&&!e.collapsed)||a,h.visible&&(h.visibleChildIndex=u++)}e.visibleChildrenCount=u}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1),e.visible?e.collapsed||(e.renderNodeCount+=r.length-s):(e.renderNodeCount=0,i&&r.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible},n.prototype._updateAncestorsRenderNodeCount=function(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent},n.prototype._filterNode=function(e,t){var r=this.filter?this.filter.filter(e.element,t):1;return typeof r=="boolean"?(e.filterData=void 0,r?1:0):cX(r)?(e.filterData=r.data,mR(r.visibility)):(e.filterData=void 0,mR(r))},n.prototype.getTreeNode=function(e,t){if(t===void 0&&(t=this.root),!e||e.length===0)return t;var r=e[0],i=e.slice(1);if(r<0||r>t.children.length)throw new Error("Invalid tree location");return this.getTreeNode(i,t.children[r])},n.prototype.getTreeNodeWithListIndex=function(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};var t=this.getParentNodeWithListIndex(e),r=t.parentNode,i=t.listIndex,o=t.revealed,s=t.visible,a=e[e.length-1];if(a<0||a>r.children.length)throw new Error("Invalid tree location");var u=r.children[a];return{node:u,listIndex:i,revealed:o,visible:s&&u.visible}},n.prototype.getParentNodeWithListIndex=function(e,t,r,i,o){t===void 0&&(t=this.root),r===void 0&&(r=0),i===void 0&&(i=!0),o===void 0&&(o=!0);var s=e[0],a=e.slice(1);if(s<0||s>t.children.length)throw new Error("Invalid tree location");for(var u=0;u<s;u++)r+=t.children[u].renderNodeCount;return i=i&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:r,revealed:i,visible:o}:this.getParentNodeWithListIndex(a,t.children[s],r+1,i,o)},n.prototype.getNode=function(e){return e===void 0&&(e=[]),this.getTreeNode(e)},n.prototype.getNodeLocation=function(e){for(var t=[];e.parent;)t.push(e.parent.children.indexOf(e)),e=e.parent;return t.reverse()},n.prototype.getParentNodeLocation=function(e){return e.length<=1?[]:zye(e)[0]},n}(),hX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iu=function(){return iu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},iu.apply(this,arguments)};function XT(n){if(n instanceof Gy){var e=n.elements;return new Gy(e.map(function(t){return t.element}))}return n}var fNe=function(){function n(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=te.None}return n.prototype.getDragURI=function(e){return this.dnd.getDragURI(e.element)},n.prototype.getDragLabel=function(e){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(function(t){return t.element}))},n.prototype.onDragStart=function(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(XT(e),t)},n.prototype.onDragOver=function(e,t,r,i,o){var s=this;o===void 0&&(o=!0);var a=this.dnd.onDragOver(XT(e),t&&t.element,r,i),u=this.autoExpandNode!==t;if(u&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(u&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=zg(function(){var C=s.modelProvider(),E=C.getNodeLocation(t);C.isCollapsed(E)&&C.setCollapsed(E,!1),s.autoExpandNode=void 0},500)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"){if(!o){var l=typeof a=="boolean"?a:a.accept,f=typeof a=="boolean"?void 0:a.effect;return{accept:l,effect:f,feedback:[r]}}return a}if(a.bubble===1){var h=t.parent,d=this.modelProvider(),g=h&&d.getListIndex(d.getNodeLocation(h));return this.onDragOver(e,h,g,i,!1)}var v=this.modelProvider(),m=v.getNodeLocation(t),y=v.getListIndex(m),b=v.getListRenderCount(m);return iu({},a,{feedback:eo(y,y+b)})},n.prototype.drop=function(e,t,r,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(XT(e),t&&t.element,r,i)},n}();function hNe(n,e){return e&&iu({},e,{identityProvider:e.identityProvider&&{getId:function(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new fNe(n,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent:function(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(iu({},t,{element:t.element}))},isSelectionRangeChangeEvent:function(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(iu({},t,{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&{getAriaLabel:function(t){return e.accessibilityProvider.getAriaLabel(t.element)},getAriaLevel:function(t){return t.depth}},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&iu({},e.keyboardNavigationLabelProvider,{getKeyboardNavigationLabel:function(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation,ariaProvider:{getSetSize:function(t){return t.parent.visibleChildrenCount},getPosInSet:function(t){return t.visibleChildIndex+1}}})}var dX=function(){function n(e){this.delegate=e}return n.prototype.getHeight=function(e){return this.delegate.getHeight(e.element)},n.prototype.getTemplateId=function(e){return this.delegate.getTemplateId(e.element)},n.prototype.hasDynamicHeight=function(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)},n.prototype.setDynamicHeight=function(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)},n}(),rd;(function(n){n.None="none",n.OnHover="onHover",n.Always="always"})(rd||(rd={}));var dNe=function(){function n(e,t){var r=this;t===void 0&&(t=[]),this.onDidChange=e,this._elements=t,this.disposables=new De,e(function(i){return r._elements=i},null,this.disposables)}return Object.defineProperty(n.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this.disposables.dispose()},n}(),pNe=function(){function n(e,t,r,i){i===void 0&&(i={}),this.renderer=e,this.activeNodes=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=n.DefaultIndent,this._renderIndentGuides=rd.None,this.renderedIndentGuides=new mTe,this.activeIndentNodes=new Set,this.indentGuidesDisposable=te.None,this.disposables=[],this.templateId=e.templateId,this.updateOptions(i),We.map(t,function(o){return o.node})(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}return n.prototype.updateOptions=function(e){if(e===void 0&&(e={}),typeof e.indent<"u"&&(this.indent=la(e.indent,0,40)),typeof e.renderIndentGuides<"u"){var t=e.renderIndentGuides;if(t!==this._renderIndentGuides)if(this._renderIndentGuides=t,t){var r=new De;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,r),this.indentGuidesDisposable=r,this._onDidChangeActiveNodes(this.activeNodes.elements)}else this.indentGuidesDisposable.dispose()}},n.prototype.renderTemplate=function(e){var t=ce(e,ke(".monaco-tl-row")),r=ce(t,ke(".monaco-tl-indent")),i=ce(t,ke(".monaco-tl-twistie")),o=ce(t,ke(".monaco-tl-contents")),s=this.renderer.renderTemplate(o);return{container:e,indent:r,twistie:i,indentGuidesDisposable:te.None,templateData:s}},n.prototype.renderElement=function(e,t,r,i){typeof i=="number"&&(this.renderedNodes.set(e,{templateData:r,height:i}),this.renderedElements.set(e.element,e));var o=n.DefaultIndent+(e.depth-1)*this.indent;r.twistie.style.marginLeft=o+"px",r.indent.style.width=o+this.indent-16+"px",this.renderTwistie(e,r),typeof i=="number"&&this.renderIndentGuides(e,r),this.renderer.renderElement(e,t,r.templateData,i)},n.prototype.disposeElement=function(e,t,r,i){r.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,r.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))},n.prototype.disposeTemplate=function(e){this.renderer.disposeTemplate(e.templateData)},n.prototype.onDidChangeTwistieState=function(e){var t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)},n.prototype.onDidChangeNodeTwistieState=function(e){var t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))},n.prototype.renderTwistie=function(e,t){this.renderer.renderTwistie&&this.renderer.renderTwistie(e.element,t.twistie),vt(t.twistie,"collapsible",e.collapsible),vt(t.twistie,"collapsed",e.collapsible&&e.collapsed),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")},n.prototype.renderIndentGuides=function(e,t){var r=this;if(ms(t.indent),t.indentGuidesDisposable.dispose(),this._renderIndentGuides!==rd.None){for(var i=new De,o=e,s=function(){var u=o.parent,l=ke(".indent-guide",{style:"width: "+a.indent+"px"});a.activeIndentNodes.has(u)&&de(l,"active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),a.renderedIndentGuides.add(u,l),i.add(en(function(){return r.renderedIndentGuides.delete(u,l)})),o=u},a=this;o.parent&&o.parent.parent;)s();t.indentGuidesDisposable=i}},n.prototype._onDidChangeActiveNodes=function(e){var t=this;if(this._renderIndentGuides!==rd.None){var r=new Set;e.forEach(function(i){i.collapsible&&i.children.length>0&&!i.collapsed?r.add(i):i.parent&&r.add(i.parent)}),this.activeIndentNodes.forEach(function(i){r.has(i)||t.renderedIndentGuides.forEach(i,function(o){return qe(o,"active")})}),r.forEach(function(i){t.activeIndentNodes.has(i)||t.renderedIndentGuides.forEach(i,function(o){return de(o,"active")})}),this.activeIndentNodes=r}},n.prototype.dispose=function(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),this.disposables=Ue(this.disposables)},n.DefaultIndent=8,n}(),gNe=function(){function n(e,t,r){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=r,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=[],e.onWillRefilter(this.reset,this,this.disposables)}return Object.defineProperty(n.prototype,"totalCount",{get:function(){return this._totalCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matchCount",{get:function(){return this._matchCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pattern",{set:function(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()},enumerable:!0,configurable:!0}),n.prototype.filter=function(e,t){if(this._filter){var r=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return r;var i=void 0;if(typeof r=="boolean"?i=r?1:0:cX(r)?i=mR(r.visibility):i=r,i===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:Ea.Default,visibility:!0};var o=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=o&&o.toString();if(typeof s>"u")return{data:Ea.Default,visibility:!0};var a=Yy(this._pattern,this._lowercasePattern,0,s,s.toLowerCase(),0,!0);return a?(this._matchCount++,{data:a,visibility:!0}):this.tree.options.filterOnType?2:{data:Ea.Default,visibility:!0}},n.prototype.reset=function(){this._totalCount=0,this._matchCount=0},n.prototype.dispose=function(){this.disposables=Ue(this.disposables)},n}(),vNe=function(){function n(e,t,r,i,o){this.tree=e,this.view=r,this.filter=i,this.keyboardNavigationLabelProvider=o,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new j,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new j,this.enabledDisposables=[],this.disposables=[],this.domNode=ke(".monaco-list-type-filter."+this.positionClassName),this.domNode.draggable=!0,pt(this.domNode,"dragstart")(this.onDragStart,this,this.disposables),this.messageDomNode=ce(r.getHTMLElement(),ke(".monaco-list-type-filter-message")),this.labelDomNode=ce(this.domNode,ke("span.label"));var s=ce(this.domNode,ke(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=ce(s,ke("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitle(),pt(this.filterOnTypeDomNode,"input")(this.onDidChangeFilterOnType,this,this.disposables),this.clearDomNode=ce(s,ke("button.clear")),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=S("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}return Object.defineProperty(n.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pattern",{get:function(){return this._pattern},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterOnType",{get:function(){return this._filterOnType},enumerable:!0,configurable:!0}),n.prototype.updateOptions=function(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")},n.prototype.enable=function(){var e=this;if(!this._enabled){var t=this.keyboardNavigationLabelProvider.mightProducePrintableCharacter?function(o){return e.keyboardNavigationLabelProvider.mightProducePrintableCharacter(o)}:function(o){return nX(o)},r=We.chain(pt(this.view.getHTMLElement(),"keydown")).filter(function(o){return!E2(o.target)||o.target===e.filterOnTypeDomNode}).map(function(o){return new Sn(o)}).filter(this.keyboardNavigationEventFilter||function(){return!0}).filter(function(){return e.automaticKeyboardNavigation||e.triggered}).filter(function(o){return t(o)||(e.pattern.length>0||e.triggered)&&(o.keyCode===9||o.keyCode===1)&&!o.altKey&&!o.ctrlKey&&!o.metaKey||o.keyCode===1&&(ct?o.altKey&&!o.metaKey:o.ctrlKey)&&!o.shiftKey}).forEach(function(o){o.stopPropagation(),o.preventDefault()}).event,i=pt(this.clearDomNode,"click");We.chain(We.any(r,i)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}},n.prototype.disable=function(){this._enabled&&(this.domNode.remove(),this.enabledDisposables=Ue(this.enabledDisposables),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)},n.prototype.onEventOrInput=function(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(ct?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)},n.prototype.onInput=function(e){var t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,function(o){return!Ea.isDefault(o.filterData)});var r=this.tree.getFocus();if(r.length>0){var i=r[0];this.tree.getRelativeTop(i)===null&&this.tree.reveal(i,.5)}this.render(),e||(this.triggered=!1)},n.prototype.onDragStart=function(){var e=this,t=this.view.getHTMLElement(),r=Wr(t).left,i=t.clientWidth,o=i/2,s=this.domNode.clientWidth,a=[],u=this.positionClassName,l=function(){switch(u){case"nw":e.domNode.style.top="4px",e.domNode.style.left="4px";break;case"ne":e.domNode.style.top="4px",e.domNode.style.left=i-s-6+"px";break}},f=function(d){d.preventDefault();var g=d.screenX-r;d.dataTransfer&&(d.dataTransfer.dropEffect="none"),g<o?u="nw":u="ne",l()},h=function(){e.positionClassName=u,e.domNode.className="monaco-list-type-filter "+e.positionClassName,e.domNode.style.top=null,e.domNode.style.left=null,Ue(a)};l(),qe(this.domNode,u),de(this.domNode,"dragging"),a.push(en(function(){return qe(e.domNode,"dragging")})),pt(document,"dragover")(f,null,a),pt(this.domNode,"dragend")(h,null,a),ns.CurrentDragAndDropData=new xTe("vscode-ui"),a.push(en(function(){return ns.CurrentDragAndDropData=void 0}))},n.prototype.onDidSpliceModel=function(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())},n.prototype.onDidChangeFilterOnType=function(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitle()},n.prototype.updateFilterOnTypeTitle=function(){this.filterOnType?this.filterOnTypeDomNode.title=S("disable filter on type","Disable Filter on Type"):this.filterOnTypeDomNode.title=S("enable filter on type","Enable Filter on Type")},n.prototype.render=function(){var e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=S("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerHTML="",this._empty=!1),vt(this.domNode,"no-matches",e),this.domNode.title=S("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?""+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)},n.prototype.shouldAllowFocus=function(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Ea.isDefault(e.filterData)},n.prototype.dispose=function(){this.disable(),this._onDidChangePattern.dispose(),this.disposables=Ue(this.disposables)},n}();function E2(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}function mNe(n){return{elements:n.elements.map(function(e){return e.element}),browserEvent:n.browserEvent}}function i1(n,e){e(n),n.children.forEach(function(t){return i1(t,e)})}var f9=function(){function n(e){this.identityProvider=e,this.nodes=[],this._onDidChange=new j,this.onDidChange=this._onDidChange.event}return Object.defineProperty(n.prototype,"nodeSet",{get:function(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet},enumerable:!0,configurable:!0}),n.prototype.set=function(e,t){hf(this.nodes,e)||this._set(e,!1,t)},n.prototype._set=function(e,t,r){if(this.nodes=e.slice(),this.elements=void 0,this._nodeSet=void 0,!t){var i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:r})}},n.prototype.get=function(){return this.elements||(this.elements=this.nodes.map(function(e){return e.element})),this.elements.slice()},n.prototype.getNodes=function(){return this.nodes},n.prototype.has=function(e){return this.nodeSet.has(e)},n.prototype.onDidModelSplice=function(e){var t=this,r=e.insertedNodes,i=e.deletedNodes;if(!this.identityProvider){var o=this.createNodeSet(),s=function(E){return o.delete(E)};i.forEach(function(E){return i1(E,s)}),this.set(vF(o));return}var a=new Set,u=function(E){return a.add(t.identityProvider.getId(E.element).toString())};i.forEach(function(E){return i1(E,u)});var l=new Map,f=function(E){return l.set(t.identityProvider.getId(E.element).toString(),E)};r.forEach(function(E){return i1(E,f)});for(var h=[],d=!0,g=0,v=this.nodes;g<v.length;g++){var m=v[g],y=this.identityProvider.getId(m.element).toString(),b=a.has(y);if(!b)h.push(m);else{var C=l.get(y);C?h.push(C):d=!1}}this._set(h,d)},n.prototype.createNodeSet=function(){for(var e=new Set,t=0,r=this.nodes;t<r.length;t++){var i=r[t];e.add(i)}return e},n}(),_Ne=function(n){hX(e,n);function e(t,r){var i=n.call(this,t)||this;return i.tree=r,i}return e.prototype.onPointer=function(t){if(!E2(t.browserEvent.target)){var r=t.element;if(!r)return n.prototype.onPointer.call(this,t);if(this.isSelectionRangeChangeEvent(t)||this.isSelectionSingleChangeEvent(t))return n.prototype.onPointer.call(this,t);var i=La(t.browserEvent.target,"monaco-tl-twistie");if(!this.tree.openOnSingleClick&&t.browserEvent.detail!==2&&!i)return n.prototype.onPointer.call(this,t);var o=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(r.element):o=!!this.tree.expandOnlyOnTwistieClick,o&&!i)return n.prototype.onPointer.call(this,t);var s=this.tree.model,a=s.getNodeLocation(r),u=t.browserEvent.altKey;s.setCollapsed(a,void 0,u),!(o&&i)&&n.prototype.onPointer.call(this,t)}},e.prototype.onDoubleClick=function(t){var r=La(t.browserEvent.target,"monaco-tl-twistie");r||n.prototype.onDoubleClick.call(this,t)},e}(aX),yNe=function(n){hX(e,n);function e(t,r,i,o,s,a){var u=n.call(this,t,r,i,a)||this;return u.focusTrait=o,u.selectionTrait=s,u}return e.prototype.createMouseController=function(t){return new _Ne(this,t.tree)},e.prototype.splice=function(t,r,i){var o=this;if(i===void 0&&(i=[]),n.prototype.splice.call(this,t,r,i),i.length!==0){var s=[],a=[];i.forEach(function(u,l){o.focusTrait.has(u)&&s.push(t+l),o.selectionTrait.has(u)&&a.push(t+l)}),s.length>0&&n.prototype.setFocus.call(this,G5(n.prototype.getFocus.call(this).concat(s))),a.length>0&&n.prototype.setSelection.call(this,G5(n.prototype.getSelection.call(this).concat(a)))}},e.prototype.setFocus=function(t,r,i){var o=this;i===void 0&&(i=!1),n.prototype.setFocus.call(this,t,r),i||this.focusTrait.set(t.map(function(s){return o.element(s)}),r)},e.prototype.setSelection=function(t,r,i){var o=this;i===void 0&&(i=!1),n.prototype.setSelection.call(this,t,r),i||this.selectionTrait.set(t.map(function(s){return o.element(s)}),r)},e}(lX),pX=function(){function n(e,t,r,i){var o,s=this;i===void 0&&(i={}),this._options=i,this.eventBufferer=new YP,this.disposables=[],this._onWillRefilter=new j,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new j;var a=new dX(t),u=new qr,l=new qr,f=new dNe(l.event);this.disposables.push(f),this.renderers=r.map(function(g){return new pNe(g,u.event,f,i)}),(o=this.disposables).push.apply(o,this.renderers);var h;if(i.keyboardNavigationLabelProvider&&(h=new gNe(this,i.keyboardNavigationLabelProvider,i.filter),i=iu({},i,{filter:h}),this.disposables.push(h)),this.focus=new f9(i.identityProvider),this.selection=new f9(i.identityProvider),this.view=new yNe(e,a,this.renderers,this.focus,this.selection,iu({},hNe(function(){return s.model},i),{tree:this})),this.model=this.createModel(this.view,i),u.input=this.model.onDidChangeCollapseState,this.model.onDidSplice(function(g){s.focus.onDidModelSplice(g),s.selection.onDidModelSplice(g)},null,this.disposables),l.input=We.map(We.any(this.focus.onDidChange,this.selection.onDidChange,this.model.onDidSplice),function(){return s.focus.getNodes().concat(s.selection.getNodes())}),i.keyboardSupport!==!1){var d=We.chain(this.view.onKeyDown).filter(function(g){return!E2(g.target)}).map(function(g){return new Sn(g)});d.filter(function(g){return g.keyCode===15}).on(this.onLeftArrow,this,this.disposables),d.filter(function(g){return g.keyCode===17}).on(this.onRightArrow,this,this.disposables),d.filter(function(g){return g.keyCode===10}).on(this.onSpace,this,this.disposables)}i.keyboardNavigationLabelProvider&&(this.typeFilterController=new vNe(this,this.model,this.view,h,i.keyboardNavigationLabelProvider),this.focusNavigationFilter=function(g){return s.typeFilterController.shouldAllowFocus(g)},this.disposables.push(this.typeFilterController)),this.styleElement=pf(this.view.getHTMLElement()),vt(this.getHTMLElement(),"always",this._options.renderIndentGuides===rd.Always)}return Object.defineProperty(n.prototype,"onDidChangeFocus",{get:function(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidChangeSelection",{get:function(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidOpen",{get:function(){return We.map(this.view.onDidOpen,mNe)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidFocus",{get:function(){return this.view.onDidFocus},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidChangeCollapseState",{get:function(){return this.model.onDidChangeCollapseState},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"openOnSingleClick",{get:function(){return typeof this._options.openOnSingleClick>"u"?!0:this._options.openOnSingleClick},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"expandOnlyOnTwistieClick",{get:function(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!1:this._options.expandOnlyOnTwistieClick},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidDispose",{get:function(){return this.view.onDidDispose},enumerable:!0,configurable:!0}),n.prototype.updateOptions=function(e){e===void 0&&(e={}),this._options=iu({},this._options,e);for(var t=0,r=this.renderers;t<r.length;t++){var i=r[t];i.updateOptions(e)}this.view.updateOptions({enableKeyboardNavigation:this._options.simpleKeyboardNavigation,automaticKeyboardNavigation:this._options.automaticKeyboardNavigation}),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),vt(this.getHTMLElement(),"always",this._options.renderIndentGuides===rd.Always)},Object.defineProperty(n.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),n.prototype.getHTMLElement=function(){return this.view.getHTMLElement()},Object.defineProperty(n.prototype,"scrollTop",{get:function(){return this.view.scrollTop},set:function(e){this.view.scrollTop=e},enumerable:!0,configurable:!0}),n.prototype.domFocus=function(){this.view.domFocus()},n.prototype.layout=function(e,t){this.view.layout(e,t)},n.prototype.style=function(e){var t="."+this.view.domId,r=[];e.treeIndentGuidesStroke&&(r.push(".monaco-list"+t+":hover .monaco-tl-indent > .indent-guide, .monaco-list"+t+".always .monaco-tl-indent > .indent-guide  { border-color: "+e.treeIndentGuidesStroke.transparent(.4)+"; }"),r.push(".monaco-list"+t+" .monaco-tl-indent > .indent-guide.active { border-color: "+e.treeIndentGuidesStroke+"; }"));var i=r.join(`
`);i!==this.styleElement.innerHTML&&(this.styleElement.innerHTML=i),this.view.style(e)},n.prototype.getNode=function(e){return this.model.getNode(e)},n.prototype.collapse=function(e,t){return t===void 0&&(t=!1),this.model.setCollapsed(e,!0,t)},n.prototype.expand=function(e,t){return t===void 0&&(t=!1),this.model.setCollapsed(e,!1,t)},n.prototype.isCollapsed=function(e){return this.model.isCollapsed(e)},n.prototype.refilter=function(){this._onWillRefilter.fire(void 0),this.model.refilter()},n.prototype.setSelection=function(e,t){var r=this,i=e.map(function(s){return r.model.getNode(s)});this.selection.set(i,t);var o=e.map(function(s){return r.model.getListIndex(s)}).filter(function(s){return s>-1});this.view.setSelection(o,t,!0)},n.prototype.getSelection=function(){return this.selection.get()},n.prototype.setFocus=function(e,t){var r=this,i=e.map(function(s){return r.model.getNode(s)});this.focus.set(i,t);var o=e.map(function(s){return r.model.getListIndex(s)}).filter(function(s){return s>-1});this.view.setFocus(o,t,!0)},n.prototype.focusNext=function(e,t,r,i){e===void 0&&(e=1),t===void 0&&(t=!1),i===void 0&&(i=this.focusNavigationFilter),this.view.focusNext(e,t,r,i)},n.prototype.getFocus=function(){return this.focus.get()},n.prototype.reveal=function(e,t){this.model.expandTo(e);var r=this.model.getListIndex(e);r!==-1&&this.view.reveal(r,t)},n.prototype.getRelativeTop=function(e){var t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)},n.prototype.onLeftArrow=function(e){e.preventDefault(),e.stopPropagation();var t=this.view.getFocusedElements();if(t.length!==0){var r=t[0],i=this.model.getNodeLocation(r),o=this.model.setCollapsed(i,!0);if(!o){var s=this.model.getParentNodeLocation(i);if(s===null)return;var a=this.model.getListIndex(s);this.view.reveal(a),this.view.setFocus([a])}}},n.prototype.onRightArrow=function(e){e.preventDefault(),e.stopPropagation();var t=this.view.getFocusedElements();if(t.length!==0){var r=t[0],i=this.model.getNodeLocation(r),o=this.model.setCollapsed(i,!1);if(!o){if(!r.children.some(function(u){return u.visible}))return;var s=this.view.getFocus()[0],a=s+1;this.view.reveal(a),this.view.setFocus([a])}}},n.prototype.onSpace=function(e){e.preventDefault(),e.stopPropagation();var t=this.view.getFocusedElements();if(t.length!==0){var r=t[0],i=this.model.getNodeLocation(r),o=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,o)}},n.prototype.dispose=function(){this.disposables=Ue(this.disposables),this.view.dispose()},n}(),LS=function(){return LS=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},LS.apply(this,arguments)},gX=function(){function n(e,t){t===void 0&&(t={}),this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new cNe(e,null,t),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,t.sorter&&(this.sorter={compare:function(r,i){return t.sorter.compare(r.element,i.element)}}),this.identityProvider=t.identityProvider}return n.prototype.setChildren=function(e,t,r,i){var o=this.getElementLocation(e);return this._setChildren(o,this.preserveCollapseState(t),r,i)},n.prototype._setChildren=function(e,t,r,i){var o=this,s=new Set,a=new Set,u=function(h){if(s.add(h.element),o.nodes.set(h.element,h),o.identityProvider){var d=o.identityProvider.getId(h.element).toString();a.add(d),o.nodesByIdentity.set(d,h)}r&&r(h)},l=function(h){if(s.has(h.element)||o.nodes.delete(h.element),o.identityProvider){var d=o.identityProvider.getId(h.element).toString();a.has(d)||o.nodesByIdentity.delete(d)}i&&i(h)},f=this.model.splice(e.concat([0]),Number.MAX_VALUE,t,u,l);return f},n.prototype.preserveCollapseState=function(e){var t=this,r=e?S0e(e):Nr.empty();return this.sorter&&(r=Nr.fromArray(Nr.collect(r).sort(this.sorter.compare.bind(this.sorter)))),Nr.map(r,function(i){var o=t.nodes.get(i.element);if(!o&&t.identityProvider){var s=t.identityProvider.getId(i.element).toString();o=t.nodesByIdentity.get(s)}if(!o)return LS({},i,{children:t.preserveCollapseState(i.children)});var a=typeof i.collapsible=="boolean"?i.collapsible:o.collapsible,u=typeof i.collapsed<"u"?i.collapsed:o.collapsed;return LS({},i,{collapsible:a,collapsed:u,children:t.preserveCollapseState(i.children)})})},n.prototype.rerender=function(e){var t=this.getElementLocation(e);this.model.rerender(t)},n.prototype.getListIndex=function(e){var t=this.getElementLocation(e);return this.model.getListIndex(t)},n.prototype.getListRenderCount=function(e){var t=this.getElementLocation(e);return this.model.getListRenderCount(t)},n.prototype.isCollapsed=function(e){var t=this.getElementLocation(e);return this.model.isCollapsed(t)},n.prototype.setCollapsed=function(e,t,r){var i=this.getElementLocation(e);return this.model.setCollapsed(i,t,r)},n.prototype.expandTo=function(e){var t=this.getElementLocation(e);this.model.expandTo(t)},n.prototype.refilter=function(){this.model.refilter()},n.prototype.getNode=function(e){if(e===void 0&&(e=null),e===null)return this.model.getNode(this.model.rootRef);var t=this.nodes.get(e);if(!t)throw new Error("Tree element not found: "+e);return t},n.prototype.getNodeLocation=function(e){return e.element},n.prototype.getParentNodeLocation=function(e){if(e===null)throw new Error("Invalid getParentNodeLocation call");var t=this.nodes.get(e);if(!t)throw new Error("Tree element not found: "+e);return t.parent.element},n.prototype.getElementLocation=function(e){if(e===null)return[];var t=this.nodes.get(e);if(!t)throw new Error("Tree element not found: "+e);return this.model.getNodeLocation(t)},n}(),bNe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vX=function(n){bNe(e,n);function e(t,r,i,o){return o===void 0&&(o={}),n.call(this,t,r,i,o)||this}return Object.defineProperty(e.prototype,"onDidChangeCollapseState",{get:function(){return this.model.onDidChangeCollapseState},enumerable:!0,configurable:!0}),e.prototype.setChildren=function(t,r){return this.model.setChildren(t,r)},e.prototype.rerender=function(t){if(t===void 0){this.view.rerender();return}this.model.rerender(t)},e.prototype.createModel=function(t,r){return new gX(t,r)},e}(pX),Lc=function(){return Lc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Lc.apply(this,arguments)},ec=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},tc=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function QT(n){return Lc({},n,{children:[],loading:!1,stale:!0,slow:!1,collapsedByDefault:void 0})}function _R(n,e){return e.parent?e.parent===n?!0:_R(n,e.parent):!1}function wNe(n,e){return n===e||_R(n,e)||_R(e,n)}var h9=function(){function n(e){this.node=e}return Object.defineProperty(n.prototype,"element",{get:function(){return this.node.element.element},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.node.parent&&new n(this.node.parent)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"children",{get:function(){return this.node.children.map(function(e){return new n(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"depth",{get:function(){return this.node.depth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleChildrenCount",{get:function(){return this.node.visibleChildrenCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleChildIndex",{get:function(){return this.node.visibleChildIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"collapsible",{get:function(){return this.node.collapsible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"collapsed",{get:function(){return this.node.collapsed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this.node.visible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterData",{get:function(){return this.node.filterData},enumerable:!0,configurable:!0}),n}(),CNe=function(){function n(e,t){this.renderer=e,this.onDidChangeTwistieState=t,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}return n.prototype.renderTemplate=function(e){var t=this.renderer.renderTemplate(e);return{templateData:t}},n.prototype.renderElement=function(e,t,r,i){this.renderer.renderElement(new h9(e),t,r.templateData,i)},n.prototype.renderTwistie=function(e,t){return vt(t,"loading",e.slow),!1},n.prototype.disposeElement=function(e,t,r,i){this.renderer.disposeElement&&this.renderer.disposeElement(new h9(e),t,r.templateData,i)},n.prototype.disposeTemplate=function(e){this.renderer.disposeTemplate(e.templateData)},n.prototype.dispose=function(){this.renderedNodes.clear(),this.disposables=Ue(this.disposables)},n}();function JT(n){return{browserEvent:n.browserEvent,elements:n.elements.map(function(e){return e.element})}}var X_;(function(n){n[n.Refresh=0]="Refresh",n[n.Expand=1]="Expand"})(X_||(X_={}));function eN(n){if(n instanceof Gy){var e=n.elements;return new Gy(e.map(function(t){return t.element}))}return n}var SNe=function(){function n(e){this.dnd=e}return n.prototype.getDragURI=function(e){return this.dnd.getDragURI(e.element)},n.prototype.getDragLabel=function(e){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(function(t){return t.element}))},n.prototype.onDragStart=function(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(eN(e),t)},n.prototype.onDragOver=function(e,t,r,i,o){return this.dnd.onDragOver(eN(e),t&&t.element,r,i)},n.prototype.drop=function(e,t,r,i){this.dnd.drop(eN(e),t&&t.element,r,i)},n}();function ENe(n){return n&&Lc({},n,{collapseByDefault:!0,identityProvider:n.identityProvider&&{getId:function(e){return n.identityProvider.getId(e.element)}},dnd:n.dnd&&new SNe(n.dnd),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent:function(e){return n.multipleSelectionController.isSelectionSingleChangeEvent(Lc({},e,{element:e.element}))},isSelectionRangeChangeEvent:function(e){return n.multipleSelectionController.isSelectionRangeChangeEvent(Lc({},e,{element:e.element}))}},accessibilityProvider:n.accessibilityProvider&&{getAriaLabel:function(e){return n.accessibilityProvider.getAriaLabel(e.element)}},filter:n.filter&&{filter:function(e,t){return n.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&Lc({},n.keyboardNavigationLabelProvider,{getKeyboardNavigationLabel:function(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof n.expandOnlyOnTwistieClick>"u"?void 0:typeof n.expandOnlyOnTwistieClick!="function"?n.expandOnlyOnTwistieClick:function(e){return n.expandOnlyOnTwistieClick(e.element)},ariaProvider:void 0,additionalScrollHeight:n.additionalScrollHeight})}function mX(n,e){var t;return e&&e.viewState.expanded&&n.id&&e.viewState.expanded.indexOf(n.id)>-1?t=!1:t=n.collapsedByDefault,n.collapsedByDefault=void 0,{element:n,children:n.hasChildren?Nr.map(Nr.fromArray(n.children),function(r){return mX(r,e)}):[],collapsible:n.hasChildren,collapsed:t}}function yR(n,e){e(n),n.children.forEach(function(t){return yR(t,e)})}var INe=function(){function n(e,t,r,i,o){var s=this;o===void 0&&(o={}),this.dataSource=i,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new j,this._onDidChangeNodeSlowState=new j,this.disposables=[],this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault;var a=new dX(t),u=r.map(function(f){return new CNe(f,s._onDidChangeNodeSlowState.event)}),l=ENe(o)||{};this.tree=new vX(e,a,u,l),this.root=QT({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Lc({},this.root,{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}return Object.defineProperty(n.prototype,"onDidChangeFocus",{get:function(){return We.map(this.tree.onDidChangeFocus,JT)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidChangeSelection",{get:function(){return We.map(this.tree.onDidChangeSelection,JT)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidOpen",{get:function(){return We.map(this.tree.onDidOpen,JT)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidFocus",{get:function(){return this.tree.onDidFocus},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidDispose",{get:function(){return this.tree.onDidDispose},enumerable:!0,configurable:!0}),n.prototype.updateOptions=function(e){e===void 0&&(e={}),this.tree.updateOptions(e)},n.prototype.getHTMLElement=function(){return this.tree.getHTMLElement()},Object.defineProperty(n.prototype,"scrollTop",{get:function(){return this.tree.scrollTop},set:function(e){this.tree.scrollTop=e},enumerable:!0,configurable:!0}),n.prototype.domFocus=function(){this.tree.domFocus()},n.prototype.layout=function(e,t){this.tree.layout(e,t)},n.prototype.style=function(e){this.tree.style(e)},n.prototype.getInput=function(){return this.root.element},n.prototype.setInput=function(e,t){return ec(this,void 0,void 0,function(){var r;return tc(this,function(i){switch(i.label){case 0:return this.refreshPromises.forEach(function(o){return o.cancel()}),this.refreshPromises.clear(),this.root.element=e,r=t&&{viewState:t,focus:[],selection:[]},[4,this.updateChildren(e,!0,r)];case 1:return i.sent(),r&&(this.tree.setFocus(r.focus),this.tree.setSelection(r.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop),[2]}})})},n.prototype.updateChildren=function(e,t,r){return e===void 0&&(e=this.root.element),t===void 0&&(t=!0),ec(this,void 0,void 0,function(){return tc(this,function(i){switch(i.label){case 0:if(typeof this.root.element>"u")throw new Error("Tree input not set");return this.root.loading?[4,this.subTreeRefreshPromises.get(this.root)]:[3,3];case 1:return i.sent(),[4,We.toPromise(this._onDidRender.event)];case 2:i.sent(),i.label=3;case 3:return[4,this.refreshAndRenderNode(this.getDataNode(e),t,X_.Refresh,r)];case 4:return i.sent(),[2]}})})},n.prototype.rerender=function(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}var t=this.getDataNode(e);this.tree.rerender(t)},n.prototype.collapse=function(e,t){t===void 0&&(t=!1);var r=this.getDataNode(e);return this.tree.collapse(r===this.root?null:r,t)},n.prototype.expand=function(e,t){return t===void 0&&(t=!1),ec(this,void 0,void 0,function(){var r,i;return tc(this,function(o){switch(o.label){case 0:if(typeof this.root.element>"u")throw new Error("Tree input not set");return this.root.loading?[4,this.subTreeRefreshPromises.get(this.root)]:[3,3];case 1:return o.sent(),[4,We.toPromise(this._onDidRender.event)];case 2:o.sent(),o.label=3;case 3:return r=this.getDataNode(e),r!==this.root&&!r.loading&&!this.tree.isCollapsed(r)?[2,!1]:(i=this.tree.expand(r===this.root?null:r,t),r.loading?[4,this.subTreeRefreshPromises.get(r)]:[3,6]);case 4:return o.sent(),[4,We.toPromise(this._onDidRender.event)];case 5:o.sent(),o.label=6;case 6:return[2,i]}})})},n.prototype.setSelection=function(e,t){var r=this,i=e.map(function(o){return r.getDataNode(o)});this.tree.setSelection(i,t)},n.prototype.getSelection=function(){var e=this.tree.getSelection();return e.map(function(t){return t.element})},n.prototype.setFocus=function(e,t){var r=this,i=e.map(function(o){return r.getDataNode(o)});this.tree.setFocus(i,t)},n.prototype.getFocus=function(){var e=this.tree.getFocus();return e.map(function(t){return t.element})},n.prototype.reveal=function(e,t){this.tree.reveal(this.getDataNode(e),t)},n.prototype.getDataNode=function(e){var t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Error("Data tree node not found: "+e);return t},n.prototype.refreshAndRenderNode=function(e,t,r,i){return ec(this,void 0,void 0,function(){var o,s;return tc(this,function(a){switch(a.label){case 0:return[4,this.refreshNode(e,t,i)];case 1:return a.sent(),this.render(e,i),e!==this.root&&this.autoExpandSingleChildren&&r===X_.Expand?(o=this.tree.getNode(e),s=o.children.filter(function(u){return u.visible}),s.length!==1?[3,3]:[4,this.tree.expand(s[0].element,!1)]):[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}})})},n.prototype.refreshNode=function(e,t,r){return ec(this,void 0,void 0,function(){var i,o=this;return tc(this,function(s){switch(s.label){case 0:if(this.subTreeRefreshPromises.forEach(function(a,u){!i&&wNe(u,e)&&(i=a.then(function(){return o.refreshNode(e,t,r)}))}),i)return[2,i];i=this.doRefreshSubTree(e,t,r),this.subTreeRefreshPromises.set(e,i),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,i];case 2:return s.sent(),[3,4];case 3:return this.subTreeRefreshPromises.delete(e),[7];case 4:return[2]}})})},n.prototype.doRefreshSubTree=function(e,t,r){return ec(this,void 0,void 0,function(){var i,o=this;return tc(this,function(s){switch(s.label){case 0:e.loading=!0,s.label=1;case 1:return s.trys.push([1,,4,5]),[4,this.doRefreshNode(e,t,r)];case 2:return i=s.sent(),e.stale=!1,[4,Promise.all(i.map(function(a){return o.doRefreshSubTree(a,t,r)}))];case 3:return s.sent(),[3,5];case 4:return e.loading=!1,[7];case 5:return[2]}})})},n.prototype.doRefreshNode=function(e,t,r){return ec(this,void 0,void 0,function(){var i,o,s,a,u=this;return tc(this,function(l){switch(l.label){case 0:e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren?(o=j0(800),o.then(function(){e.slow=!0,u._onDidChangeNodeSlowState.fire(e)},function(f){return null}),i=this.doGetChildren(e).finally(function(){return o.cancel()})):i=Promise.resolve([]),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,i];case 2:return s=l.sent(),[2,this.setChildren(e,s,t,r)];case 3:if(a=l.sent(),e!==this.root&&this.tree.collapse(e===this.root?null:e),V0(a))return[2,[]];throw a;case 4:return e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e)),[7];case 5:return[2]}})})},n.prototype.doGetChildren=function(e){var t=this,r=this.refreshPromises.get(e);return r||(r=Cr(function(){return ec(t,void 0,void 0,function(){var i;return tc(this,function(o){switch(o.label){case 0:return[4,this.dataSource.getChildren(e.element)];case 1:return i=o.sent(),this.sorter&&i.sort(this.sorter.compare.bind(this.sorter)),[2,i]}})})}),this.refreshPromises.set(e,r),r.finally(function(){return t.refreshPromises.delete(e)}))},n.prototype._onDidChangeCollapseState=function(e){var t=e.node,r=e.deep;!t.collapsed&&t.element.stale&&(r?this.collapse(t.element.element):this.refreshAndRenderNode(t.element,!1,X_.Expand).catch(Le))},n.prototype.setChildren=function(e,t,r,i){var o,s=this;if(e.children.length===0&&t.length===0)return[];for(var a=new Map,u=new Map,l=0,f=e.children;l<f.length;l++){var h=f[l];a.set(h.element,h),this.identityProvider&&u.set(h.id,this.tree.getNode(h))}for(var d=[],g=t.map(function(E){var D=!!s.dataSource.hasChildren(E);if(!s.identityProvider){var k=QT({element:E,parent:e,hasChildren:D});return D&&s.collapseByDefault&&!s.collapseByDefault(E)&&(k.collapsedByDefault=!1,d.push(k)),k}var I=s.identityProvider.getId(E).toString(),T=u.get(I);if(T){var k=T.element;return a.delete(k.element),s.nodes.delete(k.element),s.nodes.set(E,k),k.element=E,k.hasChildren=D,r?T.collapsed?yR(k,function(L){return L.stale=!0}):d.push(k):D&&s.collapseByDefault&&!s.collapseByDefault(E)&&(k.collapsedByDefault=!1,d.push(k)),k}var A=QT({element:E,parent:e,id:I,hasChildren:D});return i&&i.viewState.focus&&i.viewState.focus.indexOf(I)>-1&&i.focus.push(A),i&&i.viewState.selection&&i.viewState.selection.indexOf(I)>-1&&i.selection.push(A),i&&i.viewState.expanded&&i.viewState.expanded.indexOf(I)>-1?d.push(A):D&&s.collapseByDefault&&!s.collapseByDefault(E)&&(A.collapsedByDefault=!1,d.push(A)),A}),v=0,m=vF(a);v<m.length;v++){var y=m[v];yR(y,function(E){return s.nodes.delete(E.element)})}for(var b=0,C=g;b<C.length;b++){var h=C[b];this.nodes.set(h.element,h)}return(o=e.children).splice.apply(o,[0,e.children.length].concat(g)),d},n.prototype.render=function(e,t){var r=e.children.map(function(i){return mX(i,t)});this.tree.setChildren(e===this.root?null:e,r),this._onDidRender.fire()},n.prototype.dispose=function(){Ue(this.disposables)},n}(),xNe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DNe=function(n){xNe(e,n);function e(t,r,i,o,s){s===void 0&&(s={});var a=n.call(this,t,r,i,s)||this;return a.dataSource=o,a.identityProvider=s.identityProvider,a}return e.prototype.createModel=function(t,r){return new gX(t,r)},e}(pX),nb=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kS=function(){return kS=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},kS.apply(this,arguments)},rb=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Fn=function(n,e){return function(t,r){e(t,r,n)}},qa,jv=xt("listService"),LNe=function(){function n(e){this.lists=[],this._lastFocusedWidget=void 0}return Object.defineProperty(n.prototype,"lastFocusedList",{get:function(){return this._lastFocusedWidget},enumerable:!0,configurable:!0}),n.prototype.register=function(e,t){var r=this;if(this.lists.some(function(o){return o.widget===e}))throw new Error("Cannot register the same widget multiple times");var i={widget:e,extraContextKeys:t};return this.lists.push(i),e.getHTMLElement()===document.activeElement&&(this._lastFocusedWidget=e),au(e.onDidFocus(function(){return r._lastFocusedWidget=e}),en(function(){return r.lists.splice(r.lists.indexOf(i),1)}),e.onDidDispose(function(){r.lists=r.lists.filter(function(o){return o!==i}),r._lastFocusedWidget===e&&(r._lastFocusedWidget=void 0)}))},n=rb([Fn(0,rt)],n),n}(),kNe=new Re("listFocus",!0),TNe=new Re("listSupportsMultiselect",!0),NNe=new Re("listHasSelectionOrFocus",!1),ANe=new Re("listDoubleSelection",!1),ONe=new Re("listMultiSelection",!1),RNe=new Re("listSupportsKeyboardNavigation",!0),I2="listAutomaticKeyboardNavigation",MNe=new Re(I2,!0),d9=!1;function PNe(n,e){var t=n.createScoped(e.getHTMLElement());return kNe.bindTo(t),t}var OI="workbench.list.multiSelectModifier",RI="workbench.list.openMode",bR="workbench.list.horizontalScrolling",TS="workbench.list.keyboardNavigation",x2="workbench.list.automaticKeyboardNavigation",NS="workbench.tree.indent",AS="workbench.tree.renderIndentGuides";function FNe(n){return E1e(n,bR,"workbench.tree.horizontalScrolling")}function OS(n){return n.getValue(OI)==="alt"}function RS(n){return n.getValue(RI)!=="doubleClick"}var BNe=function(n){nb(e,n);function e(t){var r=n.call(this)||this;return r.configurationService=t,r.useAltAsMultipleSelectionModifier=OS(t),r.registerListeners(),r}return e.prototype.registerListeners=function(){var t=this;this._register(this.configurationService.onDidChangeConfiguration(function(r){r.affectsConfiguration(OI)&&(t.useAltAsMultipleSelectionModifier=OS(t.configurationService))}))},e.prototype.isSelectionSingleChangeEvent=function(t){return this.useAltAsMultipleSelectionModifier?t.browserEvent.altKey:rX(t)},e.prototype.isSelectionRangeChangeEvent=function(t){return iX(t)},e}(te),WNe=function(n){nb(e,n);function e(t,r){var i=n.call(this)||this;return i.configurationService=t,i.existingOpenController=r,i.openOnSingleClick=RS(t),i.registerListeners(),i}return e.prototype.registerListeners=function(){var t=this;this._register(this.configurationService.onDidChangeConfiguration(function(r){r.affectsConfiguration(RI)&&(t.openOnSingleClick=RS(t.configurationService))}))},e.prototype.shouldOpen=function(t){if(t instanceof MouseEvent){var r=t.button===0,i=t.detail===2;return r&&!this.openOnSingleClick&&!i?!1:r||t.button===1?this.existingOpenController?this.existingOpenController.shouldOpen(t):!0:!1}return this.existingOpenController?this.existingOpenController.shouldOpen(t):!0},e}(te);function VNe(n,e,t){var r=new De,i=kS({},n);if(n.multipleSelectionSupport!==!1&&!n.multipleSelectionController){var o=new BNe(e);i.multipleSelectionController=o,r.add(o)}var s=new WNe(e,n.openController);if(i.openController=s,r.add(s),n.keyboardNavigationLabelProvider){var a=n.keyboardNavigationLabelProvider;i.keyboardNavigationLabelProvider={getKeyboardNavigationLabel:function(u){return a.getKeyboardNavigationLabel(u)},mightProducePrintableCharacter:function(u){return t.mightProducePrintableCharacter(u)}}}return[i,r]}var tN;function HNe(){return tN||(tN=pf()),tN}function UNe(n,e){var t=!1;return function(r){if(t)return t=!1,!1;var i=e.softDispatch(r,n);return i&&i.enterChord?(t=!0,!1):(t=!1,!0)}}(function(n){nb(e,n);function e(t,r,i,o,s,a,u,l,f,h){var d=this,g=D2(t,o,s,u,l,f,h),v=g.options,m=g.getAutomaticKeyboardNavigation,y=g.disposable;return d=n.call(this,t,r,i,v)||this,d.disposables.push(y),d.internals=new L2(d,v,m,s,a,u,l,h),d.disposables.push(d.internals),d}return e=rb([Fn(4,rt),Fn(5,jv),Fn(6,Ir),Fn(7,Vr),Fn(8,er),Fn(9,Au)],e),e})(vX);(function(n){nb(e,n);function e(t,r,i,o,s,a,u,l,f,h,d){var g=this,v=D2(t,s,a,l,f,h,d),m=v.options,y=v.getAutomaticKeyboardNavigation,b=v.disposable;return g=n.call(this,t,r,i,o,m)||this,g.disposables.push(b),g.internals=new L2(g,m,y,a,u,l,f,d),g.disposables.push(g.internals),g}return e=rb([Fn(5,rt),Fn(6,jv),Fn(7,Ir),Fn(8,Vr),Fn(9,er),Fn(10,Au)],e),e})(DNe);var jNe=function(n){nb(e,n);function e(t,r,i,o,s,a,u,l,f,h,d){var g=this,v=D2(t,s,a,l,f,h,d),m=v.options,y=v.getAutomaticKeyboardNavigation,b=v.disposable;return g=n.call(this,t,r,i,o,m)||this,g.disposables.push(b),g.internals=new L2(g,m,y,a,u,l,f,d),g.disposables.push(g.internals),g}return Object.defineProperty(e.prototype,"contextKeyService",{get:function(){return this.internals.contextKeyService},enumerable:!0,configurable:!0}),e=rb([Fn(5,rt),Fn(6,jv),Fn(7,Ir),Fn(8,Vr),Fn(9,er),Fn(10,Au)],e),e}(INe);function D2(n,e,t,r,i,o,s){RNe.bindTo(t),d9||(MNe.bindTo(t),d9=!0);var a=function(){var y=t.getContextKeyValue(I2);return y&&(y=i.getValue(x2)),y},u=s.getAccessibilitySupport()===2,l=u?"simple":i.getValue(TS),f=typeof e.horizontalScrolling<"u"?e.horizontalScrolling:FNe(i),h=RS(i),d=VNe(e,i,o),g=d[0],v=d[1],m=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:v,options:kS({keyboardSupport:!1,styleController:new uX(HNe())},BZ(r.getTheme(),VZ),g,{indent:i.getValue(NS),renderIndentGuides:i.getValue(AS),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:l==="simple",filterOnType:l==="filter",horizontalScrolling:f,openOnSingleClick:h,keyboardNavigationEventFilter:UNe(n,o),additionalScrollHeight:m})}}var L2=function(){function n(e,t,r,i,o,s,a,u){var l=this;this.disposables=[],this.contextKeyService=PNe(i,e);var f=TNe.bindTo(this.contextKeyService);f.set(t.multipleSelectionSupport!==!1),this.hasSelectionOrFocus=NNe.bindTo(this.contextKeyService),this.hasDoubleSelection=ANe.bindTo(this.contextKeyService),this.hasMultiSelection=ONe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=OS(a);var h=new Set;h.add(I2);var d=function(){var g=u.getAccessibilitySupport()===2,v=g?"simple":a.getValue(TS);e.updateOptions({simpleKeyboardNavigation:v==="simple",filterOnType:v==="filter"})};this.disposables.push(this.contextKeyService,o.register(e),WZ(e,s),e.onDidChangeSelection(function(){var g=e.getSelection(),v=e.getFocus();l.hasSelectionOrFocus.set(g.length>0||v.length>0),l.hasMultiSelection.set(g.length>1),l.hasDoubleSelection.set(g.length===2)}),e.onDidChangeFocus(function(){var g=e.getSelection(),v=e.getFocus();l.hasSelectionOrFocus.set(g.length>0||v.length>0)}),a.onDidChangeConfiguration(function(g){if(g.affectsConfiguration(RI)&&e.updateOptions({openOnSingleClick:RS(a)}),g.affectsConfiguration(OI)&&(l._useAltAsMultipleSelectionModifier=OS(a)),g.affectsConfiguration(NS)){var v=a.getValue(NS);e.updateOptions({indent:v})}if(g.affectsConfiguration(AS)){var m=a.getValue(AS);e.updateOptions({renderIndentGuides:m})}g.affectsConfiguration(TS)&&d(),g.affectsConfiguration(x2)&&e.updateOptions({automaticKeyboardNavigation:r()})}),this.contextKeyService.onDidChangeContext(function(g){g.affectsSome(h)&&e.updateOptions({automaticKeyboardNavigation:r()})}),u.onDidChangeAccessibilitySupport(function(){return d()}))}return n.prototype.dispose=function(){this.disposables=Ue(this.disposables)},n=rb([Fn(3,rt),Fn(4,jv),Fn(5,Ir),Fn(6,Vr),Fn(7,Au)],n),n}(),zNe=qi.as(Fv.Configuration);zNe.registerConfiguration({id:"workbench",order:7,title:S("workbenchConfigurationTitle","Workbench"),type:"object",properties:(qa={},qa[OI]={type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[S("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),S("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:S({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},qa[RI]={type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:S({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). For parents with children in trees, this setting will control if a single click expands the parent or a double click. Note that some trees and lists might choose to ignore this setting if it is not applicable. ")},qa[bR]={type:"boolean",default:!1,description:S("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench.")},qa["workbench.tree.horizontalScrolling"]={type:"boolean",default:!1,description:S("tree horizontalScrolling setting","Controls whether trees support horizontal scrolling in the workbench."),deprecationMessage:S("deprecated","This setting is deprecated, please use '{0}' instead.",bR)},qa[NS]={type:"number",default:8,minimum:0,maximum:40,description:S("tree indent setting","Controls tree indentation in pixels.")},qa[AS]={type:"string",enum:["none","onHover","always"],default:"onHover",description:S("render tree indent guides","Controls whether the tree should render indent guides.")},qa[TS]={type:"string",enum:["simple","highlight","filter"],enumDescriptions:[S("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),S("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),S("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:S("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},qa[x2]={type:"boolean",default:!0,markdownDescription:S("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},qa)});var hn;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(hn||(hn={}));(function(n){function e(s,a){return a-s}n.compare=e;var t=Object.create(null);t[n.Error]=S("sev.error","Error"),t[n.Warning]=S("sev.warning","Warning"),t[n.Info]=S("sev.info","Info");function r(s){return t[s]||""}n.toString=r;function i(s){switch(s){case Rn.Error:return n.Error;case Rn.Warning:return n.Warning;case Rn.Info:return n.Info;case Rn.Ignore:return n.Hint}}n.fromSeverity=i;function o(s){switch(s){case n.Error:return Rn.Error;case n.Warning:return Rn.Warning;case n.Info:return Rn.Info;case n.Hint:return Rn.Ignore}}n.toSeverity=o})(hn||(hn={}));var MS;(function(n){var e="";function t(i){return r(i,!0)}n.makeKey=t;function r(i,o){var s=[e];return i.source?s.push(i.source.replace("","")):s.push(e),i.code?s.push(i.code.replace("","")):s.push(e),i.severity!==void 0&&i.severity!==null?s.push(hn.toString(i.severity)):s.push(e),i.message&&o?s.push(i.message.replace("","")):s.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?s.push(i.startLineNumber.toString()):s.push(e),i.startColumn!==void 0&&i.startColumn!==null?s.push(i.startColumn.toString()):s.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?s.push(i.endLineNumber.toString()):s.push(e),i.endColumn!==void 0&&i.endColumn!==null?s.push(i.endColumn.toString()):s.push(e),s.push(e),s.join("")}n.makeKeyOptionalMessage=r})(MS||(MS={}));var ib=xt("markerService"),Dh;(function(n){function e(i,o,s){if(i[o])return i[o][s]}n.get=e;function t(i,o,s,a){i[o]||(i[o]=Object.create(null)),i[o][s]=a}n.set=t;function r(i,o,s){return i[o]&&i[o][s]?(delete i[o][s],qK(i[o])&&delete i[o],!0):!1}n.remove=r})(Dh||(Dh={}));var qNe=function(){function n(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=Object.create(null),this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}return n.prototype.dispose=function(){this._subscription.dispose(),this._data=void 0},n.prototype._update=function(e){if(this._data)for(var t=0,r=e;t<r.length;t++){var i=r[t],o=i.toString(),s=this._data[o];s&&this._substract(s);var a=this._resourceStats(i);this._add(a),this._data[o]=a}},n.prototype._resourceStats=function(e){var t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===rn.inMemory||e.scheme===rn.walkThrough||e.scheme===rn.walkThroughSnippet)return t;for(var r=0,i=this._service.read({resource:e});r<i.length;r++){var o=i[r].severity;o===hn.Error?t.errors+=1:o===hn.Warning?t.warnings+=1:o===hn.Info?t.infos+=1:t.unknowns+=1}return t},n.prototype._substract=function(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns},n.prototype._add=function(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns},n}(),$Ne=function(){function n(){this._onMarkerChanged=new j,this._onMarkerChangedEvent=We.debounce(this._onMarkerChanged.event,n._debouncer,0),this._byResource=Object.create(null),this._byOwner=Object.create(null),this._stats=new qNe(this)}return n.prototype.dispose=function(){this._stats.dispose()},Object.defineProperty(n.prototype,"onMarkerChanged",{get:function(){return this._onMarkerChangedEvent},enumerable:!0,configurable:!0}),n.prototype.remove=function(e,t){for(var r=0,i=t||[];r<i.length;r++){var o=i[r];this.changeOne(e,o,[])}},n.prototype.changeOne=function(e,t,r){if($P(r)){var i=Dh.remove(this._byResource,t.toString(),e),o=Dh.remove(this._byOwner,e,t.toString());if(i!==o)throw new Error("invalid marker service state");i&&o&&this._onMarkerChanged.fire([t])}else{for(var s=[],a=0,u=r;a<u.length;a++){var l=u[a],f=n._toMarker(e,t,l);f&&s.push(f)}Dh.set(this._byResource,t.toString(),e,s),Dh.set(this._byOwner,e,t.toString(),s),this._onMarkerChanged.fire([t])}},n._toMarker=function(e,t,r){var i=r.code,o=r.severity,s=r.message,a=r.source,u=r.startLineNumber,l=r.startColumn,f=r.endLineNumber,h=r.endColumn,d=r.relatedInformation,g=r.tags;if(s)return u=u>0?u:1,l=l>0?l:1,f=f>=u?f:u,h=h>0?h:l,{resource:t,owner:e,code:i,severity:o,message:s,source:a,startLineNumber:u,startColumn:l,endLineNumber:f,endColumn:h,relatedInformation:d,tags:g}},n.prototype.read=function(e){e===void 0&&(e=Object.create(null));var t=e.owner,r=e.resource,i=e.severities,o=e.take;if((!o||o<0)&&(o=-1),t&&r){var s=Dh.get(this._byResource,r.toString(),t);if(s){for(var a=[],u=0,l=s;u<l.length;u++){var f=l[u];if(n._accept(f,i)){var h=a.push(f);if(o>0&&h===o)break}}return a}else return[]}else if(!t&&!r){var a=[];for(var d in this._byResource)for(var g in this._byResource[d])for(var v=0,m=this._byResource[d][g];v<m.length;v++){var s=m[v];if(n._accept(s,i)){var h=a.push(s);if(o>0&&h===o)return a}}return a}else{var y=t?this._byOwner[t]:r?this._byResource[r.toString()]:void 0;if(!y)return[];var a=[];for(var b in y)for(var C=0,E=y[b];C<E.length;C++){var s=E[C];if(n._accept(s,i)){var h=a.push(s);if(o>0&&h===o)return a}}return a}},n._accept=function(e,t){return t===void 0||(t&e.severity)===e.severity},n._debouncer=function(e,t){e||(n._dedupeMap=Object.create(null),e=[]);for(var r=0,i=t;r<i.length;r++){var o=i[r];n._dedupeMap[o.toString()]===void 0&&(n._dedupeMap[o.toString()]=!0,e.push(o))}return e},n}(),MI=xt("editorProgressService"),KNe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_f=xt("storageService"),PS;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(PS||(PS={}));var GNe=function(n){KNe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._serviceBrand=null,t._onDidChangeStorage=t._register(new j),t.onDidChangeStorage=t._onDidChangeStorage.event,t.onWillSaveState=We.None,t.globalCache=new Map,t.workspaceCache=new Map,t}return e.prototype.getCache=function(t){return t===0?this.globalCache:this.workspaceCache},e.prototype.get=function(t,r,i){var o=this.getCache(r).get(t);return Pc(o)?i:o},e.prototype.getBoolean=function(t,r,i){var o=this.getCache(r).get(t);return Pc(o)?i:o==="true"},e.prototype.store=function(t,r,i){if(Pc(r))return this.remove(t,i);var o=String(r),s=this.getCache(i).get(t);return s===o||(this.getCache(i).set(t,o),this._onDidChangeStorage.fire({scope:i,key:t})),Promise.resolve()},e.prototype.remove=function(t,r){var i=this.getCache(r).delete(t);return i&&this._onDidChangeStorage.fire({scope:r,key:t}),Promise.resolve()},e}(te),YNe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_X=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},wR=function(n,e){return function(t,r){e(t,r,n)}},ZNe=function(){function n(e){this._commandService=e}return n.prototype.createMenu=function(e,t){return new XNe(e,this._commandService,t)},n=_X([wR(0,bi)],n),n}(),XNe=function(n){YNe(e,n);function e(t,r,i){var o=n.call(this)||this;return o._id=t,o._commandService=r,o._contextKeyService=i,o._onDidChange=o._register(new j),o._build(),o._register(We.debounce(We.filter(Ta.onDidChangeMenu,function(s){return s===o._id}),function(){},50)(o._build,o)),o._register(We.debounce(o._contextKeyService.onDidChangeContext,function(s,a){return s||a.affectsSome(o._contextKeys)},50)(function(s){return s&&o._onDidChange.fire(void 0)},o)),o}return e.prototype._build=function(){this._menuGroups=[],this._contextKeys=new Set;var t=Ta.getMenuItems(this._id),r;t.sort(e._compareMenuItems);for(var i=0,o=t;i<o.length;i++){var s=o[i],a=s.group||"";(!r||r[0]!==a)&&(r=[a,[]],this._menuGroups.push(r)),r[1].push(s),e._fillInKbExprKeys(s.when,this._contextKeys),e1(s)&&s.command.precondition&&e._fillInKbExprKeys(s.command.precondition,this._contextKeys),e1(s)&&s.command.toggled&&e._fillInKbExprKeys(s.command.toggled,this._contextKeys)}this._onDidChange.fire(this)},e.prototype.getActions=function(t){for(var r=[],i=0,o=this._menuGroups;i<o.length;i++){for(var s=o[i],a=s[0],u=s[1],l=[],f=0,h=u;f<h.length;f++){var d=h[f];if(this._contextKeyService.contextMatchesRules(d.when)){var g=e1(d)?new mSe(d.command,d.alt,t,this._contextKeyService,this._commandService):new vSe(d);l.push(g)}}l.length>0&&r.push([a,l])}return r},e._fillInKbExprKeys=function(t,r){if(t)for(var i=0,o=t.keys();i<o.length;i++){var s=o[i];r.add(s)}},e._compareMenuItems=function(t,r){var i=t.group,o=r.group;if(i!==o){if(i){if(!o)return-1}else return 1;if(i==="navigation")return-1;if(o==="navigation")return 1;var s=i.localeCompare(o);if(s!==0)return s}var a=t.order||0,u=r.order||0;if(a<u)return-1;if(a>u)return 1;var l=typeof t.command.title=="string"?t.command.title:t.command.title.value,f=typeof r.command.title=="string"?r.command.title:r.command.title.value;return l.localeCompare(f)},e=_X([wR(1,bi),wR(2,rt)],e),e}(te),yX=xt("markerDecorationsService"),bX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QNe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},p9=function(n,e){return function(t,r){e(t,r,n)}};function a_(n){return n.toString()}var JNe=function(n){bX(e,n);function e(t){var r=n.call(this)||this;return r.model=t,r._markersData=new Map,r._register(en(function(){r.model.deltaDecorations(Ry(r._markersData),[]),r._markersData.clear()})),r}return e.prototype.update=function(t,r){for(var i=this.model.deltaDecorations(Ry(this._markersData),r),o=0;o<i.length;o++)this._markersData.set(i[o],t[o])},e.prototype.getMarker=function(t){return this._markersData.get(t.id)},e}(te),eAe=function(n){bX(e,n);function e(t,r){var i=n.call(this)||this;return i._markerService=r,i._onDidChangeMarker=i._register(new j),i._markerDecorations=new Map,t.getModels().forEach(function(o){return i._onModelAdded(o)}),i._register(t.onModelAdded(i._onModelAdded,i)),i._register(t.onModelRemoved(i._onModelRemoved,i)),i._register(i._markerService.onMarkerChanged(i._handleMarkerChange,i)),i}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this._markerDecorations.forEach(function(t){return t.dispose()}),this._markerDecorations.clear()},e.prototype.getMarker=function(t,r){var i=this._markerDecorations.get(a_(t.uri));return i?Ug(i.getMarker(r)):null},e.prototype._handleMarkerChange=function(t){var r=this;t.forEach(function(i){var o=r._markerDecorations.get(a_(i));o&&r._updateDecorations(o)})},e.prototype._onModelAdded=function(t){var r=new JNe(t);this._markerDecorations.set(a_(t.uri),r),this._updateDecorations(r)},e.prototype._onModelRemoved=function(t){var r=this,i=this._markerDecorations.get(a_(t.uri));i&&(i.dispose(),this._markerDecorations.delete(a_(t.uri))),(t.uri.scheme===rn.inMemory||t.uri.scheme===rn.internal||t.uri.scheme===rn.vscode)&&this._markerService&&this._markerService.read({resource:t.uri}).map(function(o){return o.owner}).forEach(function(o){return r._markerService.remove(o,[t.uri])})},e.prototype._updateDecorations=function(t){var r=this,i=this._markerService.read({resource:t.model.uri,take:500}),o=i.map(function(s){return{range:r._createDecorationRange(t.model,s),options:r._createDecorationOption(s)}});t.update(i,o),this._onDidChangeMarker.fire(t.model)},e.prototype._createDecorationRange=function(t,r){var i=R.lift(r);if(r.severity===hn.Hint&&(!r.tags||r.tags.indexOf(1)===-1)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=t.validateRange(i),i.isEmpty()){var o=t.getWordAtPosition(i.getStartPosition());if(o)i=new R(i.startLineNumber,o.startColumn,i.endLineNumber,o.endColumn);else{var s=t.getLineLastNonWhitespaceColumn(i.startLineNumber)||t.getLineMaxColumn(i.startLineNumber);s===1||(i.endColumn>=s?i=new R(i.startLineNumber,s-1,i.endLineNumber,s):i=new R(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn+1))}}else if(r.endColumn===Number.MAX_VALUE&&r.startColumn===1&&i.startLineNumber===i.endLineNumber){var a=t.getLineFirstNonWhitespaceColumn(r.startLineNumber);a<i.endColumn&&(i=new R(i.startLineNumber,a,i.endLineNumber,i.endColumn),r.startColumn=a)}return i},e.prototype._createDecorationOption=function(t){var r,i=void 0,o,s=void 0;switch(t.severity){case hn.Hint:t.tags&&t.tags.indexOf(1)>=0?r="squiggly-unnecessary":r="squiggly-hint",o=0;break;case hn.Warning:r="squiggly-warning",i=os(txe),o=20;break;case hn.Info:r="squiggly-info",i=os(nxe),o=10;break;case hn.Error:default:r="squiggly-error",i=os(exe),o=30;break}return t.tags&&(t.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),t.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{stickiness:1,className:r,showIfCollapsed:!0,overviewRuler:{color:i,position:hs.Right},zIndex:o,inlineClassName:s}},e=QNe([p9(0,yo),p9(1,ib)],e),e}(te),tAe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nAe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},g9=function(n,e){return function(t,r){e(t,r,n)}},rAe=function(n){tAe(e,n);function e(t,r){var i=n.call(this)||this;return i._contextKeyService=t,i._configurationService=r,i._onDidChangeAccessibilitySupport=new j,i.onDidChangeAccessibilitySupport=i._onDidChangeAccessibilitySupport.event,i._accessibilityModeEnabledContext=X0.bindTo(i._contextKeyService),i._register(i._configurationService.onDidChangeConfiguration(function(o){o.affectsConfiguration("editor.accessibilitySupport")&&i._updateContextKey()})),i._updateContextKey(),i.onDidChangeAccessibilitySupport(function(){return i._updateContextKey()}),i}return e.prototype._updateContextKey=function(){var t=this.getAccessibilitySupport()===2,r=this._configurationService.getValue("editor.accessibilitySupport");this._accessibilityModeEnabledContext.set(r==="on"||r==="auto"&&t)},e=nAe([g9(0,rt),g9(1,Vr)],e),e}(te),iAe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oAe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},v9=function(n,e){return function(t,r){e(t,r,n)}},sAe=function(n){iAe(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.contextKeyService=t,i.configurationService=r,i._accessibilitySupport=0,i}return e.prototype.getAccessibilitySupport=function(){return this._accessibilitySupport},e=oAe([v9(0,rt),v9(1,Vr)],e),e}(rAe),aAe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zt;(function(n){var e=new ev,t=function(){function a(u,l){this._serviceId=u,this._factory=l,this._value=null}return Object.defineProperty(a.prototype,"id",{get:function(){return this._serviceId},enumerable:!0,configurable:!0}),a.prototype.get=function(u){if(!this._value){if(u&&(this._value=u[this._serviceId.toString()]),this._value||(this._value=this._factory(u)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value},a}();n.LazyStaticService=t;var r=[];function i(a,u){var l=new t(a,u);return r.push(l),l}function o(a){for(var u=new ev,l=0,f=ULe();l<f.length;l++){var h=f[l],d=h[0],g=h[1];u.set(d,g)}for(var v in a)a.hasOwnProperty(v)&&u.set(xt(v),a[v]);r.forEach(function(y){return u.set(y.id,y.get(a))});var m=new i9(u,!0);return u.set(Hn,m),[u,m]}n.init=o,n.instantiationService=i(Hn,function(){return new i9(e,!0)});var s=new sY;n.configurationService=i(Vr,function(){return s}),n.resourceConfigurationService=i(HG,function(){return new J1e(s)}),n.resourcePropertiesService=i(UG,function(){return new eSe(s)}),n.contextService=i(rY,function(){return new nSe}),n.labelService=i(NI,function(){return new iSe}),n.telemetryService=i($0,function(){return new tSe}),n.dialogService=i(vTe,function(){return new X1e}),n.notificationService=i(Hr,function(){return new Q1e}),n.markerService=i(ib,function(){return new $Ne}),n.modeService=i(mf,function(a){return new dke}),n.modelService=i(yo,function(a){return new _ke(n.configurationService.get(a),n.resourcePropertiesService.get(a))}),n.markerDecorationsService=i(yX,function(a){return new eAe(n.modelService.get(a),n.markerService.get(a))}),n.standaloneThemeService=i(Vd,function(){return new qke}),n.codeEditorService=i(an,function(a){return new Lke(n.standaloneThemeService.get(a))}),n.editorProgressService=i(MI,function(){return new Z1e}),n.storageService=i(_f,function(){return new GNe}),n.logService=i(IF,function(){return new CCe}),n.editorWorkerService=i(qs,function(a){return new ICe(n.modelService.get(a),n.resourceConfigurationService.get(a),n.logService.get(a))})})(Zt||(Zt={}));var uAe=function(n){aAe(e,n);function e(t,r){var i=n.call(this)||this,o=Zt.init(r),s=o[0],a=o[1];i._serviceCollection=s,i._instantiationService=a;var u=i.get(Vr),l=i.get(Hr),f=i.get($0),h=i.get(Ir),d=function(C,E){var D=null;return r&&(D=r[C.toString()]),D||(D=E()),i._serviceCollection.set(C,D),D},g=d(rt,function(){return i._register(new Xke(u))});d(Au,function(){return new sAe(g,u)}),d(jv,function(){return new LNe(g)});var v=d(bi,function(){return new iY(i._instantiationService)}),m=d(er,function(){return i._register(new oY(g,v,f,l,t))}),y=d(HZ,function(){return new oSe(t)}),b=d(vf,function(){return i._register(new gTe(y))});return d(Wd,function(){var C=new lTe(f,l,b,m,h);return C.configure({blockMouse:!1}),i._register(C)}),d(hY,function(){return new ZNe(v)}),d(g2,function(){return new rSe(Zt.modelService.get(yo))}),i}return e.prototype.get=function(t){var r=this._serviceCollection.get(t);if(!r)throw new Error("Missing service "+t);return r},e.prototype.set=function(t,r){this._serviceCollection.set(t,r)},e.prototype.has=function(t){return this._serviceCollection.has(t)},e}(te),rf=xt("openerService"),k2=Object.freeze({_serviceBrand:void 0,registerOpener:function(){return{dispose:function(){}}},registerValidator:function(){return{dispose:function(){}}},open:function(){return Promise.resolve(!1)}});function wX(n,e,t){var r=new uAe(n,e),i=null;r.has(pd)||(i=new Y1e,r.set(pd,i)),r.has(rf)||r.set(rf,new nwe(r.get(an),r.get(bi)));var o=t(r);return i&&i.setEditor(o),o}function lAe(n,e,t){return wX(n,t||{},function(r){return new nke(n,e,r,r.get(Hn),r.get(an),r.get(bi),r.get(rt),r.get(er),r.get(vf),r.get(Vd),r.get(Hr),r.get(Vr),r.get(Au))})}function cAe(n){return Zt.codeEditorService.get().onCodeEditorAdd(function(e){n(e)})}function fAe(n,e,t){return wX(n,t||{},function(r){return new rke(n,e,r,r.get(Hn),r.get(rt),r.get(er),r.get(vf),r.get(qs),r.get(an),r.get(Vd),r.get(Hr),r.get(Vr),r.get(Wd),null)})}function hAe(n,e){return new owe(n,e)}function m9(n,e,t){return Zt.modelService.get().createModel(n,e,t)}function dAe(n,e,t){if(n=n||"",!e){var r=n.indexOf(`
`),i=n;return r!==-1&&(i=n.substring(0,r)),m9(n,Zt.modeService.get().createByFilepathOrFirstLine(t||null,i),t)}return m9(n,Zt.modeService.get().create(e),t)}function pAe(n,e){Zt.modelService.get().setMode(n,Zt.modeService.get().create(e))}function gAe(n,e,t){n&&Zt.markerService.get().changeOne(e,n.uri,t)}function vAe(n){return Zt.markerService.get().read(n)}function mAe(n){return Zt.modelService.get().getModel(n)}function _Ae(){return Zt.modelService.get().getModels()}function yAe(n){return Zt.modelService.get().onModelAdded(n)}function bAe(n){return Zt.modelService.get().onModelRemoved(n)}function wAe(n){return Zt.modelService.get().onModelModeChanged(function(e){n({model:e.model,oldLanguage:e.oldModeId})})}function CAe(n){return TCe(Zt.modelService.get(),n)}function SAe(n,e){return kF.colorizeElement(Zt.standaloneThemeService.get(),Zt.modeService.get(),n,e)}function EAe(n,e,t){return kF.colorize(Zt.modeService.get(),n,e,t)}function IAe(n,e,t){return t===void 0&&(t=4),kF.colorizeModelLine(n,e,t)}function xAe(n){var e=mn.get(n);return e||{getInitialState:function(){return q0},tokenize:function(t,r,i){return WG(n,t,r,i)}}}function DAe(n,e){var t=Zt.modeService.get();t.triggerMode(e);for(var r=xAe(e),i=n.split(/\r\n|\r|\n/),o=[],s=r.getInitialState(),a=0,u=i.length;a<u;a++){var l=i[a],f=r.tokenize(l,s,0);o[a]=f.tokens,s=f.endState}return o}function LAe(n,e){Zt.standaloneThemeService.get().defineTheme(n,e)}function kAe(n){Zt.standaloneThemeService.get().setTheme(n)}function TAe(){hSe()}function NAe(){return{create:lAe,onDidCreateEditor:cAe,createDiffEditor:fAe,createDiffNavigator:hAe,createModel:dAe,setModelLanguage:pAe,setModelMarkers:gAe,getModelMarkers:vAe,getModels:_Ae,getModel:mAe,onDidCreateModel:yAe,onWillDisposeModel:bAe,onDidChangeModelLanguage:wAe,createWebWorker:CAe,colorizeElement:SAe,colorize:EAe,colorizeModelLine:IAe,tokenize:DAe,defineTheme:LAe,setTheme:kAe,remeasureFonts:TAe,ScrollbarVisibility:JA,WrappingIndent:lO,OverviewRulerLane:eO,MinimapPosition:tO,EndOfLinePreference:nO,DefaultEndOfLine:rO,EndOfLineSequence:iO,TrackedRangeStickiness:oO,CursorChangeReason:aO,MouseTargetType:gO,TextEditorCursorStyle:fO,TextEditorCursorBlinkingStyle:cO,ContentWidgetPositionPreference:dO,OverlayWidgetPositionPreference:pO,RenderMinimap:uO,ScrollType:sO,RenderLineNumbersType:hO,InternalEditorOptions:JK,BareFontInfo:mF,FontInfo:MO,TextModelResolvedOptions:YC,FindMatch:My,EditorType:uI}}function AAe(n,e){if(!e||!Array.isArray(e))return!1;for(var t=0,r=e;t<r.length;t++){var i=r[t];if(!n(i))return!1}return!0}function _9(n,e){return typeof n=="boolean"?n:e}function y9(n,e){return typeof n=="string"?n:e}function OAe(n){for(var e={},t=0,r=n;t<r.length;t++){var i=r[t];e[i]=!0}return e}function b9(n,e){e===void 0&&(e=!1),e&&(n=n.map(function(r){return r.toLowerCase()}));var t=OAe(n);return e?function(r){return t[r.toLowerCase()]!==void 0&&t.hasOwnProperty(r.toLowerCase())}:function(r){return t[r]!==void 0&&t.hasOwnProperty(r)}}function CR(n,e){for(var t=0;e.indexOf("@")>=0&&t<5;)t++,e=e.replace(/@(\w+)/g,function(r,i){var o="";if(typeof n[i]=="string")o=n[i];else if(n[i]&&n[i]instanceof RegExp)o=n[i].source;else throw n[i]===void 0?Vt(n,"language definition does not contain attribute '"+i+"', used at: "+e):Vt(n,"attribute reference '"+i+"' must be a string, used at: "+e);return Yp(o)?"":"(?:"+o+")"});return new RegExp(e,n.ignoreCase?"i":"")}function RAe(n,e,t,r){if(r<0)return n;if(r<e.length)return e[r];if(r>=100){r=r-100;var i=t.split(".");if(i.unshift(t),r<i.length)return i[r]}return null}function MAe(n,e,t,r){var i=-1,o=t,s=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);s&&(s[3]&&(i=parseInt(s[3]),s[2]&&(i=i+100)),o=s[4]);var a="~",u=o;!o||o.length===0?(a="!=",u=""):/^\w*$/.test(u)?a="==":(s=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),s&&(a=s[1],u=s[2]));var l;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(u)){var f=b9(u.split("|"),n.ignoreCase);l=function(y){return a==="~"?f(y):!f(y)}}else if(a==="@"||a==="!@"){var h=n[u];if(!h)throw Vt(n,"the @ match target '"+u+"' is not defined, in rule: "+e);if(!AAe(function(y){return typeof y=="string"},h))throw Vt(n,"the @ match target '"+u+"' must be an array of strings, in rule: "+e);var d=b9(h,n.ignoreCase);l=function(y){return a==="@"?d(y):!d(y)}}else if(a==="~"||a==="!~")if(u.indexOf("$")<0){var g=CR(n,"^"+u+"$");l=function(y){return a==="~"?g.test(y):!g.test(y)}}else l=function(y,b,C,E){var D=CR(n,"^"+vc(n,u,b,C,E)+"$");return D.test(y)};else if(u.indexOf("$")<0){var v=Wc(n,u);l=function(y){return a==="=="?y===v:y!==v}}else{var m=Wc(n,u);l=function(y,b,C,E,D){var k=vc(n,m,b,C,E);return a==="=="?y===k:y!==k}}return i===-1?{name:t,value:r,test:function(y,b,C,E){return l(y,y,b,C,E)}}:{name:t,value:r,test:function(y,b,C,E){var D=RAe(y,b,C,i);return l(D||"",y,b,C,E)}}}function SR(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Vt(n,"a 'token' attribute must be of type string, in rule: "+e);var r={token:t.token};if(t.token.indexOf("$")>=0&&(r.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")r.bracket=1;else if(t.bracket==="@close")r.bracket=-1;else throw Vt(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Vt(n,"the next state must be a string value in rule: "+e);var i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!XCe(n,vc(n,i,"",[],""))))throw Vt(n,"the next state '"+t.next+"' is not defined in rule: "+e);r.next=i}return typeof t.goBack=="number"&&(r.goBack=t.goBack),typeof t.switchTo=="string"&&(r.switchTo=t.switchTo),typeof t.log=="string"&&(r.log=t.log),typeof t.nextEmbedded=="string"&&(r.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),r}else if(Array.isArray(t)){for(var o=[],s=0,a=t.length;s<a;s++)o[s]=SR(n,e,t[s]);return{group:o}}else if(t.cases){var u=[];for(var l in t.cases)if(t.cases.hasOwnProperty(l)){var f=SR(n,e,t.cases[l]);l==="@default"||l==="@"||l===""?u.push({test:void 0,value:f,name:l}):l==="@eos"?u.push({test:function(d,g,v,m){return m},value:f,name:l}):u.push(MAe(n,e,l,f))}var h=n.defaultToken;return{test:function(d,g,v,m){for(var y=0,b=u;y<b.length;y++){var C=b[y],E=!C.test||C.test(d,g,v,m);if(E)return C.value}return h}}}else throw Vt(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}var PAe=function(){function n(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}return n.prototype.setRegex=function(e,t){var r;if(typeof t=="string")r=t;else if(t instanceof RegExp)r=t.source;else throw Vt(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=r.length>0&&r[0]==="^",this.name=this.name+": "+r,this.regex=CR(e,"^(?:"+(this.matchOnlyAtLineStart?r.substr(1):r)+")")},n.prototype.setAction=function(e,t){this.action=SR(e,this.name,t)},n}();function FAe(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");var t={};t.languageId=n,t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=_9(e.ignoreCase,!1),t.tokenPostfix=y9(e.tokenPostfix,"."+t.languageId),t.defaultToken=y9(e.defaultToken,"source"),t.usesEmbedded=!1;var r=e;r.languageId=n,r.ignoreCase=t.ignoreCase,r.noThrow=t.noThrow,r.usesEmbedded=t.usesEmbedded,r.stateNames=e.tokenizer,r.defaultToken=t.defaultToken;function i(d,g,v){for(var m=0,y=v;m<y.length;m++){var b=y[m],C=b.include;if(C){if(typeof C!="string")throw Vt(t,"an 'include' attribute must be a string at: "+d);if(C[0]==="@"&&(C=C.substr(1)),!e.tokenizer[C])throw Vt(t,"include target '"+C+"' is not defined at: "+d);i(d+"."+C,g,e.tokenizer[C])}else{var E=new PAe(d);if(Array.isArray(b)&&b.length>=1&&b.length<=3)if(E.setRegex(r,b[0]),b.length>=3)if(typeof b[1]=="string")E.setAction(r,{token:b[1],next:b[2]});else if(typeof b[1]=="object"){var D=b[1];D.next=b[2],E.setAction(r,D)}else throw Vt(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+d);else E.setAction(r,b[1]);else{if(!b.regex)throw Vt(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+d);b.name&&typeof b.name=="string"&&(E.name=b.name),b.matchOnlyAtStart&&(E.matchOnlyAtLineStart=_9(b.matchOnlyAtLineStart,!1)),E.setRegex(r,b.regex),E.setAction(r,b.action)}g.push(E)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Vt(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(var o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);var s=e.tokenizer[o];t.tokenizer[o]=new Array,i("tokenizer."+o,t.tokenizer[o],s)}if(t.usesEmbedded=r.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Vt(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];for(var a=[],u=0,l=e.brackets;u<l.length;u++){var f=l[u],h=f;if(h&&Array.isArray(h)&&h.length===3&&(h={token:h[2],open:h[0],close:h[1]}),h.open===h.close)throw Vt(t,"open and close brackets in a 'brackets' attribute must be different: "+h.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof h.open=="string"&&typeof h.token=="string"&&typeof h.close=="string")a.push({token:h.token+t.tokenPostfix,open:Wc(t,h.open),close:Wc(t,h.close)});else throw Vt(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=a,t.noThrow=!0,t}function BAe(n){nd.registerLanguage(n)}function WAe(){var n=[];return n=n.concat(nd.getLanguages()),n}function VAe(n){var e=Zt.modeService.get().getLanguageIdentifier(n);return e?e.id:0}function HAe(n,e){var t=Zt.modeService.get().onDidCreateMode(function(r){r.getId()===n&&(t.dispose(),e())});return t}function UAe(n,e){var t=Zt.modeService.get().getLanguageIdentifier(n);if(!t)throw new Error("Cannot set configuration for unknown language "+n);return gt.register(t,e)}var jAe=function(){function n(e){this._actual=e}return n.prototype.getInitialState=function(){return this._actual.getInitialState()},n.prototype.tokenize=function(e,t,r){throw new Error("Not supported!")},n.prototype.tokenize2=function(e,t){var r=this._actual.tokenizeEncoded(e,t);return new iI(r.tokens,r.endState)},n}(),zAe=function(){function n(e,t,r){this._standaloneThemeService=e,this._languageIdentifier=t,this._actual=r}return n.prototype.getInitialState=function(){return this._actual.getInitialState()},n.prototype._toClassicTokens=function(e,t,r){for(var i=[],o=0,s=0,a=e.length;s<a;s++){var u=e[s],l=u.startIndex;s===0?l=0:l<o&&(l=o),i[s]=new rI(l+r,u.scopes,t),o=l}return i},n.prototype.tokenize=function(e,t,r){var i=this._actual.tokenize(e,t),o=this._toClassicTokens(i.tokens,this._languageIdentifier.language,r),s;return i.endState.equals(t)?s=t:s=i.endState,new QP(o,s)},n.prototype._toBinaryTokens=function(e,t){for(var r=this._languageIdentifier.id,i=this._standaloneThemeService.getTheme().tokenTheme,o=[],s=0,a=0,u=0,l=e.length;u<l;u++){var f=e[u],h=i.match(r,f.scopes);if(!(s>0&&o[s-1]===h)){var d=f.startIndex;u===0?d=0:d<a&&(d=a),o[s++]=d+t,o[s++]=h,a=d}}for(var g=new Uint32Array(s),u=0;u<s;u++)g[u]=o[u];return g},n.prototype.tokenize2=function(e,t,r){var i=this._actual.tokenize(e,t),o=this._toBinaryTokens(i.tokens,r),s;return i.endState.equals(t)?s=t:s=i.endState,new iI(o,s)},n}();function qAe(n){return"tokenizeEncoded"in n}function CX(n){return n&&typeof n.then=="function"}function $Ae(n,e){var t=Zt.modeService.get().getLanguageIdentifier(n);if(!t)throw new Error("Cannot set tokens provider for unknown language "+n);var r=function(i){return qAe(i)?new jAe(i):new zAe(Zt.standaloneThemeService.get(),t,i)};return CX(e)?mn.registerPromise(n,e.then(function(i){return r(i)})):mn.register(n,r(e))}function KAe(n,e){var t=function(r){return t1e(Zt.modeService.get(),Zt.standaloneThemeService.get(),n,FAe(n,r))};return CX(e)?mn.registerPromise(n,e.then(function(r){return t(r)})):mn.register(n,t(e))}function GAe(n,e){return Q1.register(n,e)}function YAe(n,e){return J1.register(n,e)}function ZAe(n,e){return Yh.register(n,e)}function XAe(n,e){return Fy.register(n,{provideHover:function(t,r,i){var o=t.getWordAtPosition(r);return Promise.resolve(e.provideHover(t,r,i)).then(function(s){if(s)return!s.range&&o&&(s.range=new R(r.lineNumber,o.startColumn,r.lineNumber,o.endColumn)),s.range||(s.range=new R(r.lineNumber,r.column,r.lineNumber,r.column)),s})}})}function QAe(n,e){return Ic.register(n,e)}function JAe(n,e){return $g.register(n,e)}function eOe(n,e){return By.register(n,e)}function tOe(n,e){return tS.register(n,e)}function nOe(n,e){return nS.register(n,e)}function rOe(n,e){return Zh.register(n,e)}function iOe(n,e){return hl.register(n,{provideCodeActions:function(t,r,i,o){var s=Zt.markerService.get().read({resource:t.uri}).filter(function(a){return R.areIntersectingOrTouching(a,r)});return e.provideCodeActions(t,r,{markers:s,only:i.only},o)}})}function oOe(n,e){return z_.register(n,e)}function sOe(n,e){return va.register(n,e)}function aOe(n,e){return rS.register(n,e)}function uOe(n,e){return Wy.register(n,e)}function lOe(n,e){return ru.register(n,e)}function cOe(n,e){return Kg.register(n,e)}function fOe(n,e){return PO.register(n,e)}function hOe(n,e){return eS.register(n,e)}function dOe(n,e){return cI.register(n,e)}function pOe(){return{register:BAe,getLanguages:WAe,onLanguage:HAe,getEncodedLanguageId:VAe,setLanguageConfiguration:UAe,setTokensProvider:$Ae,setMonarchTokensProvider:KAe,registerReferenceProvider:GAe,registerRenameProvider:YAe,registerCompletionItemProvider:lOe,registerSignatureHelpProvider:ZAe,registerHoverProvider:XAe,registerDocumentSymbolProvider:QAe,registerDocumentHighlightProvider:JAe,registerDefinitionProvider:eOe,registerImplementationProvider:tOe,registerTypeDefinitionProvider:nOe,registerCodeLensProvider:rOe,registerCodeActionProvider:iOe,registerDocumentFormattingEditProvider:oOe,registerDocumentRangeFormattingEditProvider:sOe,registerOnTypeFormattingEditProvider:aOe,registerLinkProvider:uOe,registerColorProvider:cOe,registerFoldingRangeProvider:fOe,registerDeclarationProvider:hOe,registerSelectionRangeProvider:dOe,DocumentHighlightKind:CO,CompletionItemKind:mO,CompletionItemTag:_O,CompletionItemInsertTextRule:yO,SymbolKind:SO,SymbolTag:EO,IndentAction:vO,CompletionTriggerKind:bO,SignatureHelpTriggerKind:wO,FoldingRangeKind:lI}}var o1=self;Tu.wrappingIndent=0;Tu.viewInfo.glyphMargin=!1;Tu.autoIndent=!1;var wi=aG();wi.editor=NAe();wi.languages=pOe();wi.CancellationTokenSource;wi.Emitter;wi.KeyCode;wi.KeyMod;wi.Position;var u_=wi.Range;wi.Selection;wi.SelectionDirection;wi.MarkerSeverity;wi.MarkerTag;wi.Uri;wi.Token;var xg=wi.editor;wi.languages;o1.monaco=wi;typeof o1.require<"u"&&typeof o1.require.config=="function"&&o1.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var gOe="3.5.1",w9=monaco.Emitter,SX=function(){function n(e,t){this._onDidChange=new w9,this._onDidExtraLibsChange=new w9,this._extraLibs=Object.create(null),this._workerMaxIdleTime=2*60*1e3,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this._onDidExtraLibsChangeTimeout=-1}return Object.defineProperty(n.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onDidExtraLibsChange",{get:function(){return this._onDidExtraLibsChange.event},enumerable:!0,configurable:!0}),n.prototype.getExtraLibs=function(){return this._extraLibs},n.prototype.addExtraLib=function(e,t){var r=this;if(typeof t>"u"&&(t="ts:extralib-"+Math.random().toString(36).substring(2,15)),this._extraLibs[t]&&this._extraLibs[t].content===e)return{dispose:function(){}};var i=1;return this._extraLibs[t]&&(i=this._extraLibs[t].version+1),this._extraLibs[t]={content:e,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:function(){var o=r._extraLibs[t];o&&o.version===i&&(delete r._extraLibs[t],r._fireOnDidExtraLibsChangeSoon())}}},n.prototype._fireOnDidExtraLibsChangeSoon=function(){var e=this;this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=setTimeout(function(){e._onDidExtraLibsChangeTimeout=-1,e._onDidExtraLibsChange.fire(void 0)},0))},n.prototype.getCompilerOptions=function(){return this._compilerOptions},n.prototype.setCompilerOptions=function(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)},n.prototype.getDiagnosticsOptions=function(){return this._diagnosticsOptions},n.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)},n.prototype.setMaximumWorkerIdleTime=function(e){this._workerMaxIdleTime=e},n.prototype.getWorkerMaxIdleTime=function(){return this._workerMaxIdleTime},n.prototype.setEagerModelSync=function(e){this._eagerModelSync=e},n.prototype.getEagerModelSync=function(){return this._eagerModelSync},n}(),ER;(function(n){n[n.None=0]="None",n[n.CommonJS=1]="CommonJS",n[n.AMD=2]="AMD",n[n.UMD=3]="UMD",n[n.System=4]="System",n[n.ES2015=5]="ES2015",n[n.ESNext=99]="ESNext"})(ER||(ER={}));var IR;(function(n){n[n.None=0]="None",n[n.Preserve=1]="Preserve",n[n.React=2]="React",n[n.ReactNative=3]="ReactNative"})(IR||(IR={}));var xR;(function(n){n[n.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",n[n.LineFeed=1]="LineFeed"})(xR||(xR={}));var Xy;(function(n){n[n.ES3=0]="ES3",n[n.ES5=1]="ES5",n[n.ES2015=2]="ES2015",n[n.ES2016=3]="ES2016",n[n.ES2017=4]="ES2017",n[n.ES2018=5]="ES2018",n[n.ES2019=6]="ES2019",n[n.ES2020=7]="ES2020",n[n.ESNext=99]="ESNext",n[n.JSON=100]="JSON",n[n.Latest=99]="Latest"})(Xy||(Xy={}));var DR;(function(n){n[n.Classic=1]="Classic",n[n.NodeJs=2]="NodeJs"})(DR||(DR={}));var EX=new SX({allowNonTsExtensions:!0,target:Xy.Latest},{noSemanticValidation:!1,noSyntaxValidation:!1}),IX=new SX({allowNonTsExtensions:!0,allowJs:!0,target:Xy.Latest},{noSemanticValidation:!0,noSyntaxValidation:!1});function vOe(){return PI().then(function(n){return n.getTypeScriptWorker()})}function mOe(){return PI().then(function(n){return n.getJavaScriptWorker()})}function _Oe(){return{ModuleKind:ER,JsxEmit:IR,NewLineKind:xR,ScriptTarget:Xy,ModuleResolutionKind:DR,typescriptVersion:gOe,typescriptDefaults:EX,javascriptDefaults:IX,getTypeScriptWorker:vOe,getJavaScriptWorker:mOe}}monaco.languages.typescript=_Oe();function PI(){return Ve(()=>import("./tsMode-xKRrtrtT.js"),[])}monaco.languages.onLanguage("typescript",function(){return PI().then(function(n){return n.setupTypeScript(EX)})});monaco.languages.onLanguage("javascript",function(){return PI().then(function(n){return n.setupJavaScript(IX)})});var yOe=monaco.Emitter,T2=function(){function n(e,t){this._onDidChange=new yOe,this._languageId=e,this.setDiagnosticsOptions(t)}return Object.defineProperty(n.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!0,configurable:!0}),n.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},n}(),N2={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"}},xX=new T2("css",N2),DX=new T2("scss",N2),LX=new T2("less",N2);function bOe(){return{cssDefaults:xX,lessDefaults:LX,scssDefaults:DX}}monaco.languages.css=bOe();function A2(){return Ve(()=>import("./cssMode-ByoFQ6w7.js"),[])}monaco.languages.onLanguage("less",function(){A2().then(function(n){return n.setupMode(LX)})});monaco.languages.onLanguage("scss",function(){A2().then(function(n){return n.setupMode(DX)})});monaco.languages.onLanguage("css",function(){A2().then(function(n){return n.setupMode(xX)})});var wOe=monaco.Emitter,COe=function(){function n(e,t,r){this._onDidChange=new wOe,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(r)}return Object.defineProperty(n.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!0,configurable:!0}),n.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},n.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},n}(),SOe={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1},EOe={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0},kX=new COe("json",SOe,EOe);function IOe(){return{jsonDefaults:kX}}monaco.languages.json=IOe();function xOe(){return Ve(()=>import("./jsonMode-DsAMagc9.js"),[])}monaco.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});monaco.languages.onLanguage("json",function(){xOe().then(function(n){return n.setupMode(kX)})});var DOe=monaco.Emitter,O2=function(){function n(e,t){this._onDidChange=new DOe,this._languageId=e,this.setOptions(t)}return Object.defineProperty(n.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),n.prototype.setOptions=function(e){this._options=e||Object.create(null),this._onDidChange.fire(this)},n}(),R2={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:null,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},LOe={format:R2,suggest:{html5:!0,angular1:!0,ionic:!0}},kOe={format:R2,suggest:{html5:!0}},TOe={format:R2,suggest:{html5:!0,razor:!0}},TX="html",NX="handlebars",AX="razor",OX=new O2(TX,LOe),RX=new O2(NX,kOe),MX=new O2(AX,TOe);function NOe(){return{htmlDefaults:OX,razorDefaults:MX,handlebarDefaults:RX}}monaco.languages.html=NOe();function M2(){return Ve(()=>import("./htmlMode-CwD2Js95.js"),[])}monaco.languages.onLanguage(TX,function(){M2().then(function(n){return n.setupMode(OX)})});monaco.languages.onLanguage(NX,function(){M2().then(function(n){return n.setupMode(RX)})});monaco.languages.onLanguage(AX,function(){M2().then(function(n){return n.setupMode(MX)})});var FS=typeof monaco>"u"?self.monaco:monaco,PX={};function AOe(n){var e=PX[n].loader;return e().then(function(t){FS.languages.setMonarchTokensProvider(n,t.language),FS.languages.setLanguageConfiguration(n,t.conf)})}var nN={};function OOe(n){return nN[n]||(nN[n]=AOe(n)),nN[n]}function je(n){var e=n.id;PX[e]=n,FS.languages.register(n),FS.languages.onLanguage(e,function(){OOe(e)})}je({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:function(){return Ve(()=>import("./abap-CroyChCn.js"),[])}});je({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:function(){return Ve(()=>import("./bat-DPkNLes8.js"),[])}});je({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:function(){return Ve(()=>import("./coffee-B7EJu28W.js"),[])}});je({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:function(){return Ve(()=>import("./cpp-BEB0WcoC.js"),[])}});je({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:function(){return Ve(()=>import("./cpp-BEB0WcoC.js"),[])}});je({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:function(){return Ve(()=>import("./csharp-DWIp4pSg.js"),[])}});je({id:"csp",extensions:[],aliases:["CSP","csp"],loader:function(){return Ve(()=>import("./csp-C46ZqvIl.js"),[])}});je({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:function(){return Ve(()=>import("./css-DUIZ76Ch.js"),[])}});je({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:function(){return Ve(()=>import("./dockerfile-C1cGoIR-.js"),[])}});je({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:function(){return Ve(()=>import("./fsharp-fd1GTHhf.js"),[])}});je({id:"go",extensions:[".go"],aliases:["Go"],loader:function(){return Ve(()=>import("./go-O9LJTZXk.js"),[])}});je({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars"],mimetypes:["text/x-handlebars-template"],loader:function(){return Ve(()=>import("./handlebars-BvkMZJ20.js"),[])}});je({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:function(){return Ve(()=>import("./html-3yF9IKqR.js"),[])}});je({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:function(){return Ve(()=>import("./ini-BvajGCUy.js"),[])}});je({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:function(){return Ve(()=>import("./java-DPgNP7lh.js"),[])}});je({id:"javascript",extensions:[".js",".es6",".jsx"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:function(){return Ve(()=>import("./javascript-B50b1xvf.js"),__vite__mapDeps([0,1]))}});je({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:function(){return Ve(()=>import("./kotlin-DNEyQ-_b.js"),[])}});je({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:function(){return Ve(()=>import("./less-B86-qBTk.js"),[])}});je({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:function(){return Ve(()=>import("./lua-D28Ae8-K.js"),[])}});je({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:function(){return Ve(()=>import("./markdown-B78DZXM-.js"),[])}});je({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:function(){return Ve(()=>import("./mips-CdjsipkG.js"),[])}});je({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:function(){return Ve(()=>import("./msdax-CYqgjx_P.js"),[])}});je({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:function(){return Ve(()=>import("./mysql-BAlWi9Ou.js"),[])}});je({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:function(){return Ve(()=>import("./objective-c-B1aVtJYH.js"),[])}});je({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:function(){return Ve(()=>import("./pascal-DTluBHOt.js"),[])}});je({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:function(){return Ve(()=>import("./pascaligo-5jv8CcQD.js"),[])}});je({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:function(){return Ve(()=>import("./pgsql-M-WMQIqP.js"),[])}});je({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:function(){return Ve(()=>import("./php-120yhfDK.js"),[])}});je({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:function(){return Ve(()=>import("./postiats-CQpG440k.js"),[])}});je({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:function(){return Ve(()=>import("./powerquery-DdJtto1Z.js"),[])}});je({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:function(){return Ve(()=>import("./powershell-Bu_VLpJB.js"),[])}});je({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:function(){return Ve(()=>import("./pug-kFxLfcjb.js"),[])}});je({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:function(){return Ve(()=>import("./python-BkTgHGXl.js"),[])}});je({id:"r",extensions:[".r",".rhistory",".rprofile",".rt"],aliases:["R","r"],loader:function(){return Ve(()=>import("./r-DTzboqR4.js"),[])}});je({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:function(){return Ve(()=>import("./razor-erwnNA65.js"),[])}});je({id:"redis",extensions:[".redis"],aliases:["redis"],loader:function(){return Ve(()=>import("./redis-CHOsPHWR.js"),[])}});je({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:function(){return Ve(()=>import("./redshift-C7PkzcsH.js"),[])}});je({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile"],aliases:["Ruby","rb"],loader:function(){return Ve(()=>import("./ruby-Dg4z_gXy.js"),[])}});je({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:function(){return Ve(()=>import("./rust-BCqVQ9nX.js"),[])}});je({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:function(){return Ve(()=>import("./sb-BYAiYHFx.js"),[])}});je({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:function(){return Ve(()=>import("./scss-CdQcnAnq.js"),[])}});je({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:function(){return Ve(()=>import("./sophia-RYC1BQQz.js"),[])}});je({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:function(){return Ve(()=>import("./solidity-CME5AdoB.js"),[])}});je({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:function(){return Ve(()=>import("./sql-CbGH2FIt.js"),[])}});je({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:function(){return Ve(()=>import("./st-C9od-Za1.js"),[])}});je({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:function(){return Ve(()=>import("./swift-CDHAPRNA.js"),[])}});je({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:function(){return Ve(()=>import("./tcl-CVK_QlCp.js"),[])}});je({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:function(){return Ve(()=>import("./twig-bne2BnKZ.js"),[])}});je({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:function(){return Ve(()=>import("./typescript-3a6SNL6q.js"),[])}});je({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:function(){return Ve(()=>import("./vb-DgkWD2cI.js"),[])}});je({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:function(){return Ve(()=>import("./xml-DfgkohBE.js"),[])}});je({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"],loader:function(){return Ve(()=>import("./yaml-BR93gJIW.js"),[])}});je({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:function(){return Ve(()=>import("./scheme-Dhb-2j9p.js"),[])}});je({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:function(){return Ve(()=>import("./clojure-D9WOWImG.js"),[])}});je({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:function(){return Ve(()=>import("./shell-CmmbcNmB.js"),[])}});je({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:function(){return Ve(()=>import("./perl-DlYyT36c.js"),[])}});je({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:function(){return Ve(()=>import("./azcli-1IWB1ccx.js"),[])}});je({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:function(){return Ve(()=>import("./apex-BL_CmIl-.js"),[])}});je({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:function(){return Ve(()=>import("./graphql-DV_i635h.js"),[])}});var P2=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ROe=G("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},S("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets.")),MOe=function(n){P2(e,n);function e(){return n.call(this,{id:"editor.action.jumpToBracket",label:S("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:P.editorTextFocus,primary:3160,weight:100}})||this}return e.prototype.run=function(t,r){var i=F2.get(r);i&&i.jumpToBracket()},e}(Ne),POe=function(n){P2(e,n);function e(){return n.call(this,{id:"editor.action.selectToBracket",label:S("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0})||this}return e.prototype.run=function(t,r){var i=F2.get(r);i&&i.selectToBracket()},e}(Ne),FOe=function(){function n(e,t){this.position=e,this.brackets=t}return n}(),F2=function(n){P2(e,n);function e(t){var r=n.call(this)||this;return r._editor=t,r._lastBracketsData=[],r._lastVersionId=0,r._decorations=[],r._updateBracketsSoon=r._register(new hr(function(){return r._updateBrackets()},50)),r._matchBrackets=r._editor.getConfiguration().contribInfo.matchBrackets,r._updateBracketsSoon.schedule(),r._register(t.onDidChangeCursorPosition(function(i){r._matchBrackets&&r._updateBracketsSoon.schedule()})),r._register(t.onDidChangeModelContent(function(i){r._updateBracketsSoon.schedule()})),r._register(t.onDidChangeModel(function(i){r._lastBracketsData=[],r._decorations=[],r._updateBracketsSoon.schedule()})),r._register(t.onDidChangeModelLanguageConfiguration(function(i){r._lastBracketsData=[],r._updateBracketsSoon.schedule()})),r._register(t.onDidChangeConfiguration(function(i){r._matchBrackets=r._editor.getConfiguration().contribInfo.matchBrackets,!r._matchBrackets&&r._decorations.length>0&&(r._decorations=r._editor.deltaDecorations(r._decorations,[])),r._updateBracketsSoon.schedule()})),r}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.jumpToBracket=function(){if(this._editor.hasModel()){var t=this._editor.getModel(),r=this._editor.getSelections().map(function(i){var o=i.getStartPosition(),s=t.matchBracket(o),a=null;if(s)s[0].containsPosition(o)?a=s[1].getStartPosition():s[1].containsPosition(o)&&(a=s[0].getStartPosition());else{var u=t.findNextBracket(o);u&&u.range&&(a=u.range.getStartPosition())}return a?new Ce(a.lineNumber,a.column,a.lineNumber,a.column):new Ce(o.lineNumber,o.column,o.lineNumber,o.column)});this._editor.setSelections(r),this._editor.revealRange(r[0])}},e.prototype.selectToBracket=function(){if(this._editor.hasModel()){var t=this._editor.getModel(),r=[];this._editor.getSelections().forEach(function(i){var o=i.getStartPosition(),s=t.matchBracket(o),a=null,u=null;if(!s){var l=t.findNextBracket(o);l&&l.range&&(s=t.matchBracket(l.range.getStartPosition()))}s&&(s[0].startLineNumber===s[1].startLineNumber?(a=s[1].startColumn<s[0].startColumn?s[1].getStartPosition():s[0].getStartPosition(),u=s[1].startColumn<s[0].startColumn?s[0].getEndPosition():s[1].getEndPosition()):(a=s[1].startLineNumber<s[0].startLineNumber?s[1].getStartPosition():s[0].getStartPosition(),u=s[1].startLineNumber<s[0].startLineNumber?s[0].getEndPosition():s[1].getEndPosition())),a&&u&&r.push(new Ce(a.lineNumber,a.column,u.lineNumber,u.column))}),r.length>0&&(this._editor.setSelections(r),this._editor.revealRange(r[0]))}},e.prototype._updateBrackets=function(){if(this._matchBrackets){this._recomputeBrackets();for(var t=[],r=0,i=0,o=this._lastBracketsData.length;i<o;i++){var s=this._lastBracketsData[i].brackets;s&&(t[r++]={range:s[0],options:e._DECORATION_OPTIONS},t[r++]={range:s[1],options:e._DECORATION_OPTIONS})}this._decorations=this._editor.deltaDecorations(this._decorations,t)}},e.prototype._recomputeBrackets=function(){if(!this._editor.hasModel()){this._lastBracketsData=[],this._lastVersionId=0;return}var t=this._editor.getModel(),r=t.getVersionId(),i=[];this._lastVersionId===r&&(i=this._lastBracketsData);for(var o=this._editor.getSelections(),s=[],a=0,u=0,l=o.length;u<l;u++){var f=o[u];f.isEmpty()&&(s[a++]=f.getStartPosition())}s.length>1&&s.sort($.compare);for(var h=[],d=0,g=0,v=i.length,u=0,l=s.length;u<l;u++){for(var m=s[u];g<v&&i[g].position.isBefore(m);)g++;if(g<v&&i[g].position.equals(m))h[d++]=i[g];else{var y=t.matchBracket(m);h[d++]=new FOe(m,y)}}this._lastBracketsData=h,this._lastVersionId=r},e.ID="editor.contrib.bracketMatchingController",e._DECORATION_OPTIONS=tt.register({stickiness:1,className:"bracket-match",overviewRuler:{color:os(ROe),position:hs.Center}}),e}(te);tn(F2);re(POe);re(MOe);Xt(function(n,e){var t=n.getColor(YIe);t&&e.addRule(".monaco-editor .bracket-match { background-color: "+t+"; }");var r=n.getColor(rZ);r&&e.addRule(".monaco-editor .bracket-match { border: 1px solid "+r+"; }")});Ta.appendMenuItem(16,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:S({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});var BOe=function(){function n(e,t){this._selection=e,this._isMovingLeft=t,this._cutStartIndex=-1,this._cutEndIndex=-1,this._moved=!1,this._selectionId=null}return n.prototype.getEditOperations=function(e,t){var r=this._selection;if(this._selectionId=t.trackSelection(r),r.startLineNumber===r.endLineNumber&&!(this._isMovingLeft&&r.startColumn===0)&&!(!this._isMovingLeft&&r.endColumn===e.getLineMaxColumn(r.startLineNumber))){var i=r.selectionStartLineNumber,o=e.getLineContent(i),s,a,u;this._isMovingLeft?(s=o.substring(0,r.startColumn-2),a=o.substring(r.startColumn-1,r.endColumn-1),u=o.substring(r.startColumn-2,r.startColumn-1)+o.substring(r.endColumn-1)):(s=o.substring(0,r.startColumn-1)+o.substring(r.endColumn-1,r.endColumn),a=o.substring(r.startColumn-1,r.endColumn-1),u=o.substring(r.endColumn));var l=s+a+u;t.addEditOperation(new R(i,1,i,e.getLineMaxColumn(i)),null),t.addEditOperation(new R(i,1,i,1),l),this._cutStartIndex=r.startColumn+(this._isMovingLeft?-1:1),this._cutEndIndex=this._cutStartIndex+r.endColumn-r.startColumn,this._moved=!0}},n.prototype.computeCursorState=function(e,t){var r=t.getTrackedSelection(this._selectionId);return this._moved&&(r=r.setStartPosition(r.startLineNumber,this._cutStartIndex),r=r.setEndPosition(r.startLineNumber,this._cutEndIndex)),r},n}(),B2=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FX=function(n){B2(e,n);function e(t,r){var i=n.call(this,r)||this;return i.left=t,i}return e.prototype.run=function(t,r){if(r.hasModel()){for(var i=[],o=r.getSelections(),s=0,a=o;s<a.length;s++){var u=a[s];i.push(new BOe(u,this.left))}r.pushUndoStop(),r.executeCommands(this.id,i),r.pushUndoStop()}},e}(Ne),WOe=function(n){B2(e,n);function e(){return n.call(this,!0,{id:"editor.action.moveCarretLeftAction",label:S("caret.moveLeft","Move Caret Left"),alias:"Move Caret Left",precondition:P.writable})||this}return e}(FX),VOe=function(n){B2(e,n);function e(){return n.call(this,!1,{id:"editor.action.moveCarretRightAction",label:S("caret.moveRight","Move Caret Right"),alias:"Move Caret Right",precondition:P.writable})||this}return e}(FX);re(WOe);re(VOe);var HOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UOe=function(n){HOe(e,n);function e(){return n.call(this,{id:"editor.action.transposeLetters",label:S("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:P.writable,kbOpts:{kbExpr:P.textInputFocus,primary:0,mac:{primary:306},weight:100}})||this}return e.prototype.positionLeftOf=function(t,r){var i=t.column,o=t.lineNumber;return i>r.getLineMinColumn(o)?uF(r.getLineContent(o).charCodeAt(i-2))?i=i-2:i=i-1:o>1&&(o=o-1,i=r.getLineMaxColumn(o)),new $(o,i)},e.prototype.positionRightOf=function(t,r){var i=t.column,o=t.lineNumber;return i<r.getLineMaxColumn(o)?ao(r.getLineContent(o).charCodeAt(i-1))?i=i+2:i=i+1:o<r.getLineCount()&&(o=o+1,i=0),new $(o,i)},e.prototype.run=function(t,r){if(r.hasModel()){for(var i=r.getModel(),o=[],s=r.getSelections(),a=0,u=s;a<u.length;a++){var l=u[a];if(l.isEmpty()){var f=l.startLineNumber,h=l.startColumn,d=i.getLineMaxColumn(f);if(!(f===1&&(h===1||h===2&&d===2))){var g=h===d?l.getPosition():this.positionRightOf(l.getPosition(),i),v=this.positionLeftOf(g,i),m=this.positionLeftOf(v,i),y=i.getValueInRange(R.fromPositions(m,v)),b=i.getValueInRange(R.fromPositions(v,g)),C=R.fromPositions(m,g);o.push(new ur(C,b+y))}}}o.length>0&&(r.pushUndoStop(),r.executeCommands(this.id,o),r.pushUndoStop())}},e}(Ne);re(UOe);var ob=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),W2="9_cutcopypaste",jOe=Da||document.queryCommandSupported("cut"),BX=Da||document.queryCommandSupported("copy"),zOe=BX&&!uu,qOe=Da||!ky&&document.queryCommandSupported("paste"),FI=function(n){ob(e,n);function e(t,r){var i=n.call(this,r)||this;return i.browserCommand=t,i}return e.prototype.runCommand=function(t,r){var i=t.get(an).getFocusedCodeEditor();if(i&&i.hasTextFocus()){i.trigger("keyboard",this.id,r);return}document.execCommand(this.browserCommand)},e.prototype.run=function(t,r){r.focus(),document.execCommand(this.browserCommand)},e}(Ne),$Oe=function(n){ob(e,n);function e(){var t=this,r={kbExpr:P.textInputFocus,primary:2102,win:{primary:2102,secondary:[1044]},weight:100};return Da||(r=void 0),t=n.call(this,"cut",{id:"editor.action.clipboardCutAction",label:S("actions.clipboard.cutLabel","Cut"),alias:"Cut",precondition:P.writable,kbOpts:r,menuOpts:{group:W2,order:1},menubarOpts:{menuId:14,group:"2_ccp",title:S({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1}})||this,t}return e.prototype.run=function(t,r){if(r.hasModel()){var i=r.getConfiguration().emptySelectionClipboard;!i&&r.getSelection().isEmpty()||n.prototype.run.call(this,t,r)}},e}(FI),KOe=function(n){ob(e,n);function e(){var t=this,r={kbExpr:P.textInputFocus,primary:2081,win:{primary:2081,secondary:[2067]},weight:100};return Da||(r=void 0),t=n.call(this,"copy",{id:"editor.action.clipboardCopyAction",label:S("actions.clipboard.copyLabel","Copy"),alias:"Copy",precondition:void 0,kbOpts:r,menuOpts:{group:W2,order:2},menubarOpts:{menuId:14,group:"2_ccp",title:S({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2}})||this,t}return e.prototype.run=function(t,r){if(r.hasModel()){var i=r.getConfiguration().emptySelectionClipboard;!i&&r.getSelection().isEmpty()||n.prototype.run.call(this,t,r)}},e}(FI),GOe=function(n){ob(e,n);function e(){var t=this,r={kbExpr:P.textInputFocus,primary:2100,win:{primary:2100,secondary:[1043]},weight:100};return Da||(r=void 0),t=n.call(this,"paste",{id:"editor.action.clipboardPasteAction",label:S("actions.clipboard.pasteLabel","Paste"),alias:"Paste",precondition:P.writable,kbOpts:r,menuOpts:{group:W2,order:3},menubarOpts:{menuId:14,group:"2_ccp",title:S({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:3}})||this,t}return e}(FI),YOe=function(n){ob(e,n);function e(){return n.call(this,"copy",{id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:S("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:0,weight:100}})||this}return e.prototype.run=function(t,r){if(r.hasModel()){var i=r.getConfiguration().emptySelectionClipboard;!i&&r.getSelection().isEmpty()||(uS.forceCopyWithSyntaxHighlighting=!0,n.prototype.run.call(this,t,r),uS.forceCopyWithSyntaxHighlighting=!1)}},e}(FI);jOe&&re($Oe);BX&&re(KOe);qOe&&re(GOe);zOe&&re(YOe);var ZOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XOe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},QOe=function(n,e){return function(t,r){e(t,r,n)}},pl=function(n){ZOe(e,n);function e(t,r){var i=n.call(this)||this;return i.closeTimeout=3e3,i._messageWidget=i._register(new df),i._messageListeners=i._register(new De),i._editor=t,i._visible=e.MESSAGE_VISIBLE.bindTo(r),i._register(i._editor.onDidAttemptReadOnlyEdit(function(){return i._onDidAttemptReadOnlyEdit()})),i}return e.get=function(t){return t.getContribution(e._id)},e.prototype.getId=function(){return e._id},e.prototype.dispose=function(){n.prototype.dispose.call(this),this._visible.reset()},e.prototype.showMessage=function(t,r){var i=this;pi(t),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new C9(this._editor,r,t),this._messageListeners.add(this._editor.onDidBlurEditorText(function(){return i.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(function(){return i.closeMessage()})),this._messageListeners.add(this._editor.onDidDispose(function(){return i.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeModel(function(){return i.closeMessage()})),this._messageListeners.add(new Ho(function(){return i.closeMessage()},this.closeTimeout));var o;this._messageListeners.add(this._editor.onMouseMove(function(s){s.target.position&&(o?o.containsPosition(s.target.position)||i.closeMessage():o=new R(r.lineNumber-3,1,s.target.position.lineNumber+3,1))}))},e.prototype.closeMessage=function(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(C9.fadeOut(this._messageWidget.value))},e.prototype._onDidAttemptReadOnlyEdit=function(){this._editor.hasModel()&&this.showMessage(S("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())},e._id="editor.contrib.messageController",e.MESSAGE_VISIBLE=new Re("messageVisible",!1),e=XOe([QOe(1,rt)],e),e}(te),JOe=$i.bindToContribution(pl.get);ee(new JOe({id:"leaveEditorMessage",precondition:pl.MESSAGE_VISIBLE,handler:function(n){return n.closeMessage()},kbOpts:{weight:130,primary:9}}));var C9=function(){function n(e,t,r){var i=t.lineNumber,o=t.column;this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(i,i,0),this._position={lineNumber:i,column:o-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");var s=document.createElement("div");s.classList.add("message"),s.textContent=r,this._domNode.appendChild(s);var a=document.createElement("div");a.classList.add("anchor"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}return n.fadeOut=function(e){var t,r=function(){e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",r)};return t=setTimeout(r,110),e.getDomNode().addEventListener("animationend",r),e.getDomNode().classList.add("fadeOut"),{dispose:r}},n.prototype.dispose=function(){this._editor.removeContentWidget(this)},n.prototype.getId=function(){return"messageoverlay"},n.prototype.getDomNode=function(){return this._domNode},n.prototype.getPosition=function(){return{position:this._position,preference:[1]}},n}();tn(pl);Xt(function(n,e){var t=n.getColor($F);if(t){var r=n.type===Xg?2:1;e.addRule(".monaco-editor .monaco-editor-overlaymessage .anchor { border-top-color: "+t+"; }"),e.addRule(".monaco-editor .monaco-editor-overlaymessage .message { border: "+r+"px solid "+t+"; }")}var i=n.getColor(zF);i&&e.addRule(".monaco-editor .monaco-editor-overlaymessage .message { background-color: "+i+"; }");var o=n.getColor(qF);o&&e.addRule(".monaco-editor .monaco-editor-overlaymessage .message { color: "+o+"; }")});var eRe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tRe=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},nRe=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},rRe=function(n){eRe(e,n);function e(t,r,i){var o=n.call(this)||this;return o._editor=t,o._contextMenuService=r,o._delegate=i,o._showingActions=o._register(new df),o._visible=!1,o}return e.prototype.show=function(t,r){return tRe(this,void 0,void 0,function(){var i,o=this;return nRe(this,function(s){return t.actions.length?this._editor.getDomNode()?(this._visible=!0,i=t.actions.map(function(a){return o.codeActionToAction(a)}),this._showingActions.value=t,this._contextMenuService.showContextMenu({getAnchor:function(){return $.isIPosition(r)&&(r=o._toCoords(r)),r||{x:0,y:0}},getActions:function(){return i},onHide:function(){o._visible=!1,o._editor.focus()},autoSelectFirstItem:!0}),[2]):(this._visible=!1,[2,Promise.reject(H0())]):(this._visible=!1,[2])})})},e.prototype.codeActionToAction=function(t){var r=this,i=t.command?t.command.id:t.title,o=t.title;return new ds(i,o,void 0,!0,function(){return r._delegate.onSelectCodeAction(t)})},Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._visible},enumerable:!0,configurable:!0}),e.prototype._toCoords=function(t){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(t,1),this._editor.render();var r=this._editor.getScrolledVisiblePosition(t),i=Wr(this._editor.getDomNode()),o=i.left+r.left,s=i.top+r.top+r.height;return{x:o,y:s}},e}(te),iRe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oRe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},sRe=function(n,e){return function(t,r){e(t,r,n)}},Q_;(function(n){n.Hidden=new(function(){function t(){this.type=0}return t}());var e=function(){function t(r,i,o){this.actions=r,this.editorPosition=i,this.widgetPosition=o,this.type=1}return t}();n.Showing=e})(Q_||(Q_={}));var aRe=function(n){iRe(e,n);function e(t,r,i){var o=n.call(this)||this;return o._editor=t,o._quickFixActionId=r,o._keybindingService=i,o._onClick=o._register(new j),o.onClick=o._onClick.event,o._state=Q_.Hidden,o._domNode=document.createElement("div"),o._domNode.className="lightbulb-glyph",o._editor.addContentWidget(o),o._register(o._editor.onDidChangeModelContent(function(s){var a=o._editor.getModel();(o._state.type!==1||!a||o._state.editorPosition.lineNumber>=a.getLineCount())&&o.hide()})),o._register(Br(o._domNode,"mousedown",function(s){if(o._state.type===1){o._editor.focus(),s.preventDefault();var a=Wr(o._domNode),u=a.top,l=a.height,f=o._editor.getConfiguration().lineHeight,h=Math.floor(f/3);o._state.widgetPosition.position!==null&&o._state.widgetPosition.position.lineNumber<o._state.editorPosition.lineNumber&&(h+=f),o._onClick.fire({x:s.posx,y:u+l+h,actions:o._state.actions})}})),o._register(ie(o._domNode,"mouseenter",function(s){if((s.buttons&1)===1){o.hide();var a=new Pd;a.startMonitoring(Wv,function(){},function(){a.dispose()})}})),o._register(o._editor.onDidChangeConfiguration(function(s){s.contribInfo&&!o._editor.getConfiguration().contribInfo.lightbulbEnabled&&o.hide()})),o._updateLightBulbTitle(),o._register(o._keybindingService.onDidUpdateKeybindings(o._updateLightBulbTitle,o)),o}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this._editor.removeContentWidget(this)},e.prototype.getId=function(){return"LightBulbWidget"},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return this._state.type===1?this._state.widgetPosition:null},e.prototype.update=function(t,r){var i=this;if(t.actions.length<=0)return this.hide();var o=this._editor.getConfiguration();if(!o.contribInfo.lightbulbEnabled)return this.hide();var s=r.lineNumber,a=r.column,u=this._editor.getModel();if(!u)return this.hide();var l=u.getOptions().tabSize,f=u.getLineContent(s),h=Vv.computeIndentLevel(f,l),d=o.fontInfo.spaceWidth*h>22,g=function(m){return m>2&&i._editor.getTopForLineNumber(m)===i._editor.getTopForLineNumber(m-1)},v=s;if(!d){if(s>1&&!g(s-1))v-=1;else if(!g(s+1))v+=1;else if(a*o.fontInfo.spaceWidth<22)return this.hide()}this._state=new Q_.Showing(t,r,{position:{lineNumber:v,column:1},preference:e._posPref}),vt(this._domNode,"autofixable",t.hasAutoFix),this._editor.layoutContentWidget(this)},Object.defineProperty(e.prototype,"title",{set:function(t){this._domNode.title=t},enumerable:!0,configurable:!0}),e.prototype.hide=function(){this._state=Q_.Hidden,this._editor.layoutContentWidget(this)},e.prototype._updateLightBulbTitle=function(){var t=this._keybindingService.lookupKeybinding(this._quickFixActionId),r;t?r=S("quickFixWithKb","Show Fixes ({0})",t.getLabel()):r=S("quickFix","Show Fixes"),this.title=r},e._posPref=[0],e=oRe([sRe(2,er)],e),e}(te),uRe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lRe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},S9=function(n,e){return function(t,r){e(t,r,n)}},rN=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},iN=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},cRe=function(n){uRe(e,n);function e(t,r,i,o,s){var a=n.call(this)||this;return a._editor=t,a.delegate=i,a._activeCodeActions=a._register(new df),a._codeActionWidget=a._register(new rRe(a._editor,o,{onSelectCodeAction:function(u){return rN(a,void 0,void 0,function(){return iN(this,function(l){return this.delegate.applyCodeAction(u,!0),[2]})})}})),a._lightBulbWidget=a._register(new aRe(a._editor,r,s)),a._register(a._lightBulbWidget.onClick(a._handleLightBulbSelect,a)),a}return e.prototype.update=function(t){return rN(this,void 0,void 0,function(){var r,i;return iN(this,function(o){switch(o.label){case 0:if(t.type!==1)return this._lightBulbWidget.hide(),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t.actions];case 2:return r=o.sent(),[3,4];case 3:return i=o.sent(),Le(i),[2];case 4:if(this._lightBulbWidget.update(r,t.position),!r.actions.length&&t.trigger.context)return pl.get(this._editor).showMessage(t.trigger.context.notAvailableMessage,t.trigger.context.position),this._activeCodeActions.value=r,[2];if(t.trigger.type!=="manual")return[3,10];if(!(t.trigger.filter&&t.trigger.filter.kind))return[3,9];if(!(r.actions.length>0))return[3,9];if(!(t.trigger.autoApply===1||t.trigger.autoApply===0&&r.actions.length===1))return[3,9];o.label=5;case 5:return o.trys.push([5,,7,8]),[4,this.delegate.applyCodeAction(r.actions[0],!1)];case 6:return o.sent(),[3,8];case 7:return r.dispose(),[7];case 8:return[2];case 9:return this._activeCodeActions.value=r,this._codeActionWidget.show(r,t.position),[3,11];case 10:this._codeActionWidget.isVisible?r.dispose():this._activeCodeActions.value=r,o.label=11;case 11:return[2]}})})},e.prototype.showCodeActionList=function(t,r){return rN(this,void 0,void 0,function(){return iN(this,function(i){return this._codeActionWidget.show(t,r),[2]})})},e.prototype._handleLightBulbSelect=function(t){this._codeActionWidget.show(t.actions,t)},e=lRe([S9(3,Wd),S9(4,er)],e),e}(te),Vn=function(){function n(e){this.value=e}return n.prototype.equals=function(e){return this.value===e.value},n.prototype.contains=function(e){return this.equals(e)||Oy(e.value,this.value+n.sep)},n.prototype.intersects=function(e){return this.contains(e)||e.contains(this)},n.sep=".",n.Empty=new n(""),n.QuickFix=new n("quickfix"),n.Refactor=new n("refactor"),n.Source=new n("source"),n.SourceOrganizeImports=new n("source.organizeImports"),n.SourceFixAll=new n("source.fixAll"),n}();function fRe(n,e){return!(n.kind&&!n.kind.intersects(e)||Vn.Source.contains(e)&&!n.includeSourceActions)}function hRe(n,e){var t=e.kind?new Vn(e.kind):void 0;return!(n.kind&&(!t||!n.kind.contains(t))||!n.includeSourceActions&&t&&Vn.Source.contains(t)||n.onlyIncludePreferredActions&&!e.isPreferred)}var dRe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pRe=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},gRe=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},vRe=function(n){dRe(e,n);function e(t,r){var i=n.call(this)||this;return i._register(r),i.actions=eI(t.slice(),e.codeActionsComparator),i}return e.codeActionsComparator=function(t,r){return vo(t.diagnostics)?vo(r.diagnostics)?t.diagnostics[0].message.localeCompare(r.diagnostics[0].message):-1:vo(r.diagnostics)?1:0},Object.defineProperty(e.prototype,"hasAutoFix",{get:function(){return this.actions.some(function(t){return!!t.kind&&Vn.QuickFix.contains(new Vn(t.kind))&&!!t.isPreferred})},enumerable:!0,configurable:!0}),e}(te);function V2(n,e,t,r){var i=t.filter||{},o={only:i.kind?i.kind.value:void 0,trigger:t.type==="manual"?2:1},s=new c2(n,r),a=mRe(n,i),u=new De,l=a.map(function(h){return Promise.resolve(h.provideCodeActions(n,e,o,s.token)).then(function(d){return s.token.isCancellationRequested||!d?[]:(u.add(d),d.actions.filter(function(g){return g&&hRe(i,g)}))},function(d){if(V0(d))throw d;return ji(d),[]})}),f=hl.onDidChange(function(){var h=hl.all(n);hf(h,a)||s.cancel()});return Promise.all(l).then(Ly).then(function(h){return new vRe(h,u)}).finally(function(){f.dispose(),s.dispose()})}function mRe(n,e){return hl.all(n).filter(function(t){return t.providedCodeActionKinds?t.providedCodeActionKinds.some(function(r){return fRe(e,new Vn(r))}):!0})}Ml("_executeCodeActionProvider",function(n,e){return pRe(this,void 0,void 0,function(){var t,r,i,o,s,a;return gRe(this,function(u){switch(u.label){case 0:if(t=e.resource,r=e.rangeOrSelection,i=e.kind,!(t instanceof bt)||(o=n.get(yo).getModel(t),!o)||(s=Ce.isISelection(r)?Ce.liftSelection(r):R.isIRange(r)?o.validateRange(r):void 0,!s))throw fr();return[4,V2(o,s,{type:"manual",filter:{includeSourceActions:!0,kind:i&&i.value?new Vn(i.value):void 0}},Ft.None)];case 1:return a=u.sent(),setTimeout(function(){return a.dispose()},100),[2,a.actions]}})})});var WX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VX=new Re("supportedCodeAction",""),_Re=function(n){WX(e,n);function e(t,r,i,o){o===void 0&&(o=250);var s=n.call(this)||this;return s._editor=t,s._markerService=r,s._signalChange=i,s._delay=o,s._autoTriggerTimer=s._register(new Ho),s._register(s._markerService.onMarkerChanged(function(a){return s._onMarkerChanges(a)})),s._register(s._editor.onDidChangeCursorPosition(function(){return s._onCursorChange()})),s}return e.prototype.trigger=function(t){var r=this._getRangeOfSelectionUnlessWhitespaceEnclosed(t);return this._createEventAndSignalChange(t,r)},e.prototype._onMarkerChanges=function(t){var r=this,i=this._editor.getModel();i&&t.some(function(o){return o.toString()===i.uri.toString()})&&this._autoTriggerTimer.cancelAndSet(function(){r.trigger({type:"auto"})},this._delay)},e.prototype._onCursorChange=function(){var t=this;this._autoTriggerTimer.cancelAndSet(function(){t.trigger({type:"auto"})},this._delay)},e.prototype._getRangeOfMarker=function(t){var r=this._editor.getModel();if(r)for(var i=0,o=this._markerService.read({resource:r.uri});i<o.length;i++){var s=o[i];if(R.intersectRanges(s,t))return R.lift(s)}},e.prototype._getRangeOfSelectionUnlessWhitespaceEnclosed=function(t){if(this._editor.hasModel()){var r=this._editor.getModel(),i=this._editor.getSelection();if(i.isEmpty()&&t.type==="auto"){var o=i.getPosition(),s=o.lineNumber,a=o.column,u=r.getLineContent(s);if(u.length===0)return;if(a===1){if(/\s/.test(u[0]))return}else if(a===r.getLineMaxColumn(s)){if(/\s/.test(u[u.length-1]))return}else if(/\s/.test(u[a-2])&&/\s/.test(u[a-1]))return}return i}},e.prototype._createEventAndSignalChange=function(t,r){var i=this._editor.getModel();if(!r||!i){this._signalChange(void 0);return}var o=this._getRangeOfMarker(r),s=o?o.getStartPosition():r.getStartPosition(),a={trigger:t,selection:r,position:s};return this._signalChange(a),a},e}(te),Lh;(function(n){n.Empty=new(function(){function t(){this.type=0}return t}());var e=function(){function t(r,i,o,s){this.trigger=r,this.rangeOrSelection=i,this.position=o,this.actions=s,this.type=1}return t}();n.Triggered=e})(Lh||(Lh={}));var yRe=function(n){WX(e,n);function e(t,r,i,o){var s=n.call(this)||this;return s._editor=t,s._markerService=r,s._progressService=o,s._codeActionOracle=s._register(new df),s._state=Lh.Empty,s._onDidChangeState=s._register(new j),s.onDidChangeState=s._onDidChangeState.event,s._supportedCodeActions=VX.bindTo(i),s._register(s._editor.onDidChangeModel(function(){return s._update()})),s._register(s._editor.onDidChangeModelLanguage(function(){return s._update()})),s._register(hl.onDidChange(function(){return s._update()})),s._update(),s}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this.setState(Lh.Empty,!0)},e.prototype._update=function(){var t=this;this._codeActionOracle.value=void 0,this.setState(Lh.Empty);var r=this._editor.getModel();if(r&&hl.has(r)&&!this._editor.getConfiguration().readOnly){for(var i=[],o=0,s=hl.all(r);o<s.length;o++){var a=s[o];Array.isArray(a.providedCodeActionKinds)&&i.push.apply(i,a.providedCodeActionKinds)}this._supportedCodeActions.set(i.join(" ")),this._codeActionOracle.value=new _Re(this._editor,this._markerService,function(u){if(!u){t.setState(Lh.Empty);return}var l=Cr(function(f){return V2(r,u.selection,u.trigger,f)});t._progressService&&u.trigger.type==="manual"&&t._progressService.showWhile(l,250),t.setState(new Lh.Triggered(u.trigger,u.selection,u.position,l))},void 0),this._codeActionOracle.value.trigger({type:"auto"})}else this._supportedCodeActions.reset()},e.prototype.trigger=function(t){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(t)},e.prototype.setState=function(t,r){t!==this._state&&(this._state.type===1&&this._state.actions.cancel(),this._state=t,r||this._onDidChangeState.fire(t))},e}(te),yf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bRe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ch=function(n,e){return function(t,r){e(t,r,n)}},HX=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},UX=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function sb(n){return _e.regex(VX.keys()[0],new RegExp("(\\s|^)"+Cu(n.value)+"\\b"))}var H2=function(n){yf(e,n);function e(t,r,i,o,s,a,u,l){var f=n.call(this)||this;return f._commandService=u,f._bulkEditService=l,f._editor=t,f._model=f._register(new yRe(f._editor,r,i,o)),f._register(f._model.onDidChangeState(function(h){return f.update(h)})),f._ui=f._register(new cRe(t,U2.Id,{applyCodeAction:function(h,d){return HX(f,void 0,void 0,function(){return UX(this,function(g){switch(g.label){case 0:return g.trys.push([0,,2,3]),[4,this._applyCodeAction(h)];case 1:return g.sent(),[3,3];case 2:return d&&this._trigger({type:"auto",filter:{}}),[7];case 3:return[2]}})})}},s,a)),f}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.update=function(t){this._ui.update(t)},e.prototype.showCodeActions=function(t,r){return this._ui.showCodeActionList(t,r)},e.prototype.getId=function(){return e.ID},e.prototype.manualTriggerAtCurrentPosition=function(t,r,i){if(this._editor.hasModel()){pl.get(this._editor).closeMessage();var o=this._editor.getPosition();this._trigger({type:"manual",filter:r,autoApply:i,context:{notAvailableMessage:t,position:o}})}},e.prototype._trigger=function(t){return this._model.trigger(t)},e.prototype._applyCodeAction=function(t){return wRe(t,this._bulkEditService,this._commandService,this._editor)},e.ID="editor.contrib.quickFixController",e=bRe([ch(1,ib),ch(2,rt),ch(3,MI),ch(4,Wd),ch(5,er),ch(6,bi),ch(7,g2)],e),e}(te);function wRe(n,e,t,r){return HX(this,void 0,void 0,function(){return UX(this,function(i){switch(i.label){case 0:return n.edit?[4,e.apply(n.edit,{editor:r})]:[3,2];case 1:i.sent(),i.label=2;case 2:return n.command?[4,t.executeCommand.apply(t,[n.command.id].concat(n.command.arguments||[]))]:[3,4];case 3:i.sent(),i.label=4;case 4:return[2]}})})}function Hd(n,e,t,r){if(n.hasModel()){var i=H2.get(n);i&&i.manualTriggerAtCurrentPosition(e,t,r)}}var U2=function(n){yf(e,n);function e(){return n.call(this,{id:e.Id,label:S("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:_e.and(P.writable,P.hasCodeActionsProvider),kbOpts:{kbExpr:P.editorTextFocus,primary:2132,weight:100}})||this}return e.prototype.run=function(t,r){return Hd(r,S("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)},e.Id="editor.action.quickFix",e}(Ne),j2=function(){function n(e,t,r){this.kind=e,this.apply=t,this.preferred=r}return n.fromUser=function(e,t){return!e||typeof e!="object"?new n(t.kind,t.apply,!1):new n(n.getKindFromUser(e,t.kind),n.getApplyFromUser(e,t.apply),n.getPreferredUser(e))},n.getApplyFromUser=function(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return 1;case"never":return 2;case"ifsingle":return 0;default:return t}},n.getKindFromUser=function(e,t){return typeof e.kind=="string"?new Vn(e.kind):t},n.getPreferredUser=function(e){return typeof e.preferred=="boolean"?e.preferred:!1},n}(),CRe=function(n){yf(e,n);function e(){return n.call(this,{id:e.Id,precondition:_e.and(P.writable,P.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:{type:"object",required:["kind"],properties:{kind:{type:"string"},apply:{type:"string",default:"ifSingle",enum:["first","ifSingle","never"]}}}}]}})||this}return e.prototype.runEditorCommand=function(t,r,i){var o=j2.fromUser(i,{kind:Vn.Empty,apply:0});return Hd(r,S("editor.action.quickFix.noneMessage","No code actions available"),{kind:o.kind,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply)},e.Id="editor.action.codeAction",e}($i),SRe=function(n){yf(e,n);function e(){return n.call(this,{id:e.Id,label:S("refactor.label","Refactor..."),alias:"Refactor...",precondition:_e.and(P.writable,P.hasCodeActionsProvider),kbOpts:{kbExpr:P.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},menuOpts:{group:"1_modification",order:2,when:_e.and(P.writable,sb(Vn.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:{type:"object",properties:{kind:{type:"string"},apply:{type:"string",default:"never",enum:["first","ifSingle","never"]}}}}]}})||this}return e.prototype.run=function(t,r,i){var o=j2.fromUser(i,{kind:Vn.Refactor,apply:2});return Hd(r,S("editor.action.refactor.noneMessage","No refactorings available"),{kind:Vn.Refactor.contains(o.kind)?o.kind:Vn.Empty,onlyIncludePreferredActions:o.preferred},o.apply)},e.Id="editor.action.refactor",e}(Ne),ERe=function(n){yf(e,n);function e(){return n.call(this,{id:e.Id,label:S("source.label","Source Action..."),alias:"Source Action...",precondition:_e.and(P.writable,P.hasCodeActionsProvider),menuOpts:{group:"1_modification",order:2.1,when:_e.and(P.writable,sb(Vn.Source))},description:{description:"Source Action...",args:[{name:"args",schema:{type:"object",properties:{kind:{type:"string"},apply:{type:"string",default:"never",enum:["first","ifSingle","never"]}}}}]}})||this}return e.prototype.run=function(t,r,i){var o=j2.fromUser(i,{kind:Vn.Source,apply:2});return Hd(r,S("editor.action.source.noneMessage","No source actions available"),{kind:Vn.Source.contains(o.kind)?o.kind:Vn.Empty,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply)},e.Id="editor.action.sourceAction",e}(Ne),IRe=function(n){yf(e,n);function e(){return n.call(this,{id:e.Id,label:S("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:_e.and(P.writable,sb(Vn.SourceOrganizeImports)),kbOpts:{kbExpr:P.editorTextFocus,primary:1581,weight:100}})||this}return e.prototype.run=function(t,r){return Hd(r,S("editor.action.organize.noneMessage","No organize imports action available"),{kind:Vn.SourceOrganizeImports,includeSourceActions:!0},0)},e.Id="editor.action.organizeImports",e}(Ne),xRe=function(n){yf(e,n);function e(){return n.call(this,{id:e.Id,label:S("fixAll.label","Fix All"),alias:"Fix All",precondition:_e.and(P.writable,sb(Vn.SourceFixAll))})||this}return e.prototype.run=function(t,r){return Hd(r,S("fixAll.noneMessage","No fix all action available"),{kind:Vn.SourceFixAll,includeSourceActions:!0},0)},e.Id="editor.action.fixAll",e}(Ne),DRe=function(n){yf(e,n);function e(){return n.call(this,{id:e.Id,label:S("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:_e.and(P.writable,sb(Vn.QuickFix)),kbOpts:{kbExpr:P.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})||this}return e.prototype.run=function(t,r){return Hd(r,S("editor.action.autoFix.noneMessage","No auto fixes available"),{kind:Vn.QuickFix,onlyIncludePreferredActions:!0},0)},e.Id="editor.action.autoFix",e}(Ne);tn(H2);re(U2);re(SRe);re(ERe);re(IRe);re(DRe);re(xRe);ee(new CRe);var LR=function(){function n(){this.lenses=[],this._dispoables=new De}return n.prototype.dispose=function(){this._dispoables.dispose()},n.prototype.add=function(e,t){this._dispoables.add(e);for(var r=0,i=e.lenses;r<i.length;r++){var o=i[r];this.lenses.push({symbol:o,provider:t})}},n}();function jX(n,e){var t=Zh.ordered(n),r=new Map,i=new LR,o=t.map(function(s,a){return r.set(s,a),Promise.resolve(s.provideCodeLenses(n,e)).then(function(u){return u&&i.add(u,s)}).catch(ji)});return Promise.all(o).then(function(){return i.lenses=eI(i.lenses,function(s,a){return s.symbol.range.startLineNumber<a.symbol.range.startLineNumber?-1:s.symbol.range.startLineNumber>a.symbol.range.startLineNumber?1:r.get(s.provider)<r.get(a.provider)?-1:r.get(s.provider)>r.get(a.provider)?1:s.symbol.range.startColumn<a.symbol.range.startColumn?-1:s.symbol.range.startColumn>a.symbol.range.startColumn?1:0}),i})}Ml("_executeCodeLensProvider",function(n,e){var t=e.resource,r=e.itemResolveCount;if(!(t instanceof bt))throw fr();var i=n.get(yo).getModel(t);if(!i)throw fr();var o=[],s=new De;return jX(i,Ft.None).then(function(a){s.add(a);for(var u=[],l=function(g){typeof r>"u"||g.symbol.command?o.push(g.symbol):r-- >0&&g.provider.resolveCodeLens&&u.push(Promise.resolve(g.provider.resolveCodeLens(i,g.symbol,Ft.None)).then(function(v){return o.push(v||g.symbol)}))},f=0,h=a.lenses;f<h.length;f++){var d=h[f];l(d)}return Promise.all(u)}).then(function(){return o}).finally(function(){setTimeout(function(){return s.dispose()},100)})});var LRe=function(){function n(e,t){this.afterLineNumber=e,this._onHeight=t,this.heightInLines=1,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}return n.prototype.onComputedHeight=function(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())},n}(),kRe=function(){function n(e,t,r){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._id="codeLensWidget"+ ++n._idPool,this._editor=e,this.setSymbolRange(t),this._domNode=document.createElement("span"),this._domNode.innerHTML="&nbsp;",de(this._domNode,"codelens-decoration"),this.updateHeight(),this.withCommands(r.map(function(i){return i.symbol}),!1)}return n.prototype.updateHeight=function(){var e=this._editor.getConfiguration(),t=e.fontInfo,r=e.lineHeight;this._domNode.style.height=Math.round(r*1.1)+"px",this._domNode.style.lineHeight=r+"px",this._domNode.style.fontSize=Math.round(t.fontSize*.9)+"px",this._domNode.style.paddingRight=Math.round(t.fontSize*.45)+"px",this._domNode.innerHTML="&nbsp;"},n.prototype.withCommands=function(e,t){this._commands.clear();var r=Ol(e);if($P(r)){this._domNode.innerHTML="<span>no commands</span>";return}for(var i=[],o=0;o<r.length;o++){var s=r[o].command;if(s){var a=fs(s.title),u=void 0;s.id?(u="<a id="+o+">"+a+"</a>",this._commands.set(String(o),s)):u="<span>"+a+"</span>",i.push(u)}}var l=this._domNode.innerHTML===""||this._domNode.innerHTML==="&nbsp;";this._domNode.innerHTML=i.join("<span>&nbsp;|&nbsp;</span>"),this._editor.layoutContentWidget(this),l&&t&&de(this._domNode,"fadein")},n.prototype.getCommand=function(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0},n.prototype.getId=function(){return this._id},n.prototype.getDomNode=function(){return this._domNode},n.prototype.setSymbolRange=function(e){if(this._editor.hasModel()){var t=e.startLineNumber,r=this._editor.getModel().getLineFirstNonWhitespaceColumn(t);this._widgetPosition={position:{lineNumber:t,column:r},preference:[1]}}},n.prototype.getPosition=function(){return this._widgetPosition||null},n.prototype.isVisible=function(){return this._domNode.hasAttribute("monaco-visible-content-widget")},n._idPool=0,n}(),oN=function(){function n(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}return n.prototype.addDecoration=function(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)},n.prototype.removeDecoration=function(e){this._removeDecorations.push(e)},n.prototype.commit=function(e){for(var t=e.deltaDecorations(this._removeDecorations,this._addDecorations),r=0,i=t.length;r<i;r++)this._addDecorationsCallbacks[r](t[r])},n}(),E9=function(){function n(e,t,r,i,o){var s=this;this._editor=t,this._data=e,this._decorationIds=new Array(this._data.length);var a;this._data.forEach(function(u,l){r.addDecoration({range:u.symbol.range,options:tt.EMPTY},function(f){return s._decorationIds[l]=f}),a?a=R.plusRange(a,u.symbol.range):a=R.lift(u.symbol.range)}),a&&(this._contentWidget=new kRe(t,a,this._data),this._viewZone=new LRe(a.startLineNumber-1,o),this._viewZoneId=i.addZone(this._viewZone),this._editor.addContentWidget(this._contentWidget))}return n.prototype.dispose=function(e,t){for(;this._decorationIds.length;)e.removeDecoration(this._decorationIds.pop());t&&t.removeZone(this._viewZoneId),this._editor.removeContentWidget(this._contentWidget)},n.prototype.isValid=function(){var e=this;if(!this._editor.hasModel())return!1;var t=this._editor.getModel();return this._decorationIds.some(function(r,i){var o=t.getDecorationRange(r),s=e._data[i].symbol;return!!(o&&R.isEmpty(s.range)===o.isEmpty())})},n.prototype.updateCodeLensSymbols=function(e,t){for(var r=this;this._decorationIds.length;)t.removeDecoration(this._decorationIds.pop());this._data=e,this._decorationIds=new Array(this._data.length),this._data.forEach(function(i,o){t.addDecoration({range:i.symbol.range,options:tt.EMPTY},function(s){return r._decorationIds[o]=s})})},n.prototype.computeIfNecessary=function(e){if(!this._contentWidget.isVisible())return null;for(var t=0;t<this._decorationIds.length;t++){var r=e.getDecorationRange(this._decorationIds[t]);r&&(this._data[t].symbol.range=r)}return this._data},n.prototype.updateCommands=function(e){this._contentWidget.withCommands(e,!0);for(var t=0;t<this._data.length;t++){var r=e[t];if(r){var i=this._data[t].symbol;i.command=r.command||i.command}}},n.prototype.updateHeight=function(){this._contentWidget.updateHeight()},n.prototype.getCommand=function(e){return this._contentWidget.getCommand(e)},n.prototype.getLineNumber=function(){if(this._editor.hasModel()){var e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);if(e)return e.startLineNumber}return-1},n.prototype.update=function(e){if(this.isValid()&&this._editor.hasModel()){var t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget.setSymbolRange(t),this._editor.layoutContentWidget(this._contentWidget))}},n}();Xt(function(n,e){var t=n.getColor(GIe);t&&e.addRule(".monaco-editor .codelens-decoration { color: "+t+"; }");var r=n.getColor(QF);r&&e.addRule(".monaco-editor .codelens-decoration > a:hover { color: "+r+" !important; }")});var TRe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},NRe=function(n,e){return function(t,r){e(t,r,n)}},zX=xt("ICodeLensCache"),I9=function(){function n(e,t){this.lineCount=e,this.data=t}return n}(),ARe=function(){function n(e){var t=this;this._fakeProvider=new(function(){function s(){}return s.prototype.provideCodeLenses=function(){throw new Error("not supported")},s}()),this._cache=new qg(20,.75);var r="codelens/cache";K1(function(){return e.remove(r,1)});var i="codelens/cache2",o=e.get(i,1,"{}");this._deserialize(o),tG(e.onWillSaveState)(function(s){s.reason===PS.SHUTDOWN&&e.store(i,t._serialize(),1)})}return n.prototype.put=function(e,t){var r=new LR;r.add({lenses:t.lenses.map(function(o){return o.symbol}),dispose:function(){}},this._fakeProvider);var i=new I9(e.getLineCount(),r);this._cache.set(e.uri.toString(),i)},n.prototype.get=function(e){var t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0},n.prototype.delete=function(e){this._cache.delete(e.uri.toString())},n.prototype._serialize=function(){var e=Object.create(null);return this._cache.forEach(function(t,r){for(var i=new Set,o=0,s=t.data.lenses;o<s.length;o++){var a=s[o];i.add(a.symbol.range.startLineNumber)}e[r]={lineCount:t.lineCount,lines:vF(i)}}),JSON.stringify(e)},n.prototype._deserialize=function(e){try{var t=JSON.parse(e);for(var r in t){for(var i=t[r],o=[],s=0,a=i.lines;s<a.length;s++){var u=a[s];o.push({range:new R(u,1,u,11)})}var l=new LR;l.add({lenses:o,dispose:function(){}},this._fakeProvider),this._cache.set(r,new I9(i.lineCount,l))}}catch{}},n=TRe([NRe(0,_f)],n),n}();J0(zX,ARe);var ORe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},sN=function(n,e){return function(t,r){e(t,r,n)}},RRe=function(){function n(e,t,r,i){var o=this;this._editor=e,this._commandService=t,this._notificationService=r,this._codeLensCache=i,this._globalToDispose=new De,this._localToDispose=new De,this._lenses=[],this._oldCodeLensModels=new De,this._modelChangeCounter=0,this._isEnabled=this._editor.getConfiguration().contribInfo.codeLens,this._globalToDispose.add(this._editor.onDidChangeModel(function(){return o._onModelChange()})),this._globalToDispose.add(this._editor.onDidChangeModelLanguage(function(){return o._onModelChange()})),this._globalToDispose.add(this._editor.onDidChangeConfiguration(function(){var s=o._isEnabled;o._isEnabled=o._editor.getConfiguration().contribInfo.codeLens,s!==o._isEnabled&&o._onModelChange()})),this._globalToDispose.add(Zh.onDidChange(this._onModelChange,this)),this._onModelChange()}return n.prototype.dispose=function(){this._localDispose(),this._globalToDispose.dispose(),this._oldCodeLensModels.dispose(),Ue(this._currentCodeLensModel)},n.prototype._localDispose=function(){this._currentFindCodeLensSymbolsPromise&&(this._currentFindCodeLensSymbolsPromise.cancel(),this._currentFindCodeLensSymbolsPromise=void 0,this._modelChangeCounter++),this._currentResolveCodeLensSymbolsPromise&&(this._currentResolveCodeLensSymbolsPromise.cancel(),this._currentResolveCodeLensSymbolsPromise=void 0),this._localToDispose.clear(),this._oldCodeLensModels.clear(),Ue(this._currentCodeLensModel)},n.prototype.getId=function(){return n.ID},n.prototype._onModelChange=function(){var e=this;this._localDispose();var t=this._editor.getModel();if(t&&this._isEnabled){var r=this._codeLensCache.get(t);if(r&&this._renderCodeLensSymbols(r),!Zh.has(t)){r&&this._localToDispose.add(zg(function(){var f=e._codeLensCache.get(t);r===f&&(e._codeLensCache.delete(t),e._onModelChange())},30*1e3));return}for(var i=0,o=Zh.all(t);i<o.length;i++){var s=o[i];if(typeof s.onDidChange=="function"){var a=s.onDidChange(function(){return l.schedule()});this._localToDispose.add(a)}}var u=this._detectVisibleLenses=new hr(function(){return e._onViewportChanged()},250),l=new hr(function(){var f=++e._modelChangeCounter;e._currentFindCodeLensSymbolsPromise&&e._currentFindCodeLensSymbolsPromise.cancel(),e._currentFindCodeLensSymbolsPromise=Cr(function(h){return jX(t,h)}),e._currentFindCodeLensSymbolsPromise.then(function(h){f===e._modelChangeCounter&&(e._currentCodeLensModel&&e._oldCodeLensModels.add(e._currentCodeLensModel),e._currentCodeLensModel=h,e._codeLensCache.put(t,h),e._renderCodeLensSymbols(h),u.schedule())},Le)},250);this._localToDispose.add(l),this._localToDispose.add(u),this._localToDispose.add(this._editor.onDidChangeModelContent(function(){e._editor.changeDecorations(function(f){e._editor.changeViewZones(function(h){var d=[],g=-1;e._lenses.forEach(function(m){!m.isValid()||g===m.getLineNumber()?d.push(m):(m.update(h),g=m.getLineNumber())});var v=new oN;d.forEach(function(m){m.dispose(v,h),e._lenses.splice(e._lenses.indexOf(m),1)}),v.commit(f)})}),u.schedule(),l.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(function(f){f.scrollTopChanged&&e._lenses.length>0&&u.schedule()})),this._localToDispose.add(this._editor.onDidLayoutChange(function(){u.schedule()})),this._localToDispose.add(en(function(){if(e._editor.getModel()){var f=aR.capture(e._editor);e._editor.changeDecorations(function(h){e._editor.changeViewZones(function(d){e._disposeAllLenses(h,d)})}),f.restore(e._editor)}else e._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onDidChangeConfiguration(function(f){if(f.fontInfo)for(var h=0,d=e._lenses;h<d.length;h++){var g=d[h];g.updateHeight()}})),this._localToDispose.add(this._editor.onMouseUp(function(f){var h;if(f.target.type===9&&f.target.element&&f.target.element.tagName==="A")for(var d=0,g=e._lenses;d<g.length;d++){var v=g[d],m=v.getCommand(f.target.element);if(m){(h=e._commandService).executeCommand.apply(h,[m.id].concat(m.arguments||[])).catch(function(y){return e._notificationService.error(y)});break}}})),l.schedule()}},n.prototype._disposeAllLenses=function(e,t){var r=new oN;this._lenses.forEach(function(i){return i.dispose(r,t)}),e&&r.commit(e),this._lenses=[]},n.prototype._renderCodeLensSymbols=function(e){var t=this;if(this._editor.hasModel()){for(var r=this._editor.getModel().getLineCount(),i=[],o,s=0,a=e.lenses;s<a.length;s++){var u=a[s],l=u.symbol.range.startLineNumber;l<1||l>r||(o&&o[o.length-1].symbol.range.startLineNumber===l?o.push(u):(o=[u],i.push(o)))}var f=aR.capture(this._editor);this._editor.changeDecorations(function(h){t._editor.changeViewZones(function(d){for(var g=new oN,v=0,m=0;m<i.length&&v<t._lenses.length;){var y=i[m][0].symbol.range.startLineNumber,b=t._lenses[v].getLineNumber();b<y?(t._lenses[v].dispose(g,d),t._lenses.splice(v,1)):b===y?(t._lenses[v].updateCodeLensSymbols(i[m],g),m++,v++):(t._lenses.splice(v,0,new E9(i[m],t._editor,g,d,function(){return t._detectVisibleLenses&&t._detectVisibleLenses.schedule()})),v++,m++)}for(;v<t._lenses.length;)t._lenses[v].dispose(g,d),t._lenses.splice(v,1);for(;m<i.length;)t._lenses.push(new E9(i[m],t._editor,g,d,function(){return t._detectVisibleLenses&&t._detectVisibleLenses.schedule()})),m++;g.commit(h)})}),f.restore(this._editor)}},n.prototype._onViewportChanged=function(){var e=this;this._currentResolveCodeLensSymbolsPromise&&(this._currentResolveCodeLensSymbolsPromise.cancel(),this._currentResolveCodeLensSymbolsPromise=void 0);var t=this._editor.getModel();if(t){var r=[],i=[];this._lenses.forEach(function(o){var s=o.computeIfNecessary(t);s&&(r.push(s),i.push(o))}),r.length!==0&&(this._currentResolveCodeLensSymbolsPromise=Cr(function(o){var s=r.map(function(a,u){var l=new Array(a.length),f=a.map(function(h,d){return!h.symbol.command&&typeof h.provider.resolveCodeLens=="function"?Promise.resolve(h.provider.resolveCodeLens(t,h.symbol,o)).then(function(g){l[d]=g},ji):(l[d]=h.symbol,Promise.resolve(void 0))});return Promise.all(f).then(function(){o.isCancellationRequested||i[u].updateCommands(l)})});return Promise.all(s)}),this._currentResolveCodeLensSymbolsPromise.then(function(){e._oldCodeLensModels.clear(),e._currentResolveCodeLensSymbolsPromise=void 0},function(o){Le(o),e._currentResolveCodeLensSymbolsPromise=void 0}))}},n.ID="css.editor.codeLens",n=ORe([sN(1,bi),sN(2,Hr),sN(3,zX)],n),n}();tn(RRe);function z2(n,e){switch(e===void 0&&(e=0),typeof n){case"object":return n===null?sl(349,e):Array.isArray(n)?PRe(n,e):FRe(n,e);case"string":return qX(n,e);case"boolean":return MRe(n,e);case"number":return sl(n,e);case"undefined":return sl(0,937);default:return sl(0,617)}}function sl(n,e){return(e<<5)-e+n|0}function MRe(n,e){return sl(n?433:863,e)}function qX(n,e){e=sl(149417,e);for(var t=0,r=n.length;t<r;t++)e=sl(n.charCodeAt(t),e);return e}function PRe(n,e){return e=sl(104579,e),n.reduce(function(t,r){return z2(r,t)},e)}function FRe(n,e){return e=sl(181387,e),Object.keys(n).sort().reduce(function(t,r){return t=qX(r,t),z2(n[r],t)},e)}function BRe(n,e){var t=[],r=Kg.ordered(n).reverse(),i=r.map(function(o){return Promise.resolve(o.provideDocumentColors(n,e)).then(function(s){if(Array.isArray(s))for(var a=0,u=s;a<u.length;a++){var l=u[a];t.push({colorInfo:l,provider:o})}})});return Promise.all(i).then(function(){return t})}function x9(n,e,t,r){return Promise.resolve(t.provideColorPresentations(n,e,r))}Ml("_executeDocumentColorProvider",function(n,e){var t=e.resource;if(!(t instanceof bt))throw fr();var r=n.get(yo).getModel(t);if(!r)throw fr();var i=[],o=Kg.ordered(r).reverse(),s=o.map(function(a){return Promise.resolve(a.provideDocumentColors(r,Ft.None)).then(function(u){if(Array.isArray(u))for(var l=0,f=u;l<f.length;l++){var h=f[l];i.push({range:h.range,color:[h.color.red,h.color.green,h.color.blue,h.color.alpha]})}})});return Promise.all(s).then(function(){return i})});Ml("_executeColorPresentationProvider",function(n,e){var t=e.resource,r=e.color,i=e.range;if(!(t instanceof bt)||!Array.isArray(r)||r.length!==4||!R.isIRange(i))throw fr();var o=r[0],s=r[1],a=r[2],u=r[3],l=n.get(yo).getModel(t);if(!l)throw fr();var f={range:i,color:{red:o,green:s,blue:a,alpha:u}},h=[],d=Kg.ordered(l).reverse(),g=d.map(function(v){return Promise.resolve(v.provideColorPresentations(l,f,Ft.None)).then(function(m){Array.isArray(m)&&h.push.apply(h,m)})});return Promise.all(g).then(function(){return h})});var WRe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VRe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},D9=function(n,e){return function(t,r){e(t,r,n)}},HRe=500,$X=function(n){WRe(e,n);function e(t,r,i){var o=n.call(this)||this;return o._editor=t,o._codeEditorService=r,o._configurationService=i,o._localToDispose=o._register(new De),o._decorationsIds=[],o._colorDatas=new Map,o._colorDecoratorIds=[],o._decorationsTypes=new Set,o._register(t.onDidChangeModel(function(s){o._isEnabled=o.isEnabled(),o.onModelChanged()})),o._register(t.onDidChangeModelLanguage(function(s){return o.onModelChanged()})),o._register(Kg.onDidChange(function(s){return o.onModelChanged()})),o._register(t.onDidChangeConfiguration(function(s){var a=o._isEnabled;o._isEnabled=o.isEnabled(),a!==o._isEnabled&&(o._isEnabled?o.onModelChanged():o.removeAllDecorations())})),o._timeoutTimer=null,o._computePromise=null,o._isEnabled=o.isEnabled(),o.onModelChanged(),o}return e.prototype.isEnabled=function(){var t=this._editor.getModel();if(!t)return!1;var r=t.getLanguageIdentifier(),i=this._configurationService.getValue(r.language);if(i){var o=i.colorDecorators;if(o&&o.enable!==void 0&&!o.enable)return o.enable}return this._editor.getConfiguration().contribInfo.colorDecorators},e.prototype.getId=function(){return e.ID},e.get=function(t){return t.getContribution(this.ID)},e.prototype.dispose=function(){this.stop(),this.removeAllDecorations(),n.prototype.dispose.call(this)},e.prototype.onModelChanged=function(){var t=this;if(this.stop(),!!this._isEnabled){var r=this._editor.getModel();!r||!Kg.has(r)||(this._localToDispose.add(this._editor.onDidChangeModelContent(function(i){t._timeoutTimer||(t._timeoutTimer=new Ho,t._timeoutTimer.cancelAndSet(function(){t._timeoutTimer=null,t.beginCompute()},e.RECOMPUTE_TIME))})),this.beginCompute())}},e.prototype.beginCompute=function(){var t=this;this._computePromise=Cr(function(r){var i=t._editor.getModel();return i?BRe(i,r):Promise.resolve([])}),this._computePromise.then(function(r){t.updateDecorations(r),t.updateColorDecorators(r),t._computePromise=null},Le)},e.prototype.stop=function(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()},e.prototype.updateDecorations=function(t){var r=this,i=t.map(function(o){return{range:{startLineNumber:o.colorInfo.range.startLineNumber,startColumn:o.colorInfo.range.startColumn,endLineNumber:o.colorInfo.range.endLineNumber,endColumn:o.colorInfo.range.endColumn},options:tt.EMPTY}});this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,i),this._colorDatas=new Map,this._decorationsIds.forEach(function(o,s){return r._colorDatas.set(o,t[s])})},e.prototype.updateColorDecorators=function(t){for(var r=this,i=[],o={},s=0;s<t.length&&i.length<HRe;s++){var a=t[s].colorInfo.color,u=a.red,l=a.green,f=a.blue,h=a.alpha,d=new Jt(Math.round(u*255),Math.round(l*255),Math.round(f*255),h),g=z2(d).toString(16),v="rgba("+d.r+", "+d.g+", "+d.b+", "+d.a+")",m="colorBox-"+g;!this._decorationsTypes.has(m)&&!o[m]&&this._codeEditorService.registerDecorationType(m,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:v},dark:{before:{border:"solid 0.1em #eee"}}}),o[m]=!0,i.push({range:{startLineNumber:t[s].colorInfo.range.startLineNumber,startColumn:t[s].colorInfo.range.startColumn,endLineNumber:t[s].colorInfo.range.endLineNumber,endColumn:t[s].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(m,!0)})}this._decorationsTypes.forEach(function(y){o[y]||r._codeEditorService.removeDecorationType(y)}),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,i)},e.prototype.removeAllDecorations=function(){var t=this;this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach(function(r){t._codeEditorService.removeDecorationType(r)})},e.prototype.getColorData=function(t){var r=this,i=this._editor.getModel();if(!i)return null;var o=i.getDecorationsInRange(R.fromPositions(t,t)).filter(function(s){return r._colorDatas.has(s.id)});return o.length===0?null:this._colorDatas.get(o[0].id)},e.ID="editor.contrib.colorDetector",e.RECOMPUTE_TIME=1e3,e=VRe([D9(1,an),D9(2,Vr)],e),e}(te);tn($X);var x_=function(){function n(e){this._selection=e,this._usedEndToken=null}return n._haystackHasNeedleAtOffset=function(e,t,r){if(r<0)return!1;var i=t.length,o=e.length;if(r+i>o)return!1;for(var s=0;s<i;s++){var a=e.charCodeAt(r+s),u=t.charCodeAt(s);if(a!==u&&!(a>=65&&a<=90&&a+32===u)&&!(u>=65&&u<=90&&u+32===a))return!1}return!0},n.prototype._createOperationsForBlockComment=function(e,t,r,i,o){var s=e.startLineNumber,a=e.startColumn,u=e.endLineNumber,l=e.endColumn,f=i.getLineContent(s),h=i.getLineContent(u),d=f.lastIndexOf(t,a-1+t.length),g=h.indexOf(r,l-1-r.length);if(d!==-1&&g!==-1)if(s===u){var v=f.substring(d+t.length,g);v.indexOf(r)>=0&&(d=-1,g=-1)}else{var m=f.substring(d+t.length),y=h.substring(0,g);(m.indexOf(r)>=0||y.indexOf(r)>=0)&&(d=-1,g=-1)}var b;d!==-1&&g!==-1?(d+t.length<f.length&&f.charCodeAt(d+t.length)===32&&(t=t+" "),g>0&&h.charCodeAt(g-1)===32&&(r=" "+r,g-=1),b=n._createRemoveBlockCommentOperations(new R(s,d+t.length+1,u,g+1),t,r)):(b=n._createAddBlockCommentOperations(e,t,r),this._usedEndToken=b.length===1?r:null);for(var C=0,E=b;C<E.length;C++){var D=E[C];o.addTrackedEditOperation(D.range,D.text)}},n._createRemoveBlockCommentOperations=function(e,t,r){var i=[];return R.isEmpty(e)?i.push(lr.delete(new R(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+r.length))):(i.push(lr.delete(new R(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(lr.delete(new R(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+r.length)))),i},n._createAddBlockCommentOperations=function(e,t,r){var i=[];return R.isEmpty(e)?i.push(lr.replace(new R(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+r)):(i.push(lr.insert(new $(e.startLineNumber,e.startColumn),t+" ")),i.push(lr.insert(new $(e.endLineNumber,e.endColumn)," "+r))),i},n.prototype.getEditOperations=function(e,t){var r=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenizeIfCheap(r);var o=e.getLanguageIdAtPosition(r,i),s=gt.getComments(o);!s||!s.blockCommentStartToken||!s.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,e,t)},n.prototype.computeCursorState=function(e,t){var r=t.getInverseEditOperations();if(r.length===2){var i=r[0],o=r[1];return new Ce(i.range.endLineNumber,i.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{var s=r[0].range,a=this._usedEndToken?-this._usedEndToken.length-1:0;return new Ce(s.endLineNumber,s.endColumn+a,s.endLineNumber,s.endColumn+a)}},n}(),URe=function(){function n(e,t,r){this._selection=e,this._selectionId=null,this._tabSize=t,this._type=r,this._deltaColumn=0,this._moveEndPositionDown=!1}return n._gatherPreflightCommentStrings=function(e,t,r){e.tokenizeIfCheap(t);var i=e.getLanguageIdAtPosition(t,1),o=gt.getComments(i),s=o?o.lineCommentToken:null;if(!s)return null;for(var a=[],u=0,l=r-t+1;u<l;u++)a[u]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return a},n._analyzeLines=function(e,t,r,i){var o=!0,s;e===0?s=!0:e===1?s=!1:s=!0;for(var a=0,u=r.length;a<u;a++){var l=r[a],f=i+a,h=t.getLineContent(f),d=Mo(h);if(d===-1){l.ignore=!0,l.commentStrOffset=h.length;continue}if(o=!1,l.ignore=!1,l.commentStrOffset=d,s&&!x_._haystackHasNeedleAtOffset(h,l.commentStr,d)&&(e===0?s=!1:e===1||(l.ignore=!0)),s){var g=d+l.commentStrLength;g<h.length&&h.charCodeAt(g)===32&&(l.commentStrLength+=1)}}if(e===0&&o){s=!1;for(var a=0,u=r.length;a<u;a++)r[a].ignore=!1}return{supported:!0,shouldRemoveComments:s,lines:r}},n._gatherPreflightData=function(e,t,r,i){var o=n._gatherPreflightCommentStrings(t,r,i);return o===null?{supported:!1}:n._analyzeLines(e,t,o,r)},n.prototype._executeLineComments=function(e,t,r,i){var o;r.shouldRemoveComments?o=n._createRemoveLineCommentsOperations(r.lines,i.startLineNumber):(n._normalizeInsertionPoint(e,r.lines,i.startLineNumber,this._tabSize),o=n._createAddLineCommentsOperations(r.lines,i.startLineNumber));for(var s=new $(i.positionLineNumber,i.positionColumn),a=0,u=o.length;a<u;a++)if(t.addEditOperation(o[a].range,o[a].text),o[a].range.isEmpty()&&o[a].range.getStartPosition().equals(s)){var l=e.getLineContent(s.lineNumber);l.length+1===s.column&&(this._deltaColumn=(o[a].text||"").length)}this._selectionId=t.trackSelection(i)},n.prototype._attemptRemoveBlockComment=function(e,t,r,i){var o=t.startLineNumber,s=t.endLineNumber,a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),u=e.getLineContent(o).lastIndexOf(r,a-1),l=e.getLineContent(s).indexOf(i,t.endColumn-1-r.length);return u!==-1&&l===-1&&(l=e.getLineContent(o).indexOf(i,u+r.length),s=o),u===-1&&l!==-1&&(u=e.getLineContent(s).lastIndexOf(r,l),o=s),t.isEmpty()&&(u===-1||l===-1)&&(u=e.getLineContent(o).indexOf(r),u!==-1&&(l=e.getLineContent(o).indexOf(i,u+r.length))),u!==-1&&e.getLineContent(o).charCodeAt(u+r.length)===32&&(r+=" "),l!==-1&&e.getLineContent(s).charCodeAt(l-1)===32&&(i=" "+i,l-=1),u!==-1&&l!==-1?x_._createRemoveBlockCommentOperations(new R(o,u+r.length+1,s,l+1),r,i):null},n.prototype._executeBlockComment=function(e,t,r){e.tokenizeIfCheap(r.startLineNumber);var i=e.getLanguageIdAtPosition(r.startLineNumber,1),o=gt.getComments(i);if(!(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)){var s=o.blockCommentStartToken,a=o.blockCommentEndToken,u=this._attemptRemoveBlockComment(e,r,s,a);if(!u){if(r.isEmpty()){var l=e.getLineContent(r.startLineNumber),f=Mo(l);f===-1&&(f=l.length),u=x_._createAddBlockCommentOperations(new R(r.startLineNumber,f+1,r.startLineNumber,l.length+1),s,a)}else u=x_._createAddBlockCommentOperations(new R(r.startLineNumber,e.getLineFirstNonWhitespaceColumn(r.startLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),s,a);u.length===1&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(r);for(var h=0,d=u;h<d.length;h++){var g=d[h];t.addEditOperation(g.range,g.text)}}},n.prototype.getEditOperations=function(e,t){var r=this._selection;this._moveEndPositionDown=!1,r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));var i=n._gatherPreflightData(this._type,e,r.startLineNumber,r.endLineNumber);return i.supported?this._executeLineComments(e,t,i,r):this._executeBlockComment(e,t,r)},n.prototype.computeCursorState=function(e,t){var r=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(r=r.setEndPosition(r.endLineNumber+1,1)),new Ce(r.selectionStartLineNumber,r.selectionStartColumn+this._deltaColumn,r.positionLineNumber,r.positionColumn+this._deltaColumn)},n._createRemoveLineCommentsOperations=function(e,t){for(var r=[],i=0,o=e.length;i<o;i++){var s=e[i];s.ignore||r.push(lr.delete(new R(t+i,s.commentStrOffset+1,t+i,s.commentStrOffset+s.commentStrLength+1)))}return r},n._createAddLineCommentsOperations=function(e,t){for(var r=[],i=0,o=e.length;i<o;i++){var s=e[i];s.ignore||r.push(lr.insert(new $(t+i,s.commentStrOffset+1),s.commentStr+" "))}return r},n.nextVisibleColumn=function(e,t,r,i){return r?e+(t-e%t):e+i},n._normalizeInsertionPoint=function(e,t,r,i){for(var o=Number.MAX_VALUE,s,a,u=0,l=t.length;u<l;u++)if(!t[u].ignore){for(var f=e.getLineContent(r+u),h=0,d=0,g=t[u].commentStrOffset;h<o&&d<g;d++)h=n.nextVisibleColumn(h,i,f.charCodeAt(d)===9,1);h<o&&(o=h)}o=Math.floor(o/i)*i;for(var u=0,l=t.length;u<l;u++)if(!t[u].ignore){var f=e.getLineContent(r+u),h=0;for(s=0,a=t[u].commentStrOffset;h<o&&s<a;s++)h=n.nextVisibleColumn(h,i,f.charCodeAt(s)===9,1);h>o?t[u].commentStrOffset=s-1:t[u].commentStrOffset=s}},n}(),ab=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),q2=function(n){ab(e,n);function e(t,r){var i=n.call(this,r)||this;return i._type=t,i}return e.prototype.run=function(t,r){if(r.hasModel()){for(var i=r.getModel(),o=[],s=r.getSelections(),a=i.getOptions(),u=0,l=s;u<l.length;u++){var f=l[u];o.push(new URe(f,a.tabSize,this._type))}r.pushUndoStop(),r.executeCommands(this.id,o),r.pushUndoStop()}},e}(Ne),jRe=function(n){ab(e,n);function e(){return n.call(this,0,{id:"editor.action.commentLine",label:S("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:2133,weight:100},menubarOpts:{menuId:14,group:"5_insert",title:S({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})||this}return e}(q2),zRe=function(n){ab(e,n);function e(){return n.call(this,1,{id:"editor.action.addCommentLine",label:S("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2081),weight:100}})||this}return e}(q2),qRe=function(n){ab(e,n);function e(){return n.call(this,2,{id:"editor.action.removeCommentLine",label:S("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2099),weight:100}})||this}return e}(q2),$Re=function(n){ab(e,n);function e(){return n.call(this,{id:"editor.action.blockComment",label:S("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menubarOpts:{menuId:14,group:"5_insert",title:S({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})||this}return e.prototype.run=function(t,r){if(r.hasModel()){for(var i=[],o=r.getSelections(),s=0,a=o;s<a.length;s++){var u=a[s];i.push(new x_(u))}r.pushUndoStop(),r.executeCommands(this.id,i),r.pushUndoStop()}},e}(Ne);re(jRe);re(zRe);re(qRe);re($Re);var KRe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GRe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},l_=function(n,e){return function(t,r){e(t,r,n)}},KX=function(){function n(e,t,r,i,o,s){var a=this;this._contextMenuService=t,this._contextViewService=r,this._contextKeyService=i,this._keybindingService=o,this._menuService=s,this._toDispose=new De,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(function(u){return a._onContextMenu(u)})),this._toDispose.add(this._editor.onMouseWheel(function(u){a._contextMenuIsBeingShownCount>0&&a._contextViewService.hideContextView()})),this._toDispose.add(this._editor.onKeyDown(function(u){u.keyCode===58&&(u.preventDefault(),u.stopPropagation(),a.showContextMenu())}))}return n.get=function(e){return e.getContribution(n.ID)},n.prototype._onContextMenu=function(e){if(this._editor.hasModel()){if(!this._editor.getConfiguration().contribInfo.contextmenu){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type!==12&&(e.event.preventDefault(),!(e.target.type!==6&&e.target.type!==7&&e.target.type!==1))){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);var t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}}},n.prototype.showContextMenu=function(e){if(this._editor.getConfiguration().contribInfo.contextmenu&&this._editor.hasModel()){if(!this._contextMenuService){this._editor.focus();return}var t=this._getMenuActions(this._editor.getModel());t.length>0&&this._doShowContextMenu(t,e)}},n.prototype._getMenuActions=function(e){var t=[],r=this._menuService.createMenu(7,this._contextKeyService),i=r.getActions({arg:e.uri});r.dispose();for(var o=0,s=i;o<s.length;o++){var a=s[o],u=a[1];t.push.apply(t,u),t.push(new DI)}return t.pop(),t},n.prototype._doShowContextMenu=function(e,t){var r=this;if(t===void 0&&(t=null),!!this._editor.hasModel()){var i=this._editor.getConfiguration().contribInfo.hover;if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();var o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),s=Wr(this._editor.getDomNode()),a=s.left+o.left,u=s.top+o.top+o.height;t={x:a,y:u}}this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({getAnchor:function(){return t},getActions:function(){return e},getActionViewItem:function(l){var f=r._keybindingFor(l);if(f)return new _S(l,l,{label:!0,keybinding:f.getLabel(),isMenu:!0});var h=l;return typeof h.getActionViewItem=="function"?h.getActionViewItem():new _S(l,l,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:function(l){return r._keybindingFor(l)},onHide:function(l){r._contextMenuIsBeingShownCount--,r._editor.focus(),r._editor.updateOptions({hover:i})}})}},n.prototype._keybindingFor=function(e){return this._keybindingService.lookupKeybinding(e.id)},n.prototype.getId=function(){return n.ID},n.prototype.dispose=function(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()},n.ID="editor.contrib.contextmenu",n=GRe([l_(1,Wd),l_(2,vf),l_(3,rt),l_(4,er),l_(5,hY)],n),n}(),YRe=function(n){KRe(e,n);function e(){return n.call(this,{id:"editor.action.showContextMenu",label:S("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:1092,weight:100}})||this}return e.prototype.run=function(t,r){var i=KX.get(r);i.showContextMenu()},e}(Ne);tn(KX);re(YRe);var GX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),L9=function(){function n(e){this.selections=e}return n.prototype.equals=function(e){var t=this.selections.length,r=e.selections.length;if(t!==r)return!1;for(var i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0},n}(),YX=function(n){GX(e,n);function e(t){var r=n.call(this)||this;return r._editor=t,r._isCursorUndo=!1,r._undoStack=[],r._prevState=r._readState(),r._register(t.onDidChangeModel(function(i){r._undoStack=[],r._prevState=null})),r._register(t.onDidChangeModelContent(function(i){r._undoStack=[],r._prevState=null})),r._register(t.onDidChangeCursorSelection(function(i){!r._isCursorUndo&&r._prevState&&(r._undoStack.push(r._prevState),r._undoStack.length>50&&r._undoStack.shift()),r._prevState=r._readState()})),r}return e.get=function(t){return t.getContribution(e.ID)},e.prototype._readState=function(){return this._editor.hasModel()?new L9(this._editor.getSelections()):null},e.prototype.getId=function(){return e.ID},e.prototype.cursorUndo=function(){if(this._editor.hasModel())for(var t=new L9(this._editor.getSelections());this._undoStack.length>0;){var r=this._undoStack.pop();if(!r.equals(t)){this._isCursorUndo=!0,this._editor.setSelections(r.selections),this._editor.revealRangeInCenterIfOutsideViewport(r.selections[0],0),this._isCursorUndo=!1;return}}},e.ID="editor.contrib.cursorUndoController",e}(te),ZRe=function(n){GX(e,n);function e(){return n.call(this,{id:"cursorUndo",label:S("cursor.undo","Soft Undo"),alias:"Soft Undo",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:2099,weight:100}})||this}return e.prototype.run=function(t,r,i){YX.get(r).cursorUndo()},e}(Ne);tn(YX);re(ZRe);var XRe=function(){function n(e,t,r){this.selection=e,this.targetPosition=t,this.copy=r,this.targetSelection=null}return n.prototype.getEditOperations=function(e,t){var r=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new R(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),r),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new Ce(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new Ce(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new Ce(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Ce(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Ce(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)},n.prototype.computeCursorState=function(e,t){return this.targetSelection},n}(),QRe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Wp(n){return ct?n.altKey:n.ctrlKey}var JRe=function(n){QRe(e,n);function e(t){var r=n.call(this)||this;return r._editor=t,r._register(r._editor.onMouseDown(function(i){return r._onEditorMouseDown(i)})),r._register(r._editor.onMouseUp(function(i){return r._onEditorMouseUp(i)})),r._register(r._editor.onMouseDrag(function(i){return r._onEditorMouseDrag(i)})),r._register(r._editor.onMouseDrop(function(i){return r._onEditorMouseDrop(i)})),r._register(r._editor.onKeyDown(function(i){return r.onEditorKeyDown(i)})),r._register(r._editor.onKeyUp(function(i){return r.onEditorKeyUp(i)})),r._register(r._editor.onDidBlurEditorWidget(function(){return r.onEditorBlur()})),r._dndDecorationIds=[],r._mouseDown=!1,r._modifierPressed=!1,r._dragSelection=null,r}return e.prototype.onEditorBlur=function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1},e.prototype.onEditorKeyDown=function(t){this._editor.getConfiguration().dragAndDrop&&(Wp(t)&&(this._modifierPressed=!0),this._mouseDown&&Wp(t)&&this._editor.updateOptions({mouseStyle:"copy"}))},e.prototype.onEditorKeyUp=function(t){this._editor.getConfiguration().dragAndDrop&&(Wp(t)&&(this._modifierPressed=!1),this._mouseDown&&t.keyCode===e.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))},e.prototype._onEditorMouseDown=function(t){this._mouseDown=!0},e.prototype._onEditorMouseUp=function(t){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})},e.prototype._onEditorMouseDrag=function(t){var r=t.target;if(this._dragSelection===null){var i=this._editor.getSelections()||[],o=i.filter(function(s){return r.position&&s.containsPosition(r.position)});if(o.length===1)this._dragSelection=o[0];else return}Wp(t.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),r.position&&(this._dragSelection.containsPosition(r.position)?this._removeDecoration():this.showAt(r.position))},e.prototype._onEditorMouseDrop=function(t){if(t.target&&(this._hitContent(t.target)||this._hitMargin(t.target))&&t.target.position){var r=new $(t.target.position.lineNumber,t.target.position.column);if(this._dragSelection===null){var i=null;if(t.event.shiftKey){var o=this._editor.getSelection();if(o){var s=o.selectionStartLineNumber,a=o.selectionStartColumn;i=[new Ce(s,a,r.lineNumber,r.column)]}}else i=(this._editor.getSelections()||[]).map(function(u){return u.containsPosition(r)?new Ce(r.lineNumber,r.column,r.lineNumber,r.column):u});this._editor.setSelections(i||[],"mouse")}else(!this._dragSelection.containsPosition(r)||(Wp(t.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(r)||this._dragSelection.getStartPosition().equals(r)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(e.ID,new XRe(this._dragSelection,r,Wp(t.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1},e.prototype.showAt=function(t){var r=[{range:new R(t.lineNumber,t.column,t.lineNumber,t.column),options:e._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,r),this._editor.revealPosition(t,1)},e.prototype._removeDecoration=function(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])},e.prototype._hitContent=function(t){return t.type===6||t.type===7},e.prototype._hitMargin=function(t){return t.type===2||t.type===3||t.type===4},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,n.prototype.dispose.call(this)},e.ID="editor.contrib.dragAndDrop",e.TRIGGER_KEY_VALUE=ct?6:5,e._DECORATION_OPTIONS=tt.register({className:"dnd-target"}),e}(te);tn(JRe);var eMe=function(){function n(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationId=null,this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}return n.prototype.dispose=function(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationId=null,this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null},n.prototype.reset=function(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationId=null,this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null},n.prototype.getCount=function(){return this._decorations.length},n.prototype.getFindScope=function(){return this._findScopeDecorationId?this._editor.getModel().getDecorationRange(this._findScopeDecorationId):null},n.prototype.getStartPosition=function(){return this._startPosition},n.prototype.setStartPosition=function(e){this._startPosition=e,this.setCurrentFindMatch(null)},n.prototype._getDecorationIndex=function(e){var t=this._decorations.indexOf(e);return t>=0?t+1:1},n.prototype.getCurrentMatchesPosition=function(e){for(var t=this._editor.getModel().getDecorationsInRange(e),r=0,i=t;r<i.length;r++){var o=i[r],s=o.options;if(s===n._FIND_MATCH_DECORATION||s===n._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(o.id)}return 1},n.prototype.setCurrentFindMatch=function(e){var t=this,r=null,i=0;if(e)for(var o=0,s=this._decorations.length;o<s;o++){var a=this._editor.getModel().getDecorationRange(this._decorations[o]);if(e.equalsRange(a)){r=this._decorations[o],i=o+1;break}}return(this._highlightedDecorationId!==null||r!==null)&&this._editor.changeDecorations(function(u){if(t._highlightedDecorationId!==null&&(u.changeDecorationOptions(t._highlightedDecorationId,n._FIND_MATCH_DECORATION),t._highlightedDecorationId=null),r!==null&&(t._highlightedDecorationId=r,u.changeDecorationOptions(t._highlightedDecorationId,n._CURRENT_FIND_MATCH_DECORATION)),t._rangeHighlightDecorationId!==null&&(u.removeDecoration(t._rangeHighlightDecorationId),t._rangeHighlightDecorationId=null),r!==null){var l=t._editor.getModel().getDecorationRange(r);if(l.startLineNumber!==l.endLineNumber&&l.endColumn===1){var f=l.endLineNumber-1,h=t._editor.getModel().getLineMaxColumn(f);l=new R(l.startLineNumber,l.startColumn,f,h)}t._rangeHighlightDecorationId=u.addDecoration(l,n._RANGE_HIGHLIGHT_DECORATION)}}),i},n.prototype.set=function(e,t){var r=this;this._editor.changeDecorations(function(i){var o=n._FIND_MATCH_DECORATION,s=[];if(e.length>1e3){o=n._FIND_MATCH_NO_OVERVIEW_DECORATION;for(var a=r._editor.getModel().getLineCount(),u=r._editor.getLayoutInfo().height,l=u/a,f=Math.max(2,Math.ceil(3/l)),h=e[0].range.startLineNumber,d=e[0].range.endLineNumber,g=1,v=e.length;g<v;g++){var m=e[g].range;d+f>=m.startLineNumber?m.endLineNumber>d&&(d=m.endLineNumber):(s.push({range:new R(h,1,d,1),options:n._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),h=m.startLineNumber,d=m.endLineNumber)}s.push({range:new R(h,1,d,1),options:n._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}for(var y=new Array(e.length),g=0,v=e.length;g<v;g++)y[g]={range:e[g].range,options:o};r._decorations=i.deltaDecorations(r._decorations,y),r._overviewRulerApproximateDecorations=i.deltaDecorations(r._overviewRulerApproximateDecorations,s),r._rangeHighlightDecorationId&&(i.removeDecoration(r._rangeHighlightDecorationId),r._rangeHighlightDecorationId=null),r._findScopeDecorationId&&(i.removeDecoration(r._findScopeDecorationId),r._findScopeDecorationId=null),t&&(r._findScopeDecorationId=i.addDecoration(t,n._FIND_SCOPE_DECORATION))})},n.prototype.matchBeforePosition=function(e){if(this._decorations.length===0)return null;for(var t=this._decorations.length-1;t>=0;t--){var r=this._decorations[t],i=this._editor.getModel().getDecorationRange(r);if(!(!i||i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])},n.prototype.matchAfterPosition=function(e){if(this._decorations.length===0)return null;for(var t=0,r=this._decorations.length;t<r;t++){var i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])},n.prototype._allDecorations=function(){var e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationId&&e.push(this._findScopeDecorationId),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e},n._CURRENT_FIND_MATCH_DECORATION=tt.register({stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:os(DT),position:hs.Center},minimap:{color:os(_U),position:X1.Inline}}),n._FIND_MATCH_DECORATION=tt.register({stickiness:1,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:os(DT),position:hs.Center},minimap:{color:os(_U),position:X1.Inline}}),n._FIND_MATCH_NO_OVERVIEW_DECORATION=tt.register({stickiness:1,className:"findMatch",showIfCollapsed:!0}),n._FIND_MATCH_ONLY_OVERVIEW_DECORATION=tt.register({stickiness:1,overviewRuler:{color:os(DT),position:hs.Center}}),n._RANGE_HIGHLIGHT_DECORATION=tt.register({stickiness:1,className:"rangeHighlight",isWholeLine:!0}),n._FIND_SCOPE_DECORATION=tt.register({className:"findScope",isWholeLine:!0}),n}(),tMe=function(){function n(e,t,r){this._editorSelection=e,this._ranges=t,this._replaceStrings=r,this._trackedEditorSelectionId=null}return n.prototype.getEditOperations=function(e,t){if(this._ranges.length>0){for(var r=[],i=0;i<this._ranges.length;i++)r.push({range:this._ranges[i],text:this._replaceStrings[i]});r.sort(function(f,h){return R.compareRangesUsingStarts(f.range,h.range)});for(var o=[],s=r[0],i=1;i<r.length;i++)s.range.endLineNumber===r[i].range.startLineNumber&&s.range.endColumn===r[i].range.startColumn?(s.range=s.range.plusRange(r[i].range),s.text=s.text+r[i].text):(o.push(s),s=r[i]);o.push(s);for(var a=0,u=o;a<u.length;a++){var l=u[a];t.addEditOperation(l.range,l.text)}}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)},n.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)},n}();function ZX(n,e){return n&&n[0]!==""?n[0].toUpperCase()===n[0]?e.toUpperCase():n[0].toLowerCase()===n[0]?e.toLowerCase():Mbe(n[0][0])?nMe(n,e,"-")?rMe(n,e,"-"):e[0].toUpperCase()+e.substr(1):e:e}function nMe(n,e,t){var r=n[0].indexOf(t)!==-1&&e.indexOf(t)!==-1;return r&&n[0].split(t).length===e.split(t).length}function rMe(n,e,t){var r=e.split(t),i=n[0].split(t),o="";return r.forEach(function(s,a){o+=ZX([i[a]],s)+t}),o.slice(0,-1)}var k9=function(){function n(e){this.staticValue=e,this.kind=0}return n}(),iMe=function(){function n(e){this.pieces=e,this.kind=1}return n}(),$2=function(){function n(e){!e||e.length===0?this._state=new k9(""):e.length===1&&e[0].staticValue!==null?this._state=new k9(e[0].staticValue):this._state=new iMe(e)}return n.fromStaticValue=function(e){return new n([s1.staticValue(e)])},Object.defineProperty(n.prototype,"hasReplacementPatterns",{get:function(){return this._state.kind===1},enumerable:!0,configurable:!0}),n.prototype.buildReplaceString=function(e,t){if(this._state.kind===0)return t?ZX(e,this._state.staticValue):this._state.staticValue;for(var r="",i=0,o=this._state.pieces.length;i<o;i++){var s=this._state.pieces[i];if(s.staticValue!==null){r+=s.staticValue;continue}r+=n._substitute(s.matchIndex,e)}return r},n._substitute=function(e,t){if(t===null)return"";if(e===0)return t[0];for(var r="";e>0;){if(e<t.length){var i=t[e]||"";return i+r}r=String(e%10)+r,e=Math.floor(e/10)}return"$"+r},n}(),s1=function(){function n(e,t){this.staticValue=e,this.matchIndex=t}return n.staticValue=function(e){return new n(e,-1)},n.matchIndex=function(e){return new n(null,e)},n}(),oMe=function(){function n(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}return n.prototype.emitUnchanged=function(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e},n.prototype.emitStatic=function(e,t){this._emitStatic(e),this._lastCharIndex=t},n.prototype._emitStatic=function(e){e.length!==0&&(this._currentStaticPiece+=e)},n.prototype.emitMatchIndex=function(e,t){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=s1.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=s1.matchIndex(e),this._lastCharIndex=t},n.prototype.finalize=function(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=s1.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new $2(this._result)},n}();function sMe(n){if(!n||n.length===0)return new $2(null);for(var e=new oMe(n),t=0,r=n.length;t<r;t++){var i=n.charCodeAt(t);if(i===92){if(t++,t>=r)break;var o=n.charCodeAt(t);switch(o){case 92:e.emitUnchanged(t-1),e.emitStatic("\\",t+1);break;case 110:e.emitUnchanged(t-1),e.emitStatic(`
`,t+1);break;case 116:e.emitUnchanged(t-1),e.emitStatic("	",t+1);break}continue}if(i===36){if(t++,t>=r)break;var o=n.charCodeAt(t);if(o===36){e.emitUnchanged(t-1),e.emitStatic("$",t+1);continue}if(o===48||o===38){e.emitUnchanged(t-1),e.emitMatchIndex(0,t+1);continue}if(49<=o&&o<=57){var s=o-48;if(t+1<r){var a=n.charCodeAt(t+1);if(48<=a&&a<=57){t++,s=s*10+(a-48),e.emitUnchanged(t-2),e.emitMatchIndex(s,t+1);continue}}e.emitUnchanged(t-1),e.emitMatchIndex(s,t+1);continue}}}return e.finalize()}var Ud=new Re("findWidgetVisible",!1),BI=new Re("findInputFocussed",!1),K2=new Re("replaceInputFocussed",!1),pC={primary:545,mac:{primary:2593}},gC={primary:565,mac:{primary:2613}},vC={primary:560,mac:{primary:2608}},mC={primary:554,mac:{primary:2602}},jt={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Ph=19999,aMe=240,uMe=function(){function n(e,t){var r=this;this._toDispose=new De,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Ho,this._decorations=new eMe(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new hr(function(){return r.research(!1)},100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(function(i){(i.reason===3||i.reason===5||i.reason===6)&&r._decorations.setStartPosition(r._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(function(i){r._ignoreModelContentChanged||(i.isFlush&&r._decorations.reset(),r._decorations.setStartPosition(r._editor.getPosition()),r._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(function(i){return r._onStateChanged(i)})),this.research(!1,this._state.searchScope)}return n.prototype.dispose=function(){this._isDisposed=!0,Ue(this._startSearchingTimer),this._toDispose.dispose()},n.prototype._onStateChanged=function(e){var t=this;if(!this._isDisposed&&this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)){var r=this._editor.getModel();r.isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(function(){e.searchScope?t.research(e.moveCursor,t._state.searchScope):t.research(e.moveCursor)},aMe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}},n._getSearchRange=function(e,t){return t||e.getFullModelRange()},n.prototype.research=function(e,t){var r=null;typeof t<"u"?r=t:r=this._decorations.getFindScope(),r!==null&&r.startLineNumber!==r.endLineNumber&&(r.endColumn===1?r=new R(r.startLineNumber,1,r.endLineNumber-1,this._editor.getModel().getLineMaxColumn(r.endLineNumber-1)):r=new R(r.startLineNumber,1,r.endLineNumber,this._editor.getModel().getLineMaxColumn(r.endLineNumber)));var i=this._findMatches(r,!1,Ph);this._decorations.set(i,r),this._state.changeMatchInfo(this._decorations.getCurrentMatchesPosition(this._editor.getSelection()),this._decorations.getCount(),void 0),e&&this._moveToNextMatch(this._decorations.getStartPosition())},n.prototype._hasMatches=function(){return this._state.matchesCount>0},n.prototype._cannotFind=function(){if(!this._hasMatches()){var e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1},n.prototype._setCurrentFindMatch=function(e){var t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)},n.prototype._prevSearchPosition=function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),r=e.lineNumber,i=e.column,o=this._editor.getModel();return t||i===1?(r===1?r=o.getLineCount():r--,i=o.getLineMaxColumn(r)):i--,new $(r,i)},n.prototype._moveToPrevMatch=function(e,t){if(t===void 0&&(t=!1),this._decorations.getCount()<Ph){var r=this._decorations.matchBeforePosition(e);r&&r.isEmpty()&&r.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),r=this._decorations.matchBeforePosition(e)),r&&this._setCurrentFindMatch(r);return}if(!this._cannotFind()){var i=this._decorations.getFindScope(),o=n._getSearchRange(this._editor.getModel(),i);o.getEndPosition().isBefore(e)&&(e=o.getEndPosition()),e.isBefore(o.getStartPosition())&&(e=o.getEndPosition());var s=e.lineNumber,a=e.column,u=this._editor.getModel(),l=new $(s,a),f=u.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1);if(f&&f.range.isEmpty()&&f.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),f=u.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1)),!!f){if(!t&&!o.containsRange(f.range))return this._moveToPrevMatch(f.range.getStartPosition(),!0);this._setCurrentFindMatch(f.range)}}},n.prototype.moveToPrevMatch=function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())},n.prototype._nextSearchPosition=function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),r=e.lineNumber,i=e.column,o=this._editor.getModel();return t||i===o.getLineMaxColumn(r)?(r===o.getLineCount()?r=1:r++,i=1):i++,new $(r,i)},n.prototype._moveToNextMatch=function(e){if(this._decorations.getCount()<Ph){var t=this._decorations.matchAfterPosition(e);t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),t&&this._setCurrentFindMatch(t);return}var r=this._getNextMatch(e,!1,!0);r&&this._setCurrentFindMatch(r.range)},n.prototype._getNextMatch=function(e,t,r,i){if(i===void 0&&(i=!1),this._cannotFind())return null;var o=this._decorations.getFindScope(),s=n._getSearchRange(this._editor.getModel(),o);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());var a=e.lineNumber,u=e.column,l=this._editor.getModel(),f=new $(a,u),h=l.findNextMatch(this._state.searchString,f,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,t);return r&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(f)&&(f=this._nextSearchPosition(f),h=l.findNextMatch(this._state.searchString,f,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,t)),h?!i&&!s.containsRange(h.range)?this._getNextMatch(h.range.getEndPosition(),t,r,!0):h:null},n.prototype.moveToNextMatch=function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())},n.prototype._getReplacePattern=function(){return this._state.isRegex?sMe(this._state.replaceString):$2.fromStaticValue(this._state.replaceString)},n.prototype.replace=function(){if(this._hasMatches()){var e=this._getReplacePattern(),t=this._editor.getSelection(),r=this._getNextMatch(t.getStartPosition(),!0,!1);if(r)if(t.equalsRange(r.range)){var i=e.buildReplaceString(r.matches,this._state.preserveCase),o=new ur(t,i);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new $(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(r.range)}},n.prototype._findMatches=function(e,t,r){var i=n._getSearchRange(this._editor.getModel(),e);return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,t,r)},n.prototype.replaceAll=function(){if(this._hasMatches()){var e=this._decorations.getFindScope();e===null&&this._state.matchesCount>=Ph?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}},n.prototype._largeReplaceAll=function(){var e=new yh(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null),t=e.parseSearchRequest();if(t){var r=t.regex;if(!r.multiline){var i="m";r.ignoreCase&&(i+="i"),r.global&&(i+="g"),r=new RegExp(r.source,i)}var o=this._editor.getModel(),s=o.getValue(1),a=o.getFullModelRange(),u=this._getReplacePattern(),l,f=this._state.preserveCase;u.hasReplacementPatterns||f?l=s.replace(r,function(){return u.buildReplaceString(arguments,f)}):l=s.replace(r,u.buildReplaceString(null,f));var h=new dS(a,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)}},n.prototype._regularReplaceAll=function(e){for(var t=this._getReplacePattern(),r=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[],o=0,s=r.length;o<s;o++)i[o]=t.buildReplaceString(r[o].matches,this._state.preserveCase);var a=new tMe(this._editor.getSelection(),r.map(function(u){return u.range}),i);this._executeEditorCommand("replaceAll",a)},n.prototype.selectAllMatches=function(){if(this._hasMatches()){for(var e=this._decorations.getFindScope(),t=this._findMatches(e,!1,1073741824),r=t.map(function(u){return new Ce(u.range.startLineNumber,u.range.startColumn,u.range.endLineNumber,u.range.endColumn)}),i=this._editor.getSelection(),o=0,s=r.length;o<s;o++){var a=r[o];if(a.equalsRange(i)){r=[i].concat(r.slice(0,o)).concat(r.slice(o+1));break}}this._editor.setSelections(r)}},n.prototype._executeEditorCommand=function(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}},n}(),lMe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cMe={inputActiveOptionBorder:Z.fromHex("#007ACC00"),inputActiveOptionBackground:Z.fromHex("#0E639C50")},WI=function(n){lMe(e,n);function e(t){var r=n.call(this)||this;return r._onChange=r._register(new j),r.onChange=r._onChange.event,r._onKeyDown=r._register(new j),r.onKeyDown=r._onKeyDown.event,r._opts=tl(t),_r(r._opts,cMe,!1),r._checked=r._opts.isChecked,r.domNode=document.createElement("div"),r.domNode.title=r._opts.title,r.domNode.className="monaco-custom-checkbox "+(r._opts.actionClassName||"")+" "+(r._checked?"checked":"unchecked"),r.domNode.tabIndex=0,r.domNode.setAttribute("role","checkbox"),r.domNode.setAttribute("aria-checked",String(r._checked)),r.domNode.setAttribute("aria-label",r._opts.title),r.applyStyles(),r.onclick(r.domNode,function(i){r.checked=!r._checked,r._onChange.fire(!1),i.preventDefault()}),r.onkeydown(r.domNode,function(i){if(i.keyCode===10||i.keyCode===3){r.checked=!r._checked,r._onChange.fire(!0),i.preventDefault();return}r._onKeyDown.fire(i)}),r}return e.prototype.focus=function(){this.domNode.focus()},Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t,this.domNode.setAttribute("aria-checked",String(this._checked)),this._checked?this.domNode.classList.add("checked"):this.domNode.classList.remove("checked"),this.applyStyles()},enumerable:!0,configurable:!0}),e.prototype.width=function(){return 22},e.prototype.style=function(t){t.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=t.inputActiveOptionBorder),t.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=t.inputActiveOptionBackground),this.applyStyles()},e.prototype.applyStyles=function(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"transparent",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"transparent")},e.prototype.enable=function(){this.domNode.tabIndex=0,this.domNode.setAttribute("aria-disabled",String(!1))},e.prototype.disable=function(){oF(this.domNode),this.domNode.setAttribute("aria-disabled",String(!0))},e}(bo),G2=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fMe=S("caseDescription","Match Case"),hMe=S("wordsDescription","Match Whole Word"),dMe=S("regexDescription","Use Regular Expression"),XX=function(n){G2(e,n);function e(t){return n.call(this,{actionClassName:"monaco-case-sensitive",title:fMe+t.appendTitle,isChecked:t.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionBackground:t.inputActiveOptionBackground})||this}return e}(WI),QX=function(n){G2(e,n);function e(t){return n.call(this,{actionClassName:"monaco-whole-word",title:hMe+t.appendTitle,isChecked:t.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionBackground:t.inputActiveOptionBackground})||this}return e}(WI),JX=function(n){G2(e,n);function e(t){return n.call(this,{actionClassName:"monaco-regex",title:dMe+t.appendTitle,isChecked:t.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionBackground:t.inputActiveOptionBackground})||this}return e}(WI),pMe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gMe=function(n){pMe(e,n);function e(t,r,i,o){var s=n.call(this)||this;s._hideSoon=s._register(new hr(function(){return s._hide()},2e3)),s._isVisible=!1,s._editor=t,s._state=r,s._keybindingService=i,s._domNode=document.createElement("div"),s._domNode.className="findOptionsWidget",s._domNode.style.display="none",s._domNode.style.top="10px",s._domNode.setAttribute("role","presentation"),s._domNode.setAttribute("aria-hidden","true");var a=o.getTheme().getColor(lS),u=o.getTheme().getColor(cS);return s.caseSensitive=s._register(new XX({appendTitle:s._keybindingLabelFor(jt.ToggleCaseSensitiveCommand),isChecked:s._state.matchCase,inputActiveOptionBorder:a,inputActiveOptionBackground:u})),s._domNode.appendChild(s.caseSensitive.domNode),s._register(s.caseSensitive.onChange(function(){s._state.change({matchCase:s.caseSensitive.checked},!1)})),s.wholeWords=s._register(new QX({appendTitle:s._keybindingLabelFor(jt.ToggleWholeWordCommand),isChecked:s._state.wholeWord,inputActiveOptionBorder:a,inputActiveOptionBackground:u})),s._domNode.appendChild(s.wholeWords.domNode),s._register(s.wholeWords.onChange(function(){s._state.change({wholeWord:s.wholeWords.checked},!1)})),s.regex=s._register(new JX({appendTitle:s._keybindingLabelFor(jt.ToggleRegexCommand),isChecked:s._state.isRegex,inputActiveOptionBorder:a,inputActiveOptionBackground:u})),s._domNode.appendChild(s.regex.domNode),s._register(s.regex.onChange(function(){s._state.change({isRegex:s.regex.checked},!1)})),s._editor.addOverlayWidget(s),s._register(s._state.onFindReplaceStateChange(function(l){var f=!1;l.isRegex&&(s.regex.checked=s._state.isRegex,f=!0),l.wholeWord&&(s.wholeWords.checked=s._state.wholeWord,f=!0),l.matchCase&&(s.caseSensitive.checked=s._state.matchCase,f=!0),!s._state.isRevealed&&f&&s._revealTemporarily()})),s._register(nF(s._domNode,function(l){return s._onMouseOut()})),s._register(ie(s._domNode,"mouseover",function(l){return s._onMouseOver()})),s._applyTheme(o.getTheme()),s._register(o.onThemeChange(s._applyTheme.bind(s))),s}return e.prototype._keybindingLabelFor=function(t){var r=this._keybindingService.lookupKeybinding(t);return r?" ("+r.getLabel()+")":""},e.prototype.dispose=function(){this._editor.removeOverlayWidget(this),n.prototype.dispose.call(this)},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:0}},e.prototype.highlightFindOptions=function(){this._revealTemporarily()},e.prototype._revealTemporarily=function(){this._show(),this._hideSoon.schedule()},e.prototype._onMouseOut=function(){this._hideSoon.schedule()},e.prototype._onMouseOver=function(){this._hideSoon.cancel()},e.prototype._show=function(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")},e.prototype._hide=function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")},e.prototype._applyTheme=function(t){var r={inputActiveOptionBorder:t.getColor(lS),inputActiveOptionBackground:t.getColor(cS)};this.caseSensitive.style(r),this.wholeWords.style(r),this.regex.style(r)},e.ID="editor.contrib.findOptionsWidget",e}(bo);Xt(function(n,e){var t=n.getColor(fu);t&&e.addRule(".monaco-editor .findOptionsWidget { background-color: "+t+"; }");var r=n.getColor(Bd);r&&e.addRule(".monaco-editor .findOptionsWidget { box-shadow: 0 2px 8px "+r+"; }");var i=n.getColor(dr);i&&e.addRule(".monaco-editor .findOptionsWidget { border: 2px solid "+i+"; }")});function _C(n,e){return n===1?!0:n===2?!1:e}var vMe=function(){function n(){this._onFindReplaceStateChange=new j,this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null}return Object.defineProperty(n.prototype,"searchString",{get:function(){return this._searchString},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"replaceString",{get:function(){return this._replaceString},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRevealed",{get:function(){return this._isRevealed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReplaceRevealed",{get:function(){return this._isReplaceRevealed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRegex",{get:function(){return _C(this._isRegexOverride,this._isRegex)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"wholeWord",{get:function(){return _C(this._wholeWordOverride,this._wholeWord)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matchCase",{get:function(){return _C(this._matchCaseOverride,this._matchCase)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"preserveCase",{get:function(){return _C(this._preserveCaseOverride,this._preserveCase)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actualIsRegex",{get:function(){return this._isRegex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actualWholeWord",{get:function(){return this._wholeWord},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actualMatchCase",{get:function(){return this._matchCase},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actualPreserveCase",{get:function(){return this._preserveCase},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"searchScope",{get:function(){return this._searchScope},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matchesPosition",{get:function(){return this._matchesPosition},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matchesCount",{get:function(){return this._matchesCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentMatch",{get:function(){return this._currentMatch},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){},n.prototype.changeMatchInfo=function(e,t,r){var i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1},o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,o=!0),typeof r<"u"&&(R.equalsRange(this._currentMatch,r)||(this._currentMatch=r,i.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(i)},n.prototype.change=function(e,t,r){r===void 0&&(r=!0);var i={moveCursor:t,updateHistory:r,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1},o=!1,s=this.isRegex,a=this.wholeWord,u=this.matchCase,l=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,i.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,i.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,i.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,i.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(R.equalsRange(this._searchScope,e.searchScope)||(this._searchScope=e.searchScope,i.searchScope=!0,o=!0)),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,s!==this.isRegex&&(o=!0,i.isRegex=!0),a!==this.wholeWord&&(o=!0,i.wholeWord=!0),u!==this.matchCase&&(o=!0,i.matchCase=!0),l!==this.preserveCase&&(o=!0,i.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(i)},n}();function mMe(n,e){e===void 0&&(e={});var t=Y2(e);return t.textContent=n,t}function eQ(n,e){e===void 0&&(e={});var t=Y2(e);return tQ(t,yMe(n),e.actionHandler),t}function Y2(n){var e=n.inline?"span":"div",t=document.createElement(e);return n.className&&(t.className=n.className),t}var _Me=function(){function n(e){this.source=e,this.index=0}return n.prototype.eos=function(){return this.index>=this.source.length},n.prototype.next=function(){var e=this.peek();return this.advance(),e},n.prototype.peek=function(){return this.source[this.index]},n.prototype.advance=function(){this.index++},n}();function tQ(n,e,t){var r;if(e.type===2)r=document.createTextNode(e.content||"");else if(e.type===3)r=document.createElement("b");else if(e.type===4)r=document.createElement("i");else if(e.type===5&&t){var i=document.createElement("a");i.href="#",t.disposeables.add(Br(i,"click",function(o){t.callback(String(e.index),o)})),r=i}else e.type===7?r=document.createElement("br"):e.type===1&&(r=n);r&&n!==r&&n.appendChild(r),r&&Array.isArray(e.children)&&e.children.forEach(function(o){tQ(r,o,t)})}function yMe(n){for(var e={type:1,children:[]},t=0,r=e,i=[],o=new _Me(n);!o.eos();){var s=o.next(),a=s==="\\"&&kR(o.peek())!==0;if(a&&(s=o.next()),!a&&bMe(s)&&s===o.peek()){o.advance(),r.type===2&&(r=i.pop());var u=kR(s);if(r.type===u||r.type===5&&u===6)r=i.pop();else{var l={type:u,children:[]};u===5&&(l.index=t,t++),r.children.push(l),i.push(r),r=l}}else if(s===`
`)r.type===2&&(r=i.pop()),r.children.push({type:7});else if(r.type!==2){var f={type:2,content:s};r.children.push(f),i.push(r),r=f}else r.content+=s}return r.type===2&&(r=i.pop()),e}function bMe(n){return kR(n)!==0}function kR(n){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;default:return 0}}var wMe=function(){function n(e,t){e===void 0&&(e=[]),t===void 0&&(t=10),this._initialize(e),this._limit=t,this._onChange()}return n.prototype.add=function(e){this._history.delete(e),this._history.add(e),this._onChange()},n.prototype.next=function(){return this._navigator.next()},n.prototype.previous=function(){return this._navigator.previous()},n.prototype.current=function(){return this._navigator.current()},n.prototype.parent=function(){return null},n.prototype.first=function(){return this._navigator.first()},n.prototype.last=function(){return this._navigator.last()},n.prototype.has=function(e){return this._history.has(e)},n.prototype._onChange=function(){this._reduceToLimit(),this._navigator=new E0e(this._elements,0,this._elements.length,this._elements.length)},n.prototype._reduceToLimit=function(){var e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))},n.prototype._initialize=function(e){this._history=new Set;for(var t=0,r=e;t<r.length;t++){var i=r[t];this._history.add(i)}},Object.defineProperty(n.prototype,"_elements",{get:function(){var e=[];return this._history.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),n}(),nQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),c_=ke,CMe={inputBackground:Z.fromHex("#3C3C3C"),inputForeground:Z.fromHex("#CCCCCC"),inputValidationInfoBorder:Z.fromHex("#55AAFF"),inputValidationInfoBackground:Z.fromHex("#063B49"),inputValidationWarningBorder:Z.fromHex("#B89500"),inputValidationWarningBackground:Z.fromHex("#352A05"),inputValidationErrorBorder:Z.fromHex("#BE1100"),inputValidationErrorBackground:Z.fromHex("#5A1D1D")},rQ=function(n){nQ(e,n);function e(t,r,i){var o=n.call(this)||this;o.state="idle",o.maxHeight=Number.POSITIVE_INFINITY,o._onDidChange=o._register(new j),o.onDidChange=o._onDidChange.event,o._onDidHeightChange=o._register(new j),o.onDidHeightChange=o._onDidHeightChange.event,o.contextViewProvider=r,o.options=i||Object.create(null),_r(o.options,CMe,!1),o.message=null,o.placeholder=o.options.placeholder||"",o.ariaLabel=o.options.ariaLabel||"",o.inputBackground=o.options.inputBackground,o.inputForeground=o.options.inputForeground,o.inputBorder=o.options.inputBorder,o.inputValidationInfoBorder=o.options.inputValidationInfoBorder,o.inputValidationInfoBackground=o.options.inputValidationInfoBackground,o.inputValidationInfoForeground=o.options.inputValidationInfoForeground,o.inputValidationWarningBorder=o.options.inputValidationWarningBorder,o.inputValidationWarningBackground=o.options.inputValidationWarningBackground,o.inputValidationWarningForeground=o.options.inputValidationWarningForeground,o.inputValidationErrorBorder=o.options.inputValidationErrorBorder,o.inputValidationErrorBackground=o.options.inputValidationErrorBackground,o.inputValidationErrorForeground=o.options.inputValidationErrorForeground,o.options.validationOptions&&(o.validation=o.options.validationOptions.validation),o.element=ce(t,c_(".monaco-inputbox.idle"));var s=o.options.flexibleHeight?"textarea":"input",a=ce(o.element,c_(".wrapper"));if(o.input=ce(a,c_(s+".input")),o.input.setAttribute("autocorrect","off"),o.input.setAttribute("autocapitalize","off"),o.input.setAttribute("spellcheck","false"),o.onfocus(o.input,function(){return de(o.element,"synthetic-focus")}),o.onblur(o.input,function(){return qe(o.element,"synthetic-focus")}),o.options.flexibleHeight){o.maxHeight=typeof o.options.flexibleMaxHeight=="number"?o.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,o.mirror=ce(a,c_("div.mirror")),o.mirror.innerHTML="&nbsp;",o.scrollableElement=new Y0(o.element,{vertical:1}),o.options.flexibleWidth&&(o.input.setAttribute("wrap","off"),o.mirror.style.whiteSpace="pre",o.mirror.style.wordWrap="initial"),ce(t,o.scrollableElement.getDomNode()),o._register(o.scrollableElement),o._register(o.scrollableElement.onScroll(function(l){return o.input.scrollTop=l.scrollTop}));var u=We.filter(pt(document,"selectionchange"),function(){var l=document.getSelection();return!!l&&l.anchorNode===a});o._register(u(o.updateScrollDimensions,o)),o._register(o.onDidHeightChange(o.updateScrollDimensions,o))}else o.input.type=o.options.type||"text",o.input.setAttribute("wrap","off");return o.ariaLabel&&o.input.setAttribute("aria-label",o.ariaLabel),o.placeholder&&o.setPlaceHolder(o.placeholder),o.oninput(o.input,function(){return o.onValueChange()}),o.onblur(o.input,function(){return o.onBlur()}),o.onfocus(o.input,function(){return o.onFocus()}),o.placeholder&&Ro&&o.onclick(o.input,function(l){nn.stop(l,!0),o.input.focus()}),setTimeout(function(){o.input&&o.updateMirror()},0),o.options.actions&&(o.actionbar=o._register(new eb(o.element)),o.actionbar.push(o.options.actions,{icon:!0,label:!1})),o.applyStyles(),o}return e.prototype.onBlur=function(){this._hideMessage()},e.prototype.onFocus=function(){this._showMessage()},e.prototype.setPlaceHolder=function(t){this.input&&(this.input.setAttribute("placeholder",t),this.input.title=t)},e.prototype.setAriaLabel=function(t){this.ariaLabel=t,this.input&&(t?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label"))},Object.defineProperty(e.prototype,"inputElement",{get:function(){return this.input},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.input.value},set:function(t){this.input.value!==t&&(this.input.value=t,this.onValueChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return typeof this.cachedHeight=="number"?this.cachedHeight:kO(this.element)},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this.input.focus()},e.prototype.blur=function(){this.input.blur()},e.prototype.hasFocus=function(){return document.activeElement===this.input},e.prototype.select=function(t){t===void 0&&(t=null),this.input.select(),t&&this.input.setSelectionRange(t.start,t.end)},e.prototype.enable=function(){this.input.removeAttribute("disabled")},e.prototype.disable=function(){this.input.disabled=!0,this._hideMessage()},Object.defineProperty(e.prototype,"width",{get:function(){return ua(this.input)},set:function(t){if(this.options.flexibleHeight&&this.options.flexibleWidth){var r=0;if(this.mirror){var i=parseFloat(this.mirror.style.paddingLeft||"")||0,o=parseFloat(this.mirror.style.paddingRight||"")||0;r=i+o}this.input.style.width=t-r+"px"}else this.input.style.width=t+"px";this.mirror&&(this.mirror.style.width=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{set:function(t){this.options.flexibleHeight&&this.options.flexibleWidth?this.input.style.width="calc(100% - "+t+"px)":this.input.style.paddingRight=t+"px",this.mirror&&(this.mirror.style.paddingRight=t+"px")},enumerable:!0,configurable:!0}),e.prototype.updateScrollDimensions=function(){if(!(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number")){var t=this.cachedContentHeight,r=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:t,height:r}),this.scrollableElement.setScrollPosition({scrollTop:i})}},e.prototype.showMessage=function(t,r){this.message=t,qe(this.element,"idle"),qe(this.element,"info"),qe(this.element,"warning"),qe(this.element,"error"),de(this.element,this.classForType(t.type));var i=this.stylesForType(this.message.type);this.element.style.border=i.border?"1px solid "+i.border:null;var o;t.type===3?o=S("alertErrorMessage","Error: {0}",t.content):t.type===2?o=S("alertWarningMessage","Warning: {0}",t.content):o=S("alertInfoMessage","Info: {0}",t.content),pi(o),(this.hasFocus()||r)&&this._showMessage()},e.prototype.hideMessage=function(){this.message=null,qe(this.element,"info"),qe(this.element,"warning"),qe(this.element,"error"),de(this.element,"idle"),this._hideMessage(),this.applyStyles()},e.prototype.validate=function(){var t=null;return this.validation&&(t=this.validation(this.value),t?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(t)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),!t},e.prototype.stylesForType=function(t){switch(t){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}},e.prototype.classForType=function(t){switch(t){case 1:return"info";case 2:return"warning";default:return"error"}},e.prototype._showMessage=function(){var t=this;if(!(!this.contextViewProvider||!this.message)){var r,i=function(){return r.style.width=ua(t.element)+"px"};this.contextViewProvider.showContextView({getAnchor:function(){return t.element},anchorAlignment:1,render:function(o){if(!t.message)return null;r=ce(o,c_(".monaco-inputbox-container")),i();var s={inline:!0,className:"monaco-inputbox-message"},a=t.message.formatContent?eQ(t.message.content,s):mMe(t.message.content,s);de(a,t.classForType(t.message.type));var u=t.stylesForType(t.message.type);return a.style.backgroundColor=u.background?u.background.toString():null,a.style.color=u.foreground?u.foreground.toString():null,a.style.border=u.border?"1px solid "+u.border:null,ce(r,a),null},onHide:function(){t.state="closed"},layout:i}),this.state="open"}},e.prototype._hideMessage=function(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")},e.prototype.onValueChange=function(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()},e.prototype.updateMirror=function(){if(this.mirror){var t=this.value||this.placeholder,r=t.charCodeAt(t.length-1),i=r===10?" ":"",o=t+i;o?this.mirror.textContent=t+i:this.mirror.innerHTML="&nbsp;",this.layout()}},e.prototype.style=function(t){this.inputBackground=t.inputBackground,this.inputForeground=t.inputForeground,this.inputBorder=t.inputBorder,this.inputValidationInfoBackground=t.inputValidationInfoBackground,this.inputValidationInfoForeground=t.inputValidationInfoForeground,this.inputValidationInfoBorder=t.inputValidationInfoBorder,this.inputValidationWarningBackground=t.inputValidationWarningBackground,this.inputValidationWarningForeground=t.inputValidationWarningForeground,this.inputValidationWarningBorder=t.inputValidationWarningBorder,this.inputValidationErrorBackground=t.inputValidationErrorBackground,this.inputValidationErrorForeground=t.inputValidationErrorForeground,this.inputValidationErrorBorder=t.inputValidationErrorBorder,this.applyStyles()},e.prototype.applyStyles=function(){if(this.element){var t=this.inputBackground?this.inputBackground.toString():null,r=this.inputForeground?this.inputForeground.toString():null,i=this.inputBorder?this.inputBorder.toString():null;this.element.style.backgroundColor=t,this.element.style.color=r,this.input.style.backgroundColor=t,this.input.style.color=r,this.element.style.borderWidth=i?"1px":null,this.element.style.borderStyle=i?"solid":null,this.element.style.borderColor=i}},e.prototype.layout=function(){if(this.mirror){var t=this.cachedContentHeight;this.cachedContentHeight=kO(this.mirror),t!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}},e.prototype.dispose=function(){this._hideMessage(),this.element=null,this.input=null,this.contextViewProvider=void 0,this.message=null,this.validation=void 0,this.state=null,this.actionbar=void 0,n.prototype.dispose.call(this)},e}(bo),iQ=function(n){nQ(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return o.history=new wMe(i.history,100),o}return e.prototype.addToHistory=function(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)},e.prototype.showNextValue=function(){this.history.has(this.value)||this.addToHistory();var t=this.getNextValue();t&&(t=t===this.value?this.getNextValue():t),t&&(this.value=t,z8(this.value))},e.prototype.showPreviousValue=function(){this.history.has(this.value)||this.addToHistory();var t=this.getPreviousValue();t&&(t=t===this.value?this.getPreviousValue():t),t&&(this.value=t,z8(this.value))},e.prototype.getCurrentValue=function(){var t=this.history.current();return t||(t=this.history.last(),this.history.next()),t},e.prototype.getPreviousValue=function(){return this.history.previous()||this.history.first()},e.prototype.getNextValue=function(){return this.history.next()||this.history.last()},e}(rQ),SMe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EMe=S("defaultLabel","input"),IMe=function(n){SMe(e,n);function e(t,r,i,o){var s=n.call(this)||this;s._showOptionButtons=i,s.fixFocusOnOptionClickEnabled=!0,s._onDidOptionChange=s._register(new j),s.onDidOptionChange=s._onDidOptionChange.event,s._onKeyDown=s._register(new j),s.onKeyDown=s._onKeyDown.event,s._onMouseDown=s._register(new j),s.onMouseDown=s._onMouseDown.event,s._onInput=s._register(new j),s._onKeyUp=s._register(new j),s._onCaseSensitiveKeyDown=s._register(new j),s.onCaseSensitiveKeyDown=s._onCaseSensitiveKeyDown.event,s._onRegexKeyDown=s._register(new j),s.onRegexKeyDown=s._onRegexKeyDown.event,s._lastHighlightFindOptions=0,s.contextViewProvider=r,s.placeholder=o.placeholder||"",s.validation=o.validation,s.label=o.label||EMe,s.inputActiveOptionBorder=o.inputActiveOptionBorder,s.inputActiveOptionBackground=o.inputActiveOptionBackground,s.inputBackground=o.inputBackground,s.inputForeground=o.inputForeground,s.inputBorder=o.inputBorder,s.inputValidationInfoBorder=o.inputValidationInfoBorder,s.inputValidationInfoBackground=o.inputValidationInfoBackground,s.inputValidationInfoForeground=o.inputValidationInfoForeground,s.inputValidationWarningBorder=o.inputValidationWarningBorder,s.inputValidationWarningBackground=o.inputValidationWarningBackground,s.inputValidationWarningForeground=o.inputValidationWarningForeground,s.inputValidationErrorBorder=o.inputValidationErrorBorder,s.inputValidationErrorBackground=o.inputValidationErrorBackground,s.inputValidationErrorForeground=o.inputValidationErrorForeground;var a=o.appendCaseSensitiveLabel||"",u=o.appendWholeWordsLabel||"",l=o.appendRegexLabel||"",f=o.history||[],h=!!o.flexibleHeight,d=!!o.flexibleWidth,g=o.flexibleMaxHeight;s.domNode=document.createElement("div"),de(s.domNode,"monaco-findInput"),s.inputBox=s._register(new iQ(s.domNode,s.contextViewProvider,{placeholder:s.placeholder||"",ariaLabel:s.label||"",validationOptions:{validation:s.validation},inputBackground:s.inputBackground,inputForeground:s.inputForeground,inputBorder:s.inputBorder,inputValidationInfoBackground:s.inputValidationInfoBackground,inputValidationInfoForeground:s.inputValidationInfoForeground,inputValidationInfoBorder:s.inputValidationInfoBorder,inputValidationWarningBackground:s.inputValidationWarningBackground,inputValidationWarningForeground:s.inputValidationWarningForeground,inputValidationWarningBorder:s.inputValidationWarningBorder,inputValidationErrorBackground:s.inputValidationErrorBackground,inputValidationErrorForeground:s.inputValidationErrorForeground,inputValidationErrorBorder:s.inputValidationErrorBorder,history:f,flexibleHeight:h,flexibleWidth:d,flexibleMaxHeight:g})),s.regex=s._register(new JX({appendTitle:l,isChecked:!1,inputActiveOptionBorder:s.inputActiveOptionBorder,inputActiveOptionBackground:s.inputActiveOptionBackground})),s._register(s.regex.onChange(function(y){s._onDidOptionChange.fire(y),!y&&s.fixFocusOnOptionClickEnabled&&s.inputBox.focus(),s.validate()})),s._register(s.regex.onKeyDown(function(y){s._onRegexKeyDown.fire(y)})),s.wholeWords=s._register(new QX({appendTitle:u,isChecked:!1,inputActiveOptionBorder:s.inputActiveOptionBorder,inputActiveOptionBackground:s.inputActiveOptionBackground})),s._register(s.wholeWords.onChange(function(y){s._onDidOptionChange.fire(y),!y&&s.fixFocusOnOptionClickEnabled&&s.inputBox.focus(),s.validate()})),s.caseSensitive=s._register(new XX({appendTitle:a,isChecked:!1,inputActiveOptionBorder:s.inputActiveOptionBorder,inputActiveOptionBackground:s.inputActiveOptionBackground})),s._register(s.caseSensitive.onChange(function(y){s._onDidOptionChange.fire(y),!y&&s.fixFocusOnOptionClickEnabled&&s.inputBox.focus(),s.validate()})),s._register(s.caseSensitive.onKeyDown(function(y){s._onCaseSensitiveKeyDown.fire(y)})),s._showOptionButtons&&(s.inputBox.paddingRight=s.caseSensitive.width()+s.wholeWords.width()+s.regex.width());var v=[s.caseSensitive.domNode,s.wholeWords.domNode,s.regex.domNode];s.onkeydown(s.domNode,function(y){if(y.equals(15)||y.equals(17)||y.equals(9)){var b=v.indexOf(document.activeElement);if(b>=0){var C=-1;y.equals(17)?C=(b+1)%v.length:y.equals(15)&&(b===0?C=v.length-1:C=b-1),y.equals(9)?v[b].blur():C>=0&&v[C].focus(),nn.stop(y,!0)}}});var m=document.createElement("div");return m.className="controls",m.style.display=s._showOptionButtons?"block":"none",m.appendChild(s.caseSensitive.domNode),m.appendChild(s.wholeWords.domNode),m.appendChild(s.regex.domNode),s.domNode.appendChild(m),t&&t.appendChild(s.domNode),s.onkeydown(s.inputBox.inputElement,function(y){return s._onKeyDown.fire(y)}),s.onkeyup(s.inputBox.inputElement,function(y){return s._onKeyUp.fire(y)}),s.oninput(s.inputBox.inputElement,function(y){return s._onInput.fire()}),s.onmousedown(s.inputBox.inputElement,function(y){return s._onMouseDown.fire(y)}),s}return e.prototype.enable=function(){qe(this.domNode,"disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()},e.prototype.disable=function(){de(this.domNode,"disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()},e.prototype.setFocusInputOnOptionClick=function(t){this.fixFocusOnOptionClickEnabled=t},e.prototype.setEnabled=function(t){t?this.enable():this.disable()},e.prototype.getValue=function(){return this.inputBox.value},e.prototype.setValue=function(t){this.inputBox.value!==t&&(this.inputBox.value=t)},e.prototype.style=function(t){this.inputActiveOptionBorder=t.inputActiveOptionBorder,this.inputActiveOptionBackground=t.inputActiveOptionBackground,this.inputBackground=t.inputBackground,this.inputForeground=t.inputForeground,this.inputBorder=t.inputBorder,this.inputValidationInfoBackground=t.inputValidationInfoBackground,this.inputValidationInfoForeground=t.inputValidationInfoForeground,this.inputValidationInfoBorder=t.inputValidationInfoBorder,this.inputValidationWarningBackground=t.inputValidationWarningBackground,this.inputValidationWarningForeground=t.inputValidationWarningForeground,this.inputValidationWarningBorder=t.inputValidationWarningBorder,this.inputValidationErrorBackground=t.inputValidationErrorBackground,this.inputValidationErrorForeground=t.inputValidationErrorForeground,this.inputValidationErrorBorder=t.inputValidationErrorBorder,this.applyStyles()},e.prototype.applyStyles=function(){if(this.domNode){var t={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(t),this.wholeWords.style(t),this.caseSensitive.style(t);var r={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(r)}},e.prototype.select=function(){this.inputBox.select()},e.prototype.focus=function(){this.inputBox.focus()},e.prototype.getCaseSensitive=function(){return this.caseSensitive.checked},e.prototype.setCaseSensitive=function(t){this.caseSensitive.checked=t},e.prototype.getWholeWords=function(){return this.wholeWords.checked},e.prototype.setWholeWords=function(t){this.wholeWords.checked=t},e.prototype.getRegex=function(){return this.regex.checked},e.prototype.setRegex=function(t){this.regex.checked=t,this.validate()},e.prototype.focusOnCaseSensitive=function(){this.caseSensitive.focus()},e.prototype.highlightFindOptions=function(){qe(this.domNode,"highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,de(this.domNode,"highlight-"+this._lastHighlightFindOptions)},e.prototype.validate=function(){this.inputBox&&this.inputBox.validate()},e.prototype.clearMessage=function(){this.inputBox&&this.inputBox.hideMessage()},e.prototype.dispose=function(){n.prototype.dispose.call(this)},e}(bo),oQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xMe=S("defaultLabel","input"),DMe=S("label.preserveCaseCheckbox","Preserve Case"),LMe=function(n){oQ(e,n);function e(t){return n.call(this,{actionClassName:"monaco-case-sensitive",title:DMe+t.appendTitle,isChecked:t.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder})||this}return e}(WI),kMe=function(n){oQ(e,n);function e(t,r,i,o){var s=n.call(this)||this;s._showOptionButtons=i,s.fixFocusOnOptionClickEnabled=!0,s.cachedOptionsWidth=0,s._onDidOptionChange=s._register(new j),s.onDidOptionChange=s._onDidOptionChange.event,s._onKeyDown=s._register(new j),s.onKeyDown=s._onKeyDown.event,s._onMouseDown=s._register(new j),s._onInput=s._register(new j),s._onKeyUp=s._register(new j),s._onPreserveCaseKeyDown=s._register(new j),s.onPreserveCaseKeyDown=s._onPreserveCaseKeyDown.event,s.contextViewProvider=r,s.placeholder=o.placeholder||"",s.validation=o.validation,s.label=o.label||xMe,s.inputActiveOptionBorder=o.inputActiveOptionBorder,s.inputBackground=o.inputBackground,s.inputForeground=o.inputForeground,s.inputBorder=o.inputBorder,s.inputValidationInfoBorder=o.inputValidationInfoBorder,s.inputValidationInfoBackground=o.inputValidationInfoBackground,s.inputValidationInfoForeground=o.inputValidationInfoForeground,s.inputValidationWarningBorder=o.inputValidationWarningBorder,s.inputValidationWarningBackground=o.inputValidationWarningBackground,s.inputValidationWarningForeground=o.inputValidationWarningForeground,s.inputValidationErrorBorder=o.inputValidationErrorBorder,s.inputValidationErrorBackground=o.inputValidationErrorBackground,s.inputValidationErrorForeground=o.inputValidationErrorForeground;var a=!!o.flexibleHeight,u=!!o.flexibleWidth,l=o.flexibleMaxHeight;return s.buildDomNode(o.history||[],a,u,l),t&&t.appendChild(s.domNode),s.onkeydown(s.inputBox.inputElement,function(f){return s._onKeyDown.fire(f)}),s.onkeyup(s.inputBox.inputElement,function(f){return s._onKeyUp.fire(f)}),s.oninput(s.inputBox.inputElement,function(f){return s._onInput.fire()}),s.onmousedown(s.inputBox.inputElement,function(f){return s._onMouseDown.fire(f)}),s}return e.prototype.enable=function(){qe(this.domNode,"disabled"),this.inputBox.enable(),this.preserveCase.enable()},e.prototype.disable=function(){de(this.domNode,"disabled"),this.inputBox.disable(),this.preserveCase.disable()},e.prototype.setEnabled=function(t){t?this.enable():this.disable()},e.prototype.style=function(t){this.inputActiveOptionBorder=t.inputActiveOptionBorder,this.inputBackground=t.inputBackground,this.inputForeground=t.inputForeground,this.inputBorder=t.inputBorder,this.inputValidationInfoBackground=t.inputValidationInfoBackground,this.inputValidationInfoForeground=t.inputValidationInfoForeground,this.inputValidationInfoBorder=t.inputValidationInfoBorder,this.inputValidationWarningBackground=t.inputValidationWarningBackground,this.inputValidationWarningForeground=t.inputValidationWarningForeground,this.inputValidationWarningBorder=t.inputValidationWarningBorder,this.inputValidationErrorBackground=t.inputValidationErrorBackground,this.inputValidationErrorForeground=t.inputValidationErrorForeground,this.inputValidationErrorBorder=t.inputValidationErrorBorder,this.applyStyles()},e.prototype.applyStyles=function(){if(this.domNode){var t={inputActiveOptionBorder:this.inputActiveOptionBorder};this.preserveCase.style(t);var r={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(r)}},e.prototype.select=function(){this.inputBox.select()},e.prototype.focus=function(){this.inputBox.focus()},e.prototype.getPreserveCase=function(){return this.preserveCase.checked},e.prototype.setPreserveCase=function(t){this.preserveCase.checked=t},e.prototype.focusOnPreserve=function(){this.preserveCase.focus()},e.prototype.buildDomNode=function(t,r,i,o){var s=this;this.domNode=document.createElement("div"),de(this.domNode,"monaco-findInput"),this.inputBox=this._register(new iQ(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:t,flexibleHeight:r,flexibleWidth:i,flexibleMaxHeight:o})),this.preserveCase=this._register(new LMe({appendTitle:"",isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder})),this._register(this.preserveCase.onChange(function(l){s._onDidOptionChange.fire(l),!l&&s.fixFocusOnOptionClickEnabled&&s.inputBox.focus(),s.validate()})),this._register(this.preserveCase.onKeyDown(function(l){s._onPreserveCaseKeyDown.fire(l)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;var a=[this.preserveCase.domNode];this.onkeydown(this.domNode,function(l){if(l.equals(15)||l.equals(17)||l.equals(9)){var f=a.indexOf(document.activeElement);if(f>=0){var h=-1;l.equals(17)?h=(f+1)%a.length:l.equals(15)&&(f===0?h=a.length-1:h=f-1),l.equals(9)?a[f].blur():h>=0&&a[h].focus(),nn.stop(l,!0)}}});var u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u)},e.prototype.validate=function(){this.inputBox&&this.inputBox.validate()},Object.defineProperty(e.prototype,"width",{set:function(t){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=t,this.domNode.style.width=t+"px"},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){n.prototype.dispose.call(this)},e}(bo),sQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aQ=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uQ=function(n,e){return function(t,r){e(t,r,n)}},Qy="historyNavigationWidget",Z2="historyNavigationEnabled";function TMe(n,e,t){new Re(t,e).bindTo(n)}function NMe(n,e){return n.createScoped(e.target)}function lQ(n,e){return n.getContext(document.activeElement).getValue(e)}function cQ(n,e){var t=NMe(n,e);TMe(t,e,Qy);var r=new Re(Z2,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationEnablement:r}}var AMe=function(n){sQ(e,n);function e(t,r,i,o,s){s===void 0&&(s=!1);var a=n.call(this,t,r,s,i)||this;return a._register(cQ(o,{target:a.inputBox.element,historyNavigator:a.inputBox}).scopedContextKeyService),a}return e=aQ([uQ(3,rt)],e),e}(IMe),OMe=function(n){sQ(e,n);function e(t,r,i,o,s){s===void 0&&(s=!1);var a=n.call(this,t,r,s,i)||this;return a._register(cQ(o,{target:a.inputBox.element,historyNavigator:a.inputBox}).scopedContextKeyService),a}return e=aQ([uQ(3,rt)],e),e}(kMe);ws.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:_e.and(_e.has(Qy),_e.equals(Z2,!0)),primary:16,secondary:[528],handler:function(n,e){var t=lQ(n.get(rt),Qy);if(t){var r=t.historyNavigator;r.showPreviousValue()}}});ws.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:_e.and(_e.has(Qy),_e.equals(Z2,!0)),primary:18,secondary:[530],handler:function(n,e){var t=lQ(n.get(rt),Qy);if(t){var r=t.historyNavigator;r.showNextValue()}}});var X2=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RMe=S("label.find","Find"),MMe=S("placeholder.find","Find"),PMe=S("label.previousMatchButton","Previous match"),FMe=S("label.nextMatchButton","Next match"),BMe=S("label.toggleSelectionFind","Find in selection"),WMe=S("label.closeButton","Close"),VMe=S("label.replace","Replace"),HMe=S("placeholder.replace","Replace"),UMe=S("label.replaceButton","Replace"),jMe=S("label.replaceAllButton","Replace All"),zMe=S("label.toggleReplaceButton","Toggle Replace mode"),qMe=S("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Ph),$Me=S("label.matchesLocation","{0} of {1}"),T9=S("label.noResults","No Results"),$a=419,KMe=275,GMe=KMe-54,tg=69,N9=17+(tg+3+1)+23*4+2,YMe=33,A9="ctrlEnterReplaceAll.windows.donotask",O9=ct?256:2048,aN=function(){function n(e){this.afterLineNumber=e,this.heightInPx=YMe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}return n}();function R9(n,e,t){var r=!!e.match(/\n/);if(t&&r&&t.selectionStart>0){n.stopPropagation();return}}function M9(n,e,t){var r=!!e.match(/\n/);if(t&&r&&t.selectionEnd<t.value.length){n.stopPropagation();return}}var ZMe=function(n){X2(e,n);function e(t,r,i,o,s,a,u,l,f){var h=n.call(this)||this;return h._codeEditor=t,h._controller=r,h._state=i,h._contextViewProvider=o,h._keybindingService=s,h._contextKeyService=a,h._storageService=l,h._notificationService=f,h._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(A9,0),h._isVisible=!1,h._isReplaceVisible=!1,h._ignoreChangeEvent=!1,h._updateHistoryDelayer=new Rv(500),h._register(en(function(){return h._updateHistoryDelayer.cancel()})),h._register(h._state.onFindReplaceStateChange(function(d){return h._onStateChanged(d)})),h._buildDomNode(),h._updateButtons(),h._tryUpdateWidgetWidth(),h._findInput.inputBox.layout(),h._register(h._codeEditor.onDidChangeConfiguration(function(d){if(d.readOnly&&(h._codeEditor.getConfiguration().readOnly&&h._state.change({isReplaceRevealed:!1},!1),h._updateButtons()),d.layoutInfo&&h._tryUpdateWidgetWidth(),d.accessibilitySupport&&h.updateAccessibilitySupport(),d.contribInfo){var g=h._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop;g&&!h._viewZone&&(h._viewZone=new aN(0),h._showViewZone()),!g&&h._viewZone&&h._removeViewZone()}})),h.updateAccessibilitySupport(),h._register(h._codeEditor.onDidChangeCursorSelection(function(){h._isVisible&&h._updateToggleSelectionFindButton()})),h._register(h._codeEditor.onDidFocusEditorWidget(function(){if(h._isVisible){var d=h._controller.getGlobalBufferTerm();d&&d!==h._state.searchString&&(h._state.change({searchString:d},!0),h._findInput.select())}})),h._findInputFocused=BI.bindTo(a),h._findFocusTracker=h._register(Ty(h._findInput.inputBox.inputElement)),h._register(h._findFocusTracker.onDidFocus(function(){h._findInputFocused.set(!0),h._updateSearchScope()})),h._register(h._findFocusTracker.onDidBlur(function(){h._findInputFocused.set(!1)})),h._replaceInputFocused=K2.bindTo(a),h._replaceFocusTracker=h._register(Ty(h._replaceInput.inputBox.inputElement)),h._register(h._replaceFocusTracker.onDidFocus(function(){h._replaceInputFocused.set(!0),h._updateSearchScope()})),h._register(h._replaceFocusTracker.onDidBlur(function(){h._replaceInputFocused.set(!1)})),h._codeEditor.addOverlayWidget(h),h._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop&&(h._viewZone=new aN(0)),h._applyTheme(u.getTheme()),h._register(u.onThemeChange(h._applyTheme.bind(h))),h._register(h._codeEditor.onDidChangeModel(function(){h._isVisible&&(h._viewZoneId=void 0)})),h._register(h._codeEditor.onDidScrollChange(function(d){if(d.scrollTopChanged){h._layoutViewZone();return}setTimeout(function(){h._layoutViewZone()},0)})),h}return e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return this._isVisible?{preference:0}:null},e.prototype._onStateChanged=function(t){if(t.searchString){this._state.searchString.indexOf(`
`)>=0?de(this._domNode,"multipleline"):qe(this._domNode,"multipleline");try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(t.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),t.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),t.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getConfiguration().readOnly&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=ua(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(t.isRevealed||t.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),t.isRegex&&this._findInput.setRegex(this._state.isRegex),t.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),t.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),t.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),t.searchString||t.matchesCount||t.matchesPosition){var r=this._state.searchString.length>0&&this._state.matchesCount===0;vt(this._domNode,"no-results",r),this._updateMatchesCount(),this._updateButtons()}(t.searchString||t.currentMatch)&&this._layoutViewZone(),t.updateHistory&&this._delayedUpdateHistory()},e.prototype._delayedUpdateHistory=function(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this))},e.prototype._updateHistory=function(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()},e.prototype._updateMatchesCount=function(){this._matchesCount.style.minWidth=tg+"px",this._state.matchesCount>=Ph?this._matchesCount.title=qMe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);var t;if(this._state.matchesCount>0){var r=String(this._state.matchesCount);this._state.matchesCount>=Ph&&(r+="+");var i=String(this._state.matchesPosition);i==="0"&&(i="?"),t=Nt($Me,i,r)}else t=T9;this._matchesCount.appendChild(document.createTextNode(t)),pi(this._getAriaLabel(t,this._state.currentMatch,this._state.searchString),!0),tg=Math.max(tg,this._matchesCount.clientWidth)},e.prototype._getAriaLabel=function(t,r,i){return t===T9?i===""?S("ariaSearchNoResultEmpty","{0} found",t):S("ariaSearchNoResult","{0} found for {1}",t,i):r?S("ariaSearchNoResultWithLineNum","{0} found for {1} at {2}",t,i,r.startLineNumber+":"+r.startColumn):S("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for {1}",t,i)},e.prototype._updateToggleSelectionFindButton=function(){var t=this._codeEditor.getSelection(),r=t?t.startLineNumber!==t.endLineNumber||t.startColumn!==t.endColumn:!1,i=this._toggleSelectionFind.checked;this._toggleSelectionFind.setEnabled(this._isVisible&&(i||r))},e.prototype._updateButtons=function(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var t=this._state.searchString.length>0,r=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&t&&r),this._nextBtn.setEnabled(this._isVisible&&t&&r),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&t),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&t),vt(this._domNode,"replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("collapse",!this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("expand",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var i=!this._codeEditor.getConfiguration().readOnly;this._toggleReplaceBtn.setEnabled(this._isVisible&&i)},e.prototype._reveal=function(){var t=this;if(!this._isVisible){this._isVisible=!0;var r=this._codeEditor.getSelection(),i=r?r.startLineNumber!==r.endLineNumber||r.startColumn!==r.endColumn:!1;i&&this._codeEditor.getConfiguration().contribInfo.find.autoFindInSelection?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._tryUpdateWidgetWidth(),this._updateButtons(),setTimeout(function(){de(t._domNode,"visible"),t._domNode.setAttribute("aria-hidden","false")},0),setTimeout(function(){t._findInput.validate()},200),this._codeEditor.layoutOverlayWidget(this);var o=!0;if(this._codeEditor.getConfiguration().contribInfo.find.seedSearchStringFromSelection&&r){var s=this._codeEditor.getDomNode();if(s){var a=Wr(s),u=this._codeEditor.getScrolledVisiblePosition(r.getStartPosition()),l=a.left+(u?u.left:0),f=u?u.top:0;if(this._viewZone&&f<this._viewZone.heightInPx){r.endLineNumber>r.startLineNumber&&(o=!1);var h=iF(this._domNode).left;l>h&&(o=!1);var d=this._codeEditor.getScrolledVisiblePosition(r.getEndPosition()),g=a.left+(d?d.left:0);g>h&&(o=!1)}}}this._showViewZone(o)}},e.prototype._hide=function(t){this._isVisible&&(this._isVisible=!1,this._updateButtons(),qe(this._domNode,"visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),t&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())},e.prototype._layoutViewZone=function(){var t=this,r=this._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop;if(!r){this._removeViewZone();return}if(this._isVisible){var i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(function(o){i.heightInPx=t._getHeight(),t._viewZoneId=o.addZone(i),t._codeEditor.setScrollTop(t._codeEditor.getScrollTop()+i.heightInPx)})}},e.prototype._showViewZone=function(t){var r=this;if(t===void 0&&(t=!0),!!this._isVisible){var i=this._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop;if(i){this._viewZone===void 0&&(this._viewZone=new aN(0));var o=this._viewZone;this._codeEditor.changeViewZones(function(s){if(r._viewZoneId!==void 0){var a=r._getHeight();if(a===o.heightInPx)return;var u=a-o.heightInPx;o.heightInPx=a,s.layoutZone(r._viewZoneId),t&&r._codeEditor.setScrollTop(r._codeEditor.getScrollTop()+u);return}else{var u=r._getHeight();o.heightInPx=u,r._viewZoneId=s.addZone(o),t&&r._codeEditor.setScrollTop(r._codeEditor.getScrollTop()+u)}})}}},e.prototype._removeViewZone=function(){var t=this;this._codeEditor.changeViewZones(function(r){t._viewZoneId!==void 0&&(r.removeZone(t._viewZoneId),t._viewZoneId=void 0,t._viewZone&&(t._codeEditor.setScrollTop(t._codeEditor.getScrollTop()-t._viewZone.heightInPx),t._viewZone=void 0))})},e.prototype._applyTheme=function(t){var r={inputActiveOptionBorder:t.getColor(lS),inputActiveOptionBackground:t.getColor(cS),inputBackground:t.getColor(HF),inputForeground:t.getColor(UF),inputBorder:t.getColor(jF),inputValidationInfoBackground:t.getColor(zF),inputValidationInfoForeground:t.getColor(qF),inputValidationInfoBorder:t.getColor($F),inputValidationWarningBackground:t.getColor(OY),inputValidationWarningForeground:t.getColor(RY),inputValidationWarningBorder:t.getColor(MY),inputValidationErrorBackground:t.getColor(PY),inputValidationErrorForeground:t.getColor(FY),inputValidationErrorBorder:t.getColor(BY)};this._findInput.style(r),this._replaceInput.style(r)},e.prototype._tryUpdateWidgetWidth=function(){if(this._isVisible){var t=this._codeEditor.getConfiguration().layoutInfo.contentWidth;if(t<=0){de(this._domNode,"hiddenEditor");return}else La(this._domNode,"hiddenEditor")&&qe(this._domNode,"hiddenEditor");var r=this._codeEditor.getConfiguration().layoutInfo.width,i=this._codeEditor.getConfiguration().layoutInfo.minimapWidth,o=!1,s=!1,a=!1;if(this._resized){var u=ua(this._domNode);if(u>$a){this._domNode.style.maxWidth=r-28-i-15+"px",this._replaceInput.width=ua(this._findInput.domNode);return}}if($a+28+i>=r&&(s=!0),$a+28+i-tg>=r&&(a=!0),$a+28+i-tg>=r+50&&(o=!0),vt(this._domNode,"collapsed-find-widget",o),vt(this._domNode,"narrow-find-widget",a),vt(this._domNode,"reduced-find-widget",s),!a&&!o&&(this._domNode.style.maxWidth=r-28-i-15+"px"),this._resized){this._findInput.inputBox.layout();var l=this._findInput.inputBox.width;l>0&&(this._replaceInput.width=l)}}},e.prototype._getHeight=function(){var t=0;return t+=4,t+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(t+=4,t+=this._replaceInput.inputBox.height+2),t+=4,t},e.prototype._tryUpdateHeight=function(){var t=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===t?!1:(this._cachedHeight=t,this._domNode.style.height=t+"px",!0)},e.prototype.focusFindInput=function(){this._findInput.select(),this._findInput.focus()},e.prototype.focusReplaceInput=function(){this._replaceInput.select(),this._replaceInput.focus()},e.prototype.highlightFindOptions=function(){this._findInput.highlightFindOptions()},e.prototype._updateSearchScope=function(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){var t=this._codeEditor.getSelection();t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));var r=this._state.currentMatch;t.startLineNumber!==t.endLineNumber&&(R.equalsRange(t,r)||this._state.change({searchScope:t},!0))}},e.prototype._onFindInputMouseDown=function(t){t.middleButton&&t.stopPropagation()},e.prototype._onFindInputKeyDown=function(t){if(t.equals(O9|3)){var r=this._findInput.inputBox.inputElement,i=r.selectionStart,o=r.selectionEnd,s=r.value;if(i!==null&&o!==null){var a=s.substr(0,i)+`
`+s.substr(o);this._findInput.inputBox.value=a,r.setSelectionRange(i+1,i+1),this._findInput.inputBox.layout(),t.preventDefault();return}}if(t.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),t.preventDefault();return}if(t.equals(2066)){this._codeEditor.focus(),t.preventDefault();return}if(t.equals(16))return R9(t,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(t.equals(18))return M9(t,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))},e.prototype._onReplaceInputKeyDown=function(t){if(t.equals(O9|3)){Hi&&Da&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(S("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(A9,!0,0));var r=this._replaceInput.inputBox.inputElement,i=r.selectionStart,o=r.selectionEnd,s=r.value;if(i!==null&&o!==null){var a=s.substr(0,i)+`
`+s.substr(o);this._replaceInput.inputBox.value=a,r.setSelectionRange(i+1,i+1),this._replaceInput.inputBox.layout(),t.preventDefault();return}}if(t.equals(2)){this._findInput.focusOnCaseSensitive(),t.preventDefault();return}if(t.equals(1026)){this._findInput.focus(),t.preventDefault();return}if(t.equals(2066)){this._codeEditor.focus(),t.preventDefault();return}if(t.equals(16))return R9(t,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(t.equals(18))return M9(t,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))},e.prototype.getHorizontalSashTop=function(t){return 0},e.prototype.getHorizontalSashLeft=function(t){return 0},e.prototype.getHorizontalSashWidth=function(t){return 500},e.prototype._keybindingLabelFor=function(t){var r=this._keybindingService.lookupKeybinding(t);return r?" ("+r.getLabel()+")":""},e.prototype._buildDomNode=function(){var t=this,r=!0,i=!0;this._findInput=this._register(new AMe(null,this._contextViewProvider,{width:GMe,label:RMe,placeholder:MMe,appendCaseSensitiveLabel:this._keybindingLabelFor(jt.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(jt.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(jt.ToggleRegexCommand),validation:function(f){if(f.length===0||!t._findInput.getRegex())return null;try{return new RegExp(f),null}catch(h){return{content:h.message}}},flexibleHeight:r,flexibleWidth:i,flexibleMaxHeight:118},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(function(f){return t._onFindInputKeyDown(f)})),this._register(this._findInput.inputBox.onDidChange(function(){t._ignoreChangeEvent||t._state.change({searchString:t._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(function(){t._state.change({isRegex:t._findInput.getRegex(),wholeWord:t._findInput.getWholeWords(),matchCase:t._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(function(f){f.equals(1026)&&t._isReplaceVisible&&(t._replaceInput.focus(),f.preventDefault())})),this._register(this._findInput.onRegexKeyDown(function(f){f.equals(2)&&t._isReplaceVisible&&(t._replaceInput.focusOnPreserve(),f.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(function(f){t._tryUpdateHeight()&&t._showViewZone()})),Rl&&this._register(this._findInput.onMouseDown(function(f){return t._onFindInputMouseDown(f)})),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Vp({label:PMe+this._keybindingLabelFor(jt.PreviousMatchFindAction),className:"previous",onTrigger:function(){t._codeEditor.getAction(jt.PreviousMatchFindAction).run().then(void 0,Le)}})),this._nextBtn=this._register(new Vp({label:FMe+this._keybindingLabelFor(jt.NextMatchFindAction),className:"next",onTrigger:function(){t._codeEditor.getAction(jt.NextMatchFindAction).run().then(void 0,Le)}}));var o=document.createElement("div");o.className="find-part",o.appendChild(this._findInput.domNode);var s=document.createElement("div");s.className="find-actions",o.appendChild(s),s.appendChild(this._matchesCount),s.appendChild(this._prevBtn.domNode),s.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new XMe({parent:s,title:BMe+this._keybindingLabelFor(jt.ToggleSearchScopeCommand),onChange:function(){if(t._toggleSelectionFind.checked){if(t._codeEditor.hasModel()){var f=t._codeEditor.getSelection();f.endColumn===1&&f.endLineNumber>f.startLineNumber&&(f=f.setEndPosition(f.endLineNumber-1,t._codeEditor.getModel().getLineMaxColumn(f.endLineNumber-1))),f.isEmpty()||t._state.change({searchScope:f},!0)}}else t._state.change({searchScope:null},!0)}})),this._closeBtn=this._register(new Vp({label:WMe+this._keybindingLabelFor(jt.CloseFindWidgetCommand),className:"close-fw",onTrigger:function(){t._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:function(f){f.equals(2)&&t._isReplaceVisible&&(t._replaceBtn.isEnabled()?t._replaceBtn.focus():t._codeEditor.focus(),f.preventDefault())}})),s.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new OMe(null,void 0,{label:VMe,placeholder:HMe,history:[],flexibleHeight:r,flexibleWidth:i,flexibleMaxHeight:118},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(function(f){return t._onReplaceInputKeyDown(f)})),this._register(this._replaceInput.inputBox.onDidChange(function(){t._state.change({replaceString:t._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(function(f){t._isReplaceVisible&&t._tryUpdateHeight()&&t._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(function(){t._state.change({preserveCase:t._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(function(f){f.equals(2)&&(t._prevBtn.isEnabled()?t._prevBtn.focus():t._nextBtn.isEnabled()?t._nextBtn.focus():t._toggleSelectionFind.isEnabled()?t._toggleSelectionFind.focus():t._closeBtn.isEnabled()&&t._closeBtn.focus(),f.preventDefault())})),this._replaceBtn=this._register(new Vp({label:UMe+this._keybindingLabelFor(jt.ReplaceOneAction),className:"replace",onTrigger:function(){t._controller.replace()},onKeyDown:function(f){f.equals(1026)&&(t._closeBtn.focus(),f.preventDefault())}})),this._replaceAllBtn=this._register(new Vp({label:jMe+this._keybindingLabelFor(jt.ReplaceAllAction),className:"replace-all",onTrigger:function(){t._controller.replaceAll()}}));var a=document.createElement("div");a.className="replace-part",a.appendChild(this._replaceInput.domNode);var u=document.createElement("div");u.className="replace-actions",a.appendChild(u),u.appendChild(this._replaceBtn.domNode),u.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Vp({label:zMe,className:"toggle left",onTrigger:function(){t._state.change({isReplaceRevealed:!t._isReplaceVisible},!1),t._isReplaceVisible&&(t._replaceInput.width=ua(t._findInput.domNode),t._replaceInput.inputBox.layout()),t._showViewZone()}})),this._toggleReplaceBtn.toggleClass("expand",this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("collapse",!this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=$a+"px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(o),this._domNode.appendChild(a),this._resizeSash=new II(this._domNode,this,{orientation:0}),this._resized=!1;var l=$a;this._register(this._resizeSash.onDidStart(function(){l=ua(t._domNode)})),this._register(this._resizeSash.onDidChange(function(f){t._resized=!0;var h=l+f.startX-f.currentX;if(!(h<$a)){var d=h-N9,g=parseFloat(rF(t._domNode).maxWidth)||0;h>g||(t._domNode.style.width=h+"px",t._findInput.inputBox.width=d,t._isReplaceVisible&&(t._replaceInput.width=ua(t._findInput.domNode)),t._findInput.inputBox.layout(),t._tryUpdateHeight())}})),this._register(this._resizeSash.onDidReset(function(){var f=ua(t._domNode);if(!(f<$a)){var h=$a;(!t._resized||f===$a)&&(h=t._codeEditor.getConfiguration().layoutInfo.width-28-t._codeEditor.getConfiguration().layoutInfo.minimapWidth-15,t._resized=!0);var d=h-N9;t._domNode.style.width=h+"px",t._findInput.inputBox.width=d,t._isReplaceVisible&&(t._replaceInput.width=ua(t._findInput.domNode)),t._findInput.inputBox.layout()}}))},e.prototype.updateAccessibilitySupport=function(){var t=this._codeEditor.getConfiguration().accessibilitySupport;this._findInput.setFocusInputOnOptionClick(t!==2)},e.ID="editor.contrib.findWidget",e}(bo),XMe=function(n){X2(e,n);function e(t){var r=n.call(this)||this;return r._opts=t,r._domNode=document.createElement("div"),r._domNode.className="monaco-checkbox",r._domNode.title=r._opts.title,r._domNode.tabIndex=0,r._checkbox=document.createElement("input"),r._checkbox.type="checkbox",r._checkbox.className="checkbox",r._checkbox.id="checkbox-"+e._COUNTER++,r._checkbox.tabIndex=-1,r._label=document.createElement("label"),r._label.className="label",r._label.htmlFor=r._checkbox.id,r._label.tabIndex=-1,r._domNode.appendChild(r._checkbox),r._domNode.appendChild(r._label),r._opts.parent.appendChild(r._domNode),r.onchange(r._checkbox,function(){r._opts.onChange()}),r}return Object.defineProperty(e.prototype,"domNode",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),e.prototype.isEnabled=function(){return this._domNode.tabIndex>=0},Object.defineProperty(e.prototype,"checked",{get:function(){return this._checkbox.checked},set:function(t){this._checkbox.checked=t},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this._domNode.focus()},e.prototype.enable=function(){this._checkbox.removeAttribute("disabled")},e.prototype.disable=function(){this._checkbox.disabled=!0},e.prototype.setEnabled=function(t){t?(this.enable(),this.domNode.tabIndex=0):(this.disable(),this.domNode.tabIndex=-1)},e._COUNTER=0,e}(bo),Vp=function(n){X2(e,n);function e(t){var r=n.call(this)||this;return r._opts=t,r._domNode=document.createElement("div"),r._domNode.title=r._opts.label,r._domNode.tabIndex=0,r._domNode.className="button "+r._opts.className,r._domNode.setAttribute("role","button"),r._domNode.setAttribute("aria-label",r._opts.label),r.onclick(r._domNode,function(i){r._opts.onTrigger(),i.preventDefault()}),r.onkeydown(r._domNode,function(i){if(i.equals(10)||i.equals(3)){r._opts.onTrigger(),i.preventDefault();return}r._opts.onKeyDown&&r._opts.onKeyDown(i)}),r}return Object.defineProperty(e.prototype,"domNode",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),e.prototype.isEnabled=function(){return this._domNode.tabIndex>=0},e.prototype.focus=function(){this._domNode.focus()},e.prototype.setEnabled=function(t){vt(this._domNode,"disabled",!t),this._domNode.setAttribute("aria-disabled",String(!t)),this._domNode.tabIndex=t?0:-1},e.prototype.setExpanded=function(t){this._domNode.setAttribute("aria-expanded",String(!!t))},e.prototype.toggleClass=function(t,r){vt(this._domNode,t,r)},e}(bo);Xt(function(n,e){var t=function(y,b){b&&e.addRule(".monaco-editor "+y+" { background-color: "+b+"; }")};t(".findMatch",n.getColor(LIe)),t(".currentFindMatch",n.getColor(DIe)),t(".findScope",n.getColor(kIe));var r=n.getColor(fu);t(".find-widget",r);var i=n.getColor(Bd);i&&e.addRule(".monaco-editor .find-widget { box-shadow: 0 2px 8px "+i+"; }");var o=n.getColor(NIe);o&&e.addRule(".monaco-editor .findMatch { border: 1px "+(n.type==="hc"?"dotted":"solid")+" "+o+"; box-sizing: border-box; }");var s=n.getColor(TIe);s&&e.addRule(".monaco-editor .currentFindMatch { border: 2px solid "+s+"; padding: 1px; box-sizing: border-box; }");var a=n.getColor(AIe);a&&e.addRule(".monaco-editor .findScope { border: 1px "+(n.type==="hc"?"dashed":"solid")+" "+a+"; }");var u=n.getColor(dr);u&&e.addRule(".monaco-editor .find-widget { border: 2px solid "+u+"; }");var l=n.getColor(GY);l&&e.addRule(".monaco-editor .find-widget { color: "+l+"; }");var f=n.getColor(nIe);f&&e.addRule(".monaco-editor .find-widget.no-results .matchesCount { color: "+f+"; }");var h=n.getColor(EIe);if(h)e.addRule(".monaco-editor .find-widget .monaco-sash { background-color: "+h+"; width: 3px !important; margin-left: -4px;}");else{var d=n.getColor(ed);d&&e.addRule(".monaco-editor .find-widget .monaco-sash { background-color: "+d+"; width: 3px !important; margin-left: -4px;}")}var g=n.getColor(lS);g&&e.addRule(".monaco-editor .find-widget .monaco-checkbox .checkbox:checked + .label { border: 1px solid "+g.toString()+"; }");var v=n.getColor(cS);v&&e.addRule(".monaco-editor .find-widget .monaco-checkbox .checkbox:checked + .label { background-color: "+v.toString()+"; }");var m=n.getColor(Qg);m&&e.addRule(".monaco-workbench .monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: "+m+"; }")});var Ss=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fQ=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ya=function(n,e){return function(t,r){e(t,r,n)}},QMe=524288;function hQ(n){if(!n.hasModel())return null;var e=n.getSelection();if(e.startLineNumber===e.endLineNumber){if(e.isEmpty()){var t=n.getModel().getWordAtPosition(e.getStartPosition());if(t)return t.word}else if(n.getModel().getValueLengthInRange(e)<QMe)return n.getModel().getValueInRange(e)}return null}var Iu=function(n){Ss(e,n);function e(t,r,i,o){var s=n.call(this)||this;return s._editor=t,s._findWidgetVisible=Ud.bindTo(r),s._contextKeyService=r,s._storageService=i,s._clipboardService=o,s._updateHistoryDelayer=new Rv(500),s._state=s._register(new vMe),s.loadQueryState(),s._register(s._state.onFindReplaceStateChange(function(a){return s._onStateChanged(a)})),s._model=null,s._register(s._editor.onDidChangeModel(function(){var a=s._editor.getModel()&&s._state.isRevealed;s.disposeModel(),s._state.change({searchScope:null,matchCase:s._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:s._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:s._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:s._storageService.getBoolean("editor.preserveCase",1,!1)},!1),a&&s._start({forceRevealReplace:!1,seedSearchStringFromSelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1})})),s}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.dispose=function(){this.disposeModel(),n.prototype.dispose.call(this)},e.prototype.disposeModel=function(){this._model&&(this._model.dispose(),this._model=null)},e.prototype.getId=function(){return e.ID},e.prototype._onStateChanged=function(t){this.saveQueryState(t),t.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),t.searchString&&this.setGlobalBufferTerm(this._state.searchString)},e.prototype.saveQueryState=function(t){t.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1),t.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1),t.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1),t.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1)},e.prototype.loadQueryState=function(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)},e.prototype.isFindInputFocused=function(){return!!BI.getValue(this._contextKeyService)},e.prototype.getState=function(){return this._state},e.prototype.closeFindWidget=function(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()},e.prototype.toggleCaseSensitive=function(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()},e.prototype.toggleWholeWords=function(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()},e.prototype.toggleRegex=function(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()},e.prototype.toggleSearchScope=function(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){var t=this._editor.getSelection();t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()||this._state.change({searchScope:t},!0)}},e.prototype.setSearchString=function(t){this._state.isRegex&&(t=Cu(t)),this._state.change({searchString:t},!1)},e.prototype.highlightFindOptions=function(){},e.prototype._start=function(t){if(this.disposeModel(),!!this._editor.hasModel()){var r={isRevealed:!0};if(t.seedSearchStringFromSelection){var i=hQ(this._editor);i&&(this._state.isRegex?r.searchString=Cu(i):r.searchString=i)}if(!r.searchString&&t.seedSearchStringFromGlobalClipboard){var i=this.getGlobalBufferTerm();i&&(r.searchString=i)}if(t.forceRevealReplace?r.isReplaceRevealed=!0:this._findWidgetVisible.get()||(r.isReplaceRevealed=!1),t.updateSearchScope){var o=this._editor.getSelection();o.isEmpty()||(r.searchScope=o)}this._state.change(r,!1),this._model||(this._model=new uMe(this._editor,this._state))}},e.prototype.start=function(t){this._start(t)},e.prototype.moveToNextMatch=function(){return this._model?(this._model.moveToNextMatch(),!0):!1},e.prototype.moveToPrevMatch=function(){return this._model?(this._model.moveToPrevMatch(),!0):!1},e.prototype.replace=function(){return this._model?(this._model.replace(),!0):!1},e.prototype.replaceAll=function(){return this._model?(this._model.replaceAll(),!0):!1},e.prototype.selectAllMatches=function(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1},e.prototype.getGlobalBufferTerm=function(){return this._editor.getConfiguration().contribInfo.find.globalFindClipboard&&this._clipboardService&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""},e.prototype.setGlobalBufferTerm=function(t){this._editor.getConfiguration().contribInfo.find.globalFindClipboard&&this._clipboardService&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(t)},e.ID="editor.contrib.findController",e=fQ([Ya(1,rt),Ya(2,_f),Ya(3,LI)],e),e}(te),JMe=function(n){Ss(e,n);function e(t,r,i,o,s,a,u,l){var f=n.call(this,t,i,u,l)||this;return f._contextViewService=r,f._keybindingService=o,f._themeService=s,f._notificationService=a,f._widget=null,f._findOptionsWidget=null,f}return e.prototype._start=function(t){this._widget||this._createFindWidget(),!this._widget.getPosition()&&this._editor.getConfiguration().contribInfo.find.autoFindInSelection&&(t.updateSearchScope=!0),n.prototype._start.call(this,t),t.shouldFocus===2?this._widget.focusReplaceInput():t.shouldFocus===1&&this._widget.focusFindInput()},e.prototype.highlightFindOptions=function(){this._widget||this._createFindWidget(),this._state.isRevealed?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()},e.prototype._createFindWidget=function(){this._widget=this._register(new ZMe(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new gMe(this._editor,this._state,this._keybindingService,this._themeService))},e=fQ([Ya(1,vf),Ya(2,rt),Ya(3,er),Ya(4,Ir),Ya(5,Hr),Ya(6,_f),Ya(7,$h(LI))],e),e}(Iu),ePe=function(n){Ss(e,n);function e(){return n.call(this,{id:jt.StartFindAction,label:S("startFindAction","Find"),alias:"Find",precondition:void 0,kbOpts:{kbExpr:null,primary:2084,weight:100},menubarOpts:{menuId:14,group:"3_find",title:S({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}})||this}return e.prototype.run=function(t,r){var i=Iu.get(r);i&&i.start({forceRevealReplace:!1,seedSearchStringFromSelection:r.getConfiguration().contribInfo.find.seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:r.getConfiguration().contribInfo.find.globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1})},e}(Ne),tPe=function(n){Ss(e,n);function e(){return n.call(this,{id:jt.StartFindWithSelection,label:S("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})||this}return e.prototype.run=function(t,r){var i=Iu.get(r);i&&(i.start({forceRevealReplace:!1,seedSearchStringFromSelection:!0,seedSearchStringFromGlobalClipboard:!1,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1}),i.setGlobalBufferTerm(i.getState().searchString))},e}(Ne),VI=function(n){Ss(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(t,r){var i=Iu.get(r);i&&!this._run(i)&&(i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&r.getConfiguration().contribInfo.find.seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1}),this._run(i))},e}(Ne),nPe=function(n){Ss(e,n);function e(){return n.call(this,{id:jt.NextMatchFindAction,label:S("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100}})||this}return e.prototype._run=function(t){return t.moveToNextMatch()},e}(VI),rPe=function(n){Ss(e,n);function e(){return n.call(this,{id:jt.NextMatchFindAction,label:S("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:{kbExpr:_e.and(P.focus,BI),primary:3,weight:100}})||this}return e.prototype._run=function(t){return t.moveToNextMatch()},e}(VI),iPe=function(n){Ss(e,n);function e(){return n.call(this,{id:jt.PreviousMatchFindAction,label:S("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100}})||this}return e.prototype._run=function(t){return t.moveToPrevMatch()},e}(VI),oPe=function(n){Ss(e,n);function e(){return n.call(this,{id:jt.PreviousMatchFindAction,label:S("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:{kbExpr:_e.and(P.focus,BI),primary:1027,weight:100}})||this}return e.prototype._run=function(t){return t.moveToPrevMatch()},e}(VI),dQ=function(n){Ss(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(t,r){var i=Iu.get(r);if(i){var o=hQ(r);o&&i.setSearchString(o),this._run(i)||(i.start({forceRevealReplace:!1,seedSearchStringFromSelection:r.getConfiguration().contribInfo.find.seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1}),this._run(i))}},e}(Ne),sPe=function(n){Ss(e,n);function e(){return n.call(this,{id:jt.NextSelectionMatchFindAction,label:S("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:2109,weight:100}})||this}return e.prototype._run=function(t){return t.moveToNextMatch()},e}(dQ),aPe=function(n){Ss(e,n);function e(){return n.call(this,{id:jt.PreviousSelectionMatchFindAction,label:S("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:3133,weight:100}})||this}return e.prototype._run=function(t){return t.moveToPrevMatch()},e}(dQ),uPe=function(n){Ss(e,n);function e(){return n.call(this,{id:jt.StartFindReplaceAction,label:S("startReplace","Replace"),alias:"Replace",precondition:void 0,kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menubarOpts:{menuId:14,group:"3_find",title:S({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}})||this}return e.prototype.run=function(t,r){if(!(!r.hasModel()||r.getConfiguration().readOnly)){var i=Iu.get(r),o=r.getSelection(),s=i.isFindInputFocused(),a=!o.isEmpty()&&o.startLineNumber===o.endLineNumber&&r.getConfiguration().contribInfo.find.seedSearchStringFromSelection&&!s,u=s||a?2:1;i&&i.start({forceRevealReplace:!0,seedSearchStringFromSelection:a,seedSearchStringFromGlobalClipboard:r.getConfiguration().contribInfo.find.seedSearchStringFromSelection,shouldFocus:u,shouldAnimate:!0,updateSearchScope:!1})}},e}(Ne);tn(JMe);re(ePe);re(tPe);re(nPe);re(rPe);re(iPe);re(oPe);re(sPe);re(aPe);re(uPe);var Ou=$i.bindToContribution(Iu.get);ee(new Ou({id:jt.CloseFindWidgetCommand,precondition:Ud,handler:function(n){return n.closeFindWidget()},kbOpts:{weight:105,kbExpr:P.focus,primary:9,secondary:[1033]}}));ee(new Ou({id:jt.ToggleCaseSensitiveCommand,precondition:void 0,handler:function(n){return n.toggleCaseSensitive()},kbOpts:{weight:105,kbExpr:P.focus,primary:pC.primary,mac:pC.mac,win:pC.win,linux:pC.linux}}));ee(new Ou({id:jt.ToggleWholeWordCommand,precondition:void 0,handler:function(n){return n.toggleWholeWords()},kbOpts:{weight:105,kbExpr:P.focus,primary:gC.primary,mac:gC.mac,win:gC.win,linux:gC.linux}}));ee(new Ou({id:jt.ToggleRegexCommand,precondition:void 0,handler:function(n){return n.toggleRegex()},kbOpts:{weight:105,kbExpr:P.focus,primary:vC.primary,mac:vC.mac,win:vC.win,linux:vC.linux}}));ee(new Ou({id:jt.ToggleSearchScopeCommand,precondition:void 0,handler:function(n){return n.toggleSearchScope()},kbOpts:{weight:105,kbExpr:P.focus,primary:mC.primary,mac:mC.mac,win:mC.win,linux:mC.linux}}));ee(new Ou({id:jt.ReplaceOneAction,precondition:Ud,handler:function(n){return n.replace()},kbOpts:{weight:105,kbExpr:P.focus,primary:3094}}));ee(new Ou({id:jt.ReplaceOneAction,precondition:Ud,handler:function(n){return n.replace()},kbOpts:{weight:105,kbExpr:_e.and(P.focus,K2),primary:3}}));ee(new Ou({id:jt.ReplaceAllAction,precondition:Ud,handler:function(n){return n.replaceAll()},kbOpts:{weight:105,kbExpr:P.focus,primary:2563}}));ee(new Ou({id:jt.ReplaceAllAction,precondition:Ud,handler:function(n){return n.replaceAll()},kbOpts:{weight:105,kbExpr:_e.and(P.focus,K2),primary:void 0,mac:{primary:2051}}}));ee(new Ou({id:jt.SelectAllMatchesAction,precondition:Ud,handler:function(n){return n.selectAllMatches()},kbOpts:{weight:105,kbExpr:P.focus,primary:515}}));var P9=65535,rl=16777215,F9=4278190080,Jy=function(){function n(e,t,r){if(e.length!==t.length||e.length>P9)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=r,this._parentsComputed=!1}return n.prototype.ensureParentIndices=function(){var e=this;if(!this._parentsComputed){this._parentsComputed=!0;for(var t=[],r=function(l,f){var h=t[t.length-1];return e.getStartLineNumber(h)<=l&&e.getEndLineNumber(h)>=f},i=0,o=this._startIndexes.length;i<o;i++){var s=this._startIndexes[i],a=this._endIndexes[i];if(s>rl||a>rl)throw new Error("startLineNumber or endLineNumber must not exceed "+rl);for(;t.length>0&&!r(s,a);)t.pop();var u=t.length>0?t[t.length-1]:-1;t.push(i),this._startIndexes[i]=s+((u&255)<<24),this._endIndexes[i]=a+((u&65280)<<16)}}},Object.defineProperty(n.prototype,"length",{get:function(){return this._startIndexes.length},enumerable:!0,configurable:!0}),n.prototype.getStartLineNumber=function(e){return this._startIndexes[e]&rl},n.prototype.getEndLineNumber=function(e){return this._endIndexes[e]&rl},n.prototype.getType=function(e){return this._types?this._types[e]:void 0},n.prototype.hasTypes=function(){return!!this._types},n.prototype.isCollapsed=function(e){var t=e/32|0,r=e%32;return(this._collapseStates[t]&1<<r)!==0},n.prototype.setCollapsed=function(e,t){var r=e/32|0,i=e%32,o=this._collapseStates[r];t?this._collapseStates[r]=o|1<<i:this._collapseStates[r]=o&~(1<<i)},n.prototype.toRegion=function(e){return new lPe(this,e)},n.prototype.getParentIndex=function(e){this.ensureParentIndices();var t=((this._startIndexes[e]&F9)>>>24)+((this._endIndexes[e]&F9)>>>16);return t===P9?-1:t},n.prototype.contains=function(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t},n.prototype.findIndex=function(e){var t=0,r=this._startIndexes.length;if(r===0)return-1;for(;t<r;){var i=Math.floor((t+r)/2);e<this.getStartLineNumber(i)?r=i:t=i+1}return t-1},n.prototype.findRange=function(e){var t=this.findIndex(e);if(t>=0){var r=this.getEndLineNumber(t);if(r>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1},n.prototype.toString=function(){for(var e=[],t=0;t<this.length;t++)e[t]="["+(this.isCollapsed(t)?"+":"-")+"] "+this.getStartLineNumber(t)+"/"+this.getEndLineNumber(t);return e.join(", ")},n}(),lPe=function(){function n(e,t){this.ranges=e,this.index=t}return Object.defineProperty(n.prototype,"startLineNumber",{get:function(){return this.ranges.getStartLineNumber(this.index)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endLineNumber",{get:function(){return this.ranges.getEndLineNumber(this.index)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"regionIndex",{get:function(){return this.index},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parentIndex",{get:function(){return this.ranges.getParentIndex(this.index)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isCollapsed",{get:function(){return this.ranges.isCollapsed(this.index)},enumerable:!0,configurable:!0}),n.prototype.containedBy=function(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber},n.prototype.containsLine=function(e){return this.startLineNumber<=e&&e<=this.endLineNumber},n}(),cPe=function(){function n(e,t){this._updateEventEmitter=new j,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new Jy(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}return Object.defineProperty(n.prototype,"regions",{get:function(){return this._regions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textModel",{get:function(){return this._textModel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isInitialized",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),n.prototype.toggleCollapseState=function(e){var t=this;if(e.length){var r={};this._decorationProvider.changeDecorations(function(i){for(var o=0,s=e;o<s.length;o++){var a=s[o],u=a.regionIndex,l=t._editorDecorationIds[u];if(l&&!r[l]){r[l]=!0;var f=!t._regions.isCollapsed(u);t._regions.setCollapsed(u,f),i.changeDecorationOptions(l,t._decorationProvider.getDecorationOption(f))}}}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}},n.prototype.update=function(e,t){var r=this;t===void 0&&(t=[]);for(var i=[],o=function(v,m){for(var y=0,b=t;y<b.length;y++){var C=b[y];if(v<C&&C<=m)return!0}return!1},s=function(v,m){var y=e.getStartLineNumber(v);m&&o(y,e.getEndLineNumber(v))&&(m=!1),e.setCollapsed(v,m);var b=r._textModel.getLineMaxColumn(y),C={startLineNumber:y,startColumn:b,endLineNumber:y,endColumn:b};i.push({range:C,options:r._decorationProvider.getDecorationOption(m)})},a=0,u=function(){for(;a<r._regions.length;){var v=r._regions.isCollapsed(a);if(a++,v)return a-1}return-1},l=0,f=u();f!==-1&&l<e.length;){var h=this._textModel.getDecorationRange(this._editorDecorationIds[f]);if(h){var d=h.startLineNumber;if(this._textModel.getLineMaxColumn(d)===h.startColumn)for(;l<e.length;){var g=e.getStartLineNumber(l);if(d>=g)s(l,d===g),l++;else break}}f=u()}for(;l<e.length;)s(l,!1),l++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})},n.prototype.getMemento=function(){for(var e=[],t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){var r=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(r){var i=r.startLineNumber,o=r.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:i,endLineNumber:o})}}if(e.length>0)return e},n.prototype.applyMemento=function(e){if(Array.isArray(e)){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r],s=this.getRegionAtLine(o.startLineNumber);s&&!s.isCollapsed&&t.push(s)}this.toggleCollapseState(t)}},n.prototype.dispose=function(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])},n.prototype.getAllRegionsAtLine=function(e,t){var r=[];if(this._regions)for(var i=this._regions.findRange(e),o=1;i>=0;){var s=this._regions.toRegion(i);(!t||t(s,o))&&r.push(s),o++,i=s.parentIndex}return r},n.prototype.getRegionAtLine=function(e){if(this._regions){var t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null},n.prototype.getRegionsInside=function(e,t){var r=[],i=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2)for(var s=[],a=i,u=this._regions.length;a<u;a++){var l=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;s.length>0&&!l.containedBy(s[s.length-1]);)s.pop();s.push(l),t(l,s.length)&&r.push(l)}else break}else for(var a=i,u=this._regions.length;a<u;a++){var l=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o)(!t||t(l))&&r.push(l);else break}return r},n}();function zv(n,e,t,r){t===void 0&&(t=Number.MAX_VALUE);var i=[];if(r&&r.length>0)for(var o=0,s=r;o<s.length;o++){var a=s[o],u=n.getRegionAtLine(a);if(u&&(u.isCollapsed!==e&&i.push(u),t>1)){var l=n.getRegionsInside(u,function(f,h){return f.isCollapsed!==e&&h<t});i.push.apply(i,l)}}else{var l=n.getRegionsInside(null,function(h,d){return h.isCollapsed!==e&&d<t});i.push.apply(i,l)}n.toggleCollapseState(i)}function pQ(n,e,t,r){for(var i=[],o=0,s=r;o<s.length;o++){var a=s[o],u=n.getAllRegionsAtLine(a,function(l,f){return l.isCollapsed!==e&&f<=t});i.push.apply(i,u)}n.toggleCollapseState(i)}function fPe(n,e,t,r){var i=function(s,a){return a===e&&s.isCollapsed!==t&&!r.some(function(u){return s.containsLine(u)})},o=n.getRegionsInside(null,i);n.toggleCollapseState(o)}function Q2(n,e,t){for(var r=n.textModel,i=n.regions,o=[],s=i.length-1;s>=0;s--)if(t!==i.isCollapsed(s)){var a=i.getStartLineNumber(s);e.test(r.getLineContent(a))&&o.push(i.toRegion(s))}n.toggleCollapseState(o)}function J2(n,e,t){for(var r=n.regions,i=[],o=r.length-1;o>=0;o--)t!==r.isCollapsed(o)&&e===r.getType(o)&&i.push(r.toRegion(o));n.toggleCollapseState(i)}var hPe=function(){function n(e){this.editor=e,this.autoHideFoldingControls=!0}return n.prototype.getDecorationOption=function(e){return e?n.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?n.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:n.EXPANDED_VISUAL_DECORATION},n.prototype.deltaDecorations=function(e,t){return this.editor.deltaDecorations(e,t)},n.prototype.changeDecorations=function(e){return this.editor.changeDecorations(e)},n.COLLAPSED_VISUAL_DECORATION=tt.register({stickiness:1,afterContentClassName:"inline-folded",linesDecorationsClassName:"folding collapsed"}),n.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=tt.register({stickiness:1,linesDecorationsClassName:"folding"}),n.EXPANDED_VISUAL_DECORATION=tt.register({stickiness:1,linesDecorationsClassName:"folding alwaysShowFoldIcons"}),n}(),dPe=function(){function n(e){var t=this;this._updateEventEmitter=new j,this._foldingModel=e,this._foldingModelListener=e.onDidChange(function(r){return t.updateHiddenRanges()}),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}return Object.defineProperty(n.prototype,"onDidChange",{get:function(){return this._updateEventEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hiddenRanges",{get:function(){return this._hiddenRanges},enumerable:!0,configurable:!0}),n.prototype.updateHiddenRanges=function(){for(var e=!1,t=[],r=0,i=0,o=Number.MAX_VALUE,s=-1,a=this._foldingModel.regions;r<a.length;r++)if(a.isCollapsed(r)){var u=a.getStartLineNumber(r)+1,l=a.getEndLineNumber(r);o<=u&&l<=s||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===u&&this._hiddenRanges[i].endLineNumber===l?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new R(u,1,l,1))),o=u,s=l)}(e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)},n.prototype.applyMemento=function(e){if(!Array.isArray(e)||e.length===0)return!1;for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];if(!o.startLineNumber||!o.endLineNumber)return!1;t.push(new R(o.startLineNumber+1,1,o.endLineNumber,1))}return this.applyHiddenRanges(t),!0},n.prototype.getMemento=function(){return this._hiddenRanges.map(function(e){return{startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}})},n.prototype.applyHiddenRanges=function(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)},n.prototype.hasRanges=function(){return this._hiddenRanges.length>0},n.prototype.isHidden=function(e){return B9(this._hiddenRanges,e)!==null},n.prototype.adjustSelections=function(e){for(var t=this,r=!1,i=this._foldingModel.textModel,o=null,s=function(d){return(!o||!pPe(d,o))&&(o=B9(t._hiddenRanges,d)),o?o.startLineNumber-1:null},a=0,u=e.length;a<u;a++){var l=e[a],f=s(l.startLineNumber);f&&(l=l.setStartPosition(f,i.getLineMaxColumn(f)),r=!0);var h=s(l.endLineNumber);h&&(l=l.setEndPosition(h,i.getLineMaxColumn(h)),r=!0),e[a]=l}return r},n.prototype.dispose=function(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)},n}();function pPe(n,e){return n>=e.startLineNumber&&n<=e.endLineNumber}function B9(n,e){var t=qye(n,function(r){return e<r.startLineNumber})-1;return t>=0&&n[t].endLineNumber>=e?n[t]:null}var gPe=5e3,vPe="indent",mPe=function(){function n(e){this.editorModel=e,this.id=vPe}return n.prototype.dispose=function(){},n.prototype.compute=function(e){var t=gt.getFoldingRules(this.editorModel.getLanguageIdentifier().id),r=t&&!!t.offSide,i=t&&t.markers;return Promise.resolve(yPe(this.editorModel,r,i))},n}(),_Pe=function(){function n(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}return n.prototype.insertFirst=function(e,t,r){if(!(e>rl||t>rl)){var i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,r<1e3&&(this._indentOccurrences[r]=(this._indentOccurrences[r]||0)+1)}},n.prototype.toIndentRanges=function(e){if(this._length<=this._foldingRangesLimit){for(var t=new Uint32Array(this._length),r=new Uint32Array(this._length),i=this._length-1,o=0;i>=0;i--,o++)t[o]=this._startIndexes[i],r[o]=this._endIndexes[i];return new Jy(t,r)}else{for(var s=0,a=this._indentOccurrences.length,i=0;i<this._indentOccurrences.length;i++){var u=this._indentOccurrences[i];if(u){if(u+s>this._foldingRangesLimit){a=i;break}s+=u}}for(var l=e.getOptions().tabSize,t=new Uint32Array(this._foldingRangesLimit),r=new Uint32Array(this._foldingRangesLimit),i=this._length-1,o=0;i>=0;i--){var f=this._startIndexes[i],h=e.getLineContent(f),d=Vv.computeIndentLevel(h,l);(d<a||d===a&&s++<this._foldingRangesLimit)&&(t[o]=f,r[o]=this._endIndexes[i],o++)}return new Jy(t,r)}},n}();function yPe(n,e,t,r){r===void 0&&(r=gPe);var i=n.getOptions().tabSize,o=new _Pe(r),s=void 0;t&&(s=new RegExp("("+t.start.source+")|(?:"+t.end.source+")"));var a=[],u=n.getLineCount()+1;a.push({indent:-1,endAbove:u,line:u});for(var l=n.getLineCount();l>0;l--){var f=n.getLineContent(l),h=Vv.computeIndentLevel(f,i),d=a[a.length-1];if(h===-1){e&&(d.endAbove=l);continue}var g=void 0;if(s&&(g=f.match(s)))if(g[1]){for(var v=a.length-1;v>0&&a[v].indent!==-2;)v--;if(v>0){a.length=v+1,d=a[v],o.insertFirst(l,d.line,h),d.line=l,d.indent=h,d.endAbove=l;continue}}else{a.push({indent:-2,endAbove:l,line:l});continue}if(d.indent>h){do a.pop(),d=a[a.length-1];while(d.indent>h);var m=d.endAbove-1;m-l>=1&&o.insertFirst(l,m,h)}d.indent===h?d.endAbove=l:a.push({indent:h,endAbove:l,line:l})}return o.toIndentRanges(n)}var bPe=5e3,wPe={},gQ="syntax",CPe=function(){function n(e,t,r){r===void 0&&(r=bPe),this.editorModel=e,this.providers=t,this.limit=r,this.id=gQ}return n.prototype.compute=function(e){var t=this;return SPe(this.providers,this.editorModel,e).then(function(r){if(r){var i=vQ(r,t.limit);return i}return null})},n.prototype.dispose=function(){},n}();function SPe(n,e,t){var r=null,i=n.map(function(o,s){return Promise.resolve(o.provideFoldingRanges(e,wPe,t)).then(function(a){if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(r)||(r=[]);for(var u=e.getLineCount(),l=0,f=a;l<f.length;l++){var h=f[l];h.start>0&&h.end>h.start&&h.end<=u&&r.push({start:h.start,end:h.end,rank:s,kind:h.kind})}}},ji)});return Promise.all(i).then(function(o){return r})}var EPe=function(){function n(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}return n.prototype.add=function(e,t,r,i){if(!(e>rl||t>rl)){var o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=i,this._types[o]=r,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}},n.prototype.toIndentRanges=function(){if(this._length<=this._foldingRangesLimit){for(var e=new Uint32Array(this._length),t=new Uint32Array(this._length),r=0;r<this._length;r++)e[r]=this._startIndexes[r],t[r]=this._endIndexes[r];return new Jy(e,t,this._types)}else{for(var i=0,o=this._nestingLevelCounts.length,r=0;r<this._nestingLevelCounts.length;r++){var s=this._nestingLevelCounts[r];if(s){if(s+i>this._foldingRangesLimit){o=r;break}i+=s}}for(var e=new Uint32Array(this._foldingRangesLimit),t=new Uint32Array(this._foldingRangesLimit),a=[],r=0,u=0;r<this._length;r++){var l=this._nestingLevels[r];(l<o||l===o&&i++<this._foldingRangesLimit)&&(e[u]=this._startIndexes[r],t[u]=this._endIndexes[r],a[u]=this._types[r],u++)}return new Jy(e,t,a)}},n}();function vQ(n,e){for(var t=n.sort(function(l,f){var h=l.start-f.start;return h===0&&(h=l.rank-f.rank),h}),r=new EPe(e),i=void 0,o=[],s=0,a=t;s<a.length;s++){var u=a[s];if(!i)i=u,r.add(u.start,u.end,u.kind&&u.kind.value,o.length);else if(u.start>i.start)if(u.end<=i.end)o.push(i),i=u,r.add(u.start,u.end,u.kind&&u.kind.value,o.length);else{if(u.start>i.end){do i=o.pop();while(i&&u.start>i.end);i&&o.push(i),i=u}r.add(u.start,u.end,u.kind&&u.kind.value,o.length)}}return r.toIndentRanges()}var mQ="init",IPe=function(){function n(e,t,r,i){if(this.editorModel=e,this.id=mQ,t.length){var o=function(s){return{range:{startLineNumber:s.startLineNumber,startColumn:0,endLineNumber:s.endLineNumber,endColumn:e.getLineLength(s.endLineNumber)},options:{stickiness:1}}};this.decorationIds=e.deltaDecorations([],t.map(o)),this.timeout=setTimeout(r,i)}}return n.prototype.dispose=function(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)},n.prototype.compute=function(e){var t=[];if(this.decorationIds)for(var r=0,i=this.decorationIds;r<i.length;r++){var o=i[r],s=this.editorModel.getDecorationRange(o);s&&t.push({start:s.startLineNumber,end:s.endLineNumber,rank:1})}return Promise.resolve(vQ(t,Number.MAX_VALUE))},n}(),$s=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xPe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},DPe=function(n,e){return function(t,r){e(t,r,n)}},Ma=new Re("foldingEnabled",!1),W9="editor.contrib.folding",_Q=function(n){$s(e,n);function e(t,r){var i=n.call(this)||this;return i.contextKeyService=r,i.localToDispose=i._register(new De),i.editor=t,i._isEnabled=i.editor.getConfiguration().contribInfo.folding,i._autoHideFoldingControls=i.editor.getConfiguration().contribInfo.showFoldingControls==="mouseover",i._useFoldingProviders=i.editor.getConfiguration().contribInfo.foldingStrategy!=="indentation",i.foldingModel=null,i.hiddenRangeModel=null,i.rangeProvider=null,i.foldingRegionPromise=null,i.foldingStateMemento=null,i.foldingModelPromise=null,i.updateScheduler=null,i.cursorChangedScheduler=null,i.mouseDownInfo=null,i.foldingDecorationProvider=new hPe(t),i.foldingDecorationProvider.autoHideFoldingControls=i._autoHideFoldingControls,i.foldingEnabled=Ma.bindTo(i.contextKeyService),i.foldingEnabled.set(i._isEnabled),i._register(i.editor.onDidChangeModel(function(){return i.onModelChanged()})),i._register(i.editor.onDidChangeConfiguration(function(o){if(o.contribInfo){var s=i._isEnabled;i._isEnabled=i.editor.getConfiguration().contribInfo.folding,i.foldingEnabled.set(i._isEnabled),s!==i._isEnabled&&i.onModelChanged();var a=i._autoHideFoldingControls;i._autoHideFoldingControls=i.editor.getConfiguration().contribInfo.showFoldingControls==="mouseover",a!==i._autoHideFoldingControls&&(i.foldingDecorationProvider.autoHideFoldingControls=i._autoHideFoldingControls,i.onModelContentChanged());var u=i._useFoldingProviders;i._useFoldingProviders=i.editor.getConfiguration().contribInfo.foldingStrategy!=="indentation",u!==i._useFoldingProviders&&i.onFoldingStrategyChanged()}})),i.onModelChanged(),i}return e.get=function(t){return t.getContribution(W9)},e.prototype.getId=function(){return W9},e.prototype.saveViewState=function(){var t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization())return{};if(this.foldingModel){var r=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:r,lineCount:t.getLineCount(),provider:i}}},e.prototype.restoreViewState=function(t){var r=this.editor.getModel();if(!(!r||!this._isEnabled||r.isTooLargeForTokenization()||!this.hiddenRangeModel)&&!(!t||!t.collapsedRegions||t.lineCount!==r.getLineCount())){(t.provider===gQ||t.provider===mQ)&&(this.foldingStateMemento=t);var i=t.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){var o=this.getFoldingModel();o&&o.then(function(s){s&&s.applyMemento(i)}).then(void 0,Le)}}},e.prototype.onModelChanged=function(){var t=this;this.localToDispose.clear();var r=this.editor.getModel();!this._isEnabled||!r||r.isTooLargeForTokenization()||(this.foldingModel=new cPe(r,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new dPe(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(function(i){return t.onHiddenRangesChanges(i)})),this.updateScheduler=new Rv(200),this.cursorChangedScheduler=new hr(function(){return t.revealCursor()},200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(PO.onDidChange(function(){return t.onFoldingStrategyChanged()})),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(function(){return t.onFoldingStrategyChanged()})),this.localToDispose.add(this.editor.onDidChangeModelContent(function(){return t.onModelContentChanged()})),this.localToDispose.add(this.editor.onDidChangeCursorPosition(function(){return t.onCursorPositionChanged()})),this.localToDispose.add(this.editor.onMouseDown(function(i){return t.onEditorMouseDown(i)})),this.localToDispose.add(this.editor.onMouseUp(function(i){return t.onEditorMouseUp(i)})),this.localToDispose.add({dispose:function(){t.foldingRegionPromise&&(t.foldingRegionPromise.cancel(),t.foldingRegionPromise=null),t.updateScheduler&&t.updateScheduler.cancel(),t.updateScheduler=null,t.foldingModel=null,t.foldingModelPromise=null,t.hiddenRangeModel=null,t.cursorChangedScheduler=null,t.foldingStateMemento=null,t.rangeProvider&&t.rangeProvider.dispose(),t.rangeProvider=null}}),this.onModelContentChanged())},e.prototype.onFoldingStrategyChanged=function(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()},e.prototype.getRangeProvider=function(t){var r=this;if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new mPe(t),this._useFoldingProviders&&this.foldingModel){var i=PO.ordered(this.foldingModel.textModel);if(i.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions){var o=this.rangeProvider=new IPe(t,this.foldingStateMemento.collapsedRegions,function(){r.foldingStateMemento=null,r.onFoldingStrategyChanged()},3e4);return o}else i.length>0&&(this.rangeProvider=new CPe(t,i))}return this.foldingStateMemento=null,this.rangeProvider},e.prototype.getFoldingModel=function(){return this.foldingModelPromise},e.prototype.onModelContentChanged=function(){var t=this;this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(function(){var r=t.foldingModel;if(!r)return null;var i=t.foldingRegionPromise=Cr(function(o){return t.getRangeProvider(r.textModel).compute(o)});return i.then(function(o){if(o&&i===t.foldingRegionPromise){var s=t.editor.getSelections(),a=s?s.map(function(u){return u.startLineNumber}):[];r.update(o,a)}return r})}).then(void 0,function(r){return Le(r),null}))},e.prototype.onHiddenRangesChanges=function(t){if(this.hiddenRangeModel&&t.length){var r=this.editor.getSelections();r&&this.hiddenRangeModel.adjustSelections(r)&&this.editor.setSelections(r)}this.editor.setHiddenAreas(t)},e.prototype.onCursorPositionChanged=function(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()},e.prototype.revealCursor=function(){var t=this,r=this.getFoldingModel();r&&r.then(function(i){if(i){var o=t.editor.getSelections();if(o&&o.length>0){for(var s=[],a=function(h){var d=h.selectionStartLineNumber;t.hiddenRangeModel&&t.hiddenRangeModel.isHidden(d)&&s.push.apply(s,i.getAllRegionsAtLine(d,function(g){return g.isCollapsed&&d>g.startLineNumber}))},u=0,l=o;u<l.length;u++){var f=l[u];a(f)}s.length&&(i.toggleCollapseState(s),t.reveal(o[0].getPosition()))}}}).then(void 0,Le)},e.prototype.onEditorMouseDown=function(t){if(this.mouseDownInfo=null,!(!this.hiddenRangeModel||!t.target||!t.target.range)&&!(!t.event.leftButton&&!t.event.middleButton)){var r=t.target.range,i=!1;switch(t.target.type){case 4:var o=t.target.detail,s=t.target.element.offsetLeft,a=o.offsetX-s;if(a<5)return;i=!0;break;case 7:{if(this.hiddenRangeModel.hasRanges()){var u=t.target.detail;if(!u.isAfterLines)break}return}case 6:{if(this.hiddenRangeModel.hasRanges()){var l=this.editor.getModel();if(l&&r.startColumn===l.getLineMaxColumn(r.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:r.startLineNumber,iconClicked:i}}},e.prototype.onEditorMouseUp=function(t){var r=this,i=this.getFoldingModel();if(!(!i||!this.mouseDownInfo||!t.target)){var o=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,a=t.target.range;if(!(!a||a.startLineNumber!==o)){if(s){if(t.target.type!==4)return}else{var u=this.editor.getModel();if(!u||a.startColumn!==u.getLineMaxColumn(o))return}i.then(function(l){if(l){var f=l.getRegionAtLine(o);if(f&&f.startLineNumber===o){var h=f.isCollapsed;if(s||h){var d=[f];(t.event.middleButton||t.event.shiftKey)&&d.push.apply(d,l.getRegionsInside(f,function(g){return g.isCollapsed===h})),l.toggleCollapseState(d),r.reveal({lineNumber:o,column:1})}}}}).then(void 0,Le)}}},e.prototype.reveal=function(t){this.editor.revealPositionInCenterIfOutsideViewport(t,0)},e=xPe([DPe(1,rt)],e),e}(te),Ru=function(n){$s(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.runEditorCommand=function(t,r,i){var o=this,s=_Q.get(r);if(s){var a=s.getFoldingModel();if(a)return this.reportTelemetry(t,r),a.then(function(u){if(u){o.invoke(s,u,r,i);var l=r.getSelection();l&&s.reveal(l.getStartPosition())}})}},e.prototype.getSelectedLines=function(t){var r=t.getSelections();return r?r.map(function(i){return i.startLineNumber}):[]},e.prototype.getLineNumbers=function(t,r){return t&&t.selectionLines?t.selectionLines.map(function(i){return i+1}):this.getSelectedLines(r)},e.prototype.run=function(t,r){},e}(Ne);function yQ(n){if(!Mi(n)){if(!di(n))return!1;var e=n;if(!Mi(e.levels)&&!yl(e.levels)||!Mi(e.direction)&&!bu(e.direction)||!Mi(e.selectionLines)&&(!jK(e.selectionLines)||!e.selectionLines.every(yl)))return!1}return!0}var LPe=function(n){$s(e,n);function e(){return n.call(this,{id:"editor.unfold",label:S("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:yQ,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})||this}return e.prototype.invoke=function(t,r,i,o){var s=o&&o.levels||1,a=this.getLineNumbers(o,i);o&&o.direction==="up"?pQ(r,!1,s,a):zv(r,!1,s,a)},e}(Ru),kPe=function(n){$s(e,n);function e(){return n.call(this,{id:"editor.unfoldRecursively",label:S("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2137),weight:100}})||this}return e.prototype.invoke=function(t,r,i,o){zv(r,!1,Number.MAX_VALUE,this.getSelectedLines(i))},e}(Ru),TPe=function(n){$s(e,n);function e(){return n.call(this,{id:"editor.fold",label:S("foldAction.label","Fold"),alias:"Fold",precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold. Defaults to 1.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
						`,constraint:yQ,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})||this}return e.prototype.invoke=function(t,r,i,o){var s=o&&o.levels||1,a=this.getLineNumbers(o,i);o&&o.direction==="up"?pQ(r,!0,s,a):zv(r,!0,s,a)},e}(Ru),NPe=function(n){$s(e,n);function e(){return n.call(this,{id:"editor.foldRecursively",label:S("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2135),weight:100}})||this}return e.prototype.invoke=function(t,r,i){var o=this.getSelectedLines(i);zv(r,!0,Number.MAX_VALUE,o)},e}(Ru),APe=function(n){$s(e,n);function e(){return n.call(this,{id:"editor.foldAllBlockComments",label:S("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2133),weight:100}})||this}return e.prototype.invoke=function(t,r,i){if(r.regions.hasTypes())J2(r,lI.Comment.value,!0);else{var o=i.getModel();if(!o)return;var s=gt.getComments(o.getLanguageIdentifier().id);if(s&&s.blockCommentStartToken){var a=new RegExp("^\\s*"+Cu(s.blockCommentStartToken));Q2(r,a,!0)}}},e}(Ru),OPe=function(n){$s(e,n);function e(){return n.call(this,{id:"editor.foldAllMarkerRegions",label:S("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2077),weight:100}})||this}return e.prototype.invoke=function(t,r,i){if(r.regions.hasTypes())J2(r,lI.Region.value,!0);else{var o=i.getModel();if(!o)return;var s=gt.getFoldingRules(o.getLanguageIdentifier().id);if(s&&s.markers&&s.markers.start){var a=new RegExp(s.markers.start);Q2(r,a,!0)}}},e}(Ru),RPe=function(n){$s(e,n);function e(){return n.call(this,{id:"editor.unfoldAllMarkerRegions",label:S("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2078),weight:100}})||this}return e.prototype.invoke=function(t,r,i){if(r.regions.hasTypes())J2(r,lI.Region.value,!1);else{var o=i.getModel();if(!o)return;var s=gt.getFoldingRules(o.getLanguageIdentifier().id);if(s&&s.markers&&s.markers.start){var a=new RegExp(s.markers.start);Q2(r,a,!1)}}},e}(Ru),MPe=function(n){$s(e,n);function e(){return n.call(this,{id:"editor.foldAll",label:S("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2069),weight:100}})||this}return e.prototype.invoke=function(t,r,i){zv(r,!0)},e}(Ru),PPe=function(n){$s(e,n);function e(){return n.call(this,{id:"editor.unfoldAll",label:S("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2088),weight:100}})||this}return e.prototype.invoke=function(t,r,i){zv(r,!1)},e}(Ru),V9=function(n){$s(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getFoldingLevel=function(){return parseInt(this.id.substr(e.ID_PREFIX.length))},e.prototype.invoke=function(t,r,i){fPe(r,this.getFoldingLevel(),!0,this.getSelectedLines(i))},e.ID_PREFIX="editor.foldLevel",e.ID=function(t){return e.ID_PREFIX+t},e}(Ru);tn(_Q);re(LPe);re(kPe);re(TPe);re(NPe);re(MPe);re(PPe);re(APe);re(OPe);re(RPe);for(var Hp=1;Hp<=7;Hp++)_Se(new V9({id:V9.ID(Hp),label:S("foldLevelAction.label","Fold Level {0}",Hp),alias:"Fold Level "+Hp,precondition:Ma,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2048|21+Hp),weight:100}}));var e3=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FPe=function(n){e3(e,n);function e(){return n.call(this,{id:"editor.action.fontZoomIn",label:S("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})||this}return e.prototype.run=function(t,r){Il.setZoomLevel(Il.getZoomLevel()+1)},e}(Ne),BPe=function(n){e3(e,n);function e(){return n.call(this,{id:"editor.action.fontZoomOut",label:S("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})||this}return e.prototype.run=function(t,r){Il.setZoomLevel(Il.getZoomLevel()-1)},e}(Ne),WPe=function(n){e3(e,n);function e(){return n.call(this,{id:"editor.action.fontZoomReset",label:S("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})||this}return e.prototype.run=function(t,r){Il.setZoomLevel(0)},e}(Ne);re(FPe);re(BPe);re(WPe);var t3=function(){function n(){}return n._handleEolEdits=function(e,t){for(var r=void 0,i=[],o=0,s=t;o<s.length;o++){var a=s[o];typeof a.eol=="number"&&(r=a.eol),a.range&&typeof a.text=="string"&&i.push(a)}return typeof r=="number"&&e.hasModel()&&e.getModel().pushEOL(r),i},n._isFullModelReplaceEdit=function(e,t){if(!e.hasModel())return!1;var r=e.getModel(),i=r.validateRange(t.range),o=r.getFullModelRange();return o.equalsRange(i)},n.execute=function(e,t){e.pushUndoStop();var r=n._handleEolEdits(e,t);r.length===1&&n._isFullModelReplaceEdit(e,r[0])?e.executeEdits("formatEditsCommand",r.map(function(i){return lr.replace(R.lift(i.range),i.text)})):e.executeEdits("formatEditsCommand",r.map(function(i){return lr.replaceMove(R.lift(i.range),i.text)})),e.pushUndoStop()},n}(),uN=function(){function n(e){this.value=e,this._lower=e.toLowerCase()}return n.toKey=function(e){return typeof e=="string"?e.toLowerCase():e._lower},n}(),jd=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},zd=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function n3(n){if(n=n.filter(function(o){return o.range}),!!n.length){for(var e=n[0].range,t=1;t<n.length;t++)e=R.plusRange(e,n[t].range);var r=e.startLineNumber,i=e.endLineNumber;r===i?n.length===1?pi(S("hint11","Made 1 formatting edit on line {0}",r)):pi(S("hintn1","Made {0} formatting edits on line {1}",n.length,r)):n.length===1?pi(S("hint1n","Made 1 formatting edit between lines {0} and {1}",r,i)):pi(S("hintnn","Made {0} formatting edits between lines {1} and {2}",n.length,r,i))}}function bQ(n){for(var e=[],t=new Set,r=z_.ordered(n),i=0,o=r;i<o.length;i++){var s=o[i];e.push(s),s.extensionId&&t.add(uN.toKey(s.extensionId))}for(var a=va.ordered(n),u=function(h){if(h.extensionId){if(t.has(uN.toKey(h.extensionId)))return"continue";t.add(uN.toKey(h.extensionId))}e.push({displayName:h.displayName,extensionId:h.extensionId,provideDocumentFormattingEdits:function(d,g,v){return h.provideDocumentRangeFormattingEdits(d,d.getFullModelRange(),g,v)}})},l=0,f=a;l<f.length;l++){var s=f[l];u(s)}return e}var wQ=function(){function n(){}return n.select=function(e,t,r){return jd(this,void 0,void 0,function(){var i;return zd(this,function(o){switch(o.label){case 0:return e.length===0?[2,void 0]:(i=n._selectors.iterator().next().value,i?[4,i(e,t,r)]:[3,2]);case 1:return[2,o.sent()];case 2:return[2,e[0]]}})})},n._selectors=new bl,n}();function CQ(n,e,t,r,i){return jd(this,void 0,void 0,function(){var o,s,a,u;return zd(this,function(l){switch(l.label){case 0:return o=n.get(Hn),s=Su(e)?e.getModel():e,a=va.ordered(s),[4,wQ.select(a,s,r)];case 1:return u=l.sent(),u?[4,o.invokeFunction(VPe,u,e,t,i)]:[3,3];case 2:l.sent(),l.label=3;case 3:return[2]}})})}function VPe(n,e,t,r,i){return jd(this,void 0,void 0,function(){var o,s,a,u,l,f,h;return zd(this,function(d){switch(d.label){case 0:o=n.get(qs),Su(t)?(s=t.getModel(),a=new l2(t,5,i)):(s=t,a=new c2(t,i)),d.label=1;case 1:return d.trys.push([1,,4,5]),[4,e.provideDocumentRangeFormattingEdits(s,r,s.getFormattingOptions(),a.token)];case 2:return l=d.sent(),[4,o.computeMoreMinimalEdits(s.uri,l)];case 3:return u=d.sent(),a.token.isCancellationRequested?[2,!0]:[3,5];case 4:return a.dispose(),[7];case 5:return!u||u.length===0?[2,!1]:(Su(t)?(t3.execute(t,u),n3(u),t.pushUndoStop(),t.focus(),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1)):(f=u[0].range,h=new Ce(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn),s.pushEditOperations([h],u.map(function(g){return{text:g.text,range:R.lift(g.range),forceMoveMarkers:!0}}),function(g){for(var v=0,m=g;v<m.length;v++){var y=m[v].range;if(R.areIntersectingOrTouching(y,h))return[new Ce(y.startLineNumber,y.startColumn,y.endLineNumber,y.endColumn)]}return null})),[2,!0])}})})}function HPe(n,e,t,r){return jd(this,void 0,void 0,function(){var i,o,s,a;return zd(this,function(u){switch(u.label){case 0:return i=n.get(Hn),o=Su(e)?e.getModel():e,s=bQ(o),[4,wQ.select(s,o,t)];case 1:return a=u.sent(),a?[4,i.invokeFunction(UPe,a,e,t,r)]:[3,3];case 2:u.sent(),u.label=3;case 3:return[2]}})})}function UPe(n,e,t,r,i){return jd(this,void 0,void 0,function(){var o,s,a,u,l,f,h;return zd(this,function(d){switch(d.label){case 0:o=n.get(qs),Su(t)?(s=t.getModel(),a=new l2(t,5,i)):(s=t,a=new c2(t,i)),d.label=1;case 1:return d.trys.push([1,,4,5]),[4,e.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token)];case 2:return l=d.sent(),[4,o.computeMoreMinimalEdits(s.uri,l)];case 3:return u=d.sent(),a.token.isCancellationRequested?[2,!0]:[3,5];case 4:return a.dispose(),[7];case 5:return!u||u.length===0?[2,!1]:(Su(t)?(t3.execute(t,u),r!==2&&(n3(u),t.pushUndoStop(),t.focus(),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1))):(f=u[0].range,h=new Ce(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn),s.pushEditOperations([h],u.map(function(g){return{text:g.text,range:R.lift(g.range),forceMoveMarkers:!0}}),function(g){for(var v=0,m=g;v<m.length;v++){var y=m[v].range;if(R.areIntersectingOrTouching(y,h))return[new Ce(y.startLineNumber,y.startColumn,y.endLineNumber,y.endColumn)]}return null})),[2,!0])}})})}function jPe(n,e,t,r,i){return jd(this,void 0,void 0,function(){var o,s,a,u,l;return zd(this,function(f){switch(f.label){case 0:o=va.ordered(e),s=0,a=o,f.label=1;case 1:return s<a.length?(u=a[s],[4,Promise.resolve(u.provideDocumentRangeFormattingEdits(e,t,r,i)).catch(ji)]):[3,5];case 2:return l=f.sent(),vo(l)?[4,n.computeMoreMinimalEdits(e.uri,l)]:[3,4];case 3:return[2,f.sent()];case 4:return s++,[3,1];case 5:return[2,void 0]}})})}function zPe(n,e,t,r){return jd(this,void 0,void 0,function(){var i,o,s,a,u;return zd(this,function(l){switch(l.label){case 0:i=bQ(e),o=0,s=i,l.label=1;case 1:return o<s.length?(a=s[o],[4,Promise.resolve(a.provideDocumentFormattingEdits(e,t,r)).catch(ji)]):[3,5];case 2:return u=l.sent(),vo(u)?[4,n.computeMoreMinimalEdits(e.uri,u)]:[3,4];case 3:return[2,l.sent()];case 4:return o++,[3,1];case 5:return[2,void 0]}})})}function SQ(n,e,t,r,i){var o=rS.ordered(e);return o.length===0||o[0].autoFormatTriggerCharacters.indexOf(r)<0?Promise.resolve(void 0):Promise.resolve(o[0].provideOnTypeFormattingEdits(e,t,r,i,Ft.None)).catch(ji).then(function(s){return n.computeMoreMinimalEdits(e.uri,s)})}Ml("_executeFormatRangeProvider",function(n,e){var t=e.resource,r=e.range,i=e.options;if(!(t instanceof bt)||!R.isIRange(r))throw fr();var o=n.get(yo).getModel(t);if(!o)throw fr("resource");return jPe(n.get(qs),o,R.lift(r),i,Ft.None)});Ml("_executeFormatDocumentProvider",function(n,e){var t=e.resource,r=e.options;if(!(t instanceof bt))throw fr("resource");var i=n.get(yo).getModel(t);if(!i)throw fr("resource");return zPe(n.get(qs),i,r,Ft.None)});Ml("_executeFormatOnTypeProvider",function(n,e){var t=e.resource,r=e.position,i=e.ch,o=e.options;if(!(t instanceof bt)||!$.isIPosition(r)||typeof i!="string")throw fr();var s=n.get(yo).getModel(t);if(!s)throw fr("resource");return SQ(n.get(qs),s,$.lift(r),i,o)});var EQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IQ=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xQ=function(n,e){return function(t,r){e(t,r,n)}},r3=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},i3=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},qPe=void 0,$Pe=function(){function n(e,t){var r=this;this._workerService=t,this._callOnDispose=new De,this._callOnModel=new De,this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(function(){return r._update()})),this._callOnDispose.add(e.onDidChangeModel(function(){return r._update()})),this._callOnDispose.add(e.onDidChangeModelLanguage(function(){return r._update()})),this._callOnDispose.add(rS.onDidChange(this._update,this))}return n.prototype.getId=function(){return n.ID},n.prototype.dispose=function(){this._callOnDispose.dispose(),this._callOnModel.dispose()},n.prototype._update=function(){var e=this;if(this._callOnModel.clear(),!!this._editor.getConfiguration().contribInfo.formatOnType&&this._editor.hasModel()){var t=this._editor.getModel(),r=rS.ordered(t)[0];if(!(!r||!r.autoFormatTriggerCharacters)){for(var i=new sg,o=0,s=r.autoFormatTriggerCharacters;o<s.length;o++){var a=s[o];i.add(a.charCodeAt(0))}this._callOnModel.add(this._editor.onDidType(function(u){var l=u.charCodeAt(u.length-1);i.has(l)&&e._trigger(String.fromCharCode(l))}))}}},n.prototype._trigger=function(e){var t=this;if(this._editor.hasModel()&&!(this._editor.getSelections().length>1)){var r=this._editor.getModel(),i=this._editor.getPosition(),o=!1,s=this._editor.onDidChangeModelContent(function(a){if(a.isFlush){o=!0,s.dispose();return}for(var u=0,l=a.changes.length;u<l;u++){var f=a.changes[u];if(f.range.endLineNumber<=i.lineNumber){o=!0,s.dispose();return}}});SQ(this._workerService,r,i,e,r.getFormattingOptions()).then(function(a){s.dispose(),!o&&vo(a)&&(t3.execute(t._editor,a),n3(a))},function(a){throw s.dispose(),a})}},n.ID="editor.contrib.autoFormat",n=IQ([xQ(1,qs)],n),n}(),KPe=function(){function n(e,t){var r=this;this.editor=e,this._instantiationService=t,this._callOnDispose=new De,this._callOnModel=new De,this._callOnDispose.add(e.onDidChangeConfiguration(function(){return r._update()})),this._callOnDispose.add(e.onDidChangeModel(function(){return r._update()})),this._callOnDispose.add(e.onDidChangeModelLanguage(function(){return r._update()})),this._callOnDispose.add(va.onDidChange(this._update,this))}return n.prototype.getId=function(){return n.ID},n.prototype.dispose=function(){this._callOnDispose.dispose(),this._callOnModel.dispose()},n.prototype._update=function(){var e=this;this._callOnModel.clear(),this.editor.getConfiguration().contribInfo.formatOnPaste&&this.editor.hasModel()&&va.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(function(t){return e._trigger(t)}))},n.prototype._trigger=function(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(CQ,this.editor,e,2,Ft.None).catch(Le))},n.ID="editor.contrib.formatOnPaste",n=IQ([xQ(1,Hn)],n),n}(),GPe=function(n){EQ(e,n);function e(){return n.call(this,{id:"editor.action.formatDocument",label:S("formatDocument.label","Format Document"),alias:"Format Document",precondition:_e.and(P.writable,P.hasDocumentFormattingProvider),kbOpts:{kbExpr:_e.and(P.editorTextFocus,P.hasDocumentFormattingProvider),primary:1572,linux:{primary:3111},weight:100},menuOpts:{when:P.hasDocumentFormattingProvider,group:"1_modification",order:1.3}})||this}return e.prototype.run=function(t,r){return r3(this,void 0,void 0,function(){var i;return i3(this,function(o){switch(o.label){case 0:return r.hasModel()?(i=t.get(Hn),[4,i.invokeFunction(HPe,r,1,Ft.None)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e}(Ne),YPe=function(n){EQ(e,n);function e(){return n.call(this,{id:"editor.action.formatSelection",label:S("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:_e.and(P.writable,P.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:_e.and(P.editorTextFocus,P.hasDocumentSelectionFormattingProvider),primary:zi(2089,2084),weight:100},menuOpts:{when:_e.and(P.hasDocumentSelectionFormattingProvider,P.hasNonEmptySelection),group:"1_modification",order:1.31}})||this}return e.prototype.run=function(t,r){return r3(this,void 0,void 0,function(){var i,o,s;return i3(this,function(a){switch(a.label){case 0:return r.hasModel()?(i=t.get(Hn),o=r.getModel(),s=r.getSelection(),s.isEmpty()&&(s=new R(s.startLineNumber,1,s.startLineNumber,o.getLineMaxColumn(s.startLineNumber))),[4,i.invokeFunction(CQ,r,s,1,Ft.None)]):[2];case 1:return a.sent(),[2]}})})},e}(Ne);tn($Pe);tn(KPe);re(GPe);re(YPe);oi.registerCommand("editor.action.format",function(n){return r3(qPe,void 0,void 0,function(){var e,t;return i3(this,function(r){switch(r.label){case 0:return e=n.get(an).getFocusedCodeEditor(),!e||!e.hasModel()?[2]:(t=n.get(bi),e.getSelection().isEmpty()?[4,t.executeCommand("editor.action.formatDocument")]:[3,2]);case 1:return r.sent(),[3,4];case 2:return[4,t.executeCommand("editor.action.formatSelection")];case 3:r.sent(),r.label=4;case 4:return[2]}})})});var ZPe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XPe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},fh=function(n,e){return function(t,r){e(t,r,n)}},o3=function(n){ZPe(e,n);function e(t,r,i,o,s,a,u,l,f,h){var d=n.call(this,t,i.getRawConfiguration(),{},o,s,a,u,l,f,h)||this;return d._parentEditor=i,d._overwriteOptions=r,n.prototype.updateOptions.call(d,d._overwriteOptions),d._register(i.onDidChangeConfiguration(function(g){return d._onParentConfigurationChanged(g)})),d}return e.prototype.getParentEditor=function(){return this._parentEditor},e.prototype._onParentConfigurationChanged=function(t){n.prototype.updateOptions.call(this,this._parentEditor.getRawConfiguration()),n.prototype.updateOptions.call(this,this._overwriteOptions)},e.prototype.updateOptions=function(t){_r(this._overwriteOptions,t,!0),n.prototype.updateOptions.call(this,this._overwriteOptions)},e=XPe([fh(3,Hn),fh(4,an),fh(5,bi),fh(6,rt),fh(7,Ir),fh(8,Hr),fh(9,Au)],e),e}(s2),DQ=function(){function n(e){this._prefix=e,this._lastId=0}return n.prototype.nextId=function(){return this._prefix+ ++this._lastId},n}(),LQ=new DQ("id#"),H9=new Z(new Jt(0,122,204)),QPe={showArrow:!0,showFrame:!0,className:"",frameColor:H9,arrowColor:H9,keepEditorSelection:!1},JPe="vs.editor.contrib.zoneWidget",eFe=function(){function n(e,t,r,i,o,s){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=r,this.heightInLines=i,this._onDomNodeTop=o,this._onComputedHeight=s}return n.prototype.onDomNodeTop=function(e){this._onDomNodeTop(e)},n.prototype.onComputedHeight=function(e){this._onComputedHeight(e)},n}(),tFe=function(){function n(e,t){this._id=e,this._domNode=t}return n.prototype.getId=function(){return this._id},n.prototype.getDomNode=function(){return this._domNode},n.prototype.getPosition=function(){return null},n}(),nFe=function(){function n(e){this._editor=e,this._ruleName=n._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}return n.prototype.dispose=function(){this.hide(),NO(this._ruleName)},Object.defineProperty(n.prototype,"color",{set:function(e){this._color!==e&&(this._color=e,this._updateStyle())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{set:function(e){this._height!==e&&(this._height=e,this._updateStyle())},enumerable:!0,configurable:!0}),n.prototype._updateStyle=function(){NO(this._ruleName),pbe(".monaco-editor "+this._ruleName,"border-style: solid; border-color: transparent; border-bottom-color: "+this._color+"; border-width: "+this._height+"px; bottom: -"+this._height+"px; margin-left: -"+this._height+"px; ")},n.prototype.show=function(e){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:R.fromPositions(e),options:{className:this._ruleName,stickiness:1}}])},n.prototype.hide=function(){this._editor.deltaDecorations(this._decorations,[])},n._IdGenerator=new DQ(".arrow-decoration-"),n}(),rFe=function(){function n(e,t){var r=this;t===void 0&&(t={}),this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new De,this.container=null,this._isShowing=!1,this.editor=e,this.options=tl(t),_r(this.options,QPe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(function(i){var o=r._getWidth(i);r.domNode.style.width=o+"px",r.domNode.style.left=r._getLeft(i)+"px",r._onWidth(o)}))}return n.prototype.dispose=function(){var e=this;this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(function(t){e._viewZone&&t.removeZone(e._viewZone.id),e._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()},n.prototype.create=function(){de(this.domNode,"zone-widget"),this.options.className&&de(this.domNode,this.options.className),this.container=document.createElement("div"),de(this.container,"zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new nFe(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()},n.prototype.style=function(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()},n.prototype._applyStyles=function(){if(this.container&&this.options.frameColor){var e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){var t=this.options.arrowColor.toString();this._arrow.color=t}},n.prototype._getWidth=function(e){return e.width-e.minimapWidth-e.verticalScrollbarWidth},n.prototype._getLeft=function(e){return e.minimapWidth>0&&e.minimapLeft===0?e.minimapWidth:0},n.prototype._onViewZoneTop=function(e){this.domNode.style.top=e+"px"},n.prototype._onViewZoneHeight=function(e){if(this.domNode.style.height=e+"px",this.container){var t=e-this._decoratingElementsHeight();this.container.style.height=t+"px";var r=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(r))}this._resizeSash&&this._resizeSash.layout()},Object.defineProperty(n.prototype,"position",{get:function(){var e=this._positionMarkerId[0];if(e){var t=this.editor.getModel();if(t){var r=t.getDecorationRange(e);if(r)return r.getStartPosition()}}},enumerable:!0,configurable:!0}),n.prototype.show=function(e,t){var r=R.isIRange(e)?e:new R(e.lineNumber,e.column,e.lineNumber,e.column);this._isShowing=!0,this._showImpl(r,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:r,options:tt.EMPTY}])},n.prototype.hide=function(){var e=this;this._viewZone&&(this.editor.changeViewZones(function(t){e._viewZone&&t.removeZone(e._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()},n.prototype._decoratingElementsHeight=function(){var e=this.editor.getConfiguration().lineHeight,t=0;if(this.options.showArrow){var r=Math.round(e/3);t+=2*r}if(this.options.showFrame){var i=Math.round(e/9);t+=2*i}return t},n.prototype._showImpl=function(e,t){var r=this,i={lineNumber:e.startLineNumber,column:e.startColumn},o=this.editor.getLayoutInfo(),s=this._getWidth(o);this.domNode.style.width=s+"px",this.domNode.style.left=this._getLeft(o)+"px";var a=document.createElement("div");a.style.overflow="hidden";var u=this.editor.getConfiguration().lineHeight,l=this.editor.getLayoutInfo().height/u*.8;t>=l&&(t=l);var f=0,h=0;if(this._arrow&&this.options.showArrow&&(f=Math.round(u/3),this._arrow.height=f,this._arrow.show(i)),this.options.showFrame&&(h=Math.round(u/9)),this.editor.changeViewZones(function(y){r._viewZone&&y.removeZone(r._viewZone.id),r._overlayWidget&&(r.editor.removeOverlayWidget(r._overlayWidget),r._overlayWidget=null),r.domNode.style.top="-1000px",r._viewZone=new eFe(a,i.lineNumber,i.column,t,function(b){return r._onViewZoneTop(b)},function(b){return r._onViewZoneHeight(b)}),r._viewZone.id=y.addZone(r._viewZone),r._overlayWidget=new tFe(JPe+r._viewZone.id,r.domNode),r.editor.addOverlayWidget(r._overlayWidget)}),this.container&&this.options.showFrame){var d=this.options.frameWidth?this.options.frameWidth:h;this.container.style.borderTopWidth=d+"px",this.container.style.borderBottomWidth=d+"px"}var g=t*u-this._decoratingElementsHeight();this.container&&(this.container.style.top=f+"px",this.container.style.height=g+"px",this.container.style.overflow="hidden"),this._doLayout(g,s),this.options.keepEditorSelection||this.editor.setSelection(e);var v=this.editor.getModel();if(v){var m=Math.min(v.getLineCount(),Math.max(1,e.endLineNumber+1));this.revealLine(m)}},n.prototype.revealLine=function(e){this.editor.revealLine(e,0)},n.prototype.setCssClass=function(e,t){this.container&&(t&&this.container.classList.remove(t),de(this.container,e))},n.prototype._onWidth=function(e){},n.prototype._doLayout=function(e,t){},n.prototype._relayout=function(e){var t=this;this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(function(r){t._viewZone&&(t._viewZone.heightInLines=e,r.layoutZone(t._viewZone.id))})},n.prototype._initSash=function(){var e=this;if(!this._resizeSash){this._resizeSash=this._disposables.add(new II(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0);var t;this._disposables.add(this._resizeSash.onDidStart(function(r){e._viewZone&&(t={startY:r.startY,heightInLines:e._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(function(){t=void 0})),this._disposables.add(this._resizeSash.onDidChange(function(r){if(t){var i=(r.currentY-t.startY)/e.editor.getConfiguration().lineHeight,o=i<0?Math.ceil(i):Math.floor(i),s=t.heightInLines+o;s>5&&s<35&&e._relayout(s)}}))}},n.prototype.getHorizontalSashLeft=function(){return 0},n.prototype.getHorizontalSashTop=function(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2},n.prototype.getHorizontalSashWidth=function(){var e=this.editor.getLayoutInfo();return e.width-e.minimapWidth},n}(),iFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kQ=xt("IPeekViewService");J0(kQ,function(){function n(){this._widgets=new Map}return n.prototype.addExclusiveWidget=function(e,t){var r=this,i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose());var o=function(){var s=r._widgets.get(e);s&&s.widget===t&&(s.listener.dispose(),r._widgets.delete(e))};this._widgets.set(e,{widget:t,listener:t.onDidClose(o)})},n}());var xl;(function(n){n.inPeekEditor=new Re("inReferenceSearchEditor",!0),n.notInPeekEditor=n.inPeekEditor.toNegated()})(xl||(xl={}));function oFe(n){var e=n.get(an).getFocusedCodeEditor();return e instanceof o3?e.getParentEditor():e}var sFe={headerBackgroundColor:Z.white,primaryHeadingColor:Z.fromHex("#333333"),secondaryHeadingColor:Z.fromHex("#6c6c6cb3")},TQ=function(n){iFe(e,n);function e(t,r){r===void 0&&(r={});var i=n.call(this,t,r)||this;return i._onDidClose=new j,_r(i.options,sFe,!1),i}return e.prototype.dispose=function(){n.prototype.dispose.call(this),this._onDidClose.fire(this)},Object.defineProperty(e.prototype,"onDidClose",{get:function(){return this._onDidClose.event},enumerable:!0,configurable:!0}),e.prototype.style=function(t){var r=this.options;t.headerBackgroundColor&&(r.headerBackgroundColor=t.headerBackgroundColor),t.primaryHeadingColor&&(r.primaryHeadingColor=t.primaryHeadingColor),t.secondaryHeadingColor&&(r.secondaryHeadingColor=t.secondaryHeadingColor),n.prototype.style.call(this,t)},e.prototype._applyStyles=function(){n.prototype._applyStyles.call(this);var t=this.options;this._headElement&&t.headerBackgroundColor&&(this._headElement.style.backgroundColor=t.headerBackgroundColor.toString()),this._primaryHeading&&t.primaryHeadingColor&&(this._primaryHeading.style.color=t.primaryHeadingColor.toString()),this._secondaryHeading&&t.secondaryHeadingColor&&(this._secondaryHeading.style.color=t.secondaryHeadingColor.toString()),this._bodyElement&&t.frameColor&&(this._bodyElement.style.borderColor=t.frameColor.toString())},e.prototype._fillContainer=function(t){this.setCssClass("peekview-widget"),this._headElement=ke(".head"),this._bodyElement=ke(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),t.appendChild(this._headElement),t.appendChild(this._bodyElement)},e.prototype._fillHead=function(t){var r=this,i=ke(".peekview-title");ce(this._headElement,i),Br(i,"click",function(a){return r._onTitleClick(a)}),this._fillTitleIcon(i),this._primaryHeading=ke("span.filename"),this._secondaryHeading=ke("span.dirname"),this._metaHeading=ke("span.meta"),ce(i,this._primaryHeading,this._secondaryHeading,this._metaHeading);var o=ke(".peekview-actions");ce(this._headElement,o);var s=this._getActionBarOptions();this._actionbarWidget=new eb(o,s),this._disposables.add(this._actionbarWidget),this._actionbarWidget.push(new ds("peekview.close",S("label.close","Close"),"close-peekview-action",!0,function(){return r.dispose(),Promise.resolve()}),{label:!1,icon:!0})},e.prototype._fillTitleIcon=function(t){},e.prototype._getActionBarOptions=function(){return{}},e.prototype._onTitleClick=function(t){},e.prototype.setTitle=function(t,r){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerHTML=fs(t),this._primaryHeading.setAttribute("aria-label",t),r?this._secondaryHeading.innerHTML=fs(r):ms(this._secondaryHeading))},e.prototype.setMetaTitle=function(t){this._metaHeading&&(t?this._metaHeading.innerHTML=fs(t):ms(this._metaHeading))},e.prototype._doLayout=function(t,r){if(!this._isShowing&&t<0){this.dispose();return}var i=Math.ceil(this.editor.getConfiguration().lineHeight*1.2),o=t-(i+2);this._doLayoutHead(i,r),this._doLayoutBody(o,r)},e.prototype._doLayoutHead=function(t,r){this._headElement&&(this._headElement.style.height=t+"px",this._headElement.style.lineHeight=this._headElement.style.height)},e.prototype._doLayoutBody=function(t,r){this._bodyElement&&(this._bodyElement.style.height=t+"px")},e}(rFe),tv=function(){function n(e,t,r){this.parent=e,this._range=t,this.isProviderFirst=r,this._onRefChanged=new j,this.onRefChanged=this._onRefChanged.event,this.id=LQ.nextId()}return Object.defineProperty(n.prototype,"uri",{get:function(){return this.parent.uri},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"range",{get:function(){return this._range},set:function(e){this._range=e,this._onRefChanged.fire(this)},enumerable:!0,configurable:!0}),n.prototype.getAriaMessage=function(){return S("aria.oneReference","symbol in {0} on line {1} at column {2}",El(this.uri),this.range.startLineNumber,this.range.startColumn)},n}(),aFe=function(){function n(e){this._modelReference=e}return n.prototype.dispose=function(){Ue(this._modelReference)},n.prototype.preview=function(e,t){t===void 0&&(t=8);var r=this._modelReference.object.textEditorModel;if(r){var i=e.startLineNumber,o=e.startColumn,s=e.endLineNumber,a=e.endColumn,u=r.getWordUntilPosition({lineNumber:i,column:o-t}),l=new R(i,u.startColumn,i,o),f=new R(s,a,s,Number.MAX_VALUE),h=r.getValueInRange(l).replace(/^\s+/,Ay),d=r.getValueInRange(e),g=r.getValueInRange(f).replace(/\s+$/,Ay);return{value:h+d+g,highlight:{start:h.length,end:h.length+d.length}}}},n}(),nv=function(){function n(e,t){this._parent=e,this._uri=t,this._children=[]}return Object.defineProperty(n.prototype,"id",{get:function(){return this._uri.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"preview",{get:function(){return this._preview},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"failure",{get:function(){return this._loadFailure},enumerable:!0,configurable:!0}),n.prototype.getAriaMessage=function(){var e=this.children.length;return e===1?S("aria.fileReferences.1","1 symbol in {0}, full path {1}",El(this.uri),this.uri.fsPath):S("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,El(this.uri),this.uri.fsPath)},n.prototype.resolve=function(e){var t=this;return this._resolved?Promise.resolve(this):Promise.resolve(e.createModelReference(this._uri).then(function(r){var i=r.object;if(!i)throw r.dispose(),new Error;return t._preview=new aFe(r),t._resolved=!0,t},function(r){return t._children=[],t._resolved=!0,t._loadFailure=r,t}))},n.prototype.dispose=function(){this._preview&&(this._preview.dispose(),this._preview=void 0)},n}(),rv=function(){function n(e){var t=this;this._disposables=new De,this.groups=[],this.references=[],this._onDidChangeReferenceRange=new j,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event;var r=e[0];e.sort(n._compareReferences);for(var i,o=0,s=e;o<s.length;o++){var a=s[o];if((!i||i.uri.toString()!==a.uri.toString())&&(i=new nv(this,a.uri),this.groups.push(i)),i.children.length===0||!R.equalsRange(a.range,i.children[i.children.length-1].range)){var u=new tv(i,a.targetSelectionRange||a.range,r===a);this._disposables.add(u.onRefChanged(function(l){return t._onDidChangeReferenceRange.fire(l)})),this.references.push(u),i.children.push(u)}}}return Object.defineProperty(n.prototype,"empty",{get:function(){return this.groups.length===0},enumerable:!0,configurable:!0}),n.prototype.getAriaMessage=function(){return this.empty?S("aria.result.0","No results found"):this.references.length===1?S("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?S("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):S("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)},n.prototype.nextOrPreviousReference=function(e,t){var r=e.parent,i=r.children.indexOf(e),o=r.children.length,s=r.parent.groups.length;return s===1||t&&i+1<o||!t&&i>0?(t?i=(i+1)%o:i=(i+o-1)%o,r.children[i]):(i=r.parent.groups.indexOf(r),t?(i=(i+1)%s,r.parent.groups[i].children[0]):(i=(i+s-1)%s,r.parent.groups[i].children[r.parent.groups[i].children.length-1]))},n.prototype.nearestReference=function(e,t){var r=this.references.map(function(i,o){return{idx:o,prefixLen:aF(i.uri.toString(),e.toString()),offsetDist:Math.abs(i.range.startLineNumber-t.lineNumber)*100+Math.abs(i.range.startColumn-t.column)}}).sort(function(i,o){return i.prefixLen>o.prefixLen?-1:i.prefixLen<o.prefixLen?1:i.offsetDist<o.offsetDist?-1:i.offsetDist>o.offsetDist?1:0})[0];if(r)return this.references[r.idx]},n.prototype.firstReference=function(){for(var e=0,t=this.references;e<t.length;e++){var r=t[e];if(r.isProviderFirst)return r}return this.references[0]},n.prototype.dispose=function(){Ue(this.groups),this._disposables.dispose(),this.groups.length=0},n._compareReferences=function(e,t){var r=e.uri.toString(),i=t.uri.toString();return r<i?-1:r>i?1:R.compareRangesUsingStarts(e.range,t.range)},n}();function lN(n){return fs(n)}var fg=function(){function n(e,t){this.supportOcticons=t,this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",this.didEverRender=!1,e.appendChild(this.domNode)}return Object.defineProperty(n.prototype,"element",{get:function(){return this.domNode},enumerable:!0,configurable:!0}),n.prototype.set=function(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=""),e||(e=""),i&&(e=n.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===r&&Fc(this.highlights,t))&&(Array.isArray(t)||(t=[]),this.text=e,this.title=r,this.highlights=t,this.render())},n.prototype.render=function(){for(var e="",t=0,r=0,i=this.highlights;r<i.length;r++){var o=i[r];if(o.end!==o.start){if(t<o.start){e+="<span>";var s=this.text.substring(t,o.start);e+=this.supportOcticons?lN(s):fs(s),e+="</span>",t=o.end}e+='<span class="highlight">';var a=this.text.substring(o.start,o.end);e+=this.supportOcticons?lN(a):fs(a),e+="</span>",t=o.end}}if(t<this.text.length){e+="<span>";var a=this.text.substring(t);e+=this.supportOcticons?lN(a):fs(a),e+="</span>"}this.domNode.innerHTML=e,this.domNode.title=this.title,this.didEverRender=!0},n.escapeNewLines=function(e,t){var r=0,i=0;return e.replace(/\r\n|\r|\n/g,function(o,s){i=o===`\r
`?-1:0,s+=r;for(var a=0,u=t;a<u.length;a++){var l=u[a];l.end<=s||(l.start>=s&&(l.start+=i),l.end>=s&&(l.end+=i))}return r+=i,""})},n}(),uFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yC=function(){function n(e){this._element=e}return Object.defineProperty(n.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textContent",{set:function(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{set:function(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{set:function(e){this.disposed||e===this._title||(this._title=e,this._title?this._element.title=e:this._element.removeAttribute("title"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"empty",{set:function(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":null)},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this.disposed=!0},n}(),s3=function(n){uFe(e,n);function e(t,r){var i=n.call(this)||this;return i.domNode=i._register(new yC(ce(t,ke(".monaco-icon-label")))),i.labelDescriptionContainer=i._register(new yC(ce(i.domNode.element,ke(".monaco-icon-label-description-container")))),r&&r.supportHighlights?i.labelNode=new fg(ce(i.labelDescriptionContainer.element,ke("a.label-name")),!!r.supportOcticons):i.labelNode=i._register(new yC(ce(i.labelDescriptionContainer.element,ke("a.label-name")))),r&&r.supportDescriptionHighlights?i.descriptionNodeFactory=function(){return new fg(ce(i.labelDescriptionContainer.element,ke("span.label-description")),!!r.supportOcticons)}:i.descriptionNodeFactory=function(){return i._register(new yC(ce(i.labelDescriptionContainer.element,ke("span.label-description"))))},i}return e.prototype.setLabel=function(t,r,i){var o=["monaco-icon-label"];i&&(i.extraClasses&&o.push.apply(o,i.extraClasses),i.italic&&o.push("italic")),this.domNode.className=o.join(" "),this.domNode.title=i&&i.title?i.title:"",this.labelNode instanceof fg?this.labelNode.set(t||"",i?i.matches:void 0,i&&i.title?i.title:void 0,i&&i.labelEscapeNewLines):this.labelNode.textContent=t||"",(r||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof fg?(this.descriptionNode.set(r||"",i?i.descriptionMatches:void 0),i&&i.descriptionTitle?this.descriptionNode.element.title=i.descriptionTitle:this.descriptionNode.element.removeAttribute("title")):(this.descriptionNode.textContent=r||"",this.descriptionNode.title=i&&i.descriptionTitle?i.descriptionTitle:"",this.descriptionNode.empty=!r))},e}(te),lFe={badgeBackground:Z.fromHex("#4D4D4D"),badgeForeground:Z.fromHex("#FFFFFF")},cFe=function(){function n(e,t){this.count=0,this.options=t||Object.create(null),_r(this.options,lFe,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=ce(e,ke(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}return n.prototype.setCount=function(e){this.count=e,this.render()},n.prototype.setTitleFormat=function(e){this.titleFormat=e,this.render()},n.prototype.render=function(){this.element.textContent=Nt(this.countFormat,this.count),this.element.title=Nt(this.titleFormat,this.count),this.applyStyles()},n.prototype.style=function(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()},n.prototype.applyStyles=function(){if(this.element){var e=this.badgeBackground?this.badgeBackground.toString():null,t=this.badgeForeground?this.badgeForeground.toString():null,r=this.badgeBorder?this.badgeBorder.toString():null;this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=r?"1px":null,this.element.style.borderStyle=r?"solid":null,this.element.style.borderColor=r}},n}();function fFe(n,e,t){if(typeof n=="string"&&(n=bt.file(n)),n.scheme!==rn.file&&n.scheme!==rn.untitled)return n.with({query:null,fragment:null}).toString(!0);if(a3(n.fsPath))return Z1(AQ(n.fsPath));var r=Z1(n.fsPath);return!Hi&&e&&(r=hFe(r,e.userHome)),r}function NQ(n){if(n){typeof n=="string"&&(n=bt.file(n));var e=El(n)||(n.scheme===rn.file?n.fsPath:n.path);return a3(e)?AQ(e):e}}function a3(n){return!!(Hi&&n&&n[1]===":")}function AQ(n){return a3(n)?n.charAt(0).toUpperCase()+n.slice(1):n}var cN=Object.create(null);function hFe(n,e){if(Hi||!n||!e)return n;var t=cN.original===e?cN.normalized:void 0;return t||(t=""+CG(e,Qn.sep)+Qn.sep,cN={original:e,normalized:t}),(Rl?Oy(n,t):IG(n,t))&&(n="~/"+n.substr(t.length)),n}var dFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HI=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},e0=function(n,e){return function(t,r){e(t,r,n)}},pFe=function(){function n(e){this._resolverService=e}return n.prototype.hasChildren=function(e){return e instanceof rv||e instanceof nv&&!e.failure},n.prototype.getChildren=function(e){if(e instanceof rv)return e.groups;if(e instanceof nv)return e.resolve(this._resolverService).then(function(t){return t.children});throw new Error("bad tree")},n=HI([e0(0,pd)],n),n}(),gFe=function(){function n(){}return n.prototype.getHeight=function(){return 23},n.prototype.getTemplateId=function(e){return e instanceof nv?OQ.id:RQ.id},n}(),vFe=function(){function n(e){this._keybindingService=e}return n.prototype.getKeyboardNavigationLabel=function(e){if(e instanceof tv){var t=e.parent.preview,r=t&&t.preview(e.range);if(r)return r.value}return El(e.uri)},n.prototype.mightProducePrintableCharacter=function(e){return this._keybindingService.mightProducePrintableCharacter(e)},n=HI([e0(0,er)],n),n}(),mFe=function(){function n(){}return n.prototype.getId=function(e){return e.id},n}(),_Fe=function(n){dFe(e,n);function e(t,r,i){var o=n.call(this)||this;o._uriLabel=r;var s=document.createElement("div");return de(s,"reference-file"),o.file=o._register(new s3(s,{supportHighlights:!0})),o.badge=new cFe(ce(s,ke(".count"))),o._register(nTe(o.badge,i)),t.appendChild(s),o}return e.prototype.set=function(t,r){var i=pF(t.uri);this.file.setLabel(NQ(t.uri),this._uriLabel.getUriLabel(i,{relative:!0}),{title:this._uriLabel.getUriLabel(t.uri),matches:r});var o=t.children.length;this.badge.setCount(o),t.failure?this.badge.setTitleFormat(S("referencesFailre","Failed to resolve file.")):o>1?this.badge.setTitleFormat(S("referencesCount","{0} references",o)):this.badge.setTitleFormat(S("referenceCount","{0} reference",o))},e=HI([e0(1,NI),e0(2,Ir)],e),e}(te),OQ=function(){function n(e){this._instantiationService=e,this.templateId=n.id}return n.prototype.renderTemplate=function(e){return this._instantiationService.createInstance(_Fe,e)},n.prototype.renderElement=function(e,t,r){r.set(e.element,C2(e.filterData))},n.prototype.disposeTemplate=function(e){e.dispose()},n.id="FileReferencesRenderer",n=HI([e0(0,Hn)],n),n}(),yFe=function(){function n(e){this.label=new fg(e,!1)}return n.prototype.set=function(e,t){var r=e.parent.preview,i=r&&r.preview(e.range);if(!i)this.label.set(El(e.uri)+":"+(e.range.startLineNumber+1)+":"+(e.range.startColumn+1));else{var o=i.value,s=i.highlight;t&&!Ea.isDefault(t)?(vt(this.label.element,"referenceMatch",!1),this.label.set(o,C2(t))):(vt(this.label.element,"referenceMatch",!0),this.label.set(o,[s]))}},n}(),RQ=function(){function n(){this.templateId=n.id}return n.prototype.renderTemplate=function(e){return new yFe(e)},n.prototype.renderElement=function(e,t,r){r.set(e.element,e.filterData)},n.prototype.disposeTemplate=function(){},n.id="OneReferenceRenderer",n}(),bFe=function(){function n(){}return n.prototype.getAriaLabel=function(e){return e instanceof nv||e instanceof tv?e.getAriaMessage():null},n}(),u3=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wFe={separatorBorder:Z.transparent},MQ=function(){function n(e,t,r,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof r=="number"?(this._size=r,this._cachedVisibleSize=void 0,de(e,"visible")):(this._size=0,this._cachedVisibleSize=r.cachedVisibleSize)}return Object.defineProperty(n.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return typeof this._cachedVisibleSize>"u"},enumerable:!0,configurable:!0}),n.prototype.setVisible=function(e,t){e!==this.visible&&(e?(this.size=la(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),vt(this.container,"visible",e),this.view.setVisible&&this.view.setVisible(e))},Object.defineProperty(n.prototype,"minimumSize",{get:function(){return this.visible?this.view.minimumSize:0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"viewMinimumSize",{get:function(){return this.view.minimumSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maximumSize",{get:function(){return this.visible?this.view.maximumSize:0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"viewMaximumSize",{get:function(){return this.view.maximumSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"priority",{get:function(){return this.view.priority},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"snap",{get:function(){return!!this.view.snap},enumerable:!0,configurable:!0}),n.prototype.layout=function(e){this.view.layout(this.size,e)},n.prototype.dispose=function(){return this.disposable.dispose(),this.view},n}(),CFe=function(n){u3(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.layout=function(t){n.prototype.layout.call(this,t),this.container.style.height=this.size+"px"},e}(MQ),SFe=function(n){u3(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.layout=function(t){n.prototype.layout.call(this,t),this.container.style.width=this.size+"px"},e}(MQ),Zu;(function(n){n[n.Idle=0]="Idle",n[n.Busy=1]="Busy"})(Zu||(Zu={}));var BS;(function(n){n.Distribute={type:"distribute"};function e(r){return{type:"split",index:r}}n.Split=e;function t(r){return{type:"invisible",cachedVisibleSize:r}}n.Invisible=t})(BS||(BS={}));var EFe=function(n){u3(e,n);function e(t,r){r===void 0&&(r={});var i=n.call(this)||this;return i.size=0,i.contentSize=0,i.proportions=void 0,i.viewItems=[],i.sashItems=[],i.state=Zu.Idle,i._onDidSashChange=i._register(new j),i.onDidSashChange=i._onDidSashChange.event,i._onDidSashReset=i._register(new j),i.orientation=Mi(r.orientation)?0:r.orientation,i.inverseAltBehavior=!!r.inverseAltBehavior,i.proportionalLayout=Mi(r.proportionalLayout)?!0:!!r.proportionalLayout,i.el=document.createElement("div"),de(i.el,"monaco-split-view2"),de(i.el,i.orientation===0?"vertical":"horizontal"),t.appendChild(i.el),i.sashContainer=ce(i.el,ke(".sash-container")),i.viewContainer=ce(i.el,ke(".split-view-container")),i.style(r.styles||wFe),r.descriptor&&(i.size=r.descriptor.size,r.descriptor.views.forEach(function(o,s){var a=Mi(o.visible)||o.visible?o.size:{type:"invisible",cachedVisibleSize:o.size},u=o.view;i.doAddView(u,a,s,!0)}),i.contentSize=i.viewItems.reduce(function(o,s){return o+s.size},0),i.saveProportions()),i}return Object.defineProperty(e.prototype,"orthogonalStartSash",{get:function(){return this._orthogonalStartSash},set:function(t){for(var r=0,i=this.sashItems;r<i.length;r++){var o=i[r];o.sash.orthogonalStartSash=t}this._orthogonalStartSash=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orthogonalEndSash",{get:function(){return this._orthogonalEndSash},set:function(t){for(var r=0,i=this.sashItems;r<i.length;r++){var o=i[r];o.sash.orthogonalEndSash=t}this._orthogonalEndSash=t},enumerable:!0,configurable:!0}),e.prototype.style=function(t){t.separatorBorder.isTransparent()?(qe(this.el,"separator-border"),this.el.style.removeProperty("--separator-border")):(de(this.el,"separator-border"),this.el.style.setProperty("--separator-border",t.separatorBorder.toString()))},e.prototype.addView=function(t,r,i){i===void 0&&(i=this.viewItems.length),this.doAddView(t,r,i,!1)},e.prototype.layout=function(t,r){var i=this,o=Math.max(this.size,this.contentSize);if(this.size=t,this.orthogonalSize=r,this.proportions)for(var l=0;l<this.viewItems.length;l++){var f=this.viewItems[l];f.size=la(Math.round(this.proportions[l]*t),f.minimumSize,f.maximumSize)}else{var s=eo(this.viewItems.length),a=s.filter(function(h){return i.viewItems[h].priority===1}),u=s.filter(function(h){return i.viewItems[h].priority===2});this.resize(this.viewItems.length-1,t-o,void 0,a,u)}this.distributeEmptySpace(),this.layoutViews()},e.prototype.saveProportions=function(){var t=this;this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(function(r){return r.size/t.contentSize}))},e.prototype.onSashStart=function(t){var r=this,i=t.sash,o=t.start,s=t.alt,a=Mc(this.sashItems,function(f){return f.sash===i}),u=au(pt(document.body,"keydown")(function(f){return l(r.sashDragState.current,f.altKey)}),pt(document.body,"keyup")(function(){return l(r.sashDragState.current,!1)})),l=function(f,h){var d=r.viewItems.map(function(K){return K.size}),g=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY;if(r.inverseAltBehavior&&(h=!h),h){var m=a===r.sashItems.length-1;if(m){var y=r.viewItems[a];g=(y.minimumSize-y.size)/2,v=(y.maximumSize-y.size)/2}else{var y=r.viewItems[a+1];g=(y.size-y.maximumSize)/2,v=(y.size-y.minimumSize)/2}}var b,C;if(!h){var E=eo(a,-1),D=eo(a+1,r.viewItems.length),k=E.reduce(function(K,X){return K+(r.viewItems[X].minimumSize-d[X])},0),I=E.reduce(function(K,X){return K+(r.viewItems[X].viewMaximumSize-d[X])},0),T=D.length===0?Number.POSITIVE_INFINITY:D.reduce(function(K,X){return K+(d[X]-r.viewItems[X].minimumSize)},0),A=D.length===0?Number.NEGATIVE_INFINITY:D.reduce(function(K,X){return K+(d[X]-r.viewItems[X].viewMaximumSize)},0),M=Math.max(k,A),L=Math.min(T,I),F=r.findFirstSnapIndex(E),W=r.findFirstSnapIndex(D);if(typeof F=="number"){var y=r.viewItems[F],z=Math.floor(y.viewMinimumSize/2);b={index:F,limitDelta:y.visible?M-z:M+z,size:y.size}}if(typeof W=="number"){var y=r.viewItems[W],z=Math.floor(y.viewMinimumSize/2);C={index:W,limitDelta:y.visible?L+z:L-z,size:y.size}}}r.sashDragState={start:f,current:f,index:a,sizes:d,minDelta:g,maxDelta:v,alt:h,snapBefore:b,snapAfter:C,disposable:u}};l(o,s)},e.prototype.onSashChange=function(t){var r=t.current,i=this.sashDragState,o=i.index,s=i.start,a=i.sizes,u=i.alt,l=i.minDelta,f=i.maxDelta,h=i.snapBefore,d=i.snapAfter;this.sashDragState.current=r;var g=r-s,v=this.resize(o,g,a,void 0,void 0,l,f,h,d);if(u){var m=o===this.sashItems.length-1,y=this.viewItems.map(function(I){return I.size}),b=m?o:o+1,C=this.viewItems[b],E=C.size-C.maximumSize,D=C.size-C.minimumSize,k=m?o-1:o+1;this.resize(k,-v,y,void 0,void 0,E,D)}this.distributeEmptySpace(),this.layoutViews()},e.prototype.onSashEnd=function(t){this._onDidSashChange.fire(t),this.sashDragState.disposable.dispose(),this.saveProportions()},e.prototype.onViewChange=function(t,r){var i=this.viewItems.indexOf(t);i<0||i>=this.viewItems.length||(r=typeof r=="number"?r:t.size,r=la(r,t.minimumSize,t.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((t.size-r)/2)),this.distributeEmptySpace(),this.layoutViews()):(t.size=r,this.relayout([i],void 0)))},e.prototype.resizeView=function(t,r){var i=this;if(this.state!==Zu.Idle)throw new Error("Cant modify splitview");if(this.state=Zu.Busy,!(t<0||t>=this.viewItems.length)){var o=eo(this.viewItems.length).filter(function(l){return l!==t}),s=o.filter(function(l){return i.viewItems[l].priority===1}).concat([t]),a=o.filter(function(l){return i.viewItems[l].priority===2}),u=this.viewItems[t];r=Math.round(r),r=la(r,u.minimumSize,Math.min(u.maximumSize,this.size)),u.size=r,this.relayout(s,a),this.state=Zu.Idle}},e.prototype.distributeViewSizes=function(){for(var t=this,r=[],i=0,o=0,s=this.viewItems;o<s.length;o++){var a=s[o];a.maximumSize-a.minimumSize>0&&(r.push(a),i+=a.size)}for(var u=Math.floor(i/r.length),l=0,f=r;l<f.length;l++){var a=f[l];a.size=la(u,a.minimumSize,a.maximumSize)}var h=eo(this.viewItems.length),d=h.filter(function(v){return t.viewItems[v].priority===1}),g=h.filter(function(v){return t.viewItems[v].priority===2});this.relayout(d,g)},e.prototype.getViewSize=function(t){return t<0||t>=this.viewItems.length?-1:this.viewItems[t].size},e.prototype.doAddView=function(t,r,i,o){var s=this;if(i===void 0&&(i=this.viewItems.length),this.state!==Zu.Idle)throw new Error("Cant modify splitview");this.state=Zu.Busy;var a=ke(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(a):this.viewContainer.insertBefore(a,this.viewContainer.children.item(i));var u=t.onDidChange(function(F){return s.onViewChange(d,F)}),l=en(function(){return s.viewContainer.removeChild(a)}),f=au(u,l),h;typeof r=="number"?h=r:r.type==="split"?h=this.getViewSize(r.index)/2:r.type==="invisible"?h={cachedVisibleSize:r.cachedVisibleSize}:h=t.minimumSize;var d=this.orientation===0?new CFe(a,t,h,f):new SFe(a,t,h,f);if(this.viewItems.splice(i,0,d),this.viewItems.length>1){var g=this.orientation===0?1:0,v=this.orientation===0?{getHorizontalSashTop:function(F){return s.getSashPosition(F)}}:{getVerticalSashLeft:function(F){return s.getSashPosition(F)}},m=new II(this.sashContainer,v,{orientation:g,orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash}),y=this.orientation===0?function(F){return{sash:m,start:F.startY,current:F.currentY,alt:F.altKey}}:function(F){return{sash:m,start:F.startX,current:F.currentX,alt:F.altKey}},b=We.map(m.onDidStart,y),C=b(this.onSashStart,this),E=We.map(m.onDidChange,y),D=E(this.onSashChange,this),k=We.map(m.onDidEnd,function(){return Mc(s.sashItems,function(F){return F.sash===m})}),I=k(this.onSashEnd,this),T=m.onDidReset(function(){var F=Mc(s.sashItems,function(se){return se.sash===m}),W=eo(F,-1),z=eo(F+1,s.viewItems.length),K=s.findFirstSnapIndex(W),X=s.findFirstSnapIndex(z);typeof K=="number"&&!s.viewItems[K].visible||typeof X=="number"&&!s.viewItems[X].visible||s._onDidSashReset.fire(F)}),A=au(C,D,I,T,m),M={sash:m,disposable:A};this.sashItems.splice(i-1,0,M)}a.appendChild(t.element);var L;typeof r!="number"&&r.type==="split"&&(L=[r.index]),o||this.relayout([i],L),this.state=Zu.Idle,!o&&typeof r!="number"&&r.type==="distribute"&&this.distributeViewSizes()},e.prototype.relayout=function(t,r){var i=this.viewItems.reduce(function(o,s){return o+s.size},0);this.resize(this.viewItems.length-1,this.size-i,void 0,t,r),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()},e.prototype.resize=function(t,r,i,o,s,a,u,l,f){var h=this;if(i===void 0&&(i=this.viewItems.map(function(yn){return yn.size})),a===void 0&&(a=Number.NEGATIVE_INFINITY),u===void 0&&(u=Number.POSITIVE_INFINITY),t<0||t>=this.viewItems.length)return 0;var d=eo(t,-1),g=eo(t+1,this.viewItems.length);if(s)for(var v=0,m=s;v<m.length;v++){var y=m[v];zk(d,y),zk(g,y)}if(o)for(var b=0,C=o;b<C.length;b++){var E=C[b];qw(d,E),qw(g,E)}var D=d.map(function(yn){return h.viewItems[yn]}),k=d.map(function(yn){return i[yn]}),I=g.map(function(yn){return h.viewItems[yn]}),T=g.map(function(yn){return i[yn]}),A=d.reduce(function(yn,Si){return yn+(h.viewItems[Si].minimumSize-i[Si])},0),M=d.reduce(function(yn,Si){return yn+(h.viewItems[Si].maximumSize-i[Si])},0),L=g.length===0?Number.POSITIVE_INFINITY:g.reduce(function(yn,Si){return yn+(i[Si]-h.viewItems[Si].minimumSize)},0),F=g.length===0?Number.NEGATIVE_INFINITY:g.reduce(function(yn,Si){return yn+(i[Si]-h.viewItems[Si].maximumSize)},0),W=Math.max(A,F,a),z=Math.min(L,M,u),K=!1;if(l){var X=this.viewItems[l.index],se=r>=l.limitDelta;K=se!==X.visible,X.setVisible(se,l.size)}if(!K&&f){var X=this.viewItems[f.index],se=r<f.limitDelta;K=se!==X.visible,X.setVisible(se,f.size)}if(K)return this.resize(t,r,i,o,s,a,u);r=la(r,W,z);for(var we=0,ae=r;we<D.length;we++){var Dt=D[we],At=la(k[we]+ae,Dt.minimumSize,Dt.maximumSize),$n=At-k[we];ae-=$n,Dt.size=At}for(var we=0,pr=r;we<I.length;we++){var Dt=I[we],At=la(T[we]-pr,Dt.minimumSize,Dt.maximumSize),$n=At-T[we];pr+=$n,Dt.size=At}return r},e.prototype.distributeEmptySpace=function(t){for(var r=this,i=this.viewItems.reduce(function(C,E){return C+E.size},0),o=this.size-i,s=eo(this.viewItems.length-1,-1),a=s.filter(function(C){return r.viewItems[C].priority===1}),u=s.filter(function(C){return r.viewItems[C].priority===2}),l=0,f=u;l<f.length;l++){var h=f[l];zk(s,h)}for(var d=0,g=a;d<g.length;d++){var h=g[d];qw(s,h)}typeof t=="number"&&qw(s,t);for(var v=0;o!==0&&v<s.length;v++){var m=this.viewItems[s[v]],y=la(m.size+o,m.minimumSize,m.maximumSize),b=y-m.size;o-=b,m.size=y}},e.prototype.layoutViews=function(){var t=this;this.contentSize=this.viewItems.reduce(function(l,f){return l+f.size},0),this.viewItems.forEach(function(l){return l.layout(t.orthogonalSize)}),this.sashItems.forEach(function(l){return l.sash.layout()});var r=!1,i=this.viewItems.map(function(l){return r=l.size-l.minimumSize>0||r});r=!1;var o=this.viewItems.map(function(l){return r=l.maximumSize-l.size>0||r}),s=this.viewItems.slice().reverse();r=!1;var a=s.map(function(l){return r=l.size-l.minimumSize>0||r}).reverse();r=!1;var u=s.map(function(l){return r=l.maximumSize-l.size>0||r}).reverse();this.sashItems.forEach(function(l,f){var h=l.sash,d=!(i[f]&&u[f+1]),g=!(o[f]&&a[f+1]);if(d&&g){var v=eo(f,-1),m=eo(f+1,t.viewItems.length),y=t.findFirstSnapIndex(v),b=t.findFirstSnapIndex(m),C=typeof y=="number"&&!t.viewItems[y].visible,E=typeof b=="number"&&!t.viewItems[b].visible;C&&a[f]?h.state=1:E&&i[f]?h.state=2:h.state=0}else d&&!g?h.state=1:!d&&g?h.state=2:h.state=3})},e.prototype.getSashPosition=function(t){for(var r=0,i=0;i<this.sashItems.length;i++)if(r+=this.viewItems[i].size,this.sashItems[i].sash===t)return r;return 0},e.prototype.findFirstSnapIndex=function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r],s=this.viewItems[o];if(s.visible&&s.snap)return o}for(var a=0,u=t;a<u.length;a++){var o=u[a],s=this.viewItems[o];if(s.visible&&s.maximumSize-s.minimumSize>0)return;if(!s.visible&&s.snap)return o}},e.prototype.dispose=function(){n.prototype.dispose.call(this),this.viewItems.forEach(function(t){return t.dispose()}),this.viewItems=[],this.sashItems.forEach(function(t){return t.disposable.dispose()}),this.sashItems=[]},e}(te),IFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xFe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},f_=function(n,e){return function(t,r){e(t,r,n)}},DFe=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},LFe=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},kFe=function(){function n(e,t){var r=this;this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new De,this._callOnModelChange=new De,this._callOnDispose.add(this._editor.onDidChangeModel(function(){return r._onModelChanged()})),this._onModelChanged()}return n.prototype.dispose=function(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()},n.prototype._onModelChanged=function(){this._callOnModelChange.clear();var e=this._editor.getModel();if(e)for(var t=0,r=this._model.groups;t<r.length;t++){var i=r[t];if(i.uri.toString()===e.uri.toString()){this._addDecorations(i);return}}},n.prototype._addDecorations=function(e){var t=this;if(this._editor.hasModel()){this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(function(l){return t._onDecorationChanged()}));for(var r=[],i=[],o=0,s=e.children.length;o<s;o++){var a=e.children[o];this._decorationIgnoreSet.has(a.id)||(r.push({range:a.range,options:n.DecorationOptions}),i.push(o))}for(var u=this._editor.deltaDecorations([],r),o=0;o<u.length;o++)this._decorations.set(u[o],e.children[i[o]])}},n.prototype._onDecorationChanged=function(){var e=this,t=[],r=this._editor.getModel();if(r){this._decorations.forEach(function(s,a){var u=r.getDecorationRange(a);if(u){var l=!1;if(!R.equalsRange(u,s.range)){if(R.spansMultipleLines(u))l=!0;else{var f=s.range.endColumn-s.range.startColumn,h=u.endColumn-u.startColumn;f!==h&&(l=!0)}l?(e._decorationIgnoreSet.add(s.id),t.push(a)):s.range=u}}});for(var i=0,o=t.length;i<o;i++)this._decorations.delete(t[i]);this._editor.deltaDecorations(t,[])}},n.prototype.removeDecorations=function(){var e=[];this._decorations.forEach(function(t,r){e.push(r)}),this._editor.deltaDecorations(e,[]),this._decorations.clear()},n.DecorationOptions=tt.register({stickiness:1,className:"reference-decoration"}),n}(),TFe=function(){function n(){this.ratio=.7,this.heightInLines=18}return n.fromJSON=function(e){var t,r;try{var i=JSON.parse(e);t=i.ratio,r=i.heightInLines}catch{}return{ratio:t||.7,heightInLines:r||18}},n}(),PQ=new Re("referenceSearchTreeFocused",!0),NFe=function(n){IFe(e,n);function e(t,r,i,o,s,a,u,l){var f=n.call(this,t,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0})||this;return f._defaultTreeKeyboardSupport=r,f.layoutData=i,f._textModelResolverService=s,f._instantiationService=a,f._peekViewService=u,f._uriLabel=l,f._disposeOnNewModel=new De,f._callOnDispose=new De,f._onDidSelectReference=new j,f._dim={height:0,width:0},f._applyTheme(o.getTheme()),f._callOnDispose.add(o.onThemeChange(f._applyTheme.bind(f))),f._peekViewService.addExclusiveWidget(t,f),f.create(),f}return e.prototype.dispose=function(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Ue(this._preview),Ue(this._previewNotAvailableMessage),Ue(this._tree),Ue(this._previewModelReference),this._splitView.dispose(),n.prototype.dispose.call(this)},e.prototype._applyTheme=function(t){var r=t.getColor(OFe)||Z.transparent;this.style({arrowColor:r,frameColor:r,headerBackgroundColor:t.getColor(AFe)||Z.transparent,primaryHeadingColor:t.getColor(FQ),secondaryHeadingColor:t.getColor(BQ)})},Object.defineProperty(e.prototype,"onDidSelectReference",{get:function(){return this._onDidSelectReference.event},enumerable:!0,configurable:!0}),e.prototype.show=function(t){this.editor.revealRangeInCenterIfOutsideViewport(t,0),n.prototype.show.call(this,t,this.layoutData.heightInLines||18)},e.prototype.focus=function(){this._tree.domFocus()},e.prototype._onTitleClick=function(t){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"title"})},e.prototype._fillBody=function(t){var r=this;this.setCssClass("reference-zone-widget"),this._messageContainer=ce(t,ke("div.messages")),yr(this._messageContainer),this._splitView=new EFe(t,{orientation:1}),this._previewContainer=ce(t,ke("div.preview.inline"));var i={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(o3,this._previewContainer,i,this.editor),yr(this._previewContainer),this._previewNotAvailableMessage=Vv.createFromString(S("missingPreviewMessage","no preview available")),this._treeContainer=ce(t,ke("div.ref-tree.inline"));var o={ariaLabel:S("treeAriaLabel","References"),keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new bFe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(vFe),identityProvider:new mFe};this._tree=this._instantiationService.createInstance(jNe,this._treeContainer,new gFe,[this._instantiationService.createInstance(OQ),this._instantiationService.createInstance(RQ)],this._instantiationService.createInstance(pFe),o),PQ.bindTo(this._tree.contextKeyService),this._splitView.addView({onDidChange:We.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:function(a){r._preview.layout({height:r._dim.height,width:a})}},BS.Distribute),this._splitView.addView({onDidChange:We.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:function(a){r._treeContainer.style.height=r._dim.height+"px",r._treeContainer.style.width=a+"px",r._tree.layout(r._dim.height,a)}},BS.Distribute),this._disposables.add(this._splitView.onDidSashChange(function(){r._dim.width&&(r.layoutData.ratio=r._splitView.getViewSize(0)/r._dim.width)},void 0));var s=function(a,u){a instanceof tv&&(u==="show"&&r._revealReference(a,!1),r._onDidSelectReference.fire({element:a,kind:u,source:"tree"}))};this._tree.onDidChangeFocus(function(a){s(a.elements[0],"show")}),this._tree.onDidChangeSelection(function(a){var u=!1;a.browserEvent instanceof KeyboardEvent&&(u=!0),u?s(a.elements[0],"goto"):s(a.elements[0],"show")}),this._tree.onDidOpen(function(a){var u=a.browserEvent instanceof MouseEvent&&(a.browserEvent.ctrlKey||a.browserEvent.metaKey||a.browserEvent.altKey),l=!a.browserEvent||a.browserEvent instanceof MouseEvent&&a.browserEvent.detail===2;u?s(a.elements[0],"side"):l?s(a.elements[0],"goto"):s(a.elements[0],"show")}),yr(this._treeContainer)},e.prototype._onWidth=function(t){this._dim&&this._doLayoutBody(this._dim.height,t)},e.prototype._doLayoutBody=function(t,r){n.prototype._doLayoutBody.call(this,t,r),this._dim={height:t,width:r},this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(r),this._splitView.resizeView(0,r*this.layoutData.ratio)},e.prototype.setSelection=function(t){var r=this;return this._revealReference(t,!0).then(function(){r._model&&(r._tree.setSelection([t]),r._tree.setFocus([t]))})},e.prototype.setModel=function(t){return this._disposeOnNewModel.clear(),this._model=t,this._model?this._onNewModel():Promise.resolve()},e.prototype._onNewModel=function(){var t=this;return this._model?this._model.empty?(this.setTitle(""),this._messageContainer.innerHTML=S("noResults","No results"),Yr(this._messageContainer),Promise.resolve(void 0)):(yr(this._messageContainer),this._decorationsManager=new kFe(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(function(r){return t._tree.rerender(r)})),this._disposeOnNewModel.add(this._preview.onMouseDown(function(r){var i=r.event,o=r.target;if(i.detail===2){var s=t._getFocusedReference();s&&t._onDidSelectReference.fire({element:{uri:s.uri,range:o.range},kind:i.ctrlKey||i.metaKey||i.altKey?"side":"open",source:"editor"})}})),de(this.container,"results-loaded"),Yr(this._treeContainer),Yr(this._previewContainer),this._splitView.layout(this._dim.width),this.focus(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)},e.prototype._getFocusedReference=function(){var t=this._tree.getFocus()[0];if(t instanceof tv)return t;if(t instanceof nv&&t.children.length>0)return t.children[0]},e.prototype._revealReference=function(t,r){return DFe(this,void 0,void 0,function(){var i,o,s,a,u;return LFe(this,function(l){switch(l.label){case 0:return this._revealedReference===t?[2]:(this._revealedReference=t,t.uri.scheme!==rn.inMemory?this.setTitle(OG(t.uri),this._uriLabel.getUriLabel(pF(t.uri))):this.setTitle(S("peekView.alternateTitle","References")),i=this._textModelResolverService.createModelReference(t.uri),this._tree.getInput()!==t.parent?[3,1]:(this._tree.reveal(t),[3,3]));case 1:return r&&this._tree.reveal(t.parent),[4,this._tree.expand(t.parent)];case 2:l.sent(),this._tree.reveal(t),l.label=3;case 3:return[4,i];case 4:return o=l.sent(),this._model?(Ue(this._previewModelReference),s=o.object,s?(a=this._preview.getModel()===s.textEditorModel?0:1,u=R.lift(t.range).collapseToStart(),this._previewModelReference=o,this._preview.setModel(s.textEditorModel),this._preview.setSelection(u),this._preview.revealRangeInCenter(u,a)):(this._preview.setModel(this._previewNotAvailableMessage),o.dispose()),[2]):(o.dispose(),[2])}})})},e=xFe([f_(3,Ir),f_(4,pd),f_(5,Hn),f_(6,kQ),f_(7,NI)],e),e}(TQ),AFe=G("peekViewTitle.background",{dark:"#1E1E1E",light:"#FFFFFF",hc:"#0C141F"},S("peekViewTitleBackground","Background color of the peek view title area.")),FQ=G("peekViewTitleLabel.foreground",{dark:"#FFFFFF",light:"#333333",hc:"#FFFFFF"},S("peekViewTitleForeground","Color of the peek view title.")),BQ=G("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#6c6c6cb3",hc:"#FFFFFF99"},S("peekViewTitleInfoForeground","Color of the peek view title info.")),OFe=G("peekView.border",{dark:"#007acc",light:"#007acc",hc:dr},S("peekViewBorder","Color of the peek view borders and arrow.")),RFe=G("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:Z.black},S("peekViewResultsBackground","Background color of the peek view result list.")),MFe=G("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:Z.white},S("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),PFe=G("peekViewResult.fileForeground",{dark:Z.white,light:"#1E1E1E",hc:Z.white},S("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),FFe=G("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},S("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),BFe=G("peekViewResult.selectionForeground",{dark:Z.white,light:"#6C6C6C",hc:Z.white},S("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),a1=G("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:Z.black},S("peekViewEditorBackground","Background color of the peek view editor.")),WFe=G("peekViewEditorGutter.background",{dark:a1,light:a1,hc:a1},S("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),VFe=G("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},S("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),HFe=G("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},S("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),UFe=G("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:ti},S("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));Xt(function(n,e){var t=n.getColor(VFe);t&&e.addRule(".monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: "+t+"; }");var r=n.getColor(HFe);r&&e.addRule(".monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: "+r+"; }");var i=n.getColor(UFe);i&&e.addRule(".monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid "+i+"; box-sizing: border-box; }");var o=n.getColor(ti);o&&e.addRule(".monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted "+o+"; box-sizing: border-box; }");var s=n.getColor(RFe);s&&e.addRule(".monaco-editor .reference-zone-widget .ref-tree { background-color: "+s+"; }");var a=n.getColor(MFe);a&&e.addRule(".monaco-editor .reference-zone-widget .ref-tree { color: "+a+"; }");var u=n.getColor(PFe);u&&e.addRule(".monaco-editor .reference-zone-widget .ref-tree .reference-file { color: "+u+"; }");var l=n.getColor(FFe);l&&e.addRule(".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: "+l+"; }");var f=n.getColor(BFe);f&&e.addRule(".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: "+f+" !important; }");var h=n.getColor(a1);h&&e.addRule(".monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {"+("	background-color: "+h+";")+"}");var d=n.getColor(WFe);d&&e.addRule(".monaco-editor .reference-zone-widget .preview .monaco-editor .margin {"+("	background-color: "+d+";")+"}")});var jFe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Up=function(n,e){return function(t,r){e(t,r,n)}},zFe=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},qFe=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},ub=new Re("referenceSearchVisible",!1),qv=function(){function n(e,t,r,i,o,s,a,u){this._defaultTreeKeyboardSupport=e,this._editorService=i,this._notificationService=o,this._instantiationService=s,this._storageService=a,this._configurationService=u,this._disposables=new De,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._editor=t,this._referenceSearchVisible=ub.bindTo(r)}return n.get=function(e){return e.getContribution(n.ID)},n.prototype.getId=function(){return n.ID},n.prototype.dispose=function(){this._referenceSearchVisible.reset(),Ue(this._disposables),this._widget&&(Ue(this._widget),this._widget=void 0),this._model&&(Ue(this._model),this._model=void 0)},n.prototype.toggleWidget=function(e,t,r){var i=this,o;if(this._widget&&(o=this._widget.position),this.closeWidget(),!(o&&e.containsPosition(o))){this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(function(){i.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(function(){i._ignoreModelChangeEvent||i.closeWidget()}));var s="peekViewLayout",a=TFe.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(NFe,this._editor,this._defaultTreeKeyboardSupport,a),this._widget.setTitle(S("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(function(){t.cancel(),i._widget&&(i._storageService.store(s,JSON.stringify(i._widget.layoutData),0),i._widget=void 0),i.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(function(l){var f=l.element,h=l.kind;switch(h){case"open":if(l.source==="editor"&&i._configurationService.getValue("editor.stablePeek"))break;case"side":f&&i.openReference(f,h==="side");break;case"goto":f&&(r.onGoto?r.onGoto(f):i._gotoReference(f));break}}));var u=++this._requestIdPool;t.then(function(l){if(!(u!==i._requestIdPool||!i._widget))return i._model&&i._model.dispose(),i._model=l,i._widget.setModel(i._model).then(function(){if(i._widget&&i._model&&i._editor.hasModel()){i._widget.setMetaTitle(r.getMetaTitle(i._model));var f=i._editor.getModel().uri,h=new $(e.startLineNumber,e.startColumn),d=i._model.nearestReference(f,h);if(d)return i._widget.setSelection(d)}})},function(l){i._notificationService.error(l)})}},n.prototype.goToNextOrPreviousReference=function(e){return zFe(this,void 0,void 0,function(){var t,r,i,o;return qFe(this,function(s){switch(s.label){case 0:return!this._editor.hasModel()||!this._model||!this._widget?[2]:(t=this._widget.position,t?(r=this._model.nearestReference(this._editor.getModel().uri,t),r?(i=this._model.nextOrPreviousReference(r,e),o=this._editor.hasTextFocus(),[4,this._widget.setSelection(i)]):[2]):[2]);case 1:return s.sent(),[4,this._gotoReference(i)];case 2:return s.sent(),o&&this._editor.focus(),[2]}})})},n.prototype.closeWidget=function(){this._widget&&(Ue(this._widget),this._widget=void 0),this._referenceSearchVisible.reset(),this._disposables.clear(),this._model&&(Ue(this._model),this._model=void 0),this._editor.focus(),this._requestIdPool+=1},n.prototype._gotoReference=function(e){var t=this;this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;var r=R.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:r}},this._editor).then(function(i){if(t._ignoreModelChangeEvent=!1,!i||i!==t._editor){t.closeWidget();return}t._widget&&(t._widget.show(r),t._widget.focus())},function(i){t._ignoreModelChangeEvent=!1,Le(i)})},n.prototype.openReference=function(e,t){t||this.closeWidget();var r=e.uri,i=e.range;this._editorService.openCodeEditor({resource:r,options:{selection:i}},this._editor,t)},n.ID="editor.contrib.referencesController",n=jFe([Up(2,rt),Up(3,an),Up(4,Hr),Up(5,Hn),Up(6,_f),Up(7,Vr)],n),n}();function UI(n,e,t,r){var i=t.ordered(n),o=i.map(function(s){return Promise.resolve(r(s,n,e)).then(void 0,function(a){ji(a)})});return Promise.all(o).then(Ly).then(Ol)}function l3(n,e,t){return UI(n,e,By,function(r,i,o){return r.provideDefinition(i,o,t)})}function WQ(n,e,t){return UI(n,e,eS,function(r,i,o){return r.provideDeclaration(i,o,t)})}function VQ(n,e,t){return UI(n,e,tS,function(r,i,o){return r.provideImplementation(i,o,t)})}function HQ(n,e,t){return UI(n,e,nS,function(r,i,o){return r.provideTypeDefinition(i,o,t)})}Ra("_executeDefinitionProvider",function(n,e){return l3(n,e,Ft.None)});Ra("_executeDeclarationProvider",function(n,e){return WQ(n,e,Ft.None)});Ra("_executeImplementationProvider",function(n,e){return VQ(n,e,Ft.None)});Ra("_executeTypeDefinitionProvider",function(n,e){return HQ(n,e,Ft.None)});var $Fe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UQ=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},D_=function(n,e){return function(t,r){e(t,r,n)}},c3=new Re("hasSymbols",!1),jI=xt("ISymbolNavigationService"),KFe=function(){function n(e,t,r,i){this._editorService=t,this._notificationService=r,this._keybindingService=i,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=c3.bindTo(e)}return n.prototype.reset=function(){this._ctxHasSymbols.reset(),Ue(this._currentState),Ue(this._currentMessage),this._currentModel=void 0,this._currentIdx=-1},n.prototype.put=function(e){var t=this,r=e.parent.parent;if(r.references.length<=1){this.reset();return}this._currentModel=r,this._currentIdx=r.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();var i=new GFe(this._editorService),o=i.onDidChange(function(s){if(!t._ignoreEditorChange){var a=t._editorService.getActiveCodeEditor();if(a){var u=a.getModel(),l=a.getPosition();if(!(!u||!l)){for(var f=!1,h=!1,d=0,g=r.references;d<g.length;d++){var v=g[d];if(v.uri.toString()===u.uri.toString())f=!0,h=h||R.containsPosition(v.range,l);else if(f)break}(!f||!h)&&t.reset()}}}});this._currentState=au(i,o)},n.prototype.revealNext=function(e){var t=this;if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;var r=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:r.uri,options:{selection:R.collapseToStart(r.range),revealInCenterIfOutsideViewport:!0}},e).finally(function(){t._ignoreEditorChange=!1})},n.prototype._showMessage=function(){Ue(this._currentMessage);var e=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),t=e?S("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,e.getLabel()):S("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(t)},n=UQ([D_(0,rt),D_(1,an),D_(2,Hr),D_(3,er)],n),n}();J0(jI,KFe,!0);ee(new(function(n){$Fe(e,n);function e(){return n.call(this,{id:"editor.gotoNextSymbolFromResult",precondition:_e.and(c3,_e.equals("config.editor.gotoLocation.multiple","goto")),kbOpts:{weight:100,primary:70}})||this}return e.prototype.runEditorCommand=function(t,r){return t.get(jI).revealNext(r)},e}($i)));ws.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:c3,primary:9,handler:function(n){n.get(jI).reset()}});var GFe=function(){function n(e){this._listener=new Map,this._disposables=new De,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}return n.prototype.dispose=function(){this._disposables.dispose(),this._onDidChange.dispose(),this._listener.forEach(Ue)},n.prototype._onDidAddEditor=function(e){var t=this;this._listener.set(e,au(e.onDidChangeCursorPosition(function(r){return t._onDidChange.fire({editor:e})}),e.onDidChangeModelContent(function(r){return t._onDidChange.fire({editor:e})})))},n.prototype._onDidRemoveEditor=function(e){Ue(this._listener.get(e)),this._listener.delete(e)},n=UQ([D_(0,an)],n),n}(),Es=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),U9=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},j9=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Mu=function(){function n(e,t,r,i){e===void 0&&(e=!1),t===void 0&&(t=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),this.openToSide=e,this.openInPeek=t,this.filterCurrent=r,this.showMessage=i}return n}(),qd=function(n){Es(e,n);function e(t,r){var i=n.call(this,r)||this;return i._configuration=t,i}return e.prototype.run=function(t,r){var i=this;if(!r.hasModel())return Promise.resolve(void 0);var o=t.get(Hr),s=t.get(an),a=t.get(MI),u=t.get(jI),l=r.getModel(),f=r.getPosition(),h=new l2(r,5),d=ebe(this._getTargetLocationForPosition(l,f,h.token),h.token).then(function(g){return U9(i,void 0,void 0,function(){var v,m,y,b,C,E,D,k;return j9(this,function(I){if(!g||l.isDisposed())return[2];for(v=-1,m=[],y=0,b=g;y<b.length;y++)C=b[y],!(!C||!C.range)&&(E=m.push(C),this._configuration.filterCurrent&&C.uri.toString()===l.uri.toString()&&R.containsPosition(C.range,f)&&v===-1&&(v=E-1));if(m.length===0)this._configuration.showMessage&&(D=l.getWordAtPosition(f),pl.get(r).showMessage(this._getNoResultFoundMessage(D),f));else return m.length===1&&v!==-1?(k=m[0],[2,this._openReference(r,s,k,!1).then(function(){})]):[2,this._onResult(s,u,r,new rv(m))];return[2]})})},function(g){o.error(g)}).finally(function(){h.dispose()});return a.showWhile(d,250),d},e.prototype._getTargetLocationForPosition=function(t,r,i){return l3(t,r,i)},e.prototype._getNoResultFoundMessage=function(t){return t&&t.word?S("noResultWord","No definition found for '{0}'",t.word):S("generic.noResults","No definition found")},e.prototype._getMetaTitle=function(t){return t.references.length>1?S("meta.title","  {0} definitions",t.references.length):""},e.prototype._onResult=function(t,r,i,o){return U9(this,void 0,void 0,function(){var s,a,u,l;return j9(this,function(f){switch(f.label){case 0:return s=o.getAriaMessage(),pi(s),a=i.getConfiguration().contribInfo.gotoLocation,this._configuration.openInPeek||a.multiple==="peek"&&o.references.length>1?(this._openInPeek(t,i,o),[3,3]):[3,1];case 1:return i.hasModel()?(u=o.firstReference(),u?[4,this._openReference(i,t,u,this._configuration.openToSide)]:[2]):[3,3];case 2:l=f.sent(),l&&o.references.length>1&&a.multiple==="gotoAndPeek"?this._openInPeek(t,l,o):o.dispose(),a.multiple==="goto"&&r.put(u),f.label=3;case 3:return[2]}})})},e.prototype._openReference=function(t,r,i,o){var s=void 0;return Nwe(i)&&(s=i.targetSelectionRange),s||(s=i.range),r.openCodeEditor({resource:i.uri,options:{selection:R.collapseToStart(s),revealInCenterIfOutsideViewport:!0}},t,o)},e.prototype._openInPeek=function(t,r,i){var o=this,s=qv.get(r);s&&r.hasModel()?s.toggleWidget(r.getSelection(),Cr(function(a){return Promise.resolve(i)}),{getMetaTitle:function(a){return o._getMetaTitle(a)},onGoto:function(a){return s.closeWidget(),o._openReference(r,t,a,!1)}}):i.dispose()},e}(Ne),jQ=GP?2118:70,YFe=function(n){Es(e,n);function e(){var t=n.call(this,new Mu,{id:e.id,label:S("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:_e.and(P.hasDefinitionProvider,P.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:P.editorTextFocus,primary:jQ,weight:100},menuOpts:{group:"navigation",order:1.1}})||this;return oi.registerCommandAlias("editor.action.goToDeclaration",e.id),t}return e.id="editor.action.revealDefinition",e}(qd),ZFe=function(n){Es(e,n);function e(){var t=n.call(this,new Mu(!0),{id:e.id,label:S("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:_e.and(P.hasDefinitionProvider,P.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,jQ),weight:100}})||this;return oi.registerCommandAlias("editor.action.openDeclarationToTheSide",e.id),t}return e.id="editor.action.revealDefinitionAside",e}(qd),XFe=function(n){Es(e,n);function e(){var t=n.call(this,new Mu(void 0,!0,!1),{id:e.id,label:S("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:_e.and(P.hasDefinitionProvider,xl.notInPeekEditor,P.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:P.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menuOpts:{group:"navigation",order:1.2}})||this;return oi.registerCommandAlias("editor.action.previewDeclaration",e.id),t}return e.id="editor.action.peekDefinition",e}(qd),zQ=function(n){Es(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._getTargetLocationForPosition=function(t,r,i){return WQ(t,r,i)},e.prototype._getNoResultFoundMessage=function(t){return t&&t.word?S("decl.noResultWord","No declaration found for '{0}'",t.word):S("decl.generic.noResults","No declaration found")},e.prototype._getMetaTitle=function(t){return t.references.length>1?S("decl.meta.title","  {0} declarations",t.references.length):""},e}(qd),QFe=function(n){Es(e,n);function e(){return n.call(this,new Mu,{id:e.id,label:S("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:_e.and(P.hasDeclarationProvider,P.isInEmbeddedEditor.toNegated()),menuOpts:{group:"navigation",order:1.3}})||this}return e.prototype._getNoResultFoundMessage=function(t){return t&&t.word?S("decl.noResultWord","No declaration found for '{0}'",t.word):S("decl.generic.noResults","No declaration found")},e.prototype._getMetaTitle=function(t){return t.references.length>1?S("decl.meta.title","  {0} declarations",t.references.length):""},e.id="editor.action.revealDeclaration",e}(zQ),JFe=function(n){Es(e,n);function e(){return n.call(this,new Mu(void 0,!0,!1),{id:"editor.action.peekDeclaration",label:S("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:_e.and(P.hasDeclarationProvider,xl.notInPeekEditor,P.isInEmbeddedEditor.toNegated()),menuOpts:{group:"navigation",order:1.31}})||this}return e}(zQ),qQ=function(n){Es(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._getTargetLocationForPosition=function(t,r,i){return VQ(t,r,i)},e.prototype._getNoResultFoundMessage=function(t){return t&&t.word?S("goToImplementation.noResultWord","No implementation found for '{0}'",t.word):S("goToImplementation.generic.noResults","No implementation found")},e.prototype._getMetaTitle=function(t){return t.references.length>1?S("meta.implementations.title","  {0} implementations",t.references.length):""},e}(qd),e2e=function(n){Es(e,n);function e(){return n.call(this,new Mu,{id:e.ID,label:S("actions.goToImplementation.label","Go to Implementation"),alias:"Go to Implementation",precondition:_e.and(P.hasImplementationProvider,P.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:P.editorTextFocus,primary:2118,weight:100}})||this}return e.ID="editor.action.goToImplementation",e}(qQ),t2e=function(n){Es(e,n);function e(){return n.call(this,new Mu(!1,!0,!1),{id:e.ID,label:S("actions.peekImplementation.label","Peek Implementation"),alias:"Peek Implementation",precondition:_e.and(P.hasImplementationProvider,P.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:P.editorTextFocus,primary:3142,weight:100}})||this}return e.ID="editor.action.peekImplementation",e}(qQ),$Q=function(n){Es(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._getTargetLocationForPosition=function(t,r,i){return HQ(t,r,i)},e.prototype._getNoResultFoundMessage=function(t){return t&&t.word?S("goToTypeDefinition.noResultWord","No type definition found for '{0}'",t.word):S("goToTypeDefinition.generic.noResults","No type definition found")},e.prototype._getMetaTitle=function(t){return t.references.length>1?S("meta.typeDefinitions.title","  {0} type definitions",t.references.length):""},e}(qd),n2e=function(n){Es(e,n);function e(){return n.call(this,new Mu,{id:e.ID,label:S("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:_e.and(P.hasTypeDefinitionProvider,P.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:P.editorTextFocus,primary:0,weight:100},menuOpts:{group:"navigation",order:1.4}})||this}return e.ID="editor.action.goToTypeDefinition",e}($Q),r2e=function(n){Es(e,n);function e(){return n.call(this,new Mu(!1,!0,!1),{id:e.ID,label:S("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:_e.and(P.hasTypeDefinitionProvider,P.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:P.editorTextFocus,primary:0,weight:100}})||this}return e.ID="editor.action.peekTypeDefinition",e}($Q);re(YFe);re(ZFe);re(XFe);re(QFe);re(JFe);re(e2e);re(t2e);re(n2e);re(r2e);Ta.appendMenuItem(16,{group:"4_symbol_nav",command:{id:"editor.action.goToDeclaration",title:S({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},order:2});Ta.appendMenuItem(16,{group:"4_symbol_nav",command:{id:"editor.action.goToTypeDefinition",title:S({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},order:3});Ta.appendMenuItem(16,{group:"4_symbol_nav",command:{id:"editor.action.goToImplementation",title:S({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementation")},order:4});var _d=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.appendText=function(e){return this.value+=e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&"),this},n.prototype.appendMarkdown=function(e){return this.value+=e,this},n.prototype.appendCodeblock=function(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this},n}();function zI(n){return TR(n)?!n.value:Array.isArray(n)?n.every(zI):!0}function TR(n){return n instanceof _d?!0:n&&typeof n=="object"?typeof n.value=="string"&&(typeof n.isTrusted=="boolean"||n.isTrusted===void 0):!1}function i2e(n,e){return!n&&!e?!0:!n||!e?!1:Array.isArray(n)&&Array.isArray(e)?hf(n,e,z9):TR(n)&&TR(e)?z9(n,e):!1}function z9(n,e){return n===e?!0:!n||!e?!1:n.value===e.value&&n.isTrusted===e.isTrusted}function fN(n){return n&&n.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function o2e(n){var e=[],t=n.split("|").map(function(f){return f.trim()});n=t[0];var r=t[1];if(r){var i=/height=(\d+)/.exec(r),o=/width=(\d+)/.exec(r),s=i?i[1]:"",a=o?o[1]:"",u=isFinite(parseInt(a)),l=isFinite(parseInt(s));u&&e.push('width="'+a+'"'),l&&e.push('height="'+s+'"')}return{href:n,dimensions:e}}var s2e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function NR(n,e){return!!n[e]}var hN=function(){function n(e,t){this.target=e.target,this.hasTriggerModifier=NR(e.event,t.triggerModifier),this.hasSideBySideModifier=NR(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=Ro||e.event.detail<=1}return n}(),q9=function(){function n(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=NR(e,t.triggerModifier)}return n}(),bC=function(){function n(e,t,r,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=r,this.triggerSideBySideModifier=i}return n.prototype.equals=function(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier},n}();function $9(n){return n==="altKey"?ct?new bC(57,"metaKey",6,"altKey"):new bC(5,"ctrlKey",6,"altKey"):ct?new bC(6,"altKey",57,"metaKey"):new bC(6,"altKey",5,"ctrlKey")}var KQ=function(n){s2e(e,n);function e(t){var r=n.call(this)||this;return r._onMouseMoveOrRelevantKeyDown=r._register(new j),r.onMouseMoveOrRelevantKeyDown=r._onMouseMoveOrRelevantKeyDown.event,r._onExecute=r._register(new j),r.onExecute=r._onExecute.event,r._onCancel=r._register(new j),r.onCancel=r._onCancel.event,r._editor=t,r._opts=$9(r._editor.getConfiguration().multiCursorModifier),r.lastMouseMoveEvent=null,r.hasTriggerKeyOnMouseDown=!1,r._register(r._editor.onDidChangeConfiguration(function(i){if(i.multiCursorModifier){var o=$9(r._editor.getConfiguration().multiCursorModifier);if(r._opts.equals(o))return;r._opts=o,r.lastMouseMoveEvent=null,r.hasTriggerKeyOnMouseDown=!1,r._onCancel.fire()}})),r._register(r._editor.onMouseMove(function(i){return r.onEditorMouseMove(new hN(i,r._opts))})),r._register(r._editor.onMouseDown(function(i){return r.onEditorMouseDown(new hN(i,r._opts))})),r._register(r._editor.onMouseUp(function(i){return r.onEditorMouseUp(new hN(i,r._opts))})),r._register(r._editor.onKeyDown(function(i){return r.onEditorKeyDown(new q9(i,r._opts))})),r._register(r._editor.onKeyUp(function(i){return r.onEditorKeyUp(new q9(i,r._opts))})),r._register(r._editor.onMouseDrag(function(){return r.resetHandler()})),r._register(r._editor.onDidChangeCursorSelection(function(i){return r.onDidChangeCursorSelection(i)})),r._register(r._editor.onDidChangeModel(function(i){return r.resetHandler()})),r._register(r._editor.onDidChangeModelContent(function(){return r.resetHandler()})),r._register(r._editor.onDidScrollChange(function(i){(i.scrollTopChanged||i.scrollLeftChanged)&&r.resetHandler()})),r}return e.prototype.onDidChangeCursorSelection=function(t){t.selection&&t.selection.startColumn!==t.selection.endColumn&&this.resetHandler()},e.prototype.onEditorMouseMove=function(t){this.lastMouseMoveEvent=t,this._onMouseMoveOrRelevantKeyDown.fire([t,null])},e.prototype.onEditorMouseDown=function(t){this.hasTriggerKeyOnMouseDown=t.hasTriggerModifier},e.prototype.onEditorMouseUp=function(t){this.hasTriggerKeyOnMouseDown&&this._onExecute.fire(t)},e.prototype.onEditorKeyDown=function(t){this.lastMouseMoveEvent&&(t.keyCodeIsTriggerKey||t.keyCodeIsSideBySideKey&&t.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this.lastMouseMoveEvent,t]):t.hasTriggerModifier&&this._onCancel.fire()},e.prototype.onEditorKeyUp=function(t){t.keyCodeIsTriggerKey&&this._onCancel.fire()},e.prototype.resetHandler=function(){this.lastMouseMoveEvent=null,this.hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()},e}(te),a2e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},K9=function(n,e){return function(t,r){e(t,r,n)}},u2e=function(){function n(e,t,r){var i=this;this.textModelResolverService=t,this.modeService=r,this.toUnhook=new De,this.decorations=[],this.currentWordUnderMouse=null,this.previousPromise=null,this.editor=e;var o=new KQ(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(function(s){var a=s[0],u=s[1];i.startFindDefinition(a,tI(u))})),this.toUnhook.add(o.onExecute(function(s){i.isEnabled(s)&&i.gotoDefinition(s.target,s.hasSideBySideModifier).then(function(){i.removeDecorations()},function(a){i.removeDecorations(),Le(a)})})),this.toUnhook.add(o.onCancel(function(){i.removeDecorations(),i.currentWordUnderMouse=null}))}return n.prototype.startFindDefinition=function(e,t){var r=this;if(!(e.target.type===9&&this.decorations.length>0)){if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordUnderMouse=null,this.removeDecorations();return}var i=e.target.position?this.editor.getModel().getWordAtPosition(e.target.position):null;if(!i){this.currentWordUnderMouse=null,this.removeDecorations();return}var o=e.target.position;if(!(this.currentWordUnderMouse&&this.currentWordUnderMouse.startColumn===i.startColumn&&this.currentWordUnderMouse.endColumn===i.endColumn&&this.currentWordUnderMouse.word===i.word)){this.currentWordUnderMouse=i;var s=new u2(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Cr(function(a){return r.findDefinition(e.target,a)}),this.previousPromise.then(function(a){if(!a||!a.length||!s.validate(r.editor)){r.removeDecorations();return}if(a.length>1)r.addDecoration(new R(o.lineNumber,i.startColumn,o.lineNumber,i.endColumn),new _d().appendText(S("multipleResults","Click to show {0} definitions.",a.length)));else{var u=a[0];if(!u.uri)return;r.textModelResolverService.createModelReference(u.uri).then(function(l){if(!l.object||!l.object.textEditorModel){l.dispose();return}var f=l.object.textEditorModel,h=u.range.startLineNumber;if(h<1||h>f.getLineCount()){l.dispose();return}var d=r.getPreviewValue(f,h,u),g;u.originSelectionRange?g=R.lift(u.originSelectionRange):g=new R(o.lineNumber,i.startColumn,o.lineNumber,i.endColumn);var v=r.modeService.getModeIdByFilepathOrFirstLine(f.uri);r.addDecoration(g,new _d().appendCodeblock(v||"",d)),l.dispose()})}}).then(void 0,Le)}}},n.prototype.getPreviewValue=function(e,t,r){var i=r.targetSelectionRange?r.range:this.getPreviewRangeBasedOnBrackets(e,t),o=i.endLineNumber-i.startLineNumber;o>=n.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t));var s=this.stripIndentationFromPreviewRange(e,t,i);return s},n.prototype.stripIndentationFromPreviewRange=function(e,t,r){for(var i=e.getLineFirstNonWhitespaceColumn(t),o=i,s=t+1;s<r.endLineNumber;s++){var a=e.getLineFirstNonWhitespaceColumn(s);o=Math.min(o,a)}var u=e.getValueInRange(r).replace(new RegExp("^\\s{"+(o-1)+"}","gm"),"").trim();return u},n.prototype.getPreviewRangeBasedOnIndentation=function(e,t){for(var r=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+n.MAX_SOURCE_PREVIEW_LINES),o=t+1;o<i;o++){var s=e.getLineFirstNonWhitespaceColumn(o);if(r===s)break}return new R(t,1,o+1,1)},n.prototype.getPreviewRangeBasedOnBrackets=function(e,t){for(var r=Math.min(e.getLineCount(),t+n.MAX_SOURCE_PREVIEW_LINES),i=[],o=!0,s=e.findNextBracket(new $(t,1));s!==null;){if(i.length===0)i.push(s);else{var a=i[i.length-1];if(a.open===s.open&&a.isOpen&&!s.isOpen?i.pop():i.push(s),i.length===0)if(o)o=!1;else return new R(t,1,s.range.endLineNumber+1,1)}var u=e.getLineMaxColumn(t),l=s.range.endLineNumber,f=s.range.endColumn;if(u===s.range.endColumn&&(l++,f=1),l>r)return new R(t,1,r+1,1);s=e.findNextBracket(new $(l,f))}return new R(t,1,r+1,1)},n.prototype.addDecoration=function(e,t){var r={range:e,options:{inlineClassName:"goto-definition-link",hoverMessage:t}};this.decorations=this.editor.deltaDecorations(this.decorations,[r])},n.prototype.removeDecorations=function(){this.decorations.length>0&&(this.decorations=this.editor.deltaDecorations(this.decorations,[]))},n.prototype.isEnabled=function(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&By.has(this.editor.getModel())},n.prototype.findDefinition=function(e,t){var r=this.editor.getModel();return r?l3(r,e.position,t):Promise.resolve(null)},n.prototype.gotoDefinition=function(e,t){var r=this;this.editor.setPosition(e.position);var i=new qd(new Mu(t,!1,!0,!1),{alias:"",label:"",id:"",precondition:void 0});return this.editor.invokeWithinContext(function(o){return i.run(o,r.editor)})},n.prototype.getId=function(){return n.ID},n.prototype.dispose=function(){this.toUnhook.dispose()},n.ID="editor.contrib.gotodefinitionwithmouse",n.MAX_SOURCE_PREVIEW_LINES=8,n=a2e([K9(1,pd),K9(2,mf)],n),n}();tn(u2e);Xt(function(n,e){var t=n.getColor(QF);t&&e.addRule(".monaco-editor .goto-definition-link { color: "+t+" !important; }")});var l2e=encodeURIComponent('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.58318 2.02842C9.96435 2.16331 11.2561 2.77279 12.2383 3.75307C13.3643 4.87923 13.9978 6.40584 14 7.99829C14.0004 9.38617 13.5196 10.7313 12.6396 11.8045C11.7595 12.8778 10.5345 13.6127 9.17333 13.8841C7.81215 14.1556 6.39895 13.9467 5.1745 13.2931C3.95005 12.6394 2.99008 11.5815 2.45814 10.2995C1.92619 9.0175 1.85517 7.59072 2.25717 6.26222C2.65917 4.93373 3.50933 3.7857 4.66282 3.0137C5.8163 2.24171 7.20177 1.89351 8.58318 2.02842ZM8.68038 1.03316C10.292 1.19055 11.7993 1.90184 12.9453 3.04585C14.2587 4.35938 14.9976 6.14013 15 7.99764C15.0005 9.61695 14.4396 11.1864 13.4129 12.4385C12.3861 13.6907 10.9569 14.5482 9.36889 14.8648C7.78084 15.1815 6.13211 14.9378 4.70359 14.1752C3.27506 13.4127 2.1551 12.1784 1.53449 10.6828C0.913887 9.18708 0.831027 7.52251 1.30003 5.97259C1.76903 4.42268 2.76089 3.08331 4.10662 2.18265C5.45236 1.28199 7.06873 0.875761 8.68038 1.03316ZM5.52498 5L8.00004 7.47506L10.4751 5L11.1822 5.70711L8.70714 8.18217L11.1818 10.6569L10.4747 11.364L8.00004 8.88927L5.52535 11.364L4.81824 10.6569L7.29293 8.18217L4.81787 5.70711L5.52498 5Z" fill="'),c2e=encodeURIComponent('"/></svg>'),f2e=encodeURIComponent('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.58318 2.02842C9.96435 2.16331 11.2561 2.77279 12.2383 3.75307C13.3643 4.87923 13.9978 6.40584 14 7.99829C14.0004 9.38617 13.5196 10.7313 12.6396 11.8045C11.7595 12.8778 10.5345 13.6127 9.17333 13.8841C7.81215 14.1556 6.39895 13.9467 5.1745 13.2931C3.95005 12.6394 2.99008 11.5815 2.45814 10.2995C1.92619 9.0175 1.85517 7.59072 2.25717 6.26222C2.65917 4.93373 3.50933 3.7857 4.66282 3.0137C5.8163 2.24171 7.20177 1.89351 8.58318 2.02842ZM8.68038 1.03316C10.292 1.19055 11.7993 1.90184 12.9453 3.04585C14.2587 4.35938 14.9976 6.14013 15 7.99764C15.0005 9.61695 14.4396 11.1864 13.4129 12.4385C12.3861 13.6907 10.9569 14.5482 9.36889 14.8648C7.78084 15.1815 6.13211 14.9378 4.70359 14.1752C3.27506 13.4127 2.1551 12.1784 1.53449 10.6828C0.913887 9.18708 0.831027 7.52251 1.30003 5.97259C1.76903 4.42268 2.76089 3.08331 4.10662 2.18265C5.45236 1.28199 7.06873 0.875761 8.68038 1.03316ZM5.52498 5L8.00004 7.47506L10.4751 5L11.1822 5.70711L8.70714 8.18217L11.1818 10.6569L10.4747 11.364L8.00004 8.88927L5.52535 11.364L4.81824 10.6569L7.29293 8.18217L4.81787 5.70711L5.52498 5Z" fill="'),h2e=encodeURIComponent('"/></svg>'),d2e=encodeURIComponent('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.12 13.9725L15 12.5L9.37927 2H7.61924L1.9985 12.5L2.87852 13.9725H14.12ZM2.87852 12.9725L8.49925 2.47249L14.12 12.9725H2.87852ZM7.98952 6H8.98802V10H7.98952V6ZM7.98952 11H8.98802V12H7.98952V11Z" fill="'),p2e=encodeURIComponent('"/></svg>'),g2e=encodeURIComponent('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.12 13.9725L15 12.5L9.37927 2H7.61924L1.9985 12.5L2.87852 13.9725H14.12ZM2.87852 12.9725L8.49925 2.47249L14.12 12.9725H2.87852ZM7.98952 6H8.98802V10H7.98952V6ZM7.98952 11H8.98802V12H7.98952V11Z" fill="'),v2e=encodeURIComponent('"/></svg>'),G9=encodeURIComponent('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 7.5C3 4.46243 5.46243 2 8.5 2C11.5376 2 14 4.46243 14 7.5C14 10.5376 11.5376 13 8.5 13C5.46243 13 3 10.5376 3 7.5ZM2 7.5C2 3.91015 4.91015 1 8.5 1C12.0899 1 15 3.91015 15 7.5C15 11.0899 12.0899 14 8.5 14C4.91015 14 2 11.0899 2 7.5ZM8 4V5H9V4H8ZM8 6L8 10H9L9 6H8Z" fill="'),Y9=encodeURIComponent('"/></svg>'),Z9=encodeURIComponent('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 7.5C3 4.46243 5.46243 2 8.5 2C11.5376 2 14 4.46243 14 7.5C14 10.5376 11.5376 13 8.5 13C5.46243 13 3 10.5376 3 7.5ZM2 7.5C2 3.91015 4.91015 1 8.5 1C12.0899 1 15 3.91015 15 7.5C15 11.0899 12.0899 14 8.5 14C4.91015 14 2 11.0899 2 7.5ZM8 4V5H9V4H8ZM8 6L8 10H9L9 6H8Z" fill="'),X9=encodeURIComponent('"/></svg>'),t0;(function(n){function e(r,i){switch(r){case Rn.Ignore:var o=i.type===Xl?Z.fromHex("#75BEFF"):Z.fromHex("#007ACC");return i.type===Xl?G9+encodeURIComponent(o.toString())+Y9:Z9+encodeURIComponent(o.toString())+X9;case Rn.Info:var s=i.type===Xl?Z.fromHex("#007ACC"):Z.fromHex("#75BEFF");return i.type===Xl?G9+encodeURIComponent(s.toString())+Y9:Z9+encodeURIComponent(s.toString())+X9;case Rn.Warning:var a=i.type===Xl?Z.fromHex("#DDB100"):Z.fromHex("#fc0");return i.type===Xl?d2e+encodeURIComponent(a.toString())+p2e:g2e+encodeURIComponent(a.toString())+v2e;case Rn.Error:var u=i.type===Xl?Z.fromHex("#A1260D"):Z.fromHex("#F48771");return i.type===Xl?l2e+encodeURIComponent(u.toString())+c2e:f2e+encodeURIComponent(u.toString())+h2e}return""}n.getSVGData=e;function t(r){switch(r){case Rn.Ignore:return"severity-icon severity-ignore";case Rn.Info:return"severity-icon severity-info";case Rn.Warning:return"severity-icon severity-warning";case Rn.Error:return"severity-icon severity-error"}return""}n.className=t})(t0||(t0={}));function wC(n,e){return"."+t0.className(n).split(" ").join(".")+' { background: url("data:image/svg+xml,'+t0.getSVGData(n,e)+'") center center no-repeat; height: 16px; width: 16px; }'}Xt(function(n,e){e.addRule(wC(Rn.Error,n)),e.addRule(wC(Rn.Warning,n)),e.addRule(wC(Rn.Info,n)),e.addRule(wC(Rn.Ignore,n))});var m2e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_2e=function(){function n(e,t,r){var i=this;this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=[],this._editor=t;var o=document.createElement("div");o.className="descriptioncontainer",o.setAttribute("aria-live","assertive"),o.setAttribute("role","alert"),this._messageBlock=document.createElement("div"),de(this._messageBlock,"message"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.push(Br(this._relatedBlock,"click",function(s){s.preventDefault();var a=i._relatedDiagnostics.get(s.target);a&&r(a)})),this._scrollable=new Y0(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.push(this._scrollable.onScroll(function(s){o.style.left="-"+s.scrollLeft+"px",o.style.top="-"+s.scrollTop+"px"})),this._disposables.push(this._scrollable)}return n.prototype.dispose=function(){Ue(this._disposables)},n.prototype.update=function(e){var t=e.source,r=e.message,i=e.relatedInformation,o=e.code,s=r.split(/\r\n|\r|\n/g);this._lines=s.length,this._longestLineLength=0;for(var a=0,u=s;a<u.length;a++){var l=u[a];this._longestLineLength=Math.max(l.length,this._longestLineLength)}ms(this._messageBlock),this._editor.applyFontInfo(this._messageBlock);for(var f=this._messageBlock,h=0,d=s;h<d.length;h++){var l=d[h];f=document.createElement("div"),f.innerText=l,l===""&&(f.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(f)}if(t||o){var g=document.createElement("span");if(de(g,"details"),f.appendChild(g),t){var v=document.createElement("span");v.innerText=t,de(v,"source"),g.appendChild(v)}if(o){var m=document.createElement("span");m.innerText="("+o+")",de(m,"code"),g.appendChild(m)}}if(ms(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),vo(i)){var y=this._relatedBlock.appendChild(document.createElement("div"));y.style.paddingTop=Math.floor(this._editor.getConfiguration().lineHeight*.66)+"px",this._lines+=1;for(var b=0,C=i;b<C.length;b++){var E=C[b],D=document.createElement("div"),k=document.createElement("a");de(k,"filename"),k.innerHTML=NQ(E.resource)+"("+E.startLineNumber+", "+E.startColumn+"): ",k.title=fFe(E.resource,void 0),this._relatedDiagnostics.set(k,E);var I=document.createElement("span");I.innerText=E.message,D.appendChild(k),D.appendChild(I),this._lines+=1,y.appendChild(D)}}var T=this._editor.getConfiguration().fontInfo,A=Math.ceil(T.typicalFullwidthCharacterWidth*this._longestLineLength*.75),M=T.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:A,scrollHeight:M})},n.prototype.layout=function(e,t){this._scrollable.getDomNode().style.height=e+"px",this._scrollable.getDomNode().style.width=t+"px",this._scrollable.setScrollDimensions({width:t,height:e})},n.prototype.getHeightInLines=function(){return Math.min(17,this._lines)},n}(),y2e=function(n){m2e(e,n);function e(t,r,i){var o=n.call(this,t,{showArrow:!0,showFrame:!0,isAccessible:!0})||this;return o.actions=r,o._themeService=i,o._callOnDispose=new De,o._onDidSelectRelatedInformation=new j,o.onDidSelectRelatedInformation=o._onDidSelectRelatedInformation.event,o._severity=hn.Warning,o._backgroundColor=Z.white,o._applyTheme(i.getTheme()),o._callOnDispose.add(i.onThemeChange(o._applyTheme.bind(o))),o.create(),o}return e.prototype._applyTheme=function(t){this._backgroundColor=t.getColor(S2e);var r=b2e;this._severity===hn.Warning?r=w2e:this._severity===hn.Info&&(r=C2e);var i=t.getColor(r);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:this._backgroundColor,primaryHeadingColor:t.getColor(FQ),secondaryHeadingColor:t.getColor(BQ)})},e.prototype._applyStyles=function(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),n.prototype._applyStyles.call(this)},e.prototype.dispose=function(){this._callOnDispose.dispose(),n.prototype.dispose.call(this)},e.prototype._fillHead=function(t){n.prototype._fillHead.call(this,t),this._actionbarWidget.push(this.actions,{label:!1,icon:!0})},e.prototype._fillTitleIcon=function(t){this._icon=ce(t,ke(""))},e.prototype._getActionBarOptions=function(){return{orientation:1}},e.prototype._fillBody=function(t){var r=this;this._parentContainer=t,de(t,"marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),t.appendChild(this._container),this._message=new _2e(this._container,this.editor,function(i){return r._onDidSelectRelatedInformation.fire(i)}),this._disposables.add(this._message)},e.prototype.show=function(t,r){throw new Error("call showAtMarker")},e.prototype.showAtMarker=function(t,r,i){this._container.classList.remove("stale"),this._message.update(t),this._severity=t.severity,this._applyTheme(this._themeService.getTheme());var o=R.lift(t),s=this.editor.getPosition(),a=s&&o.containsPosition(s)?s:o.getStartPosition();n.prototype.show.call(this,a,this.computeRequiredHeight());var u=this.editor.getModel();if(u){var l=i>1?S("problems","{0} of {1} problems",r,i):S("change","{0} of {1} problem",r,i);this.setTitle(El(u.uri),l)}this._icon.className=t0.className(hn.toSeverity(this._severity)),this.editor.revealPositionInCenter(a,0)},e.prototype.updateMarker=function(t){this._container.classList.remove("stale"),this._message.update(t)},e.prototype.showStale=function(){this._container.classList.add("stale"),this._relayout()},e.prototype._doLayoutBody=function(t,r){n.prototype._doLayoutBody.call(this,t,r),this._heightInPixel=t,this._message.layout(t,r),this._container.style.height=t+"px"},e.prototype._onWidth=function(t){this._message.layout(this._heightInPixel,t)},e.prototype._relayout=function(){n.prototype._relayout.call(this,this.computeRequiredHeight())},e.prototype.computeRequiredHeight=function(){return 3+this._message.getHeightInLines()},e}(TQ),dN=e2($Y,KY),pN=e2(fS,KF),gN=e2(hS,GF),b2e=G("editorMarkerNavigationError.background",{dark:dN,light:dN,hc:dN},S("editorMarkerNavigationError","Editor marker navigation widget error color.")),w2e=G("editorMarkerNavigationWarning.background",{dark:pN,light:pN,hc:pN},S("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),C2e=G("editorMarkerNavigationInfo.background",{dark:gN,light:gN,hc:gN},S("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),S2e=G("editorMarkerNavigation.background",{dark:"#2D2D30",light:Z.white,hc:"#0C141F"},S("editorMarkerNavigationBackground","Editor marker navigation widget background."));Xt(function(n,e){var t=n.getColor(yI);t&&e.addRule(".monaco-editor .marker-widget a { color: "+t+"; }")});var lb=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),E2e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},h_=function(n,e){return function(t,r){e(t,r,n)}},Q9=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},J9=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},I2e=function(){function n(e,t){var r=this;this._toUnbind=new De,this._editor=e,this._markers=[],this._nextIdx=-1,this._ignoreSelectionChange=!1,this._onCurrentMarkerChanged=new j,this._onMarkerSetChanged=new j,this.setMarkers(t),this._toUnbind.add(this._editor.onDidDispose(function(){return r.dispose()})),this._toUnbind.add(this._editor.onDidChangeCursorPosition(function(){r._ignoreSelectionChange||r.currentMarker&&r._editor.getPosition()&&R.containsPosition(r.currentMarker,r._editor.getPosition())||(r._nextIdx=-1)}))}return Object.defineProperty(n.prototype,"onCurrentMarkerChanged",{get:function(){return this._onCurrentMarkerChanged.event},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMarkerSetChanged",{get:function(){return this._onMarkerSetChanged.event},enumerable:!0,configurable:!0}),n.prototype.setMarkers=function(e){var t=this._nextIdx>=0?this._markers[this._nextIdx]:void 0;this._markers=e||[],this._markers.sort(iv.compareMarker),t?this._nextIdx=Math.max(-1,JE(this._markers,t,iv.compareMarker)):this._nextIdx=-1,this._onMarkerSetChanged.fire(this)},n.prototype.withoutWatchingEditorPosition=function(e){this._ignoreSelectionChange=!0;try{e()}finally{this._ignoreSelectionChange=!1}},n.prototype._initIdx=function(e){for(var t=!1,r=this._editor.getPosition(),i=0;i<this._markers.length;i++){var o=R.lift(this._markers[i]);if(o.isEmpty()&&this._editor.getModel()){var s=this._editor.getModel().getWordAtPosition(o.getStartPosition());s&&(o=new R(o.startLineNumber,s.startColumn,o.startLineNumber,s.endColumn))}if(r&&(o.containsPosition(r)||r.isBeforeOrEqual(o.getStartPosition()))){this._nextIdx=i,t=!0;break}}t||(this._nextIdx=e?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)},Object.defineProperty(n.prototype,"currentMarker",{get:function(){return this.canNavigate()?this._markers[this._nextIdx]:void 0},set:function(e){var t=this._nextIdx;this._nextIdx=-1,e&&(this._nextIdx=this.indexOf(e)),this._nextIdx!==t&&this._onCurrentMarkerChanged.fire(e)},enumerable:!0,configurable:!0}),n.prototype.move=function(e,t){if(!this.canNavigate())return this._onCurrentMarkerChanged.fire(void 0),!t;var r=this._nextIdx,i=!1;if(this._nextIdx===-1?this._initIdx(e):e?t||this._nextIdx+1<this._markers.length?this._nextIdx=(this._nextIdx+1)%this._markers.length:i=!0:e||(t||this._nextIdx>0?this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length:i=!0),r!==this._nextIdx){var o=this._markers[this._nextIdx];this._onCurrentMarkerChanged.fire(o)}return i},n.prototype.canNavigate=function(){return this._markers.length>0},n.prototype.findMarkerAtPosition=function(e){for(var t=0,r=this._markers;t<r.length;t++){var i=r[t];if(R.containsPosition(i,e))return i}},Object.defineProperty(n.prototype,"total",{get:function(){return this._markers.length},enumerable:!0,configurable:!0}),n.prototype.indexOf=function(e){return 1+this._markers.indexOf(e)},n.prototype.dispose=function(){this._toUnbind.dispose()},n}(),qI=function(){function n(e,t,r,i,o,s){this._markerService=t,this._contextKeyService=r,this._themeService=i,this._editorService=o,this._keybindingService=s,this._model=null,this._widget=null,this._disposeOnClose=new De,this._editor=e,this._widgetVisible=GQ.bindTo(this._contextKeyService)}return n.get=function(e){return e.getContribution(n.ID)},n.prototype.getId=function(){return n.ID},n.prototype.dispose=function(){this._cleanUp(),this._disposeOnClose.dispose()},n.prototype._cleanUp=function(){this._widgetVisible.reset(),this._disposeOnClose.clear(),this._widget=null,this._model=null},n.prototype.getOrCreateModel=function(){var e=this;if(this._model)return this._model;var t=this._getMarkers();this._model=new I2e(this._editor,t),this._markerService.onMarkerChanged(this._onMarkerChanged,this,this._disposeOnClose);var r=this._keybindingService.lookupKeybinding(u1.ID),i=this._keybindingService.lookupKeybinding(J_.ID),o=[new ds(u1.ID,u1.LABEL+(r?" ("+r.getLabel()+")":""),"show-previous-problem chevron-up",this._model.canNavigate(),function(){return Q9(e,void 0,void 0,function(){return J9(this,function(l){return this._model&&this._model.move(!1,!0),[2]})})}),new ds(J_.ID,J_.LABEL+(i?" ("+i.getLabel()+")":""),"show-next-problem chevron-down",this._model.canNavigate(),function(){return Q9(e,void 0,void 0,function(){return J9(this,function(l){return this._model&&this._model.move(!0,!0),[2]})})})];this._widget=new y2e(this._editor,o,this._themeService),this._widgetVisible.set(!0),this._widget.onDidClose(function(){return e._cleanUp()},this,this._disposeOnClose),this._disposeOnClose.add(this._model),this._disposeOnClose.add(this._widget);for(var s=0,a=o;s<a.length;s++){var u=a[s];this._disposeOnClose.add(u)}return this._disposeOnClose.add(this._widget.onDidSelectRelatedInformation(function(l){e._editorService.openCodeEditor({resource:l.resource,options:{pinned:!0,revealIfOpened:!0,selection:R.lift(l).collapseToStart()}},e._editor).then(void 0,Le),e.closeMarkersNavigation(!1)})),this._disposeOnClose.add(this._editor.onDidChangeModel(function(){return e._cleanUp()})),this._disposeOnClose.add(this._model.onCurrentMarkerChanged(function(l){!l||!e._model?e._cleanUp():e._model.withoutWatchingEditorPosition(function(){!e._widget||!e._model||e._widget.showAtMarker(l,e._model.indexOf(l),e._model.total)})})),this._disposeOnClose.add(this._model.onMarkerSetChanged(function(){if(!(!e._widget||!e._widget.position||!e._model)){var l=e._model.findMarkerAtPosition(e._widget.position);l?e._widget.updateMarker(l):e._widget.showStale()}})),this._model},n.prototype.closeMarkersNavigation=function(e){e===void 0&&(e=!0),this._cleanUp(),e&&this._editor.focus()},n.prototype.show=function(e){var t=this.getOrCreateModel();t.currentMarker=e},n.prototype._onMarkerChanged=function(e){var t=this._editor.getModel();t&&this._model&&e.some(function(r){return t.uri.toString()===r.toString()})&&this._model.setMarkers(this._getMarkers())},n.prototype._getMarkers=function(){var e=this._editor.getModel();return e?this._markerService.read({resource:e.uri,severities:hn.Error|hn.Warning|hn.Info}):[]},n.ID="editor.contrib.markerController",n=E2e([h_(1,ib),h_(2,rt),h_(3,Ir),h_(4,an),h_(5,er)],n),n}(),iv=function(n){lb(e,n);function e(t,r,i){var o=n.call(this,i)||this;return o._isNext=t,o._multiFile=r,o}return e.prototype.run=function(t,r){var i=this,o=t.get(ib),s=t.get(an),a=qI.get(r);if(!a)return Promise.resolve(void 0);var u=a.getOrCreateModel(),l=u.move(this._isNext,!this._multiFile);if(!l||!this._multiFile)return Promise.resolve(void 0);var f=o.read({severities:hn.Error|hn.Warning|hn.Info}).sort(e.compareMarker);if(f.length===0)return Promise.resolve(void 0);var h=r.getModel();if(!h)return Promise.resolve(void 0);var d=u.currentMarker||{resource:h.uri,severity:hn.Error,startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1},g=JE(f,d,e.compareMarker);g<0?(g=~g,g%=f.length):this._isNext?g=(g+1)%f.length:g=(g+f.length-1)%f.length;var v=f[g];return v.resource.toString()===h.uri.toString()?(u.move(this._isNext,!0),Promise.resolve(void 0)):(a.closeMarkersNavigation(),s.openCodeEditor({resource:v.resource,options:{pinned:!1,revealIfOpened:!0,revealInCenterIfOutsideViewport:!0,selection:v}},r).then(function(m){if(m)return m.getAction(i.id).run()}))},e.compareMarker=function(t,r){var i=SG(t.resource.toString(),r.resource.toString());return i===0&&(i=hn.compare(t.severity,r.severity)),i===0&&(i=R.compareRangesUsingStarts(t,r)),i},e}(Ne),J_=function(n){lb(e,n);function e(){return n.call(this,!0,!1,{id:e.ID,label:e.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:578,weight:100}})||this}return e.ID="editor.action.marker.next",e.LABEL=S("markerAction.next.label","Go to Next Problem (Error, Warning, Info)"),e}(iv),u1=function(n){lb(e,n);function e(){return n.call(this,!1,!1,{id:e.ID,label:e.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:1602,weight:100}})||this}return e.ID="editor.action.marker.prev",e.LABEL=S("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)"),e}(iv),x2e=function(n){lb(e,n);function e(){return n.call(this,!0,!0,{id:"editor.action.marker.nextInFiles",label:S("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:P.writable,kbOpts:{kbExpr:P.focus,primary:66,weight:100}})||this}return e}(iv),D2e=function(n){lb(e,n);function e(){return n.call(this,!1,!0,{id:"editor.action.marker.prevInFiles",label:S("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:P.writable,kbOpts:{kbExpr:P.focus,primary:1090,weight:100}})||this}return e}(iv);tn(qI);re(J_);re(u1);re(x2e);re(D2e);var GQ=new Re("markersNavigationVisible",!1),L2e=$i.bindToContribution(qI.get);ee(new L2e({id:"closeMarkersNavigation",precondition:GQ,handler:function(n){return n.closeMarkersNavigation()},kbOpts:{weight:150,kbExpr:P.focus,primary:9,secondary:[1033]}}));Ta.appendMenuItem(16,{group:"6_problem_nav",command:{id:"editor.action.marker.nextInFiles",title:S({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem")},order:1});Ta.appendMenuItem(16,{group:"6_problem_nav",command:{id:"editor.action.marker.prevInFiles",title:S({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem")},order:2});var k2e=function(){function n(e,t,r){this.presentationIndex=r,this._onColorFlushed=new j,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new j,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new j,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}return Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"presentation",{get:function(){return this.colorPresentations[this.presentationIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"colorPresentations",{get:function(){return this._colorPresentations},set:function(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)},enumerable:!0,configurable:!0}),n.prototype.selectNextColorPresentation=function(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)},n.prototype.guessColorPresentation=function(e,t){for(var r=0;r<this.colorPresentations.length;r++)if(t===this.colorPresentations[r].label){this.presentationIndex=r,this._onDidChangePresentation.fire(this.presentation);break}},n.prototype.flushColor=function(){this._onColorFlushed.fire(this._color)},n}(),$d=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hu=ke,T2e=function(n){$d(e,n);function e(t,r,i){var o=n.call(this)||this;o.model=r,o.domNode=hu(".colorpicker-header"),ce(t,o.domNode),o.pickedColorNode=ce(o.domNode,hu(".picked-color"));var s=ce(o.domNode,hu(".original-color"));return s.style.backgroundColor=Z.Format.CSS.format(o.model.originalColor),o.backgroundColor=i.getTheme().getColor(gd)||Z.white,o._register(Xt(function(a,u){o.backgroundColor=a.getColor(gd)||Z.white})),o._register(ie(o.pickedColorNode,Ye.CLICK,function(){return o.model.selectNextColorPresentation()})),o._register(ie(s,Ye.CLICK,function(){o.model.color=o.model.originalColor,o.model.flushColor()})),o._register(r.onDidChangeColor(o.onDidChangeColor,o)),o._register(r.onDidChangePresentation(o.onDidChangePresentation,o)),o.pickedColorNode.style.backgroundColor=Z.Format.CSS.format(r.color),vt(o.pickedColorNode,"light",r.color.rgba.a<.5?o.backgroundColor.isLighter():r.color.isLighter()),o}return e.prototype.onDidChangeColor=function(t){this.pickedColorNode.style.backgroundColor=Z.Format.CSS.format(t),vt(this.pickedColorNode,"light",t.rgba.a<.5?this.backgroundColor.isLighter():t.isLighter()),this.onDidChangePresentation()},e.prototype.onDidChangePresentation=function(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:""},e}(te),N2e=function(n){$d(e,n);function e(t,r,i){var o=n.call(this)||this;return o.model=r,o.pixelRatio=i,o.domNode=hu(".colorpicker-body"),ce(t,o.domNode),o.saturationBox=new A2e(o.domNode,o.model,o.pixelRatio),o._register(o.saturationBox),o._register(o.saturationBox.onDidChange(o.onDidSaturationValueChange,o)),o._register(o.saturationBox.onColorFlushed(o.flushColor,o)),o.opacityStrip=new O2e(o.domNode,o.model),o._register(o.opacityStrip),o._register(o.opacityStrip.onDidChange(o.onDidOpacityChange,o)),o._register(o.opacityStrip.onColorFlushed(o.flushColor,o)),o.hueStrip=new R2e(o.domNode,o.model),o._register(o.hueStrip),o._register(o.hueStrip.onDidChange(o.onDidHueChange,o)),o._register(o.hueStrip.onColorFlushed(o.flushColor,o)),o}return e.prototype.flushColor=function(){this.model.flushColor()},e.prototype.onDidSaturationValueChange=function(t){var r=t.s,i=t.v,o=this.model.color.hsva;this.model.color=new Z(new xc(o.h,r,i,o.a))},e.prototype.onDidOpacityChange=function(t){var r=this.model.color.hsva;this.model.color=new Z(new xc(r.h,r.s,r.v,t))},e.prototype.onDidHueChange=function(t){var r=this.model.color.hsva,i=(1-t)*360;this.model.color=new Z(new xc(i===360?0:i,r.s,r.v,r.a))},e.prototype.layout=function(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()},e}(te),A2e=function(n){$d(e,n);function e(t,r,i){var o=n.call(this)||this;return o.model=r,o.pixelRatio=i,o._onDidChange=new j,o.onDidChange=o._onDidChange.event,o._onColorFlushed=new j,o.onColorFlushed=o._onColorFlushed.event,o.domNode=hu(".saturation-wrap"),ce(t,o.domNode),o.canvas=document.createElement("canvas"),o.canvas.className="saturation-box",ce(o.domNode,o.canvas),o.selection=hu(".saturation-selection"),ce(o.domNode,o.selection),o.layout(),o._register(ie(o.domNode,Ye.MOUSE_DOWN,function(s){return o.onMouseDown(s)})),o._register(o.model.onDidChangeColor(o.onDidChangeColor,o)),o.monitor=null,o}return e.prototype.onMouseDown=function(t){var r=this;this.monitor=this._register(new Pd);var i=Wr(this.domNode);t.target!==this.selection&&this.onDidChangePosition(t.offsetX,t.offsetY),this.monitor.startMonitoring(Wv,function(s){return r.onDidChangePosition(s.posx-i.left,s.posy-i.top)},function(){return null});var o=ie(document,Ye.MOUSE_UP,function(){r._onColorFlushed.fire(),o.dispose(),r.monitor&&(r.monitor.stopMonitoring(!0),r.monitor=null)},!0)},e.prototype.onDidChangePosition=function(t,r){var i=Math.max(0,Math.min(1,t/this.width)),o=Math.max(0,Math.min(1,1-r/this.height));this.paintSelection(i,o),this._onDidChange.fire({s:i,v:o})},e.prototype.layout=function(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();var t=this.model.color.hsva;this.paintSelection(t.s,t.v)},e.prototype.paint=function(){var t=this.model.color.hsva,r=new Z(new xc(t.h,1,1,1)),i=this.canvas.getContext("2d"),o=i.createLinearGradient(0,0,this.canvas.width,0);o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),o.addColorStop(1,"rgba(255, 255, 255, 0)");var s=i.createLinearGradient(0,0,0,this.canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this.canvas.width,this.canvas.height),i.fillStyle=Z.Format.CSS.format(r),i.fill(),i.fillStyle=o,i.fill(),i.fillStyle=s,i.fill()},e.prototype.paintSelection=function(t,r){this.selection.style.left=t*this.width+"px",this.selection.style.top=this.height-r*this.height+"px"},e.prototype.onDidChangeColor=function(){this.monitor&&this.monitor.isMonitoring()||this.paint()},e}(te),YQ=function(n){$d(e,n);function e(t,r){var i=n.call(this)||this;return i.model=r,i._onDidChange=new j,i.onDidChange=i._onDidChange.event,i._onColorFlushed=new j,i.onColorFlushed=i._onColorFlushed.event,i.domNode=ce(t,hu(".strip")),i.overlay=ce(i.domNode,hu(".overlay")),i.slider=ce(i.domNode,hu(".slider")),i.slider.style.top="0px",i._register(ie(i.domNode,Ye.MOUSE_DOWN,function(o){return i.onMouseDown(o)})),i.layout(),i}return e.prototype.layout=function(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;var t=this.getValue(this.model.color);this.updateSliderPosition(t)},e.prototype.onMouseDown=function(t){var r=this,i=this._register(new Pd),o=Wr(this.domNode);de(this.domNode,"grabbing"),t.target!==this.slider&&this.onDidChangeTop(t.offsetY),i.startMonitoring(Wv,function(a){return r.onDidChangeTop(a.posy-o.top)},function(){return null});var s=ie(document,Ye.MOUSE_UP,function(){r._onColorFlushed.fire(),s.dispose(),i.stopMonitoring(!0),qe(r.domNode,"grabbing")},!0)},e.prototype.onDidChangeTop=function(t){var r=Math.max(0,Math.min(1,1-t/this.height));this.updateSliderPosition(r),this._onDidChange.fire(r)},e.prototype.updateSliderPosition=function(t){this.slider.style.top=(1-t)*this.height+"px"},e}(te),O2e=function(n){$d(e,n);function e(t,r){var i=n.call(this,t,r)||this;return de(i.domNode,"opacity-strip"),i._register(r.onDidChangeColor(i.onDidChangeColor,i)),i.onDidChangeColor(i.model.color),i}return e.prototype.onDidChangeColor=function(t){var r=t.rgba,i=r.r,o=r.g,s=r.b,a=new Z(new Jt(i,o,s,1)),u=new Z(new Jt(i,o,s,0));this.overlay.style.background="linear-gradient(to bottom, "+a+" 0%, "+u+" 100%)"},e.prototype.getValue=function(t){return t.hsva.a},e}(YQ),R2e=function(n){$d(e,n);function e(t,r){var i=n.call(this,t,r)||this;return de(i.domNode,"hue-strip"),i}return e.prototype.getValue=function(t){return 1-t.hsva.h/360},e}(YQ),M2e=function(n){$d(e,n);function e(t,r,i,o){var s=n.call(this)||this;s.model=r,s.pixelRatio=i,s._register(lG(function(){return s.layout()}));var a=hu(".colorpicker-widget");t.appendChild(a);var u=new T2e(a,s.model,o);return s.body=new N2e(a,s.model,s.pixelRatio),s._register(u),s._register(s.body),s}return e.prototype.layout=function(){this.body.layout()},e}(bo);function ZQ(n,e,t){var r=Fy.ordered(n),i=r.map(function(o){return Promise.resolve(o.provideHover(n,e,t)).then(function(s){return s&&P2e(s)?s:void 0},function(s){ji(s)})});return Promise.all(i).then(Ol)}Ra("_executeHoverProvider",function(n,e){return ZQ(n,e,Ft.None)});function P2e(n){var e=typeof n.range<"u",t=typeof n.contents<"u"&&n.contents&&n.contents.length>0;return e&&t}var XQ=function(){function n(e,t,r,i,o){var s=this;this._computer=e,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new hr(function(){return s._triggerAsyncComputation()},0),this._secondWaitScheduler=new hr(function(){return s._triggerSyncComputation()},0),this._loadingMessageScheduler=new hr(function(){return s._showLoadingMessage()},0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=r,this._progressCallback=i}return n.prototype.setHoverTime=function(e){this._hoverTime=e},n.prototype._firstWaitTime=function(){return this._hoverTime/2},n.prototype._secondWaitTime=function(){return this._hoverTime/2},n.prototype._loadingMessageTime=function(){return 3*this._hoverTime},n.prototype._triggerAsyncComputation=function(){var e=this;this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=Cr(function(t){return e._computer.computeAsync(t)}),this._asyncComputationPromise.then(function(t){e._asyncComputationPromiseDone=!0,e._withAsyncResult(t)},function(t){return e._onError(t)})):this._asyncComputationPromiseDone=!0},n.prototype._triggerSyncComputation=function(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))},n.prototype._showLoadingMessage=function(){this._state===3&&this._onProgress(this._computer.getResultWithLoadingMessage())},n.prototype._withAsyncResult=function(e){e&&this._computer.onResult(e,!1),this._state===3&&(this._state=0,this._onComplete(this._computer.getResult()))},n.prototype._onComplete=function(e){this._completeCallback&&this._completeCallback(e)},n.prototype._onError=function(e){this._errorCallback?this._errorCallback(e):Le(e)},n.prototype._onProgress=function(e){this._progressCallback&&this._progressCallback(e)},n.prototype.start=function(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}},n.prototype.cancel=function(){this._loadingMessageScheduler.cancel(),this._state===1&&this._firstWaitScheduler.cancel(),this._state===2&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),this._state===3&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0},n}(),QQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),F2e=function(n){QQ(e,n);function e(t,r){var i=n.call(this)||this;return i.allowEditorOverflow=!0,i._id=t,i._editor=r,i._isVisible=!1,i._stoleFocus=!1,i._containerDomNode=document.createElement("div"),i._containerDomNode.className="monaco-editor-hover hidden",i._containerDomNode.tabIndex=0,i._domNode=document.createElement("div"),i._domNode.className="monaco-editor-hover-content",i.scrollbar=new Z0(i._domNode,{}),i._register(i.scrollbar),i._containerDomNode.appendChild(i.scrollbar.getDomNode()),i.onkeydown(i._containerDomNode,function(o){o.equals(9)&&i.hide()}),i._register(i._editor.onDidChangeConfiguration(function(o){o.fontInfo&&i.updateFont()})),i._editor.onDidLayoutChange(function(o){return i.layout()}),i.layout(),i._editor.addContentWidget(i),i._showAtPosition=null,i._showAtRange=null,i._stoleFocus=!1,i}return Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){this._isVisible=t,vt(this._containerDomNode,"hidden",!this._isVisible)},enumerable:!0,configurable:!0}),e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._containerDomNode},e.prototype.showAt=function(t,r,i){this._showAtPosition=t,this._showAtRange=r,this.isVisible=!0,this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=i,i&&this._containerDomNode.focus()},e.prototype.hide=function(){this.isVisible&&(this.isVisible=!1,this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus())},e.prototype.getPosition=function(){return this.isVisible?{position:this._showAtPosition,range:this._showAtRange,preference:[1,2]}:null},e.prototype.dispose=function(){this._editor.removeContentWidget(this),n.prototype.dispose.call(this)},e.prototype.updateFont=function(){var t=this,r=Array.prototype.slice.call(this._domNode.getElementsByClassName("code"));r.forEach(function(i){return t._editor.applyFontInfo(i)})},e.prototype.updateContents=function(t){this._domNode.textContent="",this._domNode.appendChild(t),this.updateFont(),this._editor.layoutContentWidget(this),this.onContentsChange()},e.prototype.onContentsChange=function(){this.scrollbar.scanDomNode()},e.prototype.layout=function(){var t=Math.max(this._editor.getLayoutInfo().height/4,250),r=this._editor.getConfiguration().fontInfo,i=r.fontSize,o=r.lineHeight;this._domNode.style.fontSize=i+"px",this._domNode.style.lineHeight=o+"px",this._domNode.style.maxHeight=t+"px",this._domNode.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px"},e}(bo),B2e=function(n){QQ(e,n);function e(t,r){var i=n.call(this)||this;return i._id=t,i._editor=r,i._isVisible=!1,i._domNode=document.createElement("div"),i._domNode.className="monaco-editor-hover hidden",i._domNode.setAttribute("aria-hidden","true"),i._domNode.setAttribute("role","presentation"),i._showAtLineNumber=-1,i._register(i._editor.onDidChangeConfiguration(function(o){o.fontInfo&&i.updateFont()})),i._editor.addOverlayWidget(i),i}return Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){this._isVisible=t,vt(this._domNode,"hidden",!this._isVisible)},enumerable:!0,configurable:!0}),e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.showAt=function(t){this._showAtLineNumber=t,this.isVisible||(this.isVisible=!0);var r=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(this._showAtLineNumber),o=this._editor.getScrollTop(),s=this._editor.getConfiguration().lineHeight,a=this._domNode.clientHeight,u=i-o-(a-s)/2;this._domNode.style.left=r.glyphMarginLeft+r.glyphMarginWidth+"px",this._domNode.style.top=Math.max(Math.round(u),0)+"px"},e.prototype.hide=function(){this.isVisible&&(this.isVisible=!1)},e.prototype.getPosition=function(){return null},e.prototype.dispose=function(){this._editor.removeOverlayWidget(this),n.prototype.dispose.call(this)},e.prototype.updateFont=function(){var t=this,r=Array.prototype.slice.call(this._domNode.getElementsByTagName("code")),i=Array.prototype.slice.call(this._domNode.getElementsByClassName("code"));r.concat(i).forEach(function(o){return t._editor.applyFontInfo(o)})},e.prototype.updateContents=function(t){this._domNode.textContent="",this._domNode.appendChild(t),this.updateFont()},e}(bo),Pu;(function(n){var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:y,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:y,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:y,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};e._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,e._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,e.def=h(e.def).replace("label",e._label).replace("title",e._title).getRegex(),e.bullet=/(?:[*+-]|\d{1,9}\.)/,e.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,e.item=h(e.item,"gm").replace(/bull/g,e.bullet).getRegex(),e.list=h(e.list).replace(/bull/g,e.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+e.def.source+")").getRegex(),e._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",e._comment=/<!--(?!-?>)[\s\S]*?-->/,e.html=h(e.html,"i").replace("comment",e._comment).replace("tag",e._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),e.paragraph=h(e.paragraph).replace("hr",e.hr).replace("heading",e.heading).replace("lheading",e.lheading).replace("tag",e._tag).getRegex(),e.blockquote=h(e.blockquote).replace("paragraph",e.paragraph).getRegex(),e.normal=b({},e),e.gfm=b({},e.normal,{fences:/^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),e.gfm.paragraph=h(e.paragraph).replace("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|"+e.list.source.replace("\\1","\\3")+"|").getRegex(),e.tables=b({},e.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),e.pedantic=b({},e.normal,{html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",e._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/});function t(I){this.tokens=[],this.tokens.links=Object.create(null),this.options=I||k.defaults,this.rules=e.normal,this.options.pedantic?this.rules=e.pedantic:this.options.gfm&&(this.options.tables?this.rules=e.tables:this.rules=e.gfm)}t.rules=e,t.lex=function(I,T){var A=new t(T);return A.lex(I)},t.prototype.lex=function(I){return I=I.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,`
`),this.token(I,!0)},t.prototype.token=function(I,T){I=I.replace(/^ +$/gm,"");for(var A,M,L,F,W,z,K,X,se,we,ae,Dt,At,$n,pr,yn;I;){if((L=this.rules.newline.exec(I))&&(I=I.substring(L[0].length),L[0].length>1&&this.tokens.push({type:"space"})),L=this.rules.code.exec(I)){I=I.substring(L[0].length),L=L[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?L:E(L,`
`)});continue}if(L=this.rules.fences.exec(I)){I=I.substring(L[0].length),this.tokens.push({type:"code",lang:L[2]?L[2].trim():L[2],text:L[3]||""});continue}if(L=this.rules.heading.exec(I)){I=I.substring(L[0].length),this.tokens.push({type:"heading",depth:L[1].length,text:L[2]});continue}if((L=this.rules.nptable.exec(I))&&(z={type:"table",header:C(L[1].replace(/^ *| *\| *$/g,"")),align:L[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:L[3]?L[3].replace(/\n$/,"").split(`
`):[]},z.header.length===z.align.length)){for(I=I.substring(L[0].length),ae=0;ae<z.align.length;ae++)/^ *-+: *$/.test(z.align[ae])?z.align[ae]="right":/^ *:-+: *$/.test(z.align[ae])?z.align[ae]="center":/^ *:-+ *$/.test(z.align[ae])?z.align[ae]="left":z.align[ae]=null;for(ae=0;ae<z.cells.length;ae++)z.cells[ae]=C(z.cells[ae],z.header.length);this.tokens.push(z);continue}if(L=this.rules.hr.exec(I)){I=I.substring(L[0].length),this.tokens.push({type:"hr"});continue}if(L=this.rules.blockquote.exec(I)){I=I.substring(L[0].length),this.tokens.push({type:"blockquote_start"}),L=L[0].replace(/^ *> ?/gm,""),this.token(L,T),this.tokens.push({type:"blockquote_end"});continue}if(L=this.rules.list.exec(I)){for(I=I.substring(L[0].length),F=L[2],$n=F.length>1,K={type:"list_start",ordered:$n,start:$n?+F:"",loose:!1},this.tokens.push(K),L=L[0].match(this.rules.item),X=[],A=!1,At=L.length,ae=0;ae<At;ae++)z=L[ae],we=z.length,z=z.replace(/^ *([*+-]|\d+\.) */,""),~z.indexOf(`
 `)&&(we-=z.length,z=this.options.pedantic?z.replace(/^ {1,4}/gm,""):z.replace(new RegExp("^ {1,"+we+"}","gm"),"")),ae!==At-1&&(W=e.bullet.exec(L[ae+1])[0],(F.length>1?W.length===1:W.length>1||this.options.smartLists&&W!==F)&&(I=L.slice(ae+1).join(`
`)+I,ae=At-1)),M=A||/\n\n(?!\s*$)/.test(z),ae!==At-1&&(A=z.charAt(z.length-1)===`
`,M||(M=A)),M&&(K.loose=!0),pr=/^\[[ xX]\] /.test(z),yn=void 0,pr&&(yn=z[1]!==" ",z=z.replace(/^\[[ xX]\] +/,"")),se={type:"list_item_start",task:pr,checked:yn,loose:M},X.push(se),this.tokens.push(se),this.token(z,!1),this.tokens.push({type:"list_item_end"});if(K.loose)for(At=X.length,ae=0;ae<At;ae++)X[ae].loose=!0;this.tokens.push({type:"list_end"});continue}if(L=this.rules.html.exec(I)){I=I.substring(L[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(L[1]==="pre"||L[1]==="script"||L[1]==="style"),text:L[0]});continue}if(T&&(L=this.rules.def.exec(I))){I=I.substring(L[0].length),L[3]&&(L[3]=L[3].substring(1,L[3].length-1)),Dt=L[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[Dt]||(this.tokens.links[Dt]={href:L[2],title:L[3]});continue}if((L=this.rules.table.exec(I))&&(z={type:"table",header:C(L[1].replace(/^ *| *\| *$/g,"")),align:L[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:L[3]?L[3].replace(/\n$/,"").split(`
`):[]},z.header.length===z.align.length)){for(I=I.substring(L[0].length),ae=0;ae<z.align.length;ae++)/^ *-+: *$/.test(z.align[ae])?z.align[ae]="right":/^ *:-+: *$/.test(z.align[ae])?z.align[ae]="center":/^ *:-+ *$/.test(z.align[ae])?z.align[ae]="left":z.align[ae]=null;for(ae=0;ae<z.cells.length;ae++)z.cells[ae]=C(z.cells[ae].replace(/^ *\| *| *\| *$/g,""),z.header.length);this.tokens.push(z);continue}if(L=this.rules.lheading.exec(I)){I=I.substring(L[0].length),this.tokens.push({type:"heading",depth:L[2]==="="?1:2,text:L[1]});continue}if(T&&(L=this.rules.paragraph.exec(I))){I=I.substring(L[0].length),this.tokens.push({type:"paragraph",text:L[1].charAt(L[1].length-1)===`
`?L[1].slice(0,-1):L[1]});continue}if(L=this.rules.text.exec(I)){I=I.substring(L[0].length),this.tokens.push({type:"text",text:L[0]});continue}if(I)throw new Error("Infinite loop on byte: "+I.charCodeAt(0))}return this.tokens};var r={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:y,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:y,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};r._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,r.em=h(r.em).replace(/punctuation/g,r._punctuation).getRegex(),r._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=h(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,r.tag=h(r.tag).replace("comment",e._comment).replace("attribute",r._attribute).getRegex(),r._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|`(?!`)|[^\[\]\\`])*?/,r._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/,r._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,r.link=h(r.link).replace("label",r._label).replace("href",r._href).replace("title",r._title).getRegex(),r.reflink=h(r.reflink).replace("label",r._label).getRegex(),r.normal=b({},r),r.pedantic=b({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",r._label).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",r._label).getRegex()}),r.gfm=b({},r.normal,{escape:h(r.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),r.gfm.url=h(r.gfm.url,"i").replace("email",r.gfm._extended_email).getRegex(),r.breaks=b({},r.gfm,{br:h(r.br).replace("{2,}","*").getRegex(),text:h(r.gfm.text).replace(/\{2,\}/g,"*").getRegex()});function i(I,T){if(this.options=T||k.defaults,this.links=I,this.rules=r.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=r.pedantic:this.options.gfm&&(this.options.breaks?this.rules=r.breaks:this.rules=r.gfm)}i.rules=r,i.output=function(I,T,A){var M=new i(T,A);return M.output(I)},i.prototype.output=function(I){for(var T="",A,M,L,F,W,z;I;){if(W=this.rules.escape.exec(I)){I=I.substring(W[0].length),T+=l(W[1]);continue}if(W=this.rules.tag.exec(I)){!this.inLink&&/^<a /i.test(W[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(W[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(W[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(W[0])&&(this.inRawBlock=!1),I=I.substring(W[0].length),T+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(W[0]):l(W[0]):W[0];continue}if(W=this.rules.link.exec(I)){var K=D(W[2],"()");if(K>-1){var X=W[0].length-(W[2].length-K)-(W[3]||"").length;W[2]=W[2].substring(0,K),W[0]=W[0].substring(0,X).trim(),W[3]=""}I=I.substring(W[0].length),this.inLink=!0,L=W[2],this.options.pedantic?(A=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(L),A?(L=A[1],F=A[3]):F=""):F=W[3]?W[3].slice(1,-1):"",L=L.trim().replace(/^<([\s\S]*)>$/,"$1"),T+=this.outputLink(W,{href:i.escapes(L),title:i.escapes(F)}),this.inLink=!1;continue}if((W=this.rules.reflink.exec(I))||(W=this.rules.nolink.exec(I))){if(I=I.substring(W[0].length),A=(W[2]||W[1]).replace(/\s+/g," "),A=this.links[A.toLowerCase()],!A||!A.href){T+=W[0].charAt(0),I=W[0].substring(1)+I;continue}this.inLink=!0,T+=this.outputLink(W,A),this.inLink=!1;continue}if(W=this.rules.strong.exec(I)){I=I.substring(W[0].length),T+=this.renderer.strong(this.output(W[4]||W[3]||W[2]||W[1]));continue}if(W=this.rules.em.exec(I)){I=I.substring(W[0].length),T+=this.renderer.em(this.output(W[6]||W[5]||W[4]||W[3]||W[2]||W[1]));continue}if(W=this.rules.code.exec(I)){I=I.substring(W[0].length),T+=this.renderer.codespan(l(W[2].trim(),!0));continue}if(W=this.rules.br.exec(I)){I=I.substring(W[0].length),T+=this.renderer.br();continue}if(W=this.rules.del.exec(I)){I=I.substring(W[0].length),T+=this.renderer.del(this.output(W[1]));continue}if(W=this.rules.autolink.exec(I)){I=I.substring(W[0].length),W[2]==="@"?(M=l(this.mangle(W[1])),L="mailto:"+M):(M=l(W[1]),L=M),T+=this.renderer.link(L,null,M);continue}if(!this.inLink&&(W=this.rules.url.exec(I))){if(W[2]==="@")M=l(W[0]),L="mailto:"+M;else{do z=W[0],W[0]=this.rules._backpedal.exec(W[0])[0];while(z!==W[0]);M=l(W[0]),W[1]==="www."?L="http://"+M:L=M}I=I.substring(W[0].length),T+=this.renderer.link(L,null,M);continue}if(W=this.rules.text.exec(I)){I=I.substring(W[0].length),this.inRawBlock?T+=this.renderer.text(W[0]):T+=this.renderer.text(l(this.smartypants(W[0])));continue}if(I)throw new Error("Infinite loop on byte: "+I.charCodeAt(0))}return T},i.escapes=function(I){return I&&I.replace(i.rules._escapes,"$1")},i.prototype.outputLink=function(I,T){var A=T.href,M=T.title?l(T.title):null;return I[0].charAt(0)!=="!"?this.renderer.link(A,M,this.output(I[1])):this.renderer.image(A,M,l(I[1]))},i.prototype.smartypants=function(I){return this.options.smartypants?I.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):I},i.prototype.mangle=function(I){if(!this.options.mangle)return I;for(var T="",A=I.length,M=0,L;M<A;M++)L=I.charCodeAt(M),Math.random()>.5&&(L="x"+L.toString(16)),T+="&#"+L+";";return T};function o(I){this.options=I||k.defaults}o.prototype.code=function(I,T,A){var M=(T||"").match(/\S*/)[0];if(this.options.highlight){var L=this.options.highlight(I,M);L!=null&&L!==I&&(A=!0,I=L)}return M?'<pre><code class="'+this.options.langPrefix+l(M,!0)+'">'+(A?I:l(I,!0))+`</code></pre>
`:"<pre><code>"+(A?I:l(I,!0))+"</code></pre>"},o.prototype.blockquote=function(I){return`<blockquote>
`+I+`</blockquote>
`},o.prototype.html=function(I){return I},o.prototype.heading=function(I,T,A,M){return this.options.headerIds?"<h"+T+' id="'+this.options.headerPrefix+M.slug(A)+'">'+I+"</h"+T+`>
`:"<h"+T+">"+I+"</h"+T+`>
`},o.prototype.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},o.prototype.list=function(I,T,A){var M=T?"ol":"ul",L=T&&A!==1?' start="'+A+'"':"";return"<"+M+L+`>
`+I+"</"+M+`>
`},o.prototype.listitem=function(I){return"<li>"+I+`</li>
`},o.prototype.checkbox=function(I){return"<input "+(I?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},o.prototype.paragraph=function(I){return"<p>"+I+`</p>
`},o.prototype.table=function(I,T){return T&&(T="<tbody>"+T+"</tbody>"),`<table>
<thead>
`+I+`</thead>
`+T+`</table>
`},o.prototype.tablerow=function(I){return`<tr>
`+I+`</tr>
`},o.prototype.tablecell=function(I,T){var A=T.header?"th":"td",M=T.align?"<"+A+' align="'+T.align+'">':"<"+A+">";return M+I+"</"+A+`>
`},o.prototype.strong=function(I){return"<strong>"+I+"</strong>"},o.prototype.em=function(I){return"<em>"+I+"</em>"},o.prototype.codespan=function(I){return"<code>"+I+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(I){return"<del>"+I+"</del>"},o.prototype.link=function(I,T,A){if(I=d(this.options.sanitize,this.options.baseUrl,I),I===null)return A;var M='<a href="'+l(I)+'"';return T&&(M+=' title="'+T+'"'),M+=">"+A+"</a>",M},o.prototype.image=function(I,T,A){if(I=d(this.options.sanitize,this.options.baseUrl,I),I===null)return A;var M='<img src="'+I+'" alt="'+A+'"';return T&&(M+=' title="'+T+'"'),M+=this.options.xhtml?"/>":">",M},o.prototype.text=function(I){return I};function s(){}s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(I){return I},s.prototype.link=s.prototype.image=function(I,T,A){return""+A},s.prototype.br=function(){return""};function a(I){this.tokens=[],this.token=null,this.options=I||k.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new u}a.parse=function(I,T){var A=new a(T);return A.parse(I)},a.prototype.parse=function(I){this.inline=new i(I.links,this.options),this.inlineText=new i(I.links,b({},this.options,{renderer:new s})),this.tokens=I.reverse();for(var T="";this.next();)T+=this.tok();return T},a.prototype.next=function(){return this.token=this.tokens.pop()},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var I=this.token.text;this.peek().type==="text";)I+=`
`+this.next().text;return this.inline.output(I)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,f(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{var I="",T="",A,M,L,F;for(L="",A=0;A<this.token.header.length;A++)L+=this.renderer.tablecell(this.inline.output(this.token.header[A]),{header:!0,align:this.token.align[A]});for(I+=this.renderer.tablerow(L),A=0;A<this.token.cells.length;A++){for(M=this.token.cells[A],L="",F=0;F<M.length;F++)L+=this.renderer.tablecell(this.inline.output(M[F]),{header:!1,align:this.token.align[F]});T+=this.renderer.tablerow(L)}return this.renderer.table(I,T)}case"blockquote_start":{for(T="";this.next().type!=="blockquote_end";)T+=this.tok();return this.renderer.blockquote(T)}case"list_start":{T="";for(var W=this.token.ordered,z=this.token.start;this.next().type!=="list_end";)T+=this.tok();return this.renderer.list(T,W,z)}case"list_item_start":{T="";var K=this.token.loose,X=this.token.checked,se=this.token.task;for(this.token.task&&(T+=this.renderer.checkbox(X));this.next().type!=="list_item_end";)T+=!K&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(T,se,X)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{var we='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log(we);else throw new Error(we)}}};function u(){this.seen={}}u.prototype.slug=function(I){var T=I.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(T)){var A=T;do this.seen[A]++,T=A+"-"+this.seen[A];while(this.seen.hasOwnProperty(T))}return this.seen[T]=0,T};function l(I,T){if(T){if(l.escapeTest.test(I))return I.replace(l.escapeReplace,function(A){return l.replacements[A]})}else if(l.escapeTestNoEncode.test(I))return I.replace(l.escapeReplaceNoEncode,function(A){return l.replacements[A]});return I}l.escapeTest=/[&<>"']/,l.escapeReplace=/[&<>"']/g,l.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,l.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;function f(I){return I.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,function(T,A){return A=A.toLowerCase(),A==="colon"?":":A.charAt(0)==="#"?A.charAt(1)==="x"?String.fromCharCode(parseInt(A.substring(2),16)):String.fromCharCode(+A.substring(1)):""})}function h(I,T){return I=I.source||I,T=T||"",{replace:function(A,M){return M=M.source||M,M=M.replace(/(^|[^\[])\^/g,"$1"),I=I.replace(A,M),this},getRegex:function(){return new RegExp(I,T)}}}function d(I,T,A){if(I){try{var M=decodeURIComponent(f(A)).replace(/[^\w:]/g,"").toLowerCase()}catch{return null}if(M.indexOf("javascript:")===0||M.indexOf("vbscript:")===0||M.indexOf("data:")===0)return null}T&&!m.test(A)&&(A=g(T,A));try{A=encodeURI(A).replace(/%25/g,"%")}catch{return null}return A}function g(I,T){return v[" "+I]||(/^[^:]+:\/*[^/]*$/.test(I)?v[" "+I]=I+"/":v[" "+I]=E(I,"/",!0)),I=v[" "+I],T.slice(0,2)==="//"?I.replace(/:[\s\S]*/,":")+T:T.charAt(0)==="/"?I.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+T:I+T}var v={},m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function y(){}y.exec=y;function b(I){for(var T=1,A,M;T<arguments.length;T++){A=arguments[T];for(M in A)Object.prototype.hasOwnProperty.call(A,M)&&(I[M]=A[M])}return I}function C(I,T){var A=I.replace(/\|/g,function(F,W,z){for(var K=!1,X=W;--X>=0&&z[X]==="\\";)K=!K;return K?"|":" |"}),M=A.split(/ \|/),L=0;if(M.length>T)M.splice(T);else for(;M.length<T;)M.push("");for(;L<M.length;L++)M[L]=M[L].trim().replace(/\\\|/g,"|");return M}function E(I,T,A){if(I.length===0)return"";for(var M=0;M<I.length;){var L=I.charAt(I.length-M-1);if(L===T&&!A)M++;else if(L!==T&&A)M++;else break}return I.substr(0,I.length-M)}function D(I,T){if(I.indexOf(T[1])===-1)return-1;for(var A=0,M=0;M<I.length;M++)if(I[M]==="\\")M++;else if(I[M]===T[0])A++;else if(I[M]===T[1]&&(A--,A<0))return M;return-1}function k(I,T,A){if(typeof I>"u"||I===null)throw new Error("marked(): input parameter is undefined or null");if(typeof I!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(I)+", string expected");if(A||typeof T=="function"){A||(A=T,T=null),T=b({},k.defaults,T||{});var M=T.highlight,L,F,W=0;try{L=t.lex(I,T)}catch(K){return A(K)}F=L.length;var z=function(K){if(K)return T.highlight=M,A(K);var X;try{X=a.parse(L,T)}catch(se){K=se}return T.highlight=M,K?A(K):A(null,X)};if(!M||M.length<3||(delete T.highlight,!F))return z();for(;W<L.length;W++)(function(K){return K.type!=="code"?--F||z():M(K.text,K.lang,function(X,se){if(X)return z(X);if(se==null||se===K.text)return--F||z();K.text=se,K.escaped=!0,--F||z()})})(L[W]);return}try{return T&&(T=b({},k.defaults,T)),a.parse(t.lex(I,T),T)}catch(K){if(K.message+=`
Please report this to https://github.com/markedjs/marked.`,(T||k.defaults).silent)return"<p>An error occurred:</p><pre>"+l(K.message+"",!0)+"</pre>";throw K}}k.options=k.setOptions=function(I){return b(k.defaults,I),k},k.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new o,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},k.defaults=k.getDefaults(),k.Parser=a,k.parser=a.parse,k.Renderer=o,k.TextRenderer=s,k.Lexer=t,k.lexer=t.lex,k.InlineLexer=i,k.inlineLexer=i.output,k.Slugger=u,k.parse=k,Pu=k}).call(void 0);Pu.Parser;Pu.parser;var W2e=Pu.Renderer;Pu.TextRenderer;Pu.Lexer;Pu.lexer;Pu.InlineLexer;Pu.inlineLexer;var V2e=Pu.parse;let JQ;(function(){function n(e,t,r){function i(a,u){if(!t[a]){if(!e[a]){var l=typeof require=="function"&&require;if(!u&&l)return l(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var h=t[a]={exports:{}};e[a][0].call(h.exports,function(d){var g=e[a][1][d];return i(g||d)},h,h.exports,n,e,t,r)}return t[a].exports}for(var o=typeof require=="function"&&require,s=0;s<r.length;s++)i(r[s]);return i}return n})()({1:[function(n,e,t){var r=n("./toMap"),i=["background","base","cite","href","longdesc","src","usemap"];e.exports={uris:r(i)}},{"./toMap":10}],2:[function(n,e,t){var r={allowedAttributes:{"*":["title","accesskey"],a:["href","name","target","aria-label"],iframe:["allowfullscreen","frameborder","src"],img:["src","alt","title","aria-label"]},allowedClasses:{},allowedSchemes:["http","https","mailto"],allowedTags:["a","abbr","article","b","blockquote","br","caption","code","del","details","div","em","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","li","main","mark","ol","p","pre","section","span","strike","strong","sub","summary","sup","table","tbody","td","th","thead","tr","u","ul"],filter:null};e.exports=r},{}],3:[function(n,e,t){var r=n("./toMap"),i=["area","br","col","hr","img","wbr","input","base","basefont","link","meta"];e.exports={voids:r(i)}},{"./toMap":10}],4:[function(n,e,t){n("he");var r=n("assignment"),i=n("./parser"),o=n("./sanitizer"),s=n("./defaults");function a(u,l,f){var h=[],d=f===!0?l:r({},s,l),g=o(h,d);return i(u,g),h.join("")}a.defaults=s,e.exports=a,JQ=a},{"./defaults":2,"./parser":7,"./sanitizer":8,assignment:6,he:9}],5:[function(n,e,t){e.exports=function(i){return typeof i=="string"?i.toLowerCase():i}},{}],6:[function(n,e,t){function r(i){for(var o=Array.prototype.slice.call(arguments,1),s,a;o.length;){s=o.shift();for(a in s)s.hasOwnProperty(a)&&(Object.prototype.toString.call(i[a])==="[object Object]"?i[a]=r(i[a],s[a]):i[a]=s[a])}return i}e.exports=r},{}],7:[function(n,e,t){var r=n("he"),i=n("./lowercase");n("./attributes");var o=n("./elements"),s=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,a=/^<\s*\/\s*([\w:-]+)[^>]*>/,u=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,l=/^</,f=/^<\s*\//;function h(){var g=[];return g.lastItem=function(){return g[g.length-1]},g}function d(g,v){for(var m=h(),y=g,b;g;)C();A();function C(){b=!0,E();var M=g===y;y=g,M&&(g="")}function E(){g.substr(0,4)==="<!--"?k():f.test(g)?D(a,A):l.test(g)&&D(s,T),I()}function D(M,L){var F=g.match(M);F&&(g=g.substring(F[0].length),F[0].replace(M,L),b=!1)}function k(){var M=g.indexOf("-->");M>=0&&(v.comment&&v.comment(g.substring(4,M)),g=g.substring(M+3),b=!1)}function I(){if(b){var M,L=g.indexOf("<");L>=0?(M=g.substring(0,L),g=g.substring(L)):(M=g,g=""),v.chars&&v.chars(M)}}function T(M,L,F,W){var z={},K=i(L),X=o.voids[K]||!!W;F.replace(u,se),X||m.push(K),v.start&&v.start(K,z,X);function se(we,ae,Dt,At,$n){Dt===void 0&&At===void 0&&$n===void 0?z[ae]=void 0:z[ae]=r.decode(Dt||At||$n||"")}}function A(M,L){var F,W=0,z=i(L);if(z)for(W=m.length-1;W>=0&&m[W]!==z;W--);if(W>=0){for(F=m.length-1;F>=W;F--)v.end&&v.end(m[F]);m.length=W}}}e.exports=d},{"./attributes":1,"./elements":3,"./lowercase":5,he:9}],8:[function(n,e,t){var r=n("he"),i=n("./lowercase"),o=n("./attributes"),s=n("./elements");function a(u,l){var f,h=l||{};return E(),{start:g,end:v,chars:y};function d(D){u.push(D)}function g(D,k,I){var T=i(D);if(f.ignoring){b(T);return}if((h.allowedTags||[]).indexOf(T)===-1){b(T);return}if(h.filter&&!h.filter({tag:T,attrs:k})){b(T);return}d("<"),d(T),Object.keys(k).forEach(A),d(I?"/>":">");function A(M){var L=k[M],F=(h.allowedClasses||{})[T]||[],W=(h.allowedAttributes||{})[T]||[];W=W.concat((h.allowedAttributes||{})["*"]||[]);var z,K=i(M);K==="class"&&W.indexOf(K)===-1?(L=L.split(" ").filter(X).join(" ").trim(),z=L.length):z=W.indexOf(K)!==-1&&(o.uris[K]!==!0||m(L)),z&&(d(" "),d(M),typeof L=="string"&&(d('="'),d(r.encode(L)),d('"')));function X(se){return F&&F.indexOf(se)!==-1}}}function v(D){var k=i(D),I=(h.allowedTags||[]).indexOf(k)!==-1;I&&f.ignoring===!1?(d("</"),d(k),d(">")):C(k)}function m(D){var k=D[0];if(k==="#"||k==="/")return!0;var I=D.indexOf(":");if(I===-1)return!0;var T=D.indexOf("?");if(T!==-1&&I>T)return!0;var A=D.indexOf("#");if(A!==-1&&I>A)return!0;return h.allowedSchemes.some(M);function M(L){return D.indexOf(L+":")===0}}function y(D){f.ignoring===!1&&d(h.transformText?h.transformText(D):D)}function b(D){s.voids[D]||(f.ignoring===!1?f={ignoring:D,depth:1}:f.ignoring===D&&f.depth++)}function C(D){f.ignoring===D&&--f.depth<=0&&E()}function E(){f={ignoring:!1,depth:0}}}e.exports=a},{"./attributes":1,"./elements":3,"./lowercase":5,he:9}],9:[function(n,e,t){var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},o=/(&amp;|&lt;|&gt;|&quot;|&#39;)/g,s=/[&<>"']/g;function a(h){return r[h]}function u(h){return i[h]}function l(h){return h==null?"":String(h).replace(s,a)}function f(h){return h==null?"":String(h).replace(o,u)}l.options=f.options={},e.exports={encode:l,escape:l,decode:f,unescape:f,version:"1.0.0-browser"}},{}],10:[function(n,e,t){function r(o){return o.reduce(i,{})}function i(o,s){return o[s]=!0,o}e.exports=r},{}]},{},[4]);var H2e=JQ;function U2e(n,e){e===void 0&&(e={});var t=Y2(e),r=function(d){var g;try{g=yG(decodeURIComponent(d))}catch{}return g?(g=Qye(g,function(v){if(n.uris&&n.uris[v])return bt.revive(n.uris[v])}),encodeURIComponent(JSON.stringify(g))):d},i=function(d,g){var v=n.uris&&n.uris[d];if(!v)return d;var m=bt.revive(v);return g&&(m=_G(m)),m.query&&(m=m.with({query:r(m.query)})),v&&(d=m.toString(!0)),d},o,s=new Promise(function(d){return o=d}),a=new W2e;a.image=function(d,g,v){var m,y=[],b=[];return d&&(m=o2e(d),d=m.href,y=m.dimensions,d=i(d,!0),b.push('src="'+d+'"')),v&&b.push('alt="'+v+'"'),g&&b.push('title="'+g+'"'),y.length&&(b=b.concat(y)),"<img "+b.join(" ")+">"},a.link=function(d,g,v){return d===v&&(v=fN(v)),d=i(d,!1),g=fN(g),d=fN(d),!d||d.match(/^data:|javascript:/i)||d.match(/^command:/i)&&!n.isTrusted||d.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?v:(d=d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),'<a href="#" data-href="'+d+'" title="'+(g||d)+'">'+v+"</a>")},a.paragraph=function(d){return"<p>"+d+"</p>"},e.codeBlockRenderer&&(a.code=function(d,g){var v=e.codeBlockRenderer(g,d),m=LQ.nextId(),y=Promise.all([v,s]).then(function(b){var C=b[0],E=t.querySelector('div[data-code="'+m+'"]');E&&(E.innerHTML=C)}).catch(function(b){});return e.codeBlockRenderCallback&&y.then(e.codeBlockRenderCallback),'<div class="code" data-code="'+m+'">'+fs(d)+"</div>"});var u=e.actionHandler;u&&u.disposeables.add(Br(t,"click",function(d){var g=d.target;if(!(g.tagName!=="A"&&(g=g.parentElement,!g||g.tagName!=="A")))try{var v=g.dataset.href;v&&u.callback(v,d)}catch(m){Le(m)}finally{d.preventDefault()}}));var l={sanitize:!0,renderer:a},f=["http","https","mailto","data"];n.isTrusted&&f.push("command");var h=V2e(n.value,l);return t.innerHTML=H2e(h,{allowedSchemes:f,allowedAttributes:{a:["href","name","target","data-href"],iframe:["allowfullscreen","frameborder","src"],img:["src","title","alt","width","height"],div:["class","data-code"]}}),o(),t}var j2e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),z2e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ej=function(n,e){return function(t,r){e(t,r,n)}},$I=function(n){j2e(e,n);function e(t,r,i){i===void 0&&(i=k2);var o=n.call(this)||this;return o._editor=t,o._modeService=r,o._openerService=i,o._onDidRenderCodeBlock=o._register(new j),o.onDidRenderCodeBlock=o._onDidRenderCodeBlock.event,o}return e.prototype.getOptions=function(t){var r=this;return{codeBlockRenderer:function(i,o){var s=null;if(i)s=r._modeService.getModeIdForLanguageName(i);else{var a=r._editor.getModel();a&&(s=a.getLanguageIdentifier().language)}return r._modeService.triggerMode(s||""),Promise.resolve(!0).then(function(u){var l=mn.getPromise(s||"");return l?l.then(function(f){return WU(o,f)}):WU(o,void 0)}).then(function(u){return'<span style="font-family: '+r._editor.getConfiguration().fontInfo.fontFamily+'">'+u+"</span>"})},codeBlockRenderCallback:function(){return r._onDidRenderCodeBlock.fire()},actionHandler:{callback:function(i){var o;try{o=bt.parse(i)}catch{}o&&r._openerService&&r._openerService.open(o).catch(Le)},disposeables:t}}},e.prototype.render=function(t){var r=new De,i;return t?i=U2e(t,this.getOptions(r)):i=document.createElement("span"),{element:i,dispose:function(){return r.dispose()}}},e=z2e([ej(1,mf),ej(2,$h(rf))],e),e}(te),q2e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xi=ke,Dg=function(){function n(e,t,r){this.range=e,this.color=t,this.provider=r}return n}(),hg=function(){function n(e,t){this.range=e,this.marker=t}return n}(),$2e=function(){function n(e,t){this._markerDecorationsService=t,this._editor=e,this._result=[]}return n.prototype.setRange=function(e){this._range=e,this._result=[]},n.prototype.clearResult=function(){this._result=[]},n.prototype.computeAsync=function(e){if(!this._editor.hasModel()||!this._range)return Promise.resolve([]);var t=this._editor.getModel();return Fy.has(t)?ZQ(t,new $(this._range.startLineNumber,this._range.startColumn),e):Promise.resolve([])},n.prototype.computeSync=function(){var e=this;if(!this._editor.hasModel()||!this._range)return[];var t=this._editor.getModel(),r=this._range.startLineNumber;if(r>this._editor.getModel().getLineCount())return[];var i=$X.get(this._editor),o=t.getLineMaxColumn(r),s=this._editor.getLineDecorations(r),a=!1,u=this._range,l=s.map(function(f){var h=f.range.startLineNumber===r?f.range.startColumn:1,d=f.range.endLineNumber===r?f.range.endColumn:o;if(h>u.startColumn||u.endColumn>d)return null;var g=new R(u.startLineNumber,h,u.startLineNumber,d),v=e._markerDecorationsService.getMarker(t,f);if(v)return new hg(g,v);var m=i.getColorData(f.range.getStartPosition());if(!a&&m){a=!0;var y=m.colorInfo,b=y.color,C=y.range;return new Dg(C,b,m.provider)}else{if(zI(f.options.hoverMessage))return null;var E=f.options.hoverMessage?UK(f.options.hoverMessage):[];return{contents:E,range:g}}});return Ol(l)},n.prototype.onResult=function(e,t){t?this._result=e.concat(this._result.sort(function(r,i){return r instanceof Dg?-1:i instanceof Dg?1:0})):this._result=this._result.concat(e)},n.prototype.getResult=function(){return this._result.slice(0)},n.prototype.getResultWithLoadingMessage=function(){return this._result.slice(0).concat([this._getLoadingMessage()])},n.prototype._getLoadingMessage=function(){return{range:this._range,contents:[new _d().appendText(S("modesContentHover.loading","Loading..."))]}},n}(),vN=function(n){q2e(e,n);function e(t,r,i,o,s,a){a===void 0&&(a=k2);var u=n.call(this,e.ID,t)||this;return u._themeService=i,u._keybindingService=o,u._modeService=s,u._openerService=a,u.renderDisposable=u._register(new df),u._messages=[],u._lastRange=null,u._computer=new $2e(u._editor,r),u._highlightDecorations=[],u._isChangingDecorations=!1,u._shouldFocus=!1,u._colorPicker=null,u._hoverOperation=new XQ(u._computer,function(l){return u._withResult(l,!0)},null,function(l){return u._withResult(l,!1)},u._editor.getConfiguration().contribInfo.hover.delay),u._register(Br(u.getDomNode(),Ye.FOCUS,function(){u._colorPicker&&de(u.getDomNode(),"colorpicker-hover")})),u._register(Br(u.getDomNode(),Ye.BLUR,function(){qe(u.getDomNode(),"colorpicker-hover")})),u._register(t.onDidChangeConfiguration(function(l){u._hoverOperation.setHoverTime(u._editor.getConfiguration().contribInfo.hover.delay)})),u}return e.prototype.dispose=function(){this._hoverOperation.cancel(),n.prototype.dispose.call(this)},e.prototype.onModelDecorationsChanged=function(){this._isChangingDecorations||this.isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))},e.prototype.startShowingAt=function(t,r,i){if(!(this._lastRange&&this._lastRange.equalsRange(t))){if(this._hoverOperation.cancel(),this.isVisible)if(!this._showAtPosition||this._showAtPosition.lineNumber!==t.startLineNumber)this.hide();else{for(var o=[],s=0,a=this._messages.length;s<a;s++){var u=this._messages[s],l=u.range;l&&l.startColumn<=t.startColumn&&l.endColumn>=t.endColumn&&o.push(u)}if(o.length>0){if(K2e(o,this._messages))return;this._renderMessages(t,o)}else this.hide()}this._lastRange=t,this._computer.setRange(t),this._shouldFocus=i,this._hoverOperation.start(r)}},e.prototype.hide=function(){this._lastRange=null,this._hoverOperation.cancel(),n.prototype.hide.call(this),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this.renderDisposable.clear(),this._colorPicker=null},e.prototype.isColorPickerVisible=function(){return!!this._colorPicker},e.prototype._withResult=function(t,r){this._messages=t,this._lastRange&&this._messages.length>0?this._renderMessages(this._lastRange,this._messages):r&&this.hide()},e.prototype._renderMessages=function(t,r){var i=this;this.renderDisposable.dispose(),this._colorPicker=null;var o=Number.MAX_VALUE,s=r[0].range?R.lift(r[0].range):null,a=document.createDocumentFragment(),u=!0,l=!1,f=new De,h=[];if(r.forEach(function(g){if(g.range)if(o=Math.min(o,g.range.startColumn),s=s?R.plusRange(s,g.range):R.lift(g.range),g instanceof Dg){l=!0;var v=g.color,m=v.red,y=v.green,b=v.blue,C=v.alpha,E=new Jt(m*255,y*255,b*255,C),D=new Z(E);if(!i._editor.hasModel())return;var k=i._editor.getModel(),I=new R(g.range.startLineNumber,g.range.startColumn,g.range.endLineNumber,g.range.endColumn),T={range:g.range,color:g.color},A=new k2e(D,[],0),M=new M2e(a,A,i._editor.getConfiguration().pixelRatio,i._themeService);x9(k,T,g.provider,Ft.None).then(function(L){if(A.colorPresentations=L||[],!!i._editor.hasModel()){var F=i._editor.getModel().getValueInRange(g.range);A.guessColorPresentation(D,F);var W=function(){var se,we;A.presentation.textEdit?(se=[A.presentation.textEdit],we=new R(A.presentation.textEdit.range.startLineNumber,A.presentation.textEdit.range.startColumn,A.presentation.textEdit.range.endLineNumber,A.presentation.textEdit.range.endColumn),we=we.setEndPosition(we.endLineNumber,we.startColumn+A.presentation.textEdit.text.length)):(se=[{identifier:null,range:I,text:A.presentation.label,forceMoveMarkers:!1}],we=I.setEndPosition(I.endLineNumber,I.startColumn+A.presentation.label.length)),i._editor.pushUndoStop(),i._editor.executeEdits("colorpicker",se),A.presentation.additionalTextEdits&&(se=A.presentation.additionalTextEdits.slice(),i._editor.executeEdits("colorpicker",se),i.hide()),i._editor.pushUndoStop(),I=we},z=function(se){return x9(k,{range:I,color:{red:se.rgba.r/255,green:se.rgba.g/255,blue:se.rgba.b/255,alpha:se.rgba.a}},g.provider,Ft.None).then(function(we){A.colorPresentations=we||[]})},K=A.onColorFlushed(function(se){z(se).then(W)}),X=A.onDidChangeColor(z);i._colorPicker=M,i.showAt(I.getStartPosition(),I,i._shouldFocus),i.updateContents(a),i._colorPicker.layout(),i.renderDisposable.value=au(K,X,M,f)}})}else g instanceof hg?(h.push(g),u=!1):g.contents.filter(function(L){return!zI(L)}).forEach(function(L){var F=xi("div.hover-row.markdown-hover"),W=ce(F,xi("div.hover-contents")),z=f.add(new $I(i._editor,i._modeService,i._openerService));f.add(z.onDidRenderCodeBlock(function(){W.className="hover-contents code-hover-contents",i.onContentsChange()}));var K=f.add(z.render(L));W.appendChild(K.element),a.appendChild(F),u=!1})}),h.length){h.forEach(function(g){return a.appendChild(i.renderMarkerHover(g))});var d=h.length===1?h[0]:h.sort(function(g,v){return hn.compare(g.marker.severity,v.marker.severity)})[0];a.appendChild(this.renderMarkerStatusbar(d))}!l&&!u&&(this.showAt(new $(t.startLineNumber,o),s,this._shouldFocus),this.updateContents(a)),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,s?[{range:s,options:e._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1},e.prototype.renderMarkerHover=function(t){var r=this,i=xi("div.hover-row"),o=ce(i,xi("div.marker.hover-contents")),s=t.marker,a=s.source,u=s.message,l=s.code,f=s.relatedInformation;this._editor.applyFontInfo(o);var h=ce(o,xi("span"));if(h.style.whiteSpace="pre-wrap",h.innerText=u,a||l){var d=ce(o,xi("span"));d.style.opacity="0.6",d.style.paddingLeft="6px",d.innerText=a&&l?a+"("+l+")":a||"("+l+")"}if(vo(f))for(var g=function(I,T,A,M){var L=ce(o,xi("div"));L.style.marginTop="8px";var F=ce(L,xi("a"));F.innerText=El(T)+"("+A+", "+M+"): ",F.style.cursor="pointer",F.onclick=function(z){z.stopPropagation(),z.preventDefault(),r._openerService&&r._openerService.open(T.with({fragment:A+","+M})).catch(Le)};var W=ce(L,xi("span"));W.innerText=I,v._editor.applyFontInfo(W)},v=this,m=0,y=f;m<y.length;m++){var b=y[m],C=b.message,E=b.resource,D=b.startLineNumber,k=b.startColumn;g(C,E,D,k)}return i},e.prototype.renderMarkerStatusbar=function(t){var r=this,i=xi("div.hover-row.status-bar"),o=new De,s=ce(i,xi("div.actions"));(t.marker.severity===hn.Error||t.marker.severity===hn.Warning||t.marker.severity===hn.Info)&&o.add(this.renderAction(s,{label:S("peek problem","Peek Problem"),commandId:J_.ID,run:function(){r.hide(),qI.get(r._editor).show(t.marker),r._editor.focus()}}));var a=ce(s,xi("div"));a.style.opacity="0",a.style.transition="opacity 0.2s",setTimeout(function(){return a.style.opacity="1"},200),a.textContent=S("checkingForQuickFixes","Checking for quick fixes..."),o.add(en(function(){return a.remove()}));var u=this.getCodeActions(t.marker);return o.add(en(function(){return u.cancel()})),u.then(function(l){if(a.style.transition="",a.style.opacity="1",!l.actions.length){l.dispose(),a.textContent=S("noQuickFixes","No quick fixes available");return}a.remove();var f=!1;o.add(en(function(){f||l.dispose()})),o.add(r.renderAction(s,{label:S("quick fixes","Quick Fix..."),commandId:U2.Id,run:function(h){f=!0;var d=H2.get(r._editor),g=Wr(h);d.showCodeActions(l,{x:g.left+6,y:g.top+g.height+6})}}))}),this.renderDisposable.value=o,i},e.prototype.getCodeActions=function(t){var r=this;return Cr(function(i){return V2(r._editor.getModel(),new R(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn),{type:"manual",filter:{kind:Vn.QuickFix}},i)})},e.prototype.renderAction=function(t,r){var i=ce(t,xi("div.action-container")),o=ce(i,xi("a.action"));r.iconClass&&ce(o,xi("span.icon."+r.iconClass));var s=ce(o,xi("span"));s.textContent=r.label;var a=this._keybindingService.lookupKeybinding(r.commandId);return a&&(s.title=r.label+" ("+a.getLabel()+")"),ie(i,Ye.CLICK,function(u){u.stopPropagation(),u.preventDefault(),r.run(i)})},e.ID="editor.contrib.modesContentHoverWidget",e._DECORATION_OPTIONS=tt.register({className:"hoverHighlight"}),e}(F2e);function K2e(n,e){if(!n&&e||n&&!e||n.length!==e.length)return!1;for(var t=0;t<n.length;t++){var r=n[t],i=e[t];if(r instanceof hg&&i instanceof hg)return MS.makeKey(r.marker)===MS.makeKey(i.marker);if(r instanceof Dg||i instanceof Dg||r instanceof hg||i instanceof hg||!i2e(r.contents,i.contents))return!1}return!0}var G2e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Y2e=function(){function n(e){this._editor=e,this._lineNumber=-1,this._result=[]}return n.prototype.setLineNumber=function(e){this._lineNumber=e,this._result=[]},n.prototype.clearResult=function(){this._result=[]},n.prototype.computeSync=function(){var e=function(u){return{value:u}},t=this._editor.getLineDecorations(this._lineNumber),r=[];if(!t)return r;for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.options.glyphMarginClassName){var a=s.options.glyphMarginHoverMessage;!a||zI(a)||r.push.apply(r,UK(a).map(e))}}return r},n.prototype.onResult=function(e,t){this._result=this._result.concat(e)},n.prototype.getResult=function(){return this._result},n.prototype.getResultWithLoadingMessage=function(){return this.getResult()},n}(),CC=function(n){G2e(e,n);function e(t,r,i){i===void 0&&(i=k2);var o=n.call(this,e.ID,t)||this;return o._renderDisposeables=o._register(new De),o._messages=[],o._lastLineNumber=-1,o._markdownRenderer=o._register(new $I(o._editor,r,i)),o._computer=new Y2e(o._editor),o._hoverOperation=new XQ(o._computer,function(s){return o._withResult(s)},void 0,function(s){return o._withResult(s)},300),o}return e.prototype.dispose=function(){this._hoverOperation.cancel(),n.prototype.dispose.call(this)},e.prototype.onModelDecorationsChanged=function(){this.isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))},e.prototype.startShowingAt=function(t){this._lastLineNumber!==t&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=t,this._computer.setLineNumber(t),this._hoverOperation.start(0))},e.prototype.hide=function(){this._lastLineNumber=-1,this._hoverOperation.cancel(),n.prototype.hide.call(this)},e.prototype._withResult=function(t){this._messages=t,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()},e.prototype._renderMessages=function(t,r){this._renderDisposeables.clear();for(var i=document.createDocumentFragment(),o=0,s=r;o<s.length;o++){var a=s[o],u=this._markdownRenderer.render(a.value);this._renderDisposeables.add(u),i.appendChild(ke("div.hover-row",void 0,u.element))}this.updateContents(i),this.showAt(t)},e.ID="editor.contrib.modesGlyphHoverWidget",e}(B2e),Z2e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),X2e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},d_=function(n,e){return function(t,r){e(t,r,n)}},eJ=function(){function n(e,t,r,i,o,s){var a=this;this._editor=e,this._openerService=t,this._modeService=r,this._markerDecorationsService=i,this._keybindingService=o,this._themeService=s,this._toUnhook=new De,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(function(u){u.contribInfo&&(a._hideWidgets(),a._unhookEvents(),a._hookEvents())})}return Object.defineProperty(n.prototype,"contentWidget",{get:function(){return this._contentWidget||this._createHoverWidgets(),this._contentWidget},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"glyphWidget",{get:function(){return this._glyphWidget||this._createHoverWidgets(),this._glyphWidget},enumerable:!0,configurable:!0}),n.get=function(e){return e.getContribution(n.ID)},n.prototype._hookEvents=function(){var e=this,t=function(){return e._hideWidgets()},r=this._editor.getConfiguration().contribInfo.hover;this._isHoverEnabled=r.enabled,this._isHoverSticky=r.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(function(i){return e._onEditorMouseDown(i)})),this._toUnhook.add(this._editor.onMouseUp(function(i){return e._onEditorMouseUp(i)})),this._toUnhook.add(this._editor.onMouseMove(function(i){return e._onEditorMouseMove(i)})),this._toUnhook.add(this._editor.onKeyDown(function(i){return e._onKeyDown(i)})),this._toUnhook.add(this._editor.onDidChangeModelDecorations(function(){return e._onModelDecorationsChanged()}))):this._toUnhook.add(this._editor.onMouseMove(t)),this._toUnhook.add(this._editor.onMouseLeave(t)),this._toUnhook.add(this._editor.onDidChangeModel(t)),this._toUnhook.add(this._editor.onDidScrollChange(function(i){return e._onEditorScrollChanged(i)}))},n.prototype._unhookEvents=function(){this._toUnhook.clear()},n.prototype._onModelDecorationsChanged=function(){this.contentWidget.onModelDecorationsChanged(),this.glyphWidget.onModelDecorationsChanged()},n.prototype._onEditorScrollChanged=function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()},n.prototype._onEditorMouseDown=function(e){this._isMouseDown=!0;var t=e.target.type;if(t===9&&e.target.detail===vN.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===CC.ID||(t!==12&&e.target.detail!==CC.ID&&(this._hoverClicked=!1),this._hideWidgets())},n.prototype._onEditorMouseUp=function(e){this._isMouseDown=!1},n.prototype._onEditorMouseMove=function(e){var t=e.target.type;if(!(this._isMouseDown&&this._hoverClicked&&this.contentWidget.isColorPickerVisible())&&!(this._isHoverSticky&&t===9&&e.target.detail===vN.ID)&&!(this._isHoverSticky&&t===12&&e.target.detail===CC.ID)){if(t===7){var r=this._editor.getConfiguration().fontInfo.typicalHalfwidthCharacterWidth/2,i=e.target.detail;i&&!i.isAfterLines&&typeof i.horizontalDistanceToText=="number"&&i.horizontalDistanceToText<r&&(t=6)}t===6?(this.glyphWidget.hide(),this._isHoverEnabled&&e.target.range&&this.contentWidget.startShowingAt(e.target.range,0,!1)):t===2?(this.contentWidget.hide(),this._isHoverEnabled&&e.target.position&&this.glyphWidget.startShowingAt(e.target.position.lineNumber)):this._hideWidgets()}},n.prototype._onKeyDown=function(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()},n.prototype._hideWidgets=function(){!this._glyphWidget||!this._contentWidget||this._isMouseDown&&this._hoverClicked&&this._contentWidget.isColorPickerVisible()||(this._glyphWidget.hide(),this._contentWidget.hide())},n.prototype._createHoverWidgets=function(){this._contentWidget=new vN(this._editor,this._markerDecorationsService,this._themeService,this._keybindingService,this._modeService,this._openerService),this._glyphWidget=new CC(this._editor,this._modeService,this._openerService)},n.prototype.showContentHover=function(e,t,r){this.contentWidget.startShowingAt(e,t,r)},n.prototype.getId=function(){return n.ID},n.prototype.dispose=function(){this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),this._glyphWidget&&this._glyphWidget.dispose(),this._contentWidget&&this._contentWidget.dispose()},n.ID="editor.contrib.hover",n=X2e([d_(1,rf),d_(2,mf),d_(3,yX),d_(4,er),d_(5,Ir)],n),n}(),Q2e=function(n){Z2e(e,n);function e(){return n.call(this,{id:"editor.action.showHover",label:S({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2087),weight:100}})||this}return e.prototype.run=function(t,r){if(r.hasModel()){var i=eJ.get(r);if(i){var o=r.getPosition(),s=new R(o.lineNumber,o.column,o.lineNumber,o.column),a=r.getConfiguration().accessibilitySupport===2;i.showContentHover(s,1,a)}}},e}(Ne);tn(eJ);re(Q2e);Xt(function(n,e){var t=n.getColor(OIe);t&&e.addRule(".monaco-editor .hoverHighlight { background-color: "+t+"; }");var r=n.getColor(gd);r&&e.addRule(".monaco-editor .monaco-editor-hover { background-color: "+r+"; }");var i=n.getColor(XF);i&&(e.addRule(".monaco-editor .monaco-editor-hover { border: 1px solid "+i+"; }"),e.addRule(".monaco-editor .monaco-editor-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid "+i.transparent(.5)+"; }"),e.addRule(".monaco-editor .monaco-editor-hover hr { border-top: 1px solid "+i.transparent(.5)+"; }"),e.addRule(".monaco-editor .monaco-editor-hover hr { border-bottom: 0px solid "+i.transparent(.5)+"; }"));var o=n.getColor(yI);o&&e.addRule(".monaco-editor .monaco-editor-hover a { color: "+o+"; }");var s=n.getColor(RIe);s&&e.addRule(".monaco-editor .monaco-editor-hover .hover-row .actions { background-color: "+s+"; }");var a=n.getColor(VF);a&&e.addRule(".monaco-editor .monaco-editor-hover code { background-color: "+a+"; }")});var J2e=function(){function n(e,t,r){this._editRange=e,this._originalSelection=t,this._text=r}return n.prototype.getEditOperations=function(e,t){t.addTrackedEditOperation(this._editRange,this._text)},n.prototype.computeCursorState=function(e,t){var r=t.getInverseEditOperations(),i=r[0].range;return this._originalSelection.isEmpty()?new Ce(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new Ce(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)},n}(),tJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),e3e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},t3e=function(n,e){return function(t,r){e(t,r,n)}},f3=function(){function n(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}return n.get=function(e){return e.getContribution(n.ID)},n.prototype.dispose=function(){},n.prototype.getId=function(){return n.ID},n.prototype.run=function(e,t){var r=this;this.currentRequest&&this.currentRequest.cancel();var i=this.editor.getSelection(),o=this.editor.getModel();if(!(!o||!i)){var s=i;if(s.startLineNumber===s.endLineNumber){var a=new u2(this.editor,5),u=o.uri;return this.editorWorkerService.canNavigateValueSet(u)?(this.currentRequest=Cr(function(l){return r.editorWorkerService.navigateValueSet(u,s,t)}),this.currentRequest.then(function(l){if(!(!l||!l.range||!l.value)&&a.validate(r.editor)){var f=R.lift(l.range),h=l.range,d=l.value.length-(s.endColumn-s.startColumn);h={startLineNumber:h.startLineNumber,startColumn:h.startColumn,endLineNumber:h.endLineNumber,endColumn:h.startColumn+l.value.length},d>1&&(s=new Ce(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn+d-1));var g=new J2e(f,s,l.value);r.editor.pushUndoStop(),r.editor.executeCommand(e,g),r.editor.pushUndoStop(),r.decorationIds=r.editor.deltaDecorations(r.decorationIds,[{range:h,options:n.DECORATION}]),r.decorationRemover&&r.decorationRemover.cancel(),r.decorationRemover=j0(350),r.decorationRemover.then(function(){return r.decorationIds=r.editor.deltaDecorations(r.decorationIds,[])}).catch(Le)}}).catch(Le)):Promise.resolve(void 0)}}},n.ID="editor.contrib.inPlaceReplaceController",n.DECORATION=tt.register({className:"valueSetReplacement"}),n=e3e([t3e(1,qs)],n),n}(),n3e=function(n){tJ(e,n);function e(){return n.call(this,{id:"editor.action.inPlaceReplace.up",label:S("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:3154,weight:100}})||this}return e.prototype.run=function(t,r){var i=f3.get(r);return i?i.run(this.id,!0):Promise.resolve(void 0)},e}(Ne),r3e=function(n){tJ(e,n);function e(){return n.call(this,{id:"editor.action.inPlaceReplace.down",label:S("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:3156,weight:100}})||this}return e.prototype.run=function(t,r){var i=f3.get(r);return i?i.run(this.id,!1):Promise.resolve(void 0)},e}(Ne);tn(f3);re(n3e);re(r3e);Xt(function(n,e){var t=n.getColor(rZ);t&&e.addRule(".monaco-editor.vs .valueSetReplacement { outline: solid 2px "+t+"; }")});var i3e=function(){function n(e,t){this._selection=e,this._cursors=t,this._selectionId=null}return n.prototype.getEditOperations=function(e,t){for(var r=o3e(e,this._cursors),i=0,o=r.length;i<o;i++){var s=r[i];t.addEditOperation(s.range,s.text)}this._selectionId=t.trackSelection(this._selection)},n.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this._selectionId)},n}();function o3e(n,e){e.sort(function(v,m){return v.lineNumber===m.lineNumber?v.column-m.column:v.lineNumber-m.lineNumber});for(var t=e.length-2;t>=0;t--)e[t].lineNumber===e[t+1].lineNumber&&e.splice(t,1);for(var r=[],i=0,o=0,s=e.length,a=1,u=n.getLineCount();a<=u;a++){var l=n.getLineContent(a),f=l.length+1,h=0;if(!(o<s&&e[o].lineNumber===a&&(h=e[o].column,o++,h===f))&&l.length!==0){var d=gf(l),g=0;if(d===-1)g=1;else if(d!==l.length-1)g=d+2;else continue;g=Math.max(h,g),r[i++]=lr.delete(new R(a,g,a,f))}}return r}var s3e=function(){function n(e,t){this._selection=e,this._isCopyingDown=t,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}return n.prototype.getEditOperations=function(e,t){var r=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._endLineNumberDelta=1,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));for(var i=[],o=r.startLineNumber;o<=r.endLineNumber;o++)i.push(e.getLineContent(o));var s=i.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._isCopyingDown?t.addEditOperation(new R(r.startLineNumber,1,r.startLineNumber,1),s+`
`):t.addEditOperation(new R(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(r),this._selectionDirection=this._selection.getDirection()},n.prototype.computeCursorState=function(e,t){var r=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){var i=r.startLineNumber,o=r.startColumn,s=r.endLineNumber,a=r.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(s=s+this._endLineNumberDelta,a=1),r=Ce.createWithDirection(i,o,s,a,this._selectionDirection)}return r},n}();function Ka(n,e){for(var t=0,r=0;r<n.length;r++)n.charAt(r)==="	"?t+=e:t++;return t}function mN(n,e,t){n=n<0?0:n;var r="";if(!t){var i=Math.floor(n/e);n=n%e;for(var o=0;o<i;o++)r+="	"}for(var o=0;o<n;o++)r+=" ";return r}var a3e=function(){function n(e,t,r){this._selection=e,this._isMovingDown=t,this._autoIndent=r,this._selectionId=null,this._moveEndLineSelectionShrink=!1}return n.prototype.getEditOperations=function(e,t){var r=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===r){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;var i=this._selection;i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));var o=e.getOptions(),s=o.tabSize,a=o.indentSize,u=o.insertSpaces,l=this.buildIndentConverter(s,a,u),f={getLineTokens:function(F){return e.getLineTokens(F)},getLanguageIdentifier:function(){return e.getLanguageIdentifier()},getLanguageIdAtPosition:function(F,W){return e.getLanguageIdAtPosition(F,W)},getLineContent:null};if(i.startLineNumber===i.endLineNumber&&e.getLineMaxColumn(i.startLineNumber)===1){var h=i.startLineNumber,d=this._isMovingDown?h+1:h-1;e.getLineMaxColumn(d)===1?t.addEditOperation(new R(1,1,1,1),null):(t.addEditOperation(new R(h,1,h,1),e.getLineContent(d)),t.addEditOperation(new R(d,1,d,e.getLineMaxColumn(d)),null)),i=new Ce(d,1,d,1)}else{var g,v=void 0;if(this._isMovingDown){g=i.endLineNumber+1,v=e.getLineContent(g),t.addEditOperation(new R(g-1,e.getLineMaxColumn(g-1),g,e.getLineMaxColumn(g)),null);var m=v;if(this.shouldAutoIndent(e,i)){var y=this.matchEnterRule(e,l,s,g,i.startLineNumber-1);if(y!==null){var b=ln(e.getLineContent(g)),C=y+Ka(b,s),E=mN(C,s,u);m=E+this.trimLeft(v)}else{f.getLineContent=function(F){return F===i.startLineNumber?e.getLineContent(g):e.getLineContent(F)};var D=gt.getGoodIndentForLine(f,e.getLanguageIdAtPosition(g,1),i.startLineNumber,l);if(D!==null){var b=ln(e.getLineContent(g)),C=Ka(D,s),k=Ka(b,s);if(C!==k){var E=mN(C,s,u);m=E+this.trimLeft(v)}}}t.addEditOperation(new R(i.startLineNumber,1,i.startLineNumber,1),m+`
`);var I=this.matchEnterRule(e,l,s,i.startLineNumber,i.startLineNumber,m);if(I!==null)I!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,u,I);else{f.getLineContent=function(F){return F===i.startLineNumber?m:F>=i.startLineNumber+1&&F<=i.endLineNumber+1?e.getLineContent(F-1):e.getLineContent(F)};var T=gt.getGoodIndentForLine(f,e.getLanguageIdAtPosition(g,1),i.startLineNumber+1,l);if(T!==null){var b=ln(e.getLineContent(i.startLineNumber)),C=Ka(T,s),k=Ka(b,s);if(C!==k){var A=C-k;this.getIndentEditsOfMovingBlock(e,t,i,s,u,A)}}}}else t.addEditOperation(new R(i.startLineNumber,1,i.startLineNumber,1),m+`
`)}else if(g=i.startLineNumber-1,v=e.getLineContent(g),t.addEditOperation(new R(g,1,g+1,1),null),t.addEditOperation(new R(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+v),this.shouldAutoIndent(e,i)){f.getLineContent=function(W){return W===g?e.getLineContent(i.startLineNumber):e.getLineContent(W)};var I=this.matchEnterRule(e,l,s,i.startLineNumber,i.startLineNumber-2);if(I!==null)I!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,u,I);else{var M=gt.getGoodIndentForLine(f,e.getLanguageIdAtPosition(i.startLineNumber,1),g,l);if(M!==null){var L=ln(e.getLineContent(i.startLineNumber)),C=Ka(M,s),k=Ka(L,s);if(C!==k){var A=C-k;this.getIndentEditsOfMovingBlock(e,t,i,s,u,A)}}}}}this._selectionId=t.trackSelection(i)},n.prototype.buildIndentConverter=function(e,t,r){return{shiftIndent:function(i){return xh.shiftIndent(i,i.length+1,e,t,r)},unshiftIndent:function(i){return xh.unshiftIndent(i,i.length+1,e,t,r)}}},n.prototype.matchEnterRule=function(e,t,r,i,o,s){for(var a=o;a>=1;){var u=void 0;a===o&&s!==void 0?u=s:u=e.getLineContent(a);var l=gf(u);if(l>=0)break;a--}if(a<1||i>e.getLineCount())return null;var f=e.getLineMaxColumn(a),h=gt.getEnterAction(e,new R(a,f,a,f));if(h){var d=h.indentation,g=h.enterAction;g.indentAction===xn.None||g.indentAction===xn.Indent?d=h.indentation+g.appendText:g.indentAction===xn.IndentOutdent?d=h.indentation:g.indentAction===xn.Outdent&&(d=t.unshiftIndent(h.indentation)+g.appendText);var v=e.getLineContent(i);if(this.trimLeft(v).indexOf(this.trimLeft(d))>=0){var m=ln(e.getLineContent(i)),y=ln(d),b=gt.getIndentMetadata(e,i);b!==null&&b&2&&(y=t.unshiftIndent(y));var C=Ka(y,r),E=Ka(m,r);return C-E}}return null},n.prototype.trimLeft=function(e){return e.replace(/^\s+/,"")},n.prototype.shouldAutoIndent=function(e,t){if(!this._autoIndent||!e.isCheapToTokenize(t.startLineNumber))return!1;var r=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(r!==i||gt.getIndentRulesSupport(r)===null)},n.prototype.getIndentEditsOfMovingBlock=function(e,t,r,i,o,s){for(var a=r.startLineNumber;a<=r.endLineNumber;a++){var u=e.getLineContent(a),l=ln(u),f=Ka(l,i),h=f+s,d=mN(h,i,o);d!==l&&(t.addEditOperation(new R(a,1,a,l.length+1),d),a===r.endLineNumber&&r.endColumn<=l.length+1&&d===""&&(this._moveEndLineSelectionShrink=!0))}},n.prototype.computeCursorState=function(e,t){var r=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(r=r.setEndPosition(r.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&r.startLineNumber<r.endLineNumber&&(r=r.setEndPosition(r.endLineNumber,2)),r},n}(),tj=function(){function n(e,t){this.selection=e,this.descending=t,this.selectionId=null}return n.prototype.getEditOperations=function(e,t){var r=u3e(e,this.selection,this.descending);r&&t.addEditOperation(r.range,r.text),this.selectionId=t.trackSelection(this.selection)},n.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this.selectionId)},n.canRun=function(e,t,r){if(e===null)return!1;var i=nJ(e,t,r);if(!i)return!1;for(var o=0,s=i.before.length;o<s;o++)if(i.before[o]!==i.after[o])return!0;return!1},n}();function nJ(n,e,t){var r=e.startLineNumber,i=e.endLineNumber;if(e.endColumn===1&&i--,r>=i)return null;for(var o=[],s=r;s<=i;s++)o.push(n.getLineContent(s));var a=o.slice(0);return a.sort(function(u,l){return u.toLowerCase().localeCompare(l.toLowerCase())}),t===!0&&(a=a.reverse()),{startLineNumber:r,endLineNumber:i,before:o,after:a}}function u3e(n,e,t){var r=nJ(n,e,t);return r?lr.replace(new R(r.startLineNumber,1,r.endLineNumber,n.getLineMaxColumn(r.endLineNumber)),r.after.join(`
`)):null}var Un=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rJ=function(n){Un(e,n);function e(t,r){var i=n.call(this,r)||this;return i.down=t,i}return e.prototype.run=function(t,r){for(var i=[],o=r.getSelections()||[],s=0,a=o;s<a.length;s++){var u=a[s];i.push(new s3e(u,this.down))}r.pushUndoStop(),r.executeCommands(this.id,i),r.pushUndoStop()},e}(Ne),l3e=function(n){Un(e,n);function e(){return n.call(this,!1,{id:"editor.action.copyLinesUpAction",label:S("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menubarOpts:{menuId:22,group:"2_line",title:S({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})||this}return e}(rJ),c3e=function(n){Un(e,n);function e(){return n.call(this,!0,{id:"editor.action.copyLinesDownAction",label:S("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menubarOpts:{menuId:22,group:"2_line",title:S({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})||this}return e}(rJ),iJ=function(n){Un(e,n);function e(t,r){var i=n.call(this,r)||this;return i.down=t,i}return e.prototype.run=function(t,r){for(var i=[],o=r.getSelections()||[],s=r.getConfiguration().autoIndent,a=0,u=o;a<u.length;a++){var l=u[a];i.push(new a3e(l,this.down,s))}r.pushUndoStop(),r.executeCommands(this.id,i),r.pushUndoStop()},e}(Ne),f3e=function(n){Un(e,n);function e(){return n.call(this,!1,{id:"editor.action.moveLinesUpAction",label:S("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:528,linux:{primary:528},weight:100},menubarOpts:{menuId:22,group:"2_line",title:S({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})||this}return e}(iJ),h3e=function(n){Un(e,n);function e(){return n.call(this,!0,{id:"editor.action.moveLinesDownAction",label:S("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:530,linux:{primary:530},weight:100},menubarOpts:{menuId:22,group:"2_line",title:S({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})||this}return e}(iJ),oJ=function(n){Un(e,n);function e(t,r){var i=n.call(this,r)||this;return i.descending=t,i}return e.prototype.run=function(t,r){for(var i=r.getSelections()||[],o=0,s=i;o<s.length;o++){var a=s[o];if(!tj.canRun(r.getModel(),a,this.descending))return}for(var u=[],l=0,f=i.length;l<f;l++)u[l]=new tj(i[l],this.descending);r.pushUndoStop(),r.executeCommands(this.id,u),r.pushUndoStop()},e}(Ne),d3e=function(n){Un(e,n);function e(){return n.call(this,!1,{id:"editor.action.sortLinesAscending",label:S("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:P.writable})||this}return e}(oJ),p3e=function(n){Un(e,n);function e(){return n.call(this,!0,{id:"editor.action.sortLinesDescending",label:S("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:P.writable})||this}return e}(oJ),g3e=function(n){Un(e,n);function e(){return n.call(this,{id:e.ID,label:S("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:zi(2089,2102),weight:100}})||this}return e.prototype.run=function(t,r,i){var o=[];i.reason==="auto-save"&&(o=(r.getSelections()||[]).map(function(u){return new $(u.positionLineNumber,u.positionColumn)}));var s=r.getSelection();if(s!==null){var a=new i3e(s,o);r.pushUndoStop(),r.executeCommands(this.id,[a]),r.pushUndoStop()}},e.ID="editor.action.trimTrailingWhitespace",e}(Ne),v3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.deleteLines",label:S("lines.delete","Delete Line"),alias:"Delete Line",precondition:P.writable,kbOpts:{kbExpr:P.textInputFocus,primary:3113,weight:100}})||this}return e.prototype.run=function(t,r){if(r.hasModel()){var i=this._getLinesToRemove(r),o=r.getModel();if(!(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)){for(var s=0,a=[],u=[],l=0,f=i.length;l<f;l++){var h=i[l],d=h.startLineNumber,g=h.endLineNumber,v=1,m=o.getLineMaxColumn(g);g<o.getLineCount()?(g+=1,m=1):d>1&&(d-=1,v=o.getLineMaxColumn(d)),a.push(lr.replace(new Ce(d,v,g,m),"")),u.push(new Ce(d-s,h.positionColumn,d-s,h.positionColumn)),s+=h.endLineNumber-h.startLineNumber+1}r.pushUndoStop(),r.executeEdits(this.id,a,u),r.pushUndoStop()}}},e.prototype._getLinesToRemove=function(t){var r=t.getSelections().map(function(a){var u=a.endLineNumber;return a.startLineNumber<a.endLineNumber&&a.endColumn===1&&(u-=1),{startLineNumber:a.startLineNumber,selectionStartColumn:a.selectionStartColumn,endLineNumber:u,positionColumn:a.positionColumn}});r.sort(function(a,u){return a.startLineNumber===u.startLineNumber?a.endLineNumber-u.endLineNumber:a.startLineNumber-u.startLineNumber});for(var i=[],o=r[0],s=1;s<r.length;s++)o.endLineNumber+1>=r[s].startLineNumber?o.endLineNumber=r[s].endLineNumber:(i.push(o),o=r[s]);return i.push(o),i},e}(Ne),m3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.indentLines",label:S("lines.indent","Indent Line"),alias:"Indent Line",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:2137,weight:100}})||this}return e.prototype.run=function(t,r){var i=r._getCursors();i&&(r.pushUndoStop(),r.executeCommands(this.id,ma.indent(i.context.config,r.getModel(),r.getSelections())),r.pushUndoStop())},e}(Ne),_3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.outdentLines",label:S("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:2135,weight:100}})||this}return e.prototype.run=function(t,r){sR.Outdent.runEditorCommand(t,r,null)},e}(Ne),y3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.insertLineBefore",label:S("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:3075,weight:100}})||this}return e.prototype.run=function(t,r){var i=r._getCursors();i&&(r.pushUndoStop(),r.executeCommands(this.id,ma.lineInsertBefore(i.context.config,r.getModel(),r.getSelections())))},e}(Ne),b3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.insertLineAfter",label:S("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:2051,weight:100}})||this}return e.prototype.run=function(t,r){var i=r._getCursors();i&&(r.pushUndoStop(),r.executeCommands(this.id,ma.lineInsertAfter(i.context.config,r.getModel(),r.getSelections())))},e}(Ne),sJ=function(n){Un(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(t,r){if(r.hasModel()){for(var i=r.getSelection(),o=this._getRangesToDelete(r),s=[],a=0,u=o.length-1;a<u;a++){var l=o[a],f=o[a+1];R.intersectRanges(l,f)===null?s.push(l):o[a+1]=R.plusRange(l,f)}s.push(o[o.length-1]);var h=this._getEndCursorState(i,s),d=s.map(function(g){return lr.replace(g,"")});r.pushUndoStop(),r.executeEdits(this.id,d,h),r.pushUndoStop()}},e}(Ne),w3e=function(n){Un(e,n);function e(){return n.call(this,{id:"deleteAllLeft",label:S("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:P.writable,kbOpts:{kbExpr:P.textInputFocus,primary:0,mac:{primary:2049},weight:100}})||this}return e.prototype._getEndCursorState=function(t,r){var i=null,o=[],s=0;return r.forEach(function(a){var u;if(a.endColumn===1&&s>0){var l=a.startLineNumber-s;u=new Ce(l,a.startColumn,l,a.startColumn)}else u=new Ce(a.startLineNumber,a.startColumn,a.startLineNumber,a.startColumn);s+=a.endLineNumber-a.startLineNumber,a.intersectRanges(t)?i=u:o.push(u)}),i&&o.unshift(i),o},e.prototype._getRangesToDelete=function(t){var r=t.getSelections();if(r===null)return[];var i=r,o=t.getModel();return o===null?[]:(i.sort(R.compareRangesUsingStarts),i=i.map(function(s){if(s.isEmpty())if(s.startColumn===1){var a=Math.max(1,s.startLineNumber-1),u=s.startLineNumber===1?1:o.getLineContent(a).length+1;return new R(a,u,s.startLineNumber,1)}else return new R(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new R(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),i)},e}(sJ),C3e=function(n){Un(e,n);function e(){return n.call(this,{id:"deleteAllRight",label:S("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:P.writable,kbOpts:{kbExpr:P.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})||this}return e.prototype._getEndCursorState=function(t,r){for(var i=null,o=[],s=0,a=r.length,u=0;s<a;s++){var l=r[s],f=new Ce(l.startLineNumber-u,l.startColumn,l.startLineNumber-u,l.startColumn);l.intersectRanges(t)?i=f:o.push(f)}return i&&o.unshift(i),o},e.prototype._getRangesToDelete=function(t){var r=t.getModel();if(r===null)return[];var i=t.getSelections();if(i===null)return[];var o=i.map(function(s){if(s.isEmpty()){var a=r.getLineMaxColumn(s.startLineNumber);return s.startColumn===a?new R(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new R(s.startLineNumber,s.startColumn,s.startLineNumber,a)}return s});return o.sort(R.compareRangesUsingStarts),o},e}(sJ),S3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.joinLines",label:S("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:0,mac:{primary:296},weight:100}})||this}return e.prototype.run=function(t,r){var i=r.getSelections();if(i!==null){var o=r.getSelection();if(o!==null){i.sort(R.compareRangesUsingStarts);var s=[],a=i.reduce(function(X,se){return X.isEmpty()?X.endLineNumber===se.startLineNumber?(o.equalsSelection(X)&&(o=se),se):se.startLineNumber>X.endLineNumber+1?(s.push(X),se):new Ce(X.startLineNumber,X.startColumn,se.endLineNumber,se.endColumn):se.startLineNumber>X.endLineNumber?(s.push(X),se):new Ce(X.startLineNumber,X.startColumn,se.endLineNumber,se.endColumn)});s.push(a);var u=r.getModel();if(u!==null){for(var l=[],f=[],h=o,d=0,g=0,v=s.length;g<v;g++){var m=s[g],y=m.startLineNumber,b=1,C=0,E=void 0,D=void 0,k=u.getLineContent(m.endLineNumber).length-m.endColumn;if(m.isEmpty()||m.startLineNumber===m.endLineNumber){var I=m.getStartPosition();I.lineNumber<u.getLineCount()?(E=y+1,D=u.getLineMaxColumn(E)):(E=I.lineNumber,D=u.getLineMaxColumn(I.lineNumber))}else E=m.endLineNumber,D=u.getLineMaxColumn(E);for(var T=u.getLineContent(y),A=y+1;A<=E;A++){var M=u.getLineContent(A),L=u.getLineFirstNonWhitespaceColumn(A);if(L>=1){var F=!0;T===""&&(F=!1),F&&(T.charAt(T.length-1)===" "||T.charAt(T.length-1)==="	")&&(F=!1,T=T.replace(/[\s\uFEFF\xA0]+$/g," "));var W=M.substr(L-1);T+=(F?" ":"")+W,F?C=W.length+1:C=W.length}else C=0}var z=new R(y,b,E,D);if(!z.isEmpty()){var K=void 0;m.isEmpty()?(l.push(lr.replace(z,T)),K=new Ce(z.startLineNumber-d,T.length-C+1,y-d,T.length-C+1)):m.startLineNumber===m.endLineNumber?(l.push(lr.replace(z,T)),K=new Ce(m.startLineNumber-d,m.startColumn,m.endLineNumber-d,m.endColumn)):(l.push(lr.replace(z,T)),K=new Ce(m.startLineNumber-d,m.startColumn,m.startLineNumber-d,T.length-k)),R.intersectRanges(z,o)!==null?h=K:f.push(K)}d+=z.endLineNumber-z.startLineNumber}f.unshift(h),r.pushUndoStop(),r.executeEdits(this.id,l,f),r.pushUndoStop()}}}},e}(Ne),E3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.transpose",label:S("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:P.writable})||this}return e.prototype.run=function(t,r){var i=r.getSelections();if(i!==null){var o=r.getModel();if(o!==null){for(var s=[],a=0,u=i.length;a<u;a++){var l=i[a];if(l.isEmpty()){var f=l.getStartPosition(),h=o.getLineMaxColumn(f.lineNumber);if(f.column>=h){if(f.lineNumber===o.getLineCount())continue;var d=new R(f.lineNumber,Math.max(1,f.column-1),f.lineNumber+1,1),g=o.getValueInRange(d).split("").reverse().join("");s.push(new ur(new Ce(f.lineNumber,Math.max(1,f.column-1),f.lineNumber+1,1),g))}else{var d=new R(f.lineNumber,Math.max(1,f.column-1),f.lineNumber,f.column+1),g=o.getValueInRange(d).split("").reverse().join("");s.push(new dS(d,g,new Ce(f.lineNumber,f.column+1,f.lineNumber,f.column+1)))}}}r.pushUndoStop(),r.executeCommands(this.id,s),r.pushUndoStop()}}},e}(Ne),h3=function(n){Un(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(t,r){var i=r.getSelections();if(i!==null){var o=r.getModel();if(o!==null){for(var s=r.getConfiguration().wordSeparators,a=[],u=0,l=i.length;u<l;u++){var f=i[u];if(f.isEmpty()){var h=f.getStartPosition(),d=o.getWordAtPosition(h);if(!d)continue;var g=new R(h.lineNumber,d.startColumn,h.lineNumber,d.endColumn),v=o.getValueInRange(g);a.push(new dS(g,this._modifyText(v,s),new Ce(h.lineNumber,h.column,h.lineNumber,h.column)))}else{var v=o.getValueInRange(f);a.push(new dS(f,this._modifyText(v,s),f))}}r.pushUndoStop(),r.executeCommands(this.id,a),r.pushUndoStop()}}},e}(Ne),I3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.transformToUppercase",label:S("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:P.writable})||this}return e.prototype._modifyText=function(t,r){return t.toLocaleUpperCase()},e}(h3),x3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.transformToLowercase",label:S("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:P.writable})||this}return e.prototype._modifyText=function(t,r){return t.toLocaleLowerCase()},e}(h3),D3e=function(n){Un(e,n);function e(){return n.call(this,{id:"editor.action.transformToTitlecase",label:S("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:P.writable})||this}return e.prototype._modifyText=function(t,r){for(var i=`\r
	 `+r,o=i.split(""),s="",a=!0,u=0;u<t.length;u++){var l=t[u];o.indexOf(l)>=0?(a=!0,s+=l):a?(a=!1,s+=l.toLocaleUpperCase()):s+=l.toLocaleLowerCase()}return s},e}(h3);re(l3e);re(c3e);re(f3e);re(h3e);re(d3e);re(p3e);re(g3e);re(v3e);re(m3e);re(_3e);re(y3e);re(b3e);re(w3e);re(C3e);re(S3e);re(E3e);re(I3e);re(x3e);re(D3e);var L3e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),k3e=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},T3e=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},N3e=void 0,A3e=function(){function n(e,t){this._link=e,this._provider=t}return n.prototype.toJSON=function(){return{range:this.range,url:this.url,tooltip:this.tooltip}},Object.defineProperty(n.prototype,"range",{get:function(){return this._link.range},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._link.url},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tooltip",{get:function(){return this._link.tooltip},enumerable:!0,configurable:!0}),n.prototype.resolve=function(e){var t=this;if(this._link.url)try{return typeof this._link.url=="string"?Promise.resolve(bt.parse(this._link.url)):Promise.resolve(this._link.url)}catch{return Promise.reject(new Error("invalid"))}return typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(function(r){return t._link=r||t._link,t._link.url?t.resolve(e):Promise.reject(new Error("missing"))}):Promise.reject(new Error("missing"))},n}(),nj=function(n){L3e(e,n);function e(t){for(var r=n.call(this)||this,i=[],o=function(d,g){var v=d.links.map(function(m){return new A3e(m,g)});i=e._union(i,v),nI(g)&&s._register(g)},s=this,a=0,u=t;a<u.length;a++){var l=u[a],f=l[0],h=l[1];o(f,h)}return r.links=i,r}return e._union=function(t,r){var i=[],o,s,a,u;for(o=0,a=0,s=t.length,u=r.length;o<s&&a<u;){var l=t[o],f=r[a];if(R.areIntersectingOrTouching(l.range,f.range)){o++;continue}var h=R.compareRangesUsingStarts(l.range,f.range);h<0?(i.push(l),o++):(i.push(f),a++)}for(;o<s;o++)i.push(t[o]);for(;a<u;a++)i.push(r[a]);return i},e}(te);function aJ(n,e){var t=[],r=Wy.ordered(n).reverse().map(function(i,o){return Promise.resolve(i.provideLinks(n,e)).then(function(s){s&&(t[o]=[s,i])},ji)});return Promise.all(r).then(function(){var i=new nj(Ol(t));return e.isCancellationRequested?(i.dispose(),new nj([])):i})}oi.registerCommand("_executeLinkProvider",function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return k3e(N3e,void 0,void 0,function(){var r,i,o,s;return T3e(this,function(a){switch(a.label){case 0:return r=e[0],r instanceof bt?(i=n.get(yo).getModel(r),i?[4,aJ(i,Ft.None)]:[2,[]]):[2,[]];case 1:return o=a.sent(),o?(s=o.links.slice(0),o.dispose(),[2,s]):[2,[]]}})})});var O3e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AR=function(){return AR=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},AR.apply(this,arguments)},R3e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rj=function(n,e){return function(t,r){e(t,r,n)}},M3e=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},P3e=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function F3e(n,e){var t=n.url&&/^command:/i.test(n.url.toString()),r=n.tooltip?n.tooltip:t?S("links.navigate.executeCmd","Execute command"):S("links.navigate.follow","Follow link"),i=e?ct?S("links.navigate.kb.meta.mac","cmd + click"):S("links.navigate.kb.meta","ctrl + click"):ct?S("links.navigate.kb.alt.mac","option + click"):S("links.navigate.kb.alt","alt + click");if(n.url){var o=new _d().appendMarkdown("["+r+"]("+n.url.toString()+") ("+i+")");return o.isTrusted=!0,o}else return new _d().appendText(r+" ("+i+")")}var ij={general:tt.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:tt.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})},oj=function(){function n(e,t){this.link=e,this.decorationId=t}return n.decoration=function(e,t){return{range:e.range,options:n._getOptions(e,t,!1)}},n._getOptions=function(e,t,r){var i=AR({},r?ij.active:ij.general);return i.hoverMessage=F3e(e,t),i},n.prototype.activate=function(e,t){e.changeDecorationOptions(this.decorationId,n._getOptions(this.link,t,!0))},n.prototype.deactivate=function(e,t){e.changeDecorationOptions(this.decorationId,n._getOptions(this.link,t,!1))},n}(),uJ=function(){function n(e,t,r){var i=this;this.listenersToRemove=new De,this.editor=e,this.openerService=t,this.notificationService=r;var o=new KQ(e);this.listenersToRemove.add(o),this.listenersToRemove.add(o.onMouseMoveOrRelevantKeyDown(function(s){var a=s[0],u=s[1];i._onEditorMouseMove(a,u)})),this.listenersToRemove.add(o.onExecute(function(s){i.onEditorMouseUp(s)})),this.listenersToRemove.add(o.onCancel(function(s){i.cleanUpActiveLinkDecoration()})),this.enabled=e.getConfiguration().contribInfo.links,this.listenersToRemove.add(e.onDidChangeConfiguration(function(s){var a=e.getConfiguration().contribInfo.links;i.enabled!==a&&(i.enabled=a,i.updateDecorations([]),i.stop(),i.beginCompute())})),this.listenersToRemove.add(e.onDidChangeModelContent(function(s){return i.onChange()})),this.listenersToRemove.add(e.onDidChangeModel(function(s){return i.onModelChanged()})),this.listenersToRemove.add(e.onDidChangeModelLanguage(function(s){return i.onModelModeChanged()})),this.listenersToRemove.add(Wy.onDidChange(function(s){return i.onModelModeChanged()})),this.timeout=new Ho,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}return n.get=function(e){return e.getContribution(n.ID)},n.prototype.getId=function(){return n.ID},n.prototype.onModelChanged=function(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()},n.prototype.onModelModeChanged=function(){this.stop(),this.beginCompute()},n.prototype.onChange=function(){var e=this;this.timeout.setIfNotSet(function(){return e.beginCompute()},n.RECOMPUTE_TIME)},n.prototype.beginCompute=function(){return M3e(this,void 0,void 0,function(){var e,t,r;return P3e(this,function(i){switch(i.label){case 0:if(!this.editor.hasModel()||!this.enabled)return[2];if(e=this.editor.getModel(),!Wy.has(e))return[2];this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Cr(function(o){return aJ(e,o)}),i.label=1;case 1:return i.trys.push([1,3,4,5]),t=this,[4,this.computePromise];case 2:return t.activeLinksList=i.sent(),this.updateDecorations(this.activeLinksList.links),[3,5];case 3:return r=i.sent(),Le(r),[3,5];case 4:return this.computePromise=null,[7];case 5:return[2]}})})},n.prototype.updateDecorations=function(e){for(var t=this.editor.getConfiguration().multiCursorModifier==="altKey",r=[],i=Object.keys(this.currentOccurrences),o=0,s=i.length;o<s;o++){var a=i[o],u=this.currentOccurrences[a];r.push(u.decorationId)}var l=[];if(e)for(var f=0,h=e;f<h.length;f++){var d=h[f];l.push(oj.decoration(d,t))}var g=this.editor.deltaDecorations(r,l);this.currentOccurrences={},this.activeLinkDecorationId=null;for(var o=0,s=g.length;o<s;o++){var u=new oj(e[o],g[o]);this.currentOccurrences[u.decorationId]=u}},n.prototype._onEditorMouseMove=function(e,t){var r=this,i=this.editor.getConfiguration().multiCursorModifier==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();var o=this.getLinkOccurrence(e.target.position);o&&this.editor.changeDecorations(function(s){o.activate(s,i),r.activeLinkDecorationId=o.decorationId})}else this.cleanUpActiveLinkDecoration()},n.prototype.cleanUpActiveLinkDecoration=function(){var e=this.editor.getConfiguration().multiCursorModifier==="altKey";if(this.activeLinkDecorationId){var t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(function(r){t.deactivate(r,e)}),this.activeLinkDecorationId=null}},n.prototype.onEditorMouseUp=function(e){if(this.isEnabled(e)){var t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier)}},n.prototype.openLinkOccurrence=function(e,t){var r=this;if(this.openerService){var i=e.link;i.resolve(Ft.None).then(function(o){return r.openerService.open(o,{openToSide:t})},function(o){var s=o instanceof Error?o.message:o;s==="invalid"?r.notificationService.warn(S("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):s==="missing"?r.notificationService.warn(S("missing.url","Failed to open this link because its target is missing.")):Le(o)})}},n.prototype.getLinkOccurrence=function(e){if(!this.editor.hasModel()||!e)return null;for(var t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0),r=0,i=t;r<i.length;r++){var o=i[r],s=this.currentOccurrences[o.id];if(s)return s}return null},n.prototype.isEnabled=function(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))},n.prototype.stop=function(){this.timeout.cancel(),this.activeLinksList&&this.activeLinksList.dispose(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)},n.prototype.dispose=function(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()},n.ID="editor.linkDetector",n.RECOMPUTE_TIME=1e3,n=R3e([rj(1,rf),rj(2,Hr)],n),n}(),B3e=function(n){O3e(e,n);function e(){return n.call(this,{id:"editor.action.openLink",label:S("label","Open Link"),alias:"Open Link",precondition:void 0})||this}return e.prototype.run=function(t,r){var i=uJ.get(r);if(i&&r.hasModel())for(var o=r.getSelections(),s=0,a=o;s<a.length;s++){var u=a[s],l=i.getLinkOccurrence(u.getEndPosition());l&&i.openLinkOccurrence(l,!1)}},e}(Ne);tn(uJ);re(B3e);Xt(function(n,e){var t=n.getColor(QF);t&&e.addRule(".monaco-editor .detected-link-active { color: "+t+" !important; }")});var Uo=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),W3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.insertCursorAbove",label:S("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:P.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menubarOpts:{menuId:22,group:"3_multi",title:S({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})||this}return e.prototype.run=function(t,r,i){if(r.hasModel()){var o=i&&i.logicalLine===!0,s=r._getCursors(),a=s.context;a.config.readOnly||(a.model.pushStackElement(),s.setStates(i.source,3,Tr.addCursorUp(a,s.getAll(),o)),s.reveal(!0,1,0))}},e}(Ne),V3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.insertCursorBelow",label:S("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:P.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menubarOpts:{menuId:22,group:"3_multi",title:S({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})||this}return e.prototype.run=function(t,r,i){if(r.hasModel()){var o=i&&i.logicalLine===!0,s=r._getCursors(),a=s.context;a.config.readOnly||(a.model.pushStackElement(),s.setStates(i.source,3,Tr.addCursorDown(a,s.getAll(),o)),s.reveal(!0,2,0))}},e}(Ne),H3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.insertCursorAtEndOfEachLineSelected",label:S("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:P.editorTextFocus,primary:1575,weight:100},menubarOpts:{menuId:22,group:"3_multi",title:S({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})||this}return e.prototype.getCursorsForSelection=function(t,r,i){if(!t.isEmpty()){for(var o=t.startLineNumber;o<t.endLineNumber;o++){var s=r.getLineMaxColumn(o);i.push(new Ce(o,s,o,s))}t.endColumn>1&&i.push(new Ce(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn))}},e.prototype.run=function(t,r){var i=this;if(r.hasModel()){var o=r.getModel(),s=r.getSelections(),a=[];s.forEach(function(u){return i.getCursorsForSelection(u,o,a)}),a.length>0&&r.setSelections(a)}},e}(Ne),U3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.addCursorsToBottom",label:S("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})||this}return e.prototype.run=function(t,r){if(r.hasModel()){for(var i=r.getSelections(),o=r.getModel().getLineCount(),s=[],a=i[0].startLineNumber;a<=o;a++)s.push(new Ce(a,i[0].startColumn,a,i[0].endColumn));s.length>0&&r.setSelections(s)}},e}(Ne),j3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.addCursorsToTop",label:S("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})||this}return e.prototype.run=function(t,r){if(r.hasModel()){for(var i=r.getSelections(),o=[],s=i[0].startLineNumber;s>=1;s--)o.push(new Ce(s,i[0].startColumn,s,i[0].endColumn));o.length>0&&r.setSelections(o)}},e}(Ne),SC=function(){function n(e,t,r){this.selections=e,this.revealRange=t,this.revealScrollType=r}return n}(),lJ=function(){function n(e,t,r,i,o,s,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=r,this.searchText=i,this.wholeWord=o,this.matchCase=s,this.currentMatch=a}return n.create=function(e,t){if(!e.hasModel())return null;var r=t.getState();if(!e.hasTextFocus()&&r.isRevealed&&r.searchString.length>0)return new n(e,t,!1,r.searchString,r.wholeWord,r.matchCase,null);var i=!1,o,s,a=e.getSelections();a.length===1&&a[0].isEmpty()?(i=!0,o=!0,s=!0):(o=r.wholeWord,s=r.matchCase);var u=e.getSelection(),l,f=null;if(u.isEmpty()){var h=e.getModel().getWordAtPosition(u.getStartPosition());if(!h)return null;l=h.word,f=new Ce(u.startLineNumber,h.startColumn,u.startLineNumber,h.endColumn)}else l=e.getModel().getValueInRange(u).replace(/\r\n/g,`
`);return new n(e,t,i,l,o,s,f)},n.prototype.addSelectionToNextFindMatch=function(){if(!this._editor.hasModel())return null;var e=this._getNextMatch();if(!e)return null;var t=this._editor.getSelections();return new SC(t.concat(e),e,0)},n.prototype.moveSelectionToNextFindMatch=function(){if(!this._editor.hasModel())return null;var e=this._getNextMatch();if(!e)return null;var t=this._editor.getSelections();return new SC(t.slice(0,t.length-1).concat(e),e,0)},n.prototype._getNextMatch=function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();var t=this._editor.getSelections(),r=t[t.length-1],i=this._editor.getModel().findNextMatch(this.searchText,r.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1);return i?new Ce(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null},n.prototype.addSelectionToPreviousFindMatch=function(){if(!this._editor.hasModel())return null;var e=this._getPreviousMatch();if(!e)return null;var t=this._editor.getSelections();return new SC(t.concat(e),e,0)},n.prototype.moveSelectionToPreviousFindMatch=function(){if(!this._editor.hasModel())return null;var e=this._getPreviousMatch();if(!e)return null;var t=this._editor.getSelections();return new SC(t.slice(0,t.length-1).concat(e),e,0)},n.prototype._getPreviousMatch=function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();var t=this._editor.getSelections(),r=t[t.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,r.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1);return i?new Ce(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null},n.prototype.selectAll=function(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1,1073741824)):[]},n}(),d3=function(n){Uo(e,n);function e(t){var r=n.call(this)||this;return r._sessionDispose=r._register(new De),r._editor=t,r._ignoreSelectionChange=!1,r._session=null,r}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.dispose=function(){this._endSession(),n.prototype.dispose.call(this)},e.prototype.getId=function(){return e.ID},e.prototype._beginSessionIfNeeded=function(t){var r=this;if(!this._session){var i=lJ.create(this._editor,t);if(!i)return;this._session=i;var o={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(o.wholeWordOverride=1,o.matchCaseOverride=1,o.isRegexOverride=2),t.getState().change(o,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(function(s){r._ignoreSelectionChange||r._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(function(){r._endSession()})),this._sessionDispose.add(t.getState().onFindReplaceStateChange(function(s){(s.matchCase||s.wholeWord)&&r._endSession()}))}},e.prototype._endSession=function(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){var t={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(t,!1)}this._session=null},e.prototype._setSelections=function(t){this._ignoreSelectionChange=!0,this._editor.setSelections(t),this._ignoreSelectionChange=!1},e.prototype._expandEmptyToWord=function(t,r){if(!r.isEmpty())return r;var i=t.getWordAtPosition(r.getStartPosition());return i?new Ce(r.startLineNumber,i.startColumn,r.startLineNumber,i.endColumn):r},e.prototype._applySessionResult=function(t){t&&(this._setSelections(t.selections),t.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(t.revealRange,t.revealScrollType))},e.prototype.getSession=function(t){return this._session},e.prototype.addSelectionToNextFindMatch=function(t){if(this._editor.hasModel()){if(!this._session){var r=this._editor.getSelections();if(r.length>1){var i=t.getState(),o=i.matchCase,s=cJ(this._editor.getModel(),r,o);if(!s){for(var a=this._editor.getModel(),u=[],l=0,f=r.length;l<f;l++)u[l]=this._expandEmptyToWord(a,r[l]);this._editor.setSelections(u);return}}}this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}},e.prototype.addSelectionToPreviousFindMatch=function(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())},e.prototype.moveSelectionToNextFindMatch=function(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())},e.prototype.moveSelectionToPreviousFindMatch=function(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())},e.prototype.selectAll=function(t){if(this._editor.hasModel()){var r=null,i=t.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex)r=this._editor.getModel().findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1,1073741824);else{if(this._beginSessionIfNeeded(t),!this._session)return;r=this._session.selectAll()}if(r.length>0){for(var o=this._editor.getSelection(),s=0,a=r.length;s<a;s++){var u=r[s],l=u.range.intersectRanges(o);if(l){r[s]=r[0],r[0]=u;break}}this._setSelections(r.map(function(f){return new Ce(f.range.startLineNumber,f.range.startColumn,f.range.endLineNumber,f.range.endColumn)}))}}},e.ID="editor.contrib.multiCursorController",e}(te),$v=function(n){Uo(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(t,r){var i=d3.get(r);if(i){var o=Iu.get(r);o&&this._run(i,o)}},e}(Ne),z3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.addSelectionToNextFindMatch",label:S("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:2082,weight:100},menubarOpts:{menuId:22,group:"3_multi",title:S({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})||this}return e.prototype._run=function(t,r){t.addSelectionToNextFindMatch(r)},e}($v),q3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.addSelectionToPreviousFindMatch",label:S("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menubarOpts:{menuId:22,group:"3_multi",title:S({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})||this}return e.prototype._run=function(t,r){t.addSelectionToPreviousFindMatch(r)},e}($v),$3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.moveSelectionToNextFindMatch",label:S("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:zi(2089,2082),weight:100}})||this}return e.prototype._run=function(t,r){t.moveSelectionToNextFindMatch(r)},e}($v),K3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.moveSelectionToPreviousFindMatch",label:S("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})||this}return e.prototype._run=function(t,r){t.moveSelectionToPreviousFindMatch(r)},e}($v),G3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.selectHighlights",label:S("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:3114,weight:100},menubarOpts:{menuId:22,group:"3_multi",title:S({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})||this}return e.prototype._run=function(t,r){t.selectAll(r)},e}($v),Y3e=function(n){Uo(e,n);function e(){return n.call(this,{id:"editor.action.changeAll",label:S("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:P.writable,kbOpts:{kbExpr:P.editorTextFocus,primary:2108,weight:100},menuOpts:{group:"1_modification",order:1.2}})||this}return e.prototype._run=function(t,r){t.selectAll(r)},e}($v),sj=function(){function n(e,t,r){this.searchText=e,this.matchCase=t,this.wordSeparators=r}return n.softEquals=function(e,t){return!e&&!t?!0:!e||!t?!1:e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators},n}(),Z3e=function(n){Uo(e,n);function e(t){var r=n.call(this)||this;return r.editor=t,r._isEnabled=t.getConfiguration().contribInfo.selectionHighlight,r.decorations=[],r.updateSoon=r._register(new hr(function(){return r._update()},300)),r.state=null,r._register(t.onDidChangeConfiguration(function(i){r._isEnabled=t.getConfiguration().contribInfo.selectionHighlight})),r._register(t.onDidChangeCursorSelection(function(i){r._isEnabled&&(i.selection.isEmpty()?i.reason===3?(r.state&&r._setState(null),r.updateSoon.schedule()):r._setState(null):r._update())})),r._register(t.onDidChangeModel(function(i){r._setState(null)})),r._register(Iu.get(t).getState().onFindReplaceStateChange(function(i){r._update()})),r}return e.prototype.getId=function(){return e.ID},e.prototype._update=function(){this._setState(e._createState(this._isEnabled,this.editor))},e._createState=function(t,r){if(!t||!r.hasModel())return null;var i=r.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;var o=d3.get(r);if(!o)return null;var s=Iu.get(r);if(!s)return null;var a=o.getSession(s);if(!a){var u=r.getSelections();if(u.length>1){var l=s.getState(),f=l.matchCase,h=cJ(r.getModel(),u,f);if(!h)return null}a=lJ.create(r,s)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;var d=s.getState(),g=d.matchCase;if(d.isRevealed){var v=d.searchString;g||(v=v.toLowerCase());var m=a.searchText;if(g||(m=m.toLowerCase()),v===m&&a.matchCase===d.matchCase&&a.wholeWord===d.wholeWord&&!d.isRegex)return null}return new sj(a.searchText,a.matchCase,a.wholeWord?r.getConfiguration().wordSeparators:null)},e.prototype._setState=function(t){if(sj.softEquals(this.state,t)){this.state=t;return}if(this.state=t,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(this.editor.hasModel()){var r=this.editor.getModel();if(!r.isTooLargeForTokenization()){var i=$g.has(r),o=r.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map(function(m){return m.range});o.sort(R.compareRangesUsingStarts);var s=this.editor.getSelections();s.sort(R.compareRangesUsingStarts);for(var a=[],u=0,l=0,f=o.length,h=s.length;u<f;){var d=o[u];if(l>=h)a.push(d),u++;else{var g=R.compareRangesUsingStarts(d,s[l]);g<0?((s[l].isEmpty()||!R.areIntersecting(d,s[l]))&&a.push(d),u++):(g>0||u++,l++)}}var v=a.map(function(m){return{range:m,options:i?e._SELECTION_HIGHLIGHT:e._SELECTION_HIGHLIGHT_OVERVIEW}});this.decorations=this.editor.deltaDecorations(this.decorations,v)}}},e.prototype.dispose=function(){this._setState(null),n.prototype.dispose.call(this)},e.ID="editor.contrib.selectionHighlighter",e._SELECTION_HIGHLIGHT_OVERVIEW=tt.register({stickiness:1,className:"selectionHighlight",overviewRuler:{color:os(XY),position:hs.Center}}),e._SELECTION_HIGHLIGHT=tt.register({stickiness:1,className:"selectionHighlight"}),e}(te);function cJ(n,e,t){for(var r=aj(n,e[0],!t),i=1,o=e.length;i<o;i++){var s=e[i];if(s.isEmpty())return!1;var a=aj(n,s,!t);if(r!==a)return!1}return!0}function aj(n,e,t){var r=n.getValueInRange(e);return t?r.toLowerCase():r}tn(d3);tn(Z3e);re(W3e);re(V3e);re(H3e);re(z3e);re(q3e);re($3e);re(K3e);re(G3e);re(Y3e);re(U3e);re(j3e);var X3e=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},Q3e=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},J3e=void 0,yd={Visible:new Re("parameterHintsVisible",!1),MultipleSignatures:new Re("parameterHintsMultipleSignatures",!1)};function fJ(n,e,t,r){var i=Yh.ordered(n);return JP(i.map(function(o){return function(){return Promise.resolve(o.provideSignatureHelp(n,e,r,t)).catch(function(s){return ji(s)})}}))}Ra("_executeSignatureHelpProvider",function(n,e,t){return X3e(J3e,void 0,void 0,function(){var r;return Q3e(this,function(i){switch(i.label){case 0:return[4,fJ(n,e,{triggerKind:Gh.Invoke,isRetrigger:!1,triggerCharacter:t.triggerCharacter},Ft.None)];case 1:return r=i.sent(),r?(setTimeout(function(){return r.dispose()},0),[2,r.value]):[2,void 0]}})})});var e4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OR=function(){return OR=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},OR.apply(this,arguments)},dc;(function(n){n.Default=new(function(){function r(){this.type=0}return r}());var e=function(){function r(i){this.request=i,this.type=2}return r}();n.Pending=e;var t=function(){function r(i){this.hints=i,this.type=1}return r}();n.Active=t})(dc||(dc={}));var t4e=function(n){e4e(e,n);function e(t,r){r===void 0&&(r=e.DEFAULT_DELAY);var i=n.call(this)||this;return i._onChangedHints=i._register(new j),i.onChangedHints=i._onChangedHints.event,i.triggerOnType=!1,i._state=dc.Default,i._lastSignatureHelpResult=i._register(new df),i.triggerChars=new sg,i.retriggerChars=new sg,i.triggerId=0,i.editor=t,i.throttledDelayer=new Rv(r),i._register(i.editor.onDidChangeConfiguration(function(){return i.onEditorConfigurationChange()})),i._register(i.editor.onDidChangeModel(function(o){return i.onModelChanged()})),i._register(i.editor.onDidChangeModelLanguage(function(o){return i.onModelChanged()})),i._register(i.editor.onDidChangeCursorSelection(function(o){return i.onCursorChange(o)})),i._register(i.editor.onDidChangeModelContent(function(o){return i.onModelContentChange()})),i._register(Yh.onDidChange(i.onModelChanged,i)),i._register(i.editor.onDidType(function(o){return i.onDidType(o)})),i.onEditorConfigurationChange(),i.onModelChanged(),i}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state.type===2&&this._state.request.cancel(),this._state=t},enumerable:!0,configurable:!0}),e.prototype.cancel=function(t){t===void 0&&(t=!1),this.state=dc.Default,this.throttledDelayer.cancel(),t||this._onChangedHints.fire(void 0)},e.prototype.trigger=function(t,r){var i=this,o=this.editor.getModel();if(!(!o||!Yh.has(o))){var s=++this.triggerId;this.throttledDelayer.trigger(function(){return i.doTrigger({triggerKind:t.triggerKind,triggerCharacter:t.triggerCharacter,isRetrigger:i.state.type===1||i.state.type===2,activeSignatureHelp:i.state.type===1?i.state.hints:void 0},s)},r).then(void 0,Le)}},e.prototype.next=function(){if(this.state.type===1){var t=this.state.hints.signatures.length,r=this.state.hints.activeSignature,i=r%t===t-1,o=this.editor.getConfiguration().contribInfo.parameterHints.cycle;if((t<2||i)&&!o){this.cancel();return}this.updateActiveSignature(i&&o?0:r+1)}},e.prototype.previous=function(){if(this.state.type===1){var t=this.state.hints.signatures.length,r=this.state.hints.activeSignature,i=r===0,o=this.editor.getConfiguration().contribInfo.parameterHints.cycle;if((t<2||i)&&!o){this.cancel();return}this.updateActiveSignature(i&&o?t-1:r-1)}},e.prototype.updateActiveSignature=function(t){this.state.type===1&&(this.state=new dc.Active(OR({},this.state.hints,{activeSignature:t})),this._onChangedHints.fire(this.state.hints))},e.prototype.doTrigger=function(t,r){var i=this;if(this.cancel(!0),!this.editor.hasModel())return Promise.resolve(!1);var o=this.editor.getModel(),s=this.editor.getPosition();return this.state=new dc.Pending(Cr(function(a){return fJ(o,s,t,a)})),this.state.request.then(function(a){return r!==i.triggerId?(a&&a.dispose(),!1):!a||!a.value.signatures||a.value.signatures.length===0?(a&&a.dispose(),i._lastSignatureHelpResult.clear(),i.cancel(),!1):(i.state=new dc.Active(a.value),i._lastSignatureHelpResult.value=a,i._onChangedHints.fire(i.state.hints),!0)}).catch(function(a){return r===i.triggerId&&(i.state=dc.Default),Le(a),!1})},Object.defineProperty(e.prototype,"isTriggered",{get:function(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()},enumerable:!0,configurable:!0}),e.prototype.onModelChanged=function(){this.cancel(),this.triggerChars=new sg,this.retriggerChars=new sg;var t=this.editor.getModel();if(t)for(var r=0,i=Yh.ordered(t);r<i.length;r++){for(var o=i[r],s=0,a=o.signatureHelpTriggerCharacters||[];s<a.length;s++){var u=a[s];this.triggerChars.add(u.charCodeAt(0)),this.retriggerChars.add(u.charCodeAt(0))}for(var l=0,f=o.signatureHelpRetriggerCharacters||[];l<f.length;l++){var u=f[l];this.retriggerChars.add(u.charCodeAt(0))}}},e.prototype.onDidType=function(t){if(this.triggerOnType){var r=t.length-1,i=t.charCodeAt(r);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:Gh.TriggerCharacter,triggerCharacter:t.charAt(r)})}},e.prototype.onCursorChange=function(t){t.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Gh.ContentChange})},e.prototype.onModelContentChange=function(){this.isTriggered&&this.trigger({triggerKind:Gh.ContentChange})},e.prototype.onEditorConfigurationChange=function(){this.triggerOnType=this.editor.getConfiguration().contribInfo.parameterHints.enabled,this.triggerOnType||this.cancel()},e.prototype.dispose=function(){this.cancel(!0),n.prototype.dispose.call(this)},e.DEFAULT_DELAY=120,e}(te),n4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),r4e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_N=function(n,e){return function(t,r){e(t,r,n)}},Do=ke,i4e=function(n){n4e(e,n);function e(t,r,i,o){var s=n.call(this)||this;return s.editor=t,s.renderDisposeables=s._register(new De),s.model=s._register(new df),s.allowEditorOverflow=!0,s.markdownRenderer=s._register(new $I(t,o,i)),s.model.value=new t4e(t),s.keyVisible=yd.Visible.bindTo(r),s.keyMultipleSignatures=yd.MultipleSignatures.bindTo(r),s.visible=!1,s._register(s.model.value.onChangedHints(function(a){a?(s.show(),s.render(a)):s.hide()})),s}return e.prototype.createParamaterHintDOMNodes=function(){var t=this;this.element=Do(".editor-widget.parameter-hints-widget");var r=ce(this.element,Do(".wrapper"));r.tabIndex=-1;var i=ce(r,Do(".buttons")),o=ce(i,Do(".button.previous")),s=ce(i,Do(".button.next")),a=r8(pt(o,"click"));this._register(a(this.previous,this));var u=r8(pt(s,"click"));this._register(u(this.next,this)),this.overloads=ce(r,Do(".overloads"));var l=Do(".body");this.scrollbar=new Z0(l,{}),this._register(this.scrollbar),r.appendChild(this.scrollbar.getDomNode()),this.signature=ce(l,Do(".signature")),this.docs=ce(l,Do(".docs")),this.editor.addContentWidget(this),this.hide(),this.element.style.userSelect="text",this._register(this.editor.onDidChangeCursorSelection(function(h){t.visible&&t.editor.layoutContentWidget(t)}));var f=function(){var h=t.editor.getConfiguration().fontInfo;t.element.style.fontSize=h.fontSize+"px"};f(),this._register(We.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function(h){return h.fontInfo}).on(f,null)),this._register(this.editor.onDidLayoutChange(function(h){return t.updateMaxHeight()})),this.updateMaxHeight()},e.prototype.show=function(){var t=this;!this.model||this.visible||(this.element||this.createParamaterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(function(){return de(t.element,"visible")},100),this.editor.layoutContentWidget(this))},e.prototype.hide=function(){!this.model||!this.visible||(this.element||this.createParamaterHintDOMNodes(),this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,qe(this.element,"visible"),this.editor.layoutContentWidget(this))},e.prototype.getPosition=function(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null},e.prototype.render=function(t){var r=t.signatures.length>1;vt(this.element,"multiple",r),this.keyMultipleSignatures.set(r),this.signature.innerHTML="",this.docs.innerHTML="";var i=t.signatures[t.activeSignature];if(i){var o=ce(this.signature,Do(".code")),s=i.parameters.length>0,a=this.editor.getConfiguration().fontInfo;if(o.style.fontSize=a.fontSize+"px",o.style.fontFamily=a.fontFamily,s)this.renderParameters(o,i,t.activeParameter);else{var u=ce(o,Do("span"));u.textContent=i.label}this.renderDisposeables.clear();var l=i.parameters[t.activeParameter];if(l&&l.documentation){var f=Do("span.documentation");if(typeof l.documentation=="string")f.textContent=l.documentation;else{var h=this.markdownRenderer.render(l.documentation);de(h.element,"markdown-docs"),this.renderDisposeables.add(h),f.appendChild(h.element)}ce(this.docs,Do("p",{},f))}if(i.documentation!==void 0)if(typeof i.documentation=="string")ce(this.docs,Do("p",{},i.documentation));else{var h=this.markdownRenderer.render(i.documentation);de(h.element,"markdown-docs"),this.renderDisposeables.add(h),ce(this.docs,h.element)}var d=!1;l&&typeof l.documentation=="string"&&l.documentation.length>0&&(d=!0),l&&typeof l.documentation=="object"&&l.documentation.value.length>0&&(d=!0),typeof i.documentation=="string"&&i.documentation.length>0&&(d=!0),typeof i.documentation=="object"&&i.documentation.value.length>0&&(d=!0),vt(this.signature,"has-docs",d),vt(this.docs,"empty",!d);var g=String(t.activeSignature+1);if(t.signatures.length<10&&(g+="/"+t.signatures.length),this.overloads.textContent=g,l){var v=this.getParameterLabel(i,t.activeParameter);this.announcedLabel!==v&&(pi(S("hint","{0}, hint",v)),this.announcedLabel=v)}this.editor.layoutContentWidget(this),this.scrollbar.scanDomNode()}},e.prototype.renderParameters=function(t,r,i){var o=this.getParameterLabelOffsets(r,i),s=o[0],a=o[1],u=document.createElement("span");u.textContent=r.label.substring(0,s);var l=document.createElement("span");l.textContent=r.label.substring(s,a),l.className="parameter active";var f=document.createElement("span");f.textContent=r.label.substring(a),ce(t,u,l,f)},e.prototype.getParameterLabel=function(t,r){var i=t.parameters[r];return typeof i.label=="string"?i.label:t.label.substring(i.label[0],i.label[1])},e.prototype.getParameterLabelOffsets=function(t,r){var i=t.parameters[r];if(i){if(Array.isArray(i.label))return i.label;var o=t.label.lastIndexOf(i.label);return o>=0?[o,o+i.label.length]:[0,0]}else return[0,0]},e.prototype.next=function(){this.model.value&&(this.editor.focus(),this.model.value.next())},e.prototype.previous=function(){this.model.value&&(this.editor.focus(),this.model.value.previous())},e.prototype.cancel=function(){this.model.value&&this.model.value.cancel()},e.prototype.getDomNode=function(){return this.element},e.prototype.getId=function(){return e.ID},e.prototype.trigger=function(t){this.model.value&&this.model.value.trigger(t,0)},e.prototype.updateMaxHeight=function(){var t=Math.max(this.editor.getLayoutInfo().height/4,250);this.element.style.maxHeight=t+"px"},e.ID="editor.widget.parameterHintsWidget",e=r4e([_N(1,rt),_N(2,rf),_N(3,mf)],e),e}(te);Xt(function(n,e){var t=n.getColor(XF);if(t){var r=n.type===Xg?2:1;e.addRule(".monaco-editor .parameter-hints-widget { border: "+r+"px solid "+t+"; }"),e.addRule(".monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid "+t.transparent(.5)+"; }"),e.addRule(".monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid "+t.transparent(.5)+"; }")}var i=n.getColor(gd);i&&e.addRule(".monaco-editor .parameter-hints-widget { background-color: "+i+"; }");var o=n.getColor(yI);o&&e.addRule(".monaco-editor .parameter-hints-widget a { color: "+o+"; }");var s=n.getColor(VF);s&&e.addRule(".monaco-editor .parameter-hints-widget code { background-color: "+s+"; }")});var hJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),o4e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},s4e=function(n,e){return function(t,r){e(t,r,n)}},p3=function(n){hJ(e,n);function e(t,r){var i=n.call(this)||this;return i.editor=t,i.widget=i._register(r.createInstance(i4e,i.editor)),i}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.cancel=function(){this.widget.cancel()},e.prototype.previous=function(){this.widget.previous()},e.prototype.next=function(){this.widget.next()},e.prototype.trigger=function(t){this.widget.trigger(t)},e.ID="editor.controller.parameterHints",e=o4e([s4e(1,Hn)],e),e}(te),a4e=function(n){hJ(e,n);function e(){return n.call(this,{id:"editor.action.triggerParameterHints",label:S("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:P.hasSignatureHelpProvider,kbOpts:{kbExpr:P.editorTextFocus,primary:3082,weight:100}})||this}return e.prototype.run=function(t,r){var i=p3.get(r);i&&i.trigger({triggerKind:Gh.Invoke})},e}(Ne);tn(p3);re(a4e);var g3=175,v3=$i.bindToContribution(p3.get);ee(new v3({id:"closeParameterHints",precondition:yd.Visible,handler:function(n){return n.cancel()},kbOpts:{weight:g3,kbExpr:P.focus,primary:9,secondary:[1033]}}));ee(new v3({id:"showPrevParameterHint",precondition:_e.and(yd.Visible,yd.MultipleSignatures),handler:function(n){return n.previous()},kbOpts:{weight:g3,kbExpr:P.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));ee(new v3({id:"showNextParameterHint",precondition:_e.and(yd.Visible,yd.MultipleSignatures),handler:function(n){return n.next()},kbOpts:{weight:g3,kbExpr:P.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var u4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),l4e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},c4e=function(n,e){return function(t,r){e(t,r,n)}},m3={getMetaTitle:function(n){return n.references.length>1?S("meta.titleReference","  {0} references",n.references.length):""}},f4e=function(){function n(e,t){e instanceof o3&&xl.inPeekEditor.bindTo(t)}return n.prototype.dispose=function(){},n.prototype.getId=function(){return n.ID},n.ID="editor.contrib.referenceController",n=l4e([c4e(1,rt)],n),n}(),h4e=function(n){u4e(e,n);function e(){return n.call(this,{id:"editor.action.referenceSearch.trigger",label:S("references.action.label","Peek References"),alias:"Peek References",precondition:_e.and(P.hasReferenceProvider,xl.notInPeekEditor,P.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:P.editorTextFocus,primary:1094,weight:100},menuOpts:{group:"navigation",order:1.5}})||this}return e.prototype.run=function(t,r){var i=qv.get(r);if(i&&r.hasModel()){var o=r.getSelection(),s=r.getModel(),a=Cr(function(u){return _3(s,o.getStartPosition(),u).then(function(l){return new rv(l)})});i.toggleWidget(o,a,m3)}},e}(Ne);tn(f4e);re(h4e);var d4e=function(n,e,t){if(!(e instanceof bt))throw new Error("illegal argument, uri");if(!t)throw new Error("illegal argument, position");var r=n.get(an);return r.openCodeEditor({resource:e},r.getFocusedCodeEditor()).then(function(i){if(!(!Su(i)||!i.hasModel())){var o=qv.get(i);if(o){var s=Cr(function(u){return _3(i.getModel(),$.lift(t),u).then(function(l){return new rv(l)})}),a=new R(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(o.toggleWidget(a,s,m3))}}})},p4e=function(n,e,t,r){if(!(e instanceof bt))throw new Error("illegal argument, uri expected");if(!r)throw new Error("missing references");var i=n.get(an);return i.openCodeEditor({resource:e},i.getFocusedCodeEditor()).then(function(o){if(Su(o)){var s=qv.get(o);if(s)return s.toggleWidget(new R(t.lineNumber,t.column,t.lineNumber,t.column),Cr(function(a){return Promise.resolve(new rv(r))}),m3)}})};oi.registerCommand({id:"editor.action.findReferences",handler:d4e});oi.registerCommand({id:"editor.action.showReferences",handler:p4e,description:{description:"Show references at a position in a file",args:[{name:"uri",description:"The text document in which to show references",constraint:bt},{name:"position",description:"The position at which to show",constraint:$.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array}]}});function dJ(n,e){Kv(n,function(t){return t.closeWidget()})}function g4e(n,e){var t=n.get(jv),r=t.lastFocusedList&&t.lastFocusedList.getFocus();r instanceof tv&&Kv(n,function(i){return i.openReference(r,!0)})}function Kv(n,e){var t=oFe(n);if(t){var r=qv.get(t);r&&e(r)}}ws.registerCommandAndKeybindingRule({id:"goToNextReference",weight:250,primary:62,when:ub,handler:function(n){Kv(n,function(e){e.goToNextOrPreviousReference(!0)})}});ws.registerCommandAndKeybindingRule({id:"goToNextReferenceFromEmbeddedEditor",weight:150,primary:62,when:xl.inPeekEditor,handler:function(n){Kv(n,function(e){e.goToNextOrPreviousReference(!0)})}});ws.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:250,primary:1086,when:ub,handler:function(n){Kv(n,function(e){e.goToNextOrPreviousReference(!1)})}});ws.registerCommandAndKeybindingRule({id:"goToPreviousReferenceFromEmbeddedEditor",weight:150,primary:1086,when:xl.inPeekEditor,handler:function(n){Kv(n,function(e){e.goToNextOrPreviousReference(!1)})}});ws.registerCommandAndKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:_e.and(ub,_e.not("config.editor.stablePeek")),handler:dJ});ws.registerCommandAndKeybindingRule({id:"closeReferenceSearchEditor",weight:-1,primary:9,secondary:[1033],when:_e.and(xl.inPeekEditor,_e.not("config.editor.stablePeek")),handler:dJ});ws.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:_e.and(ub,PQ),handler:g4e});function _3(n,e,t){var r=Q1.ordered(n).map(function(i){return Promise.resolve(i.provideReferences(n,e,{includeDeclaration:!0},t)).then(function(o){if(Array.isArray(o))return o},function(o){ji(o)})});return Promise.all(r).then(function(i){return Ly(Ol(i))})}Ra("_executeReferenceProvider",function(n,e){return _3(n,e,Ft.None)});var y3=new Re("renameInputVisible",!1),v4e=function(){function n(e,t,r){var i=this;this.themeService=t,this._disposables=new De,this.allowEditorOverflow=!0,this._currentAcceptInput=null,this._currentCancelInput=null,this._visibleContextKey=y3.bindTo(r),this._editor=e,this._editor.addContentWidget(this),this._disposables.add(e.onDidChangeConfiguration(function(o){o.fontInfo&&i.updateFont()})),this._disposables.add(t.onThemeChange(function(o){return i.onThemeChange(o)}))}return n.prototype.onThemeChange=function(e){this.updateStyles(e)},n.prototype.dispose=function(){this._disposables.dispose(),this._editor.removeContentWidget(this)},n.prototype.getId=function(){return"__renameInputWidget"},n.prototype.getDomNode=function(){return this._domNode||(this._inputField=document.createElement("input"),this._inputField.className="rename-input",this._inputField.type="text",this._inputField.setAttribute("aria-label",S("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode=document.createElement("div"),this._domNode.style.height=this._editor.getConfiguration().lineHeight+"px",this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputField),this.updateFont(),this.updateStyles(this.themeService.getTheme())),this._domNode},n.prototype.updateStyles=function(e){if(this._inputField){var t=e.getColor(HF),r=e.getColor(UF),i=e.getColor(Bd),o=e.getColor(jF);this._inputField.style.backgroundColor=t?t.toString():null,this._inputField.style.color=r?r.toString():null,this._inputField.style.borderWidth=o?"1px":"0px",this._inputField.style.borderStyle=o?"solid":"none",this._inputField.style.borderColor=o?o.toString():"none",this._domNode.style.boxShadow=i?" 0 2px 8px "+i:null}},n.prototype.updateFont=function(){if(this._inputField){var e=this._editor.getConfiguration().fontInfo;this._inputField.style.fontFamily=e.fontFamily,this._inputField.style.fontWeight=e.fontWeight,this._inputField.style.fontSize=e.fontSize+"px"}},n.prototype.getPosition=function(){return this._visible?{position:this._position,preference:[2,1]}:null},n.prototype.acceptInput=function(){this._currentAcceptInput&&this._currentAcceptInput()},n.prototype.cancelInput=function(e){this._currentCancelInput&&this._currentCancelInput(e)},n.prototype.getInput=function(e,t,r,i){var o=this;this._position=new $(e.startLineNumber,e.startColumn),this._inputField.value=t,this._inputField.setAttribute("selectionStart",r.toString()),this._inputField.setAttribute("selectionEnd",i.toString()),this._inputField.size=Math.max((e.endColumn-e.startColumn)*1.1,20);var s=new De,a=function(){s.dispose(),o._hide()};return new Promise(function(u){o._currentCancelInput=function(f){return o._currentAcceptInput=null,o._currentCancelInput=null,u(f),!0},o._currentAcceptInput=function(){if(o._inputField.value.trim().length===0||o._inputField.value===t){o.cancelInput(!0);return}o._currentAcceptInput=null,o._currentCancelInput=null,u(o._inputField.value)};var l=function(){var f=o._editor.getPosition();(!f||!R.containsPosition(e,f))&&o.cancelInput(!0)};s.add(o._editor.onDidChangeCursorSelection(l)),s.add(o._editor.onDidBlurEditorWidget(function(){return o.cancelInput(!1)})),o._show()}).then(function(u){return a(),u},function(u){return a(),Promise.reject(u)})},n.prototype._show=function(){var e=this;this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(function(){e._inputField.focus(),e._inputField.setSelectionRange(parseInt(e._inputField.getAttribute("selectionStart")),parseInt(e._inputField.getAttribute("selectionEnd")))},100)},n.prototype._hide=function(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)},n}(),pJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),m4e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},p_=function(n,e){return function(t,r){e(t,r,n)}},n0=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},r0=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},gJ=function(){function n(e,t){this.model=e,this.position=t,this._providers=J1.ordered(e)}return n.prototype.hasProvider=function(){return this._providers.length>0},n.prototype.resolveRenameLocation=function(e){return n0(this,void 0,void 0,function(){var t,r,i;return r0(this,function(o){switch(o.label){case 0:return t=this._providers[0],t?t.resolveRenameLocation?[4,t.resolveRenameLocation(this.model,this.position,e)]:[3,2]:[2,void 0];case 1:r=o.sent(),o.label=2;case 2:return!r&&(i=this.model.getWordAtPosition(this.position),i)?[2,{range:new R(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word}]:[2,r]}})})},n.prototype.provideRenameEdits=function(e,t,r,i){return n0(this,void 0,void 0,function(){var o,s;return r0(this,function(a){switch(a.label){case 0:return o=this._providers[t],o?[4,o.provideRenameEdits(this.model,this.position,e,i)]:[2,{edits:[],rejectReason:r.join(`
`)}];case 1:if(s=a.sent(),s){if(s.rejectReason)return[2,this.provideRenameEdits(e,t+1,r.concat(s.rejectReason),i)]}else return[2,this.provideRenameEdits(e,t+1,r.concat(S("no result","No result.")),i)];return[2,s]}})})},n}();function _4e(n,e,t){return n0(this,void 0,void 0,function(){return r0(this,function(r){return[2,new gJ(n,e).provideRenameEdits(t,0,[],Ft.None)]})})}var b3=function(n){pJ(e,n);function e(t,r,i,o,s,a){var u=n.call(this)||this;return u.editor=t,u._notificationService=r,u._bulkEditService=i,u._progressService=o,u._contextKeyService=s,u._themeService=a,u._renameOperationIdPool=1,u._register(u.editor.onDidChangeModel(function(){return u.onModelChanged()})),u._register(u.editor.onDidChangeModelLanguage(function(){return u.onModelChanged()})),u._register(u.editor.onDidChangeCursorSelection(function(){return u.onModelChanged()})),u}return e.get=function(t){return t.getContribution(e.ID)},Object.defineProperty(e.prototype,"renameInputField",{get:function(){return this._renameInputField||(this._renameInputField=this._register(new v4e(this.editor,this._themeService,this._contextKeyService))),this._renameInputField},enumerable:!0,configurable:!0}),e.prototype.getId=function(){return e.ID},e.prototype.run=function(){return n0(this,void 0,void 0,function(){var t,r=this;return r0(this,function(i){return this._activeRename&&this._activeRename.operation.cancel(),t=this._renameOperationIdPool++,this._activeRename={id:t,operation:Cr(function(o){return r.doRename(o,t)})},[2,this._activeRename.operation]})})},e.prototype.doRename=function(t,r){return n0(this,void 0,void 0,function(){var i,o,s,a,u,l,f,h,d=this;return r0(this,function(g){switch(g.label){case 0:if(!this.editor.hasModel())return[2,void 0];if(i=this.editor.getPosition(),o=new gJ(this.editor.getModel(),i),!o.hasProvider())return[2,void 0];g.label=1;case 1:return g.trys.push([1,3,,4]),a=o.resolveRenameLocation(t),this._progressService.showWhile(a,250),[4,a];case 2:return s=g.sent(),[3,4];case 3:return u=g.sent(),pl.get(this.editor).showMessage(u||S("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),i),[2,void 0];case 4:return s?s.rejectReason?(pl.get(this.editor).showMessage(s.rejectReason,i),[2,void 0]):!this._activeRename||this._activeRename.id!==r?[2,void 0]:(l=this.editor.getSelection(),f=0,h=s.text.length,!R.isEmpty(l)&&!R.spansMultipleLines(l)&&R.containsRange(s.range,l)&&(f=Math.max(0,l.startColumn-s.range.startColumn),h=Math.min(s.range.endColumn,l.endColumn)-s.range.startColumn),[2,this.renameInputField.getInput(s.range,s.text,f,h).then(function(v){if(typeof v=="boolean"){v&&d.editor.focus();return}d.editor.focus();var m=new u2(d.editor,15),y=Promise.resolve(o.provideRenameEdits(v,0,[],t).then(function(b){if(d.editor.hasModel()){if(b.rejectReason){m.validate(d.editor)?pl.get(d.editor).showMessage(b.rejectReason,d.editor.getPosition()):d._notificationService.info(b.rejectReason);return}return d._bulkEditService.apply(b,{editor:d.editor}).then(function(C){C.ariaSummary&&pi(S("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",s.text,v,C.ariaSummary))})}},function(b){return d._notificationService.error(S("rename.failed","Rename failed to execute.")),Promise.reject(b)}));return d._progressService.showWhile(y,250),y})]):[2,void 0]}})})},e.prototype.acceptRenameInput=function(){this._renameInputField&&this._renameInputField.acceptInput()},e.prototype.cancelRenameInput=function(){this._renameInputField&&this._renameInputField.cancelInput(!0)},e.prototype.onModelChanged=function(){this._activeRename&&(this._activeRename.operation.cancel(),this._activeRename=void 0)},e.ID="editor.contrib.renameController",e=m4e([p_(1,Hr),p_(2,g2),p_(3,MI),p_(4,rt),p_(5,Ir)],e),e}(te),y4e=function(n){pJ(e,n);function e(){return n.call(this,{id:"editor.action.rename",label:S("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:_e.and(P.writable,P.hasRenameProvider),kbOpts:{kbExpr:P.editorTextFocus,primary:60,weight:100},menuOpts:{group:"1_modification",order:1.1}})||this}return e.prototype.runCommand=function(t,r){var i=this,o=t.get(an),s=Array.isArray(r)&&r||[void 0,void 0],a=s[0],u=s[1];return bt.isUri(a)&&$.isIPosition(u)?o.openCodeEditor({resource:a},o.getActiveCodeEditor()).then(function(l){l&&(l.setPosition(u),l.invokeWithinContext(function(f){return i.reportTelemetry(f,l),i.run(f,l)}))},Le):n.prototype.runCommand.call(this,t,r)},e.prototype.run=function(t,r){var i=b3.get(r);return i?i.run():Promise.resolve()},e}(Ne);tn(b3);re(y4e);var vJ=$i.bindToContribution(b3.get);ee(new vJ({id:"acceptRenameInput",precondition:y3,handler:function(n){return n.acceptRenameInput()},kbOpts:{weight:199,kbExpr:P.focus,primary:3}}));ee(new vJ({id:"cancelRenameInput",precondition:y3,handler:function(n){return n.cancelRenameInput()},kbOpts:{weight:199,kbExpr:P.focus,primary:9,secondary:[1033]}}));Ra("_executeDocumentRenameProvider",function(n,e,t){var r=t.newName;if(typeof r!="string")throw fr("newName");return _4e(n,e,r)});var b4e=function(){function n(){}return n.prototype.provideSelectionRanges=function(e,t){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=[];r.push(a),this._addInWordRanges(a,e,s),this._addWordRanges(a,e,s),this._addWhitespaceLine(a,e,s),a.push({range:e.getFullModelRange()})}return r},n.prototype._addInWordRanges=function(e,t,r){var i=t.getWordAtPosition(r);if(i){for(var o=i.word,s=i.startColumn,a=r.column-s,u=a,l=a,f=0;u>=0;u--){var h=o.charCodeAt(u);if(h===95||h===45)break;if(ol(h)&&ha(f))break;f=h}for(u+=1;l<o.length;l++){var h=o.charCodeAt(l);if(ha(h)&&ol(f))break;if(h===95||h===45)break;f=h}u<l&&e.push({range:new R(r.lineNumber,s+u,r.lineNumber,s+l)})}},n.prototype._addWordRanges=function(e,t,r){var i=t.getWordAtPosition(r);i&&e.push({range:new R(r.lineNumber,i.startColumn,r.lineNumber,i.endColumn)})},n.prototype._addWhitespaceLine=function(e,t,r){t.getLineLength(r.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(r.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(r.lineNumber)===0&&e.push({range:new R(r.lineNumber,1,r.lineNumber,t.getLineMaxColumn(r.lineNumber))})},n}(),w4e=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},uj=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},mJ=function(){function n(){}return n.prototype.provideSelectionRanges=function(e,t){return w4e(this,void 0,void 0,function(){var r,i,o,s,a;return uj(this,function(u){switch(u.label){case 0:r=[],i=function(l){var f,h;return uj(this,function(d){switch(d.label){case 0:return f=[],r.push(f),h=new Map,[4,new Promise(function(g){return n._bracketsRightYield(g,0,e,l,h)})];case 1:return d.sent(),[4,new Promise(function(g){return n._bracketsLeftYield(g,0,e,l,h,f)})];case 2:return d.sent(),[2]}})},o=0,s=t,u.label=1;case 1:return o<s.length?(a=s[o],[5,i(a)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2,r]}})})},n._bracketsRightYield=function(e,t,r,i,o){for(var s=new Map,a=Date.now();;){if(t>=n._maxRounds){e();break}if(!i){e();break}var u=r.findNextBracket(i);if(!u){e();break}var l=Date.now()-a;if(l>n._maxDuration){setTimeout(function(){return n._bracketsRightYield(e,t+1,r,i,o)});break}var f=u.close;if(u.isOpen){var h=s.has(f)?s.get(f):0;s.set(f,h+1)}else{var h=s.has(f)?s.get(f):0;if(h-=1,s.set(f,Math.max(0,h)),h<0){var d=o.get(f);d||(d=new bl,o.set(f,d)),d.push(u.range)}}i=u.range.getEndPosition()}},n._bracketsLeftYield=function(e,t,r,i,o,s){for(var a=new Map,u=Date.now();;){if(t>=n._maxRounds&&o.size===0){e();break}if(!i){e();break}var l=r.findPrevBracket(i);if(!l){e();break}var f=Date.now()-u;if(f>n._maxDuration){setTimeout(function(){return n._bracketsLeftYield(e,t+1,r,i,o,s)});break}var h=l.close;if(l.isOpen){var d=a.has(h)?a.get(h):0;if(d-=1,a.set(h,Math.max(0,d)),d<0){var g=o.get(h);if(g){var v=g.shift();g.size===0&&o.delete(h);var m=R.fromPositions(l.range.getEndPosition(),v.getStartPosition()),y=R.fromPositions(l.range.getStartPosition(),v.getEndPosition());s.push({range:m}),s.push({range:y}),n._addBracketLeading(r,y,s)}}}else{var d=a.has(h)?a.get(h):0;a.set(h,d+1)}i=l.range.getStartPosition()}},n._addBracketLeading=function(e,t,r){if(t.startLineNumber!==t.endLineNumber){var i=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(i);o!==0&&o!==t.startColumn&&(r.push({range:R.fromPositions(new $(i,o),t.getEndPosition())}),r.push({range:R.fromPositions(new $(i,1),t.getEndPosition())}));var s=i-1;if(s>0){var a=e.getLineFirstNonWhitespaceColumn(s);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(s)&&(r.push({range:R.fromPositions(new $(s,a),t.getEndPosition())}),r.push({range:R.fromPositions(new $(s,1),t.getEndPosition())}))}}},n._maxDuration=30,n._maxRounds=2,n}(),w3=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),C4e=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},S4e=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},E4e=function(){function n(e,t){this.index=e,this.ranges=t}return n.prototype.mov=function(e){var t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;var r=new n(t,this.ranges);return r.ranges[t].equalsRange(this.ranges[this.index])?r.mov(e):r},n}(),_J=function(){function n(e){this._ignoreSelection=!1,this._editor=e}return n.get=function(e){return e.getContribution(n._id)},n.prototype.dispose=function(){Ue(this._selectionListener)},n.prototype.getId=function(){return n._id},n.prototype.run=function(e){var t=this;if(this._editor.hasModel()){var r=this._editor.getSelections(),i=this._editor.getModel();if(cI.has(i)){var o=Promise.resolve(void 0);return this._state||(o=bJ(i,r.map(function(s){return s.getPosition()}),Ft.None).then(function(s){if(!(!vo(s)||s.length!==r.length)&&!(!t._editor.hasModel()||!hf(t._editor.getSelections(),r,function(l,f){return l.equalsSelection(f)}))){for(var a=function(l){s[l]=s[l].filter(function(f){return f.containsPosition(r[l].getStartPosition())&&f.containsPosition(r[l].getEndPosition())}),s[l].unshift(r[l])},u=0;u<s.length;u++)a(u);t._state=s.map(function(l){return new E4e(0,l)}),Ue(t._selectionListener),t._selectionListener=t._editor.onDidChangeCursorPosition(function(){t._ignoreSelection||(Ue(t._selectionListener),t._state=void 0)})}})),o.then(function(){if(t._state){t._state=t._state.map(function(a){return a.mov(e)});var s=t._state.map(function(a){return Ce.fromPositions(a.ranges[a.index].getStartPosition(),a.ranges[a.index].getEndPosition())});t._ignoreSelection=!0;try{t._editor.setSelections(s)}finally{t._ignoreSelection=!1}}})}}},n._id="editor.contrib.smartSelectController",n}(),yJ=function(n){w3(e,n);function e(t,r){var i=n.call(this,r)||this;return i._forward=t,i}return e.prototype.run=function(t,r){return C4e(this,void 0,void 0,function(){var i;return S4e(this,function(o){switch(o.label){case 0:return i=_J.get(r),i?[4,i.run(this._forward)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e}(Ne),I4e=function(n){w3(e,n);function e(){return n.call(this,!0,{id:"editor.action.smartSelect.expand",label:S("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:P.editorTextFocus,primary:1553,mac:{primary:3345},weight:100},menubarOpts:{menuId:22,group:"1_basic",title:S({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})||this}return e}(yJ);oi.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");var x4e=function(n){w3(e,n);function e(){return n.call(this,!1,{id:"editor.action.smartSelect.shrink",label:S("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:P.editorTextFocus,primary:1551,mac:{primary:3343},weight:100},menubarOpts:{menuId:22,group:"1_basic",title:S({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})||this}return e}(yJ);tn(_J);re(I4e);re(x4e);cI.register("*",new b4e);function bJ(n,e,t){var r=cI.all(n);r.length===1&&r.unshift(new mJ);for(var i=[],o=[],s=0,a=r;s<a.length;s++){var u=a[s];i.push(Promise.resolve(u.provideSelectionRanges(n,e,t)).then(function(l){if(vo(l)&&l.length===e.length)for(var f=0;f<e.length;f++){o[f]||(o[f]=[]);for(var h=0,d=l[f];h<d.length;h++){var g=d[h];R.isIRange(g.range)&&R.containsPosition(g.range,e[f])&&o[f].push(R.lift(g.range))}}},ji))}return Promise.all(i).then(function(){return o.map(function(l){if(l.length===0)return[];l.sort(function(k,I){return $.isBefore(k.getStartPosition(),I.getStartPosition())?1:$.isBefore(I.getStartPosition(),k.getStartPosition())||$.isBefore(k.getEndPosition(),I.getEndPosition())?-1:$.isBefore(I.getEndPosition(),k.getEndPosition())?1:0});for(var f=[],h,d=0,g=l;d<g.length;d++){var v=g[d];(!h||R.containsRange(v,h)&&!R.equalsRange(v,h))&&(f.push(v),h=v)}for(var m=[f[0]],y=1;y<f.length;y++){var b=f[y-1],C=f[y];if(C.startLineNumber!==b.startLineNumber||C.endLineNumber!==b.endLineNumber){var E=new R(b.startLineNumber,n.getLineFirstNonWhitespaceColumn(b.startLineNumber),b.endLineNumber,n.getLineLastNonWhitespaceColumn(b.endLineNumber));E.containsRange(b)&&!E.equalsRange(b)&&C.containsRange(E)&&!C.equalsRange(E)&&m.push(E);var D=new R(b.startLineNumber,1,b.endLineNumber,n.getLineMaxColumn(b.endLineNumber));D.containsRange(b)&&!D.equalsRange(E)&&C.containsRange(D)&&!C.equalsRange(D)&&m.push(D)}m.push(C)}return m})})}Ra("_executeSelectionRangeProvider",function(n,e,t){return bJ(n,t.positions,Ft.None)});var D4e=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},L4e=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},k4e=void 0,En={Visible:new Re("suggestWidgetVisible",!1),MultipleSuggestions:new Re("suggestWidgetMultipleSuggestions",!1),MakesTextEdit:new Re("suggestionMakesTextEdit",!0),AcceptSuggestionsOnEnter:new Re("acceptSuggestionOnEnter",!0)},T4e=function(){function n(e,t,r,i,o){this.position=e,this.completion=t,this.container=r,this.provider=i,this.score=Ea.Default,this.distance=0,this.labelLow=t.label.toLowerCase(),this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase();var s=i.resolveCompletionItem;if(typeof s!="function")this.resolve=function(){return Promise.resolve()};else{var a;this.resolve=function(u){if(!a){var l=!1;a=Promise.resolve(s.call(i,o,e,t,u)).then(function(f){Jye(t,f),l=!0},function(f){V0(f)&&(a=void 0)}),u.onCancellationRequested(function(){l||(a=void 0)})}return a}}}return n}(),wJ=function(){function n(e,t,r){e===void 0&&(e=2),t===void 0&&(t=new Set),r===void 0&&(r=new Set),this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=r}return n.default=new n,n}(),l1;function N4e(){return l1}function CJ(n,e,t,r,i){t===void 0&&(t=wJ.default),r===void 0&&(r={triggerKind:0}),i===void 0&&(i=Ft.None);var o=n.getWordUntilPosition(e),s=new R(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn);e=e.clone();var a=ru.orderedGroups(n);!t.kindFilter.has(25)&&l1&&a.unshift([l1]);var u=[],l=new De,f=!1,h=a.map(function(g){return function(){return Promise.all(g.map(function(v){if(!(t.providerFilter.size>0&&!t.providerFilter.has(v)))return Promise.resolve(v.provideCompletionItems(n,e,r,i)).then(function(m){var y=u.length;if(m){for(var b=0,C=m.suggestions||[];b<C.length;b++){var E=C[b];t.kindFilter.has(E.kind)||(E.range||(E.range=s),u.push(new T4e(e,E,m,v,n)))}nI(m)&&l.add(m)}y!==u.length&&v!==l1&&(f=!0)},ji)}))}}),d=JP(h,function(){return f||i.isCancellationRequested}).then(function(){return i.isCancellationRequested?(l.dispose(),Promise.reject(H0())):u.sort(SJ(t.snippetSortOrder))});return d}function C3(n,e){if(n.sortTextLow&&e.sortTextLow){if(n.sortTextLow<e.sortTextLow)return-1;if(n.sortTextLow>e.sortTextLow)return 1}return n.completion.label<e.completion.label?-1:n.completion.label>e.completion.label?1:n.completion.kind-e.completion.kind}function A4e(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===25)return-1;if(e.completion.kind===25)return 1}return C3(n,e)}function O4e(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===25)return 1;if(e.completion.kind===25)return-1}return C3(n,e)}var KI=new Map;KI.set(0,A4e);KI.set(2,O4e);KI.set(1,C3);function SJ(n){return KI.get(n)}Ra("_executeCompletionItemProvider",function(n,e,t){return D4e(k4e,void 0,void 0,function(){var r,i,o,s,a,u,l,f;return L4e(this,function(h){switch(h.label){case 0:return r={incomplete:!1,suggestions:[]},i=new De,o=[],s=t.maxItemsToResolve||0,[4,CJ(n,e)];case 1:for(a=h.sent(),u=0,l=a;u<l.length;u++)f=l[u],o.length<s&&o.push(f.resolve(Ft.None)),r.incomplete=r.incomplete||f.container.incomplete,r.suggestions.push(f.completion),nI(f.container)&&i.add(f.container);h.label=2;case 2:return h.trys.push([2,,4,5]),[4,Promise.all(o)];case 3:return h.sent(),[2,r];case 4:return setTimeout(function(){return i.dispose()},100),[7];case 5:return[2]}})})});var RR=new(function(){function n(){this.onlyOnceSuggestions=[]}return n.prototype.provideCompletionItems=function(){var e=this.onlyOnceSuggestions.slice(0),t={suggestions:e};return this.onlyOnceSuggestions.length=0,t},n}());ru.register("*",RR);function R4e(n,e){setTimeout(function(){var t;(t=RR.onlyOnceSuggestions).push.apply(t,e),n.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(RR))},0)}var bf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zo,M4e=function(){function n(){this.value="",this.pos=0}return n.isDigitCharacter=function(e){return e>=48&&e<=57},n.isVariableCharacter=function(e){return e===95||e>=97&&e<=122||e>=65&&e<=90},n.prototype.text=function(e){this.value=e,this.pos=0},n.prototype.tokenText=function(e){return this.value.substr(e.pos,e.len)},n.prototype.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var e=this.pos,t=0,r=this.value.charCodeAt(e),i;if(i=n._table[r],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(n.isDigitCharacter(r)){i=8;do t+=1,r=this.value.charCodeAt(e+t);while(n.isDigitCharacter(r));return this.pos+=t,{type:i,pos:e,len:t}}if(n.isVariableCharacter(r)){i=9;do r=this.value.charCodeAt(e+ ++t);while(n.isVariableCharacter(r)||n.isDigitCharacter(r));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,r=this.value.charCodeAt(e+t);while(!isNaN(r)&&typeof n._table[r]>"u"&&!n.isDigitCharacter(r)&&!n.isVariableCharacter(r));return this.pos+=t,{type:i,pos:e,len:t}},n._table=(Zo={},Zo[36]=0,Zo[58]=1,Zo[44]=2,Zo[123]=3,Zo[125]=4,Zo[92]=5,Zo[47]=6,Zo[124]=7,Zo[43]=11,Zo[45]=12,Zo[63]=13,Zo),n}(),Gv=function(){function n(){this._children=[]}return n.prototype.appendChild=function(e){return e instanceof rs&&this._children[this._children.length-1]instanceof rs?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},n.prototype.replace=function(e,t){var r=e.parent,i=r.children.indexOf(e),o=r.children.slice(0);o.splice.apply(o,[i,1].concat(t)),r._children=o,function s(a,u){for(var l=0,f=a;l<f.length;l++){var h=f[l];h.parent=u,s(h.children,h)}}(t,r)},Object.defineProperty(n.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"snippet",{get:function(){for(var e=this;;){if(!e)return;if(e instanceof IJ)return e;e=e.parent}},enumerable:!0,configurable:!0}),n.prototype.toString=function(){return this.children.reduce(function(e,t){return e+t.toString()},"")},n.prototype.len=function(){return 0},n}(),rs=function(n){bf(e,n);function e(t){var r=n.call(this)||this;return r.value=t,r}return e.prototype.toString=function(){return this.value},e.prototype.len=function(){return this.value.length},e.prototype.clone=function(){return new e(this.value)},e}(Gv),EJ=function(n){bf(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Gv),Ja=function(n){bf(e,n);function e(t){var r=n.call(this)||this;return r.index=t,r}return e.compareByIndex=function(t,r){return t.index===r.index?0:t.isFinalTabstop?1:r.isFinalTabstop||t.index<r.index?-1:t.index>r.index?1:0},Object.defineProperty(e.prototype,"isFinalTabstop",{get:function(){return this.index===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"choice",{get:function(){return this._children.length===1&&this._children[0]instanceof S3?this._children[0]:void 0},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e(this.index);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map(function(r){return r.clone()}),t},e}(EJ),S3=function(n){bf(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.options=[],t}return e.prototype.appendChild=function(t){return t instanceof rs&&(t.parent=this,this.options.push(t)),this},e.prototype.toString=function(){return this.options[0].value},e.prototype.len=function(){return this.options[0].len()},e.prototype.clone=function(){var t=new e;return this.options.forEach(t.appendChild,t),t},e}(Gv),P4e=function(n){bf(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.regexp=new RegExp(""),t}return e.prototype.resolve=function(t){var r=this,i=!1,o=t.replace(this.regexp,function(){return i=!0,r._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(function(s){return s instanceof Xu&&!!s.elseValue})&&(o=this._replace([])),o},e.prototype._replace=function(t){for(var r="",i=0,o=this._children;i<o.length;i++){var s=o[i];if(s instanceof Xu){var a=t[s.index]||"";a=s.resolve(a),r+=a}else r+=s.toString()}return r},e.prototype.toString=function(){return""},e.prototype.clone=function(){var t=new e;return t.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),t._children=this.children.map(function(r){return r.clone()}),t},e}(Gv),Xu=function(n){bf(e,n);function e(t,r,i,o){var s=n.call(this)||this;return s.index=t,s.shorthandName=r,s.ifValue=i,s.elseValue=o,s}return e.prototype.resolve=function(t){return this.shorthandName==="upcase"?t?t.toLocaleUpperCase():"":this.shorthandName==="downcase"?t?t.toLocaleLowerCase():"":this.shorthandName==="capitalize"?t?t[0].toLocaleUpperCase()+t.substr(1):"":this.shorthandName==="pascalcase"?t?this._toPascalCase(t):"":t&&typeof this.ifValue=="string"?this.ifValue:!t&&typeof this.elseValue=="string"?this.elseValue:t||""},e.prototype._toPascalCase=function(t){var r=t.match(/[a-z]+/gi);return r?r.map(function(i){return i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()}).join(""):t},e.prototype.clone=function(){var t=new e(this.index,this.shorthandName,this.ifValue,this.elseValue);return t},e}(Gv),MR=function(n){bf(e,n);function e(t){var r=n.call(this)||this;return r.name=t,r}return e.prototype.resolve=function(t){var r=t.resolve(this);return this.transform&&(r=this.transform.resolve(r||"")),r!==void 0?(this._children=[new rs(r)],!0):!1},e.prototype.clone=function(){var t=new e(this.name);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map(function(r){return r.clone()}),t},e}(EJ);function lj(n,e){for(var t=n.slice();t.length>0;){var r=t.shift(),i=e(r);if(!i)break;t.unshift.apply(t,r.children)}}var IJ=function(n){bf(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"placeholderInfo",{get:function(){if(!this._placeholders){var t=[],r;this.walk(function(i){return i instanceof Ja&&(t.push(i),r=!r||r.index<i.index?i:r),!0}),this._placeholders={all:t,last:r}}return this._placeholders},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholders",{get:function(){var t=this.placeholderInfo.all;return t},enumerable:!0,configurable:!0}),e.prototype.offset=function(t){var r=0,i=!1;return this.walk(function(o){return o===t?(i=!0,!1):(r+=o.len(),!0)}),i?r:-1},e.prototype.fullLen=function(t){var r=0;return lj([t],function(i){return r+=i.len(),!0}),r},e.prototype.enclosingPlaceholders=function(t){for(var r=[],i=t.parent;i;)i instanceof Ja&&r.push(i),i=i.parent;return r},e.prototype.resolveVariables=function(t){var r=this;return this.walk(function(i){return i instanceof MR&&i.resolve(t)&&(r._placeholders=void 0),!0}),this},e.prototype.appendChild=function(t){return this._placeholders=void 0,n.prototype.appendChild.call(this,t)},e.prototype.replace=function(t,r){return this._placeholders=void 0,n.prototype.replace.call(this,t,r)},e.prototype.clone=function(){var t=new e;return this._children=this.children.map(function(r){return r.clone()}),t},e.prototype.walk=function(t){lj(this.children,t)},e}(Gv),xJ=function(){function n(){this._scanner=new M4e,this._token={type:14,pos:0,len:0}}return n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n.prototype.parse=function(e,t,r){this._scanner.text(e),this._token=this._scanner.next();for(var i=new IJ;this._parse(i););var o=new Map,s=[],a=0;i.walk(function(y){return y instanceof Ja&&(a+=1,y.isFinalTabstop?o.set(0,void 0):!o.has(y.index)&&y.children.length>0?o.set(y.index,y.children):s.push(y)),!0});for(var u=0,l=s;u<l.length;u++){var f=l[u],h=o.get(f.index);if(h){var d=new Ja(f.index);d.transform=f.transform;for(var g=0,v=h;g<v.length;g++){var m=v[g];d.appendChild(m.clone())}i.replace(f,[d])}}return r||(r=a>0&&t),!o.has(0)&&r&&i.appendChild(new Ja(0)),i},n.prototype._accept=function(e,t){if(e===void 0||this._token.type===e){var r=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),r}return!1},n.prototype._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},n.prototype._until=function(e){if(this._token.type===14)return!1;for(var t="",r=this._token.pos,i={type:14,pos:0,len:0};this._token.type!==e||i.type===5;)if(this._token.type===e&&(t+=this._scanner.value.substring(r,i.pos),r=this._token.pos),i=this._token,this._token=this._scanner.next(),this._token.type===14)return!1;return t+=this._scanner.value.substring(r,this._token.pos),this._token=this._scanner.next(),t},n.prototype._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},n.prototype._parseEscaped=function(e){var t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new rs(t)),!0):!1},n.prototype._parseTabstopOrVariableName=function(e){var t,r=this._token,i=this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0));return i?(e.appendChild(/^\d+$/.test(t)?new Ja(Number(t)):new MR(t)),!0):this._backTo(r)},n.prototype._parseComplexPlaceholder=function(e){var t,r=this._token,i=this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0));if(!i)return this._backTo(r);var o=new Ja(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new rs("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7))for(var s=new S3;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(r),!1}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(r),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(r)},n.prototype._parseChoiceElement=function(e){for(var t=this._token,r=[];!(this._token.type===2||this._token.type===7);){var i=void 0;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;r.push(i)}return r.length===0?(this._backTo(t),!1):(e.appendChild(new rs(r.join(""))),!0)},n.prototype._parseComplexVariable=function(e){var t,r=this._token,i=this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0));if(!i)return this._backTo(r);var o=new MR(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new rs("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(r),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(r)},n.prototype._parseTransform=function(e){for(var t=new P4e,r="",i="";!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,r+=o;continue}if(this._token.type!==14){r+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new rs(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(r,i)}catch{return!1}return e.transform=t,!0},n.prototype._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var r=!1;this._accept(3)&&(r=!0);var i=this._accept(8,!0);if(i)if(r){if(this._accept(4))return e.appendChild(new Xu(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Xu(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){var o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Xu(Number(i),o)),!0)}else if(this._accept(11)){var s=this._until(4);if(s)return e.appendChild(new Xu(Number(i),void 0,s,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new Xu(Number(i),void 0,void 0,a)),!0}else if(this._accept(13)){var s=this._until(1);if(s){var a=this._until(4);if(a)return e.appendChild(new Xu(Number(i),void 0,s,a)),!0}}else{var a=this._until(4);if(a)return e.appendChild(new Xu(Number(i),void 0,void 0,a)),!0}return this._backTo(t),!1},n.prototype._parseAnything=function(e){return this._token.type!==14?(e.appendChild(new rs(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1},n}(),cj="code-workspace";function F4e(n){return n instanceof bt}function B4e(n){if(n.configuration)return{configPath:n.configuration,id:n.id};if(n.folders.length===1)return n.folders[0].uri}var W4e=function(){function n(e){this._delegates=e}return n.prototype.resolve=function(e){for(var t=0,r=this._delegates;t<r.length;t++){var i=r[t],o=i.resolve(e);if(o!==void 0)return o}},n}(),V4e=function(){function n(e,t){this._model=e,this._selection=t}return n.prototype.resolve=function(e){var t=e.name;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){var r=this._model.getValueInRange(this._selection)||void 0;if(r&&this._selection.startLineNumber!==this._selection.endLineNumber&&e.snippet){var i=this._model.getLineContent(this._selection.startLineNumber),o=ln(i,0,this._selection.startColumn-1),s=o;e.snippet.walk(function(l){return l===e?!1:(l instanceof rs&&(s=ln(l.value.split(/\r\n|\r|\n/).pop())),!0)});var a=aF(s,o);r=r.replace(/(\r\n|\r|\n)(.*)/g,function(l,f,h){return""+f+s.substr(a)+h})}return r}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){var u=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return u&&u.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}},n}(),H4e=function(){function n(e,t){this._labelService=e,this._model=t}return n.prototype.resolve=function(e){var t=e.name;if(t==="TM_FILENAME")return dd(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){var r=dd(this._model.uri.fsPath),i=r.lastIndexOf(".");return i<=0?r:r.slice(0,i)}else{if(t==="TM_DIRECTORY"&&this._labelService)return dF(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(pF(this._model.uri));if(t==="TM_FILEPATH"&&this._labelService)return this._labelService.getUriLabel(this._model.uri)}},n}(),U4e=function(){function n(e,t,r){this._clipboardText=e,this._selectionIdx=t,this._selectionCount=r}return n.prototype.resolve=function(e){if(e.name==="CLIPBOARD"&&this._clipboardText){var t=this._clipboardText.split(/\r\n|\n|\r/).filter(function(r){return!wG(r)});return t.length===this._selectionCount?t[this._selectionIdx]:this._clipboardText}},n}(),j4e=function(){function n(e){this._model=e}return n.prototype.resolve=function(e){var t=e.name,r=this._model.getLanguageIdentifier(),i=gt.getComments(r.id);if(i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}},n}(),z4e=function(){function n(){}return n.prototype.resolve=function(e){var t=e.name;if(t==="CURRENT_YEAR")return String(new Date().getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(new Date().getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return Xm(new Date().getMonth().valueOf()+1,2);if(t==="CURRENT_DATE")return Xm(new Date().getDate().valueOf(),2);if(t==="CURRENT_HOUR")return Xm(new Date().getHours().valueOf(),2);if(t==="CURRENT_MINUTE")return Xm(new Date().getMinutes().valueOf(),2);if(t==="CURRENT_SECOND")return Xm(new Date().getSeconds().valueOf(),2);if(t==="CURRENT_DAY_NAME")return n.dayNames[new Date().getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return n.dayNamesShort[new Date().getDay()];if(t==="CURRENT_MONTH_NAME")return n.monthNames[new Date().getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return n.monthNamesShort[new Date().getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(Date.now()/1e3))},n.dayNames=[S("Sunday","Sunday"),S("Monday","Monday"),S("Tuesday","Tuesday"),S("Wednesday","Wednesday"),S("Thursday","Thursday"),S("Friday","Friday"),S("Saturday","Saturday")],n.dayNamesShort=[S("SundayShort","Sun"),S("MondayShort","Mon"),S("TuesdayShort","Tue"),S("WednesdayShort","Wed"),S("ThursdayShort","Thu"),S("FridayShort","Fri"),S("SaturdayShort","Sat")],n.monthNames=[S("January","January"),S("February","February"),S("March","March"),S("April","April"),S("May","May"),S("June","June"),S("July","July"),S("August","August"),S("September","September"),S("October","October"),S("November","November"),S("December","December")],n.monthNamesShort=[S("JanuaryShort","Jan"),S("FebruaryShort","Feb"),S("MarchShort","Mar"),S("AprilShort","Apr"),S("MayShort","May"),S("JuneShort","Jun"),S("JulyShort","Jul"),S("AugustShort","Aug"),S("SeptemberShort","Sep"),S("OctoberShort","Oct"),S("NovemberShort","Nov"),S("DecemberShort","Dec")],n}(),q4e=function(){function n(e){this._workspaceService=e}return n.prototype.resolve=function(e){if(!(e.name!=="WORKSPACE_NAME"||!this._workspaceService)){var t=B4e(this._workspaceService.getWorkspace());if(t){if(F4e(t))return dd(t.path);var r=dd(t.configPath.path);return Cl(r,cj)&&(r=r.substr(0,r.length-cj.length-1)),r}}},n}();Xt(function(n,e){function t(r){var i=n.getColor(r);return i?i.toString():"transparent"}e.addRule(".monaco-editor .snippet-placeholder { background-color: "+t(BIe)+"; outline-color: "+t(WIe)+"; }"),e.addRule(".monaco-editor .finish-snippet-placeholder { background-color: "+t(VIe)+"; outline-color: "+t(HIe)+"; }")});var $4e=function(){function n(e,t,r){this._nestingLevel=1,this._editor=e,this._snippet=t,this._offset=r,this._placeholderGroups=K5(t.placeholders,Ja.compareByIndex),this._placeholderGroupsIdx=-1}return n.prototype.dispose=function(){if(this._placeholderDecorations){var e=[];this._placeholderDecorations.forEach(function(t){return e.push(t)}),this._editor.deltaDecorations(e,[])}this._placeholderGroups.length=0},n.prototype._initDecorations=function(){var e=this;if(!this._placeholderDecorations){this._placeholderDecorations=new Map;var t=this._editor.getModel();this._editor.changeDecorations(function(r){for(var i=0,o=e._snippet.placeholders;i<o.length;i++){var s=o[i],a=e._snippet.offset(s),u=e._snippet.fullLen(s),l=R.fromPositions(t.getPositionAt(e._offset+a),t.getPositionAt(e._offset+a+u)),f=s.isFinalTabstop?n._decor.inactiveFinal:n._decor.inactive,h=r.addDecoration(l,f);e._placeholderDecorations.set(s,h)}})}},n.prototype.move=function(e){var t=this;if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){for(var r=[],i=0,o=this._placeholderGroups[this._placeholderGroupsIdx];i<o.length;i++){var s=o[i];if(s.transform){var a=this._placeholderDecorations.get(s),u=this._editor.getModel().getDecorationRange(a),l=this._editor.getModel().getValueInRange(u);r.push(lr.replaceMove(u,s.transform.resolve(l)))}}r.length>0&&this._editor.executeEdits("snippet.placeholderTransform",r)}var f=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,f=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,f=!0);var h=this._editor.getModel().changeDecorations(function(d){for(var g=new Set,v=[],m=0,y=t._placeholderGroups[t._placeholderGroupsIdx];m<y.length;m++){var b=y[m],C=t._placeholderDecorations.get(b),E=t._editor.getModel().getDecorationRange(C);v.push(new Ce(E.startLineNumber,E.startColumn,E.endLineNumber,E.endColumn)),f=f&&t._hasPlaceholderBeenCollapsed(b),d.changeDecorationOptions(C,b.isFinalTabstop?n._decor.activeFinal:n._decor.active),g.add(b);for(var D=0,k=t._snippet.enclosingPlaceholders(b);D<k.length;D++){var I=k[D],T=t._placeholderDecorations.get(I);d.changeDecorationOptions(T,I.isFinalTabstop?n._decor.activeFinal:n._decor.active),g.add(I)}}return t._placeholderDecorations.forEach(function(A,M){g.has(M)||d.changeDecorationOptions(A,M.isFinalTabstop?n._decor.inactiveFinal:n._decor.inactive)}),v});return f?this.move(e):h},n.prototype._hasPlaceholderBeenCollapsed=function(e){for(var t=e;t;){if(t instanceof Ja){var r=this._placeholderDecorations.get(t),i=this._editor.getModel().getDecorationRange(r);if(i.isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1},Object.defineProperty(n.prototype,"isAtFirstPlaceholder",{get:function(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAtLastPlaceholder",{get:function(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasPlaceholder",{get:function(){return this._snippet.placeholders.length>0},enumerable:!0,configurable:!0}),n.prototype.computePossibleSelections=function(){for(var e=new Map,t=0,r=this._placeholderGroups;t<r.length;t++)for(var i=r[t],o=void 0,s=0,a=i;s<a.length;s++){var u=a[s];if(u.isFinalTabstop)break;o||(o=[],e.set(u.index,o));var l=this._placeholderDecorations.get(u),f=this._editor.getModel().getDecorationRange(l);if(!f){e.delete(u.index);break}o.push(f)}return e},Object.defineProperty(n.prototype,"choice",{get:function(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice},enumerable:!0,configurable:!0}),n.prototype.merge=function(e){var t=this,r=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(function(i){for(var o=0,s=t._placeholderGroups[t._placeholderGroupsIdx];o<s.length;o++){var a=s[o],u=e.shift();console.assert(!u._placeholderDecorations);for(var l=u._snippet.placeholderInfo.last.index,f=0,h=u._snippet.placeholderInfo.all;f<h.length;f++){var d=h[f];d.isFinalTabstop?d.index=a.index+(l+1)/t._nestingLevel:d.index=a.index+d.index/t._nestingLevel}t._snippet.replace(a,u._snippet.children);var g=t._placeholderDecorations.get(a);i.removeDecoration(g),t._placeholderDecorations.delete(a);for(var v=0,m=u._snippet.placeholders;v<m.length;v++){var y=m[v],b=u._snippet.offset(y),C=u._snippet.fullLen(y),E=R.fromPositions(r.getPositionAt(u._offset+b),r.getPositionAt(u._offset+b+C)),D=i.addDecoration(E,n._decor.inactive);t._placeholderDecorations.set(y,D)}}t._placeholderGroups=K5(t._snippet.placeholders,Ja.compareByIndex)})},n._decor={active:tt.register({stickiness:0,className:"snippet-placeholder"}),inactive:tt.register({stickiness:1,className:"snippet-placeholder"}),activeFinal:tt.register({stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:tt.register({stickiness:1,className:"finish-snippet-placeholder"})},n}(),fj={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0},K4e=function(){function n(e,t,r){r===void 0&&(r=fj),this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=r}return n.adjustWhitespace=function(e,t,r){var i=e.getLineContent(t.lineNumber),o=ln(i,0,t.column-1);r.walk(function(s){if(s instanceof rs&&!(s.parent instanceof S3)){for(var a=s.value.split(/\r\n|\r|\n/),u=1;u<a.length;u++){var l=ln(a[u]);a[u]=e.normalizeIndentation(o+l)+a[u].substr(l.length)}var f=a.join(e.getEOL());f!==s.value&&s.parent.replace(s,[new rs(f)])}return!0})},n.adjustSelection=function(e,t,r,i){if(r!==0||i!==0){var o=t.positionLineNumber,s=t.positionColumn,a=s-r,u=s+i,l=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:u});t=Ce.createWithDirection(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn,t.getDirection())}return t},n.createEditsAndSnippets=function(e,t,r,i,o,s,a){var u=[],l=[];if(!e.hasModel())return{edits:u,snippets:l};var f=e.getModel(),h=e.invokeWithinContext(function(K){return K.get(rY,$h)}),d=e.invokeWithinContext(function(K){return new H4e(K.get(NI,$h),f)}),g=e.invokeWithinContext(function(K){return K.get(LI,$h)});a=a||g&&g.readTextSync();for(var v=0,m=f.getValueInRange(n.adjustSelection(f,e.getSelection(),r,0)),y=f.getValueInRange(n.adjustSelection(f,e.getSelection(),0,i)),b=f.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),C=e.getSelections().map(function(K,X){return{selection:K,idx:X}}).sort(function(K,X){return R.compareRangesUsingStarts(K.selection,X.selection)}),E=0,D=C;E<D.length;E++){var k=D[E],I=k.selection,T=k.idx,A=n.adjustSelection(f,I,r,0),M=n.adjustSelection(f,I,0,i);m!==f.getValueInRange(A)&&(A=I),y!==f.getValueInRange(M)&&(M=I);var L=I.setStartPosition(A.startLineNumber,A.startColumn).setEndPosition(M.endLineNumber,M.endColumn),F=new xJ().parse(t,!0,o),W=L.getStartPosition();(s||T>0&&b!==f.getLineFirstNonWhitespaceColumn(I.positionLineNumber))&&n.adjustWhitespace(f,W,F),F.resolveVariables(new W4e([d,new U4e(a,T,C.length),new V4e(f,I),new j4e(f),new z4e,new q4e(h)]));var z=f.getOffsetAt(W)+v;v+=F.toString().length-f.getValueLengthInRange(L),u[T]=lr.replace(L,F.toString()),l[T]=new $4e(e,F,z)}return{edits:u,snippets:l}},n.prototype.dispose=function(){Ue(this._snippets)},n.prototype._logInfo=function(){return'template="'+this._template+'", merged_templates="'+this._templateMerges.join(" -> ")+'"'},n.prototype.insert=function(){var e=this;if(this._editor.hasModel()){var t=n.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText),r=t.edits,i=t.snippets;this._snippets=i,this._editor.executeEdits("snippet",r,function(o){return e._snippets[0].hasPlaceholder?e._move(!0):o.map(function(s){return Ce.fromPositions(s.range.getEndPosition())})}),this._editor.revealRange(this._editor.getSelections()[0])}},n.prototype.merge=function(e,t){var r=this;if(t===void 0&&(t=fj),!!this._editor.hasModel()){this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);var i=n.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText),o=i.edits,s=i.snippets;this._editor.executeEdits("snippet",o,function(a){for(var u=0,l=r._snippets;u<l.length;u++){var f=l[u];f.merge(s)}return console.assert(s.length===0),r._snippets[0].hasPlaceholder?r._move(void 0):a.map(function(h){return Ce.fromPositions(h.range.getEndPosition())})})}},n.prototype.next=function(){var e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())},n.prototype.prev=function(){var e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())},n.prototype._move=function(e){for(var t=[],r=0,i=this._snippets;r<i.length;r++){var o=i[r],s=o.move(e);t.push.apply(t,s)}return t},Object.defineProperty(n.prototype,"isAtFirstPlaceholder",{get:function(){return this._snippets[0].isAtFirstPlaceholder},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAtLastPlaceholder",{get:function(){return this._snippets[0].isAtLastPlaceholder},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasPlaceholder",{get:function(){return this._snippets[0].hasPlaceholder},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"choice",{get:function(){return this._snippets[0].choice},enumerable:!0,configurable:!0}),n.prototype.isSelectionWithinPlaceholders=function(){if(!this.hasPlaceholder)return!1;var e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;for(var t=new Map,r=function(u){var l=u.computePossibleSelections();if(t.size===0&&l.forEach(function(f,h){f.sort(R.compareRangesUsingStarts);for(var d=0,g=e;d<g.length;d++){var v=g[d];if(f[0].containsRange(v)){t.set(h,[]);break}}}),t.size===0)return{value:!1};t.forEach(function(f,h){f.push.apply(f,l.get(h))})},i=0,o=this._snippets;i<o.length;i++){var s=o[i],a=r(s);if(typeof a=="object")return a.value}return e.sort(R.compareRangesUsingStarts),t.forEach(function(u,l){if(u.length!==e.length){t.delete(l);return}u.sort(R.compareRangesUsingStarts);for(var f=0;f<u.length;f++)if(!u[f].containsRange(e[f])){t.delete(l);return}}),t.size>0},n}(),PR=function(){return PR=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},PR.apply(this,arguments)},G4e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hj=function(n,e){return function(t,r){e(t,r,n)}},dj={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0},ys=function(){function n(e,t,r){this._editor=e,this._logService=t,this._snippetListener=new De,this._modelVersionId=-1,this._inSnippet=n.InSnippetMode.bindTo(r),this._hasNextTabstop=n.HasNextTabstop.bindTo(r),this._hasPrevTabstop=n.HasPrevTabstop.bindTo(r)}return n.get=function(e){return e.getContribution("snippetController2")},n.prototype.dispose=function(){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),Ue(this._session),this._snippetListener.dispose()},n.prototype.getId=function(){return"snippetController2"},n.prototype.insert=function(e,t){try{this._doInsert(e,typeof t>"u"?dj:PR({},dj,t))}catch(r){this.cancel(),this._logService.error(r),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}},n.prototype._doInsert=function(e,t){var r=this;this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new K4e(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(function(i){return i.isFlush&&r.cancel()})),this._snippetListener.add(this._editor.onDidChangeModel(function(){return r.cancel()})),this._snippetListener.add(this._editor.onDidChangeCursorSelection(function(){return r._updateState()})))},n.prototype._updateState=function(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}},n.prototype._handleChoice=function(){var e=this;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}var t=this._session.choice;if(!t){this._currentChoice=void 0;return}if(this._currentChoice!==t){this._currentChoice=t,this._editor.setSelections(this._editor.getSelections().map(function(i){return Ce.fromPositions(i.getStartPosition())}));var r=t.options[0];R4e(this._editor,t.options.map(function(i,o){return{kind:13,label:i.value,insertText:i.value,sortText:Rbe("a",o+1),range:R.fromPositions(e._editor.getPosition(),e._editor.getPosition().delta(0,r.value.length))}}))}},n.prototype.finish=function(){for(;this._inSnippet.get();)this.next()},n.prototype.cancel=function(e){e===void 0&&(e=!1),this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),Ue(this._session),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])},n.prototype.prev=function(){this._session&&this._session.prev(),this._updateState()},n.prototype.next=function(){this._session&&this._session.next(),this._updateState()},n.prototype.isInSnippet=function(){return!!this._inSnippet.get()},n.InSnippetMode=new Re("inSnippetMode",!1),n.HasNextTabstop=new Re("hasNextTabstop",!1),n.HasPrevTabstop=new Re("hasPrevTabstop",!1),n=G4e([hj(1,IF),hj(2,rt)],n),n}();tn(ys);var GI=$i.bindToContribution(ys.get);ee(new GI({id:"jumpToNextSnippetPlaceholder",precondition:_e.and(ys.InSnippetMode,ys.HasNextTabstop),handler:function(n){return n.next()},kbOpts:{weight:130,kbExpr:P.editorTextFocus,primary:2}}));ee(new GI({id:"jumpToPrevSnippetPlaceholder",precondition:_e.and(ys.InSnippetMode,ys.HasPrevTabstop),handler:function(n){return n.prev()},kbOpts:{weight:130,kbExpr:P.editorTextFocus,primary:1026}}));ee(new GI({id:"leaveSnippet",precondition:ys.InSnippetMode,handler:function(n){return n.cancel(!0)},kbOpts:{weight:130,kbExpr:P.editorTextFocus,primary:9,secondary:[1033]}}));ee(new GI({id:"acceptSnippet",precondition:ys.InSnippetMode,handler:function(n){return n.finish()}}));var YI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Y4e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pj=function(n,e){return function(t,r){e(t,r,n)}},E3=function(){function n(){}return n.prototype.select=function(e,t,r){if(r.length===0)return 0;for(var i=r[0].score[0],o=1;o<r.length;o++){var s=r[o],a=s.score,u=s.completion;if(a[0]!==i)break;if(u.preselect)return o}return 0},n}(),Z4e=function(n){YI(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.memorize=function(t,r,i){},e.prototype.toJSON=function(){},e.prototype.fromJSON=function(){},e}(E3),X4e=function(n){YI(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._cache=new qg(300,.66),t._seq=0,t}return e.prototype.memorize=function(t,r,i){var o=i.completion.label,s=t.getLanguageIdentifier().language+"/"+o;this._cache.set(s,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})},e.prototype.select=function(t,r,i){if(i.length===0)return 0;var o=t.getLineContent(r.lineNumber).substr(r.column-10,r.column-1);if(/\s$/.test(o))return n.prototype.select.call(this,t,r,i);for(var s=i[0].score[0],a=-1,u=-1,l=-1,f=0;f<i.length&&i[f].score[0]===s;f++){var h=t.getLanguageIdentifier().language+"/"+i[f].completion.label,d=this._cache.peek(h);if(d&&d.touch>l&&d.type===i[f].completion.kind&&d.insertText===i[f].completion.insertText&&(l=d.touch,u=f),i[f].completion.preselect&&a===-1)return a=f}return u!==-1?u:a!==-1?a:0},e.prototype.toJSON=function(){var t=[];return this._cache.forEach(function(r,i){t.push([i,r])}),t},e.prototype.fromJSON=function(t){this._cache.clear();for(var r=0,i=0,o=t;i<o.length;i++){var s=o[i],a=s[0],u=s[1];u.touch=r,u.type=typeof u.type=="number"?u.type:bF(u.type),this._cache.set(a,u)}this._seq=this._cache.size},e}(E3),Q4e=function(n){YI(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._trie=RO.forStrings(),t._seq=0,t}return e.prototype.memorize=function(t,r,i){var o=t.getWordUntilPosition(r).word,s=t.getLanguageIdentifier().language+"/"+o;this._trie.set(s,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})},e.prototype.select=function(t,r,i){var o=t.getWordUntilPosition(r).word;if(!o)return n.prototype.select.call(this,t,r,i);var s=t.getLanguageIdentifier().language+"/"+o,a=this._trie.get(s);if(a||(a=this._trie.findSubstr(s)),a)for(var u=0;u<i.length;u++){var l=i[u].completion,f=l.kind,h=l.insertText;if(f===a.type&&h===a.insertText)return u}return n.prototype.select.call(this,t,r,i)},e.prototype.toJSON=function(){var t=[];return this._trie.forEach(function(r,i){return t.push([i,r])}),t.sort(function(r,i){return-(r[1].touch-i[1].touch)}).forEach(function(r,i){return r[1].touch=i}),t.slice(0,200)},e.prototype.fromJSON=function(t){if(this._trie.clear(),t.length>0){this._seq=t[0][1].touch+1;for(var r=0,i=t;r<i.length;r++){var o=i[r],s=o[0],a=o[1];a.type=typeof a.type=="number"?a.type:bF(a.type),this._trie.set(s,a)}}},e}(E3),J4e=function(n){YI(e,n);function e(t,r){var i=n.call(this)||this;i._storageService=t,i._configService=r,i._storagePrefix="suggest/memories";var o=function(){var s=i._configService.getValue("editor.suggestSelection"),a=i._configService.getValue("editor.suggest.shareSuggestSelections");i._update(s,a,!1)};return i._persistSoon=i._register(new hr(function(){return i._saveState()},500)),i._register(t.onWillSaveState(function(s){s.reason===PS.SHUTDOWN&&i._saveState()})),i._register(i._configService.onDidChangeConfiguration(function(s){(s.affectsConfiguration("editor.suggestSelection")||s.affectsConfiguration("editor.suggest.shareSuggestSelections"))&&o()})),i._register(i._storageService.onDidChangeStorage(function(s){s.scope===0&&s.key.indexOf(i._storagePrefix)===0&&(document.hasFocus()||i._update(i._mode,i._shareMem,!0))})),o(),i}return e.prototype._update=function(t,r,i){if(!(!i&&this._mode===t&&this._shareMem===r)){this._shareMem=r,this._mode=t,this._strategy=t==="recentlyUsedByPrefix"?new Q4e:t==="recentlyUsed"?new X4e:new Z4e;try{var o=r?0:1,s=this._storageService.get(this._storagePrefix+"/"+this._mode,o);s&&this._strategy.fromJSON(JSON.parse(s))}catch{}}},e.prototype.memorize=function(t,r,i){this._strategy.memorize(t,r,i),this._persistSoon.schedule()},e.prototype.select=function(t,r,i){return this._strategy.select(t,r,i)},e.prototype._saveState=function(){var t=JSON.stringify(this._strategy),r=this._shareMem?0:1;this._storageService.store(this._storagePrefix+"/"+this._mode,t,r)},e=Y4e([pj(0,_f),pj(1,Vr)],e),e}(te),DJ=xt("ISuggestMemories");J0(DJ,J4e,!0);var eBe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tBe=function(n,e){return function(t,r){e(t,r,n)}},ZI=function(){function n(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=n.OtherSuggestions.bindTo(t)}return n.prototype.dispose=function(){this.reset()},n.prototype.reset=function(){this._ckOtherSuggestions.reset(),Ue(this._listener),this._model=void 0,this._acceptNext=void 0,this._ignore=!1},n.prototype.set=function(e,t){var r=this,i=e.model,o=e.index;if(i.items.length===0){this.reset();return}var s=n._moveIndex(!0,i,o);if(s===o){this.reset();return}this._acceptNext=t,this._model=i,this._index=o,this._listener=this._editor.onDidChangeCursorPosition(function(){r._ignore||r.reset()}),this._ckOtherSuggestions.set(!0)},n._moveIndex=function(e,t,r){for(var i=r;i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===r||!t.items[i].completion.additionalTextEdits););return i},n.prototype.next=function(){this._move(!0)},n.prototype.prev=function(){this._move(!1)},n.prototype._move=function(e){if(this._model)try{this._ignore=!0,this._index=n._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}},n.OtherSuggestions=new Re("hasOtherSuggestions",!1),n=eBe([tBe(1,rt)],n),n}(),nBe=function(){function n(e,t,r,i,o){o===void 0&&(o=Tu.contribInfo.suggest),this._snippetCompareFn=n._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=i,this._options=o,this._refilterKind=1,this._lineContext=r,o.snippets==="top"?this._snippetCompareFn=n._compareCompletionItemsSnippetsUp:o.snippets==="bottom"&&(this._snippetCompareFn=n._compareCompletionItemsSnippetsDown)}return Object.defineProperty(n.prototype,"lineContext",{get:function(){return this._lineContext},set:function(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"items",{get:function(){return this._ensureCachedState(),this._filteredItems},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"incomplete",{get:function(){return this._ensureCachedState(),this._isIncomplete},enumerable:!0,configurable:!0}),n.prototype.adopt=function(e){for(var t=new Array,r=0;r<this._items.length;)e.has(this._items[r].provider)?r++:(t.push(this._items[r]),this._items[r]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t},Object.defineProperty(n.prototype,"stats",{get:function(){return this._ensureCachedState(),this._stats},enumerable:!0,configurable:!0}),n.prototype._ensureCachedState=function(){this._refilterKind!==0&&this._createCachedState()},n.prototype._createCachedState=function(){this._isIncomplete=new Set,this._stats={suggestionCount:0,snippetCount:0,textCount:0};for(var e=this._lineContext,t=e.leadingLineContent,r=e.characterCountDelta,i="",o="",s=this._refilterKind===1?this._items:this._filteredItems,a=[],u=!this._options.filterGraceful||s.length>2e3?Yy:KTe,l=0;l<s.length;l++){var f=s[l];f.container.incomplete&&this._isIncomplete.add(f.provider);var h=f.position.column-f.completion.range.startColumn,d=h+r-(f.position.column-this._column);if(i.length!==d&&(i=d===0?"":t.slice(-d),o=i.toLowerCase()),f.word=i,d===0)f.score=Ea.Default;else{for(var g=0;g<h;){var v=i.charCodeAt(g);if(v===32||v===9)g+=1;else break}if(g>=d)f.score=Ea.Default;else if(typeof f.completion.filterText=="string"){var m=u(i,o,g,f.completion.filterText,f.filterTextLow,0,!1);if(!m)continue;xbe(f.completion.filterText,f.completion.label)===0?f.score=m:(f.score=jTe(i,o,g,f.completion.label,f.labelLow,0),f.score[0]=m[0])}else{var m=u(i,o,g,f.completion.label,f.labelLow,0,!1);if(!m)continue;f.score=m}}switch(f.idx=l,f.distance=this._wordDistance.distance(f.position,f.completion),a.push(f),this._stats.suggestionCount++,f.completion.kind){case 25:this._stats.snippetCount++;break;case 18:this._stats.textCount++;break}}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0},n._compareCompletionItems=function(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0},n._compareCompletionItemsSnippetsDown=function(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===25)return 1;if(t.completion.kind===25)return-1}return n._compareCompletionItems(e,t)},n._compareCompletionItemsSnippetsUp=function(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===25)return-1;if(t.completion.kind===25)return 1}return n._compareCompletionItems(e,t)},n}(),gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rBe=function(){function n(){}return n.create=function(e,t){if(!t.getConfiguration().contribInfo.suggest.localityBonus||!t.hasModel())return Promise.resolve(n.None);var r=t.getModel(),i=t.getPosition();return e.canComputeWordRanges(r.uri)?new mJ().provideSelectionRanges(r,[i]).then(function(o){return!o||o.length===0||o[0].length===0?n.None:e.computeWordRanges(r.uri,o[0][0].range).then(function(s){return new(function(a){gj(u,a);function u(){return a!==null&&a.apply(this,arguments)||this}return u.prototype.distance=function(l,f){if(!s||!i.equals(t.getPosition()))return 0;if(f.kind===17)return 2<<20;var h=f.label,d=s[h];if($P(d))return 2<<20;for(var g=JE(d,R.fromPositions(l),R.compareRangesUsingStarts),v=g>=0?d[g]:d[Math.max(0,~g-1)],m=o.length,y=0,b=o[0];y<b.length;y++){var C=b[y];if(!R.containsRange(C.range,v))break;m-=1}return m},u}(n))})}):Promise.resolve(n.None)},n.None=new(function(e){gj(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.distance=function(){return 0},t}(n)),n}(),g_=function(){function n(e,t,r,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=r,this.shy=i}return n.shouldAutoTrigger=function(e){if(!e.hasModel())return!1;var t=e.getModel(),r=e.getPosition();t.tokenizeIfCheap(r.lineNumber);var i=t.getWordAtPosition(r);return!(!i||i.endColumn!==r.column||!isNaN(Number(i.word)))},n}(),iBe=function(){function n(e,t){var r=this;this._editor=e,this._editorWorker=t,this._toDispose=new De,this._quickSuggestDelay=10,this._triggerQuickSuggest=new Ho,this._state=0,this._completionDisposables=new De,this._onDidCancel=new j,this._onDidTrigger=new j,this._onDidSuggest=new j,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._currentSelection=this._editor.getSelection()||new Ce(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(function(){r._updateTriggerCharacters(),r.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(function(){r._updateTriggerCharacters(),r.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(function(){r._updateTriggerCharacters(),r._updateQuickSuggest()})),this._toDispose.add(ru.onDidChange(function(){r._updateTriggerCharacters(),r._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(function(o){r._onCursorChange(o)}));var i=!1;this._toDispose.add(this._editor.onCompositionStart(function(){i=!0})),this._toDispose.add(this._editor.onCompositionEnd(function(){i=!1,r._refilterCompletionItems()})),this._toDispose.add(this._editor.onDidChangeModelContent(function(){i||r._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}return n.prototype.dispose=function(){Ue(this._triggerCharacterListener),Ue([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()},n.prototype._updateQuickSuggest=function(){this._quickSuggestDelay=this._editor.getConfiguration().contribInfo.quickSuggestionsDelay,(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)},n.prototype._updateTriggerCharacters=function(){var e=this;if(Ue(this._triggerCharacterListener),!(this._editor.getConfiguration().readOnly||!this._editor.hasModel()||!this._editor.getConfiguration().contribInfo.suggestOnTriggerCharacters)){for(var t=Object.create(null),r=0,i=ru.all(this._editor.getModel());r<i.length;r++)for(var o=i[r],s=0,a=o.triggerCharacters||[];s<a.length;s++){var u=a[s],l=t[u];l||(l=t[u]=new Set,l.add(N4e())),l.add(o)}this._triggerCharacterListener=this._editor.onDidType(function(f){var h=f.charAt(f.length-1),d=t[h];if(d){var g=e._completionModel?e._completionModel.adopt(d):void 0;e.trigger({auto:!0,shy:!1,triggerCharacter:h},!!e._completionModel,d,g)}})}},Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),n.prototype.cancel=function(e){e===void 0&&(e=!1),this._state!==0&&(this._triggerQuickSuggest.cancel(),this._requestToken&&(this._requestToken.cancel(),this._requestToken=void 0),this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))},n.prototype.clear=function(){this._completionDisposables.clear()},n.prototype._updateActiveSuggestSession=function(){this._state!==0&&(!this._editor.hasModel()||!ru.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))},n.prototype._onCursorChange=function(e){var t=this;if(this._editor.hasModel()){var r=this._editor.getModel(),i=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0||e.source!=="keyboard"&&e.source!=="deleteLeft"){this._state!==0&&this.cancel();return}if(ru.has(r)&&this._state===0){if(this._editor.getConfiguration().contribInfo.quickSuggestions===!1||!i.containsRange(this._currentSelection)&&!i.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())||this._editor.getConfiguration().contribInfo.suggest.snippetsPreventQuickSuggestions&&ys.get(this._editor).isInSnippet())return;this.cancel(),this._triggerQuickSuggest.cancelAndSet(function(){if(t._state===0&&g_.shouldAutoTrigger(t._editor)&&t._editor.hasModel()){var o=t._editor.getModel(),s=t._editor.getPosition(),a=t._editor.getConfiguration().contribInfo.quickSuggestions;if(a!==!1){if(a!==!0){o.tokenizeIfCheap(s.lineNumber);var u=o.getLineTokens(s.lineNumber),l=u.getStandardTokenType(u.findTokenIndexAtOffset(Math.max(s.column-1-1,0))),f=a.other&&l===0||a.comments&&l===1||a.strings&&l===2;if(!f)return}t.trigger({auto:!0,shy:!1})}}},this._quickSuggestDelay)}}},n.prototype._refilterCompletionItems=function(){var e=this;Promise.resolve().then(function(){if(e._state!==0&&e._editor.hasModel()){var t=e._editor.getModel(),r=e._editor.getPosition(),i=new g_(t,r,e._state===2,!1);e._onNewContext(i)}})},n.prototype.trigger=function(e,t,r,i){var o=this;if(t===void 0&&(t=!1),!!this._editor.hasModel()){var s=this._editor.getModel(),a=e.auto,u=new g_(s,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=u;var l;e.triggerCharacter?l={triggerKind:1,triggerCharacter:e.triggerCharacter}:r&&r.size>0?l={triggerKind:2}:l={triggerKind:0},this._requestToken=new hd;var f=this._editor.getConfiguration().contribInfo,h=new Set,d=1;switch(f.suggest.snippets){case"top":d=0;break;case"bottom":d=2;break;case"none":h.add(25);break}for(var g in f.suggest.filteredTypes){var v=bF(g,!0);typeof v<"u"&&f.suggest.filteredTypes[g]===!1&&h.add(v)}var m=rBe.create(this._editorWorker,this._editor),y=CJ(s,this._editor.getPosition(),new wJ(d,h,r),l,this._requestToken.token);Promise.all([y,m]).then(function(b){var C=b[0],E=b[1];if(Ue(o._requestToken),o._state!==0&&o._editor.hasModel()){var D=o._editor.getModel();if(vo(i)){var k=SJ(d);C=C.concat(i).sort(k)}var I=new g_(D,o._editor.getPosition(),a,e.shy);o._completionModel=new nBe(C,o._context.column,{leadingLineContent:I.leadingLineContent,characterCountDelta:I.column-o._context.column},E,o._editor.getConfiguration().contribInfo.suggest);for(var T=0,A=C;T<A.length;T++){var M=A[T];nI(M.container)&&o._completionDisposables.add(M.container)}o._onNewContext(I)}}).catch(Le)}},n.prototype._onNewContext=function(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(e.leadingWord.startColumn<this._context.leadingWord.startColumn){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(this._completionModel)if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){var t=this._completionModel.incomplete,r=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1},!0,t,r)}else{var i=this._completionModel.lineContext,o=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(g_.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=i,o=this._completionModel.items.length>0,o&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:o})}}},n}(),al;(function(n){n[n.FILE=0]="FILE",n[n.FOLDER=1]="FOLDER",n[n.ROOT_FOLDER=2]="ROOT_FOLDER"})(al||(al={}));function EC(n,e,t,r){var i=r===al.ROOT_FOLDER?["rootfolder-icon"]:r===al.FOLDER?["folder-icon"]:["file-icon"];if(t){var o;if(t.scheme===rn.data){var s=tf.parseMetaData(t);o=s.get(tf.META_DATA_LABEL)}else o=vj(OG(t).toLowerCase());if(r===al.FOLDER)i.push(o+"-name-folder-icon");else{if(o){i.push(o+"-name-file-icon");for(var a=o.split("."),u=1;u<a.length;u++)i.push(a.slice(u).join(".")+"-ext-file-icon");i.push("ext-file-icon")}var l=oBe(n,e,t);l&&i.push(vj(l)+"-lang-file-icon")}}return i}function oBe(n,e,t){if(!t)return null;var r=null;if(t.scheme===rn.data){var i=tf.parseMetaData(t),o=i.get(tf.META_DATA_MIME);o&&(r=e.getModeId(o))}else{var s=n.getModel(t);s&&(r=s.getModeId())}return r&&r!==v2?r:e.getModeIdByFilepathOrFirstLine(t)}function vj(n){return n.replace(/\s/g,"\\$&")}var FR=function(){return FR=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},FR.apply(this,arguments)},LJ=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ca=function(n,e){return function(t,r){e(t,r,n)}},sBe=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},aBe=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},uBe=!1,lBe=G("editorSuggestWidget.background",{dark:fu,light:fu,hc:fu},S("editorSuggestWidgetBackground","Background color of the suggest widget.")),cBe=G("editorSuggestWidget.border",{dark:ed,light:ed,hc:ed},S("editorSuggestWidgetBorder","Border color of the suggest widget.")),fBe=G("editorSuggestWidget.foreground",{dark:jc,light:jc,hc:jc},S("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),hBe=G("editorSuggestWidget.selectedBackground",{dark:Xh,light:Xh,hc:Xh},S("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),dBe=G("editorSuggestWidget.highlightForeground",{dark:xT,light:xT,hc:xT},S("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),mj=/^(#([\da-f]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))$/i;function pBe(n,e){return n.completion.label.match(mj)?(e[0]=n.completion.label,!0):typeof n.completion.documentation=="string"&&n.completion.documentation.match(mj)?(e[0]=n.completion.documentation,!0):!1}function ey(n){if(!n)return!1;var e=n.completion;return e.documentation?!0:e.detail&&e.detail!==e.label}var gBe=function(){function n(e,t,r,i,o,s){this.widget=e,this.editor=t,this.triggerKeybindingLabel=r,this._modelService=i,this._modeService=o,this._themeService=s}return Object.defineProperty(n.prototype,"templateId",{get:function(){return"suggestion"},enumerable:!0,configurable:!0}),n.prototype.renderTemplate=function(e){var t=this,r=Object.create(null);r.disposables=new De,r.root=e,de(r.root,"show-file-icons"),r.icon=ce(e,ke(".icon")),r.colorspan=ce(r.icon,ke("span.colorspan"));var i=ce(e,ke(".contents")),o=ce(i,ke(".main"));r.iconLabel=new s3(o,{supportHighlights:!0,supportOcticons:!0}),r.disposables.add(r.iconLabel),r.typeLabel=ce(o,ke("span.type-label")),r.readMore=ce(o,ke("span.readMore")),r.readMore.title=S("readMore","Read More...{0}",this.triggerKeybindingLabel);var s=function(){var a=t.editor.getConfiguration(),u=a.fontInfo.fontFamily,l=a.contribInfo.suggestFontSize||a.fontInfo.fontSize,f=a.contribInfo.suggestLineHeight||a.fontInfo.lineHeight,h=a.fontInfo.fontWeight,d=l+"px",g=f+"px";r.root.style.fontSize=d,r.root.style.fontWeight=h,o.style.fontFamily=u,o.style.lineHeight=g,r.icon.style.height=g,r.icon.style.width=g,r.readMore.style.height=g,r.readMore.style.width=g};return s(),r.disposables.add(We.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function(a){return a.fontInfo||a.contribInfo}).on(s,null)),r},n.prototype.renderElement=function(e,t,r){var i=this,o=r,s=e.completion;o.icon.className="icon "+w8(s.kind),o.colorspan.style.backgroundColor="";var a={labelEscapeNewLines:!0,matches:C2(e.score)},u=[];s.kind===19&&pBe(e,u)?(o.icon.className="icon customcolor",o.colorspan.style.backgroundColor=u[0]):s.kind===20&&this._themeService.getIconTheme().hasFileIcons?(o.icon.className="icon hide",a.extraClasses=Ly([EC(this._modelService,this._modeService,bt.from({scheme:"fake",path:s.label}),al.FILE),EC(this._modelService,this._modeService,bt.from({scheme:"fake",path:s.detail}),al.FILE)])):s.kind===23&&this._themeService.getIconTheme().hasFolderIcons?(o.icon.className="icon hide",a.extraClasses=Ly([EC(this._modelService,this._modeService,bt.from({scheme:"fake",path:s.label}),al.FOLDER),EC(this._modelService,this._modeService,bt.from({scheme:"fake",path:s.detail}),al.FOLDER)])):(o.icon.className="icon hide",a.extraClasses=["suggest-icon "+w8(s.kind)]),s.tags&&s.tags.indexOf(1)>=0&&(a.extraClasses=(a.extraClasses||[]).concat(["deprecated"]),a.matches=[]),o.iconLabel.setLabel(s.label,void 0,a),o.typeLabel.textContent=(s.detail||"").replace(/\n.*$/m,""),ey(e)?(Yr(o.readMore),o.readMore.onmousedown=function(l){l.stopPropagation(),l.preventDefault()},o.readMore.onclick=function(l){l.stopPropagation(),l.preventDefault(),i.widget.toggleDetails()}):(yr(o.readMore),o.readMore.onmousedown=null,o.readMore.onclick=null)},n.prototype.disposeTemplate=function(e){e.disposables.dispose()},n=LJ([ca(3,yo),ca(4,mf),ca(5,Ir)],n),n}(),vBe=function(){function n(e,t,r,i,o){var s=this;this.widget=t,this.editor=r,this.markdownRenderer=i,this.triggerKeybindingLabel=o,this.borderWidth=1,this.disposables=new De,this.el=ce(e,ke(".details")),this.disposables.add(en(function(){return e.removeChild(s.el)})),this.body=ke(".body"),this.scrollbar=new Z0(this.body,{}),ce(this.el,this.scrollbar.getDomNode()),this.disposables.add(this.scrollbar),this.header=ce(this.body,ke(".header")),this.close=ce(this.header,ke("span.close")),this.close.title=S("readLess","Read less...{0}",this.triggerKeybindingLabel),this.type=ce(this.header,ke("p.type")),this.docs=ce(this.body,ke("p.docs")),this.ariaLabel=null,this.configureFont(),We.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function(a){return a.fontInfo}).on(this.configureFont,this,this.disposables),i.onDidRenderCodeBlock(function(){return s.scrollbar.scanDomNode()},this,this.disposables)}return Object.defineProperty(n.prototype,"element",{get:function(){return this.el},enumerable:!0,configurable:!0}),n.prototype.renderLoading=function(){this.type.textContent=S("loading","Loading..."),this.docs.textContent=""},n.prototype.renderItem=function(e,t){var r=this;this.renderDisposeable=Ue(this.renderDisposeable);var i=e.completion,o=i.documentation,s=i.detail;if(t){var a="";a+="score: "+e.score[0]+(e.word?", compared '"+(e.completion.filterText&&e.completion.filterText+" (filterText)"||e.completion.label)+"' with '"+e.word+"'":" (no prefix)")+`
`,a+="distance: "+e.distance+`, see localityBonus-setting
`,a+="index: "+e.idx+", based on "+(e.completion.sortText&&'sortText: "'+e.completion.sortText+'"'||"label")+`
`,o=new _d().appendCodeblock("empty",a),s="Provider: "+e.provider._debugDisplayName}if(!t&&!ey(e)){this.type.textContent="",this.docs.textContent="",de(this.el,"no-docs"),this.ariaLabel=null;return}if(qe(this.el,"no-docs"),typeof o=="string")qe(this.docs,"markdown-docs"),this.docs.textContent=o;else{de(this.docs,"markdown-docs"),this.docs.innerHTML="";var u=this.markdownRenderer.render(o);this.renderDisposeable=u,this.docs.appendChild(u.element)}s?(this.type.innerText=s,Yr(this.type)):(this.type.innerText="",yr(this.type)),this.el.style.height=this.header.offsetHeight+this.docs.offsetHeight+this.borderWidth*2+"px",this.close.onmousedown=function(l){l.preventDefault(),l.stopPropagation()},this.close.onclick=function(l){l.preventDefault(),l.stopPropagation(),r.widget.toggleDetails()},this.body.scrollTop=0,this.scrollbar.scanDomNode(),this.ariaLabel=Nt("{0}{1}",s||"",o?typeof o=="string"?o:o.value:"")},n.prototype.getAriaLabel=function(){return this.ariaLabel},n.prototype.scrollDown=function(e){e===void 0&&(e=8),this.body.scrollTop+=e},n.prototype.scrollUp=function(e){e===void 0&&(e=8),this.body.scrollTop-=e},n.prototype.scrollTop=function(){this.body.scrollTop=0},n.prototype.scrollBottom=function(){this.body.scrollTop=this.body.scrollHeight},n.prototype.pageDown=function(){this.scrollDown(80)},n.prototype.pageUp=function(){this.scrollUp(80)},n.prototype.setBorderWidth=function(e){this.borderWidth=e},n.prototype.configureFont=function(){var e=this.editor.getConfiguration(),t=e.fontInfo.fontFamily,r=e.contribInfo.suggestFontSize||e.fontInfo.fontSize,i=e.contribInfo.suggestLineHeight||e.fontInfo.lineHeight,o=e.fontInfo.fontWeight,s=r+"px",a=i+"px";this.el.style.fontSize=s,this.el.style.fontWeight=o,this.type.style.fontFamily=t,this.close.style.height=a,this.close.style.width=a},n.prototype.dispose=function(){this.disposables.dispose(),this.renderDisposeable=Ue(this.renderDisposeable)},n}(),mBe=function(){function n(e,t,r,i,o,s,a,u,l){var f=this;this.editor=e,this.telemetryService=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.state=null,this.isAuto=!1,this.loadingTimeout=te.None,this.currentSuggestionDetails=null,this.ignoreFocusEvents=!1,this.completionModel=null,this.showTimeout=new Ho,this.toDispose=new De,this.onDidSelectEmitter=new j,this.onDidFocusEmitter=new j,this.onDidHideEmitter=new j,this.onDidShowEmitter=new j,this.onDidSelect=this.onDidSelectEmitter.event,this.onDidFocus=this.onDidFocusEmitter.event,this.onDidHide=this.onDidHideEmitter.event,this.onDidShow=this.onDidShowEmitter.event,this.maxWidgetWidth=660,this.listWidth=330,this.firstFocusInCurrentList=!1,this.preferDocPositionTop=!1,this.docsPositionPreviousWidgetY=null,this.explainMode=!1,this._lastAriaAlertLabel=null;var h=s.lookupKeybinding("editor.action.triggerSuggest"),d=h?" ("+h.getLabel()+")":"",g=this.toDispose.add(new $I(e,a,u));this.isAuto=!1,this.focusedItem=null,this.storageService=o,this.element=ke(".editor-widget.suggest-widget"),this.toDispose.add(ie(this.element,"click",function(y){y.target===f.element&&f.hideWidget()})),this.messageElement=ce(this.element,ke(".message")),this.listElement=ce(this.element,ke(".tree")),this.details=l.createInstance(vBe,this.element,this,this.editor,g,d);var v=function(){return vt(f.element,"no-icons",!f.editor.getConfiguration().contribInfo.suggest.showIcons)};v();var m=l.createInstance(gBe,this,this.editor,d);this.list=new lX(this.listElement,this,[m],{useShadows:!1,openController:{shouldOpen:function(){return!1}},mouseSupport:!1}),this.toDispose.add(WZ(this.list,i,{listInactiveFocusBackground:hBe,listInactiveFocusOutline:ti})),this.toDispose.add(i.onThemeChange(function(y){return f.onThemeChange(y)})),this.toDispose.add(e.onDidLayoutChange(function(){return f.onEditorLayoutChange()})),this.toDispose.add(this.list.onMouseDown(function(y){return f.onListMouseDown(y)})),this.toDispose.add(this.list.onSelectionChange(function(y){return f.onListSelection(y)})),this.toDispose.add(this.list.onFocusChange(function(y){return f.onListFocus(y)})),this.toDispose.add(this.editor.onDidChangeCursorSelection(function(){return f.onCursorSelectionChanged()})),this.toDispose.add(this.editor.onDidChangeConfiguration(function(y){return y.contribInfo&&v()})),this.suggestWidgetVisible=En.Visible.bindTo(r),this.suggestWidgetMultipleSuggestions=En.MultipleSuggestions.bindTo(r),this.editor.addContentWidget(this),this.setState(0),this.onThemeChange(i.getTheme())}return n.prototype.onCursorSelectionChanged=function(){this.state!==0&&this.editor.layoutContentWidget(this)},n.prototype.onEditorLayoutChange=function(){(this.state===3||this.state===5)&&this.expandDocsSettingFromStorage()&&this.expandSideOrBelow()},n.prototype.onListMouseDown=function(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this.select(e.element,e.index))},n.prototype.onListSelection=function(e){e.elements.length&&this.select(e.elements[0],e.indexes[0])},n.prototype.select=function(e,t){var r=this.completionModel;r&&(this.onDidSelectEmitter.fire({item:e,index:t,model:r}),this.editor.focus())},n.prototype._getSuggestionAriaAlertLabel=function(e){return this.expandDocsSettingFromStorage()?S("ariaCurrenttSuggestionReadDetails","Item {0}, docs: {1}",e.completion.label,this.details.getAriaLabel()):e.completion.label},n.prototype._ariaAlert=function(e){this._lastAriaAlertLabel!==e&&(this._lastAriaAlertLabel=e,this._lastAriaAlertLabel&&pi(this._lastAriaAlertLabel,!0))},n.prototype.onThemeChange=function(e){var t=e.getColor(lBe);t&&(this.listElement.style.backgroundColor=t.toString(),this.details.element.style.backgroundColor=t.toString(),this.messageElement.style.backgroundColor=t.toString());var r=e.getColor(cBe);r&&(this.listElement.style.borderColor=r.toString(),this.details.element.style.borderColor=r.toString(),this.messageElement.style.borderColor=r.toString(),this.detailsBorderColor=r.toString());var i=e.getColor(Qg);i&&(this.detailsFocusBorderColor=i.toString()),this.details.setBorderWidth(e.type==="hc"?2:1)},n.prototype.onListFocus=function(e){var t=this;if(!this.ignoreFocusEvents){if(!e.elements.length){this.currentSuggestionDetails&&(this.currentSuggestionDetails.cancel(),this.currentSuggestionDetails=null,this.focusedItem=null),this._ariaAlert(null);return}if(this.completionModel){var r=e.elements[0],i=e.indexes[0];this.firstFocusInCurrentList=!this.focusedItem,r!==this.focusedItem&&(this.currentSuggestionDetails&&(this.currentSuggestionDetails.cancel(),this.currentSuggestionDetails=null),this.focusedItem=r,this.list.reveal(i),this.currentSuggestionDetails=Cr(function(o){return sBe(t,void 0,void 0,function(){var s,a,u=this;return aBe(this,function(l){switch(l.label){case 0:return s=zg(function(){return u.showDetails(!0)},250),o.onCancellationRequested(function(){return s.dispose()}),[4,r.resolve(o)];case 1:return a=l.sent(),s.dispose(),[2,a]}})})}),this.currentSuggestionDetails.then(function(){i>=t.list.length||r!==t.list.element(i)||(t.ignoreFocusEvents=!0,t.list.splice(i,1,[r]),t.list.setFocus([i]),t.ignoreFocusEvents=!1,t.expandDocsSettingFromStorage()?t.showDetails(!1):qe(t.element,"docs-side"),t._ariaAlert(t._getSuggestionAriaAlertLabel(r)))}).catch(Le)),this.onDidFocusEmitter.fire({item:r,index:i,model:this.completionModel})}}},n.prototype.setState=function(e){if(this.element){var t=this.state!==e;switch(this.state=e,vt(this.element,"frozen",e===4),e){case 0:yr(this.messageElement,this.details.element,this.listElement),this.hide(),this.listHeight=0,t&&this.list.splice(0,this.list.length),this.focusedItem=null;break;case 1:this.messageElement.textContent=n.LOADING_MESSAGE,yr(this.listElement,this.details.element),Yr(this.messageElement),qe(this.element,"docs-side"),this.show(),this.focusedItem=null;break;case 2:this.messageElement.textContent=n.NO_SUGGESTIONS_MESSAGE,yr(this.listElement,this.details.element),Yr(this.messageElement),qe(this.element,"docs-side"),this.show(),this.focusedItem=null;break;case 3:yr(this.messageElement),Yr(this.listElement),this.show();break;case 4:yr(this.messageElement),Yr(this.listElement),this.show();break;case 5:yr(this.messageElement),Yr(this.details.element,this.listElement),this.show(),this._ariaAlert(this.details.getAriaLabel());break}}},n.prototype.showTriggered=function(e,t){var r=this;this.state===0&&(this.isAuto=!!e,this.isAuto||(this.loadingTimeout=zg(function(){return r.setState(1)},t)))},n.prototype.showSuggestions=function(e,t,r,i){if(this.preferDocPositionTop=!1,this.docsPositionPreviousWidgetY=null,this.loadingTimeout.dispose(),this.currentSuggestionDetails&&(this.currentSuggestionDetails.cancel(),this.currentSuggestionDetails=null),this.completionModel!==e&&(this.completionModel=e),r&&this.state!==2&&this.state!==0){this.setState(4);return}var o=this.completionModel.items.length,s=o===0;if(this.suggestWidgetMultipleSuggestions.set(o>1),s)i?this.setState(0):this.setState(2),this.completionModel=null;else{if(this.state!==3){var a=this.completionModel.stats;a.wasAutomaticallyTriggered=!!i,this.telemetryService.publicLog("suggestWidget",FR({},a))}this.focusedItem=null,this.list.splice(0,this.list.length,this.completionModel.items),r?this.setState(4):this.setState(3),this.list.reveal(t,0),this.list.setFocus([t]),this.detailsBorderColor&&(this.details.element.style.borderColor=this.detailsBorderColor)}},n.prototype.selectNextPage=function(){switch(this.state){case 0:return!1;case 5:return this.details.pageDown(),!0;case 1:return!this.isAuto;default:return this.list.focusNextPage(),!0}},n.prototype.selectNext=function(){switch(this.state){case 0:return!1;case 1:return!this.isAuto;default:return this.list.focusNext(1,!0),!0}},n.prototype.selectLast=function(){switch(this.state){case 0:return!1;case 5:return this.details.scrollBottom(),!0;case 1:return!this.isAuto;default:return this.list.focusLast(),!0}},n.prototype.selectPreviousPage=function(){switch(this.state){case 0:return!1;case 5:return this.details.pageUp(),!0;case 1:return!this.isAuto;default:return this.list.focusPreviousPage(),!0}},n.prototype.selectPrevious=function(){switch(this.state){case 0:return!1;case 1:return!this.isAuto;default:return this.list.focusPrevious(1,!0),!1}},n.prototype.selectFirst=function(){switch(this.state){case 0:return!1;case 5:return this.details.scrollTop(),!0;case 1:return!this.isAuto;default:return this.list.focusFirst(),!0}},n.prototype.getFocusedItem=function(){if(this.state!==0&&this.state!==2&&this.state!==1&&this.completionModel)return{item:this.list.getFocusedElements()[0],index:this.list.getFocus()[0],model:this.completionModel}},n.prototype.toggleDetailsFocus=function(){this.state===5?(this.setState(3),this.detailsBorderColor&&(this.details.element.style.borderColor=this.detailsBorderColor)):this.state===3&&this.expandDocsSettingFromStorage()&&(this.setState(5),this.detailsFocusBorderColor&&(this.details.element.style.borderColor=this.detailsFocusBorderColor)),this.telemetryService.publicLog2("suggestWidget:toggleDetailsFocus")},n.prototype.toggleDetails=function(){if(ey(this.list.getFocusedElements()[0]))if(this.expandDocsSettingFromStorage())this.updateExpandDocsSetting(!1),yr(this.details.element),qe(this.element,"docs-side"),qe(this.element,"docs-below"),this.editor.layoutContentWidget(this),this.telemetryService.publicLog2("suggestWidget:collapseDetails");else{if(this.state!==3&&this.state!==5&&this.state!==4)return;this.updateExpandDocsSetting(!0),this.showDetails(!1),this._ariaAlert(this.details.getAriaLabel()),this.telemetryService.publicLog2("suggestWidget:expandDetails")}},n.prototype.showDetails=function(e){this.expandSideOrBelow(),Yr(this.details.element),this.details.element.style.maxHeight=this.maxWidgetHeight+"px",e?this.details.renderLoading():this.details.renderItem(this.list.getFocusedElements()[0],this.explainMode),this.listElement.style.marginTop="0px",this.editor.layoutContentWidget(this),this.adjustDocsPosition(),this.editor.focus()},n.prototype.toggleExplainMode=function(){this.list.getFocusedElements()[0]&&this.expandDocsSettingFromStorage()&&(this.explainMode=!this.explainMode,this.showDetails(!1))},n.prototype.show=function(){var e=this,t=this.updateListHeight();t!==this.listHeight&&(this.editor.layoutContentWidget(this),this.listHeight=t),this.suggestWidgetVisible.set(!0),this.showTimeout.cancelAndSet(function(){de(e.element,"visible"),e.onDidShowEmitter.fire(e)},100)},n.prototype.hide=function(){this.suggestWidgetVisible.reset(),this.suggestWidgetMultipleSuggestions.reset(),qe(this.element,"visible")},n.prototype.hideWidget=function(){this.loadingTimeout.dispose(),this.setState(0),this.onDidHideEmitter.fire(this)},n.prototype.getPosition=function(){if(this.state===0)return null;var e=[2,1];return this.preferDocPositionTop&&(e=[1]),{position:this.editor.getPosition(),preference:e}},n.prototype.getDomNode=function(){return this.element},n.prototype.getId=function(){return n.ID},n.prototype.updateListHeight=function(){var e=0;if(this.state===2||this.state===1)e=this.unfocusedHeight;else{var t=this.list.contentHeight/this.unfocusedHeight,r=this.editor.getConfiguration().contribInfo.suggest.maxVisibleSuggestions;e=Math.min(t,r)*this.unfocusedHeight}return this.element.style.lineHeight=this.unfocusedHeight+"px",this.listElement.style.height=e+"px",this.list.layout(e),e},n.prototype.adjustDocsPosition=function(){if(this.editor.hasModel()){var e=this.editor.getConfiguration().fontInfo.lineHeight,t=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),r=Wr(this.editor.getDomNode()),i=r.left+t.left,o=r.top+t.top+t.height,s=Wr(this.element),a=s.left,u=s.top;if(this.docsPositionPreviousWidgetY&&this.docsPositionPreviousWidgetY<u&&!this.preferDocPositionTop){this.preferDocPositionTop=!0,this.adjustDocsPosition();return}this.docsPositionPreviousWidgetY=u,a<i-this.listWidth?de(this.element,"list-right"):qe(this.element,"list-right"),La(this.element,"docs-side")&&o-e>u&&this.details.element.offsetHeight>this.listElement.offsetHeight&&(this.listElement.style.marginTop=this.details.element.offsetHeight-this.listElement.offsetHeight+"px")}},n.prototype.expandSideOrBelow=function(){if(!ey(this.focusedItem)&&this.firstFocusInCurrentList){qe(this.element,"docs-side"),qe(this.element,"docs-below");return}var e=this.element.style.maxWidth.match(/(\d+)px/);!e||Number(e[1])<this.maxWidgetWidth?(de(this.element,"docs-below"),qe(this.element,"docs-side")):ey(this.focusedItem)&&(de(this.element,"docs-side"),qe(this.element,"docs-below"))},Object.defineProperty(n.prototype,"maxWidgetHeight",{get:function(){return this.unfocusedHeight*this.editor.getConfiguration().contribInfo.suggest.maxVisibleSuggestions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"unfocusedHeight",{get:function(){var e=this.editor.getConfiguration();return e.contribInfo.suggestLineHeight||e.fontInfo.lineHeight},enumerable:!0,configurable:!0}),n.prototype.getHeight=function(e){return this.unfocusedHeight},n.prototype.getTemplateId=function(e){return"suggestion"},n.prototype.expandDocsSettingFromStorage=function(){return this.storageService.getBoolean("expandSuggestionDocs",0,uBe)},n.prototype.updateExpandDocsSetting=function(e){this.storageService.store("expandSuggestionDocs",e,0)},n.prototype.dispose=function(){this.details.dispose(),this.list.dispose(),this.toDispose.dispose(),this.loadingTimeout.dispose(),this.showTimeout.dispose()},n.ID="editor.widget.suggestWidget",n.LOADING_MESSAGE=S("suggestWidget.loading","Loading..."),n.NO_SUGGESTIONS_MESSAGE=S("suggestWidget.noSuggestions","No suggestions."),n=LJ([ca(1,$0),ca(2,rt),ca(3,Ir),ca(4,_f),ca(5,er),ca(6,mf),ca(7,rf),ca(8,Hn)],n),n}();Xt(function(n,e){var t=n.getColor(dBe);t&&e.addRule(".monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: "+t+"; }");var r=n.getColor(fBe);r&&e.addRule(".monaco-editor .suggest-widget { color: "+r+"; }");var i=n.getColor(yI);i&&e.addRule(".monaco-editor .suggest-widget a { color: "+i+"; }");var o=n.getColor(VF);o&&e.addRule(".monaco-editor .suggest-widget code { background-color: "+o+"; }")});var _Be=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yBe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},bBe=function(n,e){return function(t,r){e(t,r,n)}},kJ=function(n){_Be(e,n);function e(t,r){var i=n.call(this)||this;return i._editor=t,i._enabled=!1,i._ckAtEnd=e.AtEnd.bindTo(r),i._register(i._editor.onDidChangeConfiguration(function(o){return o.contribInfo&&i._update()})),i._update(),i}return e.prototype.dispose=function(){n.prototype.dispose.call(this),Ue(this._selectionListener),this._ckAtEnd.reset()},e.prototype._update=function(){var t=this,r=this._editor.getConfiguration().contribInfo.tabCompletion==="on";if(this._enabled!==r)if(this._enabled=r,this._enabled){var i=function(){if(!t._editor.hasModel()){t._ckAtEnd.set(!1);return}var o=t._editor.getModel(),s=t._editor.getSelection(),a=o.getWordAtPosition(s.getStartPosition());if(!a){t._ckAtEnd.set(!1);return}t._ckAtEnd.set(a.endColumn===s.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(i),i()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)},e.AtEnd=new Re("atEndOfWord",!1),e=yBe([bBe(1,rt)],e),e}(te),wBe=function(){function n(e,t,r){var i=this;this._disposables=new De,this._disposables.add(t.onDidShow(function(){return i._onItem(t.getFocusedItem())})),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(function(o){if(i._active){var s=o.charCodeAt(o.length-1);i._active.acceptCharacters.has(s)&&e.getConfiguration().contribInfo.acceptSuggestionOnCommitCharacter&&r(i._active.item)}}))}return n.prototype._onItem=function(e){if(!e||!vo(e.item.completion.commitCharacters)){this.reset();return}if(!(this._active&&this._active.item.item===e.item)){for(var t=new sg,r=0,i=e.item.completion.commitCharacters;r<i.length;r++){var o=i[r];o.length>0&&t.add(o.charCodeAt(0))}this._active={acceptCharacters:t,item:e}}},n.prototype.reset=function(){this._active=void 0},n.prototype.dispose=function(){this._disposables.dispose()},n}(),CBe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BR=function(){return BR=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},BR.apply(this,arguments)},SBe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},v_=function(n,e){return function(t,r){e(t,r,n)}},EBe=function(){function n(e,t){this._model=e,this._position=t;var r=e.getLineMaxColumn(t.lineNumber);if(r!==t.column){var i=e.getOffsetAt(t),o=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:R.fromPositions(t,o),options:{stickiness:1}}])}}return n.prototype.dispose=function(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])},n.prototype.delta=function(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){var t=this._model.getDecorationRange(this._marker[0]),r=this._model.getOffsetAt(t.getStartPosition());return r-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column},n}(),I3=function(){function n(e,t,r,i,o,s){var a=this;this._editor=e,this._memoryService=r,this._commandService=i,this._contextKeyService=o,this._instantiationService=s,this._lineSuffix=new df,this._toDispose=new De,this._model=new iBe(this._editor,t),this._widget=new DO(function(){var f=a._instantiationService.createInstance(mBe,a._editor);a._toDispose.add(f),a._toDispose.add(f.onDidSelect(function(g){return a._insertSuggestion(g,!1,!0)},a));var h=new wBe(a._editor,f,function(g){return a._insertSuggestion(g,!1,!0)});a._toDispose.add(h),a._toDispose.add(a._model.onDidSuggest(function(g){g.completionModel.items.length===0&&h.reset()}));var d=En.MakesTextEdit.bindTo(a._contextKeyService);return a._toDispose.add(f.onDidFocus(function(g){var v=g.item,m=a._editor.getPosition(),y=v.completion.range.startColumn,b=m.column,C=!0;if(a._editor.getConfiguration().contribInfo.acceptSuggestionOnEnter==="smart"&&a._model.state===2&&!v.completion.command&&!v.completion.additionalTextEdits&&!(v.completion.insertTextRules&4)&&b-y===v.completion.insertText.length){var E=a._editor.getModel().getValueInRange({startLineNumber:m.lineNumber,startColumn:y,endLineNumber:m.lineNumber,endColumn:b});C=E!==v.completion.insertText}d.set(C)})),a._toDispose.add(en(function(){return d.reset()})),f}),this._alternatives=new DO(function(){return a._toDispose.add(new ZI(a._editor,a._contextKeyService))}),this._toDispose.add(s.createInstance(kJ,e)),this._toDispose.add(this._model.onDidTrigger(function(f){a._widget.getValue().showTriggered(f.auto,f.shy?250:50),a._lineSuffix.value=new EBe(a._editor.getModel(),f.position)})),this._toDispose.add(this._model.onDidSuggest(function(f){if(!f.shy){var h=a._memoryService.select(a._editor.getModel(),a._editor.getPosition(),f.completionModel.items);a._widget.getValue().showSuggestions(f.completionModel,h,f.isFrozen,f.auto)}})),this._toDispose.add(this._model.onDidCancel(function(f){f.retrigger||a._widget.getValue().hideWidget()})),this._toDispose.add(this._editor.onDidBlurEditorWidget(function(){a._model.cancel(),a._model.clear()}));var u=En.AcceptSuggestionsOnEnter.bindTo(o),l=function(){var f=a._editor.getConfiguration().contribInfo.acceptSuggestionOnEnter;u.set(f==="on"||f==="smart")};this._toDispose.add(this._editor.onDidChangeConfiguration(function(){return l()})),l()}return n.get=function(e){return e.getContribution(n.ID)},n.prototype.getId=function(){return n.ID},n.prototype.dispose=function(){this._alternatives.dispose(),this._toDispose.dispose(),this._widget.dispose(),this._model.dispose(),this._lineSuffix.dispose()},n.prototype._insertSuggestion=function(e,t,r){var i,o=this;if(!e||!e.item){this._alternatives.getValue().reset(),this._model.cancel(),this._model.clear();return}if(this._editor.hasModel()){var s=this._editor.getModel(),a=s.getAlternativeVersionId(),u=e.item,l=u.completion,f=u.position,h=this._editor.getPosition().column,d=h-f.column;r&&this._editor.pushUndoStop(),Array.isArray(l.additionalTextEdits)&&this._editor.executeEdits("suggestController.additionalTextEdits",l.additionalTextEdits.map(function(b){return lr.replace(R.lift(b.range),b.text)})),this._memoryService.memorize(s,this._editor.getPosition(),e.item);var g=l.insertText;l.insertTextRules&4||(g=xJ.escape(g));var v=f.column-l.range.startColumn,m=l.range.endColumn-f.column,y=this._lineSuffix.value?this._lineSuffix.value.delta(this._editor.getPosition()):0;ys.get(this._editor).insert(g,{overwriteBefore:v+d,overwriteAfter:m+y,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(l.insertTextRules&1)}),r&&this._editor.pushUndoStop(),l.command?l.command.id===TJ.id?this._model.trigger({auto:!0,shy:!1},!0):((i=this._commandService).executeCommand.apply(i,[l.command.id].concat(l.command.arguments?l.command.arguments.slice():[])).catch(Le).finally(function(){return o._model.clear()}),this._model.cancel()):(this._model.cancel(),this._model.clear()),t&&this._alternatives.getValue().set(e,function(b){for(;s.canUndo();){a!==s.getAlternativeVersionId()&&s.undo(),o._insertSuggestion(b,!1,!1);break}}),this._alertCompletionItem(e.item)}},n.prototype._alertCompletionItem=function(e){var t=e.completion;if(vo(t.additionalTextEdits)){var r=S("arai.alert.snippet","Accepting '{0}' made {1} additional edits",t.label,t.additionalTextEdits.length);pi(r)}},n.prototype.triggerSuggest=function(e){this._editor.hasModel()&&(this._model.trigger({auto:!1,shy:!1},!1,e),this._editor.revealLine(this._editor.getPosition().lineNumber,0),this._editor.focus())},n.prototype.triggerSuggestAndAcceptBest=function(e){var t=this;if(this._editor.hasModel()){var r=this._editor.getPosition(),i=function(){r.equals(t._editor.getPosition())&&t._commandService.executeCommand(e.fallback)},o=function(s){if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;var a=t._editor.getPosition(),u=s.completion.range.startColumn,l=a.column;if(l-u!==s.completion.insertText.length)return!0;var f=t._editor.getModel().getValueInRange({startLineNumber:a.lineNumber,startColumn:u,endLineNumber:a.lineNumber,endColumn:l});return f!==s.completion.insertText};We.once(this._model.onDidTrigger)(function(s){var a=[];We.any(t._model.onDidTrigger,t._model.onDidCancel)(function(){Ue(a),i()},void 0,a),t._model.onDidSuggest(function(u){var l=u.completionModel;if(Ue(a),l.items.length===0){i();return}var f=t._memoryService.select(t._editor.getModel(),t._editor.getPosition(),l.items),h=l.items[f];if(!o(h)){i();return}t._editor.pushUndoStop(),t._insertSuggestion({index:f,item:h,model:l},!0,!1)},void 0,a)}),this._model.trigger({auto:!1,shy:!0}),this._editor.revealLine(r.lineNumber,0),this._editor.focus()}},n.prototype.acceptSelectedSuggestion=function(e){var t=this._widget.getValue().getFocusedItem();this._insertSuggestion(t,!!e,!0)},n.prototype.acceptNextSuggestion=function(){this._alternatives.getValue().next()},n.prototype.acceptPrevSuggestion=function(){this._alternatives.getValue().prev()},n.prototype.cancelSuggestWidget=function(){this._model.cancel(),this._model.clear(),this._widget.getValue().hideWidget()},n.prototype.selectNextSuggestion=function(){this._widget.getValue().selectNext()},n.prototype.selectNextPageSuggestion=function(){this._widget.getValue().selectNextPage()},n.prototype.selectLastSuggestion=function(){this._widget.getValue().selectLast()},n.prototype.selectPrevSuggestion=function(){this._widget.getValue().selectPrevious()},n.prototype.selectPrevPageSuggestion=function(){this._widget.getValue().selectPreviousPage()},n.prototype.selectFirstSuggestion=function(){this._widget.getValue().selectFirst()},n.prototype.toggleSuggestionDetails=function(){this._widget.getValue().toggleDetails()},n.prototype.toggleExplainMode=function(){this._widget.getValue().toggleExplainMode()},n.prototype.toggleSuggestionFocus=function(){this._widget.getValue().toggleDetailsFocus()},n.ID="editor.contrib.suggestController",n=SBe([v_(1,qs),v_(2,DJ),v_(3,bi),v_(4,rt),v_(5,Hn)],n),n}(),TJ=function(n){CBe(e,n);function e(){return n.call(this,{id:e.id,label:S("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:_e.and(P.writable,P.hasCompletionItemProvider),kbOpts:{kbExpr:P.textInputFocus,primary:2058,mac:{primary:266},weight:100}})||this}return e.prototype.run=function(t,r){var i=I3.get(r);i&&i.triggerSuggest()},e.id="editor.action.triggerSuggest",e}(Ne);tn(I3);re(TJ);var Ks=190,wo=$i.bindToContribution(I3.get);ee(new wo({id:"acceptSelectedSuggestion",precondition:En.Visible,handler:function(n){return n.acceptSelectedSuggestion(!0)},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:2}}));ee(new wo({id:"acceptSelectedSuggestionOnEnter",precondition:En.Visible,handler:function(n){return n.acceptSelectedSuggestion(!1)},kbOpts:{weight:Ks,kbExpr:_e.and(P.textInputFocus,En.AcceptSuggestionsOnEnter,En.MakesTextEdit),primary:3}}));ee(new wo({id:"hideSuggestWidget",precondition:En.Visible,handler:function(n){return n.cancelSuggestWidget()},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:9,secondary:[1033]}}));ee(new wo({id:"selectNextSuggestion",precondition:_e.and(En.Visible,En.MultipleSuggestions),handler:function(n){return n.selectNextSuggestion()},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));ee(new wo({id:"selectNextPageSuggestion",precondition:_e.and(En.Visible,En.MultipleSuggestions),handler:function(n){return n.selectNextPageSuggestion()},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:12,secondary:[2060]}}));ee(new wo({id:"selectLastSuggestion",precondition:_e.and(En.Visible,En.MultipleSuggestions),handler:function(n){return n.selectLastSuggestion()}}));ee(new wo({id:"selectPrevSuggestion",precondition:_e.and(En.Visible,En.MultipleSuggestions),handler:function(n){return n.selectPrevSuggestion()},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));ee(new wo({id:"selectPrevPageSuggestion",precondition:_e.and(En.Visible,En.MultipleSuggestions),handler:function(n){return n.selectPrevPageSuggestion()},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:11,secondary:[2059]}}));ee(new wo({id:"selectFirstSuggestion",precondition:_e.and(En.Visible,En.MultipleSuggestions),handler:function(n){return n.selectFirstSuggestion()}}));ee(new wo({id:"toggleSuggestionDetails",precondition:En.Visible,handler:function(n){return n.toggleSuggestionDetails()},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:2058,mac:{primary:266}}}));ee(new wo({id:"toggleExplainMode",precondition:En.Visible,handler:function(n){return n.toggleExplainMode()},kbOpts:{weight:100,primary:2133}}));ee(new wo({id:"toggleSuggestionFocus",precondition:En.Visible,handler:function(n){return n.toggleSuggestionFocus()},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:2570,mac:{primary:778}}}));ee(new wo({id:"insertBestCompletion",precondition:_e.and(_e.equals("config.editor.tabCompletion","on"),kJ.AtEnd,En.Visible.toNegated(),ZI.OtherSuggestions.toNegated(),ys.InSnippetMode.toNegated()),handler:function(n,e){n.triggerSuggestAndAcceptBest(di(e)?BR({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Ks,primary:2}}));ee(new wo({id:"insertNextSuggestion",precondition:_e.and(_e.equals("config.editor.tabCompletion","on"),ZI.OtherSuggestions,En.Visible.toNegated(),ys.InSnippetMode.toNegated()),handler:function(n){return n.acceptNextSuggestion()},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:2}}));ee(new wo({id:"insertPrevSuggestion",precondition:_e.and(_e.equals("config.editor.tabCompletion","on"),ZI.OtherSuggestions,En.Visible.toNegated(),ys.InSnippetMode.toNegated()),handler:function(n){return n.acceptPrevSuggestion()},kbOpts:{weight:Ks,kbExpr:P.textInputFocus,primary:1026}}));var IBe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xBe=function(n){IBe(e,n);function e(){return n.call(this,{id:"editor.action.forceRetokenize",label:S("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})||this}return e.prototype.run=function(t,r){if(r.hasModel()){var i=r.getModel();i.resetTokenization();var o=new xF(!0);i.forceTokenization(i.getLineCount()),o.stop(),console.log("tokenization took "+o.elapsed())}},e}(Ne);re(xBe);var DBe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WR=function(n){DBe(e,n);function e(){return n.call(this,{id:e.ID,label:S({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})||this}return e.prototype.run=function(t,r){var i=oS.getTabFocusMode(),o=!i;oS.setTabFocusMode(o),pi(o?S("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):S("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))},e.ID="editor.action.toggleTabFocusMode",e}(Ne);re(WR);var Kd=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LBe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},kBe=function(n,e){return function(t,r){e(t,r,n)}},TBe=G("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},S("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),NBe=G("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},S("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),ABe=G("editor.wordHighlightBorder",{light:null,dark:null,hc:ti},S("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),OBe=G("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:ti},S("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),RBe=G("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},S("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),MBe=G("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},S("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),XI=new Re("hasWordHighlights",!1);function NJ(n,e,t){var r=$g.ordered(n);return JP(r.map(function(i){return function(){return Promise.resolve(i.provideDocumentHighlights(n,e,t)).then(void 0,ji)}}),vo)}var AJ=function(){function n(e,t,r){var i=this;this._wordRange=this._getCurrentWordRange(e,t),this.result=Cr(function(o){return i._compute(e,t,r,o)})}return n.prototype._getCurrentWordRange=function(e,t){var r=e.getWordAtPosition(t.getPosition());return r?new R(t.startLineNumber,r.startColumn,t.startLineNumber,r.endColumn):null},n.prototype.isValid=function(e,t,r){for(var i=t.startLineNumber,o=t.startColumn,s=t.endColumn,a=this._getCurrentWordRange(e,t),u=!!(this._wordRange&&this._wordRange.equalsRange(a)),l=0,f=r.length;!u&&l<f;l++){var h=e.getDecorationRange(r[l]);h&&h.startLineNumber===i&&h.startColumn<=o&&h.endColumn>=s&&(u=!0)}return u},n.prototype.cancel=function(){this.result.cancel()},n}(),PBe=function(n){Kd(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._compute=function(t,r,i,o){return NJ(t,r.getPosition(),o).then(function(s){return s||[]})},e}(AJ),FBe=function(n){Kd(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return o._selectionIsEmpty=r.isEmpty(),o}return e.prototype._compute=function(t,r,i,o){return j0(250,o).then(function(){if(!r.isEmpty())return[];var s=t.getWordAtPosition(r.getPosition());if(!s)return[];var a=t.findMatches(s.word,!0,!1,!0,i,!1);return a.map(function(u){return{range:u.range,kind:Py.Text}})})},e.prototype.isValid=function(t,r,i){var o=r.isEmpty();return this._selectionIsEmpty!==o?!1:n.prototype.isValid.call(this,t,r,i)},e}(AJ);function BBe(n,e,t){return $g.has(n)?new PBe(n,e,t):new FBe(n,e,t)}Ra("_executeDocumentHighlights",function(n,e){return NJ(n,e,Ft.None)});var WBe=function(){function n(e,t){var r=this;this.toUnhook=new De,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=XI.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getConfiguration().contribInfo.occurrencesHighlight,this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(function(i){r._ignorePositionChangeEvent||r.occurrencesHighlight&&r._onPositionChanged(i)})),this.toUnhook.add(e.onDidChangeModelContent(function(i){r._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(function(i){var o=r.editor.getConfiguration().contribInfo.occurrencesHighlight;r.occurrencesHighlight!==o&&(r.occurrencesHighlight=o,r._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}return n.prototype.hasDecorations=function(){return this._decorationIds.length>0},n.prototype.restore=function(){this.occurrencesHighlight&&this._run()},n.prototype._getSortedHighlights=function(){var e=this;return Ol(this._decorationIds.map(function(t){return e.model.getDecorationRange(t)}).sort(R.compareRangesUsingStarts))},n.prototype.moveNext=function(){var e=this,t=this._getSortedHighlights(),r=Mc(t,function(s){return s.containsPosition(e.editor.getPosition())}),i=(r+1)%t.length,o=t[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(o.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(o)}finally{this._ignorePositionChangeEvent=!1}},n.prototype.moveBack=function(){var e=this,t=this._getSortedHighlights(),r=Mc(t,function(s){return s.containsPosition(e.editor.getPosition())}),i=(r-1+t.length)%t.length,o=t[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(o.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(o)}finally{this._ignorePositionChangeEvent=!1}},n.prototype._removeDecorations=function(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))},n.prototype._stopAll=function(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)},n.prototype._onPositionChanged=function(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()},n.prototype._run=function(){var e=this,t=this.editor.getSelection();if(t.startLineNumber!==t.endLineNumber){this._stopAll();return}var r=t.startLineNumber,i=t.startColumn,o=t.endColumn,s=this.model.getWordAtPosition({lineNumber:r,column:i});if(!s||s.startColumn>i||s.endColumn<o){this._stopAll();return}var a=this.workerRequest&&this.workerRequest.isValid(this.model,t,this._decorationIds);if(this.lastCursorPositionChangeTime=new Date().getTime(),a)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();var u=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=BBe(this.model,this.editor.getSelection(),this.editor.getConfiguration().wordSeparators),this.workerRequest.result.then(function(l){u===e.workerRequestTokenId&&(e.workerRequestCompleted=!0,e.workerRequestValue=l||[],e._beginRenderDecorations())},Le)}},n.prototype._beginRenderDecorations=function(){var e=this,t=new Date().getTime(),r=this.lastCursorPositionChangeTime+250;t>=r?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(function(){e.renderDecorations()},r-t)},n.prototype.renderDecorations=function(){this.renderDecorationsTimer=-1;for(var e=[],t=0,r=this.workerRequestValue.length;t<r;t++){var i=this.workerRequestValue[t];e.push({range:i.range,options:n._getDecorationOptions(i.kind)})}this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())},n._getDecorationOptions=function(e){return e===Py.Write?this._WRITE_OPTIONS:e===Py.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS},n.prototype.dispose=function(){this._stopAll(),this.toUnhook.dispose()},n._WRITE_OPTIONS=tt.register({stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:os(MBe),position:hs.Center}}),n._TEXT_OPTIONS=tt.register({stickiness:1,className:"selectionHighlight",overviewRuler:{color:os(XY),position:hs.Center}}),n._REGULAR_OPTIONS=tt.register({stickiness:1,className:"wordHighlight",overviewRuler:{color:os(RBe),position:hs.Center}}),n}(),x3=function(n){Kd(e,n);function e(t,r){var i=n.call(this)||this;i.wordHighligher=null;var o=function(){t.hasModel()&&(i.wordHighligher=new WBe(t,r))};return i._register(t.onDidChangeModel(function(s){i.wordHighligher&&(i.wordHighligher.dispose(),i.wordHighligher=null),o()})),o(),i}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.saveViewState=function(){return!!(this.wordHighligher&&this.wordHighligher.hasDecorations())},e.prototype.moveNext=function(){this.wordHighligher&&this.wordHighligher.moveNext()},e.prototype.moveBack=function(){this.wordHighligher&&this.wordHighligher.moveBack()},e.prototype.restoreViewState=function(t){this.wordHighligher&&t&&this.wordHighligher.restore()},e.prototype.dispose=function(){this.wordHighligher&&(this.wordHighligher.dispose(),this.wordHighligher=null),n.prototype.dispose.call(this)},e.ID="editor.contrib.wordHighlighter",e=LBe([kBe(1,rt)],e),e}(te),OJ=function(n){Kd(e,n);function e(t,r){var i=n.call(this,r)||this;return i._isNext=t,i}return e.prototype.run=function(t,r){var i=x3.get(r);i&&(this._isNext?i.moveNext():i.moveBack())},e}(Ne),VBe=function(n){Kd(e,n);function e(){return n.call(this,!0,{id:"editor.action.wordHighlight.next",label:S("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:XI,kbOpts:{kbExpr:P.editorTextFocus,primary:65,weight:100}})||this}return e}(OJ),HBe=function(n){Kd(e,n);function e(){return n.call(this,!1,{id:"editor.action.wordHighlight.prev",label:S("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:XI,kbOpts:{kbExpr:P.editorTextFocus,primary:1089,weight:100}})||this}return e}(OJ),UBe=function(n){Kd(e,n);function e(){return n.call(this,{id:"editor.action.wordHighlight.trigger",label:S("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:XI.toNegated(),kbOpts:{kbExpr:P.editorTextFocus,primary:0,weight:100}})||this}return e.prototype.run=function(t,r,i){var o=x3.get(r);o&&o.restoreViewState(!0)},e}(Ne);tn(x3);re(VBe);re(HBe);re(UBe);Xt(function(n,e){var t=n.getColor(ZF);t&&(e.addRule(".monaco-editor .focused .selectionHighlight { background-color: "+t+"; }"),e.addRule(".monaco-editor .selectionHighlight { background-color: "+t.transparent(.5)+"; }"));var r=n.getColor(TBe);r&&e.addRule(".monaco-editor .wordHighlight { background-color: "+r+"; }");var i=n.getColor(NBe);i&&e.addRule(".monaco-editor .wordHighlightStrong { background-color: "+i+"; }");var o=n.getColor(xIe);o&&e.addRule(".monaco-editor .selectionHighlight { border: 1px "+(n.type==="hc"?"dotted":"solid")+" "+o+"; box-sizing: border-box; }");var s=n.getColor(ABe);s&&e.addRule(".monaco-editor .wordHighlight { border: 1px "+(n.type==="hc"?"dashed":"solid")+" "+s+"; box-sizing: border-box; }");var a=n.getColor(OBe);a&&e.addRule(".monaco-editor .wordHighlightStrong { border: 1px "+(n.type==="hc"?"dashed":"solid")+" "+a+"; box-sizing: border-box; }")});var _n=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QI=function(n){_n(e,n);function e(t){var r=n.call(this,t)||this;return r._inSelectionMode=t.inSelectionMode,r._wordNavigationType=t.wordNavigationType,r}return e.prototype.runEditorCommand=function(t,r,i){var o=this;if(r.hasModel()){var s=r.getConfiguration(),a=Nu(s.wordSeparators),u=r.getModel(),l=r.getSelections(),f=l.map(function(d){var g=new $(d.positionLineNumber,d.positionColumn),v=o._move(a,u,g,o._wordNavigationType);return o._moveTo(d,v,o._inSelectionMode)});if(r._getCursors().setStates("moveWordCommand",0,f.map(function(d){return ut.fromModelSelection(d)})),f.length===1){var h=new $(f[0].positionLineNumber,f[0].positionColumn);r.revealPosition(h,0)}}},e.prototype._moveTo=function(t,r,i){return i?new Ce(t.selectionStartLineNumber,t.selectionStartColumn,r.lineNumber,r.column):new Ce(r.lineNumber,r.column,r.lineNumber,r.column)},e}($i),wf=function(n){_n(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._move=function(t,r,i,o){return zr.moveWordLeft(t,r,i,o)},e}(QI),Cf=function(n){_n(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._move=function(t,r,i,o){return zr.moveWordRight(t,r,i,o)},e}(QI),jBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:2063,mac:{primary:527},weight:100}})||this}return e}(wf),zBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})||this}return e}(wf),qBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0})||this}return e}(wf),$Be=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:3087,mac:{primary:1551},weight:100}})||this}return e}(wf),KBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})||this}return e}(wf),GBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0})||this}return e}(wf),YBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0,kbOpts:{kbExpr:_e.and(P.textInputFocus,X0),primary:2063,mac:{primary:527},weight:101}})||this}return e.prototype._move=function(t,r,i,o){return n.prototype._move.call(this,Nu(Tu.wordSeparators),r,i,o)},e}(wf),ZBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0,kbOpts:{kbExpr:_e.and(P.textInputFocus,X0),primary:3087,mac:{primary:1551},weight:101}})||this}return e.prototype._move=function(t,r,i,o){return n.prototype._move.call(this,Nu(Tu.wordSeparators),r,i,o)},e}(wf),XBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})||this}return e}(Cf),QBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:2065,mac:{primary:529},weight:100}})||this}return e}(Cf),JBe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})||this}return e}(Cf),eWe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})||this}return e}(Cf),tWe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:3089,mac:{primary:1553},weight:100}})||this}return e}(Cf),nWe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})||this}return e}(Cf),rWe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0,kbOpts:{kbExpr:_e.and(P.textInputFocus,X0),primary:2065,mac:{primary:529},weight:101}})||this}return e.prototype._move=function(t,r,i,o){return n.prototype._move.call(this,Nu(Tu.wordSeparators),r,i,o)},e}(Cf),iWe=function(n){_n(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0,kbOpts:{kbExpr:_e.and(P.textInputFocus,X0),primary:3089,mac:{primary:1553},weight:101}})||this}return e.prototype._move=function(t,r,i,o){return n.prototype._move.call(this,Nu(Tu.wordSeparators),r,i,o)},e}(Cf),JI=function(n){_n(e,n);function e(t){var r=n.call(this,t)||this;return r._whitespaceHeuristics=t.whitespaceHeuristics,r._wordNavigationType=t.wordNavigationType,r}return e.prototype.runEditorCommand=function(t,r,i){var o=this;if(r.hasModel()){var s=r.getConfiguration(),a=Nu(s.wordSeparators),u=r.getModel(),l=r.getSelections(),f=l.map(function(h){var d=o._delete(a,u,h,o._whitespaceHeuristics,o._wordNavigationType);return new ur(d,"")});r.pushUndoStop(),r.executeCommands(this.id,f),r.pushUndoStop()}},e}($i),D3=function(n){_n(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._delete=function(t,r,i,o,s){var a=zr.deleteWordLeft(t,r,i,o,s);return a||new R(1,1,1,1)},e}(JI),L3=function(n){_n(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._delete=function(t,r,i,o,s){var a=zr.deleteWordRight(t,r,i,o,s);if(a)return a;var u=r.getLineCount(),l=r.getLineMaxColumn(u);return new R(u,l,u,l)},e}(JI),oWe=function(n){_n(e,n);function e(){return n.call(this,{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:P.writable})||this}return e}(D3),sWe=function(n){_n(e,n);function e(){return n.call(this,{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:P.writable})||this}return e}(D3),aWe=function(n){_n(e,n);function e(){return n.call(this,{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:P.writable,kbOpts:{kbExpr:P.textInputFocus,primary:2049,mac:{primary:513},weight:100}})||this}return e}(D3),uWe=function(n){_n(e,n);function e(){return n.call(this,{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:P.writable})||this}return e}(L3),lWe=function(n){_n(e,n);function e(){return n.call(this,{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:P.writable})||this}return e}(L3),cWe=function(n){_n(e,n);function e(){return n.call(this,{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:P.writable,kbOpts:{kbExpr:P.textInputFocus,primary:2068,mac:{primary:532},weight:100}})||this}return e}(L3);ee(new jBe);ee(new zBe);ee(new qBe);ee(new $Be);ee(new KBe);ee(new GBe);ee(new XBe);ee(new QBe);ee(new JBe);ee(new eWe);ee(new tWe);ee(new nWe);ee(new YBe);ee(new ZBe);ee(new rWe);ee(new iWe);ee(new oWe);ee(new sWe);ee(new aWe);ee(new uWe);ee(new lWe);ee(new cWe);var Sf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fWe=function(n){Sf(e,n);function e(){return n.call(this,{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:P.writable,kbOpts:{kbExpr:P.textInputFocus,primary:0,mac:{primary:769},weight:100}})||this}return e.prototype._delete=function(t,r,i,o,s){var a=SI.deleteWordPartLeft(t,r,i,o);return a||new R(1,1,1,1)},e}(JI),hWe=function(n){Sf(e,n);function e(){return n.call(this,{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:P.writable,kbOpts:{kbExpr:P.textInputFocus,primary:0,mac:{primary:788},weight:100}})||this}return e.prototype._delete=function(t,r,i,o,s){var a=SI.deleteWordPartRight(t,r,i,o);if(a)return a;var u=r.getLineCount(),l=r.getLineMaxColumn(u);return new R(u,l,u,l)},e}(JI),RJ=function(n){Sf(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._move=function(t,r,i,o){return SI.moveWordPartLeft(t,r,i)},e}(QI),dWe=function(n){Sf(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:0,mac:{primary:783},weight:100}})||this}return e}(RJ);oi.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");var pWe=function(n){Sf(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:0,mac:{primary:1807},weight:100}})||this}return e}(RJ);oi.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");var MJ=function(n){Sf(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._move=function(t,r,i,o){return SI.moveWordPartRight(t,r,i)},e}(QI),gWe=function(n){Sf(e,n);function e(){return n.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:0,mac:{primary:785},weight:100}})||this}return e}(MJ),vWe=function(n){Sf(e,n);function e(){return n.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:P.textInputFocus,primary:0,mac:{primary:1809},weight:100}})||this}return e}(MJ);ee(new fWe);ee(new hWe);ee(new dWe);ee(new pWe);ee(new gWe);ee(new vWe);var k3=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PJ=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},c1=function(n,e){return function(t,r){e(t,r,n)}},FJ=new Re("accessibilityHelpWidgetVisible",!1),T3=function(n){k3(e,n);function e(t,r){var i=n.call(this)||this;return i._editor=t,i._widget=i._register(r.createInstance(_We,i._editor)),i}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.show=function(){this._widget.show()},e.prototype.hide=function(){this._widget.hide()},e.ID="editor.contrib.accessibilityHelpController",e=PJ([c1(1,Hn)],e),e}(te);function mWe(n,e){return!n||n.length===0?Nn.noSelection:n.length===1?e?Nt(Nn.singleSelectionRange,n[0].positionLineNumber,n[0].positionColumn,e):Nt(Nn.singleSelection,n[0].positionLineNumber,n[0].positionColumn):e?Nt(Nn.multiSelectionRange,n.length,e):n.length>0?Nt(Nn.multiSelection,n.length):""}var _We=function(n){k3(e,n);function e(t,r,i,o){var s=n.call(this)||this;return s._contextKeyService=r,s._keybindingService=i,s._openerService=o,s._editor=t,s._isVisibleKey=FJ.bindTo(s._contextKeyService),s._domNode=st(document.createElement("div")),s._domNode.setClassName("accessibilityHelpWidget"),s._domNode.setDisplay("none"),s._domNode.setAttribute("role","dialog"),s._domNode.setAttribute("aria-hidden","true"),s._contentDomNode=st(document.createElement("div")),s._contentDomNode.setAttribute("role","document"),s._domNode.appendChild(s._contentDomNode),s._isVisible=!1,s._register(s._editor.onDidLayoutChange(function(){s._isVisible&&s._layout()})),s._register(Br(s._contentDomNode.domNode,"keydown",function(a){if(s._isVisible&&(a.equals(2083)&&(pi(Nn.emergencyConfOn),s._editor.updateOptions({accessibilitySupport:"on"}),ms(s._contentDomNode.domNode),s._buildContent(),s._contentDomNode.domNode.focus(),a.preventDefault(),a.stopPropagation()),a.equals(2086))){pi(Nn.openingDocs);var u=s._editor.getRawConfiguration().accessibilityHelpUrl;typeof u>"u"&&(u="https://go.microsoft.com/fwlink/?linkid=852450"),s._openerService.open(bt.parse(u)),a.preventDefault(),a.stopPropagation()}})),s.onblur(s._contentDomNode.domNode,function(){s.hide()}),s._editor.addOverlayWidget(s),s}return e.prototype.dispose=function(){this._editor.removeOverlayWidget(this),n.prototype.dispose.call(this)},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode.domNode},e.prototype.getPosition=function(){return{preference:null}},e.prototype.show=function(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())},e.prototype._descriptionForCommand=function(t,r,i){var o=this._keybindingService.lookupKeybinding(t);return o?Nt(r,o.getAriaLabel()):Nt(i,t)},e.prototype._buildContent=function(){var t=this._editor.getConfiguration(),r=this._editor.getSelections(),i=0;if(r){var o=this._editor.getModel();o&&r.forEach(function(l){i+=o.getValueLengthInRange(l)})}var s=mWe(r,i);t.wrappingInfo.inDiffEditor?t.readOnly?s+=Nn.readonlyDiffEditor:s+=Nn.editableDiffEditor:t.readOnly?s+=Nn.readonlyEditor:s+=Nn.editableEditor;var a=ct?Nn.changeConfigToOnMac:Nn.changeConfigToOnWinLinux;switch(t.accessibilitySupport){case 0:s+=`

 - `+a;break;case 2:s+=`

 - `+Nn.auto_on;break;case 1:s+=`

 - `+Nn.auto_off,s+=" "+a;break}t.tabFocusMode?s+=`

 - `+this._descriptionForCommand(WR.ID,Nn.tabFocusModeOnMsg,Nn.tabFocusModeOnMsgNoKb):s+=`

 - `+this._descriptionForCommand(WR.ID,Nn.tabFocusModeOffMsg,Nn.tabFocusModeOffMsgNoKb);var u=ct?Nn.openDocMac:Nn.openDocWinLinux;s+=`

 - `+u,s+=`

`+Nn.outroMsg,this._contentDomNode.domNode.appendChild(eQ(s)),this._contentDomNode.domNode.setAttribute("aria-label",s)},e.prototype.hide=function(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,ms(this._contentDomNode.domNode),this._editor.focus())},e.prototype._layout=function(){var t=this._editor.getLayoutInfo(),r=Math.max(5,Math.min(e.WIDTH,t.width-40)),i=Math.max(5,Math.min(e.HEIGHT,t.height-40));this._domNode.setWidth(r),this._domNode.setHeight(i);var o=Math.round((t.height-i)/2);this._domNode.setTop(o);var s=Math.round((t.width-r)/2);this._domNode.setLeft(s)},e.ID="editor.contrib.accessibilityHelpWidget",e.WIDTH=500,e.HEIGHT=300,e=PJ([c1(1,rt),c1(2,er),c1(3,rf)],e),e}(bo),yWe=function(n){k3(e,n);function e(){return n.call(this,{id:"editor.action.showAccessibilityHelp",label:Nn.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:Ro?2107:571,weight:100}})||this}return e.prototype.run=function(t,r){var i=T3.get(r);i&&i.show()},e}(Ne);tn(T3);re(yWe);var bWe=$i.bindToContribution(T3.get);ee(new bWe({id:"closeAccessibilityHelp",precondition:FJ,handler:function(n){return n.hide()},kbOpts:{weight:200,kbExpr:P.focus,primary:9,secondary:[1033]}}));Xt(function(n,e){var t=n.getColor(fu);t&&e.addRule(".monaco-editor .accessibilityHelpWidget { background-color: "+t+"; }");var r=n.getColor(GY);r&&e.addRule(".monaco-editor .accessibilityHelpWidget { color: "+r+"; }");var i=n.getColor(Bd);i&&e.addRule(".monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px "+i+"; }");var o=n.getColor(dr);o&&e.addRule(".monaco-editor .accessibilityHelpWidget { border: 2px solid "+o+"; }")});var BJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wWe=function(n){BJ(e,n);function e(t){var r=n.call(this)||this;return r.editor=t,r.widget=null,$1&&(r._register(t.onDidChangeConfiguration(function(){return r.update()})),r.update()),r}return e.prototype.update=function(){var t=!this.editor.getConfiguration().readOnly;!this.widget&&t?this.widget=new CWe(this.editor):this.widget&&!t&&(this.widget.dispose(),this.widget=null)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){n.prototype.dispose.call(this),this.widget&&(this.widget.dispose(),this.widget=null)},e.ID="editor.contrib.iPadShowKeyboard",e}(te),CWe=function(n){BJ(e,n);function e(t){var r=n.call(this)||this;return r.editor=t,r._domNode=document.createElement("textarea"),r._domNode.className="iPadShowKeyboard",r._register(ie(r._domNode,"touchstart",function(i){r.editor.focus()})),r._register(ie(r._domNode,"focus",function(i){r.editor.focus()})),r.editor.addOverlayWidget(r),r}return e.prototype.dispose=function(){this.editor.removeOverlayWidget(this),n.prototype.dispose.call(this)},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:1}},e.ID="editor.contrib.ShowKeyboardWidget",e}(te);tn(wWe);var N3=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SWe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_j=function(n,e){return function(t,r){e(t,r,n)}},WJ=function(n){N3(e,n);function e(t,r,i){var o=n.call(this)||this;return o._editor=t,o._modeService=i,o._widget=null,o._register(o._editor.onDidChangeModel(function(s){return o.stop()})),o._register(o._editor.onDidChangeModelLanguage(function(s){return o.stop()})),o._register(mn.onDidChange(function(s){return o.stop()})),o}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.stop(),n.prototype.dispose.call(this)},e.prototype.launch=function(){this._widget||this._editor.hasModel()&&(this._widget=new DWe(this._editor,this._modeService))},e.prototype.stop=function(){this._widget&&(this._widget.dispose(),this._widget=null)},e.ID="editor.contrib.inspectTokens",e=SWe([_j(1,Vd),_j(2,mf)],e),e}(te),EWe=function(n){N3(e,n);function e(){return n.call(this,{id:"editor.action.inspectTokens",label:jO.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})||this}return e.prototype.run=function(t,r){var i=WJ.get(r);i&&i.launch()},e}(Ne);function IWe(n){for(var e="",t=0,r=n.length;t<r;t++){var i=n.charCodeAt(t);switch(i){case 9:e+="&rarr;";break;case 32:e+="&middot;";break;case 60:e+="&lt;";break;case 62:e+="&gt;";break;case 38:e+="&amp;";break;default:e+=String.fromCharCode(i)}}return e}function xWe(n){var e=mn.get(n.language);return e||{getInitialState:function(){return q0},tokenize:function(t,r,i){return WG(n.language,t,r,i)},tokenize2:function(t,r,i){return CF(n.id,t,r,i)}}}var DWe=function(n){N3(e,n);function e(t,r){var i=n.call(this)||this;return i.allowEditorOverflow=!0,i._editor=t,i._modeService=r,i._model=i._editor.getModel(),i._domNode=document.createElement("div"),i._domNode.className="tokens-inspect-widget",i._tokenizationSupport=xWe(i._model.getLanguageIdentifier()),i._compute(i._editor.getPosition()),i._register(i._editor.onDidChangeCursorPosition(function(o){return i._compute(i._editor.getPosition())})),i._editor.addContentWidget(i),i}return e.prototype.dispose=function(){this._editor.removeContentWidget(this),n.prototype.dispose.call(this)},e.prototype.getId=function(){return e._ID},e.prototype._compute=function(t){for(var r=this._getTokensAtLine(t.lineNumber),i=0,o=r.tokens1.length-1;o>=0;o--){var s=r.tokens1[o];if(t.column-1>=s.offset){i=o;break}}for(var a=0,o=r.tokens2.length>>>1;o>=0;o--)if(t.column-1>=r.tokens2[o<<1]){a=o;break}var u="",l=this._model.getLineContent(t.lineNumber),f="";if(i<r.tokens1.length){var h=r.tokens1[i].offset,d=i+1<r.tokens1.length?r.tokens1[i+1].offset:l.length;f=l.substring(h,d)}u+='<h2 class="tm-token">'+IWe(f)+'<span class="tm-token-length">('+f.length+" "+(f.length===1?"char":"chars")+")</span></h2>",u+='<hr class="tokens-inspect-separator" style="clear:both"/>';var g=this._decodeMetadata(r.tokens2[(a<<1)+1]);u+='<table class="tm-metadata-table"><tbody>',u+='<tr><td class="tm-metadata-key">language</td><td class="tm-metadata-value">'+fs(g.languageIdentifier.language)+"</td>",u+='<tr><td class="tm-metadata-key">token type</td><td class="tm-metadata-value">'+this._tokenTypeToString(g.tokenType)+"</td>",u+='<tr><td class="tm-metadata-key">font style</td><td class="tm-metadata-value">'+this._fontStyleToString(g.fontStyle)+"</td>",u+='<tr><td class="tm-metadata-key">foreground</td><td class="tm-metadata-value">'+Z.Format.CSS.formatHex(g.foreground)+"</td>",u+='<tr><td class="tm-metadata-key">background</td><td class="tm-metadata-value">'+Z.Format.CSS.formatHex(g.background)+"</td>",u+="</tbody></table>",u+='<hr class="tokens-inspect-separator"/>',i<r.tokens1.length&&(u+='<span class="tm-token-type">'+fs(r.tokens1[i].type)+"</span>"),this._domNode.innerHTML=u,this._editor.layoutContentWidget(this)},e.prototype._decodeMetadata=function(t){var r=mn.getColorMap(),i=ga.getLanguageId(t),o=ga.getTokenType(t),s=ga.getFontStyle(t),a=ga.getForeground(t),u=ga.getBackground(t);return{languageIdentifier:this._modeService.getLanguageIdentifier(i),tokenType:o,fontStyle:s,foreground:r[a],background:r[u]}},e.prototype._tokenTypeToString=function(t){switch(t){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 4:return"RegEx"}return"??"},e.prototype._fontStyleToString=function(t){var r="";return t&1&&(r+="italic "),t&2&&(r+="bold "),t&4&&(r+="underline "),r.length===0&&(r="---"),r},e.prototype._getTokensAtLine=function(t){var r=this._getStateBeforeLine(t),i=this._tokenizationSupport.tokenize(this._model.getLineContent(t),r,0),o=this._tokenizationSupport.tokenize2(this._model.getLineContent(t),r,0);return{startState:r,tokens1:i.tokens,tokens2:o.tokens,endState:i.endState}},e.prototype._getStateBeforeLine=function(t){for(var r=this._tokenizationSupport.getInitialState(),i=1;i<t;i++){var o=this._tokenizationSupport.tokenize(this._model.getLineContent(i),r,0);r=o.endState}return r},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{position:this._editor.getPosition(),preference:[2,1]}},e._ID="editor.contrib.inspectTokensWidget",e}(te);tn(WJ);re(EWe);Xt(function(n,e){var t=n.getColor(XF);if(t){var r=n.type===Xg?2:1;e.addRule(".monaco-editor .tokens-inspect-widget { border: "+r+"px solid "+t+"; }"),e.addRule(".monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: "+t+"; }")}var i=n.getColor(gd);i&&e.addRule(".monaco-editor .tokens-inspect-widget { background-color: "+i+"; }")});var m_=ke,LWe=function(){function n(e,t,r){this.os=t,this.options=r,this.domNode=ce(e,m_(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}return n.prototype.set=function(e,t){this.didEverRender&&this.keybinding===e&&n.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())},n.prototype.render=function(){if(ms(this.domNode),this.keybinding){var e=this.keybinding.getParts(),t=e[0],r=e[1];t&&this.renderPart(this.domNode,t,this.matches?this.matches.firstPart:null),r&&(ce(this.domNode,m_("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,r,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0},n.prototype.renderPart=function(e,t,r){var i=nY.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,!!(r&&r.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,!!(r&&r.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,!!(r&&r.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,!!(r&&r.metaKey),i.separator);var o=t.keyLabel;o&&this.renderKey(e,o,!!(r&&r.keyCode),"")},n.prototype.renderKey=function(e,t,r,i){ce(e,m_("span.monaco-keybinding-key"+(r?".highlight":""),void 0,t)),i&&ce(e,m_("span.monaco-keybinding-key-separator",void 0,i))},n.prototype.renderUnbound=function(e){ce(e,m_("span.monaco-keybinding-key",void 0,S("unbound","Unbound")))},n.areSame=function(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Fc(e.firstPart,t.firstPart)&&Fc(e.chordPart,t.chordPart)},n}(),kWe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),TWe=0,A3=function(){function n(e){e===void 0&&(e=[]),this.id=(TWe++).toString(),this.labelHighlights=e,this.descriptionHighlights=[]}return n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){},n.prototype.getLabelOptions=function(){},n.prototype.getAriaLabel=function(){return Ol([this.getLabel(),this.getDescription(),this.getDetail()]).join(", ")},n.prototype.getDetail=function(){},n.prototype.getIcon=function(){},n.prototype.getDescription=function(){},n.prototype.getTooltip=function(){},n.prototype.getDescriptionTooltip=function(){},n.prototype.getKeybinding=function(){},n.prototype.isHidden=function(){return!!this.hidden},n.prototype.setHighlights=function(e,t,r){this.labelHighlights=e,this.descriptionHighlights=t,this.detailHighlights=r},n.prototype.getHighlights=function(){return[this.labelHighlights,this.descriptionHighlights,this.detailHighlights]},n.prototype.run=function(e,t){return!1},n}(),ty=function(n){kWe(e,n);function e(t,r,i){var o=n.call(this)||this;return o.entry=t,o.groupLabel=r,o.withBorder=i,o}return e.prototype.getGroupLabel=function(){return this.groupLabel},e.prototype.setGroupLabel=function(t){this.groupLabel=t},e.prototype.showBorder=function(){return!!this.withBorder},e.prototype.setShowBorder=function(t){this.withBorder=t},e.prototype.getLabel=function(){return this.entry?this.entry.getLabel():n.prototype.getLabel.call(this)},e.prototype.getLabelOptions=function(){return this.entry?this.entry.getLabelOptions():n.prototype.getLabelOptions.call(this)},e.prototype.getAriaLabel=function(){return this.entry?this.entry.getAriaLabel():n.prototype.getAriaLabel.call(this)},e.prototype.getDetail=function(){return this.entry?this.entry.getDetail():n.prototype.getDetail.call(this)},e.prototype.getIcon=function(){return this.entry?this.entry.getIcon():n.prototype.getIcon.call(this)},e.prototype.getDescription=function(){return this.entry?this.entry.getDescription():n.prototype.getDescription.call(this)},e.prototype.getHighlights=function(){return this.entry?this.entry.getHighlights():n.prototype.getHighlights.call(this)},e.prototype.isHidden=function(){return this.entry?this.entry.isHidden():n.prototype.isHidden.call(this)},e.prototype.setHighlights=function(t,r,i){this.entry?this.entry.setHighlights(t,r,i):n.prototype.setHighlights.call(this,t,r,i)},e.prototype.run=function(t,r){return this.entry?this.entry.run(t,r):n.prototype.run.call(this,t,r)},e}(A3),VJ=function(){function n(){}return n.prototype.hasActions=function(e,t){return!1},n.prototype.getActions=function(e,t){return null},n}(),NWe="quickOpenEntry",yj="quickOpenEntryGroup",AWe=function(){function n(e,t){e===void 0&&(e=new VJ),this.actionProvider=e,this.actionRunner=t}return n.prototype.getHeight=function(e){return e.getDetail()?44:22},n.prototype.getTemplateId=function(e){return e instanceof ty?yj:NWe},n.prototype.renderTemplate=function(e,t,r){var i=document.createElement("div");de(i,"sub-content"),t.appendChild(i);var o=ke(".quick-open-row"),s=ke(".quick-open-row"),a=ke(".quick-open-entry",void 0,o,s);i.appendChild(a);var u=document.createElement("span");o.appendChild(u);var l=new s3(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportOcticons:!0}),f=document.createElement("span");o.appendChild(f),de(f,"quick-open-entry-keybinding");var h=new LWe(f,Qa),d=document.createElement("div");s.appendChild(d),de(d,"quick-open-entry-meta");var g=new fg(d,!0),v;e===yj&&(v=document.createElement("div"),de(v,"results-group"),t.appendChild(v)),de(t,"actions");var m=document.createElement("div");de(m,"primary-action-bar"),t.appendChild(m);var y=new eb(m,{actionRunner:this.actionRunner});return{container:t,entry:a,icon:u,label:l,detail:g,keybinding:h,group:v,actionBar:y}},n.prototype.renderElement=function(e,t,r,i){this.actionProvider.hasActions(null,e)?de(r.container,"has-actions"):qe(r.container,"has-actions"),r.actionBar.context=e;var o=this.actionProvider.getActions(null,e);if(r.actionBar.isEmpty()&&o&&o.length>0?r.actionBar.push(o,{icon:!0,label:!1}):!r.actionBar.isEmpty()&&(!o||o.length===0)&&r.actionBar.clear(),e instanceof ty&&e.getGroupLabel()?de(r.container,"has-group-label"):qe(r.container,"has-group-label"),e instanceof ty){var s=e,a=r;s.showBorder()?(de(a.container,"results-group-separator"),i.pickerGroupBorder&&(a.container.style.borderTopColor=i.pickerGroupBorder.toString())):(qe(a.container,"results-group-separator"),a.container.style.borderTopColor=null);var u=s.getGroupLabel()||"";a.group&&(a.group.textContent=u,i.pickerGroupForeground&&(a.group.style.color=i.pickerGroupForeground.toString()))}if(e instanceof A3){var l=e.getHighlights(),f=l[0],h=l[1],d=l[2],g=e.getIcon()?"quick-open-entry-icon "+e.getIcon():"";r.icon.className=g;var v=e.getLabelOptions()||Object.create(null);v.matches=f||[],v.title=e.getTooltip(),v.descriptionTitle=e.getDescriptionTooltip()||e.getDescription(),v.descriptionMatches=h||[],r.label.setLabel(tI(e.getLabel()),e.getDescription(),v),r.detail.set(e.getDetail(),d),r.keybinding.set(e.getKeybinding())}},n.prototype.disposeTemplate=function(e,t){t.actionBar.dispose(),t.actionBar=null,t.container=null,t.entry=null,t.keybinding=null,t.detail=null,t.group=null,t.icon=null,t.label.dispose(),t.label=null},n}(),O3=function(){function n(e,t){e===void 0&&(e=[]),t===void 0&&(t=new VJ),this._entries=e,this._dataSource=this,this._renderer=new AWe(t),this._filter=this,this._runner=this,this._accessibilityProvider=this}return Object.defineProperty(n.prototype,"entries",{get:function(){return this._entries},set:function(e){this._entries=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"runner",{get:function(){return this._runner},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"accessibilityProvider",{get:function(){return this._accessibilityProvider},enumerable:!0,configurable:!0}),n.prototype.getId=function(e){return e.getId()},n.prototype.getLabel=function(e){return Ug(e.getLabel())},n.prototype.getAriaLabel=function(e){var t=e.getAriaLabel();return t?S("quickOpenAriaLabelEntry","{0}, picker",e.getAriaLabel()):S("quickOpenAriaLabel","picker")},n.prototype.isVisible=function(e){return!e.isHidden()},n.prototype.run=function(e,t,r){return e.run(t,r)},n}(),OWe=function(){function n(e){this.modelProvider=U_(e.getModel)?e:{getModel:function(){return e}}}return n.prototype.getId=function(e,t){if(!t)return null;var r=this.modelProvider.getModel();return r===t?"__root__":r.dataSource.getId(t)},n.prototype.hasChildren=function(e,t){var r=this.modelProvider.getModel();return!!(r&&r===t&&r.entries.length>0)},n.prototype.getChildren=function(e,t){var r=this.modelProvider.getModel();return Promise.resolve(r===t?r.entries:[])},n.prototype.getParent=function(e,t){return Promise.resolve(null)},n}(),RWe=function(){function n(e){this.modelProvider=e}return n.prototype.getAriaLabel=function(e,t){var r=this.modelProvider.getModel();return r.accessibilityProvider?r.accessibilityProvider.getAriaLabel(t):null},n.prototype.getPosInSet=function(e,t){var r=this.modelProvider.getModel(),i=0;if(r.filter)for(var o=0,s=r.entries;o<s.length;o++){var a=s[o];if(r.filter.isVisible(a)&&i++,a===t)break}else i=r.entries.indexOf(t)+1;return String(i)},n.prototype.getSetSize=function(){var e=this.modelProvider.getModel(),t=0;if(e.filter)for(var r=0,i=e.entries;r<i.length;r++){var o=i[r];e.filter.isVisible(o)&&t++}else t=e.entries.length;return String(t)},n}(),MWe=function(){function n(e){this.modelProvider=e}return n.prototype.isVisible=function(e,t){var r=this.modelProvider.getModel();return r.filter?r.filter.isVisible(t):!0},n}(),PWe=function(){function n(e,t){this.modelProvider=e,this.styles=t}return n.prototype.updateStyles=function(e){this.styles=e},n.prototype.getHeight=function(e,t){var r=this.modelProvider.getModel();return r.renderer.getHeight(t)},n.prototype.getTemplateId=function(e,t){var r=this.modelProvider.getModel();return r.renderer.getTemplateId(t)},n.prototype.renderTemplate=function(e,t,r){var i=this.modelProvider.getModel();return i.renderer.renderTemplate(t,r,this.styles)},n.prototype.renderElement=function(e,t,r,i){var o=this.modelProvider.getModel();o.renderer.renderElement(t,r,i,this.styles)},n.prototype.disposeTemplate=function(e,t,r){var i=this.modelProvider.getModel();i.renderer.disposeTemplate(t,r)},n}(),bj=function(){function n(){this._arr=[]}return n.prototype.set=function(e,t){this._arr.push({keybinding:z1(e,Qa),callback:t})},n.prototype.dispatch=function(e){for(var t=this._arr.length-1;t>=0;t--){var r=this._arr[t];if(e.toChord().equals(r.keybinding))return r.callback}return null},n}(),HJ=function(){function n(e){var t=this;e===void 0&&(e={clickBehavior:0,keyboardSupport:!0,openMode:0}),this.options=e,this.downKeyBindingDispatcher=new bj,this.upKeyBindingDispatcher=new bj,(typeof e.keyboardSupport!="boolean"||e.keyboardSupport)&&(this.downKeyBindingDispatcher.set(16,function(r,i){return t.onUp(r,i)}),this.downKeyBindingDispatcher.set(18,function(r,i){return t.onDown(r,i)}),this.downKeyBindingDispatcher.set(15,function(r,i){return t.onLeft(r,i)}),this.downKeyBindingDispatcher.set(17,function(r,i){return t.onRight(r,i)}),ct&&(this.downKeyBindingDispatcher.set(2064,function(r,i){return t.onLeft(r,i)}),this.downKeyBindingDispatcher.set(300,function(r,i){return t.onDown(r,i)}),this.downKeyBindingDispatcher.set(302,function(r,i){return t.onUp(r,i)})),this.downKeyBindingDispatcher.set(11,function(r,i){return t.onPageUp(r,i)}),this.downKeyBindingDispatcher.set(12,function(r,i){return t.onPageDown(r,i)}),this.downKeyBindingDispatcher.set(14,function(r,i){return t.onHome(r,i)}),this.downKeyBindingDispatcher.set(13,function(r,i){return t.onEnd(r,i)}),this.downKeyBindingDispatcher.set(10,function(r,i){return t.onSpace(r,i)}),this.downKeyBindingDispatcher.set(9,function(r,i){return t.onEscape(r,i)}),this.upKeyBindingDispatcher.set(3,this.onEnter.bind(this)),this.upKeyBindingDispatcher.set(2051,this.onEnter.bind(this)))}return n.prototype.onMouseDown=function(e,t,r,i){return i===void 0&&(i="mouse"),this.options.clickBehavior===0&&(r.leftButton||r.middleButton)?r.target&&(r.target.tagName&&r.target.tagName.toLowerCase()==="input"||TO(r.target,"scrollbar","monaco-tree")||TO(r.target,"monaco-action-bar","row"))?!1:this.onLeftClick(e,t,r,i):!1},n.prototype.onClick=function(e,t,r){var i=ct;return i&&r.ctrlKey?(r.preventDefault(),r.stopPropagation(),!1):r.target&&r.target.tagName&&r.target.tagName.toLowerCase()==="input"||this.options.clickBehavior===0&&(r.leftButton||r.middleButton)?!1:this.onLeftClick(e,t,r)},n.prototype.onLeftClick=function(e,t,r,i){i===void 0&&(i="mouse");var o=r,s={origin:i,originalEvent:r,didClickOnTwistie:this.isClickOnTwistie(o)};if(e.getInput()===t)e.clearFocus(s),e.clearSelection(s);else{var a=r&&o.browserEvent&&o.browserEvent.type==="mousedown"&&o.browserEvent.detail===1;a||r.preventDefault(),r.stopPropagation(),e.domFocus(),e.setSelection([t],s),e.setFocus(t,s),this.shouldToggleExpansion(t,o,i)&&(e.isExpanded(t)?e.collapse(t).then(void 0,Le):e.expand(t).then(void 0,Le))}return!0},n.prototype.shouldToggleExpansion=function(e,t,r){var i=r==="mouse"&&t.detail===2;return this.openOnSingleClick||i||this.isClickOnTwistie(t)},Object.defineProperty(n.prototype,"openOnSingleClick",{get:function(){return this.options.openMode===0},enumerable:!0,configurable:!0}),n.prototype.isClickOnTwistie=function(e){var t=e.target;if(!La(t,"content"))return!1;var r=window.getComputedStyle(t,":before");if(r.backgroundImage==="none"||r.display==="none")return!1;var i=parseInt(r.width)+parseInt(r.paddingRight);return e.browserEvent.offsetX<=i},n.prototype.onContextMenu=function(e,t,r){return r.target&&r.target.tagName&&r.target.tagName.toLowerCase()==="input"||r&&(r.preventDefault(),r.stopPropagation()),!1},n.prototype.onTap=function(e,t,r){var i=r.initialTarget;return i&&i.tagName&&i.tagName.toLowerCase()==="input"?!1:this.onLeftClick(e,t,r,"touch")},n.prototype.onKeyDown=function(e,t){return this.onKey(this.downKeyBindingDispatcher,e,t)},n.prototype.onKeyUp=function(e,t){return this.onKey(this.upKeyBindingDispatcher,e,t)},n.prototype.onKey=function(e,t,r){var i=e.dispatch(r.toKeybinding());return i&&i(t,r)?(r.preventDefault(),r.stopPropagation(),!0):!1},n.prototype.onUp=function(e,t){var r={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(r):(e.focusPrevious(1,r),e.reveal(e.getFocus()).then(void 0,Le)),!0},n.prototype.onPageUp=function(e,t){var r={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(r):(e.focusPreviousPage(r),e.reveal(e.getFocus()).then(void 0,Le)),!0},n.prototype.onDown=function(e,t){var r={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(r):(e.focusNext(1,r),e.reveal(e.getFocus()).then(void 0,Le)),!0},n.prototype.onPageDown=function(e,t){var r={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(r):(e.focusNextPage(r),e.reveal(e.getFocus()).then(void 0,Le)),!0},n.prototype.onHome=function(e,t){var r={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(r):(e.focusFirst(r),e.reveal(e.getFocus()).then(void 0,Le)),!0},n.prototype.onEnd=function(e,t){var r={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(r):(e.focusLast(r),e.reveal(e.getFocus()).then(void 0,Le)),!0},n.prototype.onLeft=function(e,t){var r={origin:"keyboard",originalEvent:t};if(e.getHighlight())e.clearHighlight(r);else{var i=e.getFocus();e.collapse(i).then(function(o){if(i&&!o)return e.focusParent(r),e.reveal(e.getFocus())}).then(void 0,Le)}return!0},n.prototype.onRight=function(e,t){var r={origin:"keyboard",originalEvent:t};if(e.getHighlight())e.clearHighlight(r);else{var i=e.getFocus();e.expand(i).then(function(o){if(i&&!o)return e.focusFirstChild(r),e.reveal(e.getFocus())}).then(void 0,Le)}return!0},n.prototype.onEnter=function(e,t){var r={origin:"keyboard",originalEvent:t};if(e.getHighlight())return!1;var i=e.getFocus();return i&&e.setSelection([i],r),!0},n.prototype.onSpace=function(e,t){if(e.getHighlight())return!1;var r=e.getFocus();return r&&e.toggleExpansion(r),!0},n.prototype.onEscape=function(e,t){var r={origin:"keyboard",originalEvent:t};return e.getHighlight()?(e.clearHighlight(r),!0):e.getSelection().length?(e.clearSelection(r),!0):e.getFocus()?(e.clearFocus(r),!0):!1},n}(),FWe=function(){function n(){}return n.prototype.getDragURI=function(e,t){return null},n.prototype.onDragStart=function(e,t,r){},n.prototype.onDragOver=function(e,t,r,i){return null},n.prototype.drop=function(e,t,r,i){},n}(),BWe=function(){function n(){}return n.prototype.isVisible=function(e,t){return!0},n}(),WWe=function(){function n(){}return n.prototype.getAriaLabel=function(e,t){return null},n}(),VWe=function(){function n(e,t){this.styleElement=e,this.selectorSuffix=t}return n.prototype.style=function(e){var t=this.selectorSuffix?"."+this.selectorSuffix:"",r=[];e.listFocusBackground&&r.push(".monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { background-color: "+e.listFocusBackground+"; }"),e.listFocusForeground&&r.push(".monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { color: "+e.listFocusForeground+"; }"),e.listActiveSelectionBackground&&r.push(".monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: "+e.listActiveSelectionBackground+"; }"),e.listActiveSelectionForeground&&r.push(".monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: "+e.listActiveSelectionForeground+"; }"),e.listFocusAndSelectionBackground&&r.push(`
				.monaco-tree-drag-image,
				.monaco-tree`+t+".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { background-color: "+e.listFocusAndSelectionBackground+`; }
			`),e.listFocusAndSelectionForeground&&r.push(`
				.monaco-tree-drag-image,
				.monaco-tree`+t+".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { color: "+e.listFocusAndSelectionForeground+`; }
			`),e.listInactiveSelectionBackground&&r.push(".monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: "+e.listInactiveSelectionBackground+"; }"),e.listInactiveSelectionForeground&&r.push(".monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: "+e.listInactiveSelectionForeground+"; }"),e.listHoverBackground&&r.push(".monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { background-color: "+e.listHoverBackground+"; }"),e.listHoverForeground&&r.push(".monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { color: "+e.listHoverForeground+"; }"),e.listDropBackground&&r.push(`
				.monaco-tree`+t+` .monaco-tree-wrapper.drop-target,
				.monaco-tree`+t+" .monaco-tree-rows > .monaco-tree-row.drop-target { background-color: "+e.listDropBackground+` !important; color: inherit !important; }
			`),e.listFocusOutline&&r.push(`
				.monaco-tree-drag-image																															{ border: 1px solid `+e.listFocusOutline+`; background: #000; }
				.monaco-tree`+t+` .monaco-tree-rows > .monaco-tree-row 														{ border: 1px solid transparent; }
				.monaco-tree`+t+".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) 						{ border: 1px dotted "+e.listFocusOutline+`; }
				.monaco-tree`+t+".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) 						{ border: 1px solid "+e.listFocusOutline+`; }
				.monaco-tree`+t+" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted)  							{ border: 1px solid "+e.listFocusOutline+`; }
				.monaco-tree`+t+" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused)  	{ border: 1px dashed "+e.listFocusOutline+`; }
				.monaco-tree`+t+` .monaco-tree-wrapper.drop-target,
				.monaco-tree`+t+" .monaco-tree-rows > .monaco-tree-row.drop-target												{ border: 1px dashed "+e.listFocusOutline+`; }
			`);var i=r.join(`
`);i!==this.styleElement.innerHTML&&(this.styleElement.innerHTML=i)},n}(),HWe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UWe=function(){function n(e){this._onDispose=new j,this.onDispose=this._onDispose.event,this._item=e}return Object.defineProperty(n.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this._onDispose&&(this._onDispose.fire(),this._onDispose.dispose(),this._onDispose=void 0)},n}(),jWe=function(){function n(){this.locks=Object.create({})}return n.prototype.isLocked=function(e){return!!this.locks[e.id]},n.prototype.run=function(e,t){var r=this,i=this.getLock(e);if(i)return new Promise(function(s,a){We.once(i.onDispose)(function(){return r.run(e,t).then(s,a)})});var o;return new Promise(function(s,a){if(e.isDisposed())return a(new Error("Item is disposed."));var u=r.locks[e.id]=new UWe(e);return o=t().then(function(l){return delete r.locks[e.id],u.dispose(),l}).then(s,a),o})},n.prototype.getLock=function(e){var t;for(t in this.locks){var r=this.locks[t];if(e.intersects(r.item))return r}return null},n}(),zWe=function(){function n(){this._isDisposed=!1,this._onDidRevealItem=new na,this.onDidRevealItem=this._onDidRevealItem.event,this._onExpandItem=new na,this.onExpandItem=this._onExpandItem.event,this._onDidExpandItem=new na,this.onDidExpandItem=this._onDidExpandItem.event,this._onCollapseItem=new na,this.onCollapseItem=this._onCollapseItem.event,this._onDidCollapseItem=new na,this.onDidCollapseItem=this._onDidCollapseItem.event,this._onDidAddTraitItem=new na,this.onDidAddTraitItem=this._onDidAddTraitItem.event,this._onDidRemoveTraitItem=new na,this.onDidRemoveTraitItem=this._onDidRemoveTraitItem.event,this._onDidRefreshItem=new na,this.onDidRefreshItem=this._onDidRefreshItem.event,this._onRefreshItemChildren=new na,this.onRefreshItemChildren=this._onRefreshItemChildren.event,this._onDidRefreshItemChildren=new na,this.onDidRefreshItemChildren=this._onDidRefreshItemChildren.event,this._onDidDisposeItem=new na,this.onDidDisposeItem=this._onDidDisposeItem.event,this.items={}}return n.prototype.register=function(e){Cg(!this.isRegistered(e.id),"item already registered: "+e.id);var t=au(this._onDidRevealItem.add(e.onDidReveal),this._onExpandItem.add(e.onExpand),this._onDidExpandItem.add(e.onDidExpand),this._onCollapseItem.add(e.onCollapse),this._onDidCollapseItem.add(e.onDidCollapse),this._onDidAddTraitItem.add(e.onDidAddTrait),this._onDidRemoveTraitItem.add(e.onDidRemoveTrait),this._onDidRefreshItem.add(e.onDidRefresh),this._onRefreshItemChildren.add(e.onRefreshChildren),this._onDidRefreshItemChildren.add(e.onDidRefreshChildren),this._onDidDisposeItem.add(e.onDidDispose));this.items[e.id]={item:e,disposable:t}},n.prototype.deregister=function(e){Cg(this.isRegistered(e.id),"item not registered: "+e.id),this.items[e.id].disposable.dispose(),delete this.items[e.id]},n.prototype.isRegistered=function(e){return this.items.hasOwnProperty(e)},n.prototype.getItem=function(e){var t=this.items[e];return t?t.item:null},n.prototype.dispose=function(){this.items=null,this._onDidRevealItem.dispose(),this._onExpandItem.dispose(),this._onDidExpandItem.dispose(),this._onCollapseItem.dispose(),this._onDidCollapseItem.dispose(),this._onDidAddTraitItem.dispose(),this._onDidRemoveTraitItem.dispose(),this._onDidRefreshItem.dispose(),this._onRefreshItemChildren.dispose(),this._onDidRefreshItemChildren.dispose(),this._isDisposed=!0},n.prototype.isDisposed=function(){return this._isDisposed},n}(),UJ=function(){function n(e,t,r,i,o){this._onDidCreate=new j,this._onDidReveal=new j,this.onDidReveal=this._onDidReveal.event,this._onExpand=new j,this.onExpand=this._onExpand.event,this._onDidExpand=new j,this.onDidExpand=this._onDidExpand.event,this._onCollapse=new j,this.onCollapse=this._onCollapse.event,this._onDidCollapse=new j,this.onDidCollapse=this._onDidCollapse.event,this._onDidAddTrait=new j,this.onDidAddTrait=this._onDidAddTrait.event,this._onDidRemoveTrait=new j,this.onDidRemoveTrait=this._onDidRemoveTrait.event,this._onDidRefresh=new j,this.onDidRefresh=this._onDidRefresh.event,this._onRefreshChildren=new j,this.onRefreshChildren=this._onRefreshChildren.event,this._onDidRefreshChildren=new j,this.onDidRefreshChildren=this._onDidRefreshChildren.event,this._onDidDispose=new j,this.onDidDispose=this._onDidDispose.event,this.registry=t,this.context=r,this.lock=i,this.element=o,this.id=e,this.registry.register(this),this.doesHaveChildren=this.context.dataSource.hasChildren(this.context.tree,this.element),this.needsChildrenRefresh=!0,this.parent=null,this.previous=null,this.next=null,this.firstChild=null,this.lastChild=null,this.traits={},this.depth=0,this.expanded=!!(this.context.dataSource.shouldAutoexpand&&this.context.dataSource.shouldAutoexpand(this.context.tree,o)),this._onDidCreate.fire(this),this.visible=this._isVisible(),this.height=this._getHeight(),this._isDisposed=!1}return n.prototype.getElement=function(){return this.element},n.prototype.hasChildren=function(){return this.doesHaveChildren},n.prototype.getDepth=function(){return this.depth},n.prototype.isVisible=function(){return this.visible},n.prototype.setVisible=function(e){this.visible=e},n.prototype.isExpanded=function(){return this.expanded},n.prototype._setExpanded=function(e){this.expanded=e},n.prototype.reveal=function(e){e===void 0&&(e=null);var t={item:this,relativeTop:e};this._onDidReveal.fire(t)},n.prototype.expand=function(){var e=this;if(this.isExpanded()||!this.doesHaveChildren||this.lock.isLocked(this))return Promise.resolve(!1);var t=this.lock.run(this,function(){if(e.isExpanded()||!e.doesHaveChildren)return Promise.resolve(!1);var r={item:e},i;return e._onExpand.fire(r),e.needsChildrenRefresh?i=e.refreshChildren(!1,!0,!0):i=Promise.resolve(null),i.then(function(){return e._setExpanded(!0),e._onDidExpand.fire(r),!0})});return t.then(function(r){return e.isDisposed()?!1:e.context.options.autoExpandSingleChildren&&r&&e.firstChild!==null&&e.firstChild===e.lastChild&&e.firstChild.isVisible()?e.firstChild.expand().then(function(){return!0}):r})},n.prototype.collapse=function(e){var t=this;if(e===void 0&&(e=!1),e){var r=Promise.resolve(null);return this.forEachChild(function(i){r=r.then(function(){return i.collapse(!0)})}),r.then(function(){return t.collapse(!1)})}else return!this.isExpanded()||this.lock.isLocked(this)?Promise.resolve(!1):this.lock.run(this,function(){var i={item:t};return t._onCollapse.fire(i),t._setExpanded(!1),t._onDidCollapse.fire(i),Promise.resolve(!0)})},n.prototype.addTrait=function(e){var t={item:this,trait:e};this.traits[e]=!0,this._onDidAddTrait.fire(t)},n.prototype.removeTrait=function(e){var t={item:this,trait:e};delete this.traits[e],this._onDidRemoveTrait.fire(t)},n.prototype.hasTrait=function(e){return this.traits[e]||!1},n.prototype.getAllTraits=function(){var e=[],t;for(t in this.traits)this.traits.hasOwnProperty(t)&&this.traits[t]&&e.push(t);return e},n.prototype.getHeight=function(){return this.height},n.prototype.refreshChildren=function(e,t,r){var i=this;if(t===void 0&&(t=!1),r===void 0&&(r=!1),!r&&!this.isExpanded()){var o=function(a){a.needsChildrenRefresh=!0,a.forEachChild(o)};return o(this),Promise.resolve(this)}this.needsChildrenRefresh=!1;var s=function(){var a={item:i,isNested:t};i._onRefreshChildren.fire(a);var u;i.doesHaveChildren?u=i.context.dataSource.getChildren(i.context.tree,i.element):u=Promise.resolve([]);var l=u.then(function(f){if(i.isDisposed()||i.registry.isDisposed())return Promise.resolve(null);if(!Array.isArray(f))return Promise.reject(new Error("Please return an array of children."));f=f?f.slice(0):[],f=i.sort(f);for(var h={};i.firstChild!==null;)h[i.firstChild.id]=i.firstChild,i.removeChild(i.firstChild);for(var d=0,g=f.length;d<g;d++){var v=f[d],m=i.context.dataSource.getId(i.context.tree,v),y=h[m]||new n(m,i.registry,i.context,i.lock,v);y.element=v,e&&(y.needsChildrenRefresh=e),delete h[m],i.addChild(y)}for(var b in h)h.hasOwnProperty(b)&&h[b].dispose();return e?Promise.all(i.mapEachChild(function(C){return C.doRefresh(e,!0)})):Promise.all(i.mapEachChild(function(C){return C.isExpanded()&&C.needsChildrenRefresh?C.doRefresh(e,!0):(C.updateVisibility(),Promise.resolve(null))}))});return l.then(void 0,Le).then(function(){return i._onDidRefreshChildren.fire(a)})};return t?s():this.lock.run(this,s)},n.prototype.doRefresh=function(e,t){return t===void 0&&(t=!1),this.doesHaveChildren=this.context.dataSource.hasChildren(this.context.tree,this.element),this.height=this._getHeight(),this.updateVisibility(),this._onDidRefresh.fire(this),this.refreshChildren(e,t)},n.prototype.updateVisibility=function(){this.setVisible(this._isVisible())},n.prototype.refresh=function(e){return this.doRefresh(e)},n.prototype.getNavigator=function(){return new jJ(this)},n.prototype.intersects=function(e){return this.isAncestorOf(e)||e.isAncestorOf(this)},n.prototype.isAncestorOf=function(e){for(var t=e;t;){if(t.id===this.id)return!0;t=t.parent}return!1},n.prototype.addChild=function(e,t){t===void 0&&(t=this.lastChild);var r=this.firstChild===null,i=t===null,o=t===this.lastChild;if(r)this.firstChild=this.lastChild=e,e.next=e.previous=null;else if(i){if(!this.firstChild)throw new Error("Invalid tree state");this.firstChild.previous=e,e.next=this.firstChild,e.previous=null,this.firstChild=e}else if(o){if(!this.lastChild)throw new Error("Invalid tree state");this.lastChild.next=e,e.next=null,e.previous=this.lastChild,this.lastChild=e}else{if(e.previous=t,!t)throw new Error("Invalid tree state");if(e.next=t.next,!t.next)throw new Error("Invalid tree state");t.next.previous=e,t.next=e}e.parent=this,e.depth=this.depth+1},n.prototype.removeChild=function(e){var t=this.firstChild===e,r=this.lastChild===e;if(t&&r)this.firstChild=this.lastChild=null;else if(t){if(!e.next)throw new Error("Invalid tree state");e.next.previous=null,this.firstChild=e.next}else if(r){if(!e.previous)throw new Error("Invalid tree state");e.previous.next=null,this.lastChild=e.previous}else{if(!e.next)throw new Error("Invalid tree state");if(e.next.previous=e.previous,!e.previous)throw new Error("Invalid tree state");e.previous.next=e.next}e.parent=null,e.depth=NaN},n.prototype.forEachChild=function(e){for(var t=this.firstChild,r;t;)r=t.next,e(t),t=r},n.prototype.mapEachChild=function(e){var t=[];return this.forEachChild(function(r){t.push(e(r))}),t},n.prototype.sort=function(e){var t=this,r=this.context.sorter;return r?e.sort(function(i,o){return r.compare(t.context.tree,i,o)}):e},n.prototype._getHeight=function(){return this.context.renderer?this.context.renderer.getHeight(this.context.tree,this.element):0},n.prototype._isVisible=function(){return this.context.filter?this.context.filter.isVisible(this.context.tree,this.element):!1},n.prototype.isDisposed=function(){return this._isDisposed},n.prototype.dispose=function(){this.forEachChild(function(e){return e.dispose()}),this.parent=null,this.previous=null,this.next=null,this.firstChild=null,this.lastChild=null,this._onDidDispose.fire(this),this.registry.deregister(this),this._onDidCreate.dispose(),this._onDidReveal.dispose(),this._onExpand.dispose(),this._onDidExpand.dispose(),this._onCollapse.dispose(),this._onDidCollapse.dispose(),this._onDidAddTrait.dispose(),this._onDidRemoveTrait.dispose(),this._onDidRefresh.dispose(),this._onRefreshChildren.dispose(),this._onDidRefreshChildren.dispose(),this._onDidDispose.dispose(),this._isDisposed=!0},n}(),VR=function(n){HWe(e,n);function e(t,r,i,o,s){return n.call(this,t,r,i,o,s)||this}return e.prototype.isVisible=function(){return!1},e.prototype.setVisible=function(t){},e.prototype.isExpanded=function(){return!0},e.prototype._setExpanded=function(t){},e.prototype._getHeight=function(){return 0},e.prototype._isVisible=function(){return!1},e}(UJ),jJ=function(){function n(e,t){t===void 0&&(t=!0),this.item=e,this.start=t?e:null}return n.lastDescendantOf=function(e){return e?e instanceof VR?n.lastDescendantOf(e.lastChild):e.isVisible()?!e.isExpanded()||e.lastChild===null?e:n.lastDescendantOf(e.lastChild):n.lastDescendantOf(e.previous):null},n.prototype.current=function(){return this.item||null},n.prototype.next=function(){if(this.item)do if((this.item instanceof VR||this.item.isVisible()&&this.item.isExpanded())&&this.item.firstChild)this.item=this.item.firstChild;else if(this.item===this.start)this.item=null;else{for(;this.item&&this.item!==this.start&&!this.item.next;)this.item=this.item.parent;this.item===this.start&&(this.item=null),this.item=this.item?this.item.next:null}while(this.item&&!this.item.isVisible());return this.item||null},n.prototype.previous=function(){if(this.item)do{var e=n.lastDescendantOf(this.item.previous);e?this.item=e:this.item.parent&&this.item.parent!==this.start&&this.item.parent.isVisible()?this.item=this.item.parent:this.item=null}while(this.item&&!this.item.isVisible());return this.item||null},n.prototype.parent=function(){if(this.item){var e=this.item.parent;e&&e!==this.start&&e.isVisible()?this.item=e:this.item=null}return this.item||null},n.prototype.first=function(){return this.item=this.start,this.next(),this.item||null},n.prototype.last=function(){return n.lastDescendantOf(this.start)},n}(),qWe=function(){function n(e){this._onSetInput=new j,this.onSetInput=this._onSetInput.event,this._onDidSetInput=new j,this.onDidSetInput=this._onDidSetInput.event,this._onRefresh=new j,this.onRefresh=this._onRefresh.event,this._onDidRefresh=new j,this.onDidRefresh=this._onDidRefresh.event,this._onDidHighlight=new j,this.onDidHighlight=this._onDidHighlight.event,this._onDidSelect=new j,this.onDidSelect=this._onDidSelect.event,this._onDidFocus=new j,this.onDidFocus=this._onDidFocus.event,this._onDidRevealItem=new qr,this.onDidRevealItem=this._onDidRevealItem.event,this._onExpandItem=new qr,this.onExpandItem=this._onExpandItem.event,this._onDidExpandItem=new qr,this.onDidExpandItem=this._onDidExpandItem.event,this._onCollapseItem=new qr,this.onCollapseItem=this._onCollapseItem.event,this._onDidCollapseItem=new qr,this.onDidCollapseItem=this._onDidCollapseItem.event,this._onDidAddTraitItem=new qr,this.onDidAddTraitItem=this._onDidAddTraitItem.event,this._onDidRemoveTraitItem=new qr,this.onDidRemoveTraitItem=this._onDidRemoveTraitItem.event,this._onDidRefreshItem=new qr,this.onDidRefreshItem=this._onDidRefreshItem.event,this._onRefreshItemChildren=new qr,this.onRefreshItemChildren=this._onRefreshItemChildren.event,this._onDidRefreshItemChildren=new qr,this.onDidRefreshItemChildren=this._onDidRefreshItemChildren.event,this._onDidDisposeItem=new qr,this.context=e,this.input=null,this.traitsToItems={}}return n.prototype.setInput=function(e){var t=this,r={item:this.input};this._onSetInput.fire(r),this.setSelection([]),this.setFocus(),this.setHighlight(),this.lock=new jWe,this.input&&this.input.dispose(),this.registry&&(this.registry.dispose(),this.registryDisposable.dispose()),this.registry=new zWe,this._onDidRevealItem.input=this.registry.onDidRevealItem,this._onExpandItem.input=this.registry.onExpandItem,this._onDidExpandItem.input=this.registry.onDidExpandItem,this._onCollapseItem.input=this.registry.onCollapseItem,this._onDidCollapseItem.input=this.registry.onDidCollapseItem,this._onDidAddTraitItem.input=this.registry.onDidAddTraitItem,this._onDidRemoveTraitItem.input=this.registry.onDidRemoveTraitItem,this._onDidRefreshItem.input=this.registry.onDidRefreshItem,this._onRefreshItemChildren.input=this.registry.onRefreshItemChildren,this._onDidRefreshItemChildren.input=this.registry.onDidRefreshItemChildren,this._onDidDisposeItem.input=this.registry.onDidDisposeItem,this.registryDisposable=this.registry.onDidDisposeItem(function(o){return o.getAllTraits().forEach(function(s){return delete t.traitsToItems[s][o.id]})});var i=this.context.dataSource.getId(this.context.tree,e);return this.input=new VR(i,this.registry,this.context,this.lock,e),r={item:this.input},this._onDidSetInput.fire(r),this.refresh(this.input)},n.prototype.getInput=function(){return this.input?this.input.getElement():null},n.prototype.refresh=function(e,t){var r=this;e===void 0&&(e=null),t===void 0&&(t=!0);var i=this.getItem(e);if(!i)return Promise.resolve(null);var o={item:i,recursive:t};return this._onRefresh.fire(o),i.refresh(t).then(function(){r._onDidRefresh.fire(o)})},n.prototype.expand=function(e){var t=this.getItem(e);return t?t.expand():Promise.resolve(!1)},n.prototype.collapse=function(e,t){t===void 0&&(t=!1);var r=this.getItem(e);return r?r.collapse(t):Promise.resolve(!1)},n.prototype.toggleExpansion=function(e,t){return t===void 0&&(t=!1),this.isExpanded(e)?this.collapse(e,t):this.expand(e)},n.prototype.isExpanded=function(e){var t=this.getItem(e);return t?t.isExpanded():!1},n.prototype.reveal=function(e,t){var r=this;return t===void 0&&(t=null),this.resolveUnknownParentChain(e).then(function(i){var o=Promise.resolve(null);return i.forEach(function(s){o=o.then(function(){return r.expand(s)})}),o}).then(function(){var i=r.getItem(e);if(i)return i.reveal(t)})},n.prototype.resolveUnknownParentChain=function(e){var t=this;return this.context.dataSource.getParent(this.context.tree,e).then(function(r){return r?t.resolveUnknownParentChain(r).then(function(i){return i.push(r),i}):Promise.resolve([])})},n.prototype.setHighlight=function(e,t){this.setTraits("highlighted",e?[e]:[]);var r={highlight:this.getHighlight(),payload:t};this._onDidHighlight.fire(r)},n.prototype.getHighlight=function(e){e===void 0&&(e=!1);var t=this.getElementsWithTrait("highlighted",e);return t.length===0?null:t[0]},n.prototype.setSelection=function(e,t){this.setTraits("selected",e);var r={selection:this.getSelection(),payload:t};this._onDidSelect.fire(r)},n.prototype.getSelection=function(e){return e===void 0&&(e=!1),this.getElementsWithTrait("selected",e)},n.prototype.setFocus=function(e,t){this.setTraits("focused",e?[e]:[]);var r={focus:this.getFocus(),payload:t};this._onDidFocus.fire(r)},n.prototype.getFocus=function(e){e===void 0&&(e=!1);var t=this.getElementsWithTrait("focused",e);return t.length===0?null:t[0]},n.prototype.focusNext=function(e,t){e===void 0&&(e=1);for(var r=this.getFocus()||this.input,i,o=this.getNavigator(r,!1),s=0;s<e&&(i=o.next(),!!i);s++)r=i;this.setFocus(r,t)},n.prototype.focusPrevious=function(e,t){e===void 0&&(e=1);for(var r=this.getFocus()||this.input,i,o=this.getNavigator(r,!1),s=0;s<e&&(i=o.previous(),!!i);s++)r=i;this.setFocus(r,t)},n.prototype.focusParent=function(e){var t=this.getFocus()||this.input,r=this.getNavigator(t,!1),i=r.parent();i&&this.setFocus(i,e)},n.prototype.focusFirstChild=function(e){var t=this.getItem(this.getFocus()||this.input),r=this.getNavigator(t,!1),i=r.next(),o=r.parent();o===t&&this.setFocus(i,e)},n.prototype.focusFirst=function(e,t){this.focusNth(0,e,t)},n.prototype.focusNth=function(e,t,r){for(var i=this.getParent(r),o=this.getNavigator(i),s=o.first(),a=0;a<e;a++)s=o.next();s&&this.setFocus(s,t)},n.prototype.focusLast=function(e,t){var r=this.getParent(t),i;if(t&&r)i=r.lastChild;else{var o=this.getNavigator(r);i=o.last()}i&&this.setFocus(i,e)},n.prototype.getParent=function(e){if(e){var t=this.getItem(e);if(t&&t.parent)return t.parent}return this.getItem(this.input)},n.prototype.getNavigator=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!0),new jJ(this.getItem(e),t)},n.prototype.getItem=function(e){return e===void 0&&(e=null),e===null?this.input:e instanceof UJ?e:typeof e=="string"?this.registry.getItem(e):this.registry.getItem(this.context.dataSource.getId(this.context.tree,e))},n.prototype.removeTraits=function(e,t){var r=this.traitsToItems[e]||{},i,o;if(t.length===0){for(o in r)r.hasOwnProperty(o)&&(i=r[o],i.removeTrait(e));delete this.traitsToItems[e]}else for(var s=0,a=t.length;s<a;s++)i=this.getItem(t[s]),i&&(i.removeTrait(e),delete r[i.id])},n.prototype.setTraits=function(e,t){if(t.length===0)this.removeTraits(e,t);else{for(var r={},i=void 0,o=0,s=t.length;o<s;o++)i=this.getItem(t[o]),i&&(r[i.id]=i);var a=this.traitsToItems[e]||{},u=[],l=void 0;for(l in a)a.hasOwnProperty(l)&&(r.hasOwnProperty(l)?delete r[l]:u.push(a[l]));for(var o=0,s=u.length;o<s;o++)i=u[o],i.removeTrait(e),delete a[i.id];for(l in r)r.hasOwnProperty(l)&&(i=r[l],i.addTrait(e),a[l]=i);this.traitsToItems[e]=a}},n.prototype.getElementsWithTrait=function(e,t){var r=[],i=this.traitsToItems[e]||{},o;for(o in i)i.hasOwnProperty(o)&&(i[o].isVisible()||t)&&r.push(i[o].getElement());return r},n.prototype.dispose=function(){this.registry&&(this.registry.dispose(),this.registry=null),this._onSetInput.dispose(),this._onDidSetInput.dispose(),this._onRefresh.dispose(),this._onDidRefresh.dispose(),this._onDidHighlight.dispose(),this._onDidSelect.dispose(),this._onDidFocus.dispose(),this._onDidRevealItem.dispose(),this._onExpandItem.dispose(),this._onDidExpandItem.dispose(),this._onCollapseItem.dispose(),this._onDidCollapseItem.dispose(),this._onDidAddTraitItem.dispose(),this._onDidRemoveTraitItem.dispose(),this._onDidRefreshItem.dispose(),this._onRefreshItemChildren.dispose(),this._onDidRefreshItemChildren.dispose(),this._onDidDisposeItem.dispose()},n}(),$We=function(){function n(e){this.elements=e}return n.prototype.update=function(e){},n.prototype.getData=function(){return this.elements},n}(),KWe=function(){function n(e){this.elements=e}return n.prototype.update=function(e){},n.prototype.getData=function(){return this.elements},n}(),GWe=function(){function n(){this.types=[],this.files=[]}return n.prototype.update=function(e){e.types&&(this.types=[],Array.prototype.push.apply(this.types,e.types)),e.files&&(this.files=[],Array.prototype.push.apply(this.files,e.files),this.files=this.files.filter(function(t){return t.size||t.type}))},n.prototype.getData=function(){return{types:this.types,files:this.files}},n}(),YWe=function(){function n(){this.heightMap=[],this.indexes={}}return n.prototype.getContentHeight=function(){var e=this.heightMap[this.heightMap.length-1];return e?e.top+e.height:0},n.prototype.onInsertItems=function(e,t){t===void 0&&(t=null);var r=null,i,o,s,a,u=0;if(t===null)o=0,a=0;else{if(o=this.indexes[t]+1,i=this.heightMap[o-1],!i){console.error("view item doesnt exist");return}a=i.top+i.height}for(var l=this.heightMap.splice.bind(this.heightMap,o,0),f=[];r=e.next();)i=this.createViewItem(r),i.top=a+u,this.indexes[r.id]=o++,f.push(i),u+=i.height;for(l.apply(this.heightMap,f),s=o;s<this.heightMap.length;s++)i=this.heightMap[s],i.top+=u,this.indexes[i.model.id]=s;for(s=f.length-1;s>=0;s--)this.onInsertItem(f[s]);for(s=this.heightMap.length-1;s>=o;s--)this.onRefreshItem(this.heightMap[s]);return u},n.prototype.onInsertItem=function(e){},n.prototype.onRemoveItems=function(e){for(var t=null,r,i=null,o=0,s=0;t=e.next();){if(o=this.indexes[t],r=this.heightMap[o],!r){console.error("view item doesnt exist");return}s-=r.height,delete this.indexes[t],this.onRemoveItem(r),i===null&&(i=o)}if(!(s===0||i===null))for(this.heightMap.splice(i,o-i+1),o=i;o<this.heightMap.length;o++)r=this.heightMap[o],r.top+=s,this.indexes[r.model.id]=o,this.onRefreshItem(r)},n.prototype.onRemoveItem=function(e){},n.prototype.onRefreshItemSet=function(e){var t=this,r=e.sort(function(i,o){return t.indexes[i.id]-t.indexes[o.id]});this.onRefreshItems(new og(r))},n.prototype.onRefreshItems=function(e){for(var t=null,r,i,o,s=null,a=0;t=e.next();){for(o=this.indexes[t.id];a!==0&&s!==null&&s<o;s++)r=this.heightMap[s],r.top+=a,this.onRefreshItem(r);r=this.heightMap[o],i=t.getHeight(),r.top+=a,a+=i-r.height,r.height=i,this.onRefreshItem(r,!0),s=o+1}if(a!==0&&s!==null)for(;s<this.heightMap.length;s++)r=this.heightMap[s],r.top+=a,this.onRefreshItem(r)},n.prototype.onRefreshItem=function(e,t){},n.prototype.indexAt=function(e){for(var t=0,r=this.heightMap.length,i,o;t<r;)if(i=Math.floor((t+r)/2),o=this.heightMap[i],e<o.top)r=i;else if(e>=o.top+o.height){if(t===i)break;t=i}else return i;return this.heightMap.length},n.prototype.indexAfter=function(e){return Math.min(this.indexAt(e)+1,this.heightMap.length)},n.prototype.itemAtIndex=function(e){return this.heightMap[e]},n.prototype.itemAfter=function(e){return this.heightMap[this.indexes[e.model.id]+1]||null},n.prototype.createViewItem=function(e){throw new Error("not implemented")},n.prototype.dispose=function(){this.heightMap=[],this.indexes={}},n}(),zJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qJ=function(){function n(e,t,r){this._posx=e,this._posy=t,this._target=r}return n.prototype.preventDefault=function(){},n.prototype.stopPropagation=function(){},Object.defineProperty(n.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),n}(),ZWe=function(n){zJ(e,n);function e(t){var r=n.call(this,t.posx,t.posy,t.target)||this;return r.originalEvent=t,r}return e.prototype.preventDefault=function(){this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},e}(qJ),XWe=function(n){zJ(e,n);function e(t,r,i){var o=n.call(this,t,r,i.target)||this;return o.originalEvent=i,o}return e.prototype.preventDefault=function(){this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},e}(qJ),$J=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function QWe(n){try{n.parentElement.removeChild(n)}catch{}}var JWe=function(){function n(e){this.context=e,this._cache={"":[]}}return n.prototype.alloc=function(e){var t=this.cache(e).pop();if(!t){var r=document.createElement("div");r.className="content";var i=document.createElement("div");i.appendChild(r);var o=null;try{o=this.context.renderer.renderTemplate(this.context.tree,e,r)}catch(s){console.error("Tree usage error: exception while rendering template"),console.error(s)}t={element:i,templateId:e,templateData:o}}return t},n.prototype.release=function(e,t){QWe(t.element),this.cache(e).push(t)},n.prototype.cache=function(e){return this._cache[e]||(this._cache[e]=[])},n.prototype.garbageCollect=function(){var e=this;this._cache&&Object.keys(this._cache).forEach(function(t){e._cache[t].forEach(function(r){e.context.renderer.disposeTemplate(e.context.tree,t,r.templateData),r.element=null,r.templateData=null}),delete e._cache[t]})},n.prototype.dispose=function(){this.garbageCollect(),this._cache=null},n}(),KJ=function(){function n(e,t){var r=this;this.width=0,this.needsRender=!1,this.uri=null,this.unbindDragStart=te.None,this._draggable=!1,this.context=e,this.model=t,this.id=this.model.id,this.row=null,this.top=0,this.height=t.getHeight(),this._styles={},t.getAllTraits().forEach(function(i){return r._styles[i]=!0}),t.isExpanded()&&this.addClass("expanded")}return Object.defineProperty(n.prototype,"expanded",{set:function(e){e?this.addClass("expanded"):this.removeClass("expanded")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"loading",{set:function(e){e?this.addClass("loading"):this.removeClass("loading")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"draggable",{get:function(){return this._draggable},set:function(e){this._draggable=e,this.render(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropTarget",{set:function(e){e?this.addClass("drop-target"):this.removeClass("drop-target")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){return this.row&&this.row.element},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"templateId",{get:function(){return this._templateId||(this._templateId=this.context.renderer.getTemplateId&&this.context.renderer.getTemplateId(this.context.tree,this.model.getElement()))},enumerable:!0,configurable:!0}),n.prototype.addClass=function(e){this._styles[e]=!0,this.render(!0)},n.prototype.removeClass=function(e){delete this._styles[e],this.render(!0)},n.prototype.render=function(e){var t=this;if(e===void 0&&(e=!1),!(!this.model||!this.element)){var r=["monaco-tree-row"];r.push.apply(r,Object.keys(this._styles)),this.model.hasChildren()&&r.push("has-children"),this.element.className=r.join(" "),this.element.draggable=this.draggable,this.element.style.height=this.height+"px",this.element.setAttribute("role","treeitem");var i=this.context.accessibilityProvider,o=i.getAriaLabel(this.context.tree,this.model.getElement());if(o&&this.element.setAttribute("aria-label",o),i.getPosInSet&&i.getSetSize&&(this.element.setAttribute("aria-setsize",i.getSetSize()),this.element.setAttribute("aria-posinset",i.getPosInSet(this.context.tree,this.model.getElement()))),this.model.hasTrait("focused")){var s=DG(this.model.id);this.element.setAttribute("aria-selected","true"),this.element.setAttribute("id",s)}else this.element.setAttribute("aria-selected","false"),this.element.removeAttribute("id");this.model.hasChildren()?this.element.setAttribute("aria-expanded",String(!!this._styles.expanded)):this.element.removeAttribute("aria-expanded"),this.element.setAttribute("aria-level",String(this.model.getDepth())),this.context.options.paddingOnRow?this.element.style.paddingLeft=this.context.options.twistiePixels+(this.model.getDepth()-1)*this.context.options.indentPixels+"px":(this.element.style.paddingLeft=(this.model.getDepth()-1)*this.context.options.indentPixels+"px",this.row.element.firstElementChild.style.paddingLeft=this.context.options.twistiePixels+"px");var a=this.context.dnd.getDragURI(this.context.tree,this.model.getElement());if(a!==this.uri&&(this.unbindDragStart&&this.unbindDragStart.dispose(),a?(this.uri=a,this.draggable=!0,this.unbindDragStart=ie(this.element,"dragstart",function(f){t.onDragStart(f)})):this.uri=null),!e&&this.element){var u=0;if(this.context.horizontalScrolling){var l=window.getComputedStyle(this.element);u=parseFloat(l.paddingLeft)}this.context.horizontalScrolling&&(this.element.style.width="fit-content");try{this.context.renderer.renderElement(this.context.tree,this.model.getElement(),this.templateId,this.row.templateData)}catch(f){console.error("Tree usage error: exception while rendering element"),console.error(f)}this.context.horizontalScrolling&&(this.width=G1(this.element)+u,this.element.style.width="")}}},n.prototype.insertInDOM=function(e,t){if(this.row||(this.row=this.context.cache.alloc(this.templateId),this.element[HR.BINDING]=this),!this.element.parentElement){if(t===null)e.appendChild(this.element);else try{e.insertBefore(this.element,t)}catch{console.warn("Failed to locate previous tree element"),e.appendChild(this.element)}this.render()}},n.prototype.removeFromDOM=function(){this.row&&(this.unbindDragStart.dispose(),this.uri=null,this.element[HR.BINDING]=null,this.context.cache.release(this.templateId,this.row),this.row=null)},n.prototype.dispose=function(){this.row=null},n}(),eVe=function(n){$J(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.row={element:i,templateData:null,templateId:null},o}return e.prototype.render=function(){if(!(!this.model||!this.element)){var t=["monaco-tree-wrapper"];t.push.apply(t,Object.keys(this._styles)),this.model.hasChildren()&&t.push("has-children"),this.element.className=t.join(" ")}},e.prototype.insertInDOM=function(t,r){},e.prototype.removeFromDOM=function(){},e}(KJ);function tVe(n,e){return!n&&!e?!0:!n||!e||n.accept!==e.accept||n.bubble!==e.bubble?!1:n.effect===e.effect}var HR=function(n){$J(e,n);function e(t,r){var i=n.call(this)||this;i.model=null,i.lastPointerType="",i.lastClickTimeStamp=0,i.contentWidthUpdateDelayer=new Rv(50),i.isRefreshing=!1,i.refreshingPreviousChildrenIds={},i.currentDragAndDropData=null,i.currentDropTarget=null,i.currentDropTargets=null,i.currentDropDisposable=te.None,i.dragAndDropScrollInterval=null,i.dragAndDropScrollTimeout=null,i.dragAndDropMouseY=null,i.highlightedItemWasDraggable=!1,i.onHiddenScrollTop=null,i._onDOMFocus=new j,i.onDOMFocus=i._onDOMFocus.event,i._onDOMBlur=new j,i._onDidScroll=new j,e.counter++,i.instance=e.counter;var o=typeof t.options.horizontalScrollMode>"u"?2:t.options.horizontalScrollMode;i.horizontalScrolling=o!==2,i.context={dataSource:t.dataSource,renderer:t.renderer,controller:t.controller,dnd:t.dnd,filter:t.filter,sorter:t.sorter,tree:t.tree,accessibilityProvider:t.accessibilityProvider,options:t.options,cache:new JWe(t),horizontalScrolling:i.horizontalScrolling},i.modelListeners=[],i.viewListeners=[],i.items={},i.domNode=document.createElement("div"),i.domNode.className="monaco-tree no-focused-item monaco-tree-instance-"+i.instance,i.domNode.tabIndex=t.options.preventRootFocus?-1:0,i.styleElement=pf(i.domNode),i.treeStyler=t.styler||new VWe(i.styleElement,"monaco-tree-instance-"+i.instance),i.domNode.setAttribute("role","tree"),i.context.options.ariaLabel&&i.domNode.setAttribute("aria-label",i.context.options.ariaLabel),i.context.options.alwaysFocused&&de(i.domNode,"focused"),i.context.options.paddingOnRow||de(i.domNode,"no-row-padding"),i.wrapper=document.createElement("div"),i.wrapper.className="monaco-tree-wrapper",i.scrollableElement=new Y0(i.wrapper,{alwaysConsumeMouseWheel:!0,horizontal:o,vertical:typeof t.options.verticalScrollMode<"u"?t.options.verticalScrollMode:1,useShadows:t.options.useShadows}),i.scrollableElement.onScroll(function(a){i.render(a.scrollTop,a.height,a.scrollLeft,a.width,a.scrollWidth),i._onDidScroll.fire()}),Ro?(i.wrapper.style.msTouchAction="none",i.wrapper.style.msContentZooming="none"):Bv.addTarget(i.wrapper),i.rowsContainer=document.createElement("div"),i.rowsContainer.className="monaco-tree-rows",t.options.showTwistie&&(i.rowsContainer.className+=" show-twisties");var s=Ty(i.domNode);return i.viewListeners.push(s.onDidFocus(function(){return i.onFocus()})),i.viewListeners.push(s.onDidBlur(function(){return i.onBlur()})),i.viewListeners.push(s),i.viewListeners.push(ie(i.domNode,"keydown",function(a){return i.onKeyDown(a)})),i.viewListeners.push(ie(i.domNode,"keyup",function(a){return i.onKeyUp(a)})),i.viewListeners.push(ie(i.domNode,"mousedown",function(a){return i.onMouseDown(a)})),i.viewListeners.push(ie(i.domNode,"mouseup",function(a){return i.onMouseUp(a)})),i.viewListeners.push(ie(i.wrapper,"auxclick",function(a){a&&a.button===1&&i.onMouseMiddleClick(a)})),i.viewListeners.push(ie(i.wrapper,"click",function(a){return i.onClick(a)})),i.viewListeners.push(ie(i.domNode,"contextmenu",function(a){return i.onContextMenu(a)})),i.viewListeners.push(ie(i.wrapper,Ar.Tap,function(a){return i.onTap(a)})),i.viewListeners.push(ie(i.wrapper,Ar.Change,function(a){return i.onTouchChange(a)})),Ro&&(i.viewListeners.push(ie(i.wrapper,"MSPointerDown",function(a){return i.onMsPointerDown(a)})),i.viewListeners.push(ie(i.wrapper,"MSGestureTap",function(a){return i.onMsGestureTap(a)})),i.viewListeners.push(z0(i.wrapper,"MSGestureChange",function(a){return i.onThrottledMsGestureChange(a)},function(a,u){u.stopPropagation(),u.preventDefault();var l={translationY:u.translationY,translationX:u.translationX};return a&&(l.translationY+=a.translationY,l.translationX+=a.translationX),l}))),i.viewListeners.push(ie(window,"dragover",function(a){return i.onDragOver(a)})),i.viewListeners.push(ie(i.wrapper,"drop",function(a){return i.onDrop(a)})),i.viewListeners.push(ie(window,"dragend",function(a){return i.onDragEnd(a)})),i.viewListeners.push(ie(window,"dragleave",function(a){return i.onDragOver(a)})),i.wrapper.appendChild(i.rowsContainer),i.domNode.appendChild(i.scrollableElement.getDomNode()),r.appendChild(i.domNode),i.lastRenderTop=0,i.lastRenderHeight=0,i.didJustPressContextMenuKey=!1,i.currentDropTarget=null,i.currentDropTargets=[],i.shouldInvalidateDropReaction=!1,i.dragAndDropScrollInterval=null,i.dragAndDropScrollTimeout=null,i.onRowsChanged(),i.layout(),i.setupMSGesture(),i.applyStyles(t.options),i}return e.prototype.applyStyles=function(t){this.treeStyler.style(t)},e.prototype.createViewItem=function(t){return new KJ(this.context,t)},e.prototype.getHTMLElement=function(){return this.domNode},e.prototype.focus=function(){this.domNode.focus()},e.prototype.isFocused=function(){return document.activeElement===this.domNode},e.prototype.blur=function(){this.domNode.blur()},e.prototype.setupMSGesture=function(){var t=this;window.MSGesture&&(this.msGesture=new MSGesture,setTimeout(function(){return t.msGesture.target=t.wrapper},100))},e.prototype.isTreeVisible=function(){return this.onHiddenScrollTop===null},e.prototype.layout=function(t,r){this.isTreeVisible()&&(this.viewHeight=t||pG(this.wrapper),this.scrollHeight=this.getContentHeight(),this.horizontalScrolling&&(this.viewWidth=r||G1(this.wrapper)))},e.prototype.render=function(t,r,i,o,s){var a,u,l=t,f=t+r,h=this.lastRenderTop+this.lastRenderHeight;for(a=this.indexAfter(f)-1,u=this.indexAt(Math.max(h,l));a>=u;a--)this.insertItemInDOM(this.itemAtIndex(a));for(a=Math.min(this.indexAt(this.lastRenderTop),this.indexAfter(f))-1,u=this.indexAt(l);a>=u;a--)this.insertItemInDOM(this.itemAtIndex(a));for(a=this.indexAt(this.lastRenderTop),u=Math.min(this.indexAt(l),this.indexAfter(h));a<u;a++)this.removeItemFromDOM(this.itemAtIndex(a));for(a=Math.max(this.indexAfter(f),this.indexAt(this.lastRenderTop)),u=this.indexAfter(h);a<u;a++)this.removeItemFromDOM(this.itemAtIndex(a));var d=this.itemAtIndex(this.indexAt(l));d&&(this.rowsContainer.style.top=d.top-l+"px"),this.horizontalScrolling&&(this.rowsContainer.style.left=-i+"px",this.rowsContainer.style.width=Math.max(s,o)+"px"),this.lastRenderTop=l,this.lastRenderHeight=f-l},e.prototype.setModel=function(t){this.releaseModel(),this.model=t,this.model.onRefresh(this.onRefreshing,this,this.modelListeners),this.model.onDidRefresh(this.onRefreshed,this,this.modelListeners),this.model.onSetInput(this.onClearingInput,this,this.modelListeners),this.model.onDidSetInput(this.onSetInput,this,this.modelListeners),this.model.onDidFocus(this.onModelFocusChange,this,this.modelListeners),this.model.onRefreshItemChildren(this.onItemChildrenRefreshing,this,this.modelListeners),this.model.onDidRefreshItemChildren(this.onItemChildrenRefreshed,this,this.modelListeners),this.model.onDidRefreshItem(this.onItemRefresh,this,this.modelListeners),this.model.onExpandItem(this.onItemExpanding,this,this.modelListeners),this.model.onDidExpandItem(this.onItemExpanded,this,this.modelListeners),this.model.onCollapseItem(this.onItemCollapsing,this,this.modelListeners),this.model.onDidRevealItem(this.onItemReveal,this,this.modelListeners),this.model.onDidAddTraitItem(this.onItemAddTrait,this,this.modelListeners),this.model.onDidRemoveTraitItem(this.onItemRemoveTrait,this,this.modelListeners)},e.prototype.onRefreshing=function(){this.isRefreshing=!0},e.prototype.onRefreshed=function(){this.isRefreshing=!1,this.onRowsChanged()},e.prototype.onRowsChanged=function(t){t===void 0&&(t=this.scrollTop),!this.isRefreshing&&(this.scrollTop=t,this.updateScrollWidth())},e.prototype.updateScrollWidth=function(){var t=this;this.horizontalScrolling&&this.contentWidthUpdateDelayer.trigger(function(){for(var r=Object.keys(t.items),i=0,o=0,s=r;o<s.length;o++){var a=s[o];i=Math.max(i,t.items[a].width)}t.scrollWidth=i+10})},e.prototype.focusNextPage=function(t){var r=this,i=this.indexAt(this.scrollTop+this.viewHeight);i=i===0?0:i-1;var o=this.itemAtIndex(i).model.getElement(),s=this.model.getFocus();if(s!==o)this.model.setFocus(o,t);else{var a=this.scrollTop;this.scrollTop+=this.viewHeight,this.scrollTop!==a&&setTimeout(function(){r.focusNextPage(t)},0)}},e.prototype.focusPreviousPage=function(t){var r=this,i;this.scrollTop===0?i=this.indexAt(this.scrollTop):i=this.indexAfter(this.scrollTop-1);var o=this.itemAtIndex(i).model.getElement(),s=this.model.getFocus();if(s!==o)this.model.setFocus(o,t);else{var a=this.scrollTop;this.scrollTop-=this.viewHeight,this.scrollTop!==a&&setTimeout(function(){r.focusPreviousPage(t)},0)}},Object.defineProperty(e.prototype,"viewHeight",{get:function(){var t=this.scrollableElement.getScrollDimensions();return t.height},set:function(t){this.scrollableElement.setScrollDimensions({height:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollHeight",{set:function(t){t=t+(this.horizontalScrolling?10:0),this.scrollableElement.setScrollDimensions({scrollHeight:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewWidth",{get:function(){var t=this.scrollableElement.getScrollDimensions();return t.width},set:function(t){this.scrollableElement.setScrollDimensions({width:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollWidth",{set:function(t){this.scrollableElement.setScrollDimensions({scrollWidth:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollTop",{get:function(){var t=this.scrollableElement.getScrollPosition();return t.scrollTop},set:function(t){var r=this.getContentHeight()+(this.horizontalScrolling?10:0);this.scrollableElement.setScrollDimensions({scrollHeight:r}),this.scrollableElement.setScrollPosition({scrollTop:t})},enumerable:!0,configurable:!0}),e.prototype.onClearingInput=function(t){var r=t.item;r&&(this.onRemoveItems(new t8(r.getNavigator(),function(i){return i&&i.id})),this.onRowsChanged())},e.prototype.onSetInput=function(t){this.context.cache.garbageCollect(),this.inputItem=new eVe(this.context,t.item,this.wrapper)},e.prototype.onItemChildrenRefreshing=function(t){var r=t.item,i=this.items[r.id];if(i&&this.context.options.showLoading&&(i.loadingTimer=setTimeout(function(){i.loadingTimer=0,i.loading=!0},e.LOADING_DECORATION_DELAY)),!t.isNested){for(var o=[],s=r.getNavigator(),a=void 0;a=s.next();)o.push(a.id);this.refreshingPreviousChildrenIds[r.id]=o}},e.prototype.onItemChildrenRefreshed=function(t){var r=this,i=t.item,o=this.items[i.id];if(o&&(o.loadingTimer&&(clearTimeout(o.loadingTimer),o.loadingTimer=0),o.loading=!1),!t.isNested){for(var s=this.refreshingPreviousChildrenIds[i.id],a=[],u=i.getNavigator(),l=void 0;l=u.next();)a.push(l);var f=Math.abs(s.length-a.length)>1e3,h=[],d=!1;if(!f){var g=new SF({getLength:function(){return s.length},getElementAtIndex:function(C){return s[C]}},{getLength:function(){return a.length},getElementAtIndex:function(C){return a[C].id}},null);h=g.ComputeDiff(!1),d=h.some(function(C){if(C.modifiedLength>0){for(var E=C.modifiedStart,D=C.modifiedStart+C.modifiedLength;E<D;E++)if(r.items.hasOwnProperty(a[E].id))return!0}return!1})}if(!f&&!d&&h.length<50)for(var v=0,m=h;v<m.length;v++){var y=m[v];if(y.originalLength>0&&this.onRemoveItems(new og(s,y.originalStart,y.originalStart+y.originalLength)),y.modifiedLength>0){var b=a[y.modifiedStart-1]||i;b=b.getDepth()>0?b:null,this.onInsertItems(new og(a,y.modifiedStart,y.modifiedStart+y.modifiedLength),b?b.id:null)}}else(f||h.length)&&(this.onRemoveItems(new og(s)),this.onInsertItems(new og(a),i.getDepth()>0?i.id:null));(f||h.length)&&this.onRowsChanged()}},e.prototype.onItemRefresh=function(t){this.onItemsRefresh([t])},e.prototype.onItemsRefresh=function(t){var r=this;this.onRefreshItemSet(t.filter(function(i){return r.items.hasOwnProperty(i.id)})),this.onRowsChanged()},e.prototype.onItemExpanding=function(t){var r=this.items[t.item.id];r&&(r.expanded=!0)},e.prototype.onItemExpanded=function(t){var r=t.item,i=this.items[r.id];if(i){i.expanded=!0;var o=this.onInsertItems(r.getNavigator(),r.id)||0,s=this.scrollTop;i.top+i.height<=this.scrollTop&&(s+=o),this.onRowsChanged(s)}},e.prototype.onItemCollapsing=function(t){var r=t.item,i=this.items[r.id];i&&(i.expanded=!1,this.onRemoveItems(new t8(r.getNavigator(),function(o){return o&&o.id})),this.onRowsChanged())},e.prototype.onItemReveal=function(t){var r=t.item,i=t.relativeTop,o=this.items[r.id];if(o)if(i!==null){i=i<0?0:i,i=i>1?1:i;var s=o.height-this.viewHeight;this.scrollTop=s*i+o.top}else{var a=o.top+o.height,u=this.scrollTop+this.viewHeight;o.top<this.scrollTop?this.scrollTop=o.top:a>=u&&(this.scrollTop=a-this.viewHeight)}},e.prototype.onItemAddTrait=function(t){var r=t.item,i=t.trait,o=this.items[r.id];o&&o.addClass(i),i==="highlighted"&&(de(this.domNode,i),o&&(this.highlightedItemWasDraggable=!!o.draggable,o.draggable&&(o.draggable=!1)))},e.prototype.onItemRemoveTrait=function(t){var r=t.item,i=t.trait,o=this.items[r.id];o&&o.removeClass(i),i==="highlighted"&&(qe(this.domNode,i),this.highlightedItemWasDraggable&&(o.draggable=!0),this.highlightedItemWasDraggable=!1)},e.prototype.onModelFocusChange=function(){var t=this.model&&this.model.getFocus();vt(this.domNode,"no-focused-item",!t),t?this.domNode.setAttribute("aria-activedescendant",DG(this.context.dataSource.getId(this.context.tree,t))):this.domNode.removeAttribute("aria-activedescendant")},e.prototype.onInsertItem=function(t){var r=this;t.onDragStart=function(i){r.onDragStart(t,i)},t.needsRender=!0,this.refreshViewItem(t),this.items[t.id]=t},e.prototype.onRefreshItem=function(t,r){r===void 0&&(r=!1),t.needsRender=t.needsRender||r,this.refreshViewItem(t)},e.prototype.onRemoveItem=function(t){this.removeItemFromDOM(t),t.dispose(),delete this.items[t.id]},e.prototype.refreshViewItem=function(t){t.render(),this.shouldBeRendered(t)?this.insertItemInDOM(t):this.removeItemFromDOM(t)},e.prototype.onClick=function(t){if(!(this.lastPointerType&&this.lastPointerType!=="mouse")){var r=new Rr(t),i=this.getItemAround(r.target);i&&(Ro&&Date.now()-this.lastClickTimeStamp<300&&(r.detail=2),this.lastClickTimeStamp=Date.now(),this.context.controller.onClick(this.context.tree,i.model.getElement(),r))}},e.prototype.onMouseMiddleClick=function(t){if(this.context.controller.onMouseMiddleClick){var r=new Rr(t),i=this.getItemAround(r.target);i&&this.context.controller.onMouseMiddleClick(this.context.tree,i.model.getElement(),r)}},e.prototype.onMouseDown=function(t){if(this.didJustPressContextMenuKey=!1,!!this.context.controller.onMouseDown&&!(this.lastPointerType&&this.lastPointerType!=="mouse")){var r=new Rr(t);if(!(r.ctrlKey&&Da&&ct)){var i=this.getItemAround(r.target);i&&this.context.controller.onMouseDown(this.context.tree,i.model.getElement(),r)}}},e.prototype.onMouseUp=function(t){if(this.context.controller.onMouseUp&&!(this.lastPointerType&&this.lastPointerType!=="mouse")){var r=new Rr(t);if(!(r.ctrlKey&&Da&&ct)){var i=this.getItemAround(r.target);i&&this.context.controller.onMouseUp(this.context.tree,i.model.getElement(),r)}}},e.prototype.onTap=function(t){var r=this.getItemAround(t.initialTarget);r&&this.context.controller.onTap(this.context.tree,r.model.getElement(),t)},e.prototype.onTouchChange=function(t){t.preventDefault(),t.stopPropagation(),this.scrollTop-=t.translationY},e.prototype.onContextMenu=function(t){var r,i;if(t instanceof KeyboardEvent||this.didJustPressContextMenuKey){this.didJustPressContextMenuKey=!1;var o=new Sn(t);i=this.model.getFocus();var s=void 0;if(!i)i=this.model.getInput(),s=Wr(this.inputItem.element);else{var a=this.context.dataSource.getId(this.context.tree,i),u=this.items[a];s=Wr(u.element)}r=new XWe(s.left+s.width,s.top,o)}else{var l=new Rr(t),f=this.getItemAround(l.target);if(!f)return;i=f.model.getElement(),r=new ZWe(l)}this.context.controller.onContextMenu(this.context.tree,i,r)},e.prototype.onKeyDown=function(t){var r=new Sn(t);this.didJustPressContextMenuKey=r.keyCode===58||r.shiftKey&&r.keyCode===68,!(r.target&&r.target.tagName&&r.target.tagName.toLowerCase()==="input")&&(this.didJustPressContextMenuKey&&(r.preventDefault(),r.stopPropagation()),this.context.controller.onKeyDown(this.context.tree,r))},e.prototype.onKeyUp=function(t){this.didJustPressContextMenuKey&&this.onContextMenu(t),this.didJustPressContextMenuKey=!1,this.context.controller.onKeyUp(this.context.tree,new Sn(t))},e.prototype.onDragStart=function(t,r){if(!this.model.getHighlight()){var i=t.model.getElement(),o=this.model.getSelection(),s;if(o.indexOf(i)>-1?s=o:s=[i],r.dataTransfer.effectAllowed="copyMove",r.dataTransfer.setData(jZ.RESOURCES,JSON.stringify([t.uri])),r.dataTransfer.setDragImage){var a=void 0;this.context.dnd.getDragLabel?a=this.context.dnd.getDragLabel(this.context.tree,s):a=String(s.length);var u=document.createElement("div");u.className="monaco-tree-drag-image",u.textContent=a,document.body.appendChild(u),r.dataTransfer.setDragImage(u,-10,-10),setTimeout(function(){return document.body.removeChild(u)},0)}this.currentDragAndDropData=new $We(s),ns.CurrentDragAndDropData=new KWe(s),this.context.dnd.onDragStart(this.context.tree,this.currentDragAndDropData,new Yk(r))}},e.prototype.setupDragAndDropScrollInterval=function(){var t=this,r=iF(this.wrapper).top;this.dragAndDropScrollInterval||(this.dragAndDropScrollInterval=window.setInterval(function(){if(t.dragAndDropMouseY!==null){var i=t.dragAndDropMouseY-r,o=0,s=t.viewHeight-35;i<35?o=Math.max(-14,.2*(i-35)):i>s&&(o=Math.min(14,.2*(i-s))),t.scrollTop+=o}},10),this.cancelDragAndDropScrollTimeout(),this.dragAndDropScrollTimeout=window.setTimeout(function(){t.cancelDragAndDropScrollInterval(),t.dragAndDropScrollTimeout=null},1e3))},e.prototype.cancelDragAndDropScrollInterval=function(){this.dragAndDropScrollInterval&&(window.clearInterval(this.dragAndDropScrollInterval),this.dragAndDropScrollInterval=null),this.cancelDragAndDropScrollTimeout()},e.prototype.cancelDragAndDropScrollTimeout=function(){this.dragAndDropScrollTimeout&&(window.clearTimeout(this.dragAndDropScrollTimeout),this.dragAndDropScrollTimeout=null)},e.prototype.onDragOver=function(t){var r=this;t.preventDefault();var i=new Yk(t),o=this.getItemAround(i.target);if(!o||i.posx===0&&i.posy===0&&i.browserEvent.type===Ye.DRAG_LEAVE)return this.currentDropTarget&&(this.currentDropTargets.forEach(function(v){return v.dropTarget=!1}),this.currentDropTargets=[],this.currentDropDisposable.dispose()),this.cancelDragAndDropScrollInterval(),this.currentDropTarget=null,this.currentDropElement=null,this.dragAndDropMouseY=null,!1;if(this.setupDragAndDropScrollInterval(),this.dragAndDropMouseY=i.posy,!this.currentDragAndDropData)if(ns.CurrentDragAndDropData)this.currentDragAndDropData=ns.CurrentDragAndDropData;else{if(!i.dataTransfer.types)return!1;this.currentDragAndDropData=new GWe}this.currentDragAndDropData.update(i.browserEvent.dataTransfer);var s,a=o.model,u;do{if(s=a?a.getElement():this.model.getInput(),u=this.context.dnd.onDragOver(this.context.tree,this.currentDragAndDropData,s,i),!u||u.bubble!==1)break;a=a&&a.parent}while(a);if(!a)return this.currentDropElement=null,!1;var l=u&&u.accept;l?(this.currentDropElement=a.getElement(),i.preventDefault(),i.dataTransfer.dropEffect=u.effect===0?"copy":"move"):this.currentDropElement=null;var f=a.id===this.inputItem.id?this.inputItem:this.items[a.id];if((this.shouldInvalidateDropReaction||this.currentDropTarget!==f||!tVe(this.currentDropElementReaction,u))&&(this.shouldInvalidateDropReaction=!1,this.currentDropTarget&&(this.currentDropTargets.forEach(function(v){return v.dropTarget=!1}),this.currentDropTargets=[],this.currentDropDisposable.dispose()),this.currentDropTarget=f,this.currentDropElementReaction=u,l)){if(this.currentDropTarget&&(this.currentDropTarget.dropTarget=!0,this.currentDropTargets.push(this.currentDropTarget)),u.bubble===0)for(var h=a.getNavigator(),d=void 0;d=h.next();)o=this.items[d.id],o&&(o.dropTarget=!0,this.currentDropTargets.push(o));if(u.autoExpand){var g=j0(500);this.currentDropDisposable=en(function(){return g.cancel()}),g.then(function(){return r.context.tree.expand(r.currentDropElement)}).then(function(){return r.shouldInvalidateDropReaction=!0})}}return!0},e.prototype.onDrop=function(t){if(this.currentDropElement){var r=new Yk(t);r.preventDefault(),this.currentDragAndDropData.update(r.browserEvent.dataTransfer),this.context.dnd.drop(this.context.tree,this.currentDragAndDropData,this.currentDropElement,r),this.onDragEnd(t)}this.cancelDragAndDropScrollInterval()},e.prototype.onDragEnd=function(t){this.currentDropTarget&&(this.currentDropTargets.forEach(function(r){return r.dropTarget=!1}),this.currentDropTargets=[]),this.currentDropDisposable.dispose(),this.cancelDragAndDropScrollInterval(),this.currentDragAndDropData=null,ns.CurrentDragAndDropData=void 0,this.currentDropElement=null,this.currentDropTarget=null,this.dragAndDropMouseY=null},e.prototype.onFocus=function(){this.context.options.alwaysFocused||de(this.domNode,"focused"),this._onDOMFocus.fire()},e.prototype.onBlur=function(){this.context.options.alwaysFocused||qe(this.domNode,"focused"),this.domNode.removeAttribute("aria-activedescendant"),this._onDOMBlur.fire()},e.prototype.onMsPointerDown=function(t){if(this.msGesture){var r=t.pointerType;if(r===(t.MSPOINTER_TYPE_MOUSE||"mouse")){this.lastPointerType="mouse";return}else if(r===(t.MSPOINTER_TYPE_TOUCH||"touch"))this.lastPointerType="touch";else return;t.stopPropagation(),t.preventDefault(),this.msGesture.addPointer(t.pointerId)}},e.prototype.onThrottledMsGestureChange=function(t){this.scrollTop-=t.translationY},e.prototype.onMsGestureTap=function(t){t.initialTarget=document.elementFromPoint(t.clientX,t.clientY),this.onTap(t)},e.prototype.insertItemInDOM=function(t){var r=null,i=this.itemAfter(t);i&&i.element&&(r=i.element),t.insertInDOM(this.rowsContainer,r)},e.prototype.removeItemFromDOM=function(t){t&&t.removeFromDOM()},e.prototype.shouldBeRendered=function(t){return t.top<this.lastRenderTop+this.lastRenderHeight&&t.top+t.height>this.lastRenderTop},e.prototype.getItemAround=function(t){var r=this.inputItem,i=t;do{if(i[e.BINDING]&&(r=i[e.BINDING]),i===this.wrapper||i===this.domNode)return r;if(i===this.scrollableElement.getDomNode()||i===document.body)return}while(i=i.parentElement)},e.prototype.releaseModel=function(){this.model&&(this.modelListeners=Ue(this.modelListeners),this.model=null)},e.prototype.dispose=function(){var t=this;this.scrollableElement.dispose(),this.releaseModel(),this.viewListeners=Ue(this.viewListeners),this._onDOMFocus.dispose(),this._onDOMBlur.dispose(),this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.items&&Object.keys(this.items).forEach(function(r){return t.items[r].removeFromDOM()}),this.context.cache&&this.context.cache.dispose(),n.prototype.dispose.call(this)},e.BINDING="monaco-tree-row",e.LOADING_DECORATION_DELAY=800,e.counter=0,e}(YWe),nVe=function(){function n(e,t,r){if(r===void 0&&(r={}),this.tree=e,this.configuration=t,this.options=r,!t.dataSource)throw new Error("You must provide a Data Source to the tree.");this.dataSource=t.dataSource,this.renderer=t.renderer,this.controller=t.controller||new HJ({clickBehavior:1,keyboardSupport:typeof r.keyboardSupport!="boolean"||r.keyboardSupport}),this.dnd=t.dnd||new FWe,this.filter=t.filter||new BWe,this.sorter=t.sorter,this.accessibilityProvider=t.accessibilityProvider||new WWe,this.styler=t.styler}return n}(),rVe={listFocusBackground:Z.fromHex("#073655"),listActiveSelectionBackground:Z.fromHex("#0E639C"),listActiveSelectionForeground:Z.fromHex("#FFFFFF"),listFocusAndSelectionBackground:Z.fromHex("#094771"),listFocusAndSelectionForeground:Z.fromHex("#FFFFFF"),listInactiveSelectionBackground:Z.fromHex("#3F3F46"),listHoverBackground:Z.fromHex("#2A2D2E"),listDropBackground:Z.fromHex("#383B3D")},iVe=function(){function n(e,t,r){r===void 0&&(r={}),this._onDidChangeFocus=new qr,this.onDidChangeFocus=this._onDidChangeFocus.event,this._onDidChangeSelection=new qr,this.onDidChangeSelection=this._onDidChangeSelection.event,this._onHighlightChange=new qr,this._onDidExpandItem=new qr,this._onDidCollapseItem=new qr,this._onDispose=new j,this.onDidDispose=this._onDispose.event,this.container=e,_r(r,rVe,!1),r.twistiePixels=typeof r.twistiePixels=="number"?r.twistiePixels:32,r.showTwistie=r.showTwistie!==!1,r.indentPixels=typeof r.indentPixels=="number"?r.indentPixels:12,r.alwaysFocused=r.alwaysFocused===!0,r.useShadows=r.useShadows!==!1,r.paddingOnRow=r.paddingOnRow!==!1,r.showLoading=r.showLoading!==!1,this.context=new nVe(this,t,r),this.model=new qWe(this.context),this.view=new HR(this.context,this.container),this.view.setModel(this.model),this._onDidChangeFocus.input=this.model.onDidFocus,this._onDidChangeSelection.input=this.model.onDidSelect,this._onHighlightChange.input=this.model.onDidHighlight,this._onDidExpandItem.input=this.model.onDidExpandItem,this._onDidCollapseItem.input=this.model.onDidCollapseItem}return n.prototype.style=function(e){this.view.applyStyles(e)},Object.defineProperty(n.prototype,"onDidFocus",{get:function(){return this.view&&this.view.onDOMFocus},enumerable:!0,configurable:!0}),n.prototype.getHTMLElement=function(){return this.view.getHTMLElement()},n.prototype.layout=function(e,t){this.view.layout(e,t)},n.prototype.domFocus=function(){this.view.focus()},n.prototype.isDOMFocused=function(){return this.view.isFocused()},n.prototype.domBlur=function(){this.view.blur()},n.prototype.setInput=function(e){return this.model.setInput(e)},n.prototype.getInput=function(){return this.model.getInput()},n.prototype.expand=function(e){return this.model.expand(e)},n.prototype.collapse=function(e,t){return t===void 0&&(t=!1),this.model.collapse(e,t)},n.prototype.toggleExpansion=function(e,t){return t===void 0&&(t=!1),this.model.toggleExpansion(e,t)},n.prototype.isExpanded=function(e){return this.model.isExpanded(e)},n.prototype.reveal=function(e,t){return t===void 0&&(t=null),this.model.reveal(e,t)},n.prototype.getHighlight=function(){return this.model.getHighlight()},n.prototype.clearHighlight=function(e){this.model.setHighlight(null,e)},n.prototype.setSelection=function(e,t){this.model.setSelection(e,t)},n.prototype.getSelection=function(){return this.model.getSelection()},n.prototype.clearSelection=function(e){this.model.setSelection([],e)},n.prototype.setFocus=function(e,t){this.model.setFocus(e,t)},n.prototype.getFocus=function(){return this.model.getFocus()},n.prototype.focusNext=function(e,t){this.model.focusNext(e,t)},n.prototype.focusPrevious=function(e,t){this.model.focusPrevious(e,t)},n.prototype.focusParent=function(e){this.model.focusParent(e)},n.prototype.focusFirstChild=function(e){this.model.focusFirstChild(e)},n.prototype.focusFirst=function(e,t){this.model.focusFirst(e,t)},n.prototype.focusNth=function(e,t){this.model.focusNth(e,t)},n.prototype.focusLast=function(e,t){this.model.focusLast(e,t)},n.prototype.focusNextPage=function(e){this.view.focusNextPage(e)},n.prototype.focusPreviousPage=function(e){this.view.focusPreviousPage(e)},n.prototype.clearFocus=function(e){this.model.setFocus(null,e)},n.prototype.dispose=function(){this._onDispose.fire(),this.model!==null&&(this.model.dispose(),this.model=null),this.view!==null&&(this.view.dispose(),this.view=null),this._onDidChangeFocus.dispose(),this._onDidChangeSelection.dispose(),this._onHighlightChange.dispose(),this._onDidExpandItem.dispose(),this._onDidCollapseItem.dispose(),this._onDispose.dispose()},n}(),oVe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sVe="done",aVe="active",wj="infinite",uVe="discrete",lVe="monaco-progress-container",cVe="progress-bit",fVe={progressBarBackground:Z.fromHex("#0E70C0")},hVe=function(n){oVe(e,n);function e(t,r){var i=n.call(this)||this;return i.options=r||Object.create(null),_r(i.options,fVe,!1),i.workedVal=0,i.progressBarBackground=i.options.progressBarBackground,i._register(i.showDelayedScheduler=new hr(function(){return Yr(i.element)},0)),i.create(t),i}return e.prototype.create=function(t){this.element=document.createElement("div"),de(this.element,lVe),t.appendChild(this.element),this.bit=document.createElement("div"),de(this.bit,cVe),this.element.appendChild(this.bit),this.applyStyles()},e.prototype.off=function(){this.bit.style.width="inherit",this.bit.style.opacity="1",aI(this.element,aVe,wj,uVe),this.workedVal=0,this.totalWork=void 0},e.prototype.stop=function(){return this.doDone(!1)},e.prototype.doDone=function(t){var r=this;return de(this.element,sVe),La(this.element,wj)?(this.bit.style.opacity="0",t?setTimeout(function(){return r.off()},200):this.off()):(this.bit.style.width="inherit",t?setTimeout(function(){return r.off()},200):this.off()),this},e.prototype.hide=function(){yr(this.element),this.showDelayedScheduler.cancel()},e.prototype.style=function(t){this.progressBarBackground=t.progressBarBackground,this.applyStyles()},e.prototype.applyStyles=function(){if(this.bit){var t=this.progressBarBackground?this.progressBarBackground.toString():null;this.bit.style.backgroundColor=t}},e}(te),GJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dVe=function(n){GJ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onContextMenu=function(t,r,i){return ct?this.onLeftClick(t,r,i):n.prototype.onContextMenu.call(this,t,r,i)},e}(HJ),pVe={background:Z.fromHex("#1E1E1E"),foreground:Z.fromHex("#CCCCCC"),pickerGroupForeground:Z.fromHex("#0097FB"),pickerGroupBorder:Z.fromHex("#3F3F46"),widgetShadow:Z.fromHex("#000000"),progressBarBackground:Z.fromHex("#0E70C0")},Cj=S("quickOpenAriaLabel","Quick picker. Type to narrow down results."),gVe=function(n){GJ(e,n);function e(t,r,i){var o=n.call(this)||this;return o.isDisposed=!1,o.container=t,o.callbacks=r,o.options=i,o.styles=i||Object.create(null),_r(o.styles,pVe,!1),o.model=null,o}return e.prototype.getModel=function(){return this.model},e.prototype.create=function(){var t=this;this.element=document.createElement("div"),de(this.element,"monaco-quick-open-widget"),this.container.appendChild(this.element),this._register(ie(this.element,Ye.CONTEXT_MENU,function(i){return nn.stop(i,!0)})),this._register(ie(this.element,Ye.FOCUS,function(i){return t.gainingFocus()},!0)),this._register(ie(this.element,Ye.BLUR,function(i){return t.loosingFocus(i)},!0)),this._register(ie(this.element,Ye.KEY_DOWN,function(i){var o=new Sn(i);if(o.keyCode===9)nn.stop(i,!0),t.hide(2);else if(o.keyCode===2&&!o.altKey&&!o.ctrlKey&&!o.metaKey){var s=i.currentTarget.querySelectorAll("input, .monaco-tree, .monaco-tree-row.focused .action-label.icon");o.shiftKey&&o.target===s[0]?(nn.stop(i,!0),s[s.length-1].focus()):!o.shiftKey&&o.target===s[s.length-1]&&(nn.stop(i,!0),s[0].focus())}})),this.progressBar=this._register(new hVe(this.element,{progressBarBackground:this.styles.progressBarBackground})),this.progressBar.hide(),this.inputContainer=document.createElement("div"),de(this.inputContainer,"quick-open-input"),this.element.appendChild(this.inputContainer),this.inputBox=this._register(new rQ(this.inputContainer,void 0,{placeholder:this.options.inputPlaceHolder||"",ariaLabel:Cj,inputBackground:this.styles.inputBackground,inputForeground:this.styles.inputForeground,inputBorder:this.styles.inputBorder,inputValidationInfoBackground:this.styles.inputValidationInfoBackground,inputValidationInfoForeground:this.styles.inputValidationInfoForeground,inputValidationInfoBorder:this.styles.inputValidationInfoBorder,inputValidationWarningBackground:this.styles.inputValidationWarningBackground,inputValidationWarningForeground:this.styles.inputValidationWarningForeground,inputValidationWarningBorder:this.styles.inputValidationWarningBorder,inputValidationErrorBackground:this.styles.inputValidationErrorBackground,inputValidationErrorForeground:this.styles.inputValidationErrorForeground,inputValidationErrorBorder:this.styles.inputValidationErrorBorder})),this.inputElement=this.inputBox.inputElement,this.inputElement.setAttribute("role","combobox"),this.inputElement.setAttribute("aria-haspopup","false"),this.inputElement.setAttribute("aria-autocomplete","list"),this._register(ie(this.inputBox.inputElement,Ye.INPUT,function(i){return t.onType()})),this._register(ie(this.inputBox.inputElement,Ye.KEY_DOWN,function(i){var o=new Sn(i),s=t.shouldOpenInBackground(o);if(o.keyCode!==2){if(o.keyCode===18||o.keyCode===16||o.keyCode===12||o.keyCode===11)nn.stop(i,!0),t.navigateInTree(o.keyCode,o.shiftKey),t.inputBox.inputElement.selectionStart===t.inputBox.inputElement.selectionEnd&&(t.inputBox.inputElement.selectionStart=t.inputBox.value.length);else if(o.keyCode===3||s){nn.stop(i,!0);var a=t.tree.getFocus();a&&t.elementSelected(a,i,s?2:1)}}})),this.resultCount=document.createElement("div"),de(this.resultCount,"quick-open-result-count"),this.resultCount.setAttribute("aria-live","polite"),this.resultCount.setAttribute("aria-atomic","true"),this.element.appendChild(this.resultCount),this.treeContainer=document.createElement("div"),de(this.treeContainer,"quick-open-tree"),this.element.appendChild(this.treeContainer);var r=this.options.treeCreator||function(i,o,s){return new iVe(i,o,s)};return this.tree=this._register(r(this.treeContainer,{dataSource:new OWe(this),controller:new dVe({clickBehavior:1,keyboardSupport:this.options.keyboardSupport}),renderer:this.renderer=new PWe(this,this.styles),filter:new MWe(this),accessibilityProvider:new RWe(this)},{twistiePixels:11,indentPixels:0,alwaysFocused:!0,verticalScrollMode:3,horizontalScrollMode:2,ariaLabel:S("treeAriaLabel","Quick Picker"),keyboardSupport:this.options.keyboardSupport,preventRootFocus:!1})),this.treeElement=this.tree.getHTMLElement(),this._register(this.tree.onDidChangeFocus(function(i){t.elementFocused(i.focus,i)})),this._register(this.tree.onDidChangeSelection(function(i){if(i.selection&&i.selection.length>0){var o=i.payload&&i.payload.originalEvent instanceof Rr?i.payload.originalEvent:void 0,s=o?t.shouldOpenInBackground(o):!1;t.elementSelected(i.selection[0],i,s?2:1)}})),this._register(ie(this.treeContainer,Ye.KEY_DOWN,function(i){var o=new Sn(i);t.quickNavigateConfiguration&&(o.keyCode===18||o.keyCode===16||o.keyCode===12||o.keyCode===11)&&(nn.stop(i,!0),t.navigateInTree(o.keyCode))})),this._register(ie(this.treeContainer,Ye.KEY_UP,function(i){var o=new Sn(i),s=o.keyCode;if(t.quickNavigateConfiguration){var a=t.quickNavigateConfiguration.keybindings,u=s===3||a.some(function(f){var h=f.getParts(),d=h[0],g=h[1];return g?!1:d.shiftKey&&s===4?!(o.ctrlKey||o.altKey||o.metaKey):!!(d.altKey&&s===6||d.ctrlKey&&s===5||d.metaKey&&s===57)});if(u){var l=t.tree.getFocus();l&&t.elementSelected(l,i)}}})),this.layoutDimensions&&this.layout(this.layoutDimensions),this.applyStyles(),this._register(ie(this.treeContainer,Ye.KEY_DOWN,function(i){var o=new Sn(i);t.quickNavigateConfiguration||(o.keyCode===18||o.keyCode===16||o.keyCode===12||o.keyCode===11)&&(nn.stop(i,!0),t.navigateInTree(o.keyCode,o.shiftKey),t.treeElement.focus())})),this.element},e.prototype.style=function(t){this.styles=t,this.applyStyles()},e.prototype.applyStyles=function(){if(this.element){var t=this.styles.foreground?this.styles.foreground.toString():null,r=this.styles.background?this.styles.background.toString():null,i=this.styles.borderColor?this.styles.borderColor.toString():null,o=this.styles.widgetShadow?this.styles.widgetShadow.toString():null;this.element.style.color=t,this.element.style.backgroundColor=r,this.element.style.borderColor=i,this.element.style.borderWidth=i?"1px":null,this.element.style.borderStyle=i?"solid":null,this.element.style.boxShadow=o?"0 5px 8px "+o:null}this.progressBar&&this.progressBar.style({progressBarBackground:this.styles.progressBarBackground}),this.inputBox&&this.inputBox.style({inputBackground:this.styles.inputBackground,inputForeground:this.styles.inputForeground,inputBorder:this.styles.inputBorder,inputValidationInfoBackground:this.styles.inputValidationInfoBackground,inputValidationInfoForeground:this.styles.inputValidationInfoForeground,inputValidationInfoBorder:this.styles.inputValidationInfoBorder,inputValidationWarningBackground:this.styles.inputValidationWarningBackground,inputValidationWarningForeground:this.styles.inputValidationWarningForeground,inputValidationWarningBorder:this.styles.inputValidationWarningBorder,inputValidationErrorBackground:this.styles.inputValidationErrorBackground,inputValidationErrorForeground:this.styles.inputValidationErrorForeground,inputValidationErrorBorder:this.styles.inputValidationErrorBorder}),this.tree&&!this.options.treeCreator&&this.tree.style(this.styles),this.renderer&&this.renderer.updateStyles(this.styles)},e.prototype.shouldOpenInBackground=function(t){if(t instanceof Sn){if(t.keyCode!==17||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)return!1;var r=this.inputBox.inputElement;return r.selectionEnd===this.inputBox.value.length&&r.selectionStart===r.selectionEnd}return t.middleButton},e.prototype.onType=function(){var t=this.inputBox.value;this.helpText&&(t?yr(this.helpText):Yr(this.helpText)),this.callbacks.onType(t)},e.prototype.navigateInTree=function(t,r){var i=this.tree.getInput(),o=i?i.entries:[],s=this.tree.getFocus();switch(t){case 18:this.tree.focusNext();break;case 16:this.tree.focusPrevious();break;case 12:this.tree.focusNextPage();break;case 11:this.tree.focusPreviousPage();break;case 2:r?this.tree.focusPrevious():this.tree.focusNext();break}var a=this.tree.getFocus();o.length>1&&s===a&&(t===16||t===2&&r?this.tree.focusLast():(t===18||t===2&&!r)&&this.tree.focusFirst()),a=this.tree.getFocus(),a&&this.tree.reveal(a)},e.prototype.elementFocused=function(t,r){if(!(!t||!this.isVisible())){var i=this.treeElement.getAttribute("aria-activedescendant");i?this.inputElement.setAttribute("aria-activedescendant",i):this.inputElement.removeAttribute("aria-activedescendant");var o={event:r,keymods:this.extractKeyMods(r),quickNavigateConfiguration:this.quickNavigateConfiguration};this.model.runner.run(t,0,o)}},e.prototype.elementSelected=function(t,r,i){var o=!0;if(this.isVisible()){var s=i||1,a={event:r,keymods:this.extractKeyMods(r),quickNavigateConfiguration:this.quickNavigateConfiguration};o=this.model.runner.run(t,s,a)}o&&this.hide(0)},e.prototype.extractKeyMods=function(t){return{ctrlCmd:t&&(t.ctrlKey||t.metaKey||t.payload&&t.payload.originalEvent&&(t.payload.originalEvent.ctrlKey||t.payload.originalEvent.metaKey)),alt:t&&(t.altKey||t.payload&&t.payload.originalEvent&&t.payload.originalEvent.altKey)}},e.prototype.show=function(t,r){this.visible=!0,this.isLoosingFocus=!1,this.quickNavigateConfiguration=r?r.quickNavigateConfiguration:void 0,this.quickNavigateConfiguration?(yr(this.inputContainer),Yr(this.element),this.tree.domFocus()):(Yr(this.inputContainer),Yr(this.element),this.inputBox.focus()),this.helpText&&(this.quickNavigateConfiguration||bu(t)?yr(this.helpText):Yr(this.helpText)),bu(t)?this.doShowWithPrefix(t):(r&&r.value&&this.restoreLastInput(r.value),this.doShowWithInput(t,r&&r.autoFocus?r.autoFocus:{})),r&&r.inputSelection&&!this.quickNavigateConfiguration&&this.inputBox.select(r.inputSelection),this.callbacks.onShow&&this.callbacks.onShow()},e.prototype.restoreLastInput=function(t){this.inputBox.value=t,this.inputBox.select(),this.callbacks.onType(t)},e.prototype.doShowWithPrefix=function(t){this.inputBox.value=t,this.callbacks.onType(t)},e.prototype.doShowWithInput=function(t,r){this.setInput(t,r)},e.prototype.setInputAndLayout=function(t,r){var i=this;this.treeContainer.style.height=this.getHeight(t)+"px",this.tree.setInput(null).then(function(){return i.model=t,i.inputElement.setAttribute("aria-haspopup",String(t&&t.entries&&t.entries.length>0)),i.tree.setInput(t)}).then(function(){i.tree.layout();var o=t?t.entries.filter(function(s){return i.isElementVisible(t,s)}):[];i.updateResultCount(o.length),o.length&&i.autoFocus(t,o,r)})},e.prototype.isElementVisible=function(t,r){return t.filter?t.filter.isVisible(r):!0},e.prototype.autoFocus=function(t,r,i){if(i===void 0&&(i={}),i.autoFocusPrefixMatch){for(var o=void 0,s=void 0,a=i.autoFocusPrefixMatch,u=a.toLowerCase(),l=0,f=r;l<f.length;l++){var h=f[l],d=t.dataSource.getLabel(h)||"";if(!o&&d.indexOf(a)===0?o=h:!s&&d.toLowerCase().indexOf(u)===0&&(s=h),o&&s)break}var g=o||s;if(g){this.tree.setFocus(g),this.tree.reveal(g,.5);return}}i.autoFocusFirstEntry?(this.tree.focusFirst(),this.tree.reveal(this.tree.getFocus())):typeof i.autoFocusIndex=="number"?r.length>i.autoFocusIndex&&(this.tree.focusNth(i.autoFocusIndex),this.tree.reveal(this.tree.getFocus())):i.autoFocusSecondEntry?r.length>1&&this.tree.focusNth(1):i.autoFocusLastEntry&&r.length>1&&this.tree.focusLast()},e.prototype.getHeight=function(t){var r=this,i=t.renderer;if(!t){var o=i.getHeight(null);return this.options.minItemsToShow?this.options.minItemsToShow*o:0}var s=0,a;this.layoutDimensions&&this.layoutDimensions.height&&(a=(this.layoutDimensions.height-50)*.4),(!a||a>e.MAX_ITEMS_HEIGHT)&&(a=e.MAX_ITEMS_HEIGHT);for(var u=t.entries.filter(function(d){return r.isElementVisible(t,d)}),l=this.options.maxItemsToShow||u.length,f=0;f<l&&f<u.length;f++){var h=i.getHeight(u[f]);if(s+h<=a)s+=h;else break}return s},e.prototype.updateResultCount=function(t){this.resultCount.textContent=S({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results",t)},e.prototype.hide=function(t){this.isVisible()&&(this.visible=!1,yr(this.element),this.element.blur(),this.inputBox.value="",this.tree.setInput(null),this.inputElement.setAttribute("aria-haspopup","false"),this.treeContainer.style.height=(this.options.minItemsToShow?this.options.minItemsToShow*22:0)+"px",this.progressBar.stop().hide(),this.tree.isDOMFocused()?this.tree.domBlur():this.inputBox.hasFocus()&&this.inputBox.blur(),t===0?this.callbacks.onOk():this.callbacks.onCancel(),this.callbacks.onHide&&this.callbacks.onHide(t))},e.prototype.setInput=function(t,r,i){this.isVisible()&&(this.getInput()&&this.onInputChanging(),this.setInputAndLayout(t,r),this.inputBox&&this.inputBox.setAriaLabel(i||Cj))},e.prototype.onInputChanging=function(){var t=this;this.inputChangingTimeoutHandle&&(clearTimeout(this.inputChangingTimeoutHandle),this.inputChangingTimeoutHandle=null),de(this.element,"content-changing"),this.inputChangingTimeoutHandle=setTimeout(function(){qe(t.element,"content-changing")},500)},e.prototype.getInput=function(){return this.tree.getInput()},e.prototype.isVisible=function(){return this.visible},e.prototype.layout=function(t){this.layoutDimensions=t;var r=Math.min(this.layoutDimensions.width*.62,e.MAX_WIDTH);this.element&&(this.element.style.width=r+"px",this.element.style.marginLeft="-"+r/2+"px",this.inputContainer.style.width=r-12+"px")},e.prototype.gainingFocus=function(){this.isLoosingFocus=!1},e.prototype.loosingFocus=function(t){var r=this;if(this.isVisible()){var i=t.relatedTarget;!this.quickNavigateConfiguration&&wu(i,this.element)||(this.isLoosingFocus=!0,setTimeout(function(){if(!(!r.isLoosingFocus||r.isDisposed)){var o=r.callbacks.onFocusLost&&r.callbacks.onFocusLost();o||r.hide(1)}},0))}},e.prototype.dispose=function(){n.prototype.dispose.call(this),this.isDisposed=!0},e.MAX_WIDTH=600,e.MAX_ITEMS_HEIGHT=20*22,e}(te),vVe=function(){function n(e,t,r,i,o,s){this.codeEditor=e,this.themeService=s,this.create(t,r,i,o)}return n.prototype.create=function(e,t,r,i){this.domNode=document.createElement("div"),this.quickOpenWidget=new gVe(this.domNode,{onOk:e,onCancel:t,onType:r},{inputPlaceHolder:void 0,inputAriaLabel:i.inputAriaLabel,keyboardSupport:!0}),this.styler=rTe(this.quickOpenWidget,this.themeService,{pickerGroupForeground:dl}),this.quickOpenWidget.create(),this.codeEditor.addOverlayWidget(this)},n.prototype.setInput=function(e,t){this.quickOpenWidget.setInput(e,t)},n.prototype.getId=function(){return n.ID},n.prototype.getDomNode=function(){return this.domNode},n.prototype.destroy=function(){this.codeEditor.removeOverlayWidget(this),this.quickOpenWidget.dispose(),this.styler.dispose()},n.prototype.show=function(e){this.visible=!0;var t=this.codeEditor.getLayoutInfo();t&&this.quickOpenWidget.layout(new hbe(t.width,t.height)),this.quickOpenWidget.show(e),this.codeEditor.layoutOverlayWidget(this)},n.prototype.getPosition=function(){return this.visible?{preference:2}:null},n.ID="editor.contrib.quickOpenEditorWidget",n}(),mVe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_Ve=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},yVe=function(n,e){return function(t,r){e(t,r,n)}},YJ=function(){function n(e,t){this.themeService=t,this.widget=null,this.rangeHighlightDecorationId=null,this.lastKnownEditorSelection=null,this.editor=e}return n.get=function(e){return e.getContribution(n.ID)},n.prototype.getId=function(){return n.ID},n.prototype.dispose=function(){this.widget&&(this.widget.destroy(),this.widget=null)},n.prototype.run=function(e){var t=this;this.widget&&(this.widget.destroy(),this.widget=null);var r=function(i){t.clearDecorations(),i&&t.lastKnownEditorSelection&&(t.editor.setSelection(t.lastKnownEditorSelection),t.editor.revealRangeInCenterIfOutsideViewport(t.lastKnownEditorSelection,0)),t.lastKnownEditorSelection=null,(document.activeElement===document.body||!i)&&t.editor.focus()};this.widget=new vVe(this.editor,function(){return r(!1)},function(){return r(!0)},function(i){t.widget.setInput(e.getModel(i),e.getAutoFocus(i))},{inputAriaLabel:e.inputAriaLabel},this.themeService),this.lastKnownEditorSelection||(this.lastKnownEditorSelection=this.editor.getSelection()),this.widget.show("")},n.prototype.decorateLine=function(e,t){var r=[];this.rangeHighlightDecorationId&&(r.push(this.rangeHighlightDecorationId),this.rangeHighlightDecorationId=null);var i=[{range:e,options:n._RANGE_HIGHLIGHT_DECORATION}],o=t.deltaDecorations(r,i);this.rangeHighlightDecorationId=o[0]},n.prototype.clearDecorations=function(){this.rangeHighlightDecorationId&&(this.editor.deltaDecorations([this.rangeHighlightDecorationId],[]),this.rangeHighlightDecorationId=null)},n.ID="editor.controller.quickOpenController",n._RANGE_HIGHLIGHT_DECORATION=tt.register({className:"rangeHighlight",isWholeLine:!0}),n=_Ve([yVe(1,Ir)],n),n}(),R3=function(n){mVe(e,n);function e(t,r){var i=n.call(this,r)||this;return i._inputAriaLabel=t,i}return e.prototype.getController=function(t){return YJ.get(t)},e.prototype._show=function(t,r){t.run({inputAriaLabel:this._inputAriaLabel,getModel:function(i){return r.getModel(i)},getAutoFocus:function(i){return r.getAutoFocus(i)}})},e}(Ne);tn(YJ);var ZJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bVe=function(n){ZJ(e,n);function e(t,r,i){var o=n.call(this)||this;return o.editor=r,o.decorator=i,o.parseResult=o.parseInput(t),o}return e.prototype.parseInput=function(t){var r=t.split(",").map(function(l){return parseInt(l,10)}).filter(function(l){return!isNaN(l)}),i;r.length===0?i=new $(-1,-1):r.length===1?i=new $(r[0],1):i=new $(r[0],r[1]);var o;if(Su(this.editor))o=this.editor.getModel();else{var s=this.editor.getModel();o=s?s.modified:null}var a=o?o.validatePosition(i).equals(i):!1,u;return a?i.column&&i.column>1?u=Nt(nl.gotoLineLabelValidLineAndColumn,i.lineNumber,i.column):u=Nt(nl.gotoLineLabelValidLine,i.lineNumber):i.lineNumber<1||i.lineNumber>(o?o.getLineCount():0)?u=Nt(nl.gotoLineLabelEmptyWithLineLimit,o?o.getLineCount():0):u=Nt(nl.gotoLineLabelEmptyWithLineAndColumnLimit,o?o.getLineMaxColumn(i.lineNumber):0),{position:i,isValid:a,label:u}},e.prototype.getLabel=function(){return this.parseResult.label},e.prototype.getAriaLabel=function(){var t=this.editor.getPosition(),r=t?t.lineNumber:0;return Nt(nl.gotoLineAriaLabel,r,this.parseResult.label)},e.prototype.run=function(t,r){return t===1?this.runOpen():this.runPreview()},e.prototype.runOpen=function(){if(!this.parseResult.isValid)return!1;var t=this.toSelection();return this.editor.setSelection(t),this.editor.revealRangeInCenter(t,0),this.editor.focus(),!0},e.prototype.runPreview=function(){if(!this.parseResult.isValid)return this.decorator.clearDecorations(),!1;var t=this.toSelection();return this.editor.revealRangeInCenter(t,0),this.decorator.decorateLine(t,this.editor),!1},e.prototype.toSelection=function(){return new R(this.parseResult.position.lineNumber,this.parseResult.position.column,this.parseResult.position.lineNumber,this.parseResult.position.column)},e}(A3),wVe=function(n){ZJ(e,n);function e(){return n.call(this,nl.gotoLineActionInput,{id:"editor.action.gotoLine",label:nl.gotoLineActionLabel,alias:"Go to Line...",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:2085,mac:{primary:293},weight:100}})||this}return e.prototype.run=function(t,r){var i=this;this._show(this.getController(r),{getModel:function(o){return new O3([new bVe(o,r,i.getController(r))])},getAutoFocus:function(o){return{autoFocusFirstEntry:o.length>0}}})},e}(R3);re(wVe);var XJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CVe=function(n){XJ(e,n);function e(t,r,i,o,s){var a=n.call(this)||this;return a.key=t,a.keyAriaLabel=r,a.setHighlights(i),a.action=o,a.editor=s,a}return e.prototype.getLabel=function(){return this.action.label},e.prototype.getAriaLabel=function(){return this.keyAriaLabel?Nt(Yg.ariaLabelEntryWithKey,this.getLabel(),this.keyAriaLabel):Nt(Yg.ariaLabelEntry,this.getLabel())},e.prototype.getGroupLabel=function(){return this.key},e.prototype.run=function(t,r){var i=this;return t===1?(setTimeout(function(){i.editor.focus();try{var o=i.action.run()||Promise.resolve();o.then(void 0,Le)}catch(s){Le(s)}},50),!0):!1},e}(ty),SVe=function(n){XJ(e,n);function e(){return n.call(this,Yg.quickCommandActionInput,{id:"editor.action.quickCommand",label:Yg.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:P.focus,primary:Ro?571:59,weight:100},menuOpts:{group:"z_commands",order:1}})||this}return e.prototype.run=function(t,r){var i=this,o=t.get(er);this._show(this.getController(r),{getModel:function(s){return new O3(i._editorActionsToEntries(o,r,s))},getAutoFocus:function(s){return{autoFocusFirstEntry:!0,autoFocusPrefixMatch:s}}})},e.prototype._sort=function(t,r){var i=(t.getLabel()||"").toLowerCase(),o=(r.getLabel()||"").toLowerCase();return i.localeCompare(o)},e.prototype._editorActionsToEntries=function(t,r,i){for(var o=r.getSupportedActions(),s=[],a=0,u=o;a<u.length;a++){var l=u[a],f=t.lookupKeybinding(l.id);if(l.label){var h=YZ(i,l.label);h&&s.push(new CVe(f&&f.getLabel()||"",f&&f.getAriaLabel()||"",h,l,r))}}return s=s.sort(this._sort),s},e}(R3);re(SVe);var M3=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dg=function(){function n(){}return n.prototype.remove=function(){this.parent&&delete this.parent.children[this.id]},n.findId=function(e,t){var r;typeof e=="string"?r=t.id+"/"+e:(r=t.id+"/"+e.name,t.children[r]!==void 0&&(r=t.id+"/"+e.name+"_"+e.range.startLineNumber+"_"+e.range.startColumn));for(var i=r,o=0;t.children[i]!==void 0;o++)i=r+"_"+o;return i},n.empty=function(e){for(var t in e.children)return!1;return!0},n}(),QJ=function(n){M3(e,n);function e(t,r,i){var o=n.call(this)||this;return o.id=t,o.parent=r,o.symbol=i,o.children=Object.create(null),o}return e}(dg),EVe=function(n){M3(e,n);function e(t,r,i,o){var s=n.call(this)||this;return s.id=t,s.parent=r,s.provider=i,s.providerIndex=o,s.children=Object.create(null),s}return e}(dg),IVe=function(){function n(){this._n=1,this._val=0}return n.prototype.update=function(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this},n}(),xVe=function(n){M3(e,n);function e(t){var r=n.call(this)||this;return r.textModel=t,r.id="root",r.parent=void 0,r._groups=Object.create(null),r.children=Object.create(null),r.id="root",r.parent=void 0,r}return e.create=function(t,r){var i=this,o=this._keys.for(t,!0),s=e._requests.get(o);if(!s){var a=new hd;s={promiseCnt:0,source:a,promise:e._create(t,a.token),model:void 0},e._requests.set(o,s);var u=Date.now();s.promise.then(function(){var l=i._keys.for(t,!1),f=i._requestDurations.get(l);f||(f=new IVe,i._requestDurations.set(l,f)),f.update(Date.now()-u)})}return s.model?Promise.resolve(s.model):(s.promiseCnt+=1,r.onCancellationRequested(function(){--s.promiseCnt===0&&(s.source.cancel(),e._requests.delete(o))}),new Promise(function(l,f){s.promise.then(function(h){s.model=h,l(h)},function(h){e._requests.delete(o),f(h)})}))},e._create=function(t,r){var i=new hd(r),o=new e(t),s=Ic.ordered(t),a=s.map(function(l,f){var h=dg.findId("provider_"+f,o),d=new EVe(h,o,l,f);return Promise.resolve(l.provideDocumentSymbols(o.textModel,i.token)).then(function(g){for(var v=0,m=g||[];v<m.length;v++){var y=m[v];e._makeOutlineElement(y,d)}return d},function(g){return ji(g),d}).then(function(g){dg.empty(g)?g.remove():o._groups[h]=g})}),u=Ic.onDidChange(function(){var l=Ic.ordered(t);hf(l,s)||i.cancel()});return Promise.all(a).then(function(){return i.token.isCancellationRequested&&!r.isCancellationRequested?e._create(t,r):o._compact()}).finally(function(){u.dispose()})},e._makeOutlineElement=function(t,r){var i=dg.findId(t,r),o=new QJ(i,r,t);if(t.children)for(var s=0,a=t.children;s<a.length;s++){var u=a[s];e._makeOutlineElement(u,o)}r.children[o.id]=o},e.prototype._compact=function(){var t=0;for(var r in this._groups){var i=this._groups[r];n9(i.children)===void 0?delete this._groups[r]:t+=1}if(t!==1)this.children=this._groups;else{var i=n9(this._groups);for(var r in i.children){var o=i.children[r];o.parent=this,this.children[o.id]=o}}return this},e._requestDurations=new qg(50,.7),e._requests=new qg(9,.75),e._keys=new(function(){function t(){this._counter=1,this._data=new WeakMap}return t.prototype.for=function(r,i){return r.id+"/"+(i?r.getVersionId():"")+"/"+this._hash(Ic.all(r))},t.prototype._hash=function(r){for(var i="",o=0,s=r;o<s.length;o++){var a=s[o],u=this._data.get(a);typeof u>"u"&&(u=this._counter++,this._data.set(a,u)),i+=u}return i},t}()),e}(dg),DVe=function(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(f){o(f)}}function a(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?i(l.value):new t(function(f){f(l.value)}).then(s,a)}u((r=r.apply(n,e||[])).next())})},LVe=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function UR(n,e,t){return DVe(this,void 0,void 0,function(){var r,i,o,s,a,u;return LVe(this,function(l){switch(l.label){case 0:return[4,xVe.create(n,t)];case 1:for(r=l.sent(),i=[],o=0,s=t9(r.children);o<s.length;o++)a=s[o],a instanceof QJ?i.push(a.symbol):i.push.apply(i,t9(a.children).map(function(f){return f.symbol}));return u=[],t.isCancellationRequested?[2,u]:(e?JJ(u,i,""):u=i,[2,u.sort(kVe)])}})})}function kVe(n,e){return R.compareRangesUsingStarts(n.range,e.range)}function JJ(n,e,t){for(var r=0,i=e;r<i.length;r++){var o=i[r];n.push({kind:o.kind,tags:o.tags,name:o.name,detail:o.detail,containerName:o.containerName||t,range:o.range,selectionRange:o.selectionRange,children:void 0}),o.children&&JJ(n,o.children,o.name)}}Ml("_executeDocumentSymbolProvider",function(n,e){var t=e.resource;if(!(t instanceof bt))throw fr("resource");var r=n.get(yo).getModel(t);return r?UR(r,!1,Ft.None):n.get(pd).createModelReference(t).then(function(i){return new Promise(function(o,s){try{var a=UR(i.object.textEditorModel,!1,Ft.None);o(a)}catch(u){s(u)}}).finally(function(){i.dispose()})})});var eee=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hh=":",TVe=function(n){eee(e,n);function e(t,r,i,o,s,a,u){var l=n.call(this)||this;return l.name=t,l.type=r,l.description=i,l.range=o,l.setHighlights(s),l.editor=a,l.decorator=u,l}return e.prototype.getLabel=function(){return this.name},e.prototype.getAriaLabel=function(){return Nt(Li.entryAriaLabel,this.name)},e.prototype.getIcon=function(){return this.type},e.prototype.getDescription=function(){return this.description},e.prototype.getType=function(){return this.type},e.prototype.getRange=function(){return this.range},e.prototype.run=function(t,r){return t===1?this.runOpen(r):this.runPreview()},e.prototype.runOpen=function(t){var r=this.toSelection();return this.editor.setSelection(r),this.editor.revealRangeInCenter(r,0),this.editor.focus(),!0},e.prototype.runPreview=function(){var t=this.toSelection();return this.editor.revealRangeInCenter(t,0),this.decorator.decorateLine(this.range,this.editor),!1},e.prototype.toSelection=function(){return new R(this.range.startLineNumber,this.range.startColumn||1,this.range.startLineNumber,this.range.startColumn||1)},e}(ty),NVe=function(n){eee(e,n);function e(){return n.call(this,Li.quickOutlineActionInput,{id:"editor.action.quickOutline",label:Li.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:P.hasDocumentSymbolProvider,kbOpts:{kbExpr:P.focus,primary:3117,weight:100},menuOpts:{group:"navigation",order:3}})||this}return e.prototype.run=function(t,r){var i=this;if(r.hasModel()){var o=r.getModel();if(Ic.has(o))return UR(o,!0,Ft.None).then(function(s){s.length!==0&&i._run(r,s)})}},e.prototype._run=function(t,r){var i=this;this._show(this.getController(t),{getModel:function(o){return new O3(i.toQuickOpenEntries(t,r,o))},getAutoFocus:function(o){return o.indexOf(hh)===0&&(o=o.substr(hh.length)),{autoFocusPrefixMatch:o,autoFocusFirstEntry:!!o}}})},e.prototype.symbolEntry=function(t,r,i,o,s,a,u){return new TVe(t,r,i,R.lift(o),s,a,u)},e.prototype.toQuickOpenEntries=function(t,r,i){var o=this.getController(t),s=[],a=i;i.indexOf(hh)===0&&(a=a.substr(hh.length));for(var u=0,l=r;u<l.length;u++){var f=l[u],h=Sbe(f.name),d=YZ(a,h);if(d){var g=void 0;f.containerName&&(g=f.containerName),s.push(this.symbolEntry(h,Awe(f.kind),g,f.range,d,t,o))}}if(i&&(i.indexOf(hh)===0?s=s.sort(this.sortScoped.bind(this,i.toLowerCase())):s=s.sort(this.sortNormal.bind(this,i.toLowerCase()))),s.length>0&&i.indexOf(hh)===0){for(var v=null,m=null,y=0,b=0;b<s.length;b++){var C=s[b];v!==C.getType()?(m&&m.setGroupLabel(this.typeToLabel(v||"",y)),v=C.getType(),m=C,y=1,C.setShowBorder(b>0)):y++}m&&m.setGroupLabel(this.typeToLabel(v||"",y))}else s.length>0&&s[0].setGroupLabel(Nt(Li._symbols_,s.length));return s},e.prototype.typeToLabel=function(t,r){switch(t){case"module":return Nt(Li._modules_,r);case"class":return Nt(Li._class_,r);case"interface":return Nt(Li._interface_,r);case"method":return Nt(Li._method_,r);case"function":return Nt(Li._function_,r);case"property":return Nt(Li._property_,r);case"variable":return Nt(Li._variable_,r);case"var":return Nt(Li._variable2_,r);case"constructor":return Nt(Li._constructor_,r);case"call":return Nt(Li._call_,r)}return t},e.prototype.sortNormal=function(t,r,i){var o=r.getLabel().toLowerCase(),s=i.getLabel().toLowerCase(),a=o.localeCompare(s);if(a!==0)return a;var u=r.getRange(),l=i.getRange();return u.startLineNumber-l.startLineNumber},e.prototype.sortScoped=function(t,r,i){t=t.substr(hh.length);var o=r.getType(),s=i.getType(),a=o.localeCompare(s);if(a!==0)return a;if(t){var u=r.getLabel().toLowerCase(),l=i.getLabel().toLowerCase(),f=u.localeCompare(l);if(f!==0)return f}var h=r.getRange(),d=i.getRange();return h.startLineNumber-d.startLineNumber},e}(R3);re(NVe);var AVe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OVe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jp=function(n,e){return function(t,r){e(t,r,n)}},RVe=function(n){AVe(e,n);function e(t,r,i,o,s,a,u){return n.call(this,!0,t,r,i,o,s,a,u)||this}return e=OVe([jp(1,rt),jp(2,an),jp(3,Hr),jp(4,Hn),jp(5,_f),jp(6,Vr)],e),e}(qv);tn(RVe);var MVe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PVe=function(n){MVe(e,n);function e(){var t=n.call(this,{id:"editor.action.toggleHighContrast",label:zO.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0})||this;return t._originalThemeName=null,t}return e.prototype.run=function(t,r){var i=t.get(Vd);this._originalThemeName?(i.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=i.getTheme().themeName,i.setTheme("hc-black"))},e}(Ne);re(PVe);class kc{constructor({codeEditor:e,widgetId:t,color:r,label:i,range:o,tooltipDuration:s=1e3,opacity:a="1.0",onDisposed:u}){this._editor=e,this._tooltipDuration=s,this._id=`monaco-remote-cursor-${t}`,this._onDisposed=u,this._color=r,this._content=i,this._opacity=a,this._domNode=this._createWidgetNode(),this._scrollListener=this._editor.onDidScrollChange(()=>{this._updateTooltipPosition()}),this.updatePosition(o),this._hideTimer=null,this._editor.addContentWidget(this),this._disposed=!1}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return this._position}updatePosition(e){this._updatePosition(e),setTimeout(()=>this._showTooltip(),0)}updateContent(e){typeof e!="string"||e===this._content||(this._tooltipNode.textContent=e)}dispose(){this._disposed||(this._editor.removeContentWidget(this),this._scrollListener!==null&&this._scrollListener.dispose(),this._disposed=!0,this._onDisposed())}isDisposed(){return this._disposed}_updatePosition(e){this._position={position:e.getEndPosition(),preference:[xg.ContentWidgetPositionPreference.ABOVE,xg.ContentWidgetPositionPreference.BELOW]},this._editor.layoutContentWidget(this)}_showTooltip(){this._updateTooltipPosition(),this._hideTimer!==null?clearTimeout(this._hideTimer):this._setTooltipVisible(!0),this._hideTimer=setTimeout(()=>{this._setTooltipVisible(!1),this._hideTimer=null},this._tooltipDuration)}_updateTooltipPosition(){this._domNode.offsetTop-this._editor.getScrollTop()-this._tooltipNode.offsetHeight<5?this._tooltipNode.style.top=`${this._tooltipNode.offsetHeight+2}px`:this._tooltipNode.style.top=`-${this._tooltipNode.offsetHeight}px`,this._tooltipNode.style.left="0"}_setTooltipVisible(e){e?this._tooltipNode.style.display="block":this._tooltipNode.style.display="none"}_colorWithCSSVars(e){return`var(${`--color-${e}-${kc.WIDGET_NODE_CLASSNAME}`}, ${this._color})`}_getTextColor(){const e=Dye(this._color);return Math.round((e[0]*299+e[1]*587+e[2]*114)/1e3)>=125?"#000000":"#ffffff"}_createTooltipNode(){const e=document.createElement("div");e.style.borderColor=this._colorWithCSSVars("border"),e.style.backgroundColor=this._colorWithCSSVars("bg"),e.style.color=this._getTextColor(),e.style.opacity=this._opacity,e.style.borderRadius="2px",e.style.fontSize="12px",e.style.padding="2px 8px",e.style.whiteSpace="nowrap",e.textContent=this._content;const t=`${kc.TOOLTIP_NODE_CLASSNAME}-${this._color.replace("#","")}`;return e.classList.add(t,kc.TOOLTIP_NODE_CLASSNAME),e}_createWidgetNode(){da(document!=null,"This package must run on browser!");const e=document.createElement("div");return e.style.height="20px",e.style.paddingBottom="0px",e.style.transition="all 0.1s linear",this._tooltipNode=this._createTooltipNode(),e.appendChild(this._tooltipNode),e.classList.add("monaco-editor-overlaymessage",kc.WIDGET_NODE_CLASSNAME),e}}kc.WIDGET_NODE_CLASSNAME="firepad-remote-cursor";kc.TOOLTIP_NODE_CLASSNAME="firepad-remote-cursor-message";class FVe{constructor(e){this._editor=e,this._tooltipDuration=1e3,this._cursors=new Map}addCursor(e,t,r,i){const o=new kc({codeEditor:this._editor,widgetId:e,color:r,range:t,label:i||e.toString(),tooltipDuration:this._tooltipDuration,onDisposed:()=>{this.removeCursor(e)}});this._cursors.set(e,o)}removeCursor(e){const t=this._cursors.get(e);t&&(t.dispose(),this._cursors.delete(e))}updateCursor(e,t,r,i){const o=this._cursors.get(e);if(o){o.updatePosition(t),o.updateContent(i);return}this.addCursor(e,t,r,i)}dispose(){this._cursors.forEach(e=>e.dispose()),this._cursors.clear()}}class BVe{constructor(e,t=!0){var r;this._classNames=[],this._disposables=[],this._monaco=e,this._lastDocLines=((r=this._monaco.getModel())===null||r===void 0?void 0:r.getLinesContent())||[""],this._lastCursorRange=this._monaco.getSelection(),this._remoteCursors=new Map,this._cursorWidgetController=new FVe(this._monaco),this._redoCallback=null,this._undoCallback=null,this._originalRedo=null,this._originalUndo=null,this._ignoreChanges=!1,t||this._init()}_init(){this._emitter=new W0([Di.Blur,Di.Change,Di.CursorActivity,Di.Error,Di.Focus,Di.Redo,Di.Undo]),this._disposables.push(this._cursorWidgetController,this._monaco.onDidBlurEditorWidget(()=>{this._onBlur()}),this._monaco.onDidFocusEditorWidget(()=>{this._onFocus()}),this._monaco.onDidChangeModel(e=>{this._onModelChange(e)}),this._monaco.onDidChangeModelContent(e=>{this._onChange(e)}),this._monaco.onDidChangeCursorPosition(e=>{this._onCursorActivity(e)}))}dispose(){this._remoteCursors.clear(),this._disposables.forEach(t=>t.dispose()),this._disposables.splice(0,this._disposables.length),this._emitter&&(this._emitter.dispose(),this._emitter=null);const e=this._getModel();e&&(e.undo!==this._originalUndo&&(e.undo=this._originalUndo),e.redo!==this._originalRedo&&(e.redo=this._originalRedo),this._originalUndo=null,this._originalRedo=null)}_getModel(){return this._monaco.getModel()}registerUndo(e){const t=this._getModel();t&&(this._originalUndo=t.undo,t.undo=this._undoCallback=e)}registerRedo(e){const t=this._getModel();t&&(this._originalRedo=t.redo,t.redo=this._redoCallback=e)}on(e,t){var r;return(r=this._emitter)===null||r===void 0?void 0:r.on(e,t)}off(e,t){var r;return(r=this._emitter)===null||r===void 0?void 0:r.off(e,t)}registerCallbacks(e){Object.entries(e).forEach(([t,r])=>{this.on(t,r)})}_trigger(e,t,...r){var i;return(i=this._emitter)===null||i===void 0?void 0:i.trigger(e,t||{},...r)}getCursor(){const e=this._getModel();if(!e)return null;let t=this._monaco.getSelection();t==null&&(t=this._lastCursorRange);const r=t.getStartPosition(),i=t.getEndPosition();let o=e.getOffsetAt(r),s=e.getOffsetAt(i);return o>s&&([o,s]=[s,o]),new nP(o,s)}setCursor(e){const{position:t,selectionEnd:r}=e.toJSON(),i=this._getModel();if(!i)return;let o=i.getPositionAt(t),s=i.getPositionAt(r);t>r&&([o,s]=[s,o]),this._monaco.setSelection(new u_(o.lineNumber,o.column,s.lineNumber,s.column))}setOtherCursor(e,t,r,i){da(typeof t=="object"&&typeof t.toJSON=="function"&&typeof r=="string"&&(typeof e=="string"||typeof e=="number")&&!!r.match(/^#[a-fA-F0-9]{3,6}$/));const{position:o,selectionEnd:s}=t.toJSON();Oh(o<0||s<0);let a=this._remoteCursors.get(e);a?a.decoration=this._monaco.deltaDecorations(a.decoration,[]):(a={clientID:e,decoration:[]},this._remoteCursors.set(e,a));let u=r,l=`remote-client-selection-${r.replace("#","")}`;o===s&&(u="transparent",l=l.replace("selection","cursor")),this._addStyleRule(l,u,r);const f=this._getModel();if(!f)return{dispose:OA};let h=f.getPositionAt(o),d=f.getPositionAt(s);h>d&&([h,d]=[d,h]);const g=new u_(h.lineNumber,h.column,d.lineNumber,d.column);return a.decoration=this._monaco.deltaDecorations(a.decoration,[{range:g,options:{className:l,isWholeLine:!1,stickiness:xg.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}]),this._cursorWidgetController.updateCursor(e,g,r,i),{dispose:()=>{const v=this._remoteCursors.get(e);v&&(v.decoration=this._monaco.deltaDecorations(v.decoration,[]))}}}getText(){const e=this._getModel();return e?e.getValue():""}setText(e){const t=this._getModel();t&&t.applyEdits([{range:t.getFullModelRange(),text:e}])}setInitiated(e){this.setText(""),this._initiated=e}_getPreviousContentInRange(e){const t=this._getModel(),r=t?t.getEOL():RA.LF;if(!e)return this._lastDocLines.join(r);if(e.isEmpty())return"";let i="";const{startLineNumber:o,startColumn:s,endLineNumber:a,endColumn:u}=e;for(let l=o;l<=a;l++){const f=this._lastDocLines[l-1];if(l===o){if(l===a)return f.slice(s-1,u-1);i+=f.slice(s-1)+r}else l===a?i+=f.slice(0,u-1):i+=f+r}return i}_transformOpsIntoMonacoChanges(e,t){let r=0;const i=[];for(const o of e){if(o.isRetain()){r+=o.chars;continue}if(o.isInsert()){const s=t.getPositionAt(r);i.push({range:new u_(s.lineNumber,s.column,s.lineNumber,s.column),text:o.text,forceMoveMarkers:!0});continue}if(o.isDelete()){const s=t.getPositionAt(r),a=t.getPositionAt(r+o.chars);i.push({range:new u_(s.lineNumber,s.column,a.lineNumber,a.column),text:"",forceMoveMarkers:!0}),r+=o.chars}}return i}_applyChangesToMonaco(e){let t;typeof this._monaco.getConfiguration=="function"?{readOnly:t}=this._monaco.getConfiguration():t=this._monaco.getOption(xg.EditorOption.readOnly),t&&this._monaco.updateOptions({readOnly:!1}),this._monaco.executeEdits("firepad",e),t&&this._monaco.updateOptions({readOnly:t})}applyOperation(e){e.isNoop()||(this._ignoreChanges=!0);const t=this._getModel();if(!t)return;const r=this._transformOpsIntoMonacoChanges(e.getOps(),t);r.length&&this._applyChangesToMonaco(r),t&&(this._lastDocLines=t.getLinesContent()),this._ignoreChanges=!1}invertOperation(e){return e.invert(this.getText())}_onBlur(){const e=this._monaco.getSelection();(!e||e.isEmpty())&&this._trigger(Di.Blur)}_onFocus(){this._trigger(Di.Focus)}_onCursorActivity(e){e.reason!==xg.CursorChangeReason.RecoverFromMarkers&&this._trigger(Di.CursorActivity)}_onChange(e){if(this._ignoreChanges||!this._initiated)return;const t=this._getModel(),i=this._getPreviousContentInRange().length;if(!e.changes||e.changes.length===0){const a=new Ge().retain(i,null);this._trigger(Di.Change,a,a);return}const[o,s]=this._operationFromMonacoChange(e.changes,i);this._lastDocLines=t.getLinesContent(),this._trigger(Di.Change,o,s)}_onModelChange(e){const t=this._getModel();if(!t)return;this._undoCallback&&(this._originalUndo=t.undo,t.undo=this._undoCallback),this._redoCallback&&(this._originalRedo=t.redo,t.redo=this._redoCallback);const r=this._lastDocLines.length,i=this._lastDocLines[r-1].length,o=new u_(1,1,r,i+1),s=this._getPreviousContentInRange();this._onChange({changes:[{range:o,rangeOffset:0,rangeLength:s.length,text:t.getValue()}]})}_operationFromMonacoChange(e,t){let r=new Ge().retain(t,null),i=new Ge().retain(t,null),o=0;const s=e.sort((a,u)=>u.rangeOffset-a.rangeOffset);for(const a of s){let u=new Ge,l=new Ge;const{range:f,text:h,rangeOffset:d,rangeLength:g}=a,v=t-d-g+o;try{u=u.retain(d,null),l=l.retain(d,null)}catch(m){throw this._trigger(Di.Error,m,u.toString(),{rangeOffset:d}),m}!h&&!f.isEmpty()?(u=u.delete(g),l=l.insert(this._getPreviousContentInRange(f),null)):h&&!f.isEmpty()?(u=u.delete(g).insert(h,null),l=l.insert(this._getPreviousContentInRange(f),null).delete(h)):(u=u.insert(h,null),l=l.delete(h));try{u=u.retain(v,null),l=l.retain(v,null)}catch(m){throw this._trigger(Di.Error,m,u.toString(),{restLength:v}),m}o=o+h.length-g,r=r.compose(u),i=l.compose(i)}return[r,i]}_getStyles(e,t,r){return`
      .${e} {
        position: relative;
        background-color: ${t};
        border-left: 2px solid ${r};
      }
    `}_addStyleRule(e,t,r){if(da(document!=null,"This package must run on browser!"),this._classNames.includes(e))return;const i=this._getStyles(e,t,r),o=document.createTextNode(i),s=document.createElement("style");s.appendChild(o),document.head.appendChild(s),this._classNames.push(e)}}function WVe(n,e,t={}){const r=t.userId||Vye(),i=t.userColor||kye(r.toString()),o=t.userName||r.toString(),s=t.defaultText||e.getValue();let a=new XE(n,r,i,o);const u=new BVe(e,!1);return new qP(a,u,{userId:r,userName:o,userColor:i,defaultText:s})}function VVe(n,e,t={}){return WVe(n,e,t)}(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){c!=Array.prototype&&c!=Object.prototype&&(c[p]=_.value)};function t(c){c=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,c];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}return globalThis}var r=t(this);function i(c,p){if(p){var _=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var x=c[w];x in _||(_[x]={}),_=_[x]}c=c[c.length-1],w=_[c],p=p(w),p!=w&&p!=null&&e(_,c,{configurable:!0,writable:!0,value:p})}}function o(c){var p=0;return function(){return p<c.length?{done:!1,value:c[p++]}:{done:!0}}}function s(c){var p=typeof Symbol<"u"&&Symbol.iterator&&c[Symbol.iterator];return p?p.call(c):{next:o(c)}}i("Promise",function(c){function p(O){this.b=0,this.c=void 0,this.a=[];var B=this.f();try{O(B.resolve,B.reject)}catch(Q){B.reject(Q)}}function _(){this.a=null}function w(O){return O instanceof p?O:new p(function(B){B(O)})}if(c)return c;_.prototype.b=function(O){if(this.a==null){this.a=[];var B=this;this.c(function(){B.g()})}this.a.push(O)};var x=r.setTimeout;_.prototype.c=function(O){x(O,0)},_.prototype.g=function(){for(;this.a&&this.a.length;){var O=this.a;this.a=[];for(var B=0;B<O.length;++B){var Q=O[B];O[B]=null;try{Q()}catch(oe){this.f(oe)}}}this.a=null},_.prototype.f=function(O){this.c(function(){throw O})},p.prototype.f=function(){function O(oe){return function(ot){Q||(Q=!0,oe.call(B,ot))}}var B=this,Q=!1;return{resolve:O(this.m),reject:O(this.g)}},p.prototype.m=function(O){if(O===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(O instanceof p)this.s(O);else{e:switch(typeof O){case"object":var B=O!=null;break e;case"function":B=!0;break e;default:B=!1}B?this.v(O):this.h(O)}},p.prototype.v=function(O){var B=void 0;try{B=O.then}catch(Q){this.g(Q);return}typeof B=="function"?this.u(B,O):this.h(O)},p.prototype.g=function(O){this.i(2,O)},p.prototype.h=function(O){this.i(1,O)},p.prototype.i=function(O,B){if(this.b!=0)throw Error("Cannot settle("+O+", "+B+"): Promise already settled in state"+this.b);this.b=O,this.c=B,this.l()},p.prototype.l=function(){if(this.a!=null){for(var O=0;O<this.a.length;++O)N.b(this.a[O]);this.a=null}};var N=new _;return p.prototype.s=function(O){var B=this.f();O.Ra(B.resolve,B.reject)},p.prototype.u=function(O,B){var Q=this.f();try{O.call(B,Q.resolve,Q.reject)}catch(oe){Q.reject(oe)}},p.prototype.then=function(O,B){function Q(qt,Ur){return typeof qt=="function"?function(Uu){try{oe(qt(Uu))}catch(gk){ot(gk)}}:Ur}var oe,ot,un=new p(function(qt,Ur){oe=qt,ot=Ur});return this.Ra(Q(O,oe),Q(B,ot)),un},p.prototype.catch=function(O){return this.then(void 0,O)},p.prototype.Ra=function(O,B){function Q(){switch(oe.b){case 1:O(oe.c);break;case 2:B(oe.c);break;default:throw Error("Unexpected state: "+oe.b)}}var oe=this;this.a==null?N.b(Q):this.a.push(Q)},p.resolve=w,p.reject=function(O){return new p(function(B,Q){Q(O)})},p.race=function(O){return new p(function(B,Q){for(var oe=s(O),ot=oe.next();!ot.done;ot=oe.next())w(ot.value).Ra(B,Q)})},p.all=function(O){var B=s(O),Q=B.next();return Q.done?w([]):new p(function(oe,ot){function un(Uu){return function(gk){qt[Uu]=gk,Ur--,Ur==0&&oe(qt)}}var qt=[],Ur=0;do qt.push(void 0),Ur++,w(Q.value).Ra(un(qt.length-1),ot),Q=B.next();while(!Q.done)})},p});var a=a||{},u=this||self,l=/^[\w+/_-]+[=]{0,2}$/,f=null;function h(c){return(c=c.querySelector&&c.querySelector("script[nonce]"))&&(c=c.nonce||c.getAttribute("nonce"))&&l.test(c)?c:""}function d(){}function g(c){var p=typeof c;return p!="object"?p:c?Array.isArray(c)?"array":p:"null"}function v(c){var p=g(c);return p=="array"||p=="object"&&typeof c.length=="number"}function m(c){return g(c)=="function"}function y(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function b(c){return Object.prototype.hasOwnProperty.call(c,C)&&c[C]||(c[C]=++E)}var C="closure_uid_"+(1e9*Math.random()>>>0),E=0;function D(c,p,_){return c.call.apply(c.bind,arguments)}function k(c,p,_){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,w),c.apply(p,x)}}return function(){return c.apply(p,arguments)}}function I(c,p,_){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I=D:I=k,I.apply(null,arguments)}function T(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function A(c,p){function _(){}_.prototype=p.prototype,c.bb=p.prototype,c.prototype=new _,c.prototype.constructor=c}function M(c){return c}function L(c,p,_){this.code=W+c,this.message=p||z[c]||"",this.a=_||null}A(L,Error),L.prototype.w=function(){var c={code:this.code,message:this.message};return this.a&&(c.serverResponse=this.a),c},L.prototype.toJSON=function(){return this.w()};function F(c){var p=c&&c.code;return p?new L(p.substring(W.length),c.message,c.serverResponse):null}var W="auth/",z={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},K={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function X(c){for(var p in K)if(K[p].id===c)return c=K[p],{firebaseEndpoint:c.Ua,secureTokenEndpoint:c.$a,identityPlatformEndpoint:c.Xa};return null}var se;se=X("__EID__")?"__EID__":void 0;function we(c){if(!c)return!1;try{return!!c.$goog_Thenable}catch{return!1}}function ae(c){if(Error.captureStackTrace)Error.captureStackTrace(this,ae);else{var p=Error().stack;p&&(this.stack=p)}c&&(this.message=String(c))}A(ae,Error),ae.prototype.name="CustomError";function Dt(c,p){c=c.split("%s");for(var _="",w=c.length-1,x=0;x<w;x++)_+=c[x]+(x<p.length?p[x]:"%s");ae.call(this,_+c[w])}A(Dt,ae),Dt.prototype.name="AssertionError";function At(c,p){throw new Dt("Failure"+(c?": "+c:""),Array.prototype.slice.call(arguments,1))}function $n(c,p){this.c=c,this.f=p,this.b=0,this.a=null}$n.prototype.get=function(){if(0<this.b){this.b--;var c=this.a;this.a=c.next,c.next=null}else c=this.c();return c};function pr(c,p){c.f(p),100>c.b&&(c.b++,p.next=c.a,c.a=p)}function yn(){this.b=this.a=null}var Si=new $n(function(){return new zo},function(c){c.reset()});yn.prototype.add=function(c,p){var _=Si.get();_.set(c,p),this.b?this.b.next=_:this.a=_,this.b=_};function Hx(){var c=WB,p=null;return c.a&&(p=c.a,c.a=c.a.next,c.a||(c.b=null),p.next=null),p}function zo(){this.next=this.b=this.a=null}zo.prototype.set=function(c,p){this.a=c,this.b=p,this.next=null},zo.prototype.reset=function(){this.next=this.b=this.a=null};var kf=Array.prototype.indexOf?function(c,p){return Array.prototype.indexOf.call(c,p,void 0)}:function(c,p){if(typeof c=="string")return typeof p!="string"||p.length!=1?-1:c.indexOf(p,0);for(var _=0;_<c.length;_++)if(_ in c&&c[_]===p)return _;return-1},bn=Array.prototype.forEach?function(c,p,_){Array.prototype.forEach.call(c,p,_)}:function(c,p,_){for(var w=c.length,x=typeof c=="string"?c.split(""):c,N=0;N<w;N++)N in x&&p.call(_,x[N],N,c)};function Tb(c,p){for(var _=typeof c=="string"?c.split(""):c,w=c.length-1;0<=w;--w)w in _&&p.call(void 0,_[w],w,c)}var Tf=Array.prototype.filter?function(c,p){return Array.prototype.filter.call(c,p,void 0)}:function(c,p){for(var _=c.length,w=[],x=0,N=typeof c=="string"?c.split(""):c,O=0;O<_;O++)if(O in N){var B=N[O];p.call(void 0,B,O,c)&&(w[x++]=B)}return w},Nf=Array.prototype.map?function(c,p){return Array.prototype.map.call(c,p,void 0)}:function(c,p){for(var _=c.length,w=Array(_),x=typeof c=="string"?c.split(""):c,N=0;N<_;N++)N in x&&(w[N]=p.call(void 0,x[N],N,c));return w},Nb=Array.prototype.some?function(c,p){return Array.prototype.some.call(c,p,void 0)}:function(c,p){for(var _=c.length,w=typeof c=="string"?c.split(""):c,x=0;x<_;x++)if(x in w&&p.call(void 0,w[x],x,c))return!0;return!1};function H(c){e:{for(var p=Poe,_=c.length,w=typeof c=="string"?c.split(""):c,x=0;x<_;x++)if(x in w&&p.call(void 0,w[x],x,c)){p=x;break e}p=-1}return 0>p?null:typeof c=="string"?c.charAt(p):c[p]}function q(c,p){return 0<=kf(c,p)}function J(c,p){p=kf(c,p);var _;return(_=0<=p)&&Array.prototype.splice.call(c,p,1),_}function ne(c,p){var _=0;Tb(c,function(w,x){p.call(void 0,w,x,c)&&Array.prototype.splice.call(c,x,1).length==1&&_++})}function ue(c){return Array.prototype.concat.apply([],arguments)}function pe(c){var p=c.length;if(0<p){for(var _=Array(p),w=0;w<p;w++)_[w]=c[w];return _}return[]}var xe=String.prototype.trim?function(c){return c.trim()}:function(c){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(c)[1]},ve=/&/g,ye=/</g,fe=/>/g,Te=/"/g,Qe=/'/g,Ke=/\x00/g,it=/[\x00&<>"']/;function Me(c,p){return c.indexOf(p)!=-1}function zt(c,p){return c<p?-1:c>p?1:0}var Qt;e:{var tr=u.navigator;if(tr){var Co=tr.userAgent;if(Co){Qt=Co;break e}}Qt=""}function In(c){return Me(Qt,c)}function am(c,p){for(var _ in c)p.call(void 0,c[_],_,c)}function qo(c){for(var p in c)return!1;return!0}function Gs(c){var p={},_;for(_ in c)p[_]=c[_];return p}var Ei="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kn(c,p){for(var _,w,x=1;x<arguments.length;x++){w=arguments[x];for(_ in w)c[_]=w[_];for(var N=0;N<Ei.length;N++)_=Ei[N],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function um(c,p){e:{try{var _=c&&c.ownerDocument,w=_&&(_.defaultView||_.parentWindow);if(w=w||u,w.Element&&w.Location){var x=w;break e}}catch{}x=null}if(x&&typeof x[p]<"u"&&(!c||!(c instanceof x[p])&&(c instanceof x.Location||c instanceof x.Element))){if(y(c))try{var N=c.constructor.displayName||c.constructor.name||Object.prototype.toString.call(c)}catch{N="<object could not be stringified>"}else N=c===void 0?"undefined":c===null?"null":typeof c;At("Argument is not a %s (or a non-Element, non-Location mock); got: %s",p,N)}}function Pa(c,p){this.a=c===Ab&&p||"",this.b=bB}Pa.prototype.ta=!0,Pa.prototype.sa=function(){return this.a},Pa.prototype.toString=function(){return"Const{"+this.a+"}"};function Ux(c){return c instanceof Pa&&c.constructor===Pa&&c.b===bB?c.a:(At("expected object of type Const, got '"+c+"'"),"type_error:Const")}var bB={},Ab={},Ob;function wB(){if(Ob===void 0){var c=null,p=u.trustedTypes;if(p&&p.createPolicy){try{c=p.createPolicy("goog#html",{createHTML:M,createScript:M,createScriptURL:M})}catch(_){u.console&&u.console.error(_.message)}Ob=c}else Ob=c}return Ob}function rp(c,p){this.a=p===SB?c:""}rp.prototype.ta=!0,rp.prototype.sa=function(){return this.a.toString()},rp.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function CB(c){return c instanceof rp&&c.constructor===rp?c.a:(At("expected object of type TrustedResourceUrl, got '"+c+"' of type "+g(c)),"type_error:TrustedResourceUrl")}function jx(c,p){var _=Ux(c);if(!hie.test(_))throw Error("Invalid TrustedResourceUrl format: "+_);return c=_.replace(fie,function(w,x){if(!Object.prototype.hasOwnProperty.call(p,x))throw Error('Found marker, "'+x+'", in format string, "'+_+'", but no valid label mapping found in args: '+JSON.stringify(p));return w=p[x],w instanceof Pa?Ux(w):encodeURIComponent(String(w))}),die(c)}var fie=/%{(\w+)}/g,hie=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,SB={};function die(c){var p=wB();return c=p?p.createScriptURL(c):c,new rp(c,SB)}function So(c,p){this.a=p===lm?c:""}So.prototype.ta=!0,So.prototype.sa=function(){return this.a.toString()},So.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Rb(c){return c instanceof So&&c.constructor===So?c.a:(At("expected object of type SafeUrl, got '"+c+"' of type "+g(c)),"type_error:SafeUrl")}var pie=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,gie=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,EB=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function IB(c){if(c instanceof So)return c;if(c=typeof c=="object"&&c.ta?c.sa():String(c),EB.test(c))c=new So(c,lm);else{c=String(c),c=c.replace(/(%0A|%0D)/g,"");var p=c.match(gie);c=p&&pie.test(p[1])?new So(c,lm):null}return c}function xB(c){return c instanceof So?c:(c=typeof c=="object"&&c.ta?c.sa():String(c),EB.test(c)||(c="about:invalid#zClosurez"),new So(c,lm))}var lm={},DB=new So("about:invalid#zClosurez",lm);function ip(c,p,_){this.a=_===LB?c:""}ip.prototype.ta=!0,ip.prototype.sa=function(){return this.a.toString()},ip.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function vie(c){return c instanceof ip&&c.constructor===ip?c.a:(At("expected object of type SafeHtml, got '"+c+"' of type "+g(c)),"type_error:SafeHtml")}var LB={};function mie(c,p){um(c,"HTMLScriptElement"),c.src=CB(p),(p=c.ownerDocument&&c.ownerDocument.defaultView)&&p!=u?p=h(p.document):(f===null&&(f=h(u.document)),p=f),p&&c.setAttribute("nonce",p)}function kB(c,p,_,w){return c=c instanceof So?c:xB(c),p=p||u,_=_ instanceof Pa?Ux(_):_||"",p.open(Rb(c),_,w,void 0)}function TB(c,p){for(var _=c.split("%s"),w="",x=Array.prototype.slice.call(arguments,1);x.length&&1<_.length;)w+=_.shift()+x.shift();return w+_.join("%s")}function zx(c){return it.test(c)&&(c.indexOf("&")!=-1&&(c=c.replace(ve,"&amp;")),c.indexOf("<")!=-1&&(c=c.replace(ye,"&lt;")),c.indexOf(">")!=-1&&(c=c.replace(fe,"&gt;")),c.indexOf('"')!=-1&&(c=c.replace(Te,"&quot;")),c.indexOf("'")!=-1&&(c=c.replace(Qe,"&#39;")),c.indexOf("\0")!=-1&&(c=c.replace(Ke,"&#0;"))),c}function qx(c){return qx[" "](c),c}qx[" "]=d;function _ie(c,p){var _=Cie;return Object.prototype.hasOwnProperty.call(_,c)?_[c]:_[c]=p(c)}var yie=In("Opera"),Ys=In("Trident")||In("MSIE"),NB=In("Edge"),bie=NB||Ys,AB=In("Gecko")&&!(Me(Qt.toLowerCase(),"webkit")&&!In("Edge"))&&!(In("Trident")||In("MSIE"))&&!In("Edge"),wie=Me(Qt.toLowerCase(),"webkit")&&!In("Edge");function OB(){var c=u.document;return c?c.documentMode:void 0}var Mb;e:{var $x="",Kx=function(){var c=Qt;if(AB)return/rv:([^\);]+)(\)|;)/.exec(c);if(NB)return/Edge\/([\d\.]+)/.exec(c);if(Ys)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(c);if(wie)return/WebKit\/(\S+)/.exec(c);if(yie)return/(?:Version)[ \/]?(\S+)/.exec(c)}();if(Kx&&($x=Kx?Kx[1]:""),Ys){var Gx=OB();if(Gx!=null&&Gx>parseFloat($x)){Mb=String(Gx);break e}}Mb=$x}var Cie={};function RB(c){return _ie(c,function(){for(var p=0,_=xe(String(Mb)).split("."),w=xe(String(c)).split("."),x=Math.max(_.length,w.length),N=0;p==0&&N<x;N++){var O=_[N]||"",B=w[N]||"";do{if(O=/(\d*)(\D*)(.*)/.exec(O)||["","","",""],B=/(\d*)(\D*)(.*)/.exec(B)||["","","",""],O[0].length==0&&B[0].length==0)break;p=zt(O[1].length==0?0:parseInt(O[1],10),B[1].length==0?0:parseInt(B[1],10))||zt(O[2].length==0,B[2].length==0)||zt(O[2],B[2]),O=O[3],B=B[3]}while(p==0)}return 0<=p})}var Yx;if(u.document&&Ys){var MB=OB();Yx=MB||parseInt(Mb,10)||void 0}else Yx=void 0;var Wl=Yx;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var Sie=!Ys||9<=Number(Wl);function cm(c){var p=document;return typeof c=="string"?p.getElementById(c):c}function PB(c,p){am(p,function(_,w){_&&typeof _=="object"&&_.ta&&(_=_.sa()),w=="style"?c.style.cssText=_:w=="class"?c.className=_:w=="for"?c.htmlFor=_:FB.hasOwnProperty(w)?c.setAttribute(FB[w],_):w.lastIndexOf("aria-",0)==0||w.lastIndexOf("data-",0)==0?c.setAttribute(w,_):c[w]=_})}var FB={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Eie(c,p,_){var w=arguments,x=document,N=String(w[0]),O=w[1];if(!Sie&&O&&(O.name||O.type)){if(N=["<",N],O.name&&N.push(' name="',zx(O.name),'"'),O.type){N.push(' type="',zx(O.type),'"');var B={};kn(B,O),delete B.type,O=B}N.push(">"),N=N.join("")}return N=Pb(x,N),O&&(typeof O=="string"?N.className=O:Array.isArray(O)?N.className=O.join(" "):PB(N,O)),2<w.length&&Iie(x,N,w),N}function Iie(c,p,_){function w(B){B&&p.appendChild(typeof B=="string"?c.createTextNode(B):B)}for(var x=2;x<_.length;x++){var N=_[x];if(!v(N)||y(N)&&0<N.nodeType)w(N);else{e:{if(N&&typeof N.length=="number"){if(y(N)){var O=typeof N.item=="function"||typeof N.item=="string";break e}if(m(N)){O=typeof N.item=="function";break e}}O=!1}bn(O?pe(N):N,w)}}}function Pb(c,p){return p=String(p),c.contentType==="application/xhtml+xml"&&(p=p.toLowerCase()),c.createElement(p)}function BB(c){u.setTimeout(function(){throw c},0)}var Zx;function xie(){var c=u.MessageChannel;if(typeof c>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!In("Presto")&&(c=function(){var x=Pb(document,"IFRAME");x.style.display="none",document.documentElement.appendChild(x);var N=x.contentWindow;x=N.document,x.open(),x.close();var O="callImmediate"+Math.random(),B=N.location.protocol=="file:"?"*":N.location.protocol+"//"+N.location.host;x=I(function(Q){(B=="*"||Q.origin==B)&&Q.data==O&&this.port1.onmessage()},this),N.addEventListener("message",x,!1),this.port1={},this.port2={postMessage:function(){N.postMessage(O,B)}}}),typeof c<"u"&&!In("Trident")&&!In("MSIE")){var p=new c,_={},w=_;return p.port1.onmessage=function(){if(_.next!==void 0){_=_.next;var x=_.Hb;_.Hb=null,x()}},function(x){w.next={Hb:x},w=w.next,p.port2.postMessage(0)}}return function(x){u.setTimeout(x,0)}}function Fb(c,p){Bb||Die(),Xx||(Bb(),Xx=!0),WB.add(c,p)}var Bb;function Die(){if(u.Promise&&u.Promise.resolve){var c=u.Promise.resolve(void 0);Bb=function(){c.then(VB)}}else Bb=function(){var p=VB;!m(u.setImmediate)||u.Window&&u.Window.prototype&&!In("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(Zx||(Zx=xie()),Zx(p)):u.setImmediate(p)}}var Xx=!1,WB=new yn;function VB(){for(var c;c=Hx();){try{c.a.call(c.b)}catch(p){BB(p)}pr(Si,c)}Xx=!1}function kt(c,p){if(this.a=Af,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,c!=d)try{var _=this;c.call(p,function(w){Of(_,fm,w)},function(w){if(!(w instanceof op))try{throw w instanceof Error?w:Error("Promise rejected.")}catch{}Of(_,Bu,w)})}catch(w){Of(this,Bu,w)}}var Af=0,fm=2,Bu=3;function HB(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}HB.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var UB=new $n(function(){return new HB},function(c){c.reset()});function Qx(c,p,_){var w=UB.get();return w.g=c,w.b=p,w.f=_,w}function Xe(c){if(c instanceof kt)return c;var p=new kt(d);return Of(p,fm,c),p}function Mn(c){return new kt(function(p,_){_(c)})}function jB(c,p,_){KB(c,p,_,null)||Fb(T(p,c))}function Lie(c){return new kt(function(p,_){var w=c.length,x=[];if(w)for(var N=function(oe,ot){w--,x[oe]=ot,w==0&&p(x)},O=function(oe){_(oe)},B=0,Q;B<c.length;B++)Q=c[B],jB(Q,T(N,B),O);else p(x)})}function zB(c){return new kt(function(p){var _=c.length,w=[];if(_)for(var x=function(B,Q,oe){_--,w[B]=Q?{Qb:!0,value:oe}:{Qb:!1,reason:oe},_==0&&p(w)},N=0,O;N<c.length;N++)O=c[N],jB(O,T(x,N,!0),T(x,N,!1));else p(w)})}kt.prototype.then=function(c,p,_){return $B(this,m(c)?c:null,m(p)?p:null,_)},kt.prototype.$goog_Thenable=!0,n=kt.prototype,n.oa=function(c,p){return c=Qx(c,c,p),c.c=!0,Jx(this,c),this},n.o=function(c,p){return $B(this,null,c,p)},n.cancel=function(c){if(this.a==Af){var p=new op(c);Fb(function(){qB(this,p)},this)}};function qB(c,p){if(c.a==Af)if(c.c){var _=c.c;if(_.b){for(var w=0,x=null,N=null,O=_.b;O&&(O.c||(w++,O.a==c&&(x=O),!(x&&1<w)));O=O.next)x||(N=O);x&&(_.a==Af&&w==1?qB(_,p):(N?(w=N,w.next==_.f&&(_.f=w),w.next=w.next.next):YB(_),ZB(_,x,Bu,p)))}c.c=null}else Of(c,Bu,p)}function Jx(c,p){c.b||c.a!=fm&&c.a!=Bu||GB(c),c.f?c.f.next=p:c.b=p,c.f=p}function $B(c,p,_,w){var x=Qx(null,null,null);return x.a=new kt(function(N,O){x.g=p?function(B){try{var Q=p.call(w,B);N(Q)}catch(oe){O(oe)}}:N,x.b=_?function(B){try{var Q=_.call(w,B);Q===void 0&&B instanceof op?O(B):N(Q)}catch(oe){O(oe)}}:O}),x.a.c=c,Jx(c,x),x.a}n.$c=function(c){this.a=Af,Of(this,fm,c)},n.ad=function(c){this.a=Af,Of(this,Bu,c)};function Of(c,p,_){c.a==Af&&(c===_&&(p=Bu,_=new TypeError("Promise cannot resolve to itself")),c.a=1,KB(_,c.$c,c.ad,c)||(c.i=_,c.a=p,c.c=null,GB(c),p!=Bu||_ instanceof op||Tie(c,_)))}function KB(c,p,_,w){if(c instanceof kt)return Jx(c,Qx(p||d,_||null,w)),!0;if(we(c))return c.then(p,_,w),!0;if(y(c))try{var x=c.then;if(m(x))return kie(c,x,p,_,w),!0}catch(N){return _.call(w,N),!0}return!1}function kie(c,p,_,w,x){function N(Q){B||(B=!0,w.call(x,Q))}function O(Q){B||(B=!0,_.call(x,Q))}var B=!1;try{p.call(c,O,N)}catch(Q){N(Q)}}function GB(c){c.h||(c.h=!0,Fb(c.gc,c))}function YB(c){var p=null;return c.b&&(p=c.b,c.b=p.next,p.next=null),c.b||(c.f=null),p}n.gc=function(){for(var c;c=YB(this);)ZB(this,c,this.a,this.i);this.h=!1};function ZB(c,p,_,w){if(_==Bu&&p.b&&!p.c)for(;c&&c.g;c=c.c)c.g=!1;if(p.a)p.a.c=null,XB(p,_,w);else try{p.c?p.g.call(p.f):XB(p,_,w)}catch(x){QB.call(null,x)}pr(UB,p)}function XB(c,p,_){p==fm?c.g.call(c.f,_):c.b&&c.b.call(c.f,_)}function Tie(c,p){c.g=!0,Fb(function(){c.g&&QB.call(null,p)})}var QB=BB;function op(c){ae.call(this,c)}A(op,ae),op.prototype.name="cancel";function Wb(){this.ya=this.ya,this.pa=this.pa}var Nie=0;Wb.prototype.ya=!1;function JB(c){!c.ya&&(c.ya=!0,c.Da(),Nie!=0)&&b(c)}Wb.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Aie=Object.freeze||function(c){return c},eW=!Ys||9<=Number(Wl),Oie=Ys&&!RB("9"),Rie=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{u.addEventListener("test",d,p),u.removeEventListener("test",d,p)}catch{}return c}();function Eo(c,p){this.type=c,this.b=this.target=p,this.defaultPrevented=!1}Eo.prototype.preventDefault=function(){this.defaultPrevented=!0};function Rf(c,p){if(Eo.call(this,c?c.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,c){var _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.b=p,p=c.relatedTarget){if(AB){e:{try{qx(p.nodeName);var x=!0;break e}catch{}x=!1}x||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Mie[c.pointerType]||"",this.a=c,c.defaultPrevented&&this.preventDefault()}}A(Rf,Eo);var Mie=Aie({2:"touch",3:"pen",4:"mouse"});Rf.prototype.preventDefault=function(){Rf.bb.preventDefault.call(this);var c=this.a;if(c.preventDefault)c.preventDefault();else if(c.returnValue=!1,Oie)try{(c.ctrlKey||112<=c.keyCode&&123>=c.keyCode)&&(c.keyCode=-1)}catch{}},Rf.prototype.g=function(){return this.a};var hm="closure_listenable_"+(1e6*Math.random()|0),Pie=0;function Fie(c,p,_,w,x){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.Wa=x,this.key=++Pie,this.wa=this.Qa=!1}function Vb(c){c.wa=!0,c.listener=null,c.proxy=null,c.src=null,c.Wa=null}function Hb(c){this.src=c,this.a={},this.b=0}Hb.prototype.add=function(c,p,_,w,x){var N=c.toString();c=this.a[N],c||(c=this.a[N]=[],this.b++);var O=tD(c,p,w,x);return-1<O?(p=c[O],_||(p.Qa=!1)):(p=new Fie(p,this.src,N,!!w,x),p.Qa=_,c.push(p)),p};function eD(c,p){var _=p.type;_ in c.a&&J(c.a[_],p)&&(Vb(p),c.a[_].length==0&&(delete c.a[_],c.b--))}function tD(c,p,_,w){for(var x=0;x<c.length;++x){var N=c[x];if(!N.wa&&N.listener==p&&N.capture==!!_&&N.Wa==w)return x}return-1}var nD="closure_lm_"+(1e6*Math.random()|0),rD={};function Is(c,p,_,w,x){if(w&&w.once)iD(c,p,_,w,x);else if(Array.isArray(p))for(var N=0;N<p.length;N++)Is(c,p[N],_,w,x);else _=sD(_),c&&c[hm]?sW(c,p,_,y(w)?!!w.capture:!!w,x):tW(c,p,_,!1,w,x)}function tW(c,p,_,w,x,N){if(!p)throw Error("Invalid event type");var O=y(x)?!!x.capture:!!x,B=Ub(c);if(B||(c[nD]=B=new Hb(c)),_=B.add(p,_,w,O,N),!_.proxy)if(w=Bie(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)Rie||(x=O),x===void 0&&(x=!1),c.addEventListener(p.toString(),w,x);else if(c.attachEvent)c.attachEvent(rW(p.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.")}function Bie(){var c=Wie,p=eW?function(_){return c.call(p.src,p.listener,_)}:function(_){if(_=c.call(p.src,p.listener,_),!_)return _};return p}function iD(c,p,_,w,x){if(Array.isArray(p))for(var N=0;N<p.length;N++)iD(c,p[N],_,w,x);else _=sD(_),c&&c[hm]?aD(c,p,_,y(w)?!!w.capture:!!w,x):tW(c,p,_,!0,w,x)}function $o(c,p,_,w,x){if(Array.isArray(p))for(var N=0;N<p.length;N++)$o(c,p[N],_,w,x);else w=y(w)?!!w.capture:!!w,_=sD(_),c&&c[hm]?(c=c.v,p=String(p).toString(),p in c.a&&(N=c.a[p],_=tD(N,_,w,x),-1<_&&(Vb(N[_]),Array.prototype.splice.call(N,_,1),N.length==0&&(delete c.a[p],c.b--)))):c&&(c=Ub(c))&&(p=c.a[p.toString()],c=-1,p&&(c=tD(p,_,w,x)),(_=-1<c?p[c]:null)&&nW(_))}function nW(c){if(typeof c!="number"&&c&&!c.wa){var p=c.src;if(p&&p[hm])eD(p.v,c);else{var _=c.type,w=c.proxy;p.removeEventListener?p.removeEventListener(_,w,c.capture):p.detachEvent?p.detachEvent(rW(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=Ub(p))?(eD(_,c),_.b==0&&(_.src=null,p[nD]=null)):Vb(c)}}}function rW(c){return c in rD?rD[c]:rD[c]="on"+c}function iW(c,p,_,w){var x=!0;if((c=Ub(c))&&(p=c.a[p.toString()]))for(p=p.concat(),c=0;c<p.length;c++){var N=p[c];N&&N.capture==_&&!N.wa&&(N=oW(N,w),x=x&&N!==!1)}return x}function oW(c,p){var _=c.listener,w=c.Wa||c.src;return c.Qa&&nW(c),_.call(w,p)}function Wie(c,p){if(c.wa)return!0;if(!eW){if(!p)e:{p=["window","event"];for(var _=u,w=0;w<p.length;w++)if(_=_[p[w]],_==null){p=null;break e}p=_}if(w=p,p=new Rf(w,this),_=!0,!(0>w.keyCode||w.returnValue!=null)){e:{var x=!1;if(w.keyCode==0)try{w.keyCode=-1;break e}catch{x=!0}(x||w.returnValue==null)&&(w.returnValue=!0)}for(w=[],x=p.b;x;x=x.parentNode)w.push(x);for(c=c.type,x=w.length-1;0<=x;x--){p.b=w[x];var N=iW(w[x],c,!0,p);_=_&&N}for(x=0;x<w.length;x++)p.b=w[x],N=iW(w[x],c,!1,p),_=_&&N}return _}return oW(c,new Rf(p,this))}function Ub(c){return c=c[nD],c instanceof Hb?c:null}var oD="__closure_events_fn_"+(1e9*Math.random()>>>0);function sD(c){return m(c)?c:(c[oD]||(c[oD]=function(p){return c.handleEvent(p)}),c[oD])}function Gi(){Wb.call(this),this.v=new Hb(this),this.bc=this,this.hb=null}A(Gi,Wb),Gi.prototype[hm]=!0,Gi.prototype.addEventListener=function(c,p,_,w){Is(this,c,p,_,w)},Gi.prototype.removeEventListener=function(c,p,_,w){$o(this,c,p,_,w)},Gi.prototype.dispatchEvent=function(c){var p,_=this.hb;if(_)for(p=[];_;_=_.hb)p.push(_);_=this.bc;var w=c.type||c;if(typeof c=="string")c=new Eo(c,_);else if(c instanceof Eo)c.target=c.target||_;else{var x=c;c=new Eo(w,_),kn(c,x)}if(x=!0,p)for(var N=p.length-1;0<=N;N--){var O=c.b=p[N];x=jb(O,w,!0,c)&&x}if(O=c.b=_,x=jb(O,w,!0,c)&&x,x=jb(O,w,!1,c)&&x,p)for(N=0;N<p.length;N++)O=c.b=p[N],x=jb(O,w,!1,c)&&x;return x},Gi.prototype.Da=function(){if(Gi.bb.Da.call(this),this.v){var c=this.v,p;for(p in c.a){for(var _=c.a[p],w=0;w<_.length;w++)Vb(_[w]);delete c.a[p],c.b--}}this.hb=null};function sW(c,p,_,w,x){c.v.add(String(p),_,!1,w,x)}function aD(c,p,_,w,x){c.v.add(String(p),_,!0,w,x)}function jb(c,p,_,w){if(p=c.v.a[String(p)],!p)return!0;p=p.concat();for(var x=!0,N=0;N<p.length;++N){var O=p[N];if(O&&!O.wa&&O.capture==_){var B=O.listener,Q=O.Wa||O.src;O.Qa&&eD(c.v,O),x=B.call(Q,w)!==!1&&x}}return x&&!w.defaultPrevented}function uD(c,p,_){if(m(c))_&&(c=I(c,_));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:u.setTimeout(c,p||0)}function sp(c){var p=null;return new kt(function(_,w){p=uD(function(){_(void 0)},c),p==-1&&w(Error("Failed to schedule timer."))}).o(function(_){throw u.clearTimeout(p),_})}function aW(c){if(c.X&&typeof c.X=="function")return c.X();if(typeof c=="string")return c.split("");if(v(c)){for(var p=[],_=c.length,w=0;w<_;w++)p.push(c[w]);return p}p=[],_=0;for(w in c)p[_++]=c[w];return p}function uW(c){if(c.Y&&typeof c.Y=="function")return c.Y();if(!c.X||typeof c.X!="function"){if(v(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(var w in c)p[_++]=w;return p}}function Vie(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(v(c)||typeof c=="string")bn(c,p,void 0);else for(var _=uW(c),w=aW(c),x=w.length,N=0;N<x;N++)p.call(void 0,w[N],_&&_[N],c)}function ap(c,p){this.b={},this.a=[],this.c=0;var _=arguments.length;if(1<_){if(_%2)throw Error("Uneven number of arguments");for(var w=0;w<_;w+=2)this.set(arguments[w],arguments[w+1])}else if(c)if(c instanceof ap)for(_=c.Y(),w=0;w<_.length;w++)this.set(_[w],c.get(_[w]));else for(w in c)this.set(w,c[w])}n=ap.prototype,n.X=function(){lD(this);for(var c=[],p=0;p<this.a.length;p++)c.push(this.b[this.a[p]]);return c},n.Y=function(){return lD(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0};function lD(c){if(c.c!=c.a.length){for(var p=0,_=0;p<c.a.length;){var w=c.a[p];Mf(c.b,w)&&(c.a[_++]=w),p++}c.a.length=_}if(c.c!=c.a.length){var x={};for(_=p=0;p<c.a.length;)w=c.a[p],Mf(x,w)||(c.a[_++]=w,x[w]=1),p++;c.a.length=_}}n.get=function(c,p){return Mf(this.b,c)?this.b[c]:p},n.set=function(c,p){Mf(this.b,c)||(this.c++,this.a.push(c)),this.b[c]=p},n.forEach=function(c,p){for(var _=this.Y(),w=0;w<_.length;w++){var x=_[w],N=this.get(x);c.call(p,N,x,this)}};function Mf(c,p){return Object.prototype.hasOwnProperty.call(c,p)}var lW=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hie(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var w=c[_].indexOf("="),x=null;if(0<=w){var N=c[_].substring(0,w);x=c[_].substring(w+1)}else N=c[_];p(N,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Vl(c,p){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var _;c instanceof Vl?(this.i=p!==void 0?p:c.i,dm(this,c.c),this.l=c.l,this.a=c.a,pm(this,c.g),this.f=c.f,cD(this,dW(c.b)),this.h=c.h):c&&(_=String(c).match(lW))?(this.i=!!p,dm(this,_[1]||"",!0),this.l=gm(_[2]||""),this.a=gm(_[3]||"",!0),pm(this,_[4]),this.f=gm(_[5]||"",!0),cD(this,_[6]||"",!0),this.h=gm(_[7]||"")):(this.i=!!p,this.b=new Pf(null,this.i))}Vl.prototype.toString=function(){var c=[],p=this.c;p&&c.push(vm(p,cW,!0),":");var _=this.a;return(_||p=="file")&&(c.push("//"),(p=this.l)&&c.push(vm(p,cW,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.g,_!=null&&c.push(":",String(_))),(_=this.f)&&(this.a&&_.charAt(0)!="/"&&c.push("/"),c.push(vm(_,_.charAt(0)=="/"?zie:jie,!0))),(_=this.b.toString())&&c.push("?",_),(_=this.h)&&c.push("#",vm(_,$ie)),c.join("")},Vl.prototype.resolve=function(c){var p=new Vl(this),_=!!c.c;_?dm(p,c.c):_=!!c.l,_?p.l=c.l:_=!!c.a,_?p.a=c.a:_=c.g!=null;var w=c.f;if(_)pm(p,c.g);else if(_=!!c.f){if(w.charAt(0)!="/")if(this.a&&!this.f)w="/"+w;else{var x=p.f.lastIndexOf("/");x!=-1&&(w=p.f.substr(0,x+1)+w)}if(x=w,x==".."||x==".")w="";else if(Me(x,"./")||Me(x,"/.")){w=x.lastIndexOf("/",0)==0,x=x.split("/");for(var N=[],O=0;O<x.length;){var B=x[O++];B=="."?w&&O==x.length&&N.push(""):B==".."?((1<N.length||N.length==1&&N[0]!="")&&N.pop(),w&&O==x.length&&N.push("")):(N.push(B),w=!0)}w=N.join("/")}else w=x}return _?p.f=w:_=c.b.toString()!=="",_?cD(p,dW(c.b)):_=!!c.h,_&&(p.h=c.h),p};function dm(c,p,_){c.c=_?gm(p,!0):p,c.c&&(c.c=c.c.replace(/:$/,""))}function pm(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.g=p}else c.g=null}function cD(c,p,_){p instanceof Pf?(c.b=p,Kie(c.b,c.i)):(_||(p=vm(p,qie)),c.b=new Pf(p,c.i))}function nr(c,p,_){c.b.set(p,_)}function xs(c,p){return c.b.get(p)}function Io(c){return c instanceof Vl?new Vl(c):new Vl(c,void 0)}function zb(c,p,_,w){var x=new Vl(null,void 0);return c&&dm(x,c),p&&(x.a=p),_&&pm(x,_),w&&(x.f=w),x}function gm(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vm(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,Uie),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Uie(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var cW=/[#\/\?@]/g,jie=/[#\?:]/g,zie=/[#\?]/g,qie=/[#\?@]/g,$ie=/#/g;function Pf(c,p){this.b=this.a=null,this.c=c||null,this.f=!!p}function Hl(c){c.a||(c.a=new ap,c.b=0,c.c&&Hie(c.c,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}function fW(c){var p=uW(c);if(typeof p>"u")throw Error("Keys are undefined");var _=new Pf(null,void 0);c=aW(c);for(var w=0;w<p.length;w++){var x=p[w],N=c[w];Array.isArray(N)?hW(_,x,N):_.add(x,N)}return _}n=Pf.prototype,n.add=function(c,p){Hl(this),this.c=null,c=up(this,c);var _=this.a.get(c);return _||this.a.set(c,_=[]),_.push(p),this.b+=1,this};function Fa(c,p){Hl(c),p=up(c,p),Mf(c.a.b,p)&&(c.c=null,c.b-=c.a.get(p).length,c=c.a,Mf(c.b,p)&&(delete c.b[p],c.c--,c.a.length>2*c.c&&lD(c)))}n.clear=function(){this.a=this.c=null,this.b=0};function fD(c,p){return Hl(c),p=up(c,p),Mf(c.a.b,p)}n.forEach=function(c,p){Hl(this),this.a.forEach(function(_,w){bn(_,function(x){c.call(p,x,w,this)},this)},this)},n.Y=function(){Hl(this);for(var c=this.a.X(),p=this.a.Y(),_=[],w=0;w<p.length;w++)for(var x=c[w],N=0;N<x.length;N++)_.push(p[w]);return _},n.X=function(c){Hl(this);var p=[];if(typeof c=="string")fD(this,c)&&(p=ue(p,this.a.get(up(this,c))));else{c=this.a.X();for(var _=0;_<c.length;_++)p=ue(p,c[_])}return p},n.set=function(c,p){return Hl(this),this.c=null,c=up(this,c),fD(this,c)&&(this.b-=this.a.get(c).length),this.a.set(c,[p]),this.b+=1,this},n.get=function(c,p){return c?(c=this.X(c),0<c.length?String(c[0]):p):p};function hW(c,p,_){Fa(c,p),0<_.length&&(c.c=null,c.a.set(up(c,p),pe(_)),c.b+=_.length)}n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var c=[],p=this.a.Y(),_=0;_<p.length;_++){var w=p[_],x=encodeURIComponent(String(w));w=this.X(w);for(var N=0;N<w.length;N++){var O=x;w[N]!==""&&(O+="="+encodeURIComponent(String(w[N]))),c.push(O)}}return this.c=c.join("&")};function dW(c){var p=new Pf;return p.c=c.c,c.a&&(p.a=new ap(c.a),p.b=c.b),p}function up(c,p){return p=String(p),c.f&&(p=p.toLowerCase()),p}function Kie(c,p){p&&!c.f&&(Hl(c),c.c=null,c.a.forEach(function(_,w){var x=w.toLowerCase();w!=x&&(Fa(this,w),hW(this,x,_))},c)),c.f=p}function pW(c){var p=[];return hD(new Gie,c,p),p.join("")}function Gie(){}function hD(c,p,_){if(p==null)_.push("null");else{if(typeof p=="object"){if(Array.isArray(p)){var w=p;p=w.length,_.push("[");for(var x="",N=0;N<p;N++)_.push(x),hD(c,w[N],_),x=",";_.push("]");return}if(p instanceof String||p instanceof Number||p instanceof Boolean)p=p.valueOf();else{_.push("{"),x="";for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&(N=p[w],typeof N!="function"&&(_.push(x),vW(w,_),_.push(":"),hD(c,N,_),x=","));_.push("}");return}}switch(typeof p){case"string":vW(p,_);break;case"number":_.push(isFinite(p)&&!isNaN(p)?String(p):"null");break;case"boolean":_.push(String(p));break;case"function":_.push("null");break;default:throw Error("Unknown type: "+typeof p)}}}var gW={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},Yie=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function vW(c,p){p.push('"',c.replace(Yie,function(_){var w=gW[_];return w||(w="\\u"+(_.charCodeAt(0)|65536).toString(16).substr(1),gW[_]=w),w}),'"')}function dD(){var c=si();return Ys&&!!Wl&&Wl==11||/Edge\/\d+/.test(c)}function mm(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function mW(c,p){p=p||u.window;var _="about:blank";c&&(_=Rb(IB(c)||DB)),p.location.href=_}function _W(c,p){var _=[],w;for(w in c)w in p?typeof c[w]!=typeof p[w]?_.push(w):typeof c[w]=="object"&&c[w]!=null&&p[w]!=null?0<_W(c[w],p[w]).length&&_.push(w):c[w]!==p[w]&&_.push(w):_.push(w);for(w in p)w in c||_.push(w);return _}function Zie(){var c=si();return c=lp(c)!=CW?null:(c=c.match(/\sChrome\/(\d+)/i))&&c.length==2?parseInt(c[1],10):null,c&&30>c?!1:!Ys||!Wl||9<Wl}function yW(c){return c=(c||si()).toLowerCase(),!!(c.match(/android/)||c.match(/webos/)||c.match(/iphone|ipad|ipod/)||c.match(/blackberry/)||c.match(/windows phone/)||c.match(/iemobile/))}function Ff(c){c=c||u.window;try{c.close()}catch{}}function bW(c,p,_){var w=Math.floor(1e9*Math.random()).toString();p=p||500,_=_||600;var x=(window.screen.availHeight-_)/2,N=(window.screen.availWidth-p)/2;p={width:p,height:_,top:0<x?x:0,left:0<N?N:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},_=si().toLowerCase(),w&&(p.target=w,Me(_,"crios/")&&(p.target="_blank")),lp(si())==vD&&(c=c||"http://localhost",p.scrollbars=!0),_=c||"",(c=p)||(c={}),w=window,p=_ instanceof So?_:IB(typeof _.href<"u"?_.href:String(_))||DB,_=c.target||_.target,x=[];for(O in c)switch(O){case"width":case"height":case"top":case"left":x.push(O+"="+c[O]);break;case"target":case"noopener":case"noreferrer":break;default:x.push(O+"="+(c[O]?1:0))}var O=x.join(",");if((In("iPhone")&&!In("iPod")&&!In("iPad")||In("iPad")||In("iPod"))&&w.navigator&&w.navigator.standalone&&_&&_!="_self"?(O=Pb(document,"A"),um(O,"HTMLAnchorElement"),p=p instanceof So?p:xB(p),O.href=Rb(p),O.setAttribute("target",_),c.noreferrer&&O.setAttribute("rel","noreferrer"),c=document.createEvent("MouseEvent"),c.initMouseEvent("click",!0,!0,w,1),O.dispatchEvent(c),O={}):c.noreferrer?(O=kB("",w,_,O),c=Rb(p),O&&(bie&&Me(c,";")&&(c="'"+c.replace(/'/g,"%27")+"'"),O.opener=null,c='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zx(c)+'">',c=(w=wB())?w.createHTML(c):c,c=new ip(c,null,LB),w=O.document)&&(w.write(vie(c)),w.close())):(O=kB(p,w,_,O))&&c.noopener&&(O.opener=null),O)try{O.focus()}catch{}return O}function Xie(c){return new kt(function(p){function _(){sp(2e3).then(function(){if(!c||c.closed)p();else return _()})}return _()})}var Qie=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jie=/^[^@]+@[^@]+$/;function qb(){var c=null;return new kt(function(p){u.document.readyState=="complete"?p():(c=function(){p()},iD(window,"load",c))}).o(function(p){throw $o(window,"load",c),p})}function eoe(){return pD(void 0)?qb().then(function(){return new kt(function(c,p){var _=u.document,w=setTimeout(function(){p(Error("Cordova framework is not ready."))},1e3);_.addEventListener("deviceready",function(){clearTimeout(w),c()},!1)})}):Mn(Error("Cordova must run in an Android or iOS file scheme."))}function pD(c){return c=c||si(),!(fp()!=="file:"&&fp()!=="ionic:"||!c.toLowerCase().match(/iphone|ipad|ipod|android/))}function gD(){var c=u.window;try{return!(!c||c==c.top)}catch{return!1}}function Zs(){return typeof u.WorkerGlobalScope<"u"&&typeof u.importScripts=="function"}function Ba(){return He.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":He.INTERNAL.hasOwnProperty("node")?"Node":Zs()?"Worker":"Browser"}function wW(){var c=Ba();return c==="ReactNative"||c==="Node"}function toe(){for(var c=50,p=[];0<c;)p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),c--;return p.join("")}var vD="Firefox",CW="Chrome";function lp(c){var p=c.toLowerCase();if(Me(p,"opera/")||Me(p,"opr/")||Me(p,"opios/"))return"Opera";if(Me(p,"iemobile"))return"IEMobile";if(Me(p,"msie")||Me(p,"trident/"))return"IE";if(Me(p,"edge/"))return"Edge";if(Me(p,"firefox/"))return vD;if(Me(p,"silk/"))return"Silk";if(Me(p,"blackberry"))return"Blackberry";if(Me(p,"webos"))return"Webos";if(!Me(p,"safari/")||Me(p,"chrome/")||Me(p,"crios/")||Me(p,"android"))if(!Me(p,"chrome/")&&!Me(p,"crios/")||Me(p,"edge/")){if(Me(p,"android"))return"Android";if((c=c.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&c.length==2)return c[1]}else return CW;else return"Safari";return"Other"}var SW={md:"FirebaseCore-web",od:"FirebaseUI-web"};function cp(c,p){p=p||[];var _=[],w={},x;for(x in SW)w[SW[x]]=!0;for(x=0;x<p.length;x++)typeof w[p[x]]<"u"&&(delete w[p[x]],_.push(p[x]));return _.sort(),p=_,p.length||(p=["FirebaseCore-web"]),_=Ba(),_==="Browser"?(w=si(),_=lp(w)):_==="Worker"&&(w=si(),_=lp(w)+"-"+_),_+"/JsCore/"+c+"/"+p.join(",")}function si(){return u.navigator&&u.navigator.userAgent||""}function Pn(c,p){c=c.split("."),p=p||u;for(var _=0;_<c.length&&typeof p=="object"&&p!=null;_++)p=p[c[_]];return _!=c.length&&(p=void 0),p}function mD(){try{var c=u.localStorage,p=Wf();if(c)return c.setItem(p,"1"),c.removeItem(p),dD()?!!u.indexedDB:!0}catch{return Zs()&&!!u.indexedDB}return!1}function Bf(){return($b()||fp()==="chrome-extension:"||pD())&&!wW()&&mD()&&!Zs()}function $b(){return fp()==="http:"||fp()==="https:"}function fp(){return u.location&&u.location.protocol||null}function _m(c){return c=c||si(),!(yW(c)||lp(c)==vD)}function ym(c){return typeof c>"u"?null:pW(c)}function EW(c){var p={},_;for(_ in c)c.hasOwnProperty(_)&&c[_]!==null&&c[_]!==void 0&&(p[_]=c[_]);return p}function hp(c){if(c!==null)return JSON.parse(c)}function Wf(c){return c||Math.floor(1e9*Math.random()).toString()}function IW(c){return c=c||si(),!(lp(c)=="Safari"||c.toLowerCase().match(/iphone|ipad|ipod/))}function xW(){var c=u.___jsl;if(c&&c.H){for(var p in c.H)if(c.H[p].r=c.H[p].r||[],c.H[p].L=c.H[p].L||[],c.H[p].r=c.H[p].L.concat(),c.CP)for(var _=0;_<c.CP.length;_++)c.CP[_]=null}}function Ul(c,p){if(c>p)throw Error("Short delay should be less than long delay!");this.a=c,this.c=p,c=si(),p=Ba(),this.b=yW(c)||p==="ReactNative"}Ul.prototype.get=function(){var c=u.navigator;return!(c&&typeof c.onLine=="boolean"&&($b()||fp()==="chrome-extension:"||typeof c.connection<"u"))||c.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function _D(){var c=u.document;return c&&typeof c.visibilityState<"u"?c.visibilityState=="visible":!0}function noe(){var c=u.document,p=null;return _D()||!c?Xe():new kt(function(_){p=function(){_D()&&(c.removeEventListener("visibilitychange",p,!1),_())},c.addEventListener("visibilitychange",p,!1)}).o(function(_){throw c.removeEventListener("visibilitychange",p,!1),_})}function bm(c){try{var p=new Date(parseInt(c,10));if(!isNaN(p.getTime())&&!/[^0-9]/.test(c))return p.toUTCString()}catch{}return null}function DW(){return!(!Pn("fireauth.oauthhelper",u)&&!Pn("fireauth.iframe",u))}function roe(){var c=u.navigator;return c&&c.serviceWorker&&c.serviceWorker.controller||null}function ioe(){var c=u.navigator;return c&&c.serviceWorker?Xe().then(function(){return c.serviceWorker.ready}).then(function(p){return p.active||null}).o(function(){return null}):Xe(null)}var LW={};function yD(c){LW[c]||(LW[c]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(c))}var bD;try{var wD={};Object.defineProperty(wD,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(wD,"abcd",{configurable:!0,enumerable:!0,value:2}),bD=wD.abcd==2}catch{bD=!1}function Pe(c,p,_){bD?Object.defineProperty(c,p,{configurable:!0,enumerable:!0,value:_}):c[p]=_}function Yi(c,p){if(p)for(var _ in p)p.hasOwnProperty(_)&&Pe(c,_,p[_])}function Wa(c){var p={};return Yi(p,c),p}function ooe(c){var p={},_;for(_ in c)c.hasOwnProperty(_)&&(p[_]=c[_]);return p}function soe(c,p){if(!p||!p.length)return!0;if(!c)return!1;for(var _=0;_<p.length;_++){var w=c[p[_]];if(w==null||w==="")return!1}return!0}function CD(c){var p=c;if(typeof c=="object"&&c!=null){p="length"in c?[]:{};for(var _ in c)Pe(p,_,CD(c[_]))}return p}function SD(c){var p=c&&(c[DD]?"phone":null);if(p&&c&&c[xD]){Pe(this,"uid",c[xD]),Pe(this,"displayName",c[kW]||null);var _=null;c[ID]&&(_=new Date(c[ID]).toUTCString()),Pe(this,"enrollmentTime",_),Pe(this,"factorId",p)}else throw new L("internal-error","Internal assert: invalid MultiFactorInfo object")}SD.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function ED(c){try{var p=new wm(c)}catch{p=null}return p}var kW="displayName",ID="enrolledAt",xD="mfaEnrollmentId",DD="phoneInfo";function wm(c){SD.call(this,c),Pe(this,"phoneNumber",c[DD])}A(wm,SD),wm.prototype.w=function(){var c=wm.bb.w.call(this);return c.phoneNumber=this.phoneNumber,c};function aoe(c){var p={},_=c[uoe],w=c[coe],x=c[foe];if(c=ED(c[loe]),!x||x!=Kb&&x!=Cm&&!_||x==Cm&&!w||x==LD&&!c)throw Error("Invalid checkActionCode response!");x==Cm?(p[NW]=_||null,p[AW]=_||null,p[TW]=w):(p[NW]=w||null,p[AW]=w||null,p[TW]=_||null),p[hoe]=c||null,Pe(this,poe,x),Pe(this,doe,CD(p))}var LD="REVERT_SECOND_FACTOR_ADDITION",Kb="EMAIL_SIGNIN",Cm="VERIFY_AND_CHANGE_EMAIL",uoe="email",loe="mfaInfo",coe="newEmail",foe="requestType",TW="email",NW="fromEmail",hoe="multiFactorInfo",AW="previousEmail",doe="data",poe="operation";function kD(c){c=Io(c);var p=xs(c,OW)||null,_=xs(c,RW)||null,w=xs(c,MW)||null;if(w=w&&_oe[w]||null,!p||!_||!w)throw new L("argument-error",OW+", "+RW+"and "+MW+" are required in a valid action code URL.");Yi(this,{apiKey:p,operation:w,code:_,continueUrl:xs(c,goe)||null,languageCode:xs(c,voe)||null,tenantId:xs(c,moe)||null})}var OW="apiKey",RW="oobCode",goe="continueUrl",voe="languageCode",MW="mode",moe="tenantId",_oe={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:LD,signIn:Kb,verifyAndChangeEmail:Cm,verifyEmail:"VERIFY_EMAIL"};function PW(c){try{return new kD(c)}catch{return null}}function Gb(c){var p=c[yoe];if(typeof p>"u")throw new L("missing-continue-uri");if(typeof p!="string"||typeof p=="string"&&!p.length)throw new L("invalid-continue-uri");this.h=p,this.b=this.a=null,this.g=!1;var _=c[FW];if(_&&typeof _=="object"){p=_[UW];var w=_[VW];if(_=_[HW],typeof p=="string"&&p.length){if(this.a=p,typeof w<"u"&&typeof w!="boolean")throw new L("argument-error",VW+" property must be a boolean when specified.");if(this.g=!!w,typeof _<"u"&&(typeof _!="string"||typeof _=="string"&&!_.length))throw new L("argument-error",HW+" property must be a non empty string when specified.");this.b=_||null}else{if(typeof p<"u")throw new L("argument-error",UW+" property must be a non empty string when specified.");if(typeof w<"u"||typeof _<"u")throw new L("missing-android-pkg-name")}}else if(typeof _<"u")throw new L("argument-error",FW+" property must be a non null object when specified.");if(this.f=null,(p=c[WW])&&typeof p=="object"){if(p=p[jW],typeof p=="string"&&p.length)this.f=p;else if(typeof p<"u")throw new L("argument-error",jW+" property must be a non empty string when specified.")}else if(typeof p<"u")throw new L("argument-error",WW+" property must be a non null object when specified.");if(p=c[TD],typeof p<"u"&&typeof p!="boolean")throw new L("argument-error",TD+" property must be a boolean when specified.");if(this.c=!!p,c=c[BW],typeof c<"u"&&(typeof c!="string"||typeof c=="string"&&!c.length))throw new L("argument-error",BW+" property must be a non empty string when specified.");this.i=c||null}var FW="android",BW="dynamicLinkDomain",TD="handleCodeInApp",WW="iOS",yoe="url",VW="installApp",HW="minimumVersion",UW="packageName",jW="bundleId";function Yb(c){var p={};p.continueUrl=c.h,p.canHandleCodeInApp=c.c,(p.androidPackageName=c.a)&&(p.androidMinimumVersion=c.b,p.androidInstallApp=c.g),p.iOSBundleId=c.f,p.dynamicLinkDomain=c.i;for(var _ in p)p[_]===null&&delete p[_];return p}function boe(c){return Nf(c,function(p){return p=p.toString(16),1<p.length?p:"0"+p}).join("")}var Sm=null;function woe(c){var p=[];return Coe(c,function(_){p.push(_)}),p}function Coe(c,p){function _(Q){for(;w<c.length;){var oe=c.charAt(w++),ot=Sm[oe];if(ot!=null)return ot;if(!/^[\s\xa0]*$/.test(oe))throw Error("Unknown base64 encoding at char: "+oe)}return Q}Soe();for(var w=0;;){var x=_(-1),N=_(0),O=_(64),B=_(64);if(B===64&&x===-1)break;p(x<<2|N>>4),O!=64&&(p(N<<4&240|O>>2),B!=64&&p(O<<6&192|B))}}function Soe(){if(!Sm){Sm={};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),p=["+/=","+/","-_=","-_.","-_"],_=0;5>_;_++)for(var w=c.concat(p[_].split("")),x=0;x<w.length;x++){var N=w[x];Sm[N]===void 0&&(Sm[N]=x)}}}function Zb(c){var p=zW(c);if(!(p&&p.sub&&p.iss&&p.aud&&p.exp))throw Error("Invalid JWT");this.h=c,this.a=p.exp,this.i=p.sub,c=Date.now()/1e3,this.g=p.iat||(c>this.a?this.a:c),this.b=p.provider_id||p.firebase&&p.firebase.sign_in_provider||null,this.f=p.firebase&&p.firebase.tenant||null,this.c=!!p.is_anonymous||this.b=="anonymous"}Zb.prototype.T=function(){return this.f},Zb.prototype.l=function(){return this.c},Zb.prototype.toString=function(){return this.h};function Xb(c){try{return new Zb(c)}catch{return null}}function zW(c){if(!c||(c=c.split("."),c.length!=3))return null;c=c[1];for(var p=(4-c.length%4)%4,_=0;_<p;_++)c+=".";try{var w=woe(c);for(c=[],_=p=0;p<w.length;){var x=w[p++];if(128>x)c[_++]=String.fromCharCode(x);else if(191<x&&224>x){var N=w[p++];c[_++]=String.fromCharCode((x&31)<<6|N&63)}else if(239<x&&365>x){N=w[p++];var O=w[p++],B=w[p++],Q=((x&7)<<18|(N&63)<<12|(O&63)<<6|B&63)-65536;c[_++]=String.fromCharCode(55296+(Q>>10)),c[_++]=String.fromCharCode(56320+(Q&1023))}else N=w[p++],O=w[p++],c[_++]=String.fromCharCode((x&15)<<12|(N&63)<<6|O&63)}return JSON.parse(c.join(""))}catch{}return null}var qW="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qb=["client_id","response_type","scope","redirect_uri","state"],ND={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Qb},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Qb},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Qb},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:qW},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function AD(c){for(var p in ND)if(ND[p].fa==c)return ND[p];return null}function $W(c){var p={};p["facebook.com"]=GW,p["google.com"]=ZW,p["github.com"]=YW,p["twitter.com"]=XW;var _=c&&c[KW];try{if(_)return p[_]?new p[_](c):new Va(c);if(typeof c[OD]<"u")return new RD(c)}catch{}return null}var OD="idToken",KW="providerId";function RD(c){var p=c[KW];if(!p&&c[OD]){var _=Xb(c[OD]);_&&_.b&&(p=_.b)}if(!p)throw Error("Invalid additional user info!");(p=="anonymous"||p=="custom")&&(p=null),_=!1,typeof c.isNewUser<"u"?_=!!c.isNewUser:c.kind==="identitytoolkit#SignupNewUserResponse"&&(_=!0),Pe(this,"providerId",p),Pe(this,"isNewUser",_)}function Va(c){RD.call(this,c),c=hp(c.rawUserInfo||"{}"),Pe(this,"profile",CD(c||{}))}A(Va,RD);function GW(c){if(Va.call(this,c),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}A(GW,Va);function YW(c){if(Va.call(this,c),this.providerId!="github.com")throw Error("Invalid provider ID!");Pe(this,"username",this.profile&&this.profile.login||null)}A(YW,Va);function ZW(c){if(Va.call(this,c),this.providerId!="google.com")throw Error("Invalid provider ID!")}A(ZW,Va);function XW(c){if(Va.call(this,c),this.providerId!="twitter.com")throw Error("Invalid provider ID!");Pe(this,"username",c.screenName||null)}A(XW,Va);function QW(c){var p=Io(c),_=xs(p,"link"),w=xs(Io(_),"link");return p=xs(p,"deep_link_id"),xs(Io(p),"link")||p||w||_||c}function Jb(c,p){if(!c&&!p)throw new L("internal-error","Internal assert: no raw session string available");if(c&&p)throw new L("internal-error","Internal assert: unable to determine the session type");this.a=c||null,this.b=p||null,this.type=this.a?Em:ew}var Em="enroll",ew="signin";Jb.prototype.Ha=function(){return this.a?Xe(this.a):Xe(this.b)},Jb.prototype.w=function(){return this.type==Em?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function dp(){}dp.prototype.ka=function(){},dp.prototype.b=function(){},dp.prototype.c=function(){},dp.prototype.w=function(){};function pp(c,p){return c.then(function(_){if(_[Js]){var w=Xb(_[Js]);if(!w||p!=w.i)throw new L("user-mismatch");return _}throw new L("user-mismatch")}).o(function(_){throw _&&_.code&&_.code==W+"user-not-found"?new L("user-mismatch"):_})}function Vf(c,p){if(p)this.a=p;else throw new L("internal-error","failed to construct a credential");Pe(this,"providerId",c),Pe(this,"signInMethod",c)}Vf.prototype.ka=function(c){return iL(c,MD(this))},Vf.prototype.b=function(c,p){var _=MD(this);return _.idToken=p,oL(c,_)},Vf.prototype.c=function(c,p){return pp(sL(c,MD(this)),p)};function MD(c){return{pendingToken:c.a,requestUri:"http://localhost"}}Vf.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function Eoe(c){if(c&&c.providerId&&c.signInMethod&&c.providerId.indexOf("saml.")==0&&c.pendingToken)try{return new Vf(c.providerId,c.pendingToken)}catch{}return null}function Wu(c,p,_){if(this.a=null,p.idToken||p.accessToken)p.idToken&&Pe(this,"idToken",p.idToken),p.accessToken&&Pe(this,"accessToken",p.accessToken),p.nonce&&!p.pendingToken&&Pe(this,"nonce",p.nonce),p.pendingToken&&(this.a=p.pendingToken);else if(p.oauthToken&&p.oauthTokenSecret)Pe(this,"accessToken",p.oauthToken),Pe(this,"secret",p.oauthTokenSecret);else throw new L("internal-error","failed to construct a credential");Pe(this,"providerId",c),Pe(this,"signInMethod",_)}Wu.prototype.ka=function(c){return iL(c,PD(this))},Wu.prototype.b=function(c,p){var _=PD(this);return _.idToken=p,oL(c,_)},Wu.prototype.c=function(c,p){var _=PD(this);return pp(sL(c,_),p)};function PD(c){var p={};return c.idToken&&(p.id_token=c.idToken),c.accessToken&&(p.access_token=c.accessToken),c.secret&&(p.oauth_token_secret=c.secret),p.providerId=c.providerId,c.nonce&&!c.a&&(p.nonce=c.nonce),p={postBody:fW(p).toString(),requestUri:"http://localhost"},c.a&&(delete p.postBody,p.pendingToken=c.a),p}Wu.prototype.w=function(){var c={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(c.oauthIdToken=this.idToken),this.accessToken&&(c.oauthAccessToken=this.accessToken),this.secret&&(c.oauthTokenSecret=this.secret),this.nonce&&(c.nonce=this.nonce),this.a&&(c.pendingToken=this.a),c};function Ioe(c){if(c&&c.providerId&&c.signInMethod){var p={idToken:c.oauthIdToken,accessToken:c.oauthTokenSecret?null:c.oauthAccessToken,oauthTokenSecret:c.oauthTokenSecret,oauthToken:c.oauthTokenSecret&&c.oauthAccessToken,nonce:c.nonce,pendingToken:c.pendingToken};try{return new Wu(c.providerId,p,c.signInMethod)}catch{}}return null}function Hf(c,p){this.Qc=p||[],Yi(this,{providerId:c,isOAuthProvider:!0}),this.Jb={},this.qb=(AD(c)||{}).Ja||null,this.pb=null}Hf.prototype.Ka=function(c){return this.Jb=Gs(c),this};function JW(c){if(typeof c!="string"||c.indexOf("saml.")!=0)throw new L("argument-error",'SAML provider IDs must be prefixed with "saml."');Hf.call(this,c,[])}A(JW,Hf);function Ko(c){Hf.call(this,c,Qb),this.a=[]}A(Ko,Hf),Ko.prototype.Ca=function(c){return q(this.a,c)||this.a.push(c),this},Ko.prototype.Rb=function(){return pe(this.a)},Ko.prototype.credential=function(c,p){var _;if(y(c)?_={idToken:c.idToken||null,accessToken:c.accessToken||null,nonce:c.rawNonce||null}:_={idToken:c||null,accessToken:p||null},!_.idToken&&!_.accessToken)throw new L("argument-error","credential failed: must provide the ID token and/or the access token.");return new Wu(this.providerId,_,this.providerId)};function Uf(){Ko.call(this,"facebook.com")}A(Uf,Ko),Pe(Uf,"PROVIDER_ID","facebook.com"),Pe(Uf,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function eV(c){if(!c)throw new L("argument-error","credential failed: expected 1 argument (the OAuth access token).");var p=c;return y(c)&&(p=c.accessToken),new Uf().credential({accessToken:p})}function jf(){Ko.call(this,"github.com")}A(jf,Ko),Pe(jf,"PROVIDER_ID","github.com"),Pe(jf,"GITHUB_SIGN_IN_METHOD","github.com");function tV(c){if(!c)throw new L("argument-error","credential failed: expected 1 argument (the OAuth access token).");var p=c;return y(c)&&(p=c.accessToken),new jf().credential({accessToken:p})}function zf(){Ko.call(this,"google.com"),this.Ca("profile")}A(zf,Ko),Pe(zf,"PROVIDER_ID","google.com"),Pe(zf,"GOOGLE_SIGN_IN_METHOD","google.com");function nV(c,p){var _=c;return y(c)&&(_=c.idToken,p=c.accessToken),new zf().credential({idToken:_,accessToken:p})}function gp(){Hf.call(this,"twitter.com",qW)}A(gp,Hf),Pe(gp,"PROVIDER_ID","twitter.com"),Pe(gp,"TWITTER_SIGN_IN_METHOD","twitter.com");function rV(c,p){var _=c;if(y(_)||(_={oauthToken:c,oauthTokenSecret:p}),!_.oauthToken||!_.oauthTokenSecret)throw new L("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Wu("twitter.com",_,"twitter.com")}function jl(c,p,_){this.a=c,this.f=p,Pe(this,"providerId","password"),Pe(this,"signInMethod",_===Ds.EMAIL_LINK_SIGN_IN_METHOD?Ds.EMAIL_LINK_SIGN_IN_METHOD:Ds.EMAIL_PASSWORD_SIGN_IN_METHOD)}jl.prototype.ka=function(c){return this.signInMethod==Ds.EMAIL_LINK_SIGN_IN_METHOD?Ot(c,lse,{email:this.a,oobCode:this.f}):Ot(c,NV,{email:this.a,password:this.f})},jl.prototype.b=function(c,p){return this.signInMethod==Ds.EMAIL_LINK_SIGN_IN_METHOD?Ot(c,cse,{idToken:p,email:this.a,oobCode:this.f}):Ot(c,TV,{idToken:p,email:this.a,password:this.f})},jl.prototype.c=function(c,p){return pp(this.ka(c),p)},jl.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function xoe(c){return c&&c.email&&c.password?new jl(c.email,c.password,c.signInMethod):null}function Ds(){Yi(this,{providerId:"password",isOAuthProvider:!1})}function iV(c,p){if(p=FD(p),!p)throw new L("argument-error","Invalid email link!");return new jl(c,p.code,Ds.EMAIL_LINK_SIGN_IN_METHOD)}function FD(c){return c=QW(c),(c=PW(c))&&c.operation===Kb?c:null}Yi(Ds,{PROVIDER_ID:"password"}),Yi(Ds,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yi(Ds,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function zl(c){if(!(c.fb&&c.eb||c.La&&c.ea))throw new L("internal-error");this.a=c,Pe(this,"providerId","phone"),this.fa="phone",Pe(this,"signInMethod","phone")}zl.prototype.ka=function(c){return c.gb(Im(this))},zl.prototype.b=function(c,p){var _=Im(this);return _.idToken=p,Ot(c,Tse,_)},zl.prototype.c=function(c,p){var _=Im(this);return _.operation="REAUTH",c=Ot(c,Nse,_),pp(c,p)},zl.prototype.w=function(){var c={providerId:"phone"};return this.a.fb&&(c.verificationId=this.a.fb),this.a.eb&&(c.verificationCode=this.a.eb),this.a.La&&(c.temporaryProof=this.a.La),this.a.ea&&(c.phoneNumber=this.a.ea),c};function Doe(c){if(c&&c.providerId==="phone"&&(c.verificationId&&c.verificationCode||c.temporaryProof&&c.phoneNumber)){var p={};return bn(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(_){c[_]&&(p[_]=c[_])}),new zl(p)}return null}function Im(c){return c.a.La&&c.a.ea?{temporaryProof:c.a.La,phoneNumber:c.a.ea}:{sessionInfo:c.a.fb,code:c.a.eb}}function Vu(c){try{this.a=c||He.auth()}catch{throw new L("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yi(this,{providerId:"phone",isOAuthProvider:!1})}Vu.prototype.gb=function(c,p){var _=this.a.a;return Xe(p.verify()).then(function(w){if(typeof w!="string")throw new L("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(p.type){case"recaptcha":var x=y(c)?c.session:null,N=y(c)?c.phoneNumber:c,O;return x&&x.type==Em?O=x.Ha().then(function(B){return ese(_,{idToken:B,phoneEnrollmentInfo:{phoneNumber:N,recaptchaToken:w}})}):x&&x.type==ew?O=x.Ha().then(function(B){return tse(_,{mfaPendingCredential:B,mfaEnrollmentId:c.multiFactorHint&&c.multiFactorHint.uid||c.multiFactorUid,phoneSignInInfo:{recaptchaToken:w}})}):O=Joe(_,{phoneNumber:N,recaptchaToken:w}),O.then(function(B){return typeof p.reset=="function"&&p.reset(),B},function(B){throw typeof p.reset=="function"&&p.reset(),B});default:throw new L("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function oV(c,p){if(!c)throw new L("missing-verification-id");if(!p)throw new L("missing-verification-code");return new zl({fb:c,eb:p})}Yi(Vu,{PROVIDER_ID:"phone"}),Yi(Vu,{PHONE_SIGN_IN_METHOD:"phone"});function BD(c){if(c.temporaryProof&&c.phoneNumber)return new zl({La:c.temporaryProof,ea:c.phoneNumber});var p=c&&c.providerId;if(!p||p==="password")return null;var _=c&&c.oauthAccessToken,w=c&&c.oauthTokenSecret,x=c&&c.nonce,N=c&&c.oauthIdToken,O=c&&c.pendingToken;try{switch(p){case"google.com":return nV(N,_);case"facebook.com":return eV(_);case"github.com":return tV(_);case"twitter.com":return rV(_,w);default:return _||w||N||O?O?p.indexOf("saml.")==0?new Vf(p,O):new Wu(p,{pendingToken:O,idToken:c.oauthIdToken,accessToken:c.oauthAccessToken},p):new Ko(p).credential({idToken:N,accessToken:_,rawNonce:x}):null}}catch{return null}}function WD(c){if(!c.isOAuthProvider)throw new L("invalid-oauth-provider")}function Xs(c,p,_,w,x,N,O){if(this.c=c,this.b=p||null,this.g=_||null,this.f=w||null,this.i=N||null,this.h=O||null,this.a=x||null,this.g||this.a){if(this.g&&this.a)throw new L("invalid-auth-event");if(this.g&&!this.f)throw new L("invalid-auth-event")}else throw new L("invalid-auth-event")}Xs.prototype.getUid=function(){var c=[];return c.push(this.c),this.b&&c.push(this.b),this.f&&c.push(this.f),this.h&&c.push(this.h),c.join("-")},Xs.prototype.T=function(){return this.h},Xs.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function sV(c){return c=c||{},c.type?new Xs(c.type,c.eventId,c.urlResponse,c.sessionId,c.error&&F(c.error),c.postBody,c.tenantId):null}function Loe(){this.b=null,this.a=[]}var VD=null;function koe(c){var p=VD;p.a.push(c),p.b||(p.b=function(_){for(var w=0;w<p.a.length;w++)p.a[w](_)},c=Pn("universalLinks.subscribe",u),typeof c=="function"&&c(null,p.b))}function HD(c){var p="unauthorized-domain",_=void 0,w=Io(c);c=w.a,w=w.c,w=="chrome-extension"?_=TB("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",c):w=="http"||w=="https"?_=TB("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",c):p="operation-not-supported-in-this-environment",L.call(this,p,_)}A(HD,L);function xm(c,p,_){L.call(this,c,_),c=p||{},c.Kb&&Pe(this,"email",c.Kb),c.ea&&Pe(this,"phoneNumber",c.ea),c.credential&&Pe(this,"credential",c.credential),c.$b&&Pe(this,"tenantId",c.$b)}A(xm,L),xm.prototype.w=function(){var c={code:this.code,message:this.message};this.email&&(c.email=this.email),this.phoneNumber&&(c.phoneNumber=this.phoneNumber),this.tenantId&&(c.tenantId=this.tenantId);var p=this.credential&&this.credential.w();return p&&kn(c,p),c},xm.prototype.toJSON=function(){return this.w()};function tw(c){if(c.code){var p=c.code||"";p.indexOf(W)==0&&(p=p.substring(W.length));var _={credential:BD(c),$b:c.tenantId};if(c.email)_.Kb=c.email;else if(c.phoneNumber)_.ea=c.phoneNumber;else if(!_.credential)return new L(p,c.message||void 0);return new xm(p,_,c.message)}return null}function Dm(){}Dm.prototype.c=null;function aV(c){return c.c||(c.c=c.b())}var UD;function nw(){}A(nw,Dm),nw.prototype.a=function(){var c=uV(this);return c?new ActiveXObject(c):new XMLHttpRequest},nw.prototype.b=function(){var c={};return uV(this)&&(c[0]=!0,c[1]=!0),c};function uV(c){if(!c.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var p=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],_=0;_<p.length;_++){var w=p[_];try{return new ActiveXObject(w),c.f=w}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return c.f}UD=new nw;function rw(){}A(rw,Dm),rw.prototype.a=function(){var c=new XMLHttpRequest;if("withCredentials"in c)return c;if(typeof XDomainRequest<"u")return new lV;throw Error("Unsupported browser")},rw.prototype.b=function(){return{}};function lV(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Tb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}n=lV.prototype,n.open=function(c,p,_){if(_!=null&&!_)throw Error("Only async requests are supported.");this.a.open(c,p)},n.send=function(c){if(c)if(typeof c=="string")this.a.send(c);else throw Error("Only string data is supported");else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(c){return c.toLowerCase()=="content-type"?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,jD(this,4)},n.Tb=function(){this.status=500,this.response=this.responseText="",jD(this,4)},n.vc=function(){this.Tb()},n.rc=function(){this.status=200,jD(this,1)};function jD(c,p){c.readyState=p,c.onreadystatechange&&c.onreadystatechange()}n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function zD(c,p,_){this.reset(c,p,_,void 0,void 0)}zD.prototype.a=null,zD.prototype.reset=function(c,p,_,w,x){delete this.a};function qD(c){this.f=c,this.b=this.c=this.a=null}function Lm(c,p){this.name=c,this.value=p}Lm.prototype.toString=function(){return this.name};var cV=new Lm("SEVERE",1e3),$D=new Lm("WARNING",900),Toe=new Lm("CONFIG",700),Noe=new Lm("FINE",500);function fV(c){return c.c?c.c:c.a?fV(c.a):(At("Root logger has no level set."),null)}qD.prototype.log=function(c,p,_){if(c.value>=fV(this).value)for(m(p)&&(p=p()),c=new zD(c,String(p),this.f),_&&(c.a=_),_=this;_;)_=_.a};var KD={},iw=null;function GD(c){iw||(iw=new qD(""),KD[""]=iw,iw.c=Toe);var p;if(!(p=KD[c])){p=new qD(c);var _=c.lastIndexOf("."),w=c.substr(_+1);_=GD(c.substr(0,_)),_.b||(_.b={}),_.b[w]=p,p.a=_,KD[c]=p}return p}function Ls(c,p){c&&c.log(Noe,p,void 0)}function ow(c){this.f=c}A(ow,Dm),ow.prototype.a=function(){return new sw(this.f)},ow.prototype.b=function(c){return function(){return c}}({});function sw(c){Gi.call(this),this.u=c,this.h=void 0,this.readyState=YD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=GD("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}A(sw,Gi);var YD=0;n=sw.prototype,n.open=function(c,p){if(this.readyState!=YD)throw this.abort(),Error("Error reopening a connection");this.s=c,this.f=p,this.readyState=1,Tm(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var p={headers:this.l,method:this.s,credentials:this.h,cache:void 0};c&&(p.body=c),this.u.fetch(new Request(this.f,p)).then(this.uc.bind(this),this.Va.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,km(this)),this.readyState=YD},n.uc=function(c){this.a&&(this.g=c,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=c.headers,this.readyState=2,Tm(this)),this.a&&(this.readyState=3,Tm(this),this.a&&(this.responseType==="arraybuffer"?c.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof u.ReadableStream<"u"&&"body"in c?(this.response=this.responseText="",this.c=c.body.getReader(),this.m=new TextDecoder,hV(this)):c.text().then(this.tc.bind(this),this.Va.bind(this)))))};function hV(c){c.c.read().then(c.pc.bind(c)).catch(c.Va.bind(c))}n.pc=function(c){if(this.a){var p=this.m.decode(c.value?c.value:new Uint8Array(0),{stream:!c.done});p&&(this.response=this.responseText+=p),c.done?km(this):Tm(this),this.readyState==3&&hV(this)}},n.tc=function(c){this.a&&(this.response=this.responseText=c,km(this))},n.sc=function(c){this.a&&(this.response=c,km(this))},n.Va=function(c){var p=this.i;p&&p.log($D,"Failed to fetch url "+this.f,c instanceof Error?c:Error(c)),this.a&&km(this)};function km(c){c.readyState=4,c.g=null,c.c=null,c.m=null,Tm(c)}n.setRequestHeader=function(c,p){this.l.append(c,p)},n.getResponseHeader=function(c){return this.b?this.b.get(c.toLowerCase())||"":((c=this.i)&&c.log($D,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var c=this.i;return c&&c.log($D,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}c=[];for(var p=this.b.entries(),_=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function Tm(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(sw.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(c){this.h=c?"include":"same-origin"}});function Nm(c){Gi.call(this),this.headers=new ap,this.D=c||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=dV,this.u=this.S=!1}A(Nm,Gi);var dV="";Nm.prototype.b=GD("goog.net.XhrIo");var Aoe=/^https?$/i,Ooe=["POST","PUT"];function Roe(c,p,_,w,x){if(c.a)throw Error("[goog.net.XhrIo] Object is active with another request="+c.l+"; newUri="+p);_=_?_.toUpperCase():"GET",c.l=p,c.h="",c.P=_,c.J=!1,c.c=!0,c.a=c.D?c.D.a():UD.a(),c.C=c.D?aV(c.D):aV(UD),c.a.onreadystatechange=I(c.Wb,c);try{Ls(c.b,Hu(c,"Opening Xhr")),c.N=!0,c.a.open(_,String(p),!0),c.N=!1}catch(O){Ls(c.b,Hu(c,"Error opening Xhr: "+O.message)),pV(c,O);return}p=w||"";var N=new ap(c.headers);x&&Vie(x,function(O,B){N.set(B,O)}),x=H(N.Y()),w=u.FormData&&p instanceof u.FormData,!q(Ooe,_)||x||w||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),N.forEach(function(O,B){this.a.setRequestHeader(B,O)},c),c.m&&(c.a.responseType=c.m),"withCredentials"in c.a&&c.a.withCredentials!==c.S&&(c.a.withCredentials=c.S);try{mV(c),0<c.g&&(c.u=Moe(c.a),Ls(c.b,Hu(c,"Will abort after "+c.g+"ms if incomplete, xhr2 "+c.u)),c.u?(c.a.timeout=c.g,c.a.ontimeout=I(c.Ma,c)):c.s=uD(c.Ma,c.g,c)),Ls(c.b,Hu(c,"Sending request")),c.i=!0,c.a.send(p),c.i=!1}catch(O){Ls(c.b,Hu(c,"Send error: "+O.message)),pV(c,O)}}function Moe(c){return Ys&&RB(9)&&typeof c.timeout=="number"&&c.ontimeout!==void 0}function Poe(c){return c.toLowerCase()=="content-type"}n=Nm.prototype,n.Ma=function(){typeof a<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ls(this.b,Hu(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function pV(c,p){c.c=!1,c.a&&(c.f=!0,c.a.abort(),c.f=!1),c.h=p,gV(c),aw(c)}function gV(c){c.J||(c.J=!0,c.dispatchEvent("complete"),c.dispatchEvent("error"))}n.abort=function(){this.a&&this.c&&(Ls(this.b,Hu(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),aw(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),aw(this,!0)),Nm.bb.Da.call(this)},n.Wb=function(){this.ya||(this.N||this.i||this.f?vV(this):this.Jc())},n.Jc=function(){vV(this)};function vV(c){if(c.c&&typeof a<"u"){if(c.C[1]&&Am(c)==4&&uw(c)==2)Ls(c.b,Hu(c,"Local request error detected and ignored"));else if(c.i&&Am(c)==4)uD(c.Wb,0,c);else if(c.dispatchEvent("readystatechange"),Am(c)==4){Ls(c.b,Hu(c,"Request complete")),c.c=!1;try{var p=uw(c);e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var x;if(x=p===0){var N=String(c.l).match(lW)[1]||null;if(!N&&u.self&&u.self.location){var O=u.self.location.protocol;N=O.substr(0,O.length-1)}x=!Aoe.test(N?N.toLowerCase():"")}w=x}if(w)c.dispatchEvent("complete"),c.dispatchEvent("success");else{try{var B=2<Am(c)?c.a.statusText:""}catch(Q){Ls(c.b,"Can not get status: "+Q.message),B=""}c.h=B+" ["+uw(c)+"]",gV(c)}}finally{aw(c)}}}}function aw(c,p){if(c.a){mV(c);var _=c.a,w=c.C[0]?d:null;c.a=null,c.C=null,p||c.dispatchEvent("ready");try{_.onreadystatechange=w}catch(x){(c=c.b)&&c.log(cV,"Problem encountered resetting onreadystatechange: "+x.message,void 0)}}}function mV(c){c.a&&c.u&&(c.a.ontimeout=null),c.s&&(u.clearTimeout(c.s),c.s=null)}function Am(c){return c.a?c.a.readyState:0}function uw(c){try{return 2<Am(c)?c.a.status:-1}catch{return-1}}function Foe(c){try{return c.a?c.a.responseText:""}catch(p){return Ls(c.b,"Can not get responseText: "+p.message),""}}n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case dV:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var c=this.b;return c&&c.log(cV,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(p){return Ls(this.b,"Can not get response: "+p.message),null}};function Hu(c,p){return p+" ["+c.P+" "+c.l+" "+uw(c)+"]"}function qf(c){var p=Voe;this.g=[],this.u=p,this.s=c||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}qf.prototype.cancel=function(c){if(this.a)this.c instanceof qf&&this.c.cancel();else{if(this.b){var p=this.b;delete this.b,c?p.cancel(c):(p.l--,0>=p.l&&p.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(c=new Rm,lw(this),Om(this,!1,c))}},qf.prototype.m=function(c,p){this.i=!1,Om(this,c,p)};function Om(c,p,_){c.a=!0,c.c=_,c.f=!p,yV(c)}function lw(c){if(c.a){if(!c.v)throw new cw;c.v=!1}}function Boe(c,p){ZD(c,null,p,void 0)}function ZD(c,p,_,w){c.g.push([p,_,w]),c.a&&yV(c)}qf.prototype.then=function(c,p,_){var w,x,N=new kt(function(O,B){w=O,x=B});return ZD(this,w,function(O){O instanceof Rm?N.cancel():x(O)}),N.then(c,p,_)},qf.prototype.$goog_Thenable=!0;function _V(c){return Nb(c.g,function(p){return m(p[1])})}function yV(c){if(c.h&&c.a&&_V(c)){var p=c.h,_=fw[p];_&&(u.clearTimeout(_.a),delete fw[p]),c.h=0}c.b&&(c.b.l--,delete c.b),p=c.c;for(var w=_=!1;c.g.length&&!c.i;){var x=c.g.shift(),N=x[0],O=x[1];if(x=x[2],N=c.f?O:N)try{var B=N.call(x||c.s,p);B!==void 0&&(c.f=c.f&&(B==p||B instanceof Error),c.c=p=B),(we(p)||typeof u.Promise=="function"&&p instanceof u.Promise)&&(w=!0,c.i=!0)}catch(Q){p=Q,c.f=!0,_V(c)||(_=!0)}}c.c=p,w&&(B=I(c.m,c,!0),w=I(c.m,c,!1),p instanceof qf?(ZD(p,B,w),p.C=!0):p.then(B,w)),_&&(p=new bV(p),fw[p.a]=p,c.h=p.a)}function cw(){ae.call(this)}A(cw,ae),cw.prototype.message="Deferred has already fired",cw.prototype.name="AlreadyCalledError";function Rm(){ae.call(this)}A(Rm,ae),Rm.prototype.message="Deferred was canceled",Rm.prototype.name="CanceledError";function bV(c){this.a=u.setTimeout(I(this.c,this),0),this.b=c}bV.prototype.c=function(){throw delete fw[this.a],this.b};var fw={};function XD(c){var p={},_=p.document||document,w=CB(c).toString(),x=Pb(document,"SCRIPT"),N={Xb:x,Ma:void 0},O=new qf(N),B=null,Q=p.timeout!=null?p.timeout:5e3;return 0<Q&&(B=window.setTimeout(function(){hw(x,!0);var oe=new QD(Uoe,"Timeout reached for loading script "+w);lw(O),Om(O,!1,oe)},Q),N.Ma=B),x.onload=x.onreadystatechange=function(){x.readyState&&x.readyState!="loaded"&&x.readyState!="complete"||(hw(x,p.xd||!1,B),lw(O),Om(O,!0,null))},x.onerror=function(){hw(x,!0,B);var oe=new QD(Hoe,"Error while loading script "+w);lw(O),Om(O,!1,oe)},N=p.attributes||{},kn(N,{type:"text/javascript",charset:"UTF-8"}),PB(x,N),mie(x,c),Woe(_).appendChild(x),O}function Woe(c){var p;return(p=(c||document).getElementsByTagName("HEAD"))&&p.length!=0?p[0]:c.documentElement}function Voe(){if(this&&this.Xb){var c=this.Xb;c&&c.tagName=="SCRIPT"&&hw(c,!0,this.Ma)}}function hw(c,p,_){_!=null&&u.clearTimeout(_),c.onload=d,c.onerror=d,c.onreadystatechange=d,p&&window.setTimeout(function(){c&&c.parentNode&&c.parentNode.removeChild(c)},0)}var Hoe=0,Uoe=1;function QD(c,p){var _="Jsloader error (code #"+c+")";p&&(_+=": "+p),ae.call(this,_),this.code=c}A(QD,ae);function dw(c){this.f=c}A(dw,Dm),dw.prototype.a=function(){return new this.f},dw.prototype.b=function(){return{}};function Qs(c,p,_){if(this.c=c,c=p||{},this.l=c.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=c.secureTokenTimeout||joe,this.g=Gs(c.secureTokenHeaders||zoe),this.h=c.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=c.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=c.firebaseTimeout||qoe,this.a=Gs(c.firebaseHeaders||$oe),_&&(this.a["X-Client-Version"]=_,this.g["X-Client-Version"]=_),_=Ba()=="Node",_=u.XMLHttpRequest||_&&He.INTERNAL.node&&He.INTERNAL.node.XMLHttpRequest,!_&&!Zs())throw new L("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Zs()?this.f=new ow(self):wW()?this.f=new dw(_):this.f=new rw,this.b=null}var JD,Js="idToken",joe=new Ul(3e4,6e4),zoe={"Content-Type":"application/x-www-form-urlencoded"},qoe=new Ul(3e4,6e4),$oe={"Content-Type":"application/json"};function wV(c,p){p?c.a["X-Firebase-Locale"]=p:delete c.a["X-Firebase-Locale"]}function pw(c,p){p&&(c.l=eL("https://securetoken.googleapis.com/v1/token",p),c.h=eL("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",p),c.i=eL("https://identitytoolkit.googleapis.com/v2/",p))}function eL(c,p){return c=Io(c),p=Io(p.url),c.f=c.a+c.f,dm(c,p.c),c.a=p.a,pm(c,p.g),c.toString()}function CV(c,p){p?(c.a["X-Client-Version"]=p,c.g["X-Client-Version"]=p):(delete c.a["X-Client-Version"],delete c.g["X-Client-Version"])}Qs.prototype.T=function(){return this.b};function SV(c,p,_,w,x,N,O){Zie()||Zs()?c=I(c.u,c):(JD||(JD=new kt(function(B,Q){Goe(B,Q)})),c=I(c.s,c)),c(p,_,w,x,N,O)}Qs.prototype.u=function(c,p,_,w,x,N){if(Zs()&&(typeof u.fetch>"u"||typeof u.Headers>"u"||typeof u.Request>"u"))throw new L("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var O=new Nm(this.f);if(N){O.g=Math.max(0,N);var B=setTimeout(function(){O.dispatchEvent("timeout")},N)}sW(O,"complete",function(){B&&clearTimeout(B);var Q=null;try{Q=JSON.parse(Foe(this))||null}catch{Q=null}p&&p(Q)}),aD(O,"ready",function(){B&&clearTimeout(B),JB(this)}),aD(O,"timeout",function(){B&&clearTimeout(B),JB(this),p&&p(null)}),Roe(O,c,_,w,x)};var Koe=new Pa(Ab,"https://apis.google.com/js/client.js?onload=%{onload}"),EV="__fcb"+Math.floor(1e6*Math.random()).toString();function Goe(c,p){if(((window.gapi||{}).client||{}).request)c();else{u[EV]=function(){((window.gapi||{}).client||{}).request?c():p(Error("CORS_UNSUPPORTED"))};var _=jx(Koe,{onload:EV});Boe(XD(_),function(){p(Error("CORS_UNSUPPORTED"))})}}Qs.prototype.s=function(c,p,_,w,x){var N=this;JD.then(function(){window.gapi.client.setApiKey(N.c);var O=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:c,method:_,body:w,headers:x,authType:"none",callback:function(B){window.gapi.auth.setToken(O),p&&p(B)}})}).o(function(O){p&&p({error:{message:O&&O.message||"CORS_UNSUPPORTED"}})})};function Yoe(c,p){return new kt(function(_,w){p.grant_type=="refresh_token"&&p.refresh_token||p.grant_type=="authorization_code"&&p.code?SV(c,c.l+"?key="+encodeURIComponent(c.c),function(x){x?x.error?w(uL(x)):x.access_token&&x.refresh_token?_(x):w(new L("internal-error")):w(new L("network-request-failed"))},"POST",fW(p).toString(),c.g,c.m.get()):w(new L("internal-error"))})}function IV(c,p,_,w,x,N,O){var B=Io(p+_);nr(B,"key",c.c),O&&nr(B,"cb",Date.now().toString());var Q=w=="GET";if(Q)for(var oe in x)x.hasOwnProperty(oe)&&nr(B,oe,x[oe]);return new kt(function(ot,un){SV(c,B.toString(),function(qt){qt?qt.error?un(uL(qt,N||{})):ot(qt):un(new L("network-request-failed"))},w,Q?void 0:pW(EW(x)),c.a,c.v.get())})}function $f(c){if(c=c.email,typeof c!="string"||!Jie.test(c))throw new L("invalid-email")}function xV(c){"email"in c&&$f(c)}function Zoe(c,p){return Ot(c,sse,{identifier:p,continueUri:$b()?mm():"http://localhost"}).then(function(_){return _.signinMethods||[]})}function Xoe(c){return Ot(c,_se,{}).then(function(p){return p.authorizedDomains||[]})}function xo(c){if(!c[Js])throw c.mfaPendingCredential?new L("multi-factor-auth-required",null,Gs(c)):new L("internal-error")}function tL(c){if(c.phoneNumber||c.temporaryProof){if(!c.phoneNumber||!c.temporaryProof)throw new L("internal-error")}else{if(!c.sessionInfo)throw new L("missing-verification-id");if(!c.code)throw new L("missing-verification-code")}}Qs.prototype.Ab=function(){return Ot(this,Cse,{})},Qs.prototype.Cb=function(c,p){return Ot(this,kV,{idToken:c,email:p})},Qs.prototype.Db=function(c,p){return Ot(this,TV,{idToken:c,password:p})};var Qoe={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};n=Qs.prototype,n.Eb=function(c,p){var _={idToken:c},w=[];return am(Qoe,function(x,N){var O=p[N];O===null?w.push(x):N in p&&(_[N]=O)}),w.length&&(_.deleteAttribute=w),Ot(this,kV,_)},n.wb=function(c,p){return c={requestType:"PASSWORD_RESET",email:c},kn(c,p),Ot(this,mse,c)},n.xb=function(c,p){return c={requestType:"EMAIL_SIGNIN",email:c},kn(c,p),Ot(this,pse,c)},n.vb=function(c,p){return c={requestType:"VERIFY_EMAIL",idToken:c},kn(c,p),Ot(this,gse,c)},n.Fb=function(c,p,_){return c={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:c,newEmail:p},kn(c,_),Ot(this,vse,c)};function Joe(c,p){return Ot(c,wse,p)}n.gb=function(c){return Ot(this,kse,c)};function ese(c,p){return Ot(c,Sse,p).then(function(_){return _.phoneSessionInfo.sessionInfo})}function DV(c){if(!c.phoneVerificationInfo)throw new L("internal-error");if(!c.phoneVerificationInfo.sessionInfo)throw new L("missing-verification-id");if(!c.phoneVerificationInfo.code)throw new L("missing-verification-code")}function tse(c,p){return Ot(c,Ese,p).then(function(_){return _.phoneResponseInfo.sessionInfo})}function nse(c,p,_){return Ot(c,use,{idToken:p,deleteProvider:_})}function nL(c){if(!c.requestUri||!c.sessionId&&!c.postBody&&!c.pendingToken)throw new L("internal-error")}function rL(c,p){return p.oauthIdToken&&p.providerId&&p.providerId.indexOf("oidc.")==0&&!p.pendingToken&&(c.sessionId?p.nonce=c.sessionId:c.postBody&&(c=new Pf(c.postBody),fD(c,"nonce")&&(p.nonce=c.get("nonce")))),p}function LV(c){var p=null;if(c.needConfirmation?(c.code="account-exists-with-different-credential",p=tw(c)):c.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(c.code="credential-already-in-use",p=tw(c)):c.errorMessage=="EMAIL_EXISTS"?(c.code="email-already-in-use",p=tw(c)):c.errorMessage&&(p=AV(c.errorMessage)),p)throw p;xo(c)}function iL(c,p){return p.returnIdpCredential=!0,Ot(c,Ise,p)}function oL(c,p){return p.returnIdpCredential=!0,Ot(c,Dse,p)}function sL(c,p){return p.returnIdpCredential=!0,p.autoCreate=!1,Ot(c,xse,p)}function aL(c){if(!c.oobCode)throw new L("invalid-action-code")}n.ob=function(c,p){return Ot(this,bse,{oobCode:c,newPassword:p})},n.Sa=function(c){return Ot(this,ise,{oobCode:c})},n.kb=function(c){return Ot(this,rse,{oobCode:c})};var rse={endpoint:"setAccountInfo",A:aL,Z:"email",B:!0},ise={endpoint:"resetPassword",A:aL,G:function(c){var p=c.requestType;if(!p||!c.email&&p!="EMAIL_SIGNIN"&&p!="VERIFY_AND_CHANGE_EMAIL")throw new L("internal-error")},B:!0},ose={endpoint:"signupNewUser",A:function(c){if($f(c),!c.password)throw new L("weak-password")},G:xo,V:!0,B:!0},sse={endpoint:"createAuthUri",B:!0},ase={endpoint:"deleteAccount",O:["idToken"]},use={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(c){if(!Array.isArray(c.deleteProvider))throw new L("internal-error")}},lse={endpoint:"emailLinkSignin",O:["email","oobCode"],A:$f,G:xo,V:!0,B:!0},cse={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:$f,G:xo,V:!0},fse={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:DV,G:xo,B:!0,Na:!0},hse={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:DV,G:xo,B:!0,Na:!0},dse={endpoint:"getAccountInfo"},pse={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(c){if(c.requestType!="EMAIL_SIGNIN")throw new L("internal-error");$f(c)},Z:"email",B:!0},gse={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(c){if(c.requestType!="VERIFY_EMAIL")throw new L("internal-error")},Z:"email",B:!0},vse={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(c){if(c.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new L("internal-error")},Z:"email",B:!0},mse={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(c){if(c.requestType!="PASSWORD_RESET")throw new L("internal-error");$f(c)},Z:"email",B:!0},_se={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},yse={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(c){if(!c.recaptchaSiteKey)throw new L("internal-error")}},bse={endpoint:"resetPassword",A:aL,Z:"email",B:!0},wse={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},kV={endpoint:"setAccountInfo",O:["idToken"],A:xV,V:!0},TV={endpoint:"setAccountInfo",O:["idToken"],A:function(c){if(xV(c),!c.password)throw new L("weak-password")},G:xo,V:!0},Cse={endpoint:"signupNewUser",G:xo,V:!0,B:!0},Sse={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(c){if(!c.phoneEnrollmentInfo)throw new L("internal-error");if(!c.phoneEnrollmentInfo.phoneNumber)throw new L("missing-phone-number");if(!c.phoneEnrollmentInfo.recaptchaToken)throw new L("missing-app-credential")},G:function(c){if(!c.phoneSessionInfo||!c.phoneSessionInfo.sessionInfo)throw new L("internal-error")},B:!0,Na:!0},Ese={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(c){if(!c.phoneSignInInfo||!c.phoneSignInInfo.recaptchaToken)throw new L("missing-app-credential")},G:function(c){if(!c.phoneResponseInfo||!c.phoneResponseInfo.sessionInfo)throw new L("internal-error")},B:!0,Na:!0},Ise={endpoint:"verifyAssertion",A:nL,Za:rL,G:LV,V:!0,B:!0},xse={endpoint:"verifyAssertion",A:nL,Za:rL,G:function(c){if(c.errorMessage&&c.errorMessage=="USER_NOT_FOUND")throw new L("user-not-found");if(c.errorMessage)throw AV(c.errorMessage);xo(c)},V:!0,B:!0},Dse={endpoint:"verifyAssertion",A:function(c){if(nL(c),!c.idToken)throw new L("internal-error")},Za:rL,G:LV,V:!0},Lse={endpoint:"verifyCustomToken",A:function(c){if(!c.token)throw new L("invalid-custom-token")},G:xo,V:!0,B:!0},NV={endpoint:"verifyPassword",A:function(c){if($f(c),!c.password)throw new L("wrong-password")},G:xo,V:!0,B:!0},kse={endpoint:"verifyPhoneNumber",A:tL,G:xo,B:!0},Tse={endpoint:"verifyPhoneNumber",A:function(c){if(!c.idToken)throw new L("internal-error");tL(c)},G:function(c){if(c.temporaryProof)throw c.code="credential-already-in-use",tw(c);xo(c)}},Nse={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:tL,G:xo,B:!0},Ase={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(c){if(!!c[Js]^!!c.refreshToken)throw new L("internal-error")},B:!0,Na:!0};function Ot(c,p,_){if(!soe(_,p.O))return Mn(new L("internal-error"));var w=!!p.Na,x=p.Vb||"POST",N;return Xe(_).then(p.A).then(function(){return p.V&&(_.returnSecureToken=!0),p.B&&c.b&&typeof _.tenantId>"u"&&(_.tenantId=c.b),w?IV(c,c.i,p.endpoint,x,_,p.Ib,p.mb||!1):IV(c,c.h,p.endpoint,x,_,p.Ib,p.mb||!1)}).then(function(O){return N=O,p.Za?p.Za(_,N):N}).then(p.G).then(function(){if(!p.Z)return N;if(!(p.Z in N))throw new L("internal-error");return N[p.Z]})}function AV(c){return uL({error:{errors:[{message:c}],code:400,message:c}})}function uL(c,p){var _=(c.error&&c.error.errors&&c.error.errors[0]||{}).reason||"",w={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(_=w[_]?new L(w[_]):null)return _;_=c.error&&c.error.message||"",w={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},kn(w,p||{}),p=(p=_.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<p.length?p[1]:void 0;for(var x in w)if(_.indexOf(x)===0)return new L(w[x],p);return!p&&c&&(p=ym(c)),new L("internal-error",p)}function Ose(c){this.b=c,this.a=null,this.sb=Rse(this)}function Rse(c){return Vse().then(function(){return new kt(function(p,_){Pn("gapi.iframes.getContext")().open({where:document.body,url:c.b,messageHandlersFilter:Pn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(w){function x(){clearTimeout(N),p()}c.a=w,c.a.restyle({setHideOnLeave:!1});var N=setTimeout(function(){_(Error("Network Error"))},Wse.get());w.ping(x).then(x,function(){_(Error("Network Error"))})})})})}function Mse(c,p){return c.sb.then(function(){return new kt(function(_){c.a.send(p.type,p,_,Pn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function Pse(c,p){c.sb.then(function(){c.a.register("authEvent",p,Pn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var Fse=new Pa(Ab,"https://apis.google.com/js/api.js?onload=%{onload}"),Bse=new Ul(3e4,6e4),Wse=new Ul(5e3,15e3),gw=null;function Vse(){return gw||(gw=new kt(function(c,p){function _(){xW(),Pn("gapi.load")("gapi.iframes",{callback:c,ontimeout:function(){xW(),p(Error("Network Error"))},timeout:Bse.get()})}if(Pn("gapi.iframes.Iframe"))c();else if(Pn("gapi.load"))_();else{var w="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[w]=function(){Pn("gapi.load")?_():p(Error("Network Error"))},w=jx(Fse,{onload:w}),Xe(XD(w)).o(function(){p(Error("Network Error"))})}}).o(function(c){throw gw=null,c}))}function OV(c,p,_,w){this.l=c,this.h=p,this.i=_,this.g=w,this.f=null,this.g?(c=Io(this.g.url),c=zb(c.c,c.a,c.g,"/emulator/auth/iframe")):c=zb("https",this.l,null,"/__/auth/iframe"),this.a=c,nr(this.a,"apiKey",this.h),nr(this.a,"appName",this.i),this.b=null,this.c=[]}OV.prototype.toString=function(){return this.f?nr(this.a,"v",this.f):Fa(this.a.b,"v"),this.b?nr(this.a,"eid",this.b):Fa(this.a.b,"eid"),this.c.length?nr(this.a,"fw",this.c.join(",")):Fa(this.a.b,"fw"),this.a.toString()};function lL(c,p,_,w,x,N){this.u=c,this.s=p,this.c=_,this.m=w,this.v=N,this.i=this.g=this.l=null,this.a=x,this.h=this.f=null}lL.prototype.zb=function(c){return this.h=c,this},lL.prototype.toString=function(){if(this.v){var c=Io(this.v.url);c=zb(c.c,c.a,c.g,"/emulator/auth/handler")}else c=zb("https",this.u,null,"/__/auth/handler");if(nr(c,"apiKey",this.s),nr(c,"appName",this.c),nr(c,"authType",this.m),this.a.isOAuthProvider){var p=this.a;try{var _=He.app(this.c).auth().la()}catch{_=null}p.pb=_,nr(c,"providerId",this.a.providerId),_=this.a,p=EW(_.Jb);for(var w in p)p[w]=p[w].toString();w=_.Qc,p=Gs(p);for(var x=0;x<w.length;x++){var N=w[x];N in p&&delete p[N]}_.qb&&_.pb&&!p[_.qb]&&(p[_.qb]=_.pb),qo(p)||nr(c,"customParameters",ym(p))}if(typeof this.a.Rb=="function"&&(_=this.a.Rb(),_.length&&nr(c,"scopes",_.join(","))),this.l?nr(c,"redirectUrl",this.l):Fa(c.b,"redirectUrl"),this.g?nr(c,"eventId",this.g):Fa(c.b,"eventId"),this.i?nr(c,"v",this.i):Fa(c.b,"v"),this.b)for(var O in this.b)this.b.hasOwnProperty(O)&&!xs(c,O)&&nr(c,O,this.b[O]);return this.h?nr(c,"tid",this.h):Fa(c.b,"tid"),this.f?nr(c,"eid",this.f):Fa(c.b,"eid"),O=cL(this.c),O.length&&nr(c,"fw",O.join(",")),c.toString()};function cL(c){try{return He.app(c).auth().Ga()}catch{return[]}}function RV(c,p,_,w,x,N){this.s=c,this.g=p,this.b=_,this.f=N,this.c=w||null,this.i=x||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function MV(c){var p=mm();return Xoe(c).then(function(_){e:{var w=Io(p),x=w.c;w=w.a;for(var N=0;N<_.length;N++){var O=_[N],B=w,Q=x;if(O.indexOf("chrome-extension://")==0?B=Io(O).a==B&&Q=="chrome-extension":Q!="http"&&Q!="https"?B=!1:Qie.test(O)?B=B==O:(O=O.split(".").join("\\."),B=new RegExp("^(.+\\."+O+"|"+O+")$","i").test(B)),B){_=!0;break e}}_=!1}if(!_)throw new HD(mm())})}function PV(c){return c.m||(c.m=qb().then(function(){if(!c.u){var p=c.c,_=c.i,w=cL(c.b),x=new OV(c.s,c.g,c.b,c.f);x.f=p,x.b=_,x.c=pe(w||[]),c.u=x.toString()}c.v=new Ose(c.u),Hse(c)})),c.m}n=RV.prototype,n.Pb=function(c,p,_){var w=new L("popup-closed-by-user"),x=new L("web-storage-unsupported"),N=this,O=!1;return this.ma().then(function(){Use(N).then(function(B){B||(c&&Ff(c),p(x),O=!0)})}).o(function(){}).then(function(){if(!O)return Xie(c)}).then(function(){if(!O)return sp(_).then(function(){p(w)})})},n.Yb=function(){var c=si();return!_m(c)&&!IW(c)},n.Ub=function(){return!1},n.Nb=function(c,p,_,w,x,N,O,B){if(!c)return Mn(new L("popup-blocked"));if(O&&!_m())return this.ma().o(function(oe){Ff(c),x(oe)}),w(),Xe();this.a||(this.a=MV(FV(this)));var Q=this;return this.a.then(function(){var oe=Q.ma().o(function(ot){throw Ff(c),x(ot),ot});return w(),oe}).then(function(){if(WD(_),!O){var oe=Mm(Q.s,Q.g,Q.b,p,_,null,N,Q.c,void 0,Q.i,B,Q.f);mW(oe,c)}}).o(function(oe){throw oe.code=="auth/network-request-failed"&&(Q.a=null),oe})};function FV(c){return c.l||(c.C=c.c?cp(c.c,cL(c.b)):null,c.l=new Qs(c.g,X(c.i),c.C),c.f&&pw(c.l,c.f)),c.l}n.Ob=function(c,p,_,w){this.a||(this.a=MV(FV(this)));var x=this;return this.a.then(function(){WD(p);var N=Mm(x.s,x.g,x.b,c,p,mm(),_,x.c,void 0,x.i,w,x.f);mW(N)}).o(function(N){throw N.code=="auth/network-request-failed"&&(x.a=null),N})},n.ma=function(){var c=this;return PV(this).then(function(){return c.v.sb}).o(function(){throw c.a=null,new L("network-request-failed")})},n.ac=function(){return!0};function Mm(c,p,_,w,x,N,O,B,Q,oe,ot,un){return c=new lL(c,p,_,w,x,un),c.l=N,c.g=O,c.i=B,c.b=Gs(Q||null),c.f=oe,c.zb(ot).toString()}function Hse(c){if(!c.v)throw Error("IfcHandler must be initialized!");Pse(c.v,function(p){var _={};if(p&&p.authEvent){var w=!1;for(p=sV(p.authEvent),_=0;_<c.h.length;_++)w=c.h[_](p)||w;return _={},_.status=w?"ACK":"ERROR",Xe(_)}return _.status="ERROR",Xe(_)})}function Use(c){var p={type:"webStorageSupport"};return PV(c).then(function(){return Mse(c.v,p)}).then(function(_){if(_&&_.length&&typeof _[0].webStorageSupport<"u")return _[0].webStorageSupport;throw Error()})}n.Ea=function(c){this.h.push(c)},n.Ta=function(c){ne(this.h,function(p){return p==c})};function BV(c){if(this.a=c||He.INTERNAL.reactNative&&He.INTERNAL.reactNative.AsyncStorage,!this.a)throw new L("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}n=BV.prototype,n.get=function(c){return Xe(this.a.getItem(c)).then(function(p){return p&&hp(p)})},n.set=function(c,p){return Xe(this.a.setItem(c,ym(p)))},n.U=function(c){return Xe(this.a.removeItem(c))},n.ca=function(){},n.ia=function(){};function WV(c){this.b=c,this.a={},this.f=I(this.c,this)}var VV=[];function jse(){var c=Zs()?self:null;if(bn(VV,function(_){_.b==c&&(p=_)}),!p){var p=new WV(c);VV.push(p)}return p}WV.prototype.c=function(c){var p=c.data.eventType,_=c.data.eventId,w=this.a[p];if(w&&0<w.length){c.ports[0].postMessage({status:"ack",eventId:_,eventType:p,response:null});var x=[];bn(w,function(N){x.push(Xe().then(function(){return N(c.origin,c.data.data)}))}),zB(x).then(function(N){var O=[];bn(N,function(B){O.push({fulfilled:B.Qb,value:B.value,reason:B.reason?B.reason.message:void 0})}),bn(O,function(B){for(var Q in B)typeof B[Q]>"u"&&delete B[Q]}),c.ports[0].postMessage({status:"done",eventId:_,eventType:p,response:O})})}};function HV(c,p,_){qo(c.a)&&c.b.addEventListener("message",c.f),typeof c.a[p]>"u"&&(c.a[p]=[]),c.a[p].push(_)}function UV(c){this.a=c}UV.prototype.postMessage=function(c,p){this.a.postMessage(c,p)};function jV(c){this.c=c,this.b=!1,this.a=[]}function zV(c,p,_,w){var x,N=_||{},O,B,Q,oe=null;if(c.b)return Mn(Error("connection_unavailable"));var ot=w?800:50,un=typeof MessageChannel<"u"?new MessageChannel:null;return new kt(function(qt,Ur){un?(x=Math.floor(Math.random()*Math.pow(10,20)).toString(),un.port1.start(),B=setTimeout(function(){Ur(Error("unsupported_event"))},ot),O=function(Uu){Uu.data.eventId===x&&(Uu.data.status==="ack"?(clearTimeout(B),Q=setTimeout(function(){Ur(Error("timeout"))},3e3)):Uu.data.status==="done"?(clearTimeout(Q),typeof Uu.data.response<"u"?qt(Uu.data.response):Ur(Error("unknown_error"))):(clearTimeout(B),clearTimeout(Q),Ur(Error("invalid_response"))))},oe={messageChannel:un,onMessage:O},c.a.push(oe),un.port1.addEventListener("message",O),c.c.postMessage({eventType:p,eventId:x,data:N},[un.port2])):Ur(Error("connection_unavailable"))}).then(function(qt){return fL(c,oe),qt}).o(function(qt){throw fL(c,oe),qt})}function fL(c,p){if(p){var _=p.messageChannel,w=p.onMessage;_&&(_.port1.removeEventListener("message",w),_.port1.close()),ne(c.a,function(x){return x==p})}}jV.prototype.close=function(){for(;0<this.a.length;)fL(this,this.a[0]);this.b=!0};function qV(){if(!pL())throw new L("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var c=this;Zs()&&self?(this.v=jse(),HV(this.v,"keyChanged",function(p,_){return GV(c).then(function(w){return 0<w.length&&bn(c.a,function(x){x(w)}),{keyProcessed:q(w,_.key)}})}),HV(this.v,"ping",function(){return Xe(["keyChanged"])})):ioe().then(function(p){(c.h=p)&&(c.g=new jV(new UV(p)),zV(c.g,"ping",null,!0).then(function(_){_[0].fulfilled&&q(_[0].value,"keyChanged")&&(c.s=!0)}).o(function(){}))})}var hL;function zse(c){return new kt(function(p,_){var w=c.m.deleteDatabase("firebaseLocalStorageDb");w.onsuccess=function(){p()},w.onerror=function(x){_(Error(x.target.error))}})}function $V(c){return new kt(function(p,_){var w=c.m.open("firebaseLocalStorageDb",1);w.onerror=function(x){try{x.preventDefault()}catch{}_(Error(x.target.error))},w.onupgradeneeded=function(x){x=x.target.result;try{x.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(N){_(N)}},w.onsuccess=function(x){x=x.target.result,x.objectStoreNames.contains("firebaseLocalStorage")?p(x):zse(c).then(function(){return $V(c)}).then(function(N){p(N)}).o(function(N){_(N)})}})}function dL(c){return c.i||(c.i=$V(c)),c.i}function vw(c,p){function _(x,N){dL(c).then(p).then(x).o(function(O){if(3<++w)N(O);else return dL(c).then(function(B){return B.close(),c.i=void 0,_(x,N)}).o(function(B){N(B)})})}var w=0;return new kt(_)}function pL(){try{return!!u.indexedDB}catch{return!1}}function Pm(c){return c.objectStore("firebaseLocalStorage")}function Fm(c,p){return c.transaction(["firebaseLocalStorage"],p?"readwrite":"readonly")}function vp(c){return new kt(function(p,_){c.onsuccess=function(w){w&&w.target?p(w.target.result):p()},c.onerror=function(w){_(w.target.error)}})}n=qV.prototype,n.set=function(c,p){var _=this,w=!1;return vw(this,function(x){return x=Pm(Fm(x,!0)),vp(x.get(c))}).then(function(x){return vw(_,function(N){if(N=Pm(Fm(N,!0)),x)return x.value=p,vp(N.put(x));_.b++,w=!0;var O={};return O.fbase_key=c,O.value=p,vp(N.add(O))})}).then(function(){return _.c[c]=p,KV(_,c)}).oa(function(){w&&_.b--})};function KV(c,p){return c.g&&c.h&&roe()===c.h?zV(c.g,"keyChanged",{key:p},c.s).then(function(){}).o(function(){}):Xe()}n.get=function(c){return vw(this,function(p){return vp(Pm(Fm(p,!1)).get(c))}).then(function(p){return p&&p.value})},n.U=function(c){var p=this,_=!1;return vw(this,function(w){return _=!0,p.b++,vp(Pm(Fm(w,!0)).delete(c))}).then(function(){return delete p.c[c],KV(p,c)}).oa(function(){_&&p.b--})};function GV(c){return dL(c).then(function(p){var _=Pm(Fm(p,!1));return _.getAll?vp(_.getAll()):new kt(function(w,x){var N=[],O=_.openCursor();O.onsuccess=function(B){(B=B.target.result)?(N.push(B.value),B.continue()):w(N)},O.onerror=function(B){x(B.target.error)}})}).then(function(p){var _={},w=[];if(c.b==0){for(w=0;w<p.length;w++)_[p[w].fbase_key]=p[w].value;w=_W(c.c,_),c.c=_}return w})}n.ca=function(c){this.a.length==0&&qse(this),this.a.push(c)},n.ia=function(c){ne(this.a,function(p){return p==c}),this.a.length==0&&YV(this)};function qse(c){function p(){c.f=setTimeout(function(){c.l=GV(c).then(function(_){0<_.length&&bn(c.a,function(w){w(_)})}).then(function(){p()}).o(function(_){_.message!="STOP_EVENT"&&p()})},800)}YV(c),p()}function YV(c){c.l&&c.l.cancel("STOP_EVENT"),c.f&&(clearTimeout(c.f),c.f=null)}function ZV(c){var p=this,_=null;this.a=[],this.type="indexedDB",this.c=c,this.b=Xe().then(function(){if(pL()){var w=Wf(),x="__sak"+w;return hL||(hL=new qV),_=hL,_.set(x,w).then(function(){return _.get(x)}).then(function(N){if(N!==w)throw Error("indexedDB not supported!");return _.U(x)}).then(function(){return _}).o(function(){return p.c})}return p.c}).then(function(w){return p.type=w.type,w.ca(function(x){bn(p.a,function(N){N(x)})}),w})}n=ZV.prototype,n.get=function(c){return this.b.then(function(p){return p.get(c)})},n.set=function(c,p){return this.b.then(function(_){return _.set(c,p)})},n.U=function(c){return this.b.then(function(p){return p.U(c)})},n.ca=function(c){this.a.push(c)},n.ia=function(c){ne(this.a,function(p){return p==c})};function Bm(){this.a={},this.type="inMemory"}n=Bm.prototype,n.get=function(c){return Xe(this.a[c])},n.set=function(c,p){return this.a[c]=p,Xe()},n.U=function(c){return delete this.a[c],Xe()},n.ca=function(){},n.ia=function(){};function mw(){if(!$se())throw Ba()=="Node"?new L("internal-error","The LocalStorage compatibility library was not found."):new L("web-storage-unsupported");this.a=XV()||He.INTERNAL.node.localStorage,this.type="localStorage"}function XV(){try{var c=u.localStorage,p=Wf();return c&&(c.setItem(p,"1"),c.removeItem(p)),c}catch{return null}}function $se(){var c=Ba()=="Node";if(c=XV()||c&&He.INTERNAL.node&&He.INTERNAL.node.localStorage,!c)return!1;try{return c.setItem("__sak","1"),c.removeItem("__sak"),!0}catch{return!1}}n=mw.prototype,n.get=function(c){var p=this;return Xe().then(function(){var _=p.a.getItem(c);return hp(_)})},n.set=function(c,p){var _=this;return Xe().then(function(){var w=ym(p);w===null?_.U(c):_.a.setItem(c,w)})},n.U=function(c){var p=this;return Xe().then(function(){p.a.removeItem(c)})},n.ca=function(c){u.window&&Is(u.window,"storage",c)},n.ia=function(c){u.window&&$o(u.window,"storage",c)};function gL(){this.type="nullStorage"}n=gL.prototype,n.get=function(){return Xe(null)},n.set=function(){return Xe()},n.U=function(){return Xe()},n.ca=function(){},n.ia=function(){};function vL(){if(!Kse())throw Ba()=="Node"?new L("internal-error","The SessionStorage compatibility library was not found."):new L("web-storage-unsupported");this.a=QV()||He.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function QV(){try{var c=u.sessionStorage,p=Wf();return c&&(c.setItem(p,"1"),c.removeItem(p)),c}catch{return null}}function Kse(){var c=Ba()=="Node";if(c=QV()||c&&He.INTERNAL.node&&He.INTERNAL.node.sessionStorage,!c)return!1;try{return c.setItem("__sak","1"),c.removeItem("__sak"),!0}catch{return!1}}n=vL.prototype,n.get=function(c){var p=this;return Xe().then(function(){var _=p.a.getItem(c);return hp(_)})},n.set=function(c,p){var _=this;return Xe().then(function(){var w=ym(p);w===null?_.U(c):_.a.setItem(c,w)})},n.U=function(c){var p=this;return Xe().then(function(){p.a.removeItem(c)})},n.ca=function(){},n.ia=function(){};function Gse(){var c={};c.Browser=Yse,c.Node=Zse,c.ReactNative=Xse,c.Worker=Qse,this.a=c[Ba()]}var mL,Yse={F:mw,cb:vL},Zse={F:mw,cb:vL},Xse={F:BV,cb:gL},Qse={F:mw,cb:gL},mp={rd:"local",NONE:"none",td:"session"};function Jse(c){var p=new L("invalid-persistence-type"),_=new L("unsupported-persistence-type");e:{for(w in mp)if(mp[w]==c){var w=!0;break e}w=!1}if(!w||typeof c!="string")throw p;switch(Ba()){case"ReactNative":if(c==="session")throw _;break;case"Node":if(c!=="none")throw _;break;case"Worker":if(c==="session"||!pL()&&c!=="none")throw _;break;default:if(!mD()&&c!=="none")throw _}}function JV(){var c=!!(!IW(si())&&gD()),p=_m(),_=mD();this.m=c,this.h=p,this.l=_,this.a={},mL||(mL=new Gse),c=mL;try{this.g=!dD()&&DW()||!u.indexedDB?new c.a.F:new ZV(Zs()?new Bm:new c.a.F)}catch{this.g=new Bm,this.h=!0}try{this.i=new c.a.cb}catch{this.i=new Bm}this.v=new Bm,this.f=I(this.Zb,this),this.b={}}var _L;function Wm(){return _L||(_L=new JV),_L}function Kf(c,p){switch(p){case"session":return c.i;case"none":return c.v;default:return c.g}}function _p(c,p){return"firebase:"+c.name+(p?":"+p:"")}function eae(c,p,_){var w=_p(p,_),x=Kf(c,p.F);return c.get(p,_).then(function(N){var O=null;try{O=hp(u.localStorage.getItem(w))}catch{}if(O&&!N)return u.localStorage.removeItem(w),c.set(p,O,_);O&&N&&x.type!="localStorage"&&u.localStorage.removeItem(w)})}n=JV.prototype,n.get=function(c,p){return Kf(this,c.F).get(_p(c,p))};function yp(c,p,_){return _=_p(p,_),p.F=="local"&&(c.b[_]=null),Kf(c,p.F).U(_)}n.set=function(c,p,_){var w=_p(c,_),x=this,N=Kf(this,c.F);return N.set(w,p).then(function(){return N.get(w)}).then(function(O){c.F=="local"&&(x.b[w]=O)})},n.addListener=function(c,p,_){c=_p(c,p),this.l&&(this.b[c]=u.localStorage.getItem(c)),qo(this.a)&&(Kf(this,"local").ca(this.f),this.h||(dD()||!DW())&&u.indexedDB||!this.l||tae(this)),this.a[c]||(this.a[c]=[]),this.a[c].push(_)},n.removeListener=function(c,p,_){c=_p(c,p),this.a[c]&&(ne(this.a[c],function(w){return w==_}),this.a[c].length==0&&delete this.a[c]),qo(this.a)&&(Kf(this,"local").ia(this.f),yL(this))};function tae(c){yL(c),c.c=setInterval(function(){for(var p in c.a){var _=u.localStorage.getItem(p),w=c.b[p];_!=w&&(c.b[p]=_,_=new Rf({type:"storage",key:p,target:window,oldValue:w,newValue:_,a:!0}),c.Zb(_))}},1e3)}function yL(c){c.c&&(clearInterval(c.c),c.c=null)}n.Zb=function(c){if(c&&c.g){var p=c.a.key;if(p==null)for(var _ in this.a){var w=this.b[_];typeof w>"u"&&(w=null);var x=u.localStorage.getItem(_);x!==w&&(this.b[_]=x,this.nb(_))}else if(p.indexOf("firebase:")==0&&this.a[p]){if(typeof c.a.a<"u"?Kf(this,"local").ia(this.f):yL(this),this.m){if(_=u.localStorage.getItem(p),w=c.a.newValue,w!==_)w!==null?u.localStorage.setItem(p,w):u.localStorage.removeItem(p);else if(this.b[p]===w&&typeof c.a.a>"u")return}var N=this;_=function(){(typeof c.a.a<"u"||N.b[p]!==u.localStorage.getItem(p))&&(N.b[p]=u.localStorage.getItem(p),N.nb(p))},Ys&&Wl&&Wl==10&&u.localStorage.getItem(p)!==c.a.newValue&&c.a.newValue!==c.a.oldValue?setTimeout(_,10):_()}}else bn(c,I(this.nb,this))},n.nb=function(c){this.a[c]&&bn(this.a[c],function(p){p()})};function nae(c){this.a=c,this.b=Wm()}var bL={name:"authEvent",F:"local"};function rae(c){return c.b.get(bL,c.a).then(function(p){return sV(p)})}function iae(){this.a=Wm()}function oae(){this.b=-1}function _w(c,p){this.b=e6,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=c,this.h=p,this.l=u.Int32Array?new Int32Array(64):Array(64),yw===void 0&&(u.Int32Array?yw=new Int32Array(r6):yw=r6),this.reset()}var yw;A(_w,oae);for(var e6=64,sae=e6-1,t6=[],wL=0;wL<sae;wL++)t6[wL]=0;var n6=ue(128,t6);_w.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):pe(this.h)};function CL(c){for(var p=c.f,_=c.l,w=0,x=0;x<p.length;)_[w++]=p[x]<<24|p[x+1]<<16|p[x+2]<<8|p[x+3],x=4*w;for(p=16;64>p;p++){x=_[p-15]|0,w=_[p-2]|0;var N=(_[p-16]|0)+((x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3)|0,O=(_[p-7]|0)+((w>>>17|w<<15)^(w>>>19|w<<13)^w>>>10)|0;_[p]=N+O|0}w=c.a[0]|0,x=c.a[1]|0;var B=c.a[2]|0,Q=c.a[3]|0,oe=c.a[4]|0,ot=c.a[5]|0,un=c.a[6]|0;for(N=c.a[7]|0,p=0;64>p;p++){var qt=((w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10))+(w&x^w&B^x&B)|0;O=oe&ot^~oe&un,N=N+((oe>>>6|oe<<26)^(oe>>>11|oe<<21)^(oe>>>25|oe<<7))|0,O=O+(yw[p]|0)|0,O=N+(O+(_[p]|0)|0)|0,N=un,un=ot,ot=oe,oe=Q+O|0,Q=B,B=x,x=w,w=O+qt|0}c.a[0]=c.a[0]+w|0,c.a[1]=c.a[1]+x|0,c.a[2]=c.a[2]+B|0,c.a[3]=c.a[3]+Q|0,c.a[4]=c.a[4]+oe|0,c.a[5]=c.a[5]+ot|0,c.a[6]=c.a[6]+un|0,c.a[7]=c.a[7]+N|0}function SL(c,p,_){_===void 0&&(_=p.length);var w=0,x=c.c;if(typeof p=="string")for(;w<_;)c.f[x++]=p.charCodeAt(w++),x==c.b&&(CL(c),x=0);else if(v(p))for(;w<_;){var N=p[w++];if(!(typeof N=="number"&&0<=N&&255>=N&&N==(N|0)))throw Error("message must be a byte array");c.f[x++]=N,x==c.b&&(CL(c),x=0)}else throw Error("message must be string or array");c.c=x,c.g+=_}var r6=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function i6(){_w.call(this,8,aae)}A(i6,_w);var aae=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function o6(c,p,_,w,x,N){this.v=c,this.i=p,this.l=_,this.m=w||null,this.u=x||null,this.s=N,this.h=p+":"+_,this.C=new iae,this.g=new nae(this.h),this.f=null,this.b=[],this.a=this.c=null}function bw(c){return new L("invalid-cordova-configuration",c)}n=o6.prototype,n.ma=function(){return this.Ia?this.Ia:this.Ia=eoe().then(function(){if(typeof Pn("universalLinks.subscribe",u)!="function")throw bw("cordova-universal-links-plugin-fix is not installed");if(typeof Pn("BuildInfo.packageName",u)>"u")throw bw("cordova-plugin-buildinfo is not installed");if(typeof Pn("cordova.plugins.browsertab.openUrl",u)!="function")throw bw("cordova-plugin-browsertab is not installed");if(typeof Pn("cordova.InAppBrowser.open",u)!="function")throw bw("cordova-plugin-inappbrowser is not installed")},function(){throw new L("cordova-not-ready")})};function uae(){for(var c=20,p=[];0<c;)p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),c--;return p.join("")}function lae(c){var p=new i6;SL(p,c),c=[];var _=8*p.g;56>p.c?SL(p,n6,56-p.c):SL(p,n6,p.b-(p.c-56));for(var w=63;56<=w;w--)p.f[w]=_&255,_/=256;for(CL(p),w=_=0;w<p.i;w++)for(var x=24;0<=x;x-=8)c[_++]=p.a[w]>>x&255;return boe(c)}n.Pb=function(c,p){return p(new L("operation-not-supported-in-this-environment")),Xe()},n.Nb=function(){return Mn(new L("operation-not-supported-in-this-environment"))},n.ac=function(){return!1},n.Yb=function(){return!0},n.Ub=function(){return!0},n.Ob=function(c,p,_,w){if(this.c)return Mn(new L("redirect-operation-pending"));var x=this,N=u.document,O=null,B=null,Q=null,oe=null;return this.c=Xe().then(function(){return WD(p),a6(x)}).then(function(){return cae(x,c,p,_,w)}).then(function(){return new kt(function(ot,un){B=function(){var qt=Pn("cordova.plugins.browsertab.close",u);return ot(),typeof qt=="function"&&qt(),x.a&&typeof x.a.close=="function"&&(x.a.close(),x.a=null),!1},x.Ea(B),Q=function(){O||(O=sp(2e3).then(function(){un(new L("redirect-cancelled-by-user"))}))},oe=function(){_D()&&Q()},N.addEventListener("resume",Q,!1),si().toLowerCase().match(/android/)||N.addEventListener("visibilitychange",oe,!1)}).o(function(ot){return EL(x).then(function(){throw ot})})}).oa(function(){Q&&N.removeEventListener("resume",Q,!1),oe&&N.removeEventListener("visibilitychange",oe,!1),O&&O.cancel(),B&&x.Ta(B),x.c=null})};function cae(c,p,_,w,x){var N=uae(),O=new Xs(p,w,null,N,new L("no-auth-event"),null,x),B=Pn("BuildInfo.packageName",u);if(typeof B!="string")throw new L("invalid-cordova-configuration");var Q=Pn("BuildInfo.displayName",u),oe={};if(si().toLowerCase().match(/iphone|ipad|ipod/))oe.ibi=B;else if(si().toLowerCase().match(/android/))oe.apn=B;else return Mn(new L("operation-not-supported-in-this-environment"));Q&&(oe.appDisplayName=Q),N=lae(N),oe.sessionId=N;var ot=Mm(c.v,c.i,c.l,p,_,null,w,c.m,oe,c.u,x,c.s);return c.ma().then(function(){var un=c.h;return c.C.a.set(bL,O.w(),un)}).then(function(){var un=Pn("cordova.plugins.browsertab.isAvailable",u);if(typeof un!="function")throw new L("invalid-cordova-configuration");var qt=null;un(function(Ur){if(Ur){if(qt=Pn("cordova.plugins.browsertab.openUrl",u),typeof qt!="function")throw new L("invalid-cordova-configuration");qt(ot)}else{if(qt=Pn("cordova.InAppBrowser.open",u),typeof qt!="function")throw new L("invalid-cordova-configuration");Ur=si(),c.a=qt(ot,Ur.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Ur.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function s6(c,p){for(var _=0;_<c.b.length;_++)try{c.b[_](p)}catch{}}function a6(c){return c.f||(c.f=c.ma().then(function(){return new kt(function(p){function _(w){return p(w),c.Ta(_),!1}c.Ea(_),fae(c)})})),c.f}function EL(c){var p=null;return rae(c.g).then(function(_){return p=_,_=c.g,yp(_.b,bL,_.a)}).then(function(){return p})}function fae(c){function p(O){w=!0,x&&x.cancel(),EL(c).then(function(B){var Q=_;if(B&&O&&O.url){var oe=null;Q=QW(O.url),Q.indexOf("/__/auth/callback")!=-1&&(oe=Io(Q),oe=hp(xs(oe,"firebaseError")||null),oe=(oe=typeof oe=="object"?F(oe):null)?new Xs(B.c,B.b,null,null,oe,null,B.T()):new Xs(B.c,B.b,Q,B.f,null,null,B.T())),Q=oe||_}s6(c,Q)})}var _=new Xs("unknown",null,null,null,new L("no-auth-event")),w=!1,x=sp(500).then(function(){return EL(c).then(function(){w||s6(c,_)})}),N=u.handleOpenURL;u.handleOpenURL=function(O){if(O.toLowerCase().indexOf(Pn("BuildInfo.packageName",u).toLowerCase()+"://")==0&&p({url:O}),typeof N=="function")try{N(O)}catch(B){console.error(B)}},VD||(VD=new Loe),koe(p)}n.Ea=function(c){this.b.push(c),a6(this).o(function(p){p.code==="auth/invalid-cordova-configuration"&&(p=new Xs("unknown",null,null,null,new L("no-auth-event")),c(p))})},n.Ta=function(c){ne(this.b,function(p){return p==c})};function hae(c){this.a=c,this.b=Wm()}var IL={name:"pendingRedirect",F:"session"};function dae(c){return c.b.set(IL,"pending",c.a)}function xL(c){return yp(c.b,IL,c.a)}function pae(c){return c.b.get(IL,c.a).then(function(p){return p=="pending"})}function ww(c,p,_,w){this.i={},this.u=0,this.D=c,this.v=p,this.m=_,this.J=w,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Sw,this.C=new m6,this.g=new hae(p6(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=u6(this.D,this.v,this.m,se,this.J)}function u6(c,p,_,w,x){var N=He.SDK_VERSION||null;return pD()?new o6(c,p,_,N,w,x):new RV(c,p,_,N,w,x)}ww.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=u6(this.D,this.v,this.m,null,this.J),this.i={}};function l6(c){c.f||(c.f=!0,c.a.Ea(c.l));var p=c.a;return c.a.ma().o(function(_){throw c.a==p&&c.reset(),_})}function c6(c){c.a.Yb()&&l6(c).o(function(p){var _=new Xs("unknown",null,null,null,new L("operation-not-supported-in-this-environment"));LL(p)&&c.s(_)}),c.a.Ub()||g6(c.b)}function Cw(c,p){q(c.h,p)||c.h.push(p),c.f||pae(c.g).then(function(_){_?xL(c.g).then(function(){l6(c).o(function(w){var x=new Xs("unknown",null,null,null,new L("operation-not-supported-in-this-environment"));LL(w)&&c.s(x)})}):c6(c)}).o(function(){c6(c)})}function DL(c,p){ne(c.h,function(_){return _==p})}ww.prototype.s=function(c){if(!c)throw new L("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),c&&c.getUid()&&this.i.hasOwnProperty(c.getUid()))return!1;for(var p=!1,_=0;_<this.h.length;_++){var w=this.h[_];if(w.Gb(c.c,c.b)){(p=this.c[c.c])&&(p.h(c,w),c&&(c.f||c.b)&&(this.i[c.getUid()]=!0,this.u=Date.now())),p=!0;break}}return g6(this.b),p};var gae=new Ul(2e3,1e4),vae=new Ul(3e4,6e4);ww.prototype.ra=function(){return this.b.ra()};function f6(c,p,_,w,x,N,O){return c.a.Nb(p,_,w,function(){c.f||(c.f=!0,c.a.Ea(c.l))},function(){c.reset()},x,N,O)}function LL(c){return!!(c&&c.code=="auth/cordova-not-ready")}function h6(c,p,_,w,x){var N;return dae(c.g).then(function(){return c.a.Ob(p,_,w,x).o(function(O){if(LL(O))throw new L("operation-not-supported-in-this-environment");return N=O,xL(c.g).then(function(){throw N})}).then(function(){return c.a.ac()?new kt(function(){}):xL(c.g).then(function(){return c.ra()}).then(function(){}).o(function(){})})})}function d6(c,p,_,w,x){return c.a.Pb(w,function(N){p.na(_,null,N,x)},gae.get())}var kL={};function p6(c,p,_){return c=c+":"+p,_&&(c=c+":"+_.url),c}function TL(c,p,_,w){var x=p6(p,_,w);return kL[x]||(kL[x]=new ww(c,p,_,w)),kL[x]}function Sw(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Sw.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Sw.prototype.h=function(c,p){if(c){this.reset(),this.g=!0;var _=c.c,w=c.b,x=c.a&&c.a.code=="auth/web-storage-unsupported",N=c.a&&c.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!x&&!N),_!="unknown"||x||N?c.a?(Gf(this,!0,null,c.a),Xe()):p.Fa(_,w)?mae(this,c,p):Mn(new L("invalid-auth-event")):(Gf(this,!1,null,null),Xe())}else Mn(new L("invalid-auth-event"))};function g6(c){c.g||(c.g=!0,Gf(c,!1,null,null))}function Ew(c){c.g&&!c.i&&Gf(c,!1,null,null)}function mae(c,p,_){_=_.Fa(p.c,p.b);var w=p.g,x=p.f,N=p.i,O=p.T(),B=!!p.c.match(/Redirect$/);_(w,x,O,N).then(function(Q){Gf(c,B,Q,null)}).o(function(Q){Gf(c,B,null,Q)})}function _ae(c,p){if(c.b=function(){return Mn(p)},c.c.length)for(var _=0;_<c.c.length;_++)c.c[_](p)}function v6(c,p){if(c.b=function(){return Xe(p)},c.f.length)for(var _=0;_<c.f.length;_++)c.f[_](p)}function Gf(c,p,_,w){p?w?_ae(c,w):v6(c,_):v6(c,{user:null}),c.f=[],c.c=[]}Sw.prototype.ra=function(){var c=this;return new kt(function(p,_){c.b?c.b().then(p,_):(c.f.push(p),c.c.push(_),yae(c))})};function yae(c){var p=new L("timeout");c.a&&c.a.cancel(),c.a=sp(vae.get()).then(function(){c.b||(c.g=!0,Gf(c,!0,null,p))})}function m6(){}m6.prototype.h=function(c,p){if(c){var _=c.c,w=c.b;c.a?(p.na(c.c,null,c.a,c.b),Xe()):p.Fa(_,w)?bae(c,p):Mn(new L("invalid-auth-event"))}else Mn(new L("invalid-auth-event"))};function bae(c,p){var _=c.b,w=c.c;p.Fa(w,_)(c.g,c.f,c.T(),c.i).then(function(x){p.na(w,x,null,_)}).o(function(x){p.na(w,null,x,_)})}function _6(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(c){this.jb=c},enumerable:!1})}function NL(c,p){this.a=p,Pe(this,"verificationId",c)}NL.prototype.confirm=function(c){return c=oV(this.verificationId,c),this.a(c)};function AL(c,p,_,w){return new Vu(c).gb(p,_).then(function(x){return new NL(x,w)})}function wae(c){var p=zW(c);if(!(p&&p.exp&&p.auth_time&&p.iat))throw new L("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yi(this,{token:c,expirationTime:bm(1e3*p.exp),authTime:bm(1e3*p.auth_time),issuedAtTime:bm(1e3*p.iat),signInProvider:p.firebase&&p.firebase.sign_in_provider?p.firebase.sign_in_provider:null,signInSecondFactor:p.firebase&&p.firebase.sign_in_second_factor?p.firebase.sign_in_second_factor:null,claims:p})}function OL(c,p,_){var w=p&&p[b6];if(!w)throw new L("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=c,this.f=Gs(p),this.g=_,this.c=new Jb(null,w),this.b=[];var x=this;bn(p[y6]||[],function(N){(N=ED(N))&&x.b.push(N)}),Pe(this,"auth",this.a),Pe(this,"session",this.c),Pe(this,"hints",this.b)}var y6="mfaInfo",b6="mfaPendingCredential";OL.prototype.Rc=function(c){var p=this;return c.tb(this.a.a,this.c).then(function(_){var w=Gs(p.f);return delete w[y6],delete w[b6],kn(w,_),p.g(w)})};function RL(c,p,_,w){L.call(this,"multi-factor-auth-required",w,p),this.b=new OL(c,p,_),Pe(this,"resolver",this.b)}A(RL,L);function w6(c,p,_){if(c&&y(c.serverResponse)&&c.code==="auth/multi-factor-auth-required")try{return new RL(p,c.serverResponse,_,c.message)}catch{}return null}function C6(){}C6.prototype.tb=function(c,p,_){return p.type==Em?Cae(this,c,p,_):Sae(this,c,p)};function Cae(c,p,_,w){return _.Ha().then(function(x){return x={idToken:x},typeof w<"u"&&(x.displayName=w),kn(x,{phoneVerificationInfo:Im(c.a)}),Ot(p,fse,x)})}function Sae(c,p,_){return _.Ha().then(function(w){return w={mfaPendingCredential:w},kn(w,{phoneVerificationInfo:Im(c.a)}),Ot(p,hse,w)})}function ML(c){Pe(this,"factorId",c.fa),this.a=c}A(ML,C6);function S6(c){if(ML.call(this,c),this.a.fa!=Vu.PROVIDER_ID)throw new L("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}A(S6,ML);function bp(c,p){Eo.call(this,c);for(var _ in p)this[_]=p[_]}A(bp,Eo);function PL(c,p){this.a=c,this.b=[],this.c=I(this.yc,this),Is(this.a,"userReloaded",this.c);var _=[];p&&p.multiFactor&&p.multiFactor.enrolledFactors&&bn(p.multiFactor.enrolledFactors,function(w){var x=null,N={};if(w){w.uid&&(N[xD]=w.uid),w.displayName&&(N[kW]=w.displayName),w.enrollmentTime&&(N[ID]=new Date(w.enrollmentTime).toISOString()),w.phoneNumber&&(N[DD]=w.phoneNumber);try{x=new wm(N)}catch{}w=x}else w=null;w&&_.push(w)}),Iw(this,_)}function Eae(c){var p=[];return bn(c.mfaInfo||[],function(_){(_=ED(_))&&p.push(_)}),p}n=PL.prototype,n.yc=function(c){Iw(this,Eae(c.hd))};function Iw(c,p){c.b=p,Pe(c,"enrolledFactors",p)}n.Sb=function(){return this.a.I().then(function(c){return new Jb(c,null)})},n.fc=function(c,p){var _=this,w=this.a.a;return this.Sb().then(function(x){return c.tb(w,x,p)}).then(function(x){return Ha(_.a,x),_.a.reload()})},n.bd=function(c){var p=this,_=typeof c=="string"?c:c.uid,w=this.a.a;return this.a.I().then(function(x){return Ot(w,Ase,{idToken:x,mfaEnrollmentId:_})}).then(function(x){var N=Tf(p.b,function(O){return O.uid!=_});return Iw(p,N),Ha(p.a,x),p.a.reload().o(function(O){if(O.code!="auth/user-token-expired")throw O})})},n.w=function(){return{multiFactor:{enrolledFactors:Nf(this.b,function(c){return c.w()})}}};function FL(c,p,_){if(this.h=c,this.i=p,this.g=_,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}FL.prototype.start=function(){this.a=this.c,BL(this,!0)};function Iae(c,p){return p?(c.a=c.c,c.g()):(p=c.a,c.a*=2,c.a>c.f&&(c.a=c.f),p)}function BL(c,p){c.stop(),c.b=sp(Iae(c,p)).then(function(){return noe()}).then(function(){return c.h()}).then(function(){BL(c,!0)}).o(function(_){c.i(_)&&BL(c,!1)})}FL.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function WL(c){this.f=c,this.b=this.a=null,this.c=Date.now()}WL.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function E6(c,p){typeof p>"u"&&(c.b?(p=c.b,p=p.a-p.g):p=0),c.c=Date.now()+1e3*p}function I6(c,p){c.b=Xb(p[Js]||""),c.a=p.refreshToken,p=p.expiresIn,E6(c,typeof p<"u"?Number(p):void 0)}function xae(c,p){c.b=p.b,c.a=p.a,c.c=p.c}function Dae(c,p){return Yoe(c.f,p).then(function(_){return c.b=Xb(_.access_token),c.a=_.refresh_token,E6(c,_.expires_in),{accessToken:c.b.toString(),refreshToken:c.a}}).o(function(_){throw _.code=="auth/user-token-expired"&&(c.a=null),_})}WL.prototype.getToken=function(c){return c=!!c,this.b&&!this.a?Mn(new L("user-token-expired")):c||!this.b||Date.now()>this.c-3e4?this.a?Dae(this,{grant_type:"refresh_token",refresh_token:this.a}):Xe(null):Xe({accessToken:this.b.toString(),refreshToken:this.a})};function xw(c,p){this.a=c||null,this.b=p||null,Yi(this,{lastSignInTime:bm(p||null),creationTime:bm(c||null)})}function Lae(c){return new xw(c.a,c.b)}xw.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function kae(c,p,_,w,x,N){Yi(this,{uid:c,displayName:w||null,photoURL:x||null,email:_||null,phoneNumber:N||null,providerId:p})}function Go(c,p,_){this.N=[],this.l=c.apiKey,this.m=c.appName,this.s=c.authDomain||null;var w=He.SDK_VERSION?cp(He.SDK_VERSION):null;this.a=new Qs(this.l,X(se),w),(this.u=c.emulatorConfig||null)&&pw(this.a,this.u),this.h=new WL(this.a),$L(this,p[Js]),I6(this.h,p),Pe(this,"refreshToken",this.h.a),D6(this,_||{}),Gi.call(this),this.P=!1,this.s&&Bf()&&(this.b=TL(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=Tae(this),this.ba=I(this.ib,this);var x=this;this.za=null,this.Pa=function(N){x.xa(N.h)},this.qa=null,this.Ba=function(N){VL(x,N.c)},this.$=null,this.aa=[],this.Oa=function(N){Vm(x,N.f)},this.ja=null,this.S=new PL(this,_),Pe(this,"multiFactor",this.S)}A(Go,Gi),Go.prototype.xa=function(c){this.za=c,wV(this.a,c)};function VL(c,p){c.u=p,pw(c.a,p),c.b&&(p=c.b,c.b=TL(c.s,c.l,c.m,c.u),c.P&&(DL(p,c),Cw(c.b,c)))}Go.prototype.la=function(){return this.za};function HL(c,p){c.qa&&$o(c.qa,"languageCodeChanged",c.Pa),(c.qa=p)&&Is(p,"languageCodeChanged",c.Pa)}function UL(c,p){c.$&&$o(c.$,"emulatorConfigChanged",c.Ba),(c.$=p)&&Is(p,"emulatorConfigChanged",c.Ba)}function Vm(c,p){c.aa=p,CV(c.a,He.SDK_VERSION?cp(He.SDK_VERSION,c.aa):null)}Go.prototype.Ga=function(){return pe(this.aa)};function jL(c,p){c.ja&&$o(c.ja,"frameworkChanged",c.Oa),(c.ja=p)&&Is(p,"frameworkChanged",c.Oa)}Go.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function zL(c){try{return He.app(c.m).auth()}catch{throw new L("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+c.m+"'!")}}function Tae(c){return new FL(function(){return c.I(!0)},function(p){return!!(p&&p.code=="auth/network-request-failed")},function(){var p=c.h.c-Date.now()-3e5;return 0<p?p:0})}function x6(c){c.J||c.D.b||(c.D.start(),$o(c,"tokenChanged",c.ba),Is(c,"tokenChanged",c.ba))}function qL(c){$o(c,"tokenChanged",c.ba),c.D.stop()}function $L(c,p){c.Aa=p,Pe(c,"_lat",p)}function Nae(c,p){ne(c.W,function(_){return _==p})}function Yf(c){for(var p=[],_=0;_<c.W.length;_++)p.push(c.W[_](c));return zB(p).then(function(){return c})}function Hm(c){c.b&&!c.P&&(c.P=!0,Cw(c.b,c))}function D6(c,p){Yi(c,{uid:p.uid,displayName:p.displayName||null,photoURL:p.photoURL||null,email:p.email||null,emailVerified:p.emailVerified||!1,phoneNumber:p.phoneNumber||null,isAnonymous:p.isAnonymous||!1,tenantId:p.tenantId||null,metadata:new xw(p.createdAt,p.lastLoginAt),providerData:[]}),c.a.b=c.tenantId}Pe(Go.prototype,"providerId","firebase");function L6(){}function KL(c){return Xe().then(function(){if(c.J)throw new L("app-deleted")})}function GL(c){return Nf(c.providerData,function(p){return p.providerId})}function YL(c,p){p&&(k6(c,p.providerId),c.providerData.push(p))}function k6(c,p){ne(c.providerData,function(_){return _.providerId==p})}function ql(c,p,_){(p!="uid"||_)&&c.hasOwnProperty(p)&&Pe(c,p,_)}function Dw(c,p){c!=p&&(Yi(c,{uid:p.uid,displayName:p.displayName,photoURL:p.photoURL,email:p.email,emailVerified:p.emailVerified,phoneNumber:p.phoneNumber,isAnonymous:p.isAnonymous,tenantId:p.tenantId,providerData:[]}),p.metadata?Pe(c,"metadata",Lae(p.metadata)):Pe(c,"metadata",new xw),bn(p.providerData,function(_){YL(c,_)}),xae(c.h,p.h),Pe(c,"refreshToken",c.h.a),Iw(c.S,p.S.b))}n=Go.prototype,n.reload=function(){var c=this;return Dr(this,KL(this).then(function(){return ZL(c).then(function(){return Yf(c)}).then(L6)}))};function ZL(c){return c.I().then(function(p){var _=c.isAnonymous;return Aae(c,p).then(function(){return _||ql(c,"isAnonymous",!1),p})})}n.oc=function(c){return this.I(c).then(function(p){return new wae(p)})},n.I=function(c){var p=this;return Dr(this,KL(this).then(function(){return p.h.getToken(c)}).then(function(_){if(!_)throw new L("internal-error");return _.accessToken!=p.Aa&&($L(p,_.accessToken),p.dispatchEvent(new bp("tokenChanged"))),ql(p,"refreshToken",_.refreshToken),_.accessToken}))};function Ha(c,p){p[Js]&&c.Aa!=p[Js]&&(I6(c.h,p),c.dispatchEvent(new bp("tokenChanged")),$L(c,p[Js]),ql(c,"refreshToken",c.h.a))}function Aae(c,p){return Ot(c.a,dse,{idToken:p}).then(I(c.Kc,c))}n.Kc=function(c){if(c=c.users,!c||!c.length)throw new L("internal-error");c=c[0],D6(this,{uid:c.localId,displayName:c.displayName,photoURL:c.photoUrl,email:c.email,emailVerified:!!c.emailVerified,phoneNumber:c.phoneNumber,lastLoginAt:c.lastLoginAt,createdAt:c.createdAt,tenantId:c.tenantId});for(var p=Oae(c),_=0;_<p.length;_++)YL(this,p[_]);ql(this,"isAnonymous",!(this.email&&c.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new bp("userReloaded",{hd:c}))};function Oae(c){return(c=c.providerUserInfo)&&c.length?Nf(c,function(p){return new kae(p.rawId,p.providerId,p.email,p.displayName,p.photoUrl,p.phoneNumber)}):[]}n.Lc=function(c){return yD("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(c)},n.ub=function(c){var p=this,_=null;return Dr(this,c.c(this.a,this.uid).then(function(w){return Ha(p,w),_=Um(p,w,"reauthenticate"),p.i=null,p.reload()}).then(function(){return _}),!0)};function Lw(c,p){return ZL(c).then(function(){if(q(GL(c),p))return Yf(c).then(function(){throw new L("provider-already-linked")})})}n.Cc=function(c){return yD("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(c)},n.rb=function(c){var p=this,_=null;return Dr(this,Lw(this,c.providerId).then(function(){return p.I()}).then(function(w){return c.b(p.a,w)}).then(function(w){return _=Um(p,w,"link"),T6(p,w)}).then(function(){return _}))},n.Dc=function(c,p){var _=this;return Dr(this,Lw(this,"phone").then(function(){return AL(zL(_),c,p,I(_.rb,_))}))},n.Mc=function(c,p){var _=this;return Dr(this,Xe().then(function(){return AL(zL(_),c,p,I(_.ub,_))}),!0)};function Um(c,p,_){var w=BD(p);return p=$W(p),Wa({user:c,credential:w,additionalUserInfo:p,operationType:_})}function T6(c,p){return Ha(c,p),c.reload().then(function(){return c})}n.Cb=function(c){var p=this;return Dr(this,this.I().then(function(_){return p.a.Cb(_,c)}).then(function(_){return Ha(p,_),p.reload()}))},n.ed=function(c){var p=this;return Dr(this,this.I().then(function(_){return c.b(p.a,_)}).then(function(_){return Ha(p,_),p.reload()}))},n.Db=function(c){var p=this;return Dr(this,this.I().then(function(_){return p.a.Db(_,c)}).then(function(_){return Ha(p,_),p.reload()}))},n.Eb=function(c){if(c.displayName===void 0&&c.photoURL===void 0)return KL(this);var p=this;return Dr(this,this.I().then(function(_){return p.a.Eb(_,{displayName:c.displayName,photoUrl:c.photoURL})}).then(function(_){return Ha(p,_),ql(p,"displayName",_.displayName||null),ql(p,"photoURL",_.photoUrl||null),bn(p.providerData,function(w){w.providerId==="password"&&(Pe(w,"displayName",p.displayName),Pe(w,"photoURL",p.photoURL))}),Yf(p)}).then(L6))},n.cd=function(c){var p=this;return Dr(this,ZL(this).then(function(_){return q(GL(p),c)?nse(p.a,_,[c]).then(function(w){var x={};return bn(w.providerUserInfo||[],function(N){x[N.providerId]=!0}),bn(GL(p),function(N){x[N]||k6(p,N)}),x[Vu.PROVIDER_ID]||Pe(p,"phoneNumber",null),Yf(p)}):Yf(p).then(function(){throw new L("no-such-provider")})}))},n.delete=function(){var c=this;return Dr(this,this.I().then(function(p){return Ot(c.a,ase,{idToken:p})}).then(function(){c.dispatchEvent(new bp("userDeleted"))})).then(function(){for(var p=0;p<c.N.length;p++)c.N[p].cancel("app-deleted");HL(c,null),UL(c,null),jL(c,null),c.N=[],c.J=!0,qL(c),Pe(c,"refreshToken",null),c.b&&DL(c.b,c)})},n.Gb=function(c,p){return!!(c=="linkViaPopup"&&(this.g||null)==p&&this.f||c=="reauthViaPopup"&&(this.g||null)==p&&this.f||c=="linkViaRedirect"&&(this.ga||null)==p||c=="reauthViaRedirect"&&(this.ga||null)==p)},n.na=function(c,p,_,w){c!="linkViaPopup"&&c!="reauthViaPopup"||w!=(this.g||null)||(_&&this.C?this.C(_):p&&!_&&this.f&&this.f(p),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(c,p){return c=="linkViaPopup"&&p==(this.g||null)?I(this.Lb,this):c=="reauthViaPopup"&&p==(this.g||null)?I(this.Mb,this):c=="linkViaRedirect"&&(this.ga||null)==p?I(this.Lb,this):c=="reauthViaRedirect"&&(this.ga||null)==p?I(this.Mb,this):null},n.Ec=function(c){var p=this;return N6(this,"linkViaPopup",c,function(){return Lw(p,c.providerId).then(function(){return Yf(p)})},!1)},n.Nc=function(c){return N6(this,"reauthViaPopup",c,function(){return Xe()},!0)};function N6(c,p,_,w,x){if(!Bf())return Mn(new L("operation-not-supported-in-this-environment"));if(c.i&&!x)return Mn(c.i);var N=AD(_.providerId),O=Wf(c.uid+":::"),B=null;(!_m()||gD())&&c.s&&_.isOAuthProvider&&(B=Mm(c.s,c.l,c.m,p,_,null,O,He.SDK_VERSION||null,null,null,c.tenantId,c.u));var Q=bW(B,N&&N.va,N&&N.ua);return w=w().then(function(){if(O6(c),!x)return c.I().then(function(){})}).then(function(){return f6(c.b,Q,p,_,O,!!B,c.tenantId)}).then(function(){return new kt(function(oe,ot){c.na(p,null,new L("cancelled-popup-request"),c.g||null),c.f=oe,c.C=ot,c.g=O,c.c=d6(c.b,c,p,Q,O)})}).then(function(oe){return Q&&Ff(Q),oe?Wa(oe):null}).o(function(oe){throw Q&&Ff(Q),oe}),Dr(c,w,x)}n.Fc=function(c){var p=this;return A6(this,"linkViaRedirect",c,function(){return Lw(p,c.providerId)},!1)},n.Oc=function(c){return A6(this,"reauthViaRedirect",c,function(){return Xe()},!0)};function A6(c,p,_,w,x){if(!Bf())return Mn(new L("operation-not-supported-in-this-environment"));if(c.i&&!x)return Mn(c.i);var N=null,O=Wf(c.uid+":::");return w=w().then(function(){if(O6(c),!x)return c.I().then(function(){})}).then(function(){return c.ga=O,Yf(c)}).then(function(B){return c.ha&&(B=c.ha,B=B.b.set(XL,c.w(),B.a)),B}).then(function(){return h6(c.b,p,_,O,c.tenantId)}).o(function(B){if(N=B,c.ha)return M6(c.ha);throw N}).then(function(){if(N)throw N}),Dr(c,w,x)}function O6(c){if(!c.b||!c.P)throw c.b&&!c.P?new L("internal-error"):new L("auth-domain-config-required")}n.Lb=function(c,p,_,w){var x=this;this.c&&(this.c.cancel(),this.c=null);var N=null;return _=this.I().then(function(O){return oL(x.a,{requestUri:c,postBody:w,sessionId:p,idToken:O})}).then(function(O){return N=Um(x,O,"link"),T6(x,O)}).then(function(){return N}),Dr(this,_)},n.Mb=function(c,p,_,w){var x=this;this.c&&(this.c.cancel(),this.c=null);var N=null,O=Xe().then(function(){return pp(sL(x.a,{requestUri:c,sessionId:p,postBody:w,tenantId:_}),x.uid)}).then(function(B){return N=Um(x,B,"reauthenticate"),Ha(x,B),x.i=null,x.reload()}).then(function(){return N});return Dr(this,O,!0)},n.vb=function(c){var p=this,_=null;return Dr(this,this.I().then(function(w){return _=w,typeof c>"u"||qo(c)?{}:Yb(new Gb(c))}).then(function(w){return p.a.vb(_,w)}).then(function(w){if(p.email!=w)return p.reload()}).then(function(){}))},n.Fb=function(c,p){var _=this,w=null;return Dr(this,this.I().then(function(x){return w=x,typeof p>"u"||qo(p)?{}:Yb(new Gb(p))}).then(function(x){return _.a.Fb(w,c,x)}).then(function(x){if(_.email!=x)return _.reload()}).then(function(){}))};function Dr(c,p,_){var w=Rae(c,p,_);return c.N.push(w),w.oa(function(){J(c.N,w)}),w.o(function(x){var N=null;throw x&&x.code==="auth/multi-factor-auth-required"&&(N=w6(x.w(),zL(c),I(c.jc,c))),N||x})}n.jc=function(c){var p=null,_=this;return c=pp(Xe(c),_.uid).then(function(w){return p=Um(_,w,"reauthenticate"),Ha(_,w),_.i=null,_.reload()}).then(function(){return p}),Dr(this,c,!0)};function Rae(c,p,_){return c.i&&!_?(p.cancel(),Mn(c.i)):p.o(function(w){throw!w||w.code!="auth/user-disabled"&&w.code!="auth/user-token-expired"||(c.i||c.dispatchEvent(new bp("userInvalidated")),c.i=w),w})}n.toJSON=function(){return this.w()},n.w=function(){var c={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&kn(c,this.metadata.w()),bn(this.providerData,function(p){c.providerData.push(ooe(p))}),kn(c,this.S.w()),c};function R6(c){if(!c.apiKey)return null;var p={apiKey:c.apiKey,authDomain:c.authDomain,appName:c.appName,emulatorConfig:c.emulatorConfig},_={};if(c.stsTokenManager&&c.stsTokenManager.accessToken){_[Js]=c.stsTokenManager.accessToken,_.refreshToken=c.stsTokenManager.refreshToken||null;var w=c.stsTokenManager.expirationTime;w&&(_.expiresIn=(w-Date.now())/1e3)}else return null;var x=new Go(p,_,c);return c.providerData&&bn(c.providerData,function(N){N&&YL(x,Wa(N))}),c.redirectEventId&&(x.ga=c.redirectEventId),x}function Mae(c,p,_,w){var x=new Go(c,p);return _&&(x.ha=_),w&&Vm(x,w),x.reload().then(function(){return x})}function Pae(c,p,_,w){var x=c.h,N={};return N[Js]=x.b&&x.b.toString(),N.refreshToken=x.a,p=new Go(p||{apiKey:c.l,authDomain:c.s,appName:c.m},N),_&&(p.ha=_),w&&Vm(p,w),Dw(p,c),p}function Fae(c){this.a=c,this.b=Wm()}var XL={name:"redirectUser",F:"session"};function M6(c){return yp(c.b,XL,c.a)}function Bae(c,p){return c.b.get(XL,c.a).then(function(_){return _&&p&&(_.authDomain=p),R6(_||{})})}function QL(c){this.a=c,this.b=Wm(),this.c=null,this.f=Wae(this),this.b.addListener(Ua("local"),this.a,I(this.g,this))}QL.prototype.g=function(){var c=this,p=Ua("local");wp(this,function(){return Xe().then(function(){return c.c&&c.c.F!="local"?c.b.get(p,c.a):null}).then(function(_){if(_)return JL(c,"local").then(function(){c.c=p})})})};function JL(c,p){var _=[],w;for(w in mp)mp[w]!==p&&_.push(yp(c.b,Ua(mp[w]),c.a));return _.push(yp(c.b,ek,c.a)),Lie(_)}function Wae(c){var p=Ua("local"),_=Ua("session"),w=Ua("none");return eae(c.b,p,c.a).then(function(){return c.b.get(_,c.a)}).then(function(x){return x?_:c.b.get(w,c.a).then(function(N){return N?w:c.b.get(p,c.a).then(function(O){return O?p:c.b.get(ek,c.a).then(function(B){return B?Ua(B):p})})})}).then(function(x){return c.c=x,JL(c,x.F)}).o(function(){c.c||(c.c=p)})}var ek={name:"persistence",F:"session"};function Ua(c){return{name:"authUser",F:c}}QL.prototype.yb=function(c){var p=null,_=this;return Jse(c),wp(this,function(){return c!=_.c.F?_.b.get(_.c,_.a).then(function(w){return p=w,JL(_,c)}).then(function(){if(_.c=Ua(c),p)return _.b.set(_.c,p,_.a)}):Xe()})};function Vae(c){return wp(c,function(){return c.b.set(ek,c.c.F,c.a)})}function P6(c,p){return wp(c,function(){return c.b.set(c.c,p.w(),c.a)})}function F6(c){return wp(c,function(){return yp(c.b,c.c,c.a)})}function B6(c,p,_){return wp(c,function(){return c.b.get(c.c,c.a).then(function(w){return w&&p&&(w.authDomain=p),w&&_&&(w.emulatorConfig=_),R6(w||{})})})}function wp(c,p){return c.f=c.f.then(p,p),c.f}function ea(c){if(this.l=!1,Pe(this,"settings",new _6),Pe(this,"app",c),pn(this).options&&pn(this).options.apiKey)c=He.SDK_VERSION?cp(He.SDK_VERSION):null,this.a=new Qs(pn(this).options&&pn(this).options.apiKey,X(se),c);else throw new L("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=He.INTERNAL.createSubscribe(I(this.zc,this)),this.W=void 0,this.ib=He.INTERNAL.createSubscribe(I(this.Ac,this)),Cp(this,null),this.i=new QL(pn(this).options.apiKey+":"+pn(this).name),this.D=new Fae(pn(this).options.apiKey+":"+pn(this).name),this.$=Kn(this,$ae(this)),this.h=Kn(this,Kae(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.qa=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,jae(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,Gi.call(this),Uae(this),this.J=[],this.R=null}A(ea,Gi);function W6(c){Eo.call(this,"languageCodeChanged"),this.h=c}A(W6,Eo);function V6(c){Eo.call(this,"emulatorConfigChanged"),this.c=c}A(V6,Eo);function H6(c){Eo.call(this,"frameworkChanged"),this.f=c}A(H6,Eo),n=ea.prototype,n.yb=function(c){return c=this.i.yb(c),Kn(this,c)},n.xa=function(c){this.aa===c||this.l||(this.aa=c,wV(this.a,this.aa),this.dispatchEvent(new W6(this.la())))},n.la=function(){return this.aa},n.fd=function(){var c=u.navigator;this.xa(c&&(c.languages&&c.languages[0]||c.language||c.userLanguage)||null)},n.gd=function(c,p){if(!this.R){if(!/^https?:\/\//.test(c))throw new L("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");p=p?!!p.disableWarnings:!1,Hae(p),this.R={url:c,ec:p},this.settings.jb=!0,pw(this.a,this.R),this.dispatchEvent(new V6(this.R))}};function Hae(c){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!c&&qb().then(function(){var p=u.document.createElement("div");p.innerText="Running in emulator mode. Do not use with production credentials.",p.style.position="fixed",p.style.width="100%",p.style.backgroundColor="#ffffff",p.style.border=".1em solid #000000",p.style.color="#b50000",p.style.bottom="0px",p.style.left="0px",p.style.margin="0px",p.style.zIndex=1e4,p.style.textAlign="center",p.classList.add("firebase-emulator-warning"),u.document.body.appendChild(p)})}n.Gc=function(c){this.J.push(c),CV(this.a,He.SDK_VERSION?cp(He.SDK_VERSION,this.J):null),this.dispatchEvent(new H6(this.J))},n.Ga=function(){return pe(this.J)},n.zb=function(c){this.S===c||this.l||(this.S=c,this.a.b=this.S)},n.T=function(){return this.S};function Uae(c){Object.defineProperty(c,"lc",{get:function(){return this.la()},set:function(p){this.xa(p)},enumerable:!1}),c.aa=null,Object.defineProperty(c,"ti",{get:function(){return this.T()},set:function(p){this.zb(p)},enumerable:!1}),c.S=null,Object.defineProperty(c,"emulatorConfig",{get:function(){if(this.R){var p=Io(this.R.url);p=Wa({protocol:p.c,host:p.a,port:p.g,options:Wa({disableWarnings:this.R.ec})})}else p=null;return p},enumerable:!1})}n.toJSON=function(){return{apiKey:pn(this).options.apiKey,authDomain:pn(this).options.authDomain,appName:pn(this).name,currentUser:mt(this)&&mt(this).w()}};function tk(c){return c.Oa||Mn(new L("auth-domain-config-required"))}function jae(c){var p=pn(c).options.authDomain,_=pn(c).options.apiKey;p&&Bf()&&(c.Oa=c.$.then(function(){if(!c.l){if(c.b=TL(p,_,pn(c).name,c.R),Cw(c.b,c),mt(c)&&Hm(mt(c)),c.m){Hm(c.m);var w=c.m;w.xa(c.la()),HL(w,c),w=c.m,Vm(w,c.J),jL(w,c),w=c.m,VL(w,c.R),UL(w,c),c.m=null}return c.b}}))}n.Gb=function(c,p){switch(c){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==p&&!!this.f;default:return!1}},n.na=function(c,p,_,w){c=="signInViaPopup"&&this.g==w&&(_&&this.C?this.C(_):p&&!_&&this.f&&this.f(p),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(c,p){return c=="signInViaRedirect"||c=="signInViaPopup"&&this.g==p&&this.f?I(this.ic,this):null},n.ic=function(c,p,_,w){var x=this,N={requestUri:c,postBody:w,sessionId:p,tenantId:_};return this.c&&(this.c.cancel(),this.c=null),x.$.then(function(){return Zf(x,iL(x.a,N))})},n.Xc=function(c){if(!Bf())return Mn(new L("operation-not-supported-in-this-environment"));var p=this,_=AD(c.providerId),w=Wf(),x=null;(!_m()||gD())&&pn(this).options.authDomain&&c.isOAuthProvider&&(x=Mm(pn(this).options.authDomain,pn(this).options.apiKey,pn(this).name,"signInViaPopup",c,null,w,He.SDK_VERSION||null,null,null,this.T(),this.R));var N=bW(x,_&&_.va,_&&_.ua);return _=tk(this).then(function(O){return f6(O,N,"signInViaPopup",c,w,!!x,p.T())}).then(function(){return new kt(function(O,B){p.na("signInViaPopup",null,new L("cancelled-popup-request"),p.g),p.f=O,p.C=B,p.g=w,p.c=d6(p.b,p,"signInViaPopup",N,w)})}).then(function(O){return N&&Ff(N),O?Wa(O):null}).o(function(O){throw N&&Ff(N),O}),Kn(this,_)},n.Yc=function(c){if(!Bf())return Mn(new L("operation-not-supported-in-this-environment"));var p=this,_=tk(this).then(function(){return Vae(p.i)}).then(function(){return h6(p.b,"signInViaRedirect",c,void 0,p.T())});return Kn(this,_)};function U6(c){if(!Bf())return Mn(new L("operation-not-supported-in-this-environment"));var p=tk(c).then(function(){return c.b.ra()}).then(function(_){return _?Wa(_):null});return Kn(c,p)}n.ra=function(){var c=this;return U6(this).then(function(p){return c.b&&Ew(c.b.b),p}).o(function(p){throw c.b&&Ew(c.b.b),p})},n.dd=function(c){if(!c)return Mn(new L("null-user"));if(this.S!=c.tenantId)return Mn(new L("tenant-id-mismatch"));var p=this,_={};_.apiKey=pn(this).options.apiKey,_.authDomain=pn(this).options.authDomain,_.appName=pn(this).name;var w=Pae(c,_,p.D,p.Ga());return Kn(this,this.h.then(function(){if(pn(p).options.apiKey!=c.l)return w.reload()}).then(function(){return mt(p)&&c.uid==mt(p).uid?(Dw(mt(p),c),p.da(c)):(Cp(p,w),Hm(w),p.da(w))}).then(function(){jm(p)}))};function zae(c,p){var _={};return _.apiKey=pn(c).options.apiKey,_.authDomain=pn(c).options.authDomain,_.appName=pn(c).name,c.R&&(_.emulatorConfig=c.R),c.$.then(function(){return Mae(_,p,c.D,c.Ga())}).then(function(w){return mt(c)&&w.uid==mt(c).uid?(Dw(mt(c),w),c.da(w)):(Cp(c,w),Hm(w),c.da(w))}).then(function(){jm(c)})}function Cp(c,p){mt(c)&&(Nae(mt(c),c.Ba),$o(mt(c),"tokenChanged",c.qa),$o(mt(c),"userDeleted",c.za),$o(mt(c),"userInvalidated",c.Aa),qL(mt(c))),p&&(p.W.push(c.Ba),Is(p,"tokenChanged",c.qa),Is(p,"userDeleted",c.za),Is(p,"userInvalidated",c.Aa),0<c.u&&x6(p)),Pe(c,"currentUser",p),p&&(p.xa(c.la()),HL(p,c),Vm(p,c.J),jL(p,c),VL(p,c.R),UL(p,c))}n.Bb=function(){var c=this,p=this.h.then(function(){return c.b&&Ew(c.b.b),mt(c)?(Cp(c,null),F6(c.i).then(function(){jm(c)})):Xe()});return Kn(this,p)};function qae(c){var p=Bae(c.D,pn(c).options.authDomain).then(function(_){return(c.m=_)&&(_.ha=c.D),M6(c.D)});return Kn(c,p)}function $ae(c){var p=pn(c).options.authDomain,_=qae(c).then(function(){return B6(c.i,p,c.R)}).then(function(w){return w?(w.ha=c.D,c.m&&(c.m.ga||null)==(w.ga||null)?w:w.reload().then(function(){return P6(c.i,w).then(function(){return w})}).o(function(x){return x.code=="auth/network-request-failed"?w:F6(c.i)})):null}).then(function(w){Cp(c,w||null)});return Kn(c,_)}function Kae(c){return c.$.then(function(){return U6(c)}).o(function(){}).then(function(){if(!c.l)return c.ja()}).o(function(){}).then(function(){if(!c.l){c.ba=!0;var p=c.i;p.b.addListener(Ua("local"),p.a,c.ja)}})}n.Zc=function(){var c=this;return B6(this.i,pn(this).options.authDomain).then(function(p){if(!c.l){var _;if(_=mt(c)&&p){_=mt(c).uid;var w=p.uid;_=_==null||_===""||w===void 0||w===null||w===""?!1:_==w}if(_)return Dw(mt(c),p),mt(c).I();(mt(c)||p)&&(Cp(c,p),p&&(Hm(p),p.ha=c.D),c.b&&Cw(c.b,c),jm(c))}})},n.da=function(c){return P6(this.i,c)},n.mc=function(){jm(this),this.da(mt(this))},n.wc=function(){this.Bb()},n.xc=function(){this.Bb()};function Zf(c,p){var _=null,w=null;return Kn(c,p.then(function(x){return _=BD(x),w=$W(x),zae(c,x)},function(x){var N=null;throw x&&x.code==="auth/multi-factor-auth-required"&&(N=w6(x.w(),c,I(c.kc,c))),N||x}).then(function(){return Wa({user:mt(c),credential:_,additionalUserInfo:w,operationType:"signIn"})}))}n.kc=function(c){var p=this;return this.h.then(function(){return Zf(p,Xe(c))})},n.zc=function(c){var p=this;this.addAuthTokenListener(function(){c.next(mt(p))})},n.Ac=function(c){var p=this;Gae(this,function(){c.next(mt(p))})},n.Ic=function(c,p,_){var w=this;return this.ba&&Promise.resolve().then(function(){typeof c=="function"?c(mt(w)):typeof c.next=="function"&&c.next(mt(w))}),this.Pa(c,p,_)},n.Hc=function(c,p,_){var w=this;return this.ba&&Promise.resolve().then(function(){w.W=w.getUid(),typeof c=="function"?c(mt(w)):typeof c.next=="function"&&c.next(mt(w))}),this.ib(c,p,_)},n.nc=function(c){var p=this,_=this.h.then(function(){return mt(p)?mt(p).I(c).then(function(w){return{accessToken:w}}):null});return Kn(this,_)},n.Tc=function(c){var p=this;return this.h.then(function(){return Zf(p,Ot(p.a,Lse,{token:c}))}).then(function(_){var w=_.user;return ql(w,"isAnonymous",!1),p.da(w),_})},n.Uc=function(c,p){var _=this;return this.h.then(function(){return Zf(_,Ot(_.a,NV,{email:c,password:p}))})},n.dc=function(c,p){var _=this;return this.h.then(function(){return Zf(_,Ot(_.a,ose,{email:c,password:p}))})},n.ab=function(c){var p=this;return this.h.then(function(){return Zf(p,c.ka(p.a))})},n.Sc=function(c){return yD("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(c)},n.Ab=function(){var c=this;return this.h.then(function(){var p=mt(c);if(p&&p.isAnonymous){var _=Wa({providerId:null,isNewUser:!1});return Wa({user:p,credential:null,additionalUserInfo:_,operationType:"signIn"})}return Zf(c,c.a.Ab()).then(function(w){var x=w.user;return ql(x,"isAnonymous",!0),c.da(x),w})})};function pn(c){return c.app}function mt(c){return c.currentUser}n.getUid=function(){return mt(this)&&mt(this).uid||null};function kw(c){return mt(c)&&mt(c)._lat||null}function jm(c){if(c.ba){for(var p=0;p<c.s.length;p++)c.s[p]&&c.s[p](kw(c));if(c.W!==c.getUid()&&c.N.length)for(c.W=c.getUid(),p=0;p<c.N.length;p++)c.N[p]&&c.N[p](kw(c))}}n.cc=function(c){this.addAuthTokenListener(c),this.u++,0<this.u&&mt(this)&&x6(mt(this))},n.Pc=function(c){var p=this;bn(this.s,function(_){_==c&&p.u--}),0>this.u&&(this.u=0),this.u==0&&mt(this)&&qL(mt(this)),this.removeAuthTokenListener(c)},n.addAuthTokenListener=function(c){var p=this;this.s.push(c),Kn(this,this.h.then(function(){p.l||q(p.s,c)&&c(kw(p))}))},n.removeAuthTokenListener=function(c){ne(this.s,function(p){return p==c})};function Gae(c,p){c.N.push(p),Kn(c,c.h.then(function(){!c.l&&q(c.N,p)&&c.W!==c.getUid()&&(c.W=c.getUid(),p(kw(c)))}))}n.delete=function(){this.l=!0;for(var c=0;c<this.P.length;c++)this.P[c].cancel("app-deleted");return this.P=[],this.i&&(c=this.i,c.b.removeListener(Ua("local"),c.a,this.ja)),this.b&&(DL(this.b,this),Ew(this.b.b)),Promise.resolve()};function Kn(c,p){return c.P.push(p),p.oa(function(){J(c.P,p)}),p}n.hc=function(c){return Kn(this,Zoe(this.a,c))},n.Bc=function(c){return!!FD(c)},n.xb=function(c,p){var _=this;return Kn(this,Xe().then(function(){var w=new Gb(p);if(!w.c)throw new L("argument-error",TD+" must be true when sending sign in link to email");return Yb(w)}).then(function(w){return _.a.xb(c,w)}).then(function(){}))},n.jd=function(c){return this.Sa(c).then(function(p){return p.data.email})},n.ob=function(c,p){return Kn(this,this.a.ob(c,p).then(function(){}))},n.Sa=function(c){return Kn(this,this.a.Sa(c).then(function(p){return new aoe(p)}))},n.kb=function(c){return Kn(this,this.a.kb(c).then(function(){}))},n.wb=function(c,p){var _=this;return Kn(this,Xe().then(function(){return typeof p>"u"||qo(p)?{}:Yb(new Gb(p))}).then(function(w){return _.a.wb(c,w)}).then(function(){}))},n.Wc=function(c,p){return Kn(this,AL(this,c,p,I(this.ab,this)))},n.Vc=function(c,p){var _=this;return Kn(this,Xe().then(function(){var w=p||mm(),x=iV(c,w);if(w=FD(w),!w)throw new L("argument-error","Invalid email link!");if(w.tenantId!==_.T())throw new L("tenant-id-mismatch");return _.ab(x)}))};function zm(){}zm.prototype.render=function(){},zm.prototype.reset=function(){},zm.prototype.getResponse=function(){},zm.prototype.execute=function(){};function Sp(){this.a={},this.b=1e12}var nk=null;Sp.prototype.render=function(c,p){return this.a[this.b.toString()]=new Tw(c,p),this.b++},Sp.prototype.reset=function(c){var p=rk(this,c);c=j6(c),p&&c&&(p.delete(),delete this.a[c])},Sp.prototype.getResponse=function(c){return(c=rk(this,c))?c.getResponse():null},Sp.prototype.execute=function(c){(c=rk(this,c))&&c.execute()};function rk(c,p){return(p=j6(p))&&c.a[p]||null}function j6(c){return(c=typeof c>"u"?1e12:c)?c.toString():null}function Tw(c,p){this.g=!1,this.c=p,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=cm(c);var _=this;this.i=function(){_.execute()},this.h?this.execute():Is(this.f,"click",this.i)}Tw.prototype.getResponse=function(){return ik(this),this.b},Tw.prototype.execute=function(){ik(this);var c=this;this.a||(this.a=setTimeout(function(){c.b=toe();var p=c.c.callback,_=c.c["expired-callback"];if(p)try{p(c.b)}catch{}c.a=setTimeout(function(){if(c.a=null,c.b=null,_)try{_()}catch{}c.h&&c.execute()},6e4)},500))},Tw.prototype.delete=function(){ik(this),this.g=!0,clearTimeout(this.a),this.a=null,$o(this.f,"click",this.i)};function ik(c){if(c.g)throw Error("reCAPTCHA mock was already deleted!")}function ok(){}Pe(ok,"FACTOR_ID","phone");function sk(){}sk.prototype.g=function(){return nk||(nk=new Sp),Xe(nk)},sk.prototype.c=function(){};var ak=null;function uk(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Yae=new Pa(Ab,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Zae=new Ul(3e4,6e4);uk.prototype.g=function(c){var p=this;return new kt(function(_,w){var x=setTimeout(function(){w(new L("network-request-failed"))},Zae.get());if(!u.grecaptcha||c!==p.f&&!p.b){u[p.a]=function(){if(u.grecaptcha){p.f=c;var O=u.grecaptcha.render;u.grecaptcha.render=function(B,Q){return B=O(B,Q),p.b++,B},clearTimeout(x),_(u.grecaptcha)}else clearTimeout(x),w(new L("internal-error"));delete u[p.a]};var N=jx(Yae,{onload:p.a,hl:c||""});Xe(XD(N)).o(function(){clearTimeout(x),w(new L("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(x),_(u.grecaptcha)})},uk.prototype.c=function(){this.b--};var lk=null;function ck(c,p,_,w,x,N,O){if(Pe(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=p,this.g=null,O?(ak||(ak=new sk),O=ak):(lk||(lk=new uk),O=lk),this.m=O,this.a=_||{theme:"light",type:"image"},this.h=[],this.a[$6])throw new L("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[Xae]==="invisible",!u.document)throw new L("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!cm(p)||!this.i&&cm(p).hasChildNodes())throw new L("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Qs(c,N||null,x||null),this.u=w||function(){return null};var B=this;this.l=[];var Q=this.a[z6];this.a[z6]=function(ot){if(K6(B,ot),typeof Q=="function")Q(ot);else if(typeof Q=="string"){var un=Pn(Q,u);typeof un=="function"&&un(ot)}};var oe=this.a[q6];this.a[q6]=function(){if(K6(B,null),typeof oe=="function")oe();else if(typeof oe=="string"){var ot=Pn(oe,u);typeof ot=="function"&&ot()}}}var z6="callback",q6="expired-callback",$6="sitekey",Xae="size";function K6(c,p){for(var _=0;_<c.l.length;_++)try{c.l[_](p)}catch{}}function Qae(c,p){ne(c.l,function(_){return _==p})}function fk(c,p){return c.h.push(p),p.oa(function(){J(c.h,p)}),p}n=ck.prototype,n.Ia=function(){var c=this;return this.f?this.f:this.f=fk(this,Xe().then(function(){if($b()&&!Zs())return qb();throw new L("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return c.m.g(c.u())}).then(function(p){return c.g=p,Ot(c.s,yse,{})}).then(function(p){c.a[$6]=p.recaptchaSiteKey}).o(function(p){throw c.f=null,p}))},n.render=function(){Nw(this);var c=this;return fk(this,this.Ia().then(function(){if(c.c===null){var p=c.v;if(!c.i){var _=cm(p);p=Eie("DIV"),_.appendChild(p)}c.c=c.g.render(p,c.a)}return c.c}))},n.verify=function(){Nw(this);var c=this;return fk(this,this.render().then(function(p){return new kt(function(_){var w=c.g.getResponse(p);if(w)_(w);else{var x=function(N){N&&(Qae(c,x),_(N))};c.l.push(x),c.i&&c.g.execute(c.c)}})}))},n.reset=function(){Nw(this),this.c!==null&&this.g.reset(this.c)};function Nw(c){if(c.J)throw new L("internal-error","RecaptchaVerifier instance has been destroyed.")}n.clear=function(){Nw(this),this.J=!0,this.m.c();for(var c=0;c<this.h.length;c++)this.h[c].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){c=cm(this.v);for(var p;p=c.firstChild;)c.removeChild(p)}};function hk(c,p,_){var w=!1;try{this.b=_||He.app()}catch{throw new L("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)_=this.b.options.apiKey;else throw new L("invalid-api-key");var x=this,N=null;try{N=this.b.auth().Ga()}catch{}try{w=this.b.auth().settings.appVerificationDisabledForTesting}catch{}N=He.SDK_VERSION?cp(He.SDK_VERSION,N):null,ck.call(this,_,c,p,function(){try{var O=x.b.auth().la()}catch{O=null}return O},N,X(se),w)}A(hk,ck);function G6(c,p,_,w){e:{_=Array.prototype.slice.call(_);for(var x=0,N=!1,O=0;O<p.length;O++)if(p[O].optional)N=!0;else{if(N)throw new L("internal-error","Argument validator encountered a required argument after an optional argument.");x++}if(N=p.length,_.length<x||N<_.length)w="Expected "+(x==N?x==1?"1 argument":x+" arguments":x+"-"+N+" arguments")+" but got "+_.length+".";else{for(x=0;x<_.length;x++)if(N=p[x].optional&&_[x]===void 0,!p[x].M(_[x])&&!N){if(p=p[x],0>x||x>=Y6.length)throw new L("internal-error","Argument validator received an unsupported number of arguments.");_=Y6[x],w=(w?"":_+" argument ")+(p.name?'"'+p.name+'" ':"")+"must be "+p.K+".";break e}w=null}}if(w)throw new L("argument-error",c+" failed: "+w)}var Y6="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Oe(c,p){return{name:c||"",K:"a valid string",optional:!!p,M:function(_){return typeof _=="string"}}}function dk(c,p){return{name:c||"",K:"a boolean",optional:!!p,M:function(_){return typeof _=="boolean"}}}function gr(c,p){return{name:c||"",K:"a valid object",optional:!!p,M:y}}function Ep(c,p){return{name:c||"",K:"a function",optional:!!p,M:function(_){return typeof _=="function"}}}function ja(c,p){return{name:c||"",K:"null",optional:!!p,M:function(_){return _===null}}}function Jae(){return{name:"",K:"an HTML element",optional:!1,M:function(c){return!!(c&&c instanceof Element)}}}function eue(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(c){return!!(c&&c instanceof ea)}}}function tue(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(c){return!!(c&&c instanceof He.app.App)}}}function $l(c){return{name:c?c+"Credential":"credential",K:c?"a valid "+c+" credential":"a valid credential",optional:!1,M:function(p){if(!p)return!1;var _=!c||p.providerId===c;return!(!p.ka||!_)}}}function Z6(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(c){return c?!!c.tb:!1}}}function Ip(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(c){return!!(c&&c.providerId&&c.hasOwnProperty&&c.hasOwnProperty("isOAuthProvider"))}}}function pk(c,p){return y(c)&&typeof c.type=="string"&&c.type===p&&typeof c.Ha=="function"}function X6(c){return y(c)&&typeof c.uid=="string"}function Aw(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(c){return!(!c||typeof c.type!="string"||typeof c.verify!="function")}}}function rr(c,p,_,w){return{name:_||"",K:c.K+" or "+p.K,optional:!!w,M:function(x){return c.M(x)||p.M(x)}}}function jn(c,p){for(var _ in p){var w=p[_].name;c[w]=J6(w,c[_],p[_].j)}}function Q6(c,p){for(var _ in p){var w=p[_].name;w!==_&&Object.defineProperty(c,w,{get:T(function(x){return this[x]},_),set:T(function(x,N,O,B){G6(x,[O],[B],!0),this[N]=B},w,_,p[_].lb),enumerable:!0})}}function ir(c,p,_,w){c[p]=J6(p,_,w)}function J6(c,p,_){function w(){var O=Array.prototype.slice.call(arguments);return G6(x,_,O),p.apply(this,O)}if(!_)return p;var x=nue(c),N;for(N in p)w[N]=p[N];for(N in p.prototype)w.prototype[N]=p.prototype[N];return w}function nue(c){return c=c.split("."),c[c.length-1]}jn(ea.prototype,{kb:{name:"applyActionCode",j:[Oe("code")]},Sa:{name:"checkActionCode",j:[Oe("code")]},ob:{name:"confirmPasswordReset",j:[Oe("code"),Oe("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Oe("email"),Oe("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Oe("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Oe("emailLink")]},Hc:{name:"onAuthStateChanged",j:[rr(gr(),Ep(),"nextOrObserver"),Ep("opt_error",!0),Ep("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[rr(gr(),Ep(),"nextOrObserver"),Ep("opt_error",!0),Ep("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Oe("email"),rr(gr("opt_actionCodeSettings",!0),ja(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Oe("email"),gr("actionCodeSettings")]},yb:{name:"setPersistence",j:[Oe("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[$l()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[$l()]},Tc:{name:"signInWithCustomToken",j:[Oe("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Oe("email"),Oe("password")]},Vc:{name:"signInWithEmailLink",j:[Oe("email"),Oe("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Oe("phoneNumber"),Aw()]},Xc:{name:"signInWithPopup",j:[Ip()]},Yc:{name:"signInWithRedirect",j:[Ip()]},dd:{name:"updateCurrentUser",j:[rr(function(c){return{name:"user",K:"an instance of Firebase User",optional:!!c,M:function(p){return!!(p&&p instanceof Go)}}}(),ja(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Oe(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Oe("url"),gr("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Oe("code")]}}),Q6(ea.prototype,{lc:{name:"languageCode",lb:rr(Oe(),ja(),"languageCode")},ti:{name:"tenantId",lb:rr(Oe(),ja(),"tenantId")}}),ea.Persistence=mp,ea.Persistence.LOCAL="local",ea.Persistence.SESSION="session",ea.Persistence.NONE="none",jn(Go.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[dk("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[dk("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[$l()]},rb:{name:"linkWithCredential",j:[$l()]},Dc:{name:"linkWithPhoneNumber",j:[Oe("phoneNumber"),Aw()]},Ec:{name:"linkWithPopup",j:[Ip()]},Fc:{name:"linkWithRedirect",j:[Ip()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[$l()]},ub:{name:"reauthenticateWithCredential",j:[$l()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Oe("phoneNumber"),Aw()]},Nc:{name:"reauthenticateWithPopup",j:[Ip()]},Oc:{name:"reauthenticateWithRedirect",j:[Ip()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[rr(gr("opt_actionCodeSettings",!0),ja(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Oe(null,!0)]},cd:{name:"unlink",j:[Oe("provider")]},Cb:{name:"updateEmail",j:[Oe("email")]},Db:{name:"updatePassword",j:[Oe("password")]},ed:{name:"updatePhoneNumber",j:[$l("phone")]},Eb:{name:"updateProfile",j:[gr("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Oe("email"),rr(gr("opt_actionCodeSettings",!0),ja(null,!0),"opt_actionCodeSettings",!0)]}}),jn(Sp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),jn(zm.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),jn(kt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Q6(_6.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:dk("appVerificationDisabledForTesting")}}),jn(NL.prototype,{confirm:{name:"confirm",j:[Oe("verificationCode")]}}),ir(dp,"fromJSON",function(c){c=typeof c=="string"?JSON.parse(c):c;for(var p,_=[Ioe,xoe,Doe,Eoe],w=0;w<_.length;w++)if(p=_[w](c))return p;return null},[rr(Oe(),gr(),"json")]),ir(Ds,"credential",function(c,p){return new jl(c,p)},[Oe("email"),Oe("password")]),jn(jl.prototype,{w:{name:"toJSON",j:[Oe(null,!0)]}}),jn(Uf.prototype,{Ca:{name:"addScope",j:[Oe("scope")]},Ka:{name:"setCustomParameters",j:[gr("customOAuthParameters")]}}),ir(Uf,"credential",eV,[rr(Oe(),gr(),"token")]),ir(Ds,"credentialWithLink",iV,[Oe("email"),Oe("emailLink")]),jn(jf.prototype,{Ca:{name:"addScope",j:[Oe("scope")]},Ka:{name:"setCustomParameters",j:[gr("customOAuthParameters")]}}),ir(jf,"credential",tV,[rr(Oe(),gr(),"token")]),jn(zf.prototype,{Ca:{name:"addScope",j:[Oe("scope")]},Ka:{name:"setCustomParameters",j:[gr("customOAuthParameters")]}}),ir(zf,"credential",nV,[rr(Oe(),rr(gr(),ja()),"idToken"),rr(Oe(),ja(),"accessToken",!0)]),jn(gp.prototype,{Ka:{name:"setCustomParameters",j:[gr("customOAuthParameters")]}}),ir(gp,"credential",rV,[rr(Oe(),gr(),"token"),Oe("secret",!0)]),jn(Ko.prototype,{Ca:{name:"addScope",j:[Oe("scope")]},credential:{name:"credential",j:[rr(Oe(),rr(gr(),ja()),"optionsOrIdToken"),rr(Oe(),ja(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[gr("customOAuthParameters")]}}),jn(Wu.prototype,{w:{name:"toJSON",j:[Oe(null,!0)]}}),jn(Vf.prototype,{w:{name:"toJSON",j:[Oe(null,!0)]}}),ir(Vu,"credential",oV,[Oe("verificationId"),Oe("verificationCode")]),jn(Vu.prototype,{gb:{name:"verifyPhoneNumber",j:[rr(Oe(),function(c,p){return{name:c||"phoneInfoOptions",K:"valid phone info options",optional:!!p,M:function(_){return _?_.session&&_.phoneNumber?pk(_.session,Em)&&typeof _.phoneNumber=="string":_.session&&_.multiFactorHint?pk(_.session,ew)&&X6(_.multiFactorHint):_.session&&_.multiFactorUid?pk(_.session,ew)&&typeof _.multiFactorUid=="string":_.phoneNumber?typeof _.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Aw()]}}),jn(zl.prototype,{w:{name:"toJSON",j:[Oe(null,!0)]}}),jn(L.prototype,{toJSON:{name:"toJSON",j:[Oe(null,!0)]}}),jn(xm.prototype,{toJSON:{name:"toJSON",j:[Oe(null,!0)]}}),jn(HD.prototype,{toJSON:{name:"toJSON",j:[Oe(null,!0)]}}),jn(RL.prototype,{toJSON:{name:"toJSON",j:[Oe(null,!0)]}}),jn(OL.prototype,{Rc:{name:"resolveSignIn",j:[Z6()]}}),jn(PL.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Z6(),Oe("displayName",!0)]},bd:{name:"unenroll",j:[rr({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:X6},Oe(),"multiFactorInfoIdentifier")]}}),jn(hk.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ir(kD,"parseLink",PW,[Oe("link")]),ir(ok,"assertion",function(c){return new S6(c)},[$l("phone")]),function(){if(typeof He<"u"&&He.INTERNAL&&He.INTERNAL.registerComponent){var c={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Kb,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:LD,VERIFY_AND_CHANGE_EMAIL:Cm,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ea,AuthCredential:dp,Error:L};ir(c,"EmailAuthProvider",Ds,[]),ir(c,"FacebookAuthProvider",Uf,[]),ir(c,"GithubAuthProvider",jf,[]),ir(c,"GoogleAuthProvider",zf,[]),ir(c,"TwitterAuthProvider",gp,[]),ir(c,"OAuthProvider",Ko,[Oe("providerId")]),ir(c,"SAMLAuthProvider",JW,[Oe("providerId")]),ir(c,"PhoneAuthProvider",Vu,[eue()]),ir(c,"RecaptchaVerifier",hk,[rr(Oe(),Jae(),"recaptchaContainer"),gr("recaptchaParameters",!0),tue()]),ir(c,"ActionCodeURL",kD,[]),ir(c,"PhoneMultiFactorGenerator",ok,[]),He.INTERNAL.registerComponent({name:"auth",instanceFactory:function(p){return p=p.getProvider("app").getImmediate(),new ea(p)},multipleInstances:!1,serviceProps:c,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(p){p.getProvider("auth-internal").initialize()}}),He.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(p){return p=p.getProvider("auth").getImmediate(),{getUid:I(p.getUid,p),getToken:I(p.nc,p),addAuthTokenListener:I(p.cc,p),removeAuthTokenListener:I(p.Pc,p)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),He.registerVersion("@firebase/auth","0.16.8"),He.INTERNAL.extendNamespace({User:Go})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jR=function(n,e){return jR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},jR(n,e)};function HVe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");jR(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function tee(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var UVe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ae,P3=P3||{},at=UVe||self;function WS(){}function zR(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function ex(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function jVe(n){return Object.prototype.hasOwnProperty.call(n,yN)&&n[yN]||(n[yN]=++zVe)}var yN="closure_uid_"+(1e9*Math.random()>>>0),zVe=0;function qVe(n,e,t){return n.call.apply(n.bind,arguments)}function $Ve(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function mi(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?mi=qVe:mi=$Ve,mi.apply(null,arguments)}function IC(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ci(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Ef(){this.s=this.s,this.o=this.o}var KVe=0;Ef.prototype.s=!1;Ef.prototype.na=function(){!this.s&&(this.s=!0,this.M(),KVe!=0)&&jVe(this)};Ef.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var nee=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(var t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ree=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){for(var r=n.length,i=typeof n=="string"?n.split(""):n,o=0;o<r;o++)o in i&&e.call(t,i[o],o,n)};function GVe(n){e:{for(var e=V6e,t=n.length,r=typeof n=="string"?n.split(""):n,i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:typeof n=="string"?n.charAt(e):n[e]}function Sj(n){return Array.prototype.concat.apply([],arguments)}function F3(n){var e=n.length;if(0<e){for(var t=Array(e),r=0;r<e;r++)t[r]=n[r];return t}return[]}function VS(n){return/^[\s\xa0]*$/.test(n)}var Ej=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function uo(n,e){return n.indexOf(e)!=-1}function bN(n,e){return n<e?-1:n>e?1:0}var lo;e:{var Ij=at.navigator;if(Ij){var xj=Ij.userAgent;if(xj){lo=xj;break e}}lo=""}function B3(n,e,t){for(var r in n)e.call(t,n[r],r,n)}function iee(n){var e={};for(var t in n)e[t]=n[t];return e}var Dj="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oee(n,e){for(var t,r,i=1;i<arguments.length;i++){r=arguments[i];for(t in r)n[t]=r[t];for(var o=0;o<Dj.length;o++)t=Dj[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function W3(n){return W3[" "](n),n}W3[" "]=WS;function YVe(n){var e=QVe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}var ZVe=uo(lo,"Opera"),ov=uo(lo,"Trident")||uo(lo,"MSIE"),see=uo(lo,"Edge"),qR=see||ov,aee=uo(lo,"Gecko")&&!(uo(lo.toLowerCase(),"webkit")&&!uo(lo,"Edge"))&&!(uo(lo,"Trident")||uo(lo,"MSIE"))&&!uo(lo,"Edge"),XVe=uo(lo.toLowerCase(),"webkit")&&!uo(lo,"Edge");function uee(){var n=at.document;return n?n.documentMode:void 0}var HS;e:{var wN="",CN=function(){var n=lo;if(aee)return/rv:([^\);]+)(\)|;)/.exec(n);if(see)return/Edge\/([\d\.]+)/.exec(n);if(ov)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(XVe)return/WebKit\/(\S+)/.exec(n);if(ZVe)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(CN&&(wN=CN?CN[1]:""),ov){var SN=uee();if(SN!=null&&SN>parseFloat(wN)){HS=String(SN);break e}}HS=wN}var QVe={};function JVe(){return YVe(function(){for(var n=0,e=Ej(String(HS)).split("."),t=Ej("9").split("."),r=Math.max(e.length,t.length),i=0;n==0&&i<r;i++){var o=e[i]||"",s=t[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o[0].length==0&&s[0].length==0)break;n=bN(o[1].length==0?0:parseInt(o[1],10),s[1].length==0?0:parseInt(s[1],10))||bN(o[2].length==0,s[2].length==0)||bN(o[2],s[2]),o=o[3],s=s[3]}while(n==0)}return 0<=n})}var $R;if(at.document&&ov){var Lj=uee();$R=Lj||parseInt(HS,10)||void 0}else $R=void 0;var e6e=$R,t6e=function(){if(!at.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{at.addEventListener("test",WS,e),at.removeEventListener("test",WS,e)}catch{}return n}();function Fi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Fi.prototype.h=function(){this.defaultPrevented=!0};function i0(n,e){if(Fi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(aee){e:{try{W3(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:n6e[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&i0.Z.h.call(this)}}Ci(i0,Fi);var n6e={2:"touch",3:"pen",4:"mouse"};i0.prototype.h=function(){i0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var tx="closure_listenable_"+(1e6*Math.random()|0),r6e=0;function i6e(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++r6e,this.ca=this.fa=!1}function nx(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function rx(n){this.src=n,this.g={},this.h=0}rx.prototype.add=function(n,e,t,r,i){var o=n.toString();n=this.g[o],n||(n=this.g[o]=[],this.h++);var s=GR(n,e,r,i);return-1<s?(e=n[s],t||(e.fa=!1)):(e=new i6e(e,this.src,o,!!r,i),e.fa=t,n.push(e)),e};function KR(n,e){var t=e.type;if(t in n.g){var r=n.g[t],i=nee(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(nx(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function GR(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==e&&o.capture==!!t&&o.ia==r)return i}return-1}var V3="closure_lm_"+(1e6*Math.random()|0),EN={};function lee(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)lee(n,e[o],t,r,i);return null}return t=hee(t),n&&n[tx]?n.N(e,t,ex(r)?!!r.capture:!!r,i):o6e(n,e,t,!1,r,i)}function o6e(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var s=ex(i)?!!i.capture:!!i,a=U3(n);if(a||(n[V3]=a=new rx(n)),t=a.add(e,t,r,s,o),t.proxy)return t;if(r=s6e(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)t6e||(i=s),i===void 0&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(fee(e.toString()),r);else if(n.addListener&&n.removeListener)n.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return t}function s6e(){function n(t){return e.call(n.src,n.listener,t)}var e=a6e;return n}function cee(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cee(n,e[o],t,r,i);else r=ex(r)?!!r.capture:!!r,t=hee(t),n&&n[tx]?(n=n.i,e=String(e).toString(),e in n.g&&(o=n.g[e],t=GR(o,t,r,i),-1<t&&(nx(o[t]),Array.prototype.splice.call(o,t,1),o.length==0&&(delete n.g[e],n.h--)))):n&&(n=U3(n))&&(e=n.g[e.toString()],n=-1,e&&(n=GR(e,t,r,i)),(t=-1<n?e[n]:null)&&H3(t))}function H3(n){if(typeof n!="number"&&n&&!n.ca){var e=n.src;if(e&&e[tx])KR(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(fee(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=U3(e))?(KR(t,n),t.h==0&&(t.src=null,e[V3]=null)):nx(n)}}}function fee(n){return n in EN?EN[n]:EN[n]="on"+n}function a6e(n,e){if(n.ca)n=!0;else{e=new i0(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&H3(n),n=t.call(r,e)}return n}function U3(n){return n=n[V3],n instanceof rx?n:null}var IN="__closure_events_fn_"+(1e9*Math.random()>>>0);function hee(n){return typeof n=="function"?n:(n[IN]||(n[IN]=function(e){return n.handleEvent(e)}),n[IN])}function ii(){Ef.call(this),this.i=new rx(this),this.P=this,this.I=null}Ci(ii,Ef);ii.prototype[tx]=!0;ii.prototype.removeEventListener=function(n,e,t,r){cee(this,n,e,t,r)};function _i(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,typeof e=="string")e=new Fi(e,n);else if(e instanceof Fi)e.target=e.target||n;else{var i=e;e=new Fi(r,n),oee(e,i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.g=t[o];i=xC(s,r,!0,e)&&i}if(s=e.g=n,i=xC(s,r,!0,e)&&i,i=xC(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)s=e.g=t[o],i=xC(s,r,!1,e)&&i}ii.prototype.M=function(){if(ii.Z.M.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)nx(t[r]);delete n.g[e],n.h--}}this.I=null};ii.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)};ii.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};function xC(n,e,t,r){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==t){var a=s.listener,u=s.ia||s.src;s.fa&&KR(n.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var j3=at.JSON.stringify;function u6e(){var n=pee,e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var l6e=function(){function n(){this.h=this.g=null}return n.prototype.add=function(e,t){var r=dee.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r},n}(),dee=new(function(){function n(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return n.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},n}())(function(){return new c6e},function(n){return n.reset()}),c6e=function(){function n(){this.next=this.g=this.h=null}return n.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},n.prototype.reset=function(){this.next=this.g=this.h=null},n}();function f6e(n){at.setTimeout(function(){throw n},0)}function z3(n,e){YR||h6e(),ZR||(YR(),ZR=!0),pee.add(n,e)}var YR;function h6e(){var n=at.Promise.resolve(void 0);YR=function(){n.then(d6e)}}var ZR=!1,pee=new l6e;function d6e(){for(var n;n=u6e();){try{n.h.call(n.g)}catch(t){f6e(t)}var e=dee;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ZR=!1}function ix(n,e){ii.call(this),this.h=n||1,this.g=e||at,this.j=mi(this.kb,this),this.l=Date.now()}Ci(ix,ii);Ae=ix.prototype;Ae.da=!1;Ae.S=null;Ae.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_i(this,"tick"),this.da&&(q3(this),this.start()))}};Ae.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function q3(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}Ae.M=function(){ix.Z.M.call(this),q3(this),delete this.g};function $3(n,e,t){if(typeof n=="function")t&&(n=mi(n,t));else if(n&&typeof n.handleEvent=="function")n=mi(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:at.setTimeout(n,e||0)}function gee(n){n.g=$3(function(){n.g=null,n.i&&(n.i=!1,gee(n))},n.j);var e=n.h;n.h=null,n.m.apply(null,e)}var p6e=function(n){HVe(e,n);function e(t,r){var i=n.call(this)||this;return i.m=t,i.j=r,i.h=null,i.i=!1,i.g=null,i}return e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:gee(this)},e.prototype.M=function(){n.prototype.M.call(this),this.g&&(at.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Ef);function o0(n){Ef.call(this),this.h=n,this.g={}}Ci(o0,Ef);var kj=[];function vee(n,e,t,r){Array.isArray(t)||(t&&(kj[0]=t.toString()),t=kj);for(var i=0;i<t.length;i++){var o=lee(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function mee(n){B3(n.g,function(e,t){this.g.hasOwnProperty(t)&&H3(e)},n),n.g={}}o0.prototype.M=function(){o0.Z.M.call(this),mee(this)};o0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ox(){this.g=!0}ox.prototype.Aa=function(){this.g=!1};function g6e(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var f=l[0];l=l[1];var h=f.split("_");s=2<=h.length&&h[1]=="type"?s+(f+"="+l+"&"):s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+t+`
`+s})}function v6e(n,e,t,r,i,o,s){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+t+`
`+o+" "+s})}function pg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+_6e(n,t)+(r?" "+r:"")})}function m6e(n,e){n.info(function(){return"TIMEOUT: "+e})}ox.prototype.info=function(){};function _6e(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return j3(t)}catch{return e}}var Gd={},Tj=null;function sx(){return Tj=Tj||new ii}Gd.Ma="serverreachability";function _ee(n){Fi.call(this,Gd.Ma,n)}Ci(_ee,Fi);function s0(n){var e=sx();_i(e,new _ee(e))}Gd.STAT_EVENT="statevent";function yee(n,e){Fi.call(this,Gd.STAT_EVENT,n),this.stat=e}Ci(yee,Fi);function go(n){var e=sx();_i(e,new yee(e,n))}Gd.Na="timingevent";function bee(n,e){Fi.call(this,Gd.Na,n),this.size=e}Ci(bee,Fi);function cb(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return at.setTimeout(function(){n()},e)}var ax={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},wee={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function K3(){}K3.prototype.h=null;function Nj(n){return n.h||(n.h=n.i())}function Cee(){}var fb={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function G3(){Fi.call(this,"d")}Ci(G3,Fi);function Y3(){Fi.call(this,"c")}Ci(Y3,Fi);var XR;function ux(){}Ci(ux,K3);ux.prototype.g=function(){return new XMLHttpRequest};ux.prototype.i=function(){return{}};XR=new ux;function hb(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new o0(this),this.P=y6e,n=qR?125:void 0,this.W=new ix(n),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new See}function See(){this.i=null,this.g="",this.h=!1}var y6e=45e3,QR={},US={};Ae=hb.prototype;Ae.setTimeout=function(n){this.P=n};function JR(n,e,t){n.K=1,n.v=cx(Dl(e)),n.s=t,n.U=!0,Eee(n,null)}function Eee(n,e){n.F=Date.now(),db(n),n.A=Dl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Nee(t.h,"t",r),n.C=0,t=n.l.H,n.h=new See,n.g=Xee(n.l,t?e:null,!n.s),0<n.O&&(n.L=new p6e(mi(n.Ia,n,n.g),n.O)),vee(n.V,n.g,"readystatechange",n.gb),e=n.H?iee(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),s0(),g6e(n.j,n.u,n.A,n.m,n.X,n.s)}Ae.gb=function(n){n=n.target;var e=this.L;e&&ul(n)==3?e.l():this.Ia(n)};Ae.Ia=function(n){try{if(n==this.g)e:{var e=ul(this.g),t=this.g.Da(),r=this.g.ba();if(!(3>e)&&(e!=3||qR||this.g&&(this.h.h||this.g.ga()||Mj(this.g)))){this.I||e!=4||t==7||(t==8||0>=r?s0(3):s0(2)),lx(this);var i=this.g.ba();this.N=i;t:if(Iee(this)){var o=Mj(this.g);n="";var s=o.length,a=ul(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fh(this),ny(this);var u="";break t}this.h.i=new at.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,n+=this.h.i.decode(o[t],{stream:a&&t==s-1});o.splice(0,s),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=i==200,v6e(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,f=this.g;if((l=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!VS(l)){var h=l;break t}}h=null}if(i=h)pg(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,eM(this,i);else{this.i=!1,this.o=3,go(12),Fh(this),ny(this);break e}}this.U?(xee(this,e,u),qR&&this.i&&e==3&&(vee(this.V,this.W,"tick",this.fb),this.W.start())):(pg(this.j,this.m,u,null),eM(this,u)),e==4&&Fh(this),this.i&&!this.I&&(e==4?Kee(this.l,this):(this.i=!1,db(this)))}else i==400&&0<u.indexOf("Unknown SID")?(this.o=3,go(12)):(this.o=0,go(13)),Fh(this),ny(this)}}}catch{}finally{}};function Iee(n){return n.g?n.u=="GET"&&n.K!=2&&n.l.Ba:!1}function xee(n,e,t){for(var r=!0,i;!n.I&&n.C<t.length;)if(i=b6e(n,t),i==US){e==4&&(n.o=4,go(14),r=!1),pg(n.j,n.m,null,"[Incomplete Response]");break}else if(i==QR){n.o=4,go(15),pg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}else pg(n.j,n.m,i,null),eM(n,i);Iee(n)&&i!=US&&i!=QR&&(n.h.g="",n.C=0),e!=4||t.length!=0||n.h.h||(n.o=1,go(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,e=n.l,e.g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),i4(e),e.L=!0,go(11))):(pg(n.j,n.m,t,"[Invalid Chunked Response]"),Fh(n),ny(n))}Ae.fb=function(){if(this.g){var n=ul(this.g),e=this.g.ga();this.C<e.length&&(lx(this),xee(this,n,e),this.i&&n!=4&&db(this))}};function b6e(n,e){var t=n.C,r=e.indexOf(`
`,t);return r==-1?US:(t=Number(e.substring(t,r)),isNaN(t)?QR:(r+=1,r+t>e.length?US:(e=e.substr(r,t),n.C=r+t,e)))}Ae.cancel=function(){this.I=!0,Fh(this)};function db(n){n.Y=Date.now()+n.P,Dee(n,n.P)}function Dee(n,e){if(n.B!=null)throw Error("WatchDog timer not null");n.B=cb(mi(n.eb,n),e)}function lx(n){n.B&&(at.clearTimeout(n.B),n.B=null)}Ae.eb=function(){this.B=null;var n=Date.now();0<=n-this.Y?(m6e(this.j,this.A),this.K!=2&&(s0(),go(17)),Fh(this),this.o=2,ny(this)):Dee(this,this.Y-n)};function ny(n){n.l.G==0||n.I||Kee(n.l,n)}function Fh(n){lx(n);var e=n.L;e&&typeof e.na=="function"&&e.na(),n.L=null,q3(n.W),mee(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function eM(n,e){try{var t=n.l;if(t.G!=0&&(t.g==n||tM(t.i,n))){if(t.I=n.N,!n.J&&tM(t.i,n)&&t.G==3){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!t.u){if(t.g)if(t.g.F+3e3<n.F)$S(t),dx(t);else break e;r4(t),go(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&t.A==0&&!t.v&&(t.v=cb(mi(t.ab,t),6e3));if(1>=Ree(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Bh(t,11)}else if((n.J||t.g==n)&&$S(t),!VS(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(t.U=o[0],o=o[1],t.G==2)if(o[0]=="c"){t.J=o[1],t.la=o[2];var s=o[3];s!=null&&(t.ma=s,t.h.info("VER="+t.ma));var a=o[4];a!=null&&(t.za=a,t.h.info("SVER="+t.za));var u=o[5];u!=null&&typeof u=="number"&&0<u&&(r=1.5*u,t.K=r,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;var l=n.g;if(l){var f=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(f){var h=r.i;!h.g&&(uo(f,"spdy")||uo(f,"quic")||uo(f,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Q3(h,h.h),h.h=null))}if(r.D){var d=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Bn(r.F,r.D,d))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms")),r=t;var g=n;if(r.oa=Zee(r,r.H?r.la:null,r.W),g.J){Mee(r.i,g);var v=g,m=r.K;m&&v.setTimeout(m),v.B&&(lx(v),db(v)),r.g=g}else qee(r);0<t.l.length&&px(t)}else o[0]!="stop"&&o[0]!="close"||Bh(t,7);else t.G==3&&(o[0]=="stop"||o[0]=="close"?o[0]=="stop"?Bh(t,7):n4(t):o[0]!="noop"&&t.j&&t.j.wa(o),t.A=0)}}s0(4)}catch{}}function w6e(n){if(n.R&&typeof n.R=="function")return n.R();if(typeof n=="string")return n.split("");if(zR(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}e=[],t=0;for(r in n)e[t++]=n[r];return e}function Z3(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(zR(n)||typeof n=="string")ree(n,e,void 0);else{if(n.T&&typeof n.T=="function")var t=n.T();else if(n.R&&typeof n.R=="function")t=void 0;else if(zR(n)||typeof n=="string"){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=w6e(n),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}}function Yv(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Yv)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}Ae=Yv.prototype;Ae.R=function(){X3(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n};Ae.T=function(){return X3(this),this.g.concat()};function X3(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];bd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)r=n.g[e],bd(i,r)||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}Ae.get=function(n,e){return bd(this.h,n)?this.h[n]:e};Ae.set=function(n,e){bd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e};Ae.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],o=this.get(i);n.call(e,o,i,this)}};function bd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var Lee=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function C6e(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function wd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof wd){this.g=e!==void 0?e:n.g,jS(this,n.j),this.s=n.s,zS(this,n.i),qS(this,n.m),this.l=n.l,e=n.h;var t=new a0;t.i=e.i,e.g&&(t.g=new Yv(e.g),t.h=e.h),Aj(this,t),this.o=n.o}else n&&(t=String(n).match(Lee))?(this.g=!!e,jS(this,t[1]||"",!0),this.s=ry(t[2]||""),zS(this,t[3]||"",!0),qS(this,t[4]),this.l=ry(t[5]||"",!0),Aj(this,t[6]||"",!0),this.o=ry(t[7]||"")):(this.g=!!e,this.h=new a0(null,this.g))}wd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(L_(e,Oj,!0),":");var t=this.i;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(L_(e,Oj,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.i&&t.charAt(0)!="/"&&n.push("/"),n.push(L_(t,t.charAt(0)=="/"?D6e:x6e,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",L_(t,k6e)),n.join("")};function Dl(n){return new wd(n)}function jS(n,e,t){n.j=t?ry(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zS(n,e,t){n.i=t?ry(e,!0):e}function qS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Aj(n,e,t){e instanceof a0?(n.h=e,T6e(n.h,n.g)):(t||(e=L_(e,L6e)),n.h=new a0(e,n.g))}function Bn(n,e,t){n.h.set(e,t)}function cx(n){return Bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function S6e(n){return n instanceof wd?Dl(n):new wd(n,void 0)}function E6e(n,e,t,r){var i=new wd(null,void 0);return n&&jS(i,n),e&&zS(i,e),t&&qS(i,t),r&&(i.l=r),i}function ry(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function L_(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,I6e),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function I6e(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var Oj=/[#\/\?@]/g,x6e=/[#\?:]/g,D6e=/[#\?]/g,L6e=/[#\?@]/g,k6e=/#/g;function a0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function If(n){n.g||(n.g=new Yv,n.h=0,n.i&&C6e(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}Ae=a0.prototype;Ae.add=function(n,e){If(this),this.i=null,n=Zv(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function kee(n,e){If(n),e=Zv(n,e),bd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,n=n.g,bd(n.h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&X3(n)))}function Tee(n,e){return If(n),e=Zv(n,e),bd(n.g.h,e)}Ae.forEach=function(n,e){If(this),this.g.forEach(function(t,r){ree(t,function(i){n.call(e,i,r,this)},this)},this)};Ae.T=function(){If(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],o=0;o<i.length;o++)t.push(e[r]);return t};Ae.R=function(n){If(this);var e=[];if(typeof n=="string")Tee(this,n)&&(e=Sj(e,this.g.get(Zv(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Sj(e,n[t])}return e};Ae.set=function(n,e){return If(this),this.i=null,n=Zv(this,n),Tee(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};Ae.get=function(n,e){return n?(n=this.R(n),0<n.length?String(n[0]):e):e};function Nee(n,e,t){kee(n,e),0<t.length&&(n.i=null,n.g.set(Zv(n,e),F3(t)),n.h+=t.length)}Ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;r[o]!==""&&(s+="="+encodeURIComponent(String(r[o]))),n.push(s)}}return this.i=n.join("&")};function Zv(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function T6e(n,e){e&&!n.j&&(If(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(kee(this,r),Nee(this,i,t))},n)),n.j=e}var N6e=function(){function n(e,t){this.h=e,this.g=t}return n}();function Aee(n){this.l=n||A6e,at.PerformanceNavigationTiming?(n=at.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(at.g&&at.g.Ea&&at.g.Ea()&&at.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var A6e=10;function Oee(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function Ree(n){return n.h?1:n.g?n.g.size:0}function tM(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function Q3(n,e){n.g?n.g.add(e):n.h=e}function Mee(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}Aee.prototype.cancel=function(){var n,e;if(this.i=Pee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var t=tee(this.g.values()),r=t.next();!r.done;r=t.next()){var i=r.value;i.cancel()}}catch(o){n={error:o}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(n)throw n.error}}this.g.clear()}};function Pee(n){var e,t;if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){var r=n.i;try{for(var i=tee(n.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r}return F3(n.i)}function J3(){}J3.prototype.stringify=function(n){return at.JSON.stringify(n,void 0)};J3.prototype.parse=function(n){return at.JSON.parse(n,void 0)};function O6e(){this.g=new J3}function R6e(n,e,t){var r=t||"";try{Z3(n,function(i,o){var s=i;ex(i)&&(s=j3(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function M6e(n,e){var t=new ox;if(at.Image){var r=new Image;r.onload=IC(DC,t,r,"TestLoadImage: loaded",!0,e),r.onerror=IC(DC,t,r,"TestLoadImage: error",!1,e),r.onabort=IC(DC,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=IC(DC,t,r,"TestLoadImage: timeout",!1,e),at.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}function DC(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function pb(n){this.l=n.$b||null,this.j=n.ib||!1}Ci(pb,K3);pb.prototype.g=function(){return new fx(this.l,this.j)};pb.prototype.i=function(n){return function(){return n}}({});function fx(n,e){ii.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=e4,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ci(fx,ii);var e4=0;Ae=fx.prototype;Ae.open=function(n,e){if(this.readyState!=e4)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,u0(this)};Ae.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||at).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};Ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gb(this)),this.readyState=e4};Ae.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,u0(this)),this.g&&(this.readyState=3,u0(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof at.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fee(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))};function Fee(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}Ae.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?gb(this):u0(this),this.readyState==3&&Fee(this)}};Ae.Ua=function(n){this.g&&(this.response=this.responseText=n,gb(this))};Ae.Ta=function(n){this.g&&(this.response=n,gb(this))};Ae.ha=function(){this.g&&gb(this)};function gb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,u0(n)}Ae.setRequestHeader=function(n,e){this.v.append(n,e)};Ae.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};Ae.getAllResponseHeaders=function(){if(!this.h)return"";for(var n=[],e=this.h.entries(),t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function u0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(fx.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var P6e=at.JSON.parse;function Sr(n){ii.call(this),this.headers=new Yv,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bee,this.K=this.L=!1}Ci(Sr,ii);var Bee="",F6e=/^https?$/i,B6e=["POST","PUT"];Ae=Sr.prototype;Ae.ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():XR.g(),this.C=this.u?Nj(this.u):Nj(XR),this.g.onreadystatechange=mi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){Rj(this,o);return}n=t||"";var i=new Yv(this.headers);r&&Z3(r,function(o,s){i.set(s,o)}),r=GVe(i.T()),t=at.FormData&&n instanceof at.FormData,!(0<=nee(B6e,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,s){this.g.setRequestHeader(s,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Hee(this),0<this.B&&((this.K=W6e(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mi(this.pa,this)):this.A=$3(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){Rj(this,o)}};function W6e(n){return ov&&JVe()&&typeof n.timeout=="number"&&n.ontimeout!==void 0}function V6e(n){return n.toLowerCase()=="content-type"}Ae.pa=function(){typeof P3<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_i(this,"timeout"),this.abort(8))};function Rj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Wee(n),hx(n)}function Wee(n){n.D||(n.D=!0,_i(n,"complete"),_i(n,"error"))}Ae.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_i(this,"complete"),_i(this,"abort"),hx(this))};Ae.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hx(this,!0)),Sr.Z.M.call(this)};Ae.Fa=function(){this.s||(this.F||this.v||this.l?Vee(this):this.cb())};Ae.cb=function(){Vee(this)};function Vee(n){if(n.h&&typeof P3<"u"&&(!n.C[1]||ul(n)!=4||n.ba()!=2)){if(n.v&&ul(n)==4)$3(n.Fa,0,n);else if(_i(n,"readystatechange"),ul(n)==4){n.h=!1;try{var e=n.ba();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var r;if(!(r=t)){var i;if(i=e===0){var o=String(n.H).match(Lee)[1]||null;if(!o&&at.self&&at.self.location){var s=at.self.location.protocol;o=s.substr(0,s.length-1)}i=!F6e.test(o?o.toLowerCase():"")}r=i}if(r)_i(n,"complete"),_i(n,"success");else{n.m=6;try{var a=2<ul(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.ba()+"]",Wee(n)}}finally{hx(n)}}}}function hx(n,e){if(n.g){Hee(n);var t=n.g,r=n.C[0]?WS:null;n.g=null,n.C=null,e||_i(n,"ready");try{t.onreadystatechange=r}catch{}}}function Hee(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(at.clearTimeout(n.A),n.A=null)}function ul(n){return n.g?n.g.readyState:0}Ae.ba=function(){try{return 2<ul(this)?this.g.status:-1}catch{return-1}};Ae.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};Ae.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),P6e(e)}};function Mj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Bee:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}Ae.Da=function(){return this.m};Ae.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function H6e(n){var e="";return B3(n,function(t,r){e+=r,e+=":",e+=t,e+=`\r
`}),e}function t4(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=H6e(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):Bn(n,e,t))}function __(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Uee(n){this.za=0,this.l=[],this.h=new ox,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=__("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=__("baseRetryDelayMs",5e3,n),this.$a=__("retryDelaySeedMs",1e4,n),this.Ya=__("forwardChannelMaxRetries",2,n),this.ra=__("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Aee(n&&n.concurrentRequestLimit),this.Ca=new O6e,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||n.Xb!==!1}Ae=Uee.prototype;Ae.ma=8;Ae.G=1;function n4(n){if(jee(n),n.G==3){var e=n.V++,t=Dl(n.F);Bn(t,"SID",n.J),Bn(t,"RID",e),Bn(t,"TYPE","terminate"),vb(n,t),e=new hb(n,n.h,e,void 0),e.K=2,e.v=cx(Dl(t)),t=!1,at.navigator&&at.navigator.sendBeacon&&(t=at.navigator.sendBeacon(e.v.toString(),"")),!t&&at.Image&&(new Image().src=e.v,t=!0),t||(e.g=Xee(e.l,null),e.g.ea(e.v)),e.F=Date.now(),db(e)}Yee(n)}Ae.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}};function dx(n){n.g&&(i4(n),n.g.cancel(),n.g=null)}function jee(n){dx(n),n.u&&(at.clearTimeout(n.u),n.u=null),$S(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&at.clearTimeout(n.m),n.m=null)}function xN(n,e){n.l.push(new N6e(n.Za++,e)),n.G==3&&px(n)}function px(n){Oee(n.i)||n.m||(n.m=!0,z3(n.Ha,n),n.C=0)}function U6e(n,e){return Ree(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.l=e.D.concat(n.l),!0):n.G==1||n.G==2||n.C>=(n.Xa?0:n.Ya)?!1:(n.m=cb(mi(n.Ha,n,e),Gee(n,n.C)),n.C++,!0)}Ae.Ha=function(n){if(this.m)if(this.m=null,this.G==1){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;var e=new hb(this,this.h,n,void 0),t=this.s;if(this.P&&(t?(t=iee(t),oee(t,this.P)):t=this.P),this.o===null&&(e.H=t),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){t:{var o=this.l[i];if("__data__"in o.g&&(o=o.g.__data__,typeof o=="string")){o=o.length;break t}o=void 0}if(o===void 0)break;if(r+=o,4096<r){r=i;break e}if(r===4096||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=zee(this,e,r),i=Dl(this.F),Bn(i,"RID",n),Bn(i,"CVER",22),this.D&&Bn(i,"X-HTTP-Session-Id",this.D),vb(this,i),this.o&&t&&t4(i,this.o,t),Q3(this.i,e),this.Ra&&Bn(i,"TYPE","init"),this.ja?(Bn(i,"$req",r),Bn(i,"SID","null"),e.$=!0,JR(e,i,null)):JR(e,i,r),this.G=2}}else this.G==3&&(n?Pj(this,n):this.l.length==0||Oee(this.i)||Pj(this))};function Pj(n,e){var t;e?t=e.m:t=n.V++;var r=Dl(n.F);Bn(r,"SID",n.J),Bn(r,"RID",t),Bn(r,"AID",n.U),vb(n,r),n.o&&n.s&&t4(r,n.o,n.s),t=new hb(n,n.h,t,n.C+1),n.o===null&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=zee(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Q3(n.i,t),JR(t,r,e)}function vb(n,e){n.j&&Z3({},function(t,r){Bn(e,r,t)})}function zee(n,e,t){t=Math.min(n.l.length,t);var r=n.j?mi(n.j.Oa,n.j,n):null;e:for(var i=n.l,o=-1;;){var s=["count="+t];o==-1?0<t?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<t;u++){var l=i[u].h,f=i[u].g;if(l-=o,0>l)o=Math.max(0,i[u].h-100),a=!1;else try{R6e(f,s,"req"+l+"_")}catch{r&&r(f)}}if(a){r=s.join("&");break e}}return n=n.l.splice(0,t),e.D=n,r}function qee(n){n.g||n.u||(n.Y=1,z3(n.Ga,n),n.A=0)}function r4(n){return n.g||n.u||3<=n.A?!1:(n.Y++,n.u=cb(mi(n.Ga,n),Gee(n,n.A)),n.A++,!0)}Ae.Ga=function(){if(this.u=null,$ee(this),this.$&&!(this.L||this.g==null||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=cb(mi(this.bb,this),n)}};Ae.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,go(10),dx(this),$ee(this))};function i4(n){n.B!=null&&(at.clearTimeout(n.B),n.B=null)}function $ee(n){n.g=new hb(n,n.h,"rpc",n.Y),n.o===null&&(n.g.H=n.s),n.g.O=0;var e=Dl(n.oa);Bn(e,"RID","rpc"),Bn(e,"SID",n.J),Bn(e,"CI",n.N?"0":"1"),Bn(e,"AID",n.U),vb(n,e),Bn(e,"TYPE","xmlhttp"),n.o&&n.s&&t4(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=cx(Dl(e)),t.s=null,t.U=!0,Eee(t,n)}Ae.ab=function(){this.v!=null&&(this.v=null,dx(this),r4(this),go(19))};function $S(n){n.v!=null&&(at.clearTimeout(n.v),n.v=null)}function Kee(n,e){var t=null;if(n.g==e){$S(n),i4(n),n.g=null;var r=2}else if(tM(n.i,e))t=e.D,Mee(n.i,e),r=1;else return;if(n.I=e.N,n.G!=0){if(e.i)if(r==1){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;r=sx(),_i(r,new bee(r,t)),px(n)}else qee(n);else if(i=e.o,i==3||i==0&&0<n.I||!(r==1&&U6e(n,e)||r==2&&r4(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Bh(n,5);break;case 4:Bh(n,10);break;case 3:Bh(n,6);break;default:Bh(n,2)}}}function Gee(n,e){var t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Bh(n,e){if(n.h.info("Error code "+e),e==2){var t=null;n.j&&(t=null);var r=mi(n.jb,n);t||(t=new wd("//www.google.com/images/cleardot.gif"),at.location&&at.location.protocol=="http"||jS(t,"https"),cx(t)),M6e(t.toString(),r)}else go(2);n.G=0,n.j&&n.j.va(e),Yee(n),jee(n)}Ae.jb=function(n){n?(this.h.info("Successfully pinged google.com"),go(2)):(this.h.info("Failed to ping google.com"),go(1))};function Yee(n){n.G=0,n.I=-1,n.j&&((Pee(n.i).length!=0||n.l.length!=0)&&(n.i.i.length=0,F3(n.l),n.l.length=0),n.j.ua())}function Zee(n,e,t){var r=S6e(t);if(r.i!="")e&&zS(r,e+"."+r.i),qS(r,r.m);else{var i=at.location;r=E6e(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&B3(n.aa,function(o,s){Bn(r,s,o)}),e=n.D,t=n.sa,e&&t&&Bn(r,e,t),Bn(r,"VER",n.ma),vb(n,r),r}function Xee(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=t&&n.Ba&&!n.qa?new Sr(new pb({ib:!0})):new Sr(n.qa),e.L=n.H,e}function Qee(){}Ae=Qee.prototype;Ae.xa=function(){};Ae.wa=function(){};Ae.va=function(){};Ae.ua=function(){};Ae.Oa=function(){};function KS(){if(ov&&!(10<=Number(e6e)))throw Error("Environmental error: no available transport.")}KS.prototype.g=function(n,e){return new bs(n,e)};function bs(n,e){ii.call(this),this.g=new Uee(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!VS(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!VS(e)&&(this.g.D=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new Xv(this)}Ci(bs,ii);bs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),z3(mi(n.hb,n,e))),go(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Zee(n,null,n.W),px(n)};bs.prototype.close=function(){n4(this.g)};bs.prototype.u=function(n){if(typeof n=="string"){var e={};e.__data__=n,xN(this.g,e)}else this.v?(e={},e.__data__=j3(n),xN(this.g,e)):xN(this.g,n)};bs.prototype.M=function(){this.g.j=null,delete this.j,n4(this.g),delete this.g,bs.Z.M.call(this)};function Jee(n){G3.call(this);var e=n.__sm__;if(e){e:{for(var t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}Ci(Jee,G3);function ete(){Y3.call(this),this.status=1}Ci(ete,Y3);function Xv(n){this.g=n}Ci(Xv,Qee);Xv.prototype.xa=function(){_i(this.g,"a")};Xv.prototype.wa=function(n){_i(this.g,new Jee(n))};Xv.prototype.va=function(n){_i(this.g,new ete)};Xv.prototype.ua=function(){_i(this.g,"b")};KS.prototype.createWebChannel=KS.prototype.g;bs.prototype.send=bs.prototype.u;bs.prototype.open=bs.prototype.m;bs.prototype.close=bs.prototype.close;ax.NO_ERROR=0;ax.TIMEOUT=8;ax.HTTP_ERROR=6;wee.COMPLETE="complete";Cee.EventType=fb;fb.OPEN="a";fb.CLOSE="b";fb.ERROR="c";fb.MESSAGE="d";ii.prototype.listen=ii.prototype.N;Sr.prototype.listenOnce=Sr.prototype.O;Sr.prototype.getLastError=Sr.prototype.La;Sr.prototype.getLastErrorCode=Sr.prototype.Da;Sr.prototype.getStatus=Sr.prototype.ba;Sr.prototype.getResponseJson=Sr.prototype.Qa;Sr.prototype.getResponseText=Sr.prototype.ga;Sr.prototype.send=Sr.prototype.ea;var j6e=function(){return new KS},z6e=function(){return sx()},DN=ax,q6e=wee,$6e=Gd,Fj={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},K6e=pb,LC=Cee,G6e=Sr,Y6e={};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var us=function(){function n(e,t){var r=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return t.writeSequenceNumber(i)})}return n.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},n.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},n}();us.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},le=function(n){function e(t,r){var i=this;return(i=n.call(this,r)||this).code=t,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return Ie(e,n),e}(Error),Ia=new Nd("@firebase/firestore");function nM(){return Ia.logLevel}function me(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Ia.logLevel<=Lt.DEBUG){var r=e.map(o4);Ia.debug.apply(Ia,Ct(["Firestore (8.10.1): "+n],r))}}function br(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Ia.logLevel<=Lt.ERROR){var r=e.map(o4);Ia.error.apply(Ia,Ct(["Firestore (8.10.1): "+n],r))}}function l0(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Ia.logLevel<=Lt.WARN){var r=e.map(o4);Ia.warn.apply(Ia,Ct(["Firestore (8.10.1): "+n],r))}}function o4(n){if(typeof n=="string")return n;try{return e=n,JSON.stringify(e)}catch{return n}var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(n){n===void 0&&(n="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+n;throw br(e),new Error(e)}function nt(n,e){n||ze()}function Ee(n,e){return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6e(n){var e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(var r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tte=function(){function n(){}return n.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";r.length<20;)for(var i=Z6e(40),o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length));return r},n}();function Rt(n,e){return n<e?-1:n>e?1:0}function sv(n,e,t){return n.length===e.length&&n.every(function(r,i){return t(r,e[i])})}function nte(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Po=function(){function n(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return n.now=function(){return n.fromMillis(Date.now())},n.fromDate=function(e){return n.fromMillis(e.getTime())},n.fromMillis=function(e){var t=Math.floor(e/1e3);return new n(t,Math.floor(1e6*(e-1e3*t)))},n.prototype.toDate=function(){return new Date(this.toMillis())},n.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},n.prototype._compareTo=function(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)},n.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},n.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},n.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},n.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},n}(),It=function(){function n(e){this.timestamp=e}return n.fromTimestamp=function(e){return new n(e)},n.min=function(){return new n(new Po(0,0))},n.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},n.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},n.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},n.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},n.prototype.toTimestamp=function(){return this.timestamp},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(n){var e=0;for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yd(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rte(n){for(var e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ite=function(){function n(e,t,r){t===void 0?t=0:t>e.length&&ze(),r===void 0?r=e.length-t:r>e.length-t&&ze(),this.segments=e,this.offset=t,this.len=r}return Object.defineProperty(n.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(e){return n.comparator(this,e)===0},n.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(function(r){t.push(r)}):t.push(e),this.construct(t)},n.prototype.limit=function(){return this.offset+this.length},n.prototype.popFirst=function(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)},n.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},n.prototype.firstSegment=function(){return this.segments[this.offset]},n.prototype.lastSegment=function(){return this.get(this.length-1)},n.prototype.get=function(e){return this.segments[this.offset+e]},n.prototype.isEmpty=function(){return this.length===0},n.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},n.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},n.prototype.forEach=function(e){for(var t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])},n.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},n.comparator=function(e,t){for(var r=Math.min(e.length,t.length),i=0;i<r;i++){var o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0},n}(),Yt=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ie(e,n),e.prototype.construct=function(t,r,i){return new e(t,r,i)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o];if(a.indexOf("//")>=0)throw new le(Y.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");i.push.apply(i,a.split("/").filter(function(u){return u.length>0}))}return new e(i)},e.emptyPath=function(){return new e([])},e}(ite),X6e=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Na=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ie(e,n),e.prototype.construct=function(t,r,i){return new e(t,r,i)},e.isValidIdentifier=function(t){return X6e.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var r=[],i="",o=0,s=function(){if(i.length===0)throw new le(Y.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},a=!1;o<t.length;){var u=t[o];if(u==="\\"){if(o+1===t.length)throw new le(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[o+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new le(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,o+=2}else u==="`"?(a=!a,o++):u!=="."||a?(i+=u,o++):(s(),o++)}if(s(),a)throw new le(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(r)},e.emptyPath=function(){return new e([])},e}(ite),av=function(){function n(e){this.fields=e,e.sort(Na.comparator)}return n.prototype.covers=function(e){for(var t=0,r=this.fields;t<r.length;t++)if(r[t].isPrefixOf(e))return!0;return!1},n.prototype.isEqual=function(e){return sv(this.fields,e.fields,function(t,r){return t.isEqual(r)})},n}(),mo=function(){function n(e){this.binaryString=e}return n.fromBase64String=function(e){return new n(atob(e))},n.fromUint8Array=function(e){return new n(function(t){for(var r="",i=0;i<t.length;++i)r+=String.fromCharCode(t[i]);return r}(e))},n.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},n.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)},n.prototype.approximateByteSize=function(){return 2*this.binaryString.length},n.prototype.compareTo=function(e){return Rt(this.binaryString,e.binaryString)},n.prototype.isEqual=function(e){return this.binaryString===e.binaryString},n}();mo.EMPTY_BYTE_STRING=new mo("");var Q6e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function of(n){if(nt(!!n),typeof n=="string"){var e=0,t=Q6e.exec(n);if(nt(!!t),t[1]){var r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mr(n.seconds),nanos:mr(n.nanos)}}function mr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function uv(n){return typeof n=="string"?mo.fromBase64String(n):mo.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ote(n){var e=n.mapValue.fields.__previous_value__;return s4(e)?ote(e):e}function c0(n){var e=of(n.mapValue.fields.__local_write_time__.timestampValue);return new Po(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(n){return n==null}function GS(n){return n===0&&1/n==-1/0}function ste(n){return typeof n=="number"&&Number.isInteger(n)&&!GS(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze=function(){function n(e){this.path=e}return n.fromPath=function(e){return new n(Yt.fromString(e))},n.fromName=function(e){return new n(Yt.fromString(e).popFirst(5))},n.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},n.prototype.isEqual=function(e){return e!==null&&Yt.comparator(this.path,e.path)===0},n.prototype.toString=function(){return this.path.toString()},n.comparator=function(e,t){return Yt.comparator(e.path,t.path)},n.isDocumentKey=function(e){return e.length%2==0},n.fromSegments=function(e){return new n(new Yt(e.slice()))},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?s4(n)?4:10:ze()}function xu(n,e){var t=Cd(n);if(t!==Cd(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return c0(n).isEqual(c0(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var o=of(r.timestampValue),s=of(i.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,i){return uv(r.bytesValue).isEqual(uv(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return mr(r.geoPointValue.latitude)===mr(i.geoPointValue.latitude)&&mr(r.geoPointValue.longitude)===mr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return mr(r.integerValue)===mr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var o=mr(r.doubleValue),s=mr(i.doubleValue);return o===s?GS(o)===GS(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return sv(n.arrayValue.values||[],e.arrayValue.values||[],xu);case 10:return function(r,i){var o=r.mapValue.fields||{},s=i.mapValue.fields||{};if(Bj(o)!==Bj(s))return!1;for(var a in o)if(o.hasOwnProperty(a)&&(s[a]===void 0||!xu(o[a],s[a])))return!1;return!0}(n,e);default:return ze()}}function f0(n,e){return(n.values||[]).find(function(t){return xu(t,e)})!==void 0}function lv(n,e){var t=Cd(n),r=Cd(e);if(t!==r)return Rt(t,r);switch(t){case 0:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(i,o){var s=mr(i.integerValue||i.doubleValue),a=mr(o.integerValue||o.doubleValue);return s<a?-1:s>a?1:s===a?0:isNaN(s)?isNaN(a)?0:-1:1}(n,e);case 3:return Wj(n.timestampValue,e.timestampValue);case 4:return Wj(c0(n),c0(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(i,o){var s=uv(i),a=uv(o);return s.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){for(var s=i.split("/"),a=o.split("/"),u=0;u<s.length&&u<a.length;u++){var l=Rt(s[u],a[u]);if(l!==0)return l}return Rt(s.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){var s=Rt(mr(i.latitude),mr(o.latitude));return s!==0?s:Rt(mr(i.longitude),mr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){for(var s=i.values||[],a=o.values||[],u=0;u<s.length&&u<a.length;++u){var l=lv(s[u],a[u]);if(l)return l}return Rt(s.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){var s=i.fields||{},a=Object.keys(s),u=o.fields||{},l=Object.keys(u);a.sort(),l.sort();for(var f=0;f<a.length&&f<l.length;++f){var h=Rt(a[f],l[f]);if(h!==0)return h;var d=lv(s[a[f]],u[l[f]]);if(d!==0)return d}return Rt(a.length,l.length)}(n.mapValue,e.mapValue);default:throw ze()}}function Wj(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Rt(n,e);var t=of(n),r=of(e),i=Rt(t.seconds,r.seconds);return i!==0?i:Rt(t.nanos,r.nanos)}function a4(n){return rM(n)}function rM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){var i=of(r);return"time("+i.seconds+","+i.nanos+")"}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?uv(n.bytesValue).toBase64():"referenceValue"in n?(t=n.referenceValue,Ze.fromName(t).toString()):"geoPointValue"in n?"geo("+(e=n.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in n?function(r){for(var i="[",o=!0,s=0,a=r.values||[];s<a.length;s++)o?o=!1:i+=",",i+=rM(a[s]);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){for(var i="{",o=!0,s=0,a=Object.keys(r.fields||{}).sort();s<a.length;s++){var u=a[s];o?o=!1:i+=",",i+=u+":"+rM(r.fields[u])}return i+"}"}(n.mapValue):ze();var e,t}function YS(n,e){return{referenceValue:"projects/"+n.projectId+"/databases/"+n.database+"/documents/"+e.path.canonicalString()}}function iM(n){return!!n&&"integerValue"in n}function u4(n){return!!n&&"arrayValue"in n}function Vj(n){return!!n&&"nullValue"in n}function Hj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function f1(n){return!!n&&"mapValue"in n}function iy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){var e={mapValue:{fields:{}}};return Yd(n.mapValue.fields,function(i,o){return e.mapValue.fields[i]=iy(o)}),e}if(n.arrayValue){for(var t={arrayValue:{values:[]}},r=0;r<(n.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=iy(n.arrayValue.values[r]);return t}return Object.assign({},n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss=function(){function n(e){this.value=e}return n.empty=function(){return new n({mapValue:{}})},n.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,r=0;r<e.length-1;++r)if(!f1(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},n.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iy(t)},n.prototype.setAll=function(e){var t=this,r=Na.emptyPath(),i={},o=[];e.forEach(function(a,u){if(!r.isImmediateParentOf(u)){var l=t.getFieldsMap(r);t.applyChanges(l,i,o),i={},o=[],r=u.popLast()}a?i[u.lastSegment()]=iy(a):o.push(u.lastSegment())});var s=this.getFieldsMap(r);this.applyChanges(s,i,o)},n.prototype.delete=function(e){var t=this.field(e.popLast());f1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},n.prototype.isEqual=function(e){return xu(this.value,e.value)},n.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var r=0;r<e.length;++r){var i=t.mapValue.fields[e.get(r)];f1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields},n.prototype.applyChanges=function(e,t,r){Yd(t,function(a,u){return e[a]=u});for(var i=0,o=r;i<o.length;i++){var s=o[i];delete e[s]}},n.prototype.clone=function(){return new n(iy(this.value))},n}();function ate(n){var e=[];return Yd(n.fields,function(t,r){var i=new Na([t]);if(f1(r)){var o=ate(r.mapValue).fields;if(o.length===0)e.push(i);else for(var s=0,a=o;s<a.length;s++){var u=a[s];e.push(i.child(u))}}else e.push(i)}),new av(e)}var yi=function(){function n(e,t,r,i,o){this.key=e,this.documentType=t,this.version=r,this.data=i,this.documentState=o}return n.newInvalidDocument=function(e){return new n(e,0,It.min(),ss.empty(),0)},n.newFoundDocument=function(e,t,r){return new n(e,1,t,r,0)},n.newNoDocument=function(e,t){return new n(e,2,t,ss.empty(),0)},n.newUnknownDocument=function(e,t){return new n(e,3,t,ss.empty(),2)},n.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},n.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this},n.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this},n.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},n.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(n.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n.prototype.isValidDocument=function(){return this.documentType!==0},n.prototype.isFoundDocument=function(){return this.documentType===1},n.prototype.isNoDocument=function(){return this.documentType===2},n.prototype.isUnknownDocument=function(){return this.documentType===3},n.prototype.isEqual=function(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},n.prototype.clone=function(){return new n(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},n.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},n}(),J6e=function(n,e,t,r,i,o,s){e===void 0&&(e=null),t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),this.path=n,this.collectionGroup=e,this.orderBy=t,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(n,e,t,r,i,o,s){return e===void 0&&(e=null),t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),new J6e(n,e,t,r,i,o,s)}function mb(n){var e=Ee(n);if(e.h===null){var t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+a4(i.value)}(r)}).join(","),t+="|ob:",t+=e.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),Zd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=XS(e.startAt)),e.endAt&&(t+="|ub:",t+=XS(e.endAt)),e.h=t}return e.h}function gx(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<n.orderBy.length;t++)if(!aHe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(var r=0;r<n.filters.length;r++)if(i=n.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!xu(i.value,o.value))return!1;var i,o;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zj(n.startAt,e.startAt)&&zj(n.endAt,e.endAt)}function ZS(n){return Ze.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ls=function(n){function e(t,r,i){var o=this;return(o=n.call(this)||this).field=t,o.op=r,o.value=i,o}return Ie(e,n),e.create=function(t,r,i){return t.isKeyField()?r==="in"||r==="not-in"?this.l(t,r,i):new eHe(t,r,i):r==="array-contains"?new rHe(t,i):r==="in"?new iHe(t,i):r==="not-in"?new oHe(t,i):r==="array-contains-any"?new sHe(t,i):new e(t,r,i)},e.l=function(t,r,i){return r==="in"?new tHe(t,i):new nHe(t,i)},e.prototype.matches=function(t){var r=t.data.field(this.field);return this.op==="!="?r!==null&&this.m(lv(r,this.value)):r!==null&&Cd(this.value)===Cd(r)&&this.m(lv(r,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ze()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),eHe=function(n){function e(t,r,i){var o=this;return(o=n.call(this,t,r,i)||this).key=Ze.fromName(i.referenceValue),o}return Ie(e,n),e.prototype.matches=function(t){var r=Ze.comparator(t.key,this.key);return this.m(r)},e}(ls),tHe=function(n){function e(t,r){var i=this;return(i=n.call(this,t,"in",r)||this).keys=ute("in",r),i}return Ie(e,n),e.prototype.matches=function(t){return this.keys.some(function(r){return r.isEqual(t.key)})},e}(ls),nHe=function(n){function e(t,r){var i=this;return(i=n.call(this,t,"not-in",r)||this).keys=ute("not-in",r),i}return Ie(e,n),e.prototype.matches=function(t){return!this.keys.some(function(r){return r.isEqual(t.key)})},e}(ls);function ute(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(function(r){return Ze.fromName(r.referenceValue)})}var rHe=function(n){function e(t,r){return n.call(this,t,"array-contains",r)||this}return Ie(e,n),e.prototype.matches=function(t){var r=t.data.field(this.field);return u4(r)&&f0(r.arrayValue,this.value)},e}(ls),iHe=function(n){function e(t,r){return n.call(this,t,"in",r)||this}return Ie(e,n),e.prototype.matches=function(t){var r=t.data.field(this.field);return r!==null&&f0(this.value.arrayValue,r)},e}(ls),oHe=function(n){function e(t,r){return n.call(this,t,"not-in",r)||this}return Ie(e,n),e.prototype.matches=function(t){if(f0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=t.data.field(this.field);return r!==null&&!f0(this.value.arrayValue,r)},e}(ls),sHe=function(n){function e(t,r){return n.call(this,t,"array-contains-any",r)||this}return Ie(e,n),e.prototype.matches=function(t){var r=this,i=t.data.field(this.field);return!(!u4(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(o){return f0(r.value.arrayValue,o)})},e}(ls),h0=function(n,e){this.position=n,this.before=e};function XS(n){return(n.before?"b":"a")+":"+n.position.map(function(e){return a4(e)}).join(",")}var Lg=function(n,e){e===void 0&&(e="asc"),this.field=n,this.dir=e};function aHe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function jj(n,e,t){for(var r=0,i=0;i<n.position.length;i++){var o=e[i],s=n.position[i];if(r=o.field.isKeyField()?Ze.comparator(Ze.fromName(s.referenceValue),t.key):lv(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return n.before?r<=0:r<0}function zj(n,e){if(n===null)return e===null;if(e===null||n.before!==e.before||n.position.length!==e.position.length)return!1;for(var t=0;t<n.position.length;t++)if(!xu(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pl=function(n,e,t,r,i,o,s,a){e===void 0&&(e=null),t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o="F"),s===void 0&&(s=null),a===void 0&&(a=null),this.path=n,this.collectionGroup=e,this.explicitOrderBy=t,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function lte(n,e,t,r,i,o,s,a){return new Pl(n,e,t,r,i,o,s,a)}function Qv(n){return new Pl(n)}function h1(n){return!Zd(n.limit)&&n.limitType==="F"}function QS(n){return!Zd(n.limit)&&n.limitType==="L"}function l4(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function c4(n){for(var e=0,t=n.filters;e<t.length;e++){var r=t[e];if(r.g())return r.field}return null}function f4(n){return n.collectionGroup!==null}function cv(n){var e=Ee(n);if(e.p===null){e.p=[];var t=c4(e),r=l4(e);if(t!==null&&r===null)t.isKeyField()||e.p.push(new Lg(t)),e.p.push(new Lg(Na.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Lg(Na.keyField(),u))}}}return e.p}function js(n){var e=Ee(n);if(!e.T)if(e.limitType==="F")e.T=Uj(e.path,e.collectionGroup,cv(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var t=[],r=0,i=cv(e);r<i.length;r++){var o=i[r],s=o.dir==="desc"?"asc":"desc";t.push(new Lg(o.field,s))}var a=e.endAt?new h0(e.endAt.position,!e.endAt.before):null,u=e.startAt?new h0(e.startAt.position,!e.startAt.before):null;e.T=Uj(e.path,e.collectionGroup,t,e.filters,e.limit,a,u)}return e.T}function cte(n,e,t){return new Pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _b(n,e){return gx(js(n),js(e))&&n.limitType===e.limitType}function fte(n){return mb(js(n))+"|lt:"+n.limitType}function oM(n){return"Query(target="+function(e){var t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+a4(i.value);var i}).join(", ")+"]"),Zd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),e.startAt&&(t+=", startAt: "+XS(e.startAt)),e.endAt&&(t+=", endAt: "+XS(e.endAt)),"Target("+t+")"}(js(n))+"; limitType="+n.limitType+")"}function yb(n,e){return e.isFoundDocument()&&function(t,r){var i=r.key.path;return t.collectionGroup!==null?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(var i=0,o=t.explicitOrderBy;i<o.length;i++){var s=o[i];if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1}return!0}(n,e)&&function(t,r){for(var i=0,o=t.filters;i<o.length;i++)if(!o[i].matches(r))return!1;return!0}(n,e)&&function(t,r){return!(t.startAt&&!jj(t.startAt,cv(t),r))&&(!t.endAt||!jj(t.endAt,cv(t),r))}(n,e)}function hte(n){return function(e,t){for(var r=!1,i=0,o=cv(n);i<o.length;i++){var s=o[i],a=uHe(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function uHe(n,e,t){var r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,o,s){var a=o.data.field(i),u=s.data.field(i);return a!==null&&u!==null?lv(a,u):ze()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ze()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dte(n,e){if(n.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:GS(e)?"-0":e}}function pte(n){return{integerValue:""+n}}function gte(n,e){return ste(e)?pte(e):dte(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vx=function(){this._=void 0};function lHe(n,e,t){return n instanceof fv?function(r,i){var o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Sd?mte(n,e):n instanceof Ed?_te(n,e):function(r,i){var o=vte(r,i),s=qj(o)+qj(r.A);return iM(o)&&iM(r.A)?pte(s):dte(r.R,s)}(n,e)}function cHe(n,e,t){return n instanceof Sd?mte(n,e):n instanceof Ed?_te(n,e):t}function vte(n,e){return n instanceof hv?iM(t=e)||function(r){return!!r&&"doubleValue"in r}(t)?e:{integerValue:0}:null;var t}var fv=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ie(e,n),e}(vx),Sd=function(n){function e(t){var r=this;return(r=n.call(this)||this).elements=t,r}return Ie(e,n),e}(vx);function mte(n,e){for(var t=yte(e),r=function(s){t.some(function(a){return xu(a,s)})||t.push(s)},i=0,o=n.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:t}}}var Ed=function(n){function e(t){var r=this;return(r=n.call(this)||this).elements=t,r}return Ie(e,n),e}(vx);function _te(n,e){for(var t=yte(e),r=function(s){t=t.filter(function(a){return!xu(a,s)})},i=0,o=n.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:t}}}var hv=function(n){function e(t,r){var i=this;return(i=n.call(this)||this).R=t,i.A=r,i}return Ie(e,n),e}(vx);function qj(n){return mr(n.integerValue||n.doubleValue)}function yte(n){return u4(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bb=function(n,e){this.field=n,this.transform=e},fHe=function(n,e){this.version=n,this.transformResults=e},Pi=function(){function n(e,t){this.updateTime=e,this.exists=t}return n.none=function(){return new n},n.exists=function(e){return new n(void 0,e)},n.updateTime=function(e){return new n(e)},Object.defineProperty(n.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},n}();function d1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var mx=function(){};function hHe(n,e,t){n instanceof wb?function(r,i,o){var s=r.value.clone(),a=Gj(r.fieldTransforms,i,o.transformResults);s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof xf?function(r,i,o){if(d1(r.precondition,i)){var s=Gj(r.fieldTransforms,i,o.transformResults),a=i.data;a.setAll(bte(r)),a.setAll(s),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}else i.convertToUnknownDocument(o.version)}(n,e,t):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function sM(n,e,t){n instanceof wb?function(r,i,o){if(d1(r.precondition,i)){var s=r.value.clone(),a=Yj(r.fieldTransforms,o,i);s.setAll(a),i.convertToFoundDocument(Kj(i),s).setHasLocalMutations()}}(n,e,t):n instanceof xf?function(r,i,o){if(d1(r.precondition,i)){var s=Yj(r.fieldTransforms,o,i),a=i.data;a.setAll(bte(r)),a.setAll(s),i.convertToFoundDocument(Kj(i),a).setHasLocalMutations()}}(n,e,t):function(r,i){d1(r.precondition,i)&&i.convertToNoDocument(It.min())}(n,e)}function dHe(n,e){for(var t=null,r=0,i=n.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=vte(o.transform,s||null);a!=null&&(t==null&&(t=ss.empty()),t.set(o.field,a))}return t||null}function $j(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(t,r){return t===void 0&&r===void 0||!(!t||!r)&&sv(t,r,function(i,o){return function(s,a){return s.field.isEqual(a.field)&&function(u,l){return u instanceof Sd&&l instanceof Sd||u instanceof Ed&&l instanceof Ed?sv(u.elements,l.elements,xu):u instanceof hv&&l instanceof hv?xu(u.A,l.A):u instanceof fv&&l instanceof fv}(s.transform,a.transform)}(i,o)})}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}function Kj(n){return n.isFoundDocument()?n.version:It.min()}var wb=function(n){function e(t,r,i,o){o===void 0&&(o=[]);var s=this;return(s=n.call(this)||this).key=t,s.value=r,s.precondition=i,s.fieldTransforms=o,s.type=0,s}return Ie(e,n),e}(mx),xf=function(n){function e(t,r,i,o,s){s===void 0&&(s=[]);var a=this;return(a=n.call(this)||this).key=t,a.data=r,a.fieldMask=i,a.precondition=o,a.fieldTransforms=s,a.type=1,a}return Ie(e,n),e}(mx);function bte(n){var e=new Map;return n.fieldMask.fields.forEach(function(t){if(!t.isEmpty()){var r=n.data.field(t);e.set(t,r)}}),e}function Gj(n,e,t){var r=new Map;nt(n.length===t.length);for(var i=0;i<t.length;i++){var o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,cHe(s,a,t[i]))}return r}function Yj(n,e,t){for(var r=new Map,i=0,o=n;i<o.length;i++){var s=o[i],a=s.transform,u=t.data.field(s.field);r.set(s.field,lHe(a,u,e))}return r}var vr,Bt,Cb=function(n){function e(t,r){var i=this;return(i=n.call(this)||this).key=t,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ie(e,n),e}(mx),h4=function(n){function e(t,r){var i=this;return(i=n.call(this)||this).key=t,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ie(e,n),e}(mx),pHe=function(n){this.count=n};function wte(n){switch(n){case Y.OK:return ze();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return ze()}}function Cte(n){if(n===void 0)return br("GRPC error has no .code"),Y.UNKNOWN;switch(n){case vr.OK:return Y.OK;case vr.CANCELLED:return Y.CANCELLED;case vr.UNKNOWN:return Y.UNKNOWN;case vr.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case vr.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case vr.INTERNAL:return Y.INTERNAL;case vr.UNAVAILABLE:return Y.UNAVAILABLE;case vr.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case vr.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case vr.NOT_FOUND:return Y.NOT_FOUND;case vr.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case vr.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case vr.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case vr.ABORTED:return Y.ABORTED;case vr.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case vr.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case vr.DATA_LOSS:return Y.DATA_LOSS;default:return ze()}}(Bt=vr||(vr={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ki=function(){function n(e,t){this.comparator=e,this.root=t||mc.EMPTY}return n.prototype.insert=function(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mc.BLACK,null,null))},n.prototype.remove=function(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mc.BLACK,null,null))},n.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null},n.prototype.indexOf=function(e){for(var t=0,r=this.root;!r.isEmpty();){var i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1},n.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(n.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),n.prototype.minKey=function(){return this.root.minKey()},n.prototype.maxKey=function(){return this.root.maxKey()},n.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},n.prototype.forEach=function(e){this.inorderTraversal(function(t,r){return e(t,r),!1})},n.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,r){return e.push(t+":"+r),!1}),"{"+e.join(", ")+"}"},n.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},n.prototype.getIterator=function(){return new kC(this.root,null,this.comparator,!1)},n.prototype.getIteratorFrom=function(e){return new kC(this.root,e,this.comparator,!1)},n.prototype.getReverseIterator=function(){return new kC(this.root,null,this.comparator,!0)},n.prototype.getReverseIteratorFrom=function(e){return new kC(this.root,e,this.comparator,!0)},n}(),kC=function(){function n(e,t,r,i){this.isReverse=i,this.nodeStack=[];for(var o=1;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return n.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},n.prototype.hasNext=function(){return this.nodeStack.length>0},n.prototype.peek=function(){if(this.nodeStack.length===0)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},n}(),mc=function(){function n(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}return n.prototype.copy=function(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)},n.prototype.isEmpty=function(){return!1},n.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},n.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},n.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},n.prototype.minKey=function(){return this.min().key},n.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},n.prototype.insert=function(e,t,r){var i=this,o=r(e,i.key);return(i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r))).fixUp()},n.prototype.removeMin=function(){if(this.left.isEmpty())return n.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},n.prototype.remove=function(e,t){var r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()},n.prototype.isRed=function(){return this.color},n.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},n.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},n.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},n.prototype.rotateLeft=function(){var e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},n.prototype.rotateRight=function(){var e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},n.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},n.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},n.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ze();var e=this.left.check();if(e!==this.right.check())throw ze();return e+(this.isRed()?0:1)},n}();mc.EMPTY=null,mc.RED=!0,mc.BLACK=!1,mc.EMPTY=new(function(){function n(){this.size=0}return Object.defineProperty(n.prototype,"key",{get:function(){throw ze()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){throw ze()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){throw ze()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){throw ze()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){throw ze()},enumerable:!1,configurable:!0}),n.prototype.copy=function(e,t,r,i,o){return this},n.prototype.insert=function(e,t,r){return new mc(e,t)},n.prototype.remove=function(e,t){return this},n.prototype.isEmpty=function(){return!0},n.prototype.inorderTraversal=function(e){return!1},n.prototype.reverseTraversal=function(e){return!1},n.prototype.minKey=function(){return null},n.prototype.maxKey=function(){return null},n.prototype.isRed=function(){return!1},n.prototype.checkMaxDepth=function(){return!0},n.prototype.check=function(){return 0},n}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr=function(){function n(e){this.comparator=e,this.data=new Ki(this.comparator)}return n.prototype.has=function(e){return this.data.get(e)!==null},n.prototype.first=function(){return this.data.minKey()},n.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(n.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),n.prototype.indexOf=function(e){return this.data.indexOf(e)},n.prototype.forEach=function(e){this.data.inorderTraversal(function(t,r){return e(t),!1})},n.prototype.forEachInRange=function(e,t){for(var r=this.data.getIteratorFrom(e[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}},n.prototype.forEachWhile=function(e,t){var r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return},n.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},n.prototype.getIterator=function(){return new Zj(this.data.getIterator())},n.prototype.getIteratorFrom=function(e){return new Zj(this.data.getIteratorFrom(e))},n.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},n.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},n.prototype.isEmpty=function(){return this.data.isEmpty()},n.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(r){t=t.add(r)}),t},n.prototype.isEqual=function(e){if(!(e instanceof n)||this.size!==e.size)return!1;for(var t=this.data.getIterator(),r=e.data.getIterator();t.hasNext();){var i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0},n.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},n.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},n.prototype.copy=function(e){var t=new n(this.comparator);return t.data=e,t},n}(),Zj=function(){function n(e){this.iter=e}return n.prototype.getNext=function(){return this.iter.getNext().key},n.prototype.hasNext=function(){return this.iter.hasNext()},n}(),gHe=new Ki(Ze.comparator);function Bs(){return gHe}var vHe=new Ki(Ze.comparator);function aM(){return vHe}var mHe=new Ki(Ze.comparator);function Ste(){return mHe}var _He=new Pr(Ze.comparator);function dn(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=_He,r=0,i=n;r<i.length;r++){var o=i[r];t=t.add(o)}return t}var yHe=new Pr(Rt);function _x(){return yHe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d4=function(){function n(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return n.createSynthesizedRemoteEventForCurrentChange=function(e,t){var r=new Map;return r.set(e,p4.createSynthesizedTargetChangeForCurrentChange(e,t)),new n(It.min(),r,_x(),Bs(),dn())},n}(),p4=function(){function n(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return n.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new n(mo.EMPTY_BYTE_STRING,t,dn(),dn(),dn())},n}(),p1=function(n,e,t,r){this.v=n,this.removedTargetIds=e,this.key=t,this.P=r},Ete=function(n,e){this.targetId=n,this.V=e},Ite=function(n,e,t,r){t===void 0&&(t=mo.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=n,this.targetIds=e,this.resumeToken=t,this.cause=r},Xj=function(){function n(){this.S=0,this.D=Jj(),this.C=mo.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(n.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),n.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},n.prototype.M=function(){var e=dn(),t=dn(),r=dn();return this.D.forEach(function(i,o){switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ze()}}),new p4(this.C,this.N,e,t,r)},n.prototype.L=function(){this.k=!1,this.D=Jj()},n.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},n.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},n.prototype.U=function(){this.S+=1},n.prototype.K=function(){this.S-=1},n.prototype.j=function(){this.k=!0,this.N=!0},n}(),bHe=function(){function n(e){this.W=e,this.G=new Map,this.H=Bs(),this.J=Qj(),this.Y=new Pr(Rt)}return n.prototype.X=function(e){for(var t=0,r=e.v;t<r.length;t++){var i=r[t];e.P&&e.P.isFoundDocument()?this.Z(i,e.P):this.tt(i,e.key,e.P)}for(var o=0,s=e.removedTargetIds;o<s.length;o++)i=s[o],this.tt(i,e.key,e.P)},n.prototype.et=function(e){var t=this;this.forEachTarget(e,function(r){var i=t.nt(r);switch(e.state){case 0:t.st(r)&&i.O(e.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(e.resumeToken);break;case 2:i.K(),i.F||t.removeTarget(r);break;case 3:t.st(r)&&(i.j(),i.O(e.resumeToken));break;case 4:t.st(r)&&(t.it(r),i.O(e.resumeToken));break;default:ze()}})},n.prototype.forEachTarget=function(e,t){var r=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach(function(i,o){r.st(o)&&t(o)})},n.prototype.rt=function(e){var t=e.targetId,r=e.V.count,i=this.ot(t);if(i){var o=i.target;if(ZS(o))if(r===0){var s=new Ze(o.path);this.tt(t,s,yi.newNoDocument(s,It.min()))}else nt(r===1);else this.ct(t)!==r&&(this.it(t),this.Y=this.Y.add(t))}},n.prototype.ut=function(e){var t=this,r=new Map;this.G.forEach(function(s,a){var u=t.ot(a);if(u){if(s.current&&ZS(u.target)){var l=new Ze(u.target.path);t.H.get(l)!==null||t.at(a,l)||t.tt(a,l,yi.newNoDocument(l,e))}s.$&&(r.set(a,s.M()),s.L())}});var i=dn();this.J.forEach(function(s,a){var u=!0;a.forEachWhile(function(l){var f=t.ot(l);return!f||f.purpose===2||(u=!1,!1)}),u&&(i=i.add(s))});var o=new d4(e,r,this.Y,this.H,i);return this.H=Bs(),this.J=Qj(),this.Y=new Pr(Rt),o},n.prototype.Z=function(e,t){if(this.st(e)){var r=this.at(e,t.key)?2:0;this.nt(e).B(t.key,r),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},n.prototype.tt=function(e,t,r){if(this.st(e)){var i=this.nt(e);this.at(e,t)?i.B(t,1):i.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),r&&(this.H=this.H.insert(t,r))}},n.prototype.removeTarget=function(e){this.G.delete(e)},n.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},n.prototype.U=function(e){this.nt(e).U()},n.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Xj,this.G.set(e,t)),t},n.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Pr(Rt),this.J=this.J.insert(e,t)),t},n.prototype.st=function(e){var t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t},n.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},n.prototype.it=function(e){var t=this;this.G.set(e,new Xj),this.W.getRemoteKeysForTarget(e).forEach(function(r){t.tt(e,r,null)})},n.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},n}();function Qj(){return new Ki(Ze.comparator)}function Jj(){return new Ki(Ze.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wHe={asc:"ASCENDING",desc:"DESCENDING"},CHe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SHe=function(n,e){this.databaseId=n,this.I=e};function d0(n,e){return n.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function xte(n,e){return n.I?e.toBase64():e.toUint8Array()}function EHe(n,e){return d0(n,e.toTimestamp())}function Jr(n){return nt(!!n),It.fromTimestamp(function(e){var t=of(e);return new Po(t.seconds,t.nanos)}(n))}function g4(n,e){return function(t){return new Yt(["projects",t.projectId,"databases",t.database])}(n).child("documents").child(e).canonicalString()}function Dte(n){var e=Yt.fromString(n);return nt(Mte(e)),e}function p0(n,e){return g4(n.databaseId,e.path)}function du(n,e){var t=Dte(e);if(t.get(1)!==n.databaseId.projectId)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(kte(t))}function uM(n,e){return g4(n.databaseId,e)}function Lte(n){var e=Dte(n);return e.length===4?Yt.emptyPath():kte(e)}function g0(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kte(n){return nt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ez(n,e,t){return{name:p0(n,e),fields:t.value.mapValue.fields}}function Tte(n,e,t){var r=du(n,e.name),i=Jr(e.updateTime),o=new ss({mapValue:{fields:e.fields}}),s=yi.newFoundDocument(r,i,o);return t&&s.setHasCommittedMutations(),t?s.setHasCommittedMutations():s}function JS(n,e){var t;if(e instanceof wb)t={update:ez(n,e.key,e.value)};else if(e instanceof Cb)t={delete:p0(n,e.key)};else if(e instanceof xf)t={update:ez(n,e.key,e.data),updateMask:kHe(e.fieldMask)};else{if(!(e instanceof h4))return ze();t={verify:p0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(function(r){return function(i,o){var s=o.transform;if(s instanceof fv)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Sd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Ed)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof hv)return{fieldPath:o.field.canonicalString(),increment:s.A};throw ze()}(0,r)})),e.precondition.isNone||(t.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:EHe(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ze()}(n,e.precondition)),t}function tz(n,e){var t=e.currentDocument?function(l){return l.updateTime!==void 0?Pi.updateTime(Jr(l.updateTime)):l.exists!==void 0?Pi.exists(l.exists):Pi.none()}(e.currentDocument):Pi.none(),r=e.updateTransforms?e.updateTransforms.map(function(l){return function(f,h){var d=null;if("setToServerValue"in h)nt(h.setToServerValue==="REQUEST_TIME"),d=new fv;else if("appendMissingElements"in h){var g=h.appendMissingElements.values||[];d=new Sd(g)}else if("removeAllFromArray"in h){var v=h.removeAllFromArray.values||[];d=new Ed(v)}else"increment"in h?d=new hv(f,h.increment):ze();var m=Na.fromServerFormat(h.fieldPath);return new bb(m,d)}(n,l)}):[];if(e.update){e.update.name;var i=du(n,e.update.name),o=new ss({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(l){var f=l.fieldPaths||[];return new av(f.map(function(h){return Na.fromServerFormat(h)}))}(e.updateMask);return new xf(i,o,s,t,r)}return new wb(i,o,t,r)}if(e.delete){var a=du(n,e.delete);return new Cb(a,t)}if(e.verify){var u=du(n,e.verify);return new h4(u,t)}return ze()}function Nte(n,e){return{documents:[uM(n,e.path)]}}function Ate(n,e){var t={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(t.parent=uM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=uM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(a){if(a.length!==0){var u=a.map(function(l){return function(f){if(f.op==="=="){if(Hj(f.value))return{unaryFilter:{field:zp(f.field),op:"IS_NAN"}};if(Vj(f.value))return{unaryFilter:{field:zp(f.field),op:"IS_NULL"}}}else if(f.op==="!="){if(Hj(f.value))return{unaryFilter:{field:zp(f.field),op:"IS_NOT_NAN"}};if(Vj(f.value))return{unaryFilter:{field:zp(f.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zp(f.field),op:xHe(f.op),value:f.value}}}(l)});return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}}(e.filters);i&&(t.structuredQuery.where=i);var o=function(a){if(a.length!==0)return a.map(function(u){return function(l){return{field:zp(l.field),direction:IHe(l.dir)}}(u)})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);var s=function(a,u){return a.I||Zd(u)?u:{value:u}}(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=nz(e.startAt)),e.endAt&&(t.structuredQuery.endAt=nz(e.endAt)),t}function Ote(n){var e=Lte(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){nt(r===1);var o=t.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];t.where&&(s=Rte(t.where));var a=[];t.orderBy&&(a=t.orderBy.map(function(h){return function(d){return new Lg(gg(d.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(h)}));var u=null;t.limit&&(u=function(h){var d;return Zd(d=typeof h=="object"?h.value:h)?null:d}(t.limit));var l=null;t.startAt&&(l=rz(t.startAt));var f=null;return t.endAt&&(f=rz(t.endAt)),lte(e,i,a,s,u,"F",l,f)}function Rte(n){return n?n.unaryFilter!==void 0?[LHe(n)]:n.fieldFilter!==void 0?[DHe(n)]:n.compositeFilter!==void 0?n.compositeFilter.filters.map(function(e){return Rte(e)}).reduce(function(e,t){return e.concat(t)}):ze():[]}function nz(n){return{before:n.before,values:n.position}}function rz(n){var e=!!n.before,t=n.values||[];return new h0(t,e)}function IHe(n){return wHe[n]}function xHe(n){return CHe[n]}function zp(n){return{fieldPath:n.canonicalString()}}function gg(n){return Na.fromServerFormat(n.fieldPath)}function DHe(n){return ls.create(gg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ze()}}(n.fieldFilter.op),n.fieldFilter.value)}function LHe(n){switch(n.unaryFilter.op){case"IS_NAN":var e=gg(n.unaryFilter.field);return ls.create(e,"==",{doubleValue:NaN});case"IS_NULL":var t=gg(n.unaryFilter.field);return ls.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=gg(n.unaryFilter.field);return ls.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=gg(n.unaryFilter.field);return ls.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ze()}}function kHe(n){var e=[];return n.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Mte(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(n){for(var e="",t=0;t<n.length;t++)e.length>0&&(e=iz(e)),e=THe(n.get(t),e);return iz(e)}function THe(n,e){for(var t=e,r=n.length,i=0;i<r;i++){var o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function iz(n){return n+""}function ll(n){var e=n.length;if(nt(e>=2),e===2)return nt(n.charAt(0)===""&&n.charAt(1)===""),Yt.emptyPath();for(var t=e-2,r=[],i="",o=0;o<e;){var s=n.indexOf("",o);switch((s<0||s>t)&&ze(),n.charAt(s+1)){case"":var a=n.substring(o,s),u=void 0;i.length===0?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:ze()}o=s+2}return new Yt(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NHe=function(n,e){this.seconds=n,this.nanoseconds=e},ts=function(n,e,t){this.ownerId=n,this.allowTabSynchronization=e,this.leaseTimestampMs=t};ts.store="owner",ts.key="owner";var qc=function(n,e,t){this.userId=n,this.lastAcknowledgedBatchId=e,this.lastStreamToken=t};qc.store="mutationQueues",qc.keyPath="userId";var An=function(n,e,t,r,i){this.userId=n,this.batchId=e,this.localWriteTimeMs=t,this.baseMutations=r,this.mutations=i};An.store="mutations",An.keyPath="batchId",An.userMutationsIndex="userMutationsIndex",An.userMutationsKeyPath=["userId","batchId"];var Oi=function(){function n(){}return n.prefixForUser=function(e){return[e]},n.prefixForPath=function(e,t){return[e,xa(t)]},n.key=function(e,t,r){return[e,xa(t),r]},n}();Oi.store="documentMutations",Oi.PLACEHOLDER=new Oi;var AHe=function(n,e){this.path=n,this.readTime=e},OHe=function(n,e){this.path=n,this.version=e},Xn=function(n,e,t,r,i,o){this.unknownDocument=n,this.noDocument=e,this.document=t,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Xn.store="remoteDocuments",Xn.readTimeIndex="readTimeIndex",Xn.readTimeIndexPath="readTime",Xn.collectionReadTimeIndex="collectionReadTimeIndex",Xn.collectionReadTimeIndexPath=["parentPath","readTime"];var ou=function(n){this.byteSize=n};ou.store="remoteDocumentGlobal",ou.key="remoteDocumentGlobalKey";var Ao=function(n,e,t,r,i,o,s){this.targetId=n,this.canonicalId=e,this.readTime=t,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ao.store="targets",Ao.keyPath="targetId",Ao.queryTargetsIndexName="queryTargetsIndex",Ao.queryTargetsKeyPath=["canonicalId","targetId"];var gi=function(n,e,t){this.targetId=n,this.path=e,this.sequenceNumber=t};gi.store="targetDocuments",gi.keyPath=["targetId","path"],gi.documentTargetsIndex="documentTargetsIndex",gi.documentTargetsKeyPath=["path","targetId"];var is=function(n,e,t,r){this.highestTargetId=n,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=t,this.targetCount=r};is.key="targetGlobalKey",is.store="targetGlobal";var id=function(n,e){this.collectionId=n,this.parent=e};id.store="collectionParents",id.keyPath=["collectionId","parent"];var gl=function(n,e,t,r){this.clientId=n,this.updateTimeMs=e,this.networkEnabled=t,this.inForeground=r};gl.store="clientMetadata",gl.keyPath="clientId";var dv=function(n,e,t){this.bundleId=n,this.createTime=e,this.version=t};dv.store="bundles",dv.keyPath="bundleId";var pv=function(n,e,t){this.name=n,this.readTime=e,this.bundledQuery=t};pv.store="namedQueries",pv.keyPath="name";var RHe=Ct(Ct([],Ct(Ct([],Ct(Ct([],Ct(Ct([],[qc.store,An.store,Oi.store,Xn.store,Ao.store,ts.store,is.store,gi.store]),[gl.store])),[ou.store])),[id.store])),[dv.store,pv.store]),Pte="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fte=function(){function n(){this.onCommittedListeners=[]}return n.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},n.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},n}(),Ui=function(){var n=this;this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})},he=function(){function n(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(r){t.isDone=!0,t.result=r,t.nextCallback&&t.nextCallback(r)},function(r){t.isDone=!0,t.error=r,t.catchCallback&&t.catchCallback(r)})}return n.prototype.catch=function(e){return this.next(void 0,e)},n.prototype.next=function(e,t){var r=this;return this.callbackAttached&&ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n(function(i,o){r.nextCallback=function(s){r.wrapSuccess(e,s).next(i,o)},r.catchCallback=function(s){r.wrapFailure(t,s).next(i,o)}})},n.prototype.toPromise=function(){var e=this;return new Promise(function(t,r){e.next(t,r)})},n.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof n?t:n.resolve(t)}catch(r){return n.reject(r)}},n.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):n.resolve(t)},n.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):n.reject(t)},n.resolve=function(e){return new n(function(t,r){t(e)})},n.reject=function(e){return new n(function(t,r){r(e)})},n.waitFor=function(e){return new n(function(t,r){var i=0,o=0,s=!1;e.forEach(function(a){++i,a.next(function(){++o,s&&o===i&&t()},function(u){return r(u)})}),s=!0,o===i&&t()})},n.or=function(e){for(var t=n.resolve(!1),r=function(s){t=t.next(function(a){return a?n.resolve(a):s()})},i=0,o=e;i<o.length;i++)r(o[i]);return t},n.forEach=function(e,t){var r=this,i=[];return e.forEach(function(o,s){i.push(t.call(r,o,s))}),this.waitFor(i)},n}(),Bte=function(){function n(e,t){var r=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new Ui,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){t.error?r.ft.reject(new oy(e,t.error)):r.ft.resolve()},this.transaction.onerror=function(i){var o=v4(i.target.error);r.ft.reject(new oy(e,o))}}return n.open=function(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new oy(t,o)}},Object.defineProperty(n.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),n.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},n.prototype.store=function(e){var t=this.transaction.objectStore(e);return new PHe(t)},n}(),gv=function(){function n(e,t,r){this.name=e,this.version=t,this.wt=r,n._t(ud())===12.2&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return n.delete=function(e){return me("SimpleDb","Removing database:",e),kh(window.indexedDB.deleteDatabase(e)).toPromise()},n.yt=function(){if(typeof indexedDB>"u")return!1;if(n.gt())return!0;var e=ud(),t=n._t(e),r=0<t&&t<10,i=n.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},n.gt=function(){var e;return typeof process<"u"&&((e=Y6e)===null||e===void 0?void 0:e.Tt)==="YES"},n.It=function(e,t){return e.store(t)},n._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)},n.Et=function(e){var t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)},n.prototype.At=function(e){return U(this,void 0,void 0,function(){var t,r=this;return V(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(me("SimpleDb","Opening database:",this.name),t=this,[4,new Promise(function(o,s){var a=indexedDB.open(r.name,r.version);a.onsuccess=function(u){var l=u.target.result;o(l)},a.onblocked=function(){s(new oy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(u){var l=u.target.error;l.name==="VersionError"?s(new le(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s(new oy(e,l))},a.onupgradeneeded=function(u){me("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',u.oldVersion);var l=u.target.result;r.wt.Rt(l,a.transaction,u.oldVersion,r.version).next(function(){me("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:t.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(o){return r.bt(o)}),this.db)]}})})},n.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},n.prototype.runTransaction=function(e,t,r,i){return U(this,void 0,void 0,function(){var o,s,a,u,l;return V(this,function(f){switch(f.label){case 0:o=t==="readonly",s=0,a=function(){var h,d,g,v,m;return V(this,function(y){switch(y.label){case 0:++s,y.label=1;case 1:return y.trys.push([1,4,,5]),[4,u.At(e)];case 2:return u.db=y.sent(),h=Bte.open(u.db,e,o?"readonly":"readwrite",r),d=i(h).catch(function(b){return h.abort(b),he.reject(b)}).toPromise(),g={},d.catch(function(){}),[4,h.dt];case 3:return[2,(g.value=(y.sent(),d),g)];case 4:return v=y.sent(),m=v.name!=="FirebaseError"&&s<3,me("SimpleDb","Transaction failed with error:",v.message,"Retrying:",m),u.close(),m?[3,5]:[2,{value:Promise.reject(v)}];case 5:return[2]}})},u=this,f.label=1;case 1:return[5,a()];case 2:if(typeof(l=f.sent())=="object")return[2,l.value];f.label=3;case 3:return[3,1];case 4:return[2]}})})},n.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},n}(),MHe=function(){function n(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(n.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),n.prototype.done=function(){this.Vt=!0},n.prototype.Ct=function(e){this.St=e},n.prototype.delete=function(){return kh(this.Pt.delete())},n}(),oy=function(n){function e(t,r){var i=this;return(i=n.call(this,Y.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return Ie(e,n),e}(le);function Xd(n){return n.name==="IndexedDbTransactionError"}var PHe=function(){function n(e){this.store=e}return n.prototype.put=function(e,t){var r;return t!==void 0?(me("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),kh(r)},n.prototype.add=function(e){return me("SimpleDb","ADD",this.store.name,e,e),kh(this.store.add(e))},n.prototype.get=function(e){var t=this;return kh(this.store.get(e)).next(function(r){return r===void 0&&(r=null),me("SimpleDb","GET",t.store.name,e,r),r})},n.prototype.delete=function(e){return me("SimpleDb","DELETE",this.store.name,e),kh(this.store.delete(e))},n.prototype.count=function(){return me("SimpleDb","COUNT",this.store.name),kh(this.store.count())},n.prototype.Nt=function(e,t){var r=this.cursor(this.options(e,t)),i=[];return this.xt(r,function(o,s){i.push(s)}).next(function(){return i})},n.prototype.kt=function(e,t){me("SimpleDb","DELETE ALL",this.store.name);var r=this.options(e,t);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(o,s,a){return a.delete()})},n.prototype.$t=function(e,t){var r;t?r=e:(r={},t=e);var i=this.cursor(r);return this.xt(i,t)},n.prototype.Ot=function(e){var t=this.cursor({});return new he(function(r,i){t.onerror=function(o){var s=v4(o.target.error);i(s)},t.onsuccess=function(o){var s=o.target.result;s?e(s.primaryKey,s.value).next(function(a){a?s.continue():r()}):r()}})},n.prototype.xt=function(e,t){var r=[];return new he(function(i,o){e.onerror=function(s){o(s.target.error)},e.onsuccess=function(s){var a=s.target.result;if(a){var u=new MHe(a),l=t(a.primaryKey,a.value,u);if(l instanceof he){var f=l.catch(function(h){return u.done(),he.reject(h)});r.push(f)}u.isDone?i():u.Dt===null?a.continue():a.continue(u.Dt)}else i()}}).next(function(){return he.waitFor(r)})},n.prototype.options=function(e,t){var r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}},n.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var r=this.store.index(e.index);return e.Ft?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},n}();function kh(n){return new he(function(e,t){n.onsuccess=function(r){var i=r.target.result;e(i)},n.onerror=function(r){var i=v4(r.target.error);t(i)}})}var oz=!1;function v4(n){var e=gv._t(ud());if(e>=12.2&&e<13){var t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){var r=new le("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+t+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return oz||(oz=!0,setTimeout(function(){throw r},0)),r}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sz=function(n){function e(t,r){var i=this;return(i=n.call(this)||this).Mt=t,i.currentSequenceNumber=r,i}return Ie(e,n),e}(Fte);function jo(n,e){var t=Ee(n);return gv.It(t.Mt,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m4=function(){function n(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}return n.prototype.applyToRemoteDocument=function(e,t){for(var r=t.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e.key)&&hHe(o,e,r[i])}},n.prototype.applyToLocalView=function(e){for(var t=0,r=this.baseMutations;t<r.length;t++)(s=r[t]).key.isEqual(e.key)&&sM(s,e,this.localWriteTime);for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(e.key)&&sM(s,e,this.localWriteTime)}},n.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach(function(r){var i=e.get(r.key),o=i;t.applyToLocalView(o),i.isValidDocument()||o.convertToNoDocument(It.min())})},n.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},dn())},n.prototype.isEqual=function(e){return this.batchId===e.batchId&&sv(this.mutations,e.mutations,function(t,r){return $j(t,r)})&&sv(this.baseMutations,e.baseMutations,function(t,r){return $j(t,r)})},n}(),FHe=function(){function n(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}return n.from=function(e,t,r){nt(e.mutations.length===r.length);for(var i=Ste(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)},n}(),yx=function(){function n(e,t,r,i,o,s,a){o===void 0&&(o=It.min()),s===void 0&&(s=It.min()),a===void 0&&(a=mo.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a}return n.prototype.withSequenceNumber=function(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},n.prototype.withResumeToken=function(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},n.prototype.withLastLimboFreeSnapshotVersion=function(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},n}(),Wte=function(n){this.Lt=n};function lM(n,e){if(e.document)return Tte(n.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Ze.fromSegments(e.noDocument.path),r=mv(e.noDocument.readTime),i=yi.newNoDocument(t,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ze.fromSegments(e.unknownDocument.path);return r=mv(e.unknownDocument.version),yi.newUnknownDocument(o,r)}return ze()}function az(n,e,t){var r=_4(t),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(h,d){return{name:p0(h,d.key),fields:d.data.value.mapValue.fields,updateTime:d0(h,d.version.toTimestamp())}}(n.Lt,e),s=e.hasCommittedMutations;return new Xn(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=vv(e.version);return s=e.hasCommittedMutations,new Xn(null,new AHe(a,u),null,s,r,i)}if(e.isUnknownDocument()){var l=e.key.path.toArray(),f=vv(e.version);return new Xn(new OHe(l,f),null,null,!0,r,i)}return ze()}function _4(n){var e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vte(n){var e=new Po(n[0],n[1]);return It.fromTimestamp(e)}function vv(n){var e=n.toTimestamp();return new NHe(e.seconds,e.nanoseconds)}function mv(n){var e=new Po(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function ng(n,e){for(var t=(e.baseMutations||[]).map(function(u){return tz(n.Lt,u)}),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&e.mutations[r+1].transform!==void 0){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map(function(u){return tz(n.Lt,u)}),a=Po.fromMillis(e.localWriteTimeMs);return new m4(e.batchId,a,t,s)}function k_(n){var e,t,r=mv(n.readTime),i=n.lastLimboFreeSnapshotVersion!==void 0?mv(n.lastLimboFreeSnapshotVersion):It.min();return n.query.documents!==void 0?(nt((t=n.query).documents.length===1),e=js(Qv(Lte(t.documents[0])))):e=function(o){return js(Ote(o))}(n.query),new yx(e,n.targetId,0,n.lastListenSequenceNumber,r,i,mo.fromBase64String(n.resumeToken))}function Hte(n,e){var t,r=vv(e.snapshotVersion),i=vv(e.lastLimboFreeSnapshotVersion);t=ZS(e.target)?Nte(n.Lt,e.target):Ate(n.Lt,e.target);var o=e.resumeToken.toBase64();return new Ao(e.targetId,mb(e.target),r,o,e.sequenceNumber,i,t)}function y4(n){var e=Ote({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cte(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BHe=function(){function n(){}return n.prototype.getBundleMetadata=function(e,t){return uz(e).get(t).next(function(r){if(r)return{id:(i=r).bundleId,createTime:mv(i.createTime),version:i.version};var i})},n.prototype.saveBundleMetadata=function(e,t){return uz(e).put({bundleId:(r=t).id,createTime:vv(Jr(r.createTime)),version:r.version});var r},n.prototype.getNamedQuery=function(e,t){return lz(e).get(t).next(function(r){if(r)return{name:(i=r).name,query:y4(i.bundledQuery),readTime:mv(i.readTime)};var i})},n.prototype.saveNamedQuery=function(e,t){return lz(e).put(function(r){return{name:r.name,readTime:vv(Jr(r.readTime)),bundledQuery:r.bundledQuery}}(t))},n}();function uz(n){return jo(n,dv.store)}function lz(n){return jo(n,pv.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WHe=function(){function n(){this.Bt=new b4}return n.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),he.resolve()},n.prototype.getCollectionParents=function(e,t){return he.resolve(this.Bt.getEntries(t))},n}(),b4=function(){function n(){this.index={}}return n.prototype.add=function(e){var t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pr(Yt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o},n.prototype.has=function(e){var t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)},n.prototype.getEntries=function(e){return(this.index[e]||new Pr(Yt.comparator)).toArray()},n}(),VHe=function(){function n(){this.qt=new b4}return n.prototype.addToCollectionParentIndex=function(e,t){var r=this;if(!this.qt.has(t)){var i=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(function(){r.qt.add(t)});var s={collectionId:i,parent:xa(o)};return cz(e).put(s)}return he.resolve()},n.prototype.getCollectionParents=function(e,t){var r=[],i=IDBKeyRange.bound([t,""],[nte(t),""],!1,!0);return cz(e).Nt(i).next(function(o){for(var s=0,a=o;s<a.length;s++){var u=a[s];if(u.collectionId!==t)break;r.push(ll(u.parent))}return r})},n}();function cz(n){return jo(n,id.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ga=function(){function n(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}return n.withCacheSize=function(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ute(n,e,t){var r=n.store(An.store),i=n.store(Oi.store),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.$t({range:s},function(v,m,y){return a++,y.delete()});o.push(u.next(function(){nt(a===1)}));for(var l=[],f=0,h=t.mutations;f<h.length;f++){var d=h[f],g=Oi.key(e,d.key.path,t.batchId);o.push(i.delete(g)),l.push(d.key)}return he.waitFor(o).next(function(){return l})}function eE(n){if(!n)return 0;var e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ze();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ga.DEFAULT_COLLECTION_PERCENTILE=10,Ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ga.DEFAULT=new Ga(41943040,Ga.DEFAULT_COLLECTION_PERCENTILE,Ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ga.DISABLED=new Ga(-1,0,0);var HHe=function(){function n(e,t,r,i){this.userId=e,this.R=t,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return n.Qt=function(e,t,r,i){return nt(e.uid!==""),new n(e.isAuthenticated()?e.uid:"",t,r,i)},n.prototype.checkEmpty=function(e){var t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nc(e).$t({index:An.userMutationsIndex,range:r},function(i,o,s){t=!1,s.done()}).next(function(){return t})},n.prototype.addMutationBatch=function(e,t,r,i){var o=this,s=rg(e),a=nc(e);return a.add({}).next(function(u){nt(typeof u=="number");for(var l=new m4(u,t,r,i),f=function(b,C,E){var D=E.baseMutations.map(function(I){return JS(b.Lt,I)}),k=E.mutations.map(function(I){return JS(b.Lt,I)});return new An(C,E.batchId,E.localWriteTime.toMillis(),D,k)}(o.R,o.userId,l),h=[],d=new Pr(function(b,C){return Rt(b.canonicalString(),C.canonicalString())}),g=0,v=i;g<v.length;g++){var m=v[g],y=Oi.key(o.userId,m.key.path,u);d=d.add(m.key.path.popLast()),h.push(a.put(f)),h.push(s.put(y,Oi.PLACEHOLDER))}return d.forEach(function(b){h.push(o.Ut.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(function(){o.Kt[u]=l.keys()}),he.waitFor(h).next(function(){return l})})},n.prototype.lookupMutationBatch=function(e,t){var r=this;return nc(e).get(t).next(function(i){return i?(nt(i.userId===r.userId),ng(r.R,i)):null})},n.prototype.jt=function(e,t){var r=this;return this.Kt[t]?he.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next(function(i){if(i){var o=i.keys();return r.Kt[t]=o,o}return null})},n.prototype.getNextMutationBatchAfterBatchId=function(e,t){var r=this,i=t+1,o=IDBKeyRange.lowerBound([this.userId,i]),s=null;return nc(e).$t({index:An.userMutationsIndex,range:o},function(a,u,l){u.userId===r.userId&&(nt(u.batchId>=i),s=ng(r.R,u)),l.done()}).next(function(){return s})},n.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return nc(e).$t({index:An.userMutationsIndex,range:t,reverse:!0},function(i,o,s){r=o.batchId,s.done()}).next(function(){return r})},n.prototype.getAllMutationBatches=function(e){var t=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nc(e).Nt(An.userMutationsIndex,r).next(function(i){return i.map(function(o){return ng(t.R,o)})})},n.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var r=this,i=Oi.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=[];return rg(e).$t({range:o},function(a,u,l){var f=a[0],h=a[1],d=a[2],g=ll(h);if(f===r.userId&&t.path.isEqual(g))return nc(e).get(d).next(function(v){if(!v)throw ze();nt(v.userId===r.userId),s.push(ng(r.R,v))});l.done()}).next(function(){return s})},n.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var r=this,i=new Pr(Rt),o=[];return t.forEach(function(s){var a=Oi.prefixForPath(r.userId,s.path),u=IDBKeyRange.lowerBound(a),l=rg(e).$t({range:u},function(f,h,d){var g=f[0],v=f[1],m=f[2],y=ll(v);g===r.userId&&s.path.isEqual(y)?i=i.add(m):d.done()});o.push(l)}),he.waitFor(o).next(function(){return r.Wt(e,i)})},n.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var r=this,i=t.path,o=i.length+1,s=Oi.prefixForPath(this.userId,i),a=IDBKeyRange.lowerBound(s),u=new Pr(Rt);return rg(e).$t({range:a},function(l,f,h){var d=l[0],g=l[1],v=l[2],m=ll(g);d===r.userId&&i.isPrefixOf(m)?m.length===o&&(u=u.add(v)):h.done()}).next(function(){return r.Wt(e,u)})},n.prototype.Wt=function(e,t){var r=this,i=[],o=[];return t.forEach(function(s){o.push(nc(e).get(s).next(function(a){if(a===null)throw ze();nt(a.userId===r.userId),i.push(ng(r.R,a))}))}),he.waitFor(o).next(function(){return i})},n.prototype.removeMutationBatch=function(e,t){var r=this;return Ute(e.Mt,this.userId,t).next(function(i){return e.addOnCommittedListener(function(){r.Gt(t.batchId)}),he.forEach(i,function(o){return r.referenceDelegate.markPotentiallyOrphaned(e,o)})})},n.prototype.Gt=function(e){delete this.Kt[e]},n.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(r){if(!r)return he.resolve();var i=IDBKeyRange.lowerBound(Oi.prefixForUser(t.userId)),o=[];return rg(e).$t({range:i},function(s,a,u){if(s[0]===t.userId){var l=ll(s[1]);o.push(l)}else u.done()}).next(function(){nt(o.length===0)})})},n.prototype.containsKey=function(e,t){return jte(e,this.userId,t)},n.prototype.zt=function(e){var t=this;return zte(e).get(this.userId).next(function(r){return r||new qc(t.userId,-1,"")})},n}();function jte(n,e,t){var r=Oi.prefixForPath(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return rg(n).$t({range:o,Ft:!0},function(a,u,l){var f=a[0],h=a[1];a[2],f===e&&h===i&&(s=!0),l.done()}).next(function(){return s})}function nc(n){return jo(n,An.store)}function rg(n){return jo(n,Oi.store)}function zte(n){return jo(n,qc.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tE=function(){function n(e){this.Ht=e}return n.prototype.next=function(){return this.Ht+=2,this.Ht},n.Jt=function(){return new n(0)},n.Yt=function(){return new n(-1)},n}(),UHe=function(){function n(e,t){this.referenceDelegate=e,this.R=t}return n.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next(function(r){var i=new tE(r.highestTargetId);return r.highestTargetId=i.next(),t.Zt(e,r).next(function(){return r.highestTargetId})})},n.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(t){return It.fromTimestamp(new Po(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},n.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(t){return t.highestListenSequenceNumber})},n.prototype.setTargetsMetadata=function(e,t,r){var i=this;return this.Xt(e).next(function(o){return o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),i.Zt(e,o)})},n.prototype.addTargetData=function(e,t){var r=this;return this.te(e,t).next(function(){return r.Xt(e).next(function(i){return i.targetCount+=1,r.ee(t,i),r.Zt(e,i)})})},n.prototype.updateTargetData=function(e,t){return this.te(e,t)},n.prototype.removeTargetData=function(e,t){var r=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return qp(e).delete(t.targetId)}).next(function(){return r.Xt(e)}).next(function(i){return nt(i.targetCount>0),i.targetCount-=1,r.Zt(e,i)})},n.prototype.removeTargets=function(e,t,r){var i=this,o=0,s=[];return qp(e).$t(function(a,u){var l=k_(u);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(o++,s.push(i.removeTargetData(e,l)))}).next(function(){return he.waitFor(s)}).next(function(){return o})},n.prototype.forEachTarget=function(e,t){return qp(e).$t(function(r,i){var o=k_(i);t(o)})},n.prototype.Xt=function(e){return hz(e).get(is.key).next(function(t){return nt(t!==null),t})},n.prototype.Zt=function(e,t){return hz(e).put(is.key,t)},n.prototype.te=function(e,t){return qp(e).put(Hte(this.R,t))},n.prototype.ee=function(e,t){var r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r},n.prototype.getTargetCount=function(e){return this.Xt(e).next(function(t){return t.targetCount})},n.prototype.getTargetData=function(e,t){var r=mb(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return qp(e).$t({range:i,index:Ao.queryTargetsIndexName},function(s,a,u){var l=k_(a);gx(t,l.target)&&(o=l,u.done())}).next(function(){return o})},n.prototype.addMatchingKeys=function(e,t,r){var i=this,o=[],s=_c(e);return t.forEach(function(a){var u=xa(a.path);o.push(s.put(new gi(r,u))),o.push(i.referenceDelegate.addReference(e,r,a))}),he.waitFor(o)},n.prototype.removeMatchingKeys=function(e,t,r){var i=this,o=_c(e);return he.forEach(t,function(s){var a=xa(s.path);return he.waitFor([o.delete([r,a]),i.referenceDelegate.removeReference(e,r,s)])})},n.prototype.removeMatchingKeysForTargetId=function(e,t){var r=_c(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)},n.prototype.getMatchingKeysForTargetId=function(e,t){var r=IDBKeyRange.bound([t],[t+1],!1,!0),i=_c(e),o=dn();return i.$t({range:r,Ft:!0},function(s,a,u){var l=ll(s[1]),f=new Ze(l);o=o.add(f)}).next(function(){return o})},n.prototype.containsKey=function(e,t){var r=xa(t.path),i=IDBKeyRange.bound([r],[nte(r)],!1,!0),o=0;return _c(e).$t({index:gi.documentTargetsIndex,Ft:!0,range:i},function(s,a,u){var l=s[0];s[1],l!==0&&(o++,u.done())}).next(function(){return o>0})},n.prototype.lt=function(e,t){return qp(e).get(t).next(function(r){return r?k_(r):null})},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(n){return jo(n,Ao.store)}function hz(n){return jo(n,is.store)}function _c(n){return jo(n,gi.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n){return U(this,void 0,void 0,function(){return V(this,function(e){if(n.code!==Y.FAILED_PRECONDITION||n.message!==Pte)throw n;return me("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(n,e){var t=n[0],r=n[1],i=e[0],o=e[1],s=Rt(t,i);return s===0?Rt(r,o):s}var jHe=function(){function n(e){this.ne=e,this.buffer=new Pr(dz),this.se=0}return n.prototype.ie=function(){return++this.se},n.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var r=this.buffer.last();dz(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}},Object.defineProperty(n.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),n}(),zHe=function(){function n(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return n.prototype.start=function(e){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(e)},n.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(n.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),n.prototype.ue=function(e){var t=this,r=this.oe?3e5:6e4;me("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return U(t,void 0,void 0,function(){var i;return V(this,function(o){switch(o.label){case 0:this.ce=null,this.oe=!0,o.label=1;case 1:return o.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return o.sent(),[3,7];case 3:return Xd(i=o.sent())?(me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,Qd(i)];case 5:o.sent(),o.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return o.sent(),[2]}})})})},n}(),qHe=function(){function n(e,t){this.ae=e,this.params=t}return n.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next(function(r){return Math.floor(t/100*r)})},n.prototype.nthSequenceNumber=function(e,t){var r=this;if(t===0)return he.resolve(us.o);var i=new jHe(t);return this.ae.forEachTarget(e,function(o){return i.re(o.sequenceNumber)}).next(function(){return r.ae.le(e,function(o){return i.re(o)})}).next(function(){return i.maxValue})},n.prototype.removeTargets=function(e,t,r){return this.ae.removeTargets(e,t,r)},n.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},n.prototype.collect=function(e,t){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(fz)):this.getCacheSize(e).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),fz):r.fe(e,t)})},n.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},n.prototype.fe=function(e,t){var r,i,o,s,a,u,l,f=this,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(d){return d>f.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.maximumSequenceNumbersToCollect+" from "+d),i=f.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),f.nthSequenceNumber(e,i)}).next(function(d){return r=d,a=Date.now(),f.removeTargets(e,r,t)}).next(function(d){return o=d,u=Date.now(),f.removeOrphanedDocuments(e,r)}).next(function(d){return l=Date.now(),nM()<=Lt.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(s-h)+`ms
	Determined least recently used `+i+" in "+(a-s)+`ms
	Removed `+o+" targets in "+(u-a)+`ms
	Removed `+d+" documents in "+(l-u)+`ms
Total Duration: `+(l-h)+"ms"),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})})},n}(),$He=function(){function n(e,t){this.db=e,this.garbageCollector=function(r,i){return new qHe(r,i)}(this,t)}return n.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(r){return t.next(function(i){return r+i})})},n.prototype.de=function(e){var t=0;return this.le(e,function(r){t++}).next(function(){return t})},n.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},n.prototype.le=function(e,t){return this.we(e,function(r,i){return t(i)})},n.prototype.addReference=function(e,t,r){return TC(e,r)},n.prototype.removeReference=function(e,t,r){return TC(e,r)},n.prototype.removeTargets=function(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)},n.prototype.markPotentiallyOrphaned=function(e,t){return TC(e,t)},n.prototype._e=function(e,t){return function(r,i){var o=!1;return zte(r).Ot(function(s){return jte(r,s,i).next(function(a){return a&&(o=!0),he.resolve(!a)})}).next(function(){return o})}(e,t)},n.prototype.removeOrphanedDocuments=function(e,t){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],s=0;return this.we(e,function(a,u){if(u<=t){var l=r._e(e,a).next(function(f){if(!f)return s++,i.getEntry(e,a).next(function(){return i.removeEntry(a),_c(e).delete([0,xa(a.path)])})});o.push(l)}}).next(function(){return he.waitFor(o)}).next(function(){return i.apply(e)}).next(function(){return s})},n.prototype.removeTarget=function(e,t){var r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)},n.prototype.updateLimboDocument=function(e,t){return TC(e,t)},n.prototype.we=function(e,t){var r,i=_c(e),o=us.o;return i.$t({index:gi.documentTargetsIndex},function(s,a){var u=s[0];s[1];var l=a.path,f=a.sequenceNumber;u===0?(o!==us.o&&t(new Ze(ll(r)),o),o=f,r=l):o=us.o}).next(function(){o!==us.o&&t(new Ze(ll(r)),o)})},n.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},n}();function TC(n,e){return _c(n).put(function(t,r){return new gi(0,xa(t.path),r)}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jv=function(){function n(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return n.prototype.get=function(e){var t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0)for(var i=0,o=r;i<o.length;i++){var s=o[i],a=s[0],u=s[1];if(this.equalsFn(a,e))return u}},n.prototype.has=function(e){return this.get(e)!==void 0},n.prototype.set=function(e,t){var r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(var o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]},n.prototype.delete=function(e){var t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),!0;return!1},n.prototype.forEach=function(e){Yd(this.inner,function(t,r){for(var i=0,o=r;i<o.length;i++){var s=o[i],a=s[0],u=s[1];e(a,u)}})},n.prototype.isEmpty=function(){return rte(this.inner)},n}(),qte=function(){function n(){this.changes=new Jv(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return n.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:It.min()},n.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},n.prototype.removeEntry=function(e,t){t===void 0&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:yi.newInvalidDocument(e),readTime:t})},n.prototype.getEntry=function(e,t){this.assertNotApplied();var r=this.changes.get(t);return r!==void 0?he.resolve(r.document):this.getFromCache(e,t)},n.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},n.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},n.prototype.assertNotApplied=function(){},n}(),KHe=function(){function n(e,t){this.R=e,this.Ut=t}return n.prototype.addEntry=function(e,t,r){return pc(e).put(NC(t),r)},n.prototype.removeEntry=function(e,t){var r=pc(e),i=NC(t);return r.delete(i)},n.prototype.updateMetadata=function(e,t){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=t,r.me(e,i)})},n.prototype.getEntry=function(e,t){var r=this;return pc(e).get(NC(t)).next(function(i){return r.ye(t,i)})},n.prototype.ge=function(e,t){var r=this;return pc(e).get(NC(t)).next(function(i){return{document:r.ye(t,i),size:eE(i)}})},n.prototype.getEntries=function(e,t){var r=this,i=Bs();return this.pe(e,t,function(o,s){var a=r.ye(o,s);i=i.insert(o,a)}).next(function(){return i})},n.prototype.Ee=function(e,t){var r=this,i=Bs(),o=new Ki(Ze.comparator);return this.pe(e,t,function(s,a){var u=r.ye(s,a);i=i.insert(s,u),o=o.insert(s,eE(a))}).next(function(){return{documents:i,Te:o}})},n.prototype.pe=function(e,t,r){if(t.isEmpty())return he.resolve();var i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),o=t.getIterator(),s=o.getNext();return pc(e).$t({range:i},function(a,u,l){for(var f=Ze.fromSegments(a);s&&Ze.comparator(s,f)<0;)r(s,null),s=o.getNext();s&&s.isEqual(f)&&(r(s,u),s=o.hasNext()?o.getNext():null),s?l.Ct(s.path.toArray()):l.done()}).next(function(){for(;s;)r(s,null),s=o.hasNext()?o.getNext():null})},n.prototype.getDocumentsMatchingQuery=function(e,t,r){var i=this,o=Bs(),s=t.path.length+1,a={};if(r.isEqual(It.min())){var u=t.path.toArray();a.range=IDBKeyRange.lowerBound(u)}else{var l=t.path.toArray(),f=_4(r);a.range=IDBKeyRange.lowerBound([l,f],!0),a.index=Xn.collectionReadTimeIndex}return pc(e).$t(a,function(h,d,g){if(h.length===s){var v=lM(i.R,d);t.path.isPrefixOf(v.key.path)?yb(t,v)&&(o=o.insert(v.key,v)):g.done()}}).next(function(){return o})},n.prototype.newChangeBuffer=function(e){return new GHe(this,!!e&&e.trackRemovals)},n.prototype.getSize=function(e){return this.getMetadata(e).next(function(t){return t.byteSize})},n.prototype.getMetadata=function(e){return pz(e).get(ou.key).next(function(t){return nt(!!t),t})},n.prototype.me=function(e,t){return pz(e).put(ou.key,t)},n.prototype.ye=function(e,t){if(t){var r=lM(this.R,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return yi.newInvalidDocument(e)},n}(),GHe=function(n){function e(t,r){var i=this;return(i=n.call(this)||this).Ie=t,i.trackRemovals=r,i.Ae=new Jv(function(o){return o.toString()},function(o,s){return o.isEqual(s)}),i}return Ie(e,n),e.prototype.applyChanges=function(t){var r=this,i=[],o=0,s=new Pr(function(a,u){return Rt(a.canonicalString(),u.canonicalString())});return this.changes.forEach(function(a,u){var l=r.Ae.get(a);if(u.document.isValidDocument()){var f=az(r.Ie.R,u.document,r.getReadTime(a));s=s.add(a.path.popLast());var h=eE(f);o+=h-l,i.push(r.Ie.addEntry(t,a,f))}else if(o-=l,r.trackRemovals){var d=az(r.Ie.R,yi.newNoDocument(a,It.min()),r.getReadTime(a));i.push(r.Ie.addEntry(t,a,d))}else i.push(r.Ie.removeEntry(t,a))}),s.forEach(function(a){i.push(r.Ie.Ut.addToCollectionParentIndex(t,a))}),i.push(this.Ie.updateMetadata(t,o)),he.waitFor(i)},e.prototype.getFromCache=function(t,r){var i=this;return this.Ie.ge(t,r).next(function(o){return i.Ae.set(r,o.size),o.document})},e.prototype.getAllFromCache=function(t,r){var i=this;return this.Ie.Ee(t,r).next(function(o){var s=o.documents;return o.Te.forEach(function(a,u){i.Ae.set(a,u)}),s})},e}(qte);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(n){return jo(n,ou.store)}function pc(n){return jo(n,Xn.store)}function NC(n){return n.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YHe=function(){function n(e){this.R=e}return n.prototype.Rt=function(e,t,r,i){var o=this;nt(r<i&&r>=0&&i<=11);var s=new Bte("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore(ts.store)}(e),function(u){u.createObjectStore(qc.store,{keyPath:qc.keyPath}),u.createObjectStore(An.store,{keyPath:An.keyPath,autoIncrement:!0}).createIndex(An.userMutationsIndex,An.userMutationsKeyPath,{unique:!0}),u.createObjectStore(Oi.store)}(e),gz(e),function(u){u.createObjectStore(Xn.store)}(e));var a=he.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(gi.store),u.deleteObjectStore(Ao.store),u.deleteObjectStore(is.store)}(e),gz(e)),a=a.next(function(){return function(u){var l=u.store(is.store),f=new is(0,0,It.min().toTimestamp(),0);return l.put(is.key,f)}(s)})),r<4&&i>=4&&(r!==0&&(a=a.next(function(){return function(u,l){return l.store(An.store).Nt().next(function(f){u.deleteObjectStore(An.store),u.createObjectStore(An.store,{keyPath:An.keyPath,autoIncrement:!0}).createIndex(An.userMutationsIndex,An.userMutationsKeyPath,{unique:!0});var h=l.store(An.store),d=f.map(function(g){return h.put(g)});return he.waitFor(d)})}(e,s)})),a=a.next(function(){(function(u){u.createObjectStore(gl.store,{keyPath:gl.keyPath})})(e)})),r<5&&i>=5&&(a=a.next(function(){return o.Re(s)})),r<6&&i>=6&&(a=a.next(function(){return function(u){u.createObjectStore(ou.store)}(e),o.be(s)})),r<7&&i>=7&&(a=a.next(function(){return o.ve(s)})),r<8&&i>=8&&(a=a.next(function(){return o.Pe(e,s)})),r<9&&i>=9&&(a=a.next(function(){(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e),function(u){var l=u.objectStore(Xn.store);l.createIndex(Xn.readTimeIndex,Xn.readTimeIndexPath,{unique:!1}),l.createIndex(Xn.collectionReadTimeIndex,Xn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(a=a.next(function(){return o.Ve(s)})),r<11&&i>=11&&(a=a.next(function(){(function(u){u.createObjectStore(dv.store,{keyPath:dv.keyPath})})(e),function(u){u.createObjectStore(pv.store,{keyPath:pv.keyPath})}(e)})),a},n.prototype.be=function(e){var t=0;return e.store(Xn.store).$t(function(r,i){t+=eE(i)}).next(function(){var r=new ou(t);return e.store(ou.store).put(ou.key,r)})},n.prototype.Re=function(e){var t=this,r=e.store(qc.store),i=e.store(An.store);return r.Nt().next(function(o){return he.forEach(o,function(s){var a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.Nt(An.userMutationsIndex,a).next(function(u){return he.forEach(u,function(l){nt(l.userId===s.userId);var f=ng(t.R,l);return Ute(e,s.userId,f).next(function(){})})})})})},n.prototype.ve=function(e){var t=e.store(gi.store),r=e.store(Xn.store);return e.store(is.store).get(is.key).next(function(i){var o=[];return r.$t(function(s,a){var u=new Yt(s),l=function(f){return[0,xa(f)]}(u);o.push(t.get(l).next(function(f){return f?he.resolve():function(h){return t.put(new gi(0,xa(h),i.highestListenSequenceNumber))}(u)}))}).next(function(){return he.waitFor(o)})})},n.prototype.Pe=function(e,t){e.createObjectStore(id.store,{keyPath:id.keyPath});var r=t.store(id.store),i=new b4,o=function(s){if(i.add(s)){var a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:xa(u)})}};return t.store(Xn.store).$t({Ft:!0},function(s,a){var u=new Yt(s);return o(u.popLast())}).next(function(){return t.store(Oi.store).$t({Ft:!0},function(s,a){s[0];var u=s[1];s[2];var l=ll(u);return o(l.popLast())})})},n.prototype.Ve=function(e){var t=this,r=e.store(Ao.store);return r.$t(function(i,o){var s=k_(o),a=Hte(t.R,s);return r.put(a)})},n}();function gz(n){n.createObjectStore(gi.store,{keyPath:gi.keyPath}).createIndex(gi.documentTargetsIndex,gi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Ao.store,{keyPath:Ao.keyPath}).createIndex(Ao.queryTargetsIndexName,Ao.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(is.store)}var LN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ZHe=function(){function n(e,t,r,i,o,s,a,u,l,f){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=l,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(h){return Promise.resolve()},!n.yt())throw new le(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $He(this,i),this.Le=t+"main",this.R=new Wte(u),this.Be=new gv(this.Le,11,new YHe(this.R)),this.qe=new UHe(this.referenceDelegate,this.R),this.Ut=new VHe,this.Ue=function(h,d){return new KHe(h,d)}(this.R,this.Ut),this.Ke=new BHe,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,f===!1&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return n.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new le(Y.FAILED_PRECONDITION,LN);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new us(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},n.prototype.He=function(e){var t=this;return this.Me=function(r){return U(t,void 0,void 0,function(){return V(this,function(i){return this.started?[2,e(r)]:[2]})})},e(this.isPrimary)},n.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt(function(r){return U(t,void 0,void 0,function(){return V(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,e()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},n.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return U(t,void 0,void 0,function(){return V(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},n.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return AC(t).put(new gl(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(t).next(function(r){r||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(t)}).next(function(r){return e.isPrimary&&!r?e.Xe(t).next(function(){return!1}):!!r&&e.Ze(t).next(function(){return!0})})}).catch(function(t){if(Xd(t))return me("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Se.enqueueRetryable(function(){return e.Me(t)}),e.isPrimary=t})},n.prototype.Je=function(e){var t=this;return y_(e).get(ts.key).next(function(r){return he.resolve(t.tn(r))})},n.prototype.en=function(e){return AC(e).delete(this.clientId)},n.prototype.nn=function(){return U(this,void 0,void 0,function(){var e,t,r,i,o=this;return V(this,function(s){switch(s.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(a){var u=jo(a,gl.store);return u.Nt().next(function(l){var f=o.rn(l,18e5),h=l.filter(function(d){return f.indexOf(d)===-1});return he.forEach(h,function(d){return u.delete(d.clientId)}).next(function(){return h})})}).catch(function(){return[]})]);case 1:if(e=s.sent(),this.Qe)for(t=0,r=e;t<r.length;t++)i=r[t],this.Qe.removeItem(this.on(i.clientId));s.label=2;case 2:return[2]}})})},n.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},n.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},n.prototype.Ye=function(e){var t=this;return this.Ce?he.resolve(!0):y_(e).get(ts.key).next(function(r){if(r!==null&&t.sn(r.leaseTimestampMs,5e3)&&!t.cn(r.ownerId)){if(t.tn(r)&&t.networkEnabled)return!0;if(!t.tn(r)){if(!r.allowTabSynchronization)throw new le(Y.FAILED_PRECONDITION,LN);return!1}}return!(!t.networkEnabled||!t.inForeground)||AC(e).Nt().next(function(i){return t.rn(i,5e3).find(function(o){if(t.clientId!==o.clientId){var s=!t.networkEnabled&&o.networkEnabled,a=!t.inForeground&&o.inForeground,u=t.networkEnabled===o.networkEnabled;if(s||a&&u)return!0}return!1})===void 0})}).next(function(r){return t.isPrimary!==r&&me("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},n.prototype.shutdown=function(){return U(this,void 0,void 0,function(){var e=this;return V(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ts.store,gl.store],function(r){var i=new sz(r,us.o);return e.Xe(i).next(function(){return e.en(i)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},n.prototype.rn=function(e,t){var r=this;return e.filter(function(i){return r.sn(i.updateTimeMs,t)&&!r.cn(i.clientId)})},n.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return AC(t).Nt().next(function(r){return e.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(n.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),n.prototype.getMutationQueue=function(e){return HHe.Qt(e,this.R,this.Ut,this.referenceDelegate)},n.prototype.getTargetCache=function(){return this.qe},n.prototype.getRemoteDocumentCache=function(){return this.Ue},n.prototype.getIndexManager=function(){return this.Ut},n.prototype.getBundleCache=function(){return this.Ke},n.prototype.runTransaction=function(e,t,r){var i=this;me("IndexedDbPersistence","Starting transaction:",e);var o,s=t==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(e,s,RHe,function(a){return o=new sz(a,i.Ne?i.Ne.next():us.o),t==="readwrite-primary"?i.Je(o).next(function(u){return!!u||i.Ye(o)}).next(function(u){if(!u)throw br("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new le(Y.FAILED_PRECONDITION,Pte);return r(o)}).next(function(u){return i.Ze(o).next(function(){return u})}):i.dn(o).next(function(){return r(o)})}).then(function(a){return o.raiseOnCommittedEvent(),a})},n.prototype.dn=function(e){var t=this;return y_(e).get(ts.key).next(function(r){if(r!==null&&t.sn(r.leaseTimestampMs,5e3)&&!t.cn(r.ownerId)&&!t.tn(r)&&!(t.Ce||t.allowTabSynchronization&&r.allowTabSynchronization))throw new le(Y.FAILED_PRECONDITION,LN)})},n.prototype.Ze=function(e){var t=new ts(this.clientId,this.allowTabSynchronization,Date.now());return y_(e).put(ts.key,t)},n.yt=function(){return gv.yt()},n.prototype.Xe=function(e){var t=this,r=y_(e);return r.get(ts.key).next(function(i){return t.tn(i)?(me("IndexedDbPersistence","Releasing primary lease."),r.delete(ts.key)):he.resolve()})},n.prototype.sn=function(e,t){var r=Date.now();return!(e<r-t||e>r&&(br("Detected an update time that is in the future: "+e+" > "+r),1))},n.prototype.We=function(){var e=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){e.Se.enqueueAndForget(function(){return e.inForeground=e.document.visibilityState==="visible",e.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},n.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},n.prototype.Ge=function(){var e,t=this;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ke=function(){t.un(),ipe()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.ke))},n.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},n.prototype.cn=function(e){var t;try{var r=((t=this.Qe)===null||t===void 0?void 0:t.getItem(this.on(e)))!==null;return me("IndexedDbPersistence","Client '"+e+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return br("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},n.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}},n.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},n.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},n}();function y_(n){return jo(n,ts.store)}function AC(n){return jo(n,gl.store)}function w4(n,e){var t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var XHe=function(n,e){this.progress=n,this.wn=e},$te=function(){function n(e,t,r){this.Ue=e,this._n=t,this.Ut=r}return n.prototype.mn=function(e,t){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(i){return r.yn(e,t,i)})},n.prototype.yn=function(e,t,r){return this.Ue.getEntry(e,t).next(function(i){for(var o=0,s=r;o<s.length;o++)s[o].applyToLocalView(i);return i})},n.prototype.gn=function(e,t){e.forEach(function(r,i){for(var o=0,s=t;o<s.length;o++)s[o].applyToLocalView(i)})},n.prototype.pn=function(e,t){var r=this;return this.Ue.getEntries(e,t).next(function(i){return r.En(e,i).next(function(){return i})})},n.prototype.En=function(e,t){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(i){return r.gn(t,i)})},n.prototype.getDocumentsMatchingQuery=function(e,t,r){return function(i){return Ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(t)?this.Tn(e,t.path):f4(t)?this.In(e,t,r):this.An(e,t,r)},n.prototype.Tn=function(e,t){return this.mn(e,new Ze(t)).next(function(r){var i=aM();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},n.prototype.In=function(e,t,r){var i=this,o=t.collectionGroup,s=aM();return this.Ut.getCollectionParents(e,o).next(function(a){return he.forEach(a,function(u){var l=function(f,h){return new Pl(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return i.An(e,l,r).next(function(f){f.forEach(function(h,d){s=s.insert(h,d)})})}).next(function(){return s})})},n.prototype.An=function(e,t,r){var i,o,s=this;return this.Ue.getDocumentsMatchingQuery(e,t,r).next(function(a){return i=a,s._n.getAllMutationBatchesAffectingQuery(e,t)}).next(function(a){return o=a,s.Rn(e,o,i).next(function(u){i=u;for(var l=0,f=o;l<f.length;l++)for(var h=f[l],d=0,g=h.mutations;d<g.length;d++){var v=g[d],m=v.key,y=i.get(m);y==null&&(y=yi.newInvalidDocument(m),i=i.insert(m,y)),sM(v,y,h.localWriteTime),y.isFoundDocument()||(i=i.remove(m))}})}).next(function(){return i.forEach(function(a,u){yb(t,u)||(i=i.remove(a))}),i})},n.prototype.Rn=function(e,t,r){for(var i=dn(),o=0,s=t;o<s.length;o++)for(var a=0,u=s[o].mutations;a<u.length;a++){var l=u[a];l instanceof xf&&r.get(l.key)===null&&(i=i.add(l.key))}var f=r;return this.Ue.getEntries(e,i).next(function(h){return h.forEach(function(d,g){g.isFoundDocument()&&(f=f.insert(d,g))}),f})},n}(),QHe=function(){function n(e,t,r,i){this.targetId=e,this.fromCache=t,this.bn=r,this.vn=i}return n.Pn=function(e,t){for(var r=dn(),i=dn(),o=0,s=t.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new n(e,t.fromCache,r,i)},n}(),Kte=function(){function n(){}return n.prototype.Vn=function(e){this.Sn=e},n.prototype.getDocumentsMatchingQuery=function(e,t,r,i){var o=this;return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(It.min())?this.Dn(e,t):this.Sn.pn(e,i).next(function(s){var a=o.Cn(t,s);return(h1(t)||QS(t))&&o.Nn(t.limitType,a,i,r)?o.Dn(e,t):(nM()<=Lt.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),oM(t)),o.Sn.getDocumentsMatchingQuery(e,t,r).next(function(u){return a.forEach(function(l){u=u.insert(l.key,l)}),u}))})},n.prototype.Cn=function(e,t){var r=new Pr(hte(e));return t.forEach(function(i,o){yb(e,o)&&(r=r.add(o))}),r},n.prototype.Nn=function(e,t,r,i){if(r.size!==t.size)return!0;var o=e==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)},n.prototype.Dn=function(e,t){return nM()<=Lt.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",oM(t)),this.Sn.getDocumentsMatchingQuery(e,t,It.min())},n}(),JHe=function(){function n(e,t,r,i){this.persistence=e,this.xn=t,this.R=i,this.kn=new Ki(Rt),this.Fn=new Jv(function(o){return mb(o)},gx),this.$n=It.min(),this._n=e.getMutationQueue(r),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new $te(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return n.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return e.collect(r,t.kn)})},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gte(n,e,t,r){return new JHe(n,e,t,r)}function Yte(n,e){return U(this,void 0,void 0,function(){var t,r,i,o;return V(this,function(s){switch(s.label){case 0:return t=Ee(n),r=t._n,i=t.Mn,[4,t.persistence.runTransaction("Handle user change","readonly",function(a){var u;return t._n.getAllMutationBatches(a).next(function(l){return u=l,r=t.persistence.getMutationQueue(e),i=new $te(t.On,r,t.persistence.getIndexManager()),r.getAllMutationBatches(a)}).next(function(l){for(var f=[],h=[],d=dn(),g=0,v=u;g<v.length;g++){var m=v[g];f.push(m.batchId);for(var y=0,b=m.mutations;y<b.length;y++){var C=b[y];d=d.add(C.key)}}for(var E=0,D=l;E<D.length;E++){var k=D[E];h.push(k.batchId);for(var I=0,T=k.mutations;I<T.length;I++){var A=T[I];d=d.add(A.key)}}return i.pn(a,d).next(function(M){return{Ln:M,removedBatchIds:f,addedBatchIds:h}})})})];case 1:return o=s.sent(),[2,(t._n=r,t.Mn=i,t.xn.Vn(t.Mn),o)]}})})}function e5e(n,e){var t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=e.batch.keys(),o=t.On.newChangeBuffer({trackRemovals:!0});return function(s,a,u,l){var f=u.batch,h=f.keys(),d=he.resolve();return h.forEach(function(g){d=d.next(function(){return l.getEntry(a,g)}).next(function(v){var m=u.docVersions.get(g);nt(m!==null),v.version.compareTo(m)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&l.addEntry(v,u.commitVersion))})}),d.next(function(){return s._n.removeMutationBatch(a,f)})}(t,r,e,o).next(function(){return o.apply(r)}).next(function(){return t._n.performConsistencyCheck(r)}).next(function(){return t.Mn.pn(r,i)})})}function Zte(n){var e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function t5e(n,e){var t=Ee(n),r=e.snapshotVersion,i=t.kn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=t.On.newChangeBuffer({trackRemovals:!0});i=t.kn;var a=[];e.targetChanges.forEach(function(f,h){var d=i.get(h);if(d){a.push(t.qe.removeMatchingKeys(o,f.removedDocuments,h).next(function(){return t.qe.addMatchingKeys(o,f.addedDocuments,h)}));var g=f.resumeToken;if(g.approximateByteSize()>0){var v=d.withResumeToken(g,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(h,v),function(m,y,b){return nt(y.resumeToken.approximateByteSize()>0),m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8||b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(d,v,f)&&a.push(t.qe.updateTargetData(o,v))}}});var u=Bs();if(e.documentUpdates.forEach(function(f,h){e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(Xte(o,s,e.documentUpdates,r,void 0).next(function(f){u=f})),!r.isEqual(It.min())){var l=t.qe.getLastRemoteSnapshotVersion(o).next(function(f){return t.qe.setTargetsMetadata(o,o.currentSequenceNumber,r)});a.push(l)}return he.waitFor(a).next(function(){return s.apply(o)}).next(function(){return t.Mn.En(o,u)}).next(function(){return u})}).then(function(o){return t.kn=i,o})}function Xte(n,e,t,r,i){var o=dn();return t.forEach(function(s){return o=o.add(s)}),e.getEntries(n,o).next(function(s){var a=Bs();return t.forEach(function(u,l){var f=s.get(u),h=(i==null?void 0:i.get(u))||r;l.isNoDocument()&&l.version.isEqual(It.min())?(e.removeEntry(u,h),a=a.insert(u,l)):!f.isValidDocument()||l.version.compareTo(f.version)>0||l.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(l,h),a=a.insert(u,l)):me("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",l.version)}),a})}function n5e(n,e){var t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",function(r){return e===void 0&&(e=-1),t._n.getNextMutationBatchAfterBatchId(r,e)})}function _v(n,e){var t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return t.qe.getTargetData(r,e).next(function(o){return o?(i=o,he.resolve(i)):t.qe.allocateTargetId(r).next(function(s){return i=new yx(e,s,0,r.currentSequenceNumber),t.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=t.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.kn=t.kn.insert(r.targetId,r),t.Fn.set(e,r.targetId)),r})}function yv(n,e,t){return U(this,void 0,void 0,function(){var r,i,o,s;return V(this,function(a){switch(a.label){case 0:r=Ee(n),i=r.kn.get(e),o=t?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),t?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(u){return r.persistence.referenceDelegate.removeTarget(u,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Xd(s=a.sent()))throw s;return me("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}})})}function nE(n,e,t){var r=Ee(n),i=It.min(),o=dn();return r.persistence.runTransaction("Execute query","readonly",function(s){return function(a,u,l){var f=Ee(a),h=f.Fn.get(l);return h!==void 0?he.resolve(f.kn.get(h)):f.qe.getTargetData(u,l)}(r,s,js(e)).next(function(a){if(a)return i=a.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(s,a.targetId).next(function(u){o=u})}).next(function(){return r.xn.getDocumentsMatchingQuery(s,e,t?i:It.min(),t?o:dn())}).next(function(a){return{documents:a,Bn:o}})})}function Qte(n,e){var t=Ee(n),r=Ee(t.qe),i=t.kn.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",function(o){return r.lt(o,e).next(function(s){return s?s.target:null})})}function Jte(n){var e=Ee(n);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(r,i,o){var s=Ee(r),a=Bs(),u=_4(o),l=pc(i),f=IDBKeyRange.lowerBound(u,!0);return l.$t({index:Xn.readTimeIndex,range:f},function(h,d){var g=lM(s.R,d);a=a.insert(g.key,g),u=d.readTime}).next(function(){return{wn:a,readTime:Vte(u)}})}(e.On,t,e.$n)}).then(function(t){var r=t.wn,i=t.readTime;return e.$n=i,r})}function r5e(n){return U(this,void 0,void 0,function(){var e;return V(this,function(t){return[2,(e=Ee(n)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var o=pc(i),s=It.min();return o.$t({index:Xn.readTimeIndex,reverse:!0},function(a,u,l){u.readTime&&(s=Vte(u.readTime)),l.done()}).next(function(){return s})}(r)}).then(function(r){e.$n=r})]})})}function i5e(n,e,t,r){return U(this,void 0,void 0,function(){var i,o,s,a,u,l,f,h,d,g;return V(this,function(v){switch(v.label){case 0:for(i=Ee(n),o=dn(),s=Bs(),a=Ste(),u=0,l=t;u<l.length;u++)f=l[u],h=e.qn(f.metadata.name),f.document&&(o=o.add(h)),s=s.insert(h,e.Un(f)),a=a.insert(h,e.Kn(f.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,_v(i,function(m){return js(Qv(Yt.fromString("__bundle__/docs/"+m)))}(r))];case 1:return g=v.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(m){return Xte(m,d,s,It.min(),a).next(function(y){return d.apply(m),y}).next(function(y){return i.qe.removeMatchingKeysForTargetId(m,g.targetId).next(function(){return i.qe.addMatchingKeys(m,o,g.targetId)}).next(function(){return i.Mn.En(m,y)}).next(function(){return y})})})]}})})}function o5e(n,e,t){return t===void 0&&(t=dn()),U(this,void 0,void 0,function(){var r,i;return V(this,function(o){switch(o.label){case 0:return[4,_v(n,js(y4(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ee(n)).persistence.runTransaction("Save named query","readwrite",function(s){var a=Jr(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.Ke.saveNamedQuery(s,e);var u=r.withResumeToken(mo.EMPTY_BYTE_STRING,a);return i.kn=i.kn.insert(u.targetId,u),i.qe.updateTargetData(s,u).next(function(){return i.qe.removeMatchingKeysForTargetId(s,r.targetId)}).next(function(){return i.qe.addMatchingKeys(s,t,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(s,e)})})]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s5e=function(){function n(e){this.R=e,this.Qn=new Map,this.jn=new Map}return n.prototype.getBundleMetadata=function(e,t){return he.resolve(this.Qn.get(t))},n.prototype.saveBundleMetadata=function(e,t){var r;return this.Qn.set(t.id,{id:(r=t).id,version:r.version,createTime:Jr(r.createTime)}),he.resolve()},n.prototype.getNamedQuery=function(e,t){return he.resolve(this.jn.get(t))},n.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(r){return{name:r.name,query:y4(r.bundledQuery),readTime:Jr(r.readTime)}}(t)),he.resolve()},n}(),C4=function(){function n(){this.Wn=new Pr($r.Gn),this.zn=new Pr($r.Hn)}return n.prototype.isEmpty=function(){return this.Wn.isEmpty()},n.prototype.addReference=function(e,t){var r=new $r(e,t);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},n.prototype.Jn=function(e,t){var r=this;e.forEach(function(i){return r.addReference(i,t)})},n.prototype.removeReference=function(e,t){this.Yn(new $r(e,t))},n.prototype.Xn=function(e,t){var r=this;e.forEach(function(i){return r.removeReference(i,t)})},n.prototype.Zn=function(e){var t=this,r=new Ze(new Yt([])),i=new $r(r,e),o=new $r(r,e+1),s=[];return this.zn.forEachInRange([i,o],function(a){t.Yn(a),s.push(a.key)}),s},n.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},n.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},n.prototype.es=function(e){var t=new Ze(new Yt([])),r=new $r(t,e),i=new $r(t,e+1),o=dn();return this.zn.forEachInRange([r,i],function(s){o=o.add(s.key)}),o},n.prototype.containsKey=function(e){var t=new $r(e,0),r=this.Wn.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)},n}(),$r=function(){function n(e,t){this.key=e,this.ns=t}return n.Gn=function(e,t){return Ze.comparator(e.key,t.key)||Rt(e.ns,t.ns)},n.Hn=function(e,t){return Rt(e.ns,t.ns)||Ze.comparator(e.key,t.key)},n}(),a5e=function(){function n(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Pr($r.Gn)}return n.prototype.checkEmpty=function(e){return he.resolve(this._n.length===0)},n.prototype.addMutationBatch=function(e,t,r,i){var o=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var s=new m4(o,t,r,i);this._n.push(s);for(var a=0,u=i;a<u.length;a++){var l=u[a];this.rs=this.rs.add(new $r(l.key,o)),this.Ut.addToCollectionParentIndex(e,l.key.path.popLast())}return he.resolve(s)},n.prototype.lookupMutationBatch=function(e,t){return he.resolve(this.os(t))},n.prototype.getNextMutationBatchAfterBatchId=function(e,t){var r=t+1,i=this.cs(r),o=i<0?0:i;return he.resolve(this._n.length>o?this._n[o]:null)},n.prototype.getHighestUnacknowledgedBatchId=function(){return he.resolve(this._n.length===0?-1:this.ss-1)},n.prototype.getAllMutationBatches=function(e){return he.resolve(this._n.slice())},n.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var r=this,i=new $r(t,0),o=new $r(t,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([i,o],function(a){var u=r.os(a.ns);s.push(u)}),he.resolve(s)},n.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var r=this,i=new Pr(Rt);return t.forEach(function(o){var s=new $r(o,0),a=new $r(o,Number.POSITIVE_INFINITY);r.rs.forEachInRange([s,a],function(u){i=i.add(u.ns)})}),he.resolve(this.us(i))},n.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var r=t.path,i=r.length+1,o=r;Ze.isDocumentKey(o)||(o=o.child(""));var s=new $r(new Ze(o),0),a=new Pr(Rt);return this.rs.forEachWhile(function(u){var l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.ns)),!0)},s),he.resolve(this.us(a))},n.prototype.us=function(e){var t=this,r=[];return e.forEach(function(i){var o=t.os(i);o!==null&&r.push(o)}),r},n.prototype.removeMutationBatch=function(e,t){var r=this;nt(this.hs(t.batchId,"removed")===0),this._n.shift();var i=this.rs;return he.forEach(t.mutations,function(o){var s=new $r(o.key,t.batchId);return i=i.delete(s),r.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(function(){r.rs=i})},n.prototype.Gt=function(e){},n.prototype.containsKey=function(e,t){var r=new $r(t,0),i=this.rs.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))},n.prototype.performConsistencyCheck=function(e){return this._n.length,he.resolve()},n.prototype.hs=function(e,t){return this.cs(e)},n.prototype.cs=function(e){return this._n.length===0?0:e-this._n[0].batchId},n.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},n}(),u5e=function(){function n(e,t){this.Ut=e,this.ls=t,this.docs=new Ki(Ze.comparator),this.size=0}return n.prototype.addEntry=function(e,t,r){var i=t.key,o=this.docs.get(i),s=o?o.size:0,a=this.ls(t);return this.docs=this.docs.insert(i,{document:t.clone(),size:a,readTime:r}),this.size+=a-s,this.Ut.addToCollectionParentIndex(e,i.path.popLast())},n.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},n.prototype.getEntry=function(e,t){var r=this.docs.get(t);return he.resolve(r?r.document.clone():yi.newInvalidDocument(t))},n.prototype.getEntries=function(e,t){var r=this,i=Bs();return t.forEach(function(o){var s=r.docs.get(o);i=i.insert(o,s?s.document.clone():yi.newInvalidDocument(o))}),he.resolve(i)},n.prototype.getDocumentsMatchingQuery=function(e,t,r){for(var i=Bs(),o=new Ze(t.path.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var a=s.getNext(),u=a.key,l=a.value,f=l.document,h=l.readTime;if(!t.path.isPrefixOf(u.path))break;h.compareTo(r)<=0||yb(t,f)&&(i=i.insert(f.key,f.clone()))}return he.resolve(i)},n.prototype.fs=function(e,t){return he.forEach(this.docs,function(r){return t(r)})},n.prototype.newChangeBuffer=function(e){return new l5e(this)},n.prototype.getSize=function(e){return he.resolve(this.size)},n}(),l5e=function(n){function e(t){var r=this;return(r=n.call(this)||this).Ie=t,r}return Ie(e,n),e.prototype.applyChanges=function(t){var r=this,i=[];return this.changes.forEach(function(o,s){s.document.isValidDocument()?i.push(r.Ie.addEntry(t,s.document,r.getReadTime(o))):r.Ie.removeEntry(o)}),he.waitFor(i)},e.prototype.getFromCache=function(t,r){return this.Ie.getEntry(t,r)},e.prototype.getAllFromCache=function(t,r){return this.Ie.getEntries(t,r)},e}(qte),c5e=function(){function n(e){this.persistence=e,this.ds=new Jv(function(t){return mb(t)},gx),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.ws=0,this._s=new C4,this.targetCount=0,this.ys=tE.Jt()}return n.prototype.forEachTarget=function(e,t){return this.ds.forEach(function(r,i){return t(i)}),he.resolve()},n.prototype.getLastRemoteSnapshotVersion=function(e){return he.resolve(this.lastRemoteSnapshotVersion)},n.prototype.getHighestSequenceNumber=function(e){return he.resolve(this.ws)},n.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),he.resolve(this.highestTargetId)},n.prototype.setTargetsMetadata=function(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ws&&(this.ws=t),he.resolve()},n.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new tE(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},n.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,he.resolve()},n.prototype.updateTargetData=function(e,t){return this.te(t),he.resolve()},n.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,he.resolve()},n.prototype.removeTargets=function(e,t,r){var i=this,o=0,s=[];return this.ds.forEach(function(a,u){u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i.ds.delete(a),s.push(i.removeMatchingKeysForTargetId(e,u.targetId)),o++)}),he.waitFor(s).next(function(){return o})},n.prototype.getTargetCount=function(e){return he.resolve(this.targetCount)},n.prototype.getTargetData=function(e,t){var r=this.ds.get(t)||null;return he.resolve(r)},n.prototype.addMatchingKeys=function(e,t,r){return this._s.Jn(t,r),he.resolve()},n.prototype.removeMatchingKeys=function(e,t,r){this._s.Xn(t,r);var i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(function(s){o.push(i.markPotentiallyOrphaned(e,s))}),he.waitFor(o)},n.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),he.resolve()},n.prototype.getMatchingKeysForTargetId=function(e,t){var r=this._s.es(t);return he.resolve(r)},n.prototype.containsKey=function(e,t){return he.resolve(this._s.containsKey(t))},n}(),f5e=function(){function n(e,t){var r=this;this.gs={},this.Ne=new us(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new c5e(this),this.Ut=new WHe,this.Ue=function(i,o){return new u5e(i,function(s){return r.referenceDelegate.ps(s)})}(this.Ut),this.R=new Wte(t),this.Ke=new s5e(this.R)}return n.prototype.start=function(){return Promise.resolve()},n.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(n.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),n.prototype.setDatabaseDeletedListener=function(){},n.prototype.setNetworkEnabled=function(){},n.prototype.getIndexManager=function(){return this.Ut},n.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new a5e(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},n.prototype.getTargetCache=function(){return this.qe},n.prototype.getRemoteDocumentCache=function(){return this.Ue},n.prototype.getBundleCache=function(){return this.Ke},n.prototype.runTransaction=function(e,t,r){var i=this;me("MemoryPersistence","Starting transaction:",e);var o=new h5e(this.Ne.next());return this.referenceDelegate.Es(),r(o).next(function(s){return i.referenceDelegate.Ts(o).next(function(){return s})}).toPromise().then(function(s){return o.raiseOnCommittedEvent(),s})},n.prototype.Is=function(e,t){return he.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(e,t)}}))},n}(),h5e=function(n){function e(t){var r=this;return(r=n.call(this)||this).currentSequenceNumber=t,r}return Ie(e,n),e}(Fte),d5e=function(){function n(e){this.persistence=e,this.As=new C4,this.Rs=null}return n.bs=function(e){return new n(e)},Object.defineProperty(n.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw ze()},enumerable:!1,configurable:!0}),n.prototype.addReference=function(e,t,r){return this.As.addReference(r,t),this.vs.delete(r.toString()),he.resolve()},n.prototype.removeReference=function(e,t,r){return this.As.removeReference(r,t),this.vs.add(r.toString()),he.resolve()},n.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),he.resolve()},n.prototype.removeTarget=function(e,t){var r=this;this.As.Zn(t.targetId).forEach(function(o){return r.vs.add(o.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(function(o){o.forEach(function(s){return r.vs.add(s.toString())})}).next(function(){return i.removeTargetData(e,t)})},n.prototype.Es=function(){this.Rs=new Set},n.prototype.Ts=function(e){var t=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.vs,function(i){var o=Ze.fromPath(i);return t.Ps(e,o).next(function(s){s||r.removeEntry(o)})}).next(function(){return t.Rs=null,r.apply(e)})},n.prototype.updateLimboDocument=function(e,t){var r=this;return this.Ps(e,t).next(function(i){i?r.vs.delete(t.toString()):r.vs.add(t.toString())})},n.prototype.ps=function(e){return 0},n.prototype.Ps=function(e,t){var r=this;return he.or([function(){return he.resolve(r.As.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){return r.persistence.Is(e,t)}])},n}(),ci=function(){function n(e){this.uid=e}return n.prototype.isAuthenticated=function(){return this.uid!=null},n.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},n.prototype.isEqual=function(e){return e.uid===this.uid},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(n,e){return"firestore_clients_"+n+"_"+e}function mz(n,e,t){var r="firestore_mutations_"+n+"_"+t;return e.isAuthenticated()&&(r+="_"+e.uid),r}function kN(n,e){return"firestore_targets_"+n+"_"+e}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");var _z=function(){function n(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}return n.Vs=function(e,t,r){var i,o=JSON.parse(r),s=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return s&&o.error&&(s=typeof o.error.message=="string"&&typeof o.error.code=="string")&&(i=new le(o.error.code,o.error.message)),s?new n(e,t,o.state,i):(br("SharedClientState","Failed to parse mutation state for ID '"+t+"': "+r),null)},n.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},n}(),TN=function(){function n(e,t,r){this.targetId=e,this.state=t,this.error=r}return n.Vs=function(e,t){var r,i=JSON.parse(t),o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new le(i.error.code,i.error.message)),o?new n(e,i.state,r):(br("SharedClientState","Failed to parse target state for ID '"+e+"': "+t),null)},n.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},n}(),yz=function(){function n(e,t){this.clientId=e,this.activeTargetIds=t}return n.Vs=function(e,t){for(var r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=_x(),s=0;i&&s<r.activeTargetIds.length;++s)i=ste(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(br("SharedClientState","Failed to parse client data for instance '"+e+"': "+t),null)},n}(),p5e=function(){function n(e,t){this.clientId=e,this.onlineState=t}return n.Vs=function(e){var t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(br("SharedClientState","Failed to parse online state: "+e),null)},n}(),cM=function(){function n(){this.activeTargetIds=_x()}return n.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},n.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},n.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},n}(),NN=function(){function n(e,t,r,i,o){this.window=e,this.Se=t,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Ki(Rt),this.started=!1,this.$s=[];var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Os=vz(this.persistenceKey,this.Ns),this.Ms=function(a){return"firestore_sequence_number_"+a}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new cM),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(a){return"firestore_online_state_"+a}(this.persistenceKey),this.Ks=function(a){return"firestore_bundle_loaded_"+a}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return n.yt=function(e){return!(!e||!e.localStorage)},n.prototype.start=function(){return U(this,void 0,void 0,function(){var e,t,r,i,o,s,a,u,l,f,h,d=this;return V(this,function(g){switch(g.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=g.sent(),t=0,r=e;t<r.length;t++)(i=r[t])!==this.Ns&&(o=this.getItem(vz(this.persistenceKey,i)))&&(s=yz.Vs(i,o))&&(this.Fs=this.Fs.insert(s.clientId,s));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(u=this.js(a))&&this.Ws(u),l=0,f=this.$s;l<f.length;l++)h=f[l],this.ks(h);return this.$s=[],this.window.addEventListener("pagehide",function(){return d.shutdown()}),this.started=!0,[2]}})})},n.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},n.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},n.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(e)&&(t=!0)}),t},n.prototype.addPendingMutation=function(e){this.zs(e,"pending")},n.prototype.updateMutationState=function(e,t,r){this.zs(e,t,r),this.Hs(e)},n.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var r=this.storage.getItem(kN(this.persistenceKey,e));if(r){var i=TN.Vs(e,r);i&&(t=i.state)}}return this.Js.Ds(e),this.Qs(),t},n.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},n.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},n.prototype.clearQueryState=function(e){this.removeItem(kN(this.persistenceKey,e))},n.prototype.updateQueryState=function(e,t,r){this.Ys(e,t,r)},n.prototype.handleUserChange=function(e,t,r){var i=this;t.forEach(function(o){i.Hs(o)}),this.currentUser=e,r.forEach(function(o){i.addPendingMutation(o)})},n.prototype.setOnlineState=function(e){this.Xs(e)},n.prototype.notifyBundleLoaded=function(){this.Zs()},n.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},n.prototype.getItem=function(e){var t=this.storage.getItem(e);return me("SharedClientState","READ",e,t),t},n.prototype.setItem=function(e,t){me("SharedClientState","SET",e,t),this.storage.setItem(e,t)},n.prototype.removeItem=function(e){me("SharedClientState","REMOVE",e),this.storage.removeItem(e)},n.prototype.ks=function(e){var t=this,r=e;if(r.storageArea===this.storage){if(me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return U(t,void 0,void 0,function(){var i,o,s,a,u,l;return V(this,function(f){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(o=this.ni(r.key,r.newValue))return[2,this.ei(o.clientId,o)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(s=this.si(r.key,r.newValue)))return[2,this.ii(s)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(a=this.ri(r.key,r.newValue)))return[2,this.oi(a)]}else if(r.key===this.Us){if(r.newValue!==null&&(u=this.js(r.newValue)))return[2,this.Ws(u)]}else if(r.key===this.Ms)(l=function(h){var d=us.o;if(h!=null)try{var g=JSON.parse(h);nt(typeof g=="number"),d=g}catch(v){br("SharedClientState","Failed to read sequence number from WebStorage",v)}return d}(r.newValue))!==us.o&&this.sequenceNumberHandler(l);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(n.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),n.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},n.prototype.zs=function(e,t,r){var i=new _z(this.currentUser,e,t,r),o=mz(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ss())},n.prototype.Hs=function(e){var t=mz(this.persistenceKey,this.currentUser,e);this.removeItem(t)},n.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},n.prototype.Ys=function(e,t,r){var i=kN(this.persistenceKey,e),o=new TN(e,t,r);this.setItem(i,o.Ss())},n.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},n.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},n.prototype.ni=function(e,t){var r=this.ti(e);return yz.Vs(r,t)},n.prototype.si=function(e,t){var r=this.Bs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return _z.Vs(new ci(o),i,t)},n.prototype.ri=function(e,t){var r=this.qs.exec(e),i=Number(r[1]);return TN.Vs(i,t)},n.prototype.js=function(e){return p5e.Vs(e)},n.prototype.ii=function(e){return U(this,void 0,void 0,function(){return V(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(me("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},n.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},n.prototype.ei=function(e,t){var r=this,i=t?this.Fs.insert(e,t):this.Fs.remove(e),o=this.Gs(this.Fs),s=this.Gs(i),a=[],u=[];return s.forEach(function(l){o.has(l)||a.push(l)}),o.forEach(function(l){s.has(l)||u.push(l)}),this.syncEngine.hi(a,u).then(function(){r.Fs=i})},n.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},n.prototype.Gs=function(e){var t=_x();return e.forEach(function(r,i){t=t.unionWith(i.activeTargetIds)}),t},n}(),ene=function(){function n(){this.li=new cM,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return n.prototype.addPendingMutation=function(e){},n.prototype.updateMutationState=function(e,t,r){},n.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},n.prototype.updateQueryState=function(e,t,r){this.fi[e]=t},n.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},n.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},n.prototype.clearQueryState=function(e){delete this.fi[e]},n.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},n.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},n.prototype.start=function(){return this.li=new cM,Promise.resolve()},n.prototype.handleUserChange=function(e,t,r){},n.prototype.setOnlineState=function(e){},n.prototype.shutdown=function(){},n.prototype.writeSequenceNumber=function(e){},n.prototype.notifyBundleLoaded=function(){},n}(),g5e=function(){function n(){}return n.prototype.di=function(e){},n.prototype.shutdown=function(){},n}(),bz=function(){function n(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return n.prototype.di=function(e){this.gi.push(e)},n.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},n.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},n.prototype._i=function(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},n.prototype.yi=function(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},n.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},n}(),v5e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},m5e=function(){function n(e){this.Ei=e.Ei,this.Ti=e.Ti}return n.prototype.Ii=function(e){this.Ai=e},n.prototype.Ri=function(e){this.bi=e},n.prototype.onMessage=function(e){this.vi=e},n.prototype.close=function(){this.Ti()},n.prototype.send=function(e){this.Ei(e)},n.prototype.Pi=function(){this.Ai()},n.prototype.Vi=function(e){this.bi(e)},n.prototype.Si=function(e){this.vi(e)},n}(),_5e=function(n){function e(t){var r=this;return(r=n.call(this,t)||this).forceLongPolling=t.forceLongPolling,r.autoDetectLongPolling=t.autoDetectLongPolling,r.useFetchStreams=t.useFetchStreams,r}return Ie(e,n),e.prototype.Fi=function(t,r,i,o){return new Promise(function(s,a){var u=new G6e;u.listenOnce(q6e.COMPLETE,function(){try{switch(u.getLastErrorCode()){case DN.NO_ERROR:var f=u.getResponseJson();me("Connection","XHR received:",JSON.stringify(f)),s(f);break;case DN.TIMEOUT:me("Connection",'RPC "'+t+'" timed out'),a(new le(Y.DEADLINE_EXCEEDED,"Request time out"));break;case DN.HTTP_ERROR:var h=u.getStatus();if(me("Connection",'RPC "'+t+'" failed with status:',h,"response text:",u.getResponseText()),h>0){var d=u.getResponseJson().error;if(d&&d.status&&d.message){var g=function(v){var m=v.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(m)>=0?m:Y.UNKNOWN}(d.status);a(new le(g,d.message))}else a(new le(Y.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new le(Y.UNAVAILABLE,"Connection failed."));break;default:ze()}}finally{me("Connection",'RPC "'+t+'" completed.')}});var l=JSON.stringify(o);u.send(r,"POST",l,i,15)})},e.prototype.Oi=function(t,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=j6e(),s=z6e(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new K6e({})),this.ki(a.initMessageHeaders,r),iP()||r$()||tpe()||npe()||rpe()||oP()||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");me("Connection","Creating WebChannel: "+u,a);var l=o.createWebChannel(u,a),f=!1,h=!1,d=new m5e({Ei:function(v){h?me("Connection","Not sending because WebChannel is closed:",v):(f||(me("Connection","Opening WebChannel transport."),l.open(),f=!0),me("Connection","WebChannel sending:",v),l.send(v))},Ti:function(){return l.close()}}),g=function(v,m,y){v.listen(m,function(b){try{y(b)}catch(C){setTimeout(function(){throw C},0)}})};return g(l,LC.EventType.OPEN,function(){h||me("Connection","WebChannel transport opened.")}),g(l,LC.EventType.CLOSE,function(){h||(h=!0,me("Connection","WebChannel transport closed"),d.Vi())}),g(l,LC.EventType.ERROR,function(v){h||(h=!0,l0("Connection","WebChannel transport errored:",v),d.Vi(new le(Y.UNAVAILABLE,"The operation could not be completed")))}),g(l,LC.EventType.MESSAGE,function(v){var m;if(!h){var y=v.data[0];nt(!!y);var b=y,C=b.error||((m=b[0])===null||m===void 0?void 0:m.error);if(C){me("Connection","WebChannel received error:",C);var E=C.status,D=function(I){var T=vr[I];if(T!==void 0)return Cte(T)}(E),k=C.message;D===void 0&&(D=Y.INTERNAL,k="Unknown error status: "+E+" with message "+C.message),h=!0,d.Vi(new le(D,k)),l.close()}else me("Connection","WebChannel received:",y),d.Si(y)}}),g(s,$6e.STAT_EVENT,function(v){v.stat===Fj.PROXY?me("Connection","Detected buffering proxy"):v.stat===Fj.NOPROXY&&me("Connection","Detected no buffering proxy")}),setTimeout(function(){d.Pi()},0),d},e}(function(){function n(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return n.prototype.Ni=function(e,t,r,i){var o=this.xi(e,t);me("RestConnection","Sending: ",o,r);var s={};return this.ki(s,i),this.Fi(e,o,s,r).then(function(a){return me("RestConnection","Received: ",a),a},function(a){throw l0("RestConnection",e+" failed with error: ",a,"url: ",o,"request:",r),a})},n.prototype.$i=function(e,t,r,i){return this.Ni(e,t,r,i)},n.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var r in t.authHeaders)t.authHeaders.hasOwnProperty(r)&&(e[r]=t.authHeaders[r])},n.prototype.xi=function(e,t){var r=v5e[e];return this.Di+"/v1/"+t+":"+r},n}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tne(){return typeof window<"u"?window:null}function g1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(n){return new SHe(n,!0)}var S4=function(){function n(e,t,r,i,o){r===void 0&&(r=1e3),i===void 0&&(i=1.5),o===void 0&&(o=6e4),this.Se=e,this.timerId=t,this.Mi=r,this.Li=i,this.Bi=o,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return n.prototype.reset=function(){this.qi=0},n.prototype.Qi=function(){this.qi=this.Bi},n.prototype.ji=function(e){var t=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),o=Math.max(0,r-i);o>0&&me("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,o,function(){return t.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},n.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},n.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},n.prototype.Wi=function(){return(Math.random()-.5)*this.qi},n}(),nne=function(){function n(e,t,r,i,o,s){this.Se=e,this.zi=r,this.Hi=i,this.Ji=o,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new S4(e,t)}return n.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},n.prototype.er=function(){return this.state===2},n.prototype.start=function(){this.state!==3?this.auth():this.nr()},n.prototype.stop=function(){return U(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},n.prototype.sr=function(){this.state=0,this.Zi.reset()},n.prototype.ir=function(){var e=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},n.prototype.cr=function(e){this.ur(),this.stream.send(e)},n.prototype.rr=function(){return U(this,void 0,void 0,function(){return V(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},n.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},n.prototype.close=function(e,t){return U(this,void 0,void 0,function(){return V(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===Y.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return r.sent(),[2]}})})},n.prototype.ar=function(){},n.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){e.Yi===r&&e.lr(i)},function(i){t(function(){var o=new le(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return e.dr(o)})})},n.prototype.lr=function(e){var t=this,r=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){r(function(){return t.state=2,t.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return t.dr(i)})}),this.stream.onMessage(function(i){r(function(){return t.onMessage(i)})})},n.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return U(e,void 0,void 0,function(){return V(this,function(t){return this.state=0,this.start(),[2]})})})},n.prototype.dr=function(e){return me("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},n.prototype.hr=function(e){var t=this;return function(r){t.Se.enqueueAndForget(function(){return t.Yi===e?r():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},n}(),y5e=function(n){function e(t,r,i,o,s){var a=this;return(a=n.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",r,i,s)||this).R=o,a}return Ie(e,n),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var r=function(o,s){var a;if("targetChange"in s){s.targetChange;var u=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ze()}(s.targetChange.targetChangeType||"NO_CHANGE"),l=s.targetChange.targetIds||[],f=function(y,b){return y.I?(nt(b===void 0||typeof b=="string"),mo.fromBase64String(b||"")):(nt(b===void 0||b instanceof Uint8Array),mo.fromUint8Array(b||new Uint8Array))}(o,s.targetChange.resumeToken),h=(d=s.targetChange.cause)&&function(y){var b=y.code===void 0?Y.UNKNOWN:Cte(y.code);return new le(b,y.message||"")}(d);a=new Ite(u,l,f,h||null)}else if("documentChange"in s){s.documentChange,(u=s.documentChange).document,u.document.name,u.document.updateTime,l=du(o,u.document.name),f=Jr(u.document.updateTime);var d=new ss({mapValue:{fields:u.document.fields}}),g=(h=yi.newFoundDocument(l,f,d),u.targetIds||[]),v=u.removedTargetIds||[];a=new p1(g,v,h.key,h)}else if("documentDelete"in s)s.documentDelete,(u=s.documentDelete).document,l=du(o,u.document),f=u.readTime?Jr(u.readTime):It.min(),d=yi.newNoDocument(l,f),h=u.removedTargetIds||[],a=new p1([],h,d.key,d);else if("documentRemove"in s)s.documentRemove,(u=s.documentRemove).document,l=du(o,u.document),f=u.removedTargetIds||[],a=new p1([],f,l,null);else{if(!("filter"in s))return ze();s.filter;var m=s.filter;m.targetId,u=m.count||0,l=new pHe(u),f=m.targetId,a=new Ete(f,l)}return a}(this.R,t),i=function(o){if(!("targetChange"in o))return It.min();var s=o.targetChange;return s.targetIds&&s.targetIds.length?It.min():s.readTime?Jr(s.readTime):It.min()}(t);return this.listener._r(r,i)},e.prototype.mr=function(t){var r={};r.database=g0(this.R),r.addTarget=function(o,s){var a,u=s.target;return(a=ZS(u)?{documents:Nte(o,u)}:{query:Ate(o,u)}).targetId=s.targetId,s.resumeToken.approximateByteSize()>0?a.resumeToken=xte(o,s.resumeToken):s.snapshotVersion.compareTo(It.min())>0&&(a.readTime=d0(o,s.snapshotVersion.toTimestamp())),a}(this.R,t);var i=function(o,s){var a=function(u,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ze()}}(0,s.purpose);return a==null?null:{"goog-listen-tags":a}}(this.R,t);i&&(r.labels=i),this.cr(r)},e.prototype.yr=function(t){var r={};r.database=g0(this.R),r.removeTarget=t,this.cr(r)},e}(nne),b5e=function(n){function e(t,r,i,o,s){var a=this;return(a=n.call(this,t,"write_stream_connection_backoff","write_stream_idle",r,i,s)||this).R=o,a.gr=!1,a}return Ie(e,n),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,n.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(nt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var r=function(o,s){return o&&o.length>0?(nt(s!==void 0),o.map(function(a){return function(u,l){var f=u.updateTime?Jr(u.updateTime):Jr(l);return f.isEqual(It.min())&&(f=Jr(l)),new fHe(f,u.transformResults||[])}(a,s)})):[]}(t.writeResults,t.commitTime),i=Jr(t.commitTime);return this.listener.Tr(i,r)}return nt(!t.writeResults||t.writeResults.length===0),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=g0(this.R),this.cr(t)},e.prototype.Er=function(t){var r=this,i={streamToken:this.lastStreamToken,writes:t.map(function(o){return JS(r.R,o)})};this.cr(i)},e}(nne),w5e=function(n){function e(t,r,i){var o=this;return(o=n.call(this)||this).credentials=t,o.Hi=r,o.R=i,o.Rr=!1,o}return Ie(e,n),e.prototype.br=function(){if(this.Rr)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.Ni(t,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===Y.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new le(Y.UNKNOWN,s.toString())})},e.prototype.$i=function(t,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.$i(t,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===Y.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new le(Y.UNKNOWN,s.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),C5e=function(){function n(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return n.prototype.Sr=function(){var e=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},n.prototype.Nr=function(e){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},n.prototype.set=function(e){this.kr(),this.vr=0,e==="Online"&&(this.Vr=!1),this.Dr(e)},n.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},n.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(br(t),this.Vr=!1):me("OnlineStateTracker",t)},n.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},n}(),S5e=function(n,e,t,r,i){var o=this;this.localStore=n,this.datastore=e,this.asyncQueue=t,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(s){t.enqueueAndForget(function(){return U(o,void 0,void 0,function(){return V(this,function(a){switch(a.label){case 0:return Df(this)?(me("RemoteStore","Restarting streams for network reachability change."),[4,function(u){return U(this,void 0,void 0,function(){var l;return V(this,function(f){switch(f.label){case 0:return(l=Ee(u)).Or.add(4),[4,em(l)];case 1:return f.sent(),l.Br.set("Unknown"),l.Or.delete(4),[4,Eb(l)];case 2:return f.sent(),[2]}})})}(this)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})})}),this.Br=new C5e(t,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(n){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:if(!Df(n))return[3,4];e=0,t=n.Mr,r.label=1;case 1:return e<t.length?[4,(0,t[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function em(n){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:e=0,t=n.Mr,r.label=1;case 1:return e<t.length?[4,(0,t[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function bx(n,e){var t=Ee(n);t.$r.has(e.targetId)||(t.$r.set(e.targetId,e),x4(t)?I4(t):nm(t).er()&&E4(t,e))}function v0(n,e){var t=Ee(n),r=nm(t);t.$r.delete(e),r.er()&&rne(t,e),t.$r.size===0&&(r.er()?r.ir():Df(t)&&t.Br.set("Unknown"))}function E4(n,e){n.qr.U(e.targetId),nm(n).mr(e)}function rne(n,e){n.qr.U(e),nm(n).yr(e)}function I4(n){n.qr=new bHe({getRemoteKeysForTarget:function(e){return n.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return n.$r.get(e)||null}}),nm(n).start(),n.Br.Sr()}function x4(n){return Df(n)&&!nm(n).tr()&&n.$r.size>0}function Df(n){return Ee(n).Or.size===0}function ine(n){n.qr=void 0}function E5e(n){return U(this,void 0,void 0,function(){return V(this,function(e){return n.$r.forEach(function(t,r){E4(n,t)}),[2]})})}function I5e(n,e){return U(this,void 0,void 0,function(){return V(this,function(t){return ine(n),x4(n)?(n.Br.Nr(e),I4(n)):n.Br.set("Unknown"),[2]})})}function x5e(n,e,t){return U(this,void 0,void 0,function(){var r,i,o;return V(this,function(s){switch(s.label){case 0:if(n.Br.set("Online"),!(e instanceof Ite&&e.state===2&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(a,u){return U(this,void 0,void 0,function(){var l,f,h,d;return V(this,function(g){switch(g.label){case 0:l=u.cause,f=0,h=u.targetIds,g.label=1;case 1:return f<h.length?(d=h[f],a.$r.has(d)?[4,a.remoteSyncer.rejectListen(d,l)]:[3,3]):[3,5];case 2:g.sent(),a.$r.delete(d),a.qr.removeTarget(d),g.label=3;case 3:g.label=4;case 4:return f++,[3,1];case 5:return[2]}})})}(n,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,rE(n,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof p1?n.qr.X(e):e instanceof Ete?n.qr.rt(e):n.qr.et(e),t.isEqual(It.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Zte(n.localStore)];case 8:return i=s.sent(),t.compareTo(i)>=0?[4,function(a,u){var l=a.qr.ut(u);return l.targetChanges.forEach(function(f,h){if(f.resumeToken.approximateByteSize()>0){var d=a.$r.get(h);d&&a.$r.set(h,d.withResumeToken(f.resumeToken,u))}}),l.targetMismatches.forEach(function(f){var h=a.$r.get(f);if(h){a.$r.set(f,h.withResumeToken(mo.EMPTY_BYTE_STRING,h.snapshotVersion)),rne(a,f);var d=new yx(h.target,f,1,h.sequenceNumber);E4(a,d)}}),a.remoteSyncer.applyRemoteEvent(l)}(n,t)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return me("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,rE(n,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function rE(n,e,t){return U(this,void 0,void 0,function(){var r=this;return V(this,function(i){switch(i.label){case 0:if(!Xd(e))throw e;return n.Or.add(1),[4,em(n)];case 1:return i.sent(),n.Br.set("Offline"),t||(t=function(){return Zte(n.localStore)}),n.asyncQueue.enqueueRetryable(function(){return U(r,void 0,void 0,function(){return V(this,function(o){switch(o.label){case 0:return me("RemoteStore","Retrying IndexedDB access"),[4,t()];case 1:return o.sent(),n.Or.delete(1),[4,Eb(n)];case 2:return o.sent(),[2]}})})}),[2]}})})}function one(n,e){return e().catch(function(t){return rE(n,t,e)})}function tm(n){return U(this,void 0,void 0,function(){var e,t,r,i,o;return V(this,function(s){switch(s.label){case 0:e=Ee(n),t=sf(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(a){return Df(a)&&a.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,n5e(e.localStore,r)];case 3:return(i=s.sent())===null?(e.Fr.length===0&&t.ir(),[3,7]):(r=i.batchId,function(a,u){a.Fr.push(u);var l=sf(a);l.er()&&l.pr&&l.Er(u.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,rE(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return sne(e)&&ane(e),[2]}})})}function sne(n){return Df(n)&&!sf(n).tr()&&n.Fr.length>0}function ane(n){sf(n).start()}function D5e(n){return U(this,void 0,void 0,function(){return V(this,function(e){return sf(n).Ar(),[2]})})}function L5e(n){return U(this,void 0,void 0,function(){var e,t,r,i;return V(this,function(o){for(e=sf(n),t=0,r=n.Fr;t<r.length;t++)i=r[t],e.Er(i.mutations);return[2]})})}function k5e(n,e,t){return U(this,void 0,void 0,function(){var r,i;return V(this,function(o){switch(o.label){case 0:return r=n.Fr.shift(),i=FHe.from(r,e,t),[4,one(n,function(){return n.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,tm(n)];case 2:return o.sent(),[2]}})})}function T5e(n,e){return U(this,void 0,void 0,function(){return V(this,function(t){switch(t.label){case 0:return e&&sf(n).pr?[4,function(r,i){return U(this,void 0,void 0,function(){var o,s;return V(this,function(a){switch(a.label){case 0:return wte(s=i.code)&&s!==Y.ABORTED?(o=r.Fr.shift(),sf(r).sr(),[4,one(r,function(){return r.remoteSyncer.rejectFailedWrite(o.batchId,i)})]):[3,3];case 1:return a.sent(),[4,tm(r)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}(n,e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return sne(n)&&ane(n),[2]}})})}function fM(n,e){return U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:return t=Ee(n),e?(t.Or.delete(2),[4,Eb(t)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(t.Or.add(2),[4,em(t)]);case 3:r.sent(),t.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function nm(n){var e=this;return n.Ur||(n.Ur=function(t,r,i){var o=Ee(t);return o.br(),new y5e(r,o.Hi,o.credentials,o.R,i)}(n.datastore,n.asyncQueue,{Ii:E5e.bind(null,n),Ri:I5e.bind(null,n),_r:x5e.bind(null,n)}),n.Mr.push(function(t){return U(e,void 0,void 0,function(){return V(this,function(r){switch(r.label){case 0:return t?(n.Ur.sr(),x4(n)?I4(n):n.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Ur.stop()];case 2:r.sent(),ine(n),r.label=3;case 3:return[2]}})})})),n.Ur}function sf(n){var e=this;return n.Kr||(n.Kr=function(t,r,i){var o=Ee(t);return o.br(),new b5e(r,o.Hi,o.credentials,o.R,i)}(n.datastore,n.asyncQueue,{Ii:D5e.bind(null,n),Ri:T5e.bind(null,n),Ir:L5e.bind(null,n),Tr:k5e.bind(null,n)}),n.Mr.push(function(t){return U(e,void 0,void 0,function(){return V(this,function(r){switch(r.label){case 0:return t?(n.Kr.sr(),[4,tm(n)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,n.Kr.stop()];case 3:r.sent(),n.Fr.length>0&&(me("RemoteStore","Stopping write stream with "+n.Fr.length+" pending writes"),n.Fr=[]),r.label=4;case 4:return[2]}})})})),n.Kr}var N5e=function(){function n(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(s){})}return n.createAndSchedule=function(e,t,r,i,o){var s=new n(e,t,Date.now()+r,i,o);return s.start(r),s},n.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},n.prototype.skipDelay=function(){return this.handleDelayElapsed()},n.prototype.cancel=function(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},n.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.timerHandle!==null?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},n.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},n}();function rm(n,e){if(br("AsyncQueue",e+": "+n),Xd(n))return new le(Y.UNAVAILABLE,e+": "+n);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var une=function(){function n(e){this.comparator=e?function(t,r){return e(t,r)||Ze.comparator(t.key,r.key)}:function(t,r){return Ze.comparator(t.key,r.key)},this.keyedMap=aM(),this.sortedSet=new Ki(this.comparator)}return n.emptySet=function(e){return new n(e.comparator)},n.prototype.has=function(e){return this.keyedMap.get(e)!=null},n.prototype.get=function(e){return this.keyedMap.get(e)},n.prototype.first=function(){return this.sortedSet.minKey()},n.prototype.last=function(){return this.sortedSet.maxKey()},n.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},n.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(n.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),n.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,r){return e(t),!1})},n.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},n.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},n.prototype.isEqual=function(e){if(!(e instanceof n)||this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();t.hasNext();){var i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},n.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`},n.prototype.copy=function(e,t){var r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r},n}(),wz=function(){function n(){this.Qr=new Ki(Ze.comparator)}return n.prototype.track=function(e){var t=e.doc.key,r=this.Qr.get(t);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(t,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(t):e.type===1&&r.type===2?this.Qr=this.Qr.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):ze():this.Qr=this.Qr.insert(t,e)},n.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(t,r){e.push(r)}),e},n}(),iE=function(){function n(e,t,r,i,o,s,a,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u}return n.fromInitialDocuments=function(e,t,r,i){var o=[];return t.forEach(function(s){o.push({type:0,doc:s})}),new n(e,t,une.emptySet(t),o,r,i,!0,!1)},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_b(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0},n}(),A5e=function(){this.Wr=void 0,this.listeners=[]},O5e=function(){this.queries=new Jv(function(n){return fte(n)},_b),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s,a,u;return V(this,function(l){switch(l.label){case 0:if(t=Ee(n),r=e.query,i=!1,(o=t.queries.get(r))||(i=!0,o=new A5e),!i)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),s=o,[4,t.onListen(r)];case 2:return s.Wr=l.sent(),[3,4];case 3:return a=l.sent(),u=rm(a,"Initialization of query '"+oM(e.query)+"' failed"),[2,void e.onError(u)];case 4:return t.queries.set(r,o),o.listeners.push(e),e.zr(t.onlineState),o.Wr&&e.Hr(o.Wr)&&k4(t),[2]}})})}function L4(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s;return V(this,function(a){return t=Ee(n),r=e.query,i=!1,(o=t.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0),i?[2,(t.queries.delete(r),t.onUnlisten(r))]:[2]})})}function R5e(n,e){for(var t=Ee(n),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=t.queries.get(a);if(u){for(var l=0,f=u.listeners;l<f.length;l++)f[l].Hr(s)&&(r=!0);u.Wr=s}}r&&k4(t)}function M5e(n,e,t){var r=Ee(n),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(t);r.queries.delete(e)}function k4(n){n.Gr.forEach(function(e){e.next()})}var T4=function(){function n(e,t,r){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return n.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],r=0,i=e.docChanges;r<i.length;r++){var o=i[r];o.type!==3&&t.push(o)}e=new iE(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),s=!0):this.eo(e,this.onlineState)&&(this.no(e),s=!0),this.Xr=e,s},n.prototype.onError=function(e){this.Jr.error(e)},n.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},n.prototype.eo=function(e,t){if(!e.fromCache)return!0;var r=t!=="Offline";return!(this.options.so&&r||e.docs.isEmpty()&&t!=="Offline")},n.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0},n.prototype.no=function(e){e=iE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},n}(),P5e=function(){function n(e,t){this.payload=e,this.byteLength=t}return n.prototype.io=function(){return"metadata"in this.payload},n}(),Cz=function(){function n(e){this.R=e}return n.prototype.qn=function(e){return du(this.R,e)},n.prototype.Un=function(e){return e.metadata.exists?Tte(this.R,e.document,!1):yi.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},n.prototype.Kn=function(e){return Jr(e)},n}(),F5e=function(){function n(e,t,r){this.ro=e,this.localStore=t,this.R=r,this.queries=[],this.documents=[],this.progress=lne(e)}return n.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},n.prototype.co=function(e){for(var t=new Map,r=new Cz(this.R),i=0,o=e;i<o.length;i++){var s=o[i];if(s.metadata.queries)for(var a=r.qn(s.metadata.name),u=0,l=s.metadata.queries;u<l.length;u++){var f=l[u],h=(t.get(f)||dn()).add(a);t.set(f,h)}}return t},n.prototype.complete=function(){return U(this,void 0,void 0,function(){var e,t,r,i,o;return V(this,function(s){switch(s.label){case 0:return[4,i5e(this.localStore,new Cz(this.R),this.documents,this.ro.id)];case 1:e=s.sent(),t=this.co(this.documents),r=0,i=this.queries,s.label=2;case 2:return r<i.length?(o=i[r],[4,o5e(this.localStore,o,t.get(o.name))]):[3,5];case 3:s.sent(),s.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new XHe(Object.assign({},this.progress),e))]}})})},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lne(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cne=function(n){this.key=n},fne=function(n){this.key=n},hne=function(){function n(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=dn(),this.mutatedKeys=dn(),this.lo=hte(e),this.fo=new une(this.lo)}return Object.defineProperty(n.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),n.prototype._o=function(e,t){var r=this,i=t?t.mo:new wz,o=t?t.fo:this.fo,s=t?t.mutatedKeys:this.mutatedKeys,a=o,u=!1,l=h1(this.query)&&o.size===this.query.limit?o.last():null,f=QS(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(function(d,g){var v=o.get(d),m=yb(r.query,g)?g:null,y=!!v&&r.mutatedKeys.has(v.key),b=!!m&&(m.hasLocalMutations||r.mutatedKeys.has(m.key)&&m.hasCommittedMutations),C=!1;v&&m?v.data.isEqual(m.data)?y!==b&&(i.track({type:3,doc:m}),C=!0):r.yo(v,m)||(i.track({type:2,doc:m}),C=!0,(l&&r.lo(m,l)>0||f&&r.lo(m,f)<0)&&(u=!0)):!v&&m?(i.track({type:0,doc:m}),C=!0):v&&!m&&(i.track({type:1,doc:v}),C=!0,(l||f)&&(u=!0)),C&&(m?(a=a.add(m),s=b?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),h1(this.query)||QS(this.query))for(;a.size>this.query.limit;){var h=h1(this.query)?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{fo:a,mo:i,Nn:u,mutatedKeys:s}},n.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},n.prototype.applyChanges=function(e,t,r){var i=this,o=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var s=e.mo.jr();s.sort(function(f,h){return function(d,g){var v=function(m){switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze()}};return v(d)-v(g)}(f.type,h.type)||i.lo(f.doc,h.doc)}),this.po(r);var a=t?this.Eo():[],u=this.ho.size===0&&this.current?1:0,l=u!==this.ao;return this.ao=u,s.length!==0||l?{snapshot:new iE(this.query,e.fo,o,s,e.mutatedKeys,u===0,l,!1),To:a}:{To:a}},n.prototype.zr=function(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new wz,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},n.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},n.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach(function(r){return t.uo=t.uo.add(r)}),e.modifiedDocuments.forEach(function(r){}),e.removedDocuments.forEach(function(r){return t.uo=t.uo.delete(r)}),this.current=e.current)},n.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=dn(),this.fo.forEach(function(i){e.Io(i.key)&&(e.ho=e.ho.add(i.key))});var r=[];return t.forEach(function(i){e.ho.has(i)||r.push(new fne(i))}),this.ho.forEach(function(i){t.has(i)||r.push(new cne(i))}),r},n.prototype.Ao=function(e){this.uo=e.Bn,this.ho=dn();var t=this._o(e.documents);return this.applyChanges(t,!0)},n.prototype.Ro=function(){return iE.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},n}(),B5e=function(n,e,t){this.query=n,this.targetId=e,this.view=t},W5e=function(n){this.key=n,this.bo=!1},V5e=function(){function n(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Jv(function(a){return fte(a)},_b),this.Vo=new Map,this.So=new Set,this.Do=new Ki(Ze.comparator),this.Co=new Map,this.No=new C4,this.xo={},this.ko=new Map,this.Fo=tE.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(n.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),n}();function H5e(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s,a;return V(this,function(u){switch(u.label){case 0:return t=M4(n),(o=t.Po.get(e))?(r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,_v(t.localStore,js(e))];case 2:return s=u.sent(),a=t.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,N4(t,e,r,a==="current")];case 3:i=u.sent(),t.isPrimaryClient&&bx(t.remoteStore,s),u.label=4;case 4:return[2,i]}})})}function N4(n,e,t,r){return U(this,void 0,void 0,function(){var i,o,s,a,u,l;return V(this,function(f){switch(f.label){case 0:return n.Oo=function(h,d,g){return function(v,m,y,b){return U(this,void 0,void 0,function(){var C,E,D;return V(this,function(k){switch(k.label){case 0:return C=m.view._o(y),C.Nn?[4,nE(v.localStore,m.query,!1).then(function(I){var T=I.documents;return m.view._o(T,C)})]:[3,2];case 1:C=k.sent(),k.label=2;case 2:return E=b&&b.targetChanges.get(m.targetId),D=m.view.applyChanges(C,v.isPrimaryClient,E),[2,(hM(v,m.targetId,D.To),D.snapshot)]}})})}(n,h,d,g)},[4,nE(n.localStore,e,!0)];case 1:return i=f.sent(),o=new hne(e,i.Bn),s=o._o(i.documents),a=p4.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline"),u=o.applyChanges(s,n.isPrimaryClient,a),hM(n,t,u.To),l=new B5e(e,t,o),[2,(n.Po.set(e,l),n.Vo.has(t)?n.Vo.get(t).push(e):n.Vo.set(t,[e]),u.snapshot)]}})})}function U5e(n,e){return U(this,void 0,void 0,function(){var t,r,i;return V(this,function(o){switch(o.label){case 0:return t=Ee(n),r=t.Po.get(e),(i=t.Vo.get(r.targetId)).length>1?[2,(t.Vo.set(r.targetId,i.filter(function(s){return!_b(s,e)})),void t.Po.delete(e))]:t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,yv(t.localStore,r.targetId,!1).then(function(){t.sharedClientState.clearQueryState(r.targetId),v0(t.remoteStore,r.targetId),bv(t,r.targetId)}).catch(Qd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return bv(t,r.targetId),[4,yv(t.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function j5e(n,e,t){return U(this,void 0,void 0,function(){var r,i,o,s;return V(this,function(a){switch(a.label){case 0:r=P4(n),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(u,l){var f,h=Ee(u),d=Po.now(),g=l.reduce(function(v,m){return v.add(m.key)},dn());return h.persistence.runTransaction("Locally write mutations","readwrite",function(v){return h.Mn.pn(v,g).next(function(m){f=m;for(var y=[],b=0,C=l;b<C.length;b++){var E=C[b],D=dHe(E,f.get(E.key));D!=null&&y.push(new xf(E.key,D,ate(D.value.mapValue),Pi.exists(!0)))}return h._n.addMutationBatch(v,d,y,l)})}).then(function(v){return v.applyToLocalDocumentSet(f),{batchId:v.batchId,changes:f}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(u,l,f){var h=u.xo[u.currentUser.toKey()];h||(h=new Ki(Rt)),h=h.insert(l,f),u.xo[u.currentUser.toKey()]=h}(r,i.batchId,t),[4,Fl(r,i.changes)];case 3:return a.sent(),[4,tm(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=rm(o,"Failed to persist write"),t.reject(s),[3,6];case 6:return[2]}})})}function dne(n,e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:t=Ee(n),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,t5e(t.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(o,s){var a=t.Co.get(s);a&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?a.bo=!0:o.modifiedDocuments.size>0?nt(a.bo):o.removedDocuments.size>0&&(nt(a.bo),a.bo=!1))}),[4,Fl(t,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Qd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Sz(n,e,t){var r=Ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){var i=[];r.Po.forEach(function(o,s){var a=s.view.zr(e);a.snapshot&&i.push(a.snapshot)}),function(o,s){var a=Ee(o);a.onlineState=s;var u=!1;a.queries.forEach(function(l,f){for(var h=0,d=f.listeners;h<d.length;h++)d[h].zr(s)&&(u=!0)}),u&&k4(a)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function z5e(n,e,t){return U(this,void 0,void 0,function(){var r,i,o,s,a,u;return V(this,function(l){switch(l.label){case 0:return(r=Ee(n)).sharedClientState.updateQueryState(e,"rejected",t),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Ki(Ze.comparator)).insert(o,yi.newNoDocument(o,It.min())),a=dn().add(o),u=new d4(It.min(),new Map,new Pr(Rt),s,a),[4,dne(r,u)]):[3,2];case 1:return l.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),R4(r),[3,4];case 2:return[4,yv(r.localStore,e,!1).then(function(){return bv(r,e,t)}).catch(Qd)];case 3:l.sent(),l.label=4;case 4:return[2]}})})}function q5e(n,e){return U(this,void 0,void 0,function(){var t,r,i;return V(this,function(o){switch(o.label){case 0:t=Ee(n),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,e5e(t.localStore,e)];case 2:return i=o.sent(),O4(t,r,null),A4(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),[4,Fl(t,i)];case 3:return o.sent(),[3,6];case 4:return[4,Qd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function $5e(n,e,t){return U(this,void 0,void 0,function(){var r,i;return V(this,function(o){switch(o.label){case 0:r=Ee(n),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(s,a){var u=Ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",function(l){var f;return u._n.lookupMutationBatch(l,a).next(function(h){return nt(h!==null),f=h.keys(),u._n.removeMutationBatch(l,h)}).next(function(){return u._n.performConsistencyCheck(l)}).next(function(){return u.Mn.pn(l,f)})})}(r.localStore,e)];case 2:return i=o.sent(),O4(r,e,t),A4(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),[4,Fl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Qd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function K5e(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s;return V(this,function(a){switch(a.label){case 0:Df((t=Ee(n)).remoteStore)||me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(u){var l=Ee(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(f){return l._n.getHighestUnacknowledgedBatchId(f)})}(t.localStore)];case 2:return(r=a.sent())===-1?[2,void e.resolve()]:((i=t.ko.get(r)||[]).push(e),t.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=rm(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function A4(n,e){(n.ko.get(e)||[]).forEach(function(t){t.resolve()}),n.ko.delete(e)}function O4(n,e,t){var r=Ee(n),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function bv(n,e,t){t===void 0&&(t=null),n.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=n.Vo.get(e);r<i.length;r++){var o=i[r];n.Po.delete(o),t&&n.vo.Mo(o,t)}n.Vo.delete(e),n.isPrimaryClient&&n.No.Zn(e).forEach(function(s){n.No.containsKey(s)||pne(n,s)})}function pne(n,e){n.So.delete(e.path.canonicalString());var t=n.Do.get(e);t!==null&&(v0(n.remoteStore,t),n.Do=n.Do.remove(e),n.Co.delete(t),R4(n))}function hM(n,e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];o instanceof cne?(n.No.addReference(o.key,e),G5e(n,o)):o instanceof fne?(me("SyncEngine","Document no longer in limbo: "+o.key),n.No.removeReference(o.key,e),n.No.containsKey(o.key)||pne(n,o.key)):ze()}}function G5e(n,e){var t=e.key,r=t.path.canonicalString();n.Do.get(t)||n.So.has(r)||(me("SyncEngine","New document in limbo: "+t),n.So.add(r),R4(n))}function R4(n){for(;n.So.size>0&&n.Do.size<n.maxConcurrentLimboResolutions;){var e=n.So.values().next().value;n.So.delete(e);var t=new Ze(Yt.fromString(e)),r=n.Fo.next();n.Co.set(r,new W5e(t)),n.Do=n.Do.insert(t,r),bx(n.remoteStore,new yx(js(Qv(t.path)),r,2,us.o))}}function Fl(n,e,t){return U(this,void 0,void 0,function(){var r,i,o,s;return V(this,function(a){switch(a.label){case 0:return r=Ee(n),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(u,l){s.push(r.Oo(l,e,t).then(function(f){if(f){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,f.fromCache?"not-current":"current"),i.push(f);var h=QHe.Pn(l.targetId,f);o.push(h)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(u,l){return U(this,void 0,void 0,function(){var f,h,d,g,v,m,y,b,C;return V(this,function(E){switch(E.label){case 0:f=Ee(u),E.label=1;case 1:return E.trys.push([1,3,,4]),[4,f.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(D){return he.forEach(l,function(k){return he.forEach(k.bn,function(I){return f.persistence.referenceDelegate.addReference(D,k.targetId,I)}).next(function(){return he.forEach(k.vn,function(I){return f.persistence.referenceDelegate.removeReference(D,k.targetId,I)})})})})];case 2:return E.sent(),[3,4];case 3:if(!Xd(h=E.sent()))throw h;return me("LocalStore","Failed to update sequence numbers: "+h),[3,4];case 4:for(d=0,g=l;d<g.length;d++)v=g[d],m=v.targetId,v.fromCache||(y=f.kn.get(m),b=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(b),f.kn=f.kn.insert(m,C));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Y5e(n,e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:return(t=Ee(n)).currentUser.isEqual(e)?[3,3]:(me("SyncEngine","User change. New user:",e.toKey()),[4,Yte(t.localStore,e)]);case 1:return r=i.sent(),t.currentUser=e,function(o,s){o.ko.forEach(function(a){a.forEach(function(u){u.reject(new le(Y.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ko.clear()}(t),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Fl(t,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Z5e(n,e){var t=Ee(n),r=t.Co.get(e);if(r&&r.bo)return dn().add(r.key);var i=dn(),o=t.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],l=t.Po.get(u);i=i.unionWith(l.view.wo)}return i}function X5e(n,e){return U(this,void 0,void 0,function(){var t,r,i;return V(this,function(o){switch(o.label){case 0:return[4,nE((t=Ee(n)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(t.isPrimaryClient&&hM(t,e.targetId,i.To),i)]}})})}function Q5e(n){return U(this,void 0,void 0,function(){var e;return V(this,function(t){return[2,Jte((e=Ee(n)).localStore).then(function(r){return Fl(e,r)})]})})}function J5e(n,e,t,r){return U(this,void 0,void 0,function(){var i,o;return V(this,function(s){switch(s.label){case 0:return[4,function(a,u){var l=Ee(a),f=Ee(l._n);return l.persistence.runTransaction("Lookup mutation documents","readonly",function(h){return f.jt(h,u).next(function(d){return d?l.Mn.pn(h,d):he.resolve(null)})})}((i=Ee(n)).localStore,e)];case 1:return(o=s.sent())===null?[3,6]:t!=="pending"?[3,3]:[4,tm(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:t==="acknowledged"||t==="rejected"?(O4(i,e,r||null),A4(i,e),function(a,u){Ee(Ee(a)._n).Gt(u)}(i.localStore,e)):ze(),s.label=4;case 4:return[4,Fl(i,o)];case 5:return s.sent(),[3,7];case 6:me("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function e8e(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s,a,u,l;return V(this,function(f){switch(f.label){case 0:return M4(t=Ee(n)),P4(t),e!==!0||t.$o===!0?[3,3]:(r=t.sharedClientState.getAllActiveQueryTargets(),[4,Ez(t,r.toArray())]);case 1:return i=f.sent(),t.$o=!0,[4,fM(t.remoteStore,!0)];case 2:for(f.sent(),o=0,s=i;o<s.length;o++)a=s[o],bx(t.remoteStore,a);return[3,7];case 3:return e!==!1||t.$o===!1?[3,7]:(u=[],l=Promise.resolve(),t.Vo.forEach(function(h,d){t.sharedClientState.isLocalQueryTarget(d)?u.push(d):l=l.then(function(){return bv(t,d),yv(t.localStore,d,!0)}),v0(t.remoteStore,d)}),[4,l]);case 4:return f.sent(),[4,Ez(t,u)];case 5:return f.sent(),function(h){var d=Ee(h);d.Co.forEach(function(g,v){v0(d.remoteStore,v)}),d.No.ts(),d.Co=new Map,d.Do=new Ki(Ze.comparator)}(t),t.$o=!1,[4,fM(t.remoteStore,!1)];case 6:f.sent(),f.label=7;case 7:return[2]}})})}function Ez(n,e,t){return U(this,void 0,void 0,function(){var r,i,o,s,a,u,l,f,h,d,g,v,m,y;return V(this,function(b){switch(b.label){case 0:r=Ee(n),i=[],o=[],s=0,a=e,b.label=1;case 1:return s<a.length?(u=a[s],l=void 0,(f=r.Vo.get(u))&&f.length!==0?[4,_v(r.localStore,js(f[0]))]:[3,7]):[3,13];case 2:l=b.sent(),h=0,d=f,b.label=3;case 3:return h<d.length?(g=d[h],v=r.Po.get(g),[4,X5e(r,v)]):[3,6];case 4:(m=b.sent()).snapshot&&o.push(m.snapshot),b.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Qte(r.localStore,u)];case 8:return y=b.sent(),[4,_v(r.localStore,y)];case 9:return l=b.sent(),[4,N4(r,gne(y),u,!1)];case 10:b.sent(),b.label=11;case 11:i.push(l),b.label=12;case 12:return s++,[3,1];case 13:return[2,(r.vo._r(o),i)]}})})}function gne(n){return lte(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function t8e(n){var e=Ee(n);return Ee(Ee(e.localStore).persistence).fn()}function n8e(n,e,t,r){return U(this,void 0,void 0,function(){var i,o,s;return V(this,function(a){switch(a.label){case 0:return(i=Ee(n)).$o?(me("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(t){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Jte(i.localStore)];case 3:return o=a.sent(),s=d4.createSynthesizedRemoteEventForCurrentChange(e,t==="current"),[4,Fl(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,yv(i.localStore,e,!0)];case 6:return a.sent(),bv(i,e,r),[3,8];case 7:ze(),a.label=8;case 8:return[2]}})})}function r8e(n,e,t){return U(this,void 0,void 0,function(){var r,i,o,s,a,u,l,f,h,d;return V(this,function(g){switch(g.label){case 0:if(!(r=M4(n)).$o)return[3,10];i=0,o=e,g.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(me("SyncEngine","Adding an already active target "+s),[3,5]):[4,Qte(r.localStore,s)]):[3,6];case 2:return a=g.sent(),[4,_v(r.localStore,a)];case 3:return u=g.sent(),[4,N4(r,gne(a),u.targetId,!1)];case 4:g.sent(),bx(r.remoteStore,u),g.label=5;case 5:return i++,[3,1];case 6:l=function(v){return V(this,function(m){switch(m.label){case 0:return r.Vo.has(v)?[4,yv(r.localStore,v,!1).then(function(){v0(r.remoteStore,v),bv(r,v)}).catch(Qd)]:[3,2];case 1:m.sent(),m.label=2;case 2:return[2]}})},f=0,h=t,g.label=7;case 7:return f<h.length?(d=h[f],[5,l(d)]):[3,10];case 8:g.sent(),g.label=9;case 9:return f++,[3,7];case 10:return[2]}})})}function M4(n){var e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dne.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z5e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z5e.bind(null,e),e.vo._r=R5e.bind(null,e.eventManager),e.vo.Mo=M5e.bind(null,e.eventManager),e}function P4(n){var e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q5e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$5e.bind(null,e),e}function i8e(n,e,t){var r=Ee(n);(function(i,o,s){return U(this,void 0,void 0,function(){var a,u,l,f,h,d;return V(this,function(g){switch(g.label){case 0:return g.trys.push([0,14,,15]),[4,o.getMetadata()];case 1:return a=g.sent(),[4,function(v,m){var y=Ee(v),b=Jr(m.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",function(C){return y.Ke.getBundleMetadata(C,m.id)}).then(function(C){return!!C&&C.createTime.compareTo(b)>=0})}(i.localStore,a)];case 2:return g.sent()?[4,o.close()]:[3,4];case 3:return[2,(g.sent(),void s._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(a)))];case 4:return s._updateProgress(lne(a)),u=new F5e(a,i.localStore,o.R),[4,o.Lo()];case 5:l=g.sent(),g.label=6;case 6:return l?[4,u.oo(l)]:[3,10];case 7:return(f=g.sent())&&s._updateProgress(f),[4,o.Lo()];case 8:l=g.sent(),g.label=9;case 9:return[3,6];case 10:return[4,u.complete()];case 11:return h=g.sent(),[4,Fl(i,h.wn,void 0)];case 12:return g.sent(),[4,function(v,m){var y=Ee(v);return y.persistence.runTransaction("Save bundle","readwrite",function(b){return y.Ke.saveBundleMetadata(b,m)})}(i.localStore,a)];case 13:return g.sent(),s._completeWith(h.progress),[3,15];case 14:return l0("SyncEngine","Loading bundle failed with "+(d=g.sent())),s._failWith(d),[3,15];case 15:return[2]}})})})(r,e,t).then(function(){r.sharedClientState.notifyBundleLoaded()})}var vne=function(){function n(){this.synchronizeTabs=!1}return n.prototype.initialize=function(e){return U(this,void 0,void 0,function(){return V(this,function(t){switch(t.label){case 0:return this.R=Sb(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},n.prototype.Uo=function(e){return null},n.prototype.Ko=function(e){return Gte(this.persistence,new Kte,e.initialUser,this.R)},n.prototype.qo=function(e){return new f5e(d5e.bs,this.R)},n.prototype.Bo=function(e){return new ene},n.prototype.terminate=function(){return U(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},n}(),mne=function(n){function e(t,r,i){var o=this;return(o=n.call(this)||this).Qo=t,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return Ie(e,n),e.prototype.initialize=function(t){return U(this,void 0,void 0,function(){var r=this;return V(this,function(i){switch(i.label){case 0:return[4,n.prototype.initialize.call(this,t)];case 1:return i.sent(),[4,r5e(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,t)];case 3:return i.sent(),[4,P4(this.Qo.syncEngine)];case 4:return i.sent(),[4,tm(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},e.prototype.Ko=function(t){return Gte(this.persistence,new Kte,t.initialUser,this.R)},e.prototype.Uo=function(t){var r=this.persistence.referenceDelegate.garbageCollector;return new zHe(r,t.asyncQueue)},e.prototype.qo=function(t){var r=w4(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Ga.withCacheSize(this.cacheSizeBytes):Ga.DEFAULT;return new ZHe(this.synchronizeTabs,r,t.clientId,i,t.asyncQueue,tne(),g1(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new ene},e}(vne),o8e=function(n){function e(t,r){var i=this;return(i=n.call(this,t,r,!1)||this).Qo=t,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ie(e,n),e.prototype.initialize=function(t){return U(this,void 0,void 0,function(){var r,i=this;return V(this,function(o){switch(o.label){case 0:return[4,n.prototype.initialize.call(this,t)];case 1:return o.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof NN?(this.sharedClientState.syncEngine={ui:J5e.bind(null,r),ai:n8e.bind(null,r),hi:r8e.bind(null,r),fn:t8e.bind(null,r),ci:Q5e.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He(function(s){return U(i,void 0,void 0,function(){return V(this,function(a){switch(a.label){case 0:return[4,e8e(this.Qo.syncEngine,s)];case 1:return a.sent(),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):s||this.gcScheduler.stop()),[2]}})})})];case 4:return o.sent(),[2]}})})},e.prototype.Bo=function(t){var r=tne();if(!NN.yt(r))throw new le(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=w4(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new NN(r,t.asyncQueue,i,t.clientId,t.initialUser)},e}(mne),dM=function(){function n(){}return n.prototype.initialize=function(e,t){return U(this,void 0,void 0,function(){var r=this;return V(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(o){return Sz(r.syncEngine,o,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Y5e.bind(null,this.syncEngine),[4,fM(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.createEventManager=function(e){return new O5e},n.prototype.createDatastore=function(e){var t,r=Sb(e.databaseInfo.databaseId),i=(t=e.databaseInfo,new _5e(t));return function(o,s,a){return new w5e(o,s,a)}(e.credentials,i,r)},n.prototype.createRemoteStore=function(e){var t,r,i,o,s,a=this;return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=function(u){return Sz(a.syncEngine,u,0)},s=bz.yt()?new bz:new g5e,new S5e(t,r,i,o,s)},n.prototype.createSyncEngine=function(e,t){return function(r,i,o,s,a,u,l){var f=new V5e(r,i,o,s,a,u);return l&&(f.$o=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},n.prototype.terminate=function(){return function(e){return U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:return t=Ee(e),me("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,em(t)];case 1:return r.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}})})}(this.remoteStore)},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(n,e){e===void 0&&(e=10240);var t=0;return{read:function(){return U(this,void 0,void 0,function(){var r;return V(this,function(i){return t<n.byteLength?(r={value:n.slice(t,t+e),done:!1},[2,(t+=e,r)]):[2,{done:!0}]})})},cancel:function(){return U(this,void 0,void 0,function(){return V(this,function(r){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wx=function(){function n(e){this.observer=e,this.muted=!1}return n.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},n.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},n.prototype.Wo=function(){this.muted=!0},n.prototype.jo=function(e,t){var r=this;this.muted||setTimeout(function(){r.muted||e(t)},0)},n}(),s8e=function(){function n(e,t){var r=this;this.Go=e,this.R=t,this.metadata=new Ui,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i==null?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return n.prototype.close=function(){return this.Go.cancel()},n.prototype.getMetadata=function(){return U(this,void 0,void 0,function(){return V(this,function(e){return[2,this.metadata.promise]})})},n.prototype.Lo=function(){return U(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},n.prototype.Ho=function(){return U(this,void 0,void 0,function(){var e,t,r,i;return V(this,function(o){switch(o.label){case 0:return[4,this.Jo()];case 1:return(e=o.sent())===null?[2,null]:(t=this.zo.decode(e),r=Number(t),isNaN(r)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(r)]);case 2:return i=o.sent(),[2,new P5e(JSON.parse(i),e.length+r)]}})})},n.prototype.Zo=function(){return this.buffer.findIndex(function(e){return e===123})},n.prototype.Jo=function(){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}})})},n.prototype.Xo=function(e){return U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}})})},n.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},n.prototype.tc=function(){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(e=r.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}})})},n}(),a8e=function(){function n(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return n.prototype.lookup=function(e){return U(this,void 0,void 0,function(){var t,r=this;return V(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new le(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(o,s){return U(this,void 0,void 0,function(){var a,u,l,f,h,d;return V(this,function(g){switch(g.label){case 0:return a=Ee(o),u=g0(a.R)+"/documents",l={documents:s.map(function(v){return p0(a.R,v)})},[4,a.$i("BatchGetDocuments",u,l)];case 1:return f=g.sent(),h=new Map,f.forEach(function(v){var m=function(y,b){return"found"in b?function(C,E){nt(!!E.found),E.found.name,E.found.updateTime;var D=du(C,E.found.name),k=Jr(E.found.updateTime),I=new ss({mapValue:{fields:E.found.fields}});return yi.newFoundDocument(D,k,I)}(y,b):"missing"in b?function(C,E){nt(!!E.missing),nt(!!E.readTime);var D=du(C,E.missing),k=Jr(E.readTime);return yi.newNoDocument(D,k)}(y,b):ze()}(a.R,v);h.set(m.key.toString(),m)}),d=[],[2,(s.forEach(function(v){var m=h.get(v.toString());nt(!!m),d.push(m)}),d)]}})})}(this.datastore,e)];case 1:return[2,((t=i.sent()).forEach(function(o){return r.recordVersion(o)}),t)]}})})},n.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},n.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())},n.prototype.delete=function(e){this.write(new Cb(e,this.precondition(e))),this.writtenDocs.add(e.toString())},n.prototype.commit=function(){return U(this,void 0,void 0,function(){var e,t=this;return V(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(i){e.delete(i.key.toString())}),e.forEach(function(i,o){var s=Ze.fromPath(o);t.mutations.push(new h4(s,t.precondition(s)))}),[4,function(i,o){return U(this,void 0,void 0,function(){var s,a,u;return V(this,function(l){switch(l.label){case 0:return s=Ee(i),a=g0(s.R)+"/documents",u={writes:o.map(function(f){return JS(s.R,f)})},[4,s.Ni("Commit",a,u)];case 1:return l.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},n.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ze();t=It.min()}var r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new le(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},n.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Pi.updateTime(t):Pi.none()},n.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new le(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pi.updateTime(t)}return Pi.exists(!0)},n.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},n.prototype.ensureCommitNotCalled=function(){},n}(),u8e=function(){function n(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new S4(this.asyncQueue,"transaction_retry")}return n.prototype.run=function(){this.ec-=1,this.nc()},n.prototype.nc=function(){var e=this;this.Zi.ji(function(){return U(e,void 0,void 0,function(){var t,r,i=this;return V(this,function(o){return t=new a8e(this.datastore),(r=this.sc(t))&&r.then(function(s){i.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){i.deferred.resolve(s)}).catch(function(a){i.ic(a)})})}).catch(function(s){i.ic(s)}),[2]})})})},n.prototype.sc=function(e){try{var t=this.updateFunction(e);return!Zd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},n.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return t.nc(),Promise.resolve()})):this.deferred.reject(e)},n.prototype.rc=function(e){if(e.name==="FirebaseError"){var t=e.code;return t==="aborted"||t==="failed-precondition"||!wte(t)}return!1},n}(),l8e=function(){function n(e,t,r){var i=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=r,this.user=ci.UNAUTHENTICATED,this.clientId=tte.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,function(o){return U(i,void 0,void 0,function(){return V(this,function(s){switch(s.label){case 0:return me("FirestoreClient","Received user=",o.uid),[4,this.credentialListener(o)];case 1:return s.sent(),this.user=o,[2]}})})})}return n.prototype.getConfiguration=function(){return U(this,void 0,void 0,function(){return V(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},n.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},n.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.")},n.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return U(e,void 0,void 0,function(){var r,i;return V(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:o.sent(),o.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return r=o.sent(),i=rm(r,"Failed to shutdown persistence"),t.reject(i),[3,6];case 6:return[2]}})})}),t.promise},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ne(n,e){return U(this,void 0,void 0,function(){var t,r,i=this;return V(this,function(o){switch(o.label){case 0:return n.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider"),[4,n.getConfiguration()];case 1:return t=o.sent(),[4,e.initialize(t)];case 2:return o.sent(),r=t.initialUser,n.setCredentialChangeListener(function(s){return U(i,void 0,void 0,function(){return V(this,function(a){switch(a.label){case 0:return r.isEqual(s)?[3,2]:[4,Yte(e.localStore,s)];case 1:a.sent(),r=s,a.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return n.terminate()}),n.offlineComponents=e,[2]}})})}function yne(n,e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:return n.asyncQueue.verifyOperationInProgress(),[4,F4(n)];case 1:return t=i.sent(),me("FirestoreClient","Initializing OnlineComponentProvider"),[4,n.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(t,r)];case 3:return i.sent(),n.setCredentialChangeListener(function(o){return function(s,a){return U(this,void 0,void 0,function(){var u,l;return V(this,function(f){switch(f.label){case 0:return(u=Ee(s)).asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials"),l=Df(u),u.Or.add(3),[4,em(u)];case 1:return f.sent(),l&&u.Br.set("Unknown"),[4,u.remoteSyncer.handleCredentialChange(a)];case 2:return f.sent(),u.Or.delete(3),[4,Eb(u)];case 3:return f.sent(),[2]}})})}(e.remoteStore,o)}),n.onlineComponents=e,[2]}})})}function F4(n){return U(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return n.offlineComponents?[3,2]:(me("FirestoreClient","Using default OfflineComponentProvider"),[4,_ne(n,new vne)]);case 1:e.sent(),e.label=2;case 2:return[2,n.offlineComponents]}})})}function Cx(n){return U(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return n.onlineComponents?[3,2]:(me("FirestoreClient","Using default OnlineComponentProvider"),[4,yne(n,new dM)]);case 1:e.sent(),e.label=2;case 2:return[2,n.onlineComponents]}})})}function xz(n){return F4(n).then(function(e){return e.persistence})}function B4(n){return F4(n).then(function(e){return e.localStore})}function Dz(n){return Cx(n).then(function(e){return e.remoteStore})}function W4(n){return Cx(n).then(function(e){return e.syncEngine})}function wv(n){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return[4,Cx(n)];case 1:return e=r.sent(),[2,((t=e.eventManager).onListen=H5e.bind(null,e.syncEngine),t.onUnlisten=U5e.bind(null,e.syncEngine),t)]}})})}function Lz(n,e,t){var r=this;t===void 0&&(t={});var i=new Ui;return n.asyncQueue.enqueueAndForget(function(){return U(r,void 0,void 0,function(){var o;return V(this,function(s){switch(s.label){case 0:return o=function(a,u,l,f,h){var d=new wx({next:function(v){u.enqueueAndForget(function(){return L4(a,g)});var m=v.docs.has(l);!m&&v.fromCache?h.reject(new le(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&v.fromCache&&f&&f.source==="server"?h.reject(new le(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:function(v){return h.reject(v)}}),g=new T4(Qv(l.path),d,{includeMetadataChanges:!0,so:!0});return D4(a,g)},[4,wv(n)];case 1:return[2,o.apply(void 0,[s.sent(),n.asyncQueue,e,t,i])]}})})}),i.promise}function kz(n,e,t){var r=this;t===void 0&&(t={});var i=new Ui;return n.asyncQueue.enqueueAndForget(function(){return U(r,void 0,void 0,function(){var o;return V(this,function(s){switch(s.label){case 0:return o=function(a,u,l,f,h){var d=new wx({next:function(v){u.enqueueAndForget(function(){return L4(a,g)}),v.fromCache&&f.source==="server"?h.reject(new le(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:function(v){return h.reject(v)}}),g=new T4(l,d,{includeMetadataChanges:!0,so:!0});return D4(a,g)},[4,wv(n)];case 1:return[2,o.apply(void 0,[s.sent(),n.asyncQueue,e,t,i])]}})})}),i.promise}var c8e=function(n,e,t,r,i,o,s,a){this.databaseId=n,this.appId=e,this.persistenceKey=t,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},oE=function(){function n(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(n.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database},n}(),Tz=new Map,bne=function(n,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+n},Nz=function(){function n(){this.changeListener=null}return n.prototype.getToken=function(){return Promise.resolve(null)},n.prototype.invalidateToken=function(){},n.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable(function(){return t(ci.UNAUTHENTICATED)})},n.prototype.removeChangeListener=function(){this.changeListener=null},n}(),f8e=function(){function n(e){this.token=e,this.changeListener=null}return n.prototype.getToken=function(){return Promise.resolve(this.token)},n.prototype.invalidateToken=function(){},n.prototype.setChangeListener=function(e,t){var r=this;this.changeListener=t,e.enqueueRetryable(function(){return t(r.token.user)})},n.prototype.removeChangeListener=function(){this.changeListener=null},n}(),h8e=function(){function n(e){var t=this;this.currentUser=ci.UNAUTHENTICATED,this.oc=new Ui,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable(function(){return t.changeListener(t.currentUser)})};var r=function(i){me("FirebaseCredentialsProvider","Auth detected"),t.auth=i,t.auth.addAuthTokenListener(t.uc)};e.onInit(function(i){return r(i)}),setTimeout(function(){if(!t.auth){var i=e.getImmediate({optional:!0});i?r(i):(me("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}},0)}return n.prototype.getToken=function(){var e=this,t=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return e.cc!==t?(me("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):i?(nt(typeof i.accessToken=="string"),new bne(i.accessToken,e.currentUser)):null}):Promise.resolve(null)},n.prototype.invalidateToken=function(){this.forceRefresh=!0},n.prototype.setChangeListener=function(e,t){var r=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return U(r,void 0,void 0,function(){return V(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,t(this.currentUser)];case 2:return i.sent(),this.changeListener=t,[2]}})})})},n.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},n.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new ci(e)},n}(),d8e=function(){function n(e,t,r){this.hc=e,this.lc=t,this.fc=r,this.type="FirstParty",this.user=ci.FIRST_PARTY}return Object.defineProperty(n.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),n}(),p8e=function(){function n(e,t,r){this.hc=e,this.lc=t,this.fc=r}return n.prototype.getToken=function(){return Promise.resolve(new d8e(this.hc,this.lc,this.fc))},n.prototype.setChangeListener=function(e,t){e.enqueueRetryable(function(){return t(ci.FIRST_PARTY)})},n.prototype.removeChangeListener=function(){},n.prototype.invalidateToken=function(){},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(n,e,t){if(!t)throw new le(Y.INVALID_ARGUMENT,"Function "+n+"() cannot be called with an empty "+e+".")}function H4(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new le(Y.INVALID_ARGUMENT,"Invalid options passed to function "+n+'(): You cannot specify both "merge" and "mergeFields".');return e}function wne(n,e,t,r){if(e===!0&&r===!0)throw new le(Y.INVALID_ARGUMENT,n+" and "+t+" cannot be used together.")}function Az(n){if(!Ze.isDocumentKey(n))throw new le(Y.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+n+" has "+n.length+".")}function Oz(n){if(Ze.isDocumentKey(n))throw new le(Y.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+n+" has "+n.length+".")}function Sx(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=n.substring(0,20)+"..."),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";var e=function(t){if(t.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(r&&r.length>1)return r[1]}return null}(n);return e?"a custom "+e+" object":"an object"}return typeof n=="function"?"a function":ze()}function Kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var t=Sx(n);throw new le(Y.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}return n}function Rz(n,e){if(e<=0)throw new le(Y.INVALID_ARGUMENT,"Function "+n+"() requires a positive number, but it was: "+e+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mz=function(){function n(e){var t;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,wne("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return n.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},n}(),m0=function(){function n(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mz({}),this._settingsFrozen=!1,e instanceof oE?(this._databaseId=e,this._credentials=new Nz):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new le(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oE(r.options.projectId)}(e),this._credentials=new h8e(t))}return Object.defineProperty(n.prototype,"app",{get:function(){if(!this._app)throw new le(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),n.prototype._setSettings=function(e){if(this._settingsFrozen)throw new le(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mz(e),e.credentials!==void 0&&(this._credentials=function(t){if(!t)return new Nz;switch(t.type){case"gapi":var r=t.client;return nt(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new p8e(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new le(Y.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},n.prototype._getSettings=function(){return this._settings},n.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},n.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},n.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},n.prototype._terminate=function(){return e=this,(t=Tz.get(e))&&(me("ComponentProvider","Removing Datastore"),Tz.delete(e),t.terminate()),Promise.resolve();var e,t},n}(),qn=function(){function n(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}return Object.defineProperty(n.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new $c(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),n.prototype.withConverter=function(e){return new n(this.firestore,e,this._key)},n}(),Fo=function(){function n(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}return n.prototype.withConverter=function(e){return new n(this.firestore,e,this._query)},n}(),$c=function(n){function e(t,r,i){var o=this;return(o=n.call(this,t,r,Qv(i))||this)._path=i,o.type="collection",o}return Ie(e,n),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new qn(this.firestore,null,new Ze(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Fo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cne(n,e){for(var t,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(n=wt(n),V4("collection","path",e),n instanceof m0)return Oz(t=Yt.fromString.apply(Yt,Ct([e],r))),new $c(n,null,t);if(!(n instanceof qn||n instanceof $c))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Oz(t=Yt.fromString.apply(Yt,Ct([n.path],r)).child(Yt.fromString(e))),new $c(n.firestore,null,t)}function v1(n,e){for(var t,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(n=wt(n),arguments.length===1&&(e=tte.u()),V4("doc","path",e),n instanceof m0)return Az(t=Yt.fromString.apply(Yt,Ct([e],r))),new qn(n,null,new Ze(t));if(!(n instanceof qn||n instanceof $c))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Az(t=n._path.child(Yt.fromString.apply(Yt,Ct([e],r)))),new qn(n.firestore,n instanceof $c?n.converter:null,new Ze(t))}function Sne(n,e){return n=wt(n),e=wt(e),(n instanceof qn||n instanceof $c)&&(e instanceof qn||e instanceof $c)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Ene(n,e){return n=wt(n),e=wt(e),n instanceof Fo&&e instanceof Fo&&n.firestore===e.firestore&&_b(n._query,e._query)&&n.converter===e.converter}var g8e=function(){function n(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new S4(this,"async_queue_retry"),this.Ic=function(){var r=g1();r&&me("AsyncQueue","Visibility state changed to "+r.visibilityState),e.Zi.Gi()};var t=g1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(n.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),n.prototype.enqueueAndForget=function(e){this.enqueue(e)},n.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},n.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=g1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Ic)}},n.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new Ui;return this.Rc(function(){return t._c&&t.Ec?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},n.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget(function(){return t.wc.push(e),t.bc()})},n.prototype.bc=function(){return U(this,void 0,void 0,function(){var e,t=this;return V(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Xd(e=r.sent()))throw e;return me("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return t.bc()}),r.label=5;case 5:return[2]}})})},n.prototype.Rc=function(e){var t=this,r=this.dc.then(function(){return t.gc=!0,e().catch(function(i){throw t.yc=i,t.gc=!1,br("INTERNAL UNHANDLED ERROR: ",function(o){var s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),s}(i)),i}).then(function(i){return t.gc=!1,i})});return this.dc=r,r},n.prototype.enqueueAfterDelay=function(e,t,r){var i=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var o=N5e.createAndSchedule(this,e,t,r,function(s){return i.vc(s)});return this.mc.push(o),o},n.prototype.Ac=function(){this.yc&&ze()},n.prototype.verifyOperationInProgress=function(){},n.prototype.Pc=function(){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}})})},n.prototype.Vc=function(e){for(var t=0,r=this.mc;t<r.length;t++)if(r[t].timerId===e)return!0;return!1},n.prototype.Sc=function(e){var t=this;return this.Pc().then(function(){t.mc.sort(function(s,a){return s.targetTimeMs-a.targetTimeMs});for(var r=0,i=t.mc;r<i.length;r++){var o=i[r];if(o.skipDelay(),e!=="all"&&o.timerId===e)break}return t.Pc()})},n.prototype.Dc=function(e){this.Tc.push(e)},n.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},n}();function Cv(n){return function(e,t){if(typeof e!="object"||e===null)return!1;for(var r=e,i=0,o=["next","error","complete"];i<o.length;i++){var s=o[i];if(s in r&&typeof r[s]=="function")return!0}return!1}(n)}var v8e=function(){function n(){this._progressObserver={},this._taskCompletionResolver=new Ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return n.prototype.onProgress=function(e,t,r){this._progressObserver={next:e,error:t,complete:r}},n.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},n.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},n.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},n.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},n.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},n}(),m8e=-1,cr=function(n){function e(t,r){var i=this;return(i=n.call(this,t,r)||this).type="firestore",i._queue=new g8e,i._persistenceKey="name"in t?t.name:"[DEFAULT]",i}return Ie(e,n),e.prototype._terminate=function(){return this._firestoreClient||Ine(this),this._firestoreClient.terminate()},e}(m0);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(n){return n._firestoreClient||Ine(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ine(n){var e,t=n._freezeSettings(),r=function(i,o,s,a){return new c8e(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,t);n._firestoreClient=new l8e(n._credentials,n._queue,r)}function Pz(n,e,t){var r=this,i=new Ui;return n.asyncQueue.enqueue(function(){return U(r,void 0,void 0,function(){var o;return V(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,_ne(n,t)];case 1:return s.sent(),[4,yne(n,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(a){return a.name==="FirebaseError"?a.code===Y.FAILED_PRECONDITION||a.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(o=s.sent()))throw o;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Fz(n){if(n._initialized||n._terminated)throw new le(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pu=function(){function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;++r)if(e[r].length===0)throw new le(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Na(e)}return n.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},n}(),Id=function(){function n(e){this._byteString=e}return n.fromBase64String=function(e){try{return new n(mo.fromBase64String(e))}catch(t){throw new le(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},n.fromUint8Array=function(e){return new n(mo.fromUint8Array(e))},n.prototype.toBase64=function(){return this._byteString.toBase64()},n.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},n.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},n.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},n}(),Jd=function(n){this._methodName=n},Ex=function(){function n(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(n.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},n.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},n.prototype._compareTo=function(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)},n}(),_8e=/^__.*__$/,y8e=function(){function n(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}return n.prototype.toMutation=function(e,t){return this.fieldMask!==null?new xf(e,this.data,this.fieldMask,t,this.fieldTransforms):new wb(e,this.data,t,this.fieldTransforms)},n}(),xne=function(){function n(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}return n.prototype.toMutation=function(e,t){return new xf(e,this.data,this.fieldMask,t,this.fieldTransforms)},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dne(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze()}}var Lne=function(){function n(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.R=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Cc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}return Object.defineProperty(n.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),n.prototype.xc=function(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},n.prototype.kc=function(e){var t,r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xc({path:r,Fc:!1});return i.$c(e),i},n.prototype.Oc=function(e){var t,r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xc({path:r,Fc:!1});return i.Cc(),i},n.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},n.prototype.Lc=function(e){return sE(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},n.prototype.contains=function(e){return this.fieldMask.find(function(t){return e.isPrefixOf(t)})!==void 0||this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})!==void 0},n.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},n.prototype.$c=function(e){if(e.length===0)throw this.Lc("Document fields must not be empty");if(Dne(this.Nc)&&_8e.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},n}(),b8e=function(){function n(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=r||Sb(e)}return n.prototype.Uc=function(e,t,r,i){return i===void 0&&(i=!1),new Lne({Nc:e,methodName:t,qc:r,path:Na.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},n}();function ep(n){var e=n._freezeSettings(),t=Sb(n._databaseId);return new b8e(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ix(n,e,t,r,i,o){o===void 0&&(o={});var s=n.Uc(o.merge||o.mergeFields?2:0,e,t,i);q4("Data must be an object, but it was:",s,r);var a,u,l=Nne(r,s);if(o.merge)a=new av(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var f=[],h=0,d=o.mergeFields;h<d.length;h++){var g=pM(e,d[h],t);if(!s.contains(g))throw new le(Y.INVALID_ARGUMENT,"Field '"+g+"' is specified in your field mask but missing from your input data.");One(f,g)||f.push(g)}a=new av(f),u=s.fieldTransforms.filter(function(v){return a.covers(v.field)})}else a=null,u=s.fieldTransforms;return new y8e(new ss(l),a,u)}var U4=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ie(e,n),e.prototype._toFieldTransform=function(t){if(t.Nc!==2)throw t.Nc===1?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Jd);function kne(n,e,t){return new Lne({Nc:3,qc:e.settings.qc,methodName:n._methodName,Fc:t},e.databaseId,e.R,e.ignoreUndefinedProperties)}var w8e=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ie(e,n),e.prototype._toFieldTransform=function(t){return new bb(t.path,new fv)},e.prototype.isEqual=function(t){return t instanceof e},e}(Jd),C8e=function(n){function e(t,r){var i=this;return(i=n.call(this,t)||this).Kc=r,i}return Ie(e,n),e.prototype._toFieldTransform=function(t){var r=kne(this,t,!0),i=this.Kc.map(function(s){return tp(s,r)}),o=new Sd(i);return new bb(t.path,o)},e.prototype.isEqual=function(t){return this===t},e}(Jd),S8e=function(n){function e(t,r){var i=this;return(i=n.call(this,t)||this).Kc=r,i}return Ie(e,n),e.prototype._toFieldTransform=function(t){var r=kne(this,t,!0),i=this.Kc.map(function(s){return tp(s,r)}),o=new Ed(i);return new bb(t.path,o)},e.prototype.isEqual=function(t){return this===t},e}(Jd),E8e=function(n){function e(t,r){var i=this;return(i=n.call(this,t)||this).Qc=r,i}return Ie(e,n),e.prototype._toFieldTransform=function(t){var r=new hv(t.R,gte(t.R,this.Qc));return new bb(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jd);function j4(n,e,t,r){var i=n.Uc(1,e,t);q4("Data must be an object, but it was:",i,r);var o=[],s=ss.empty();Yd(r,function(u,l){var f=$4(e,u,t);l=wt(l);var h=i.Oc(f);if(l instanceof U4)o.push(f);else{var d=tp(l,h);d!=null&&(o.push(f),s.set(f,d))}});var a=new av(o);return new xne(s,a,i.fieldTransforms)}function z4(n,e,t,r,i,o){var s=n.Uc(1,e,t),a=[pM(e,r,t)],u=[i];if(o.length%2!=0)throw new le(Y.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)a.push(pM(e,o[l])),u.push(o[l+1]);for(var f=[],h=ss.empty(),d=a.length-1;d>=0;--d)if(!One(f,a[d])){var g=a[d],v=u[d];v=wt(v);var m=s.Oc(g);if(v instanceof U4)f.push(g);else{var y=tp(v,m);y!=null&&(f.push(g),h.set(g,y))}}var b=new av(f);return new xne(h,b,s.fieldTransforms)}function Tne(n,e,t,r){return r===void 0&&(r=!1),tp(t,n.Uc(r?4:3,e))}function tp(n,e){if(Ane(n=wt(n)))return q4("Unsupported field value:",e,n),Nne(n,e);if(n instanceof Jd)return function(t,r){if(!Dne(r.Nc))throw r.Lc(t._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(t._methodName+"() is not currently supported inside arrays");var i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&e.Nc!==4)throw e.Lc("Nested arrays are not supported");return function(t,r){for(var i=[],o=0,s=0,a=t;s<a.length;s++){var u=tp(a[s],r.Mc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if((t=wt(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return gte(r.R,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){var i=Po.fromDate(t);return{timestampValue:d0(r.R,i)}}if(t instanceof Po)return i=new Po(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:d0(r.R,i)};if(t instanceof Ex)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Id)return{bytesValue:xte(r.R,t._byteString)};if(t instanceof qn){i=r.databaseId;var o=t.firestore._databaseId;if(!o.isEqual(i))throw r.Lc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:g4(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Lc("Unsupported field value: "+Sx(t))}(n,e)}function Nne(n,e){var t={};return rte(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yd(n,function(r,i){var o=tp(i,e.kc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Ane(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Po||n instanceof Ex||n instanceof Id||n instanceof qn||n instanceof Jd)}function q4(n,e,t){if(!Ane(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){var r=Sx(t);throw r==="an object"?e.Lc(n+" a custom object"):e.Lc(n+" "+r)}}function pM(n,e,t){if((e=wt(e))instanceof pu)return e._internalPath;if(typeof e=="string")return $4(n,e);throw sE("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}var I8e=new RegExp("[~\\*/\\[\\]]");function $4(n,e,t){if(e.search(I8e)>=0)throw sE("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",n,!1,void 0,t);try{return new(pu.bind.apply(pu,Ct([void 0],e.split("."))))()._internalPath}catch{throw sE("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",n,!1,void 0,t)}}function sE(n,e,t,r,i){var o=r&&!r.isEmpty(),s=i!==void 0,a="Function "+e+"() called with invalid data";t&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new le(Y.INVALID_ARGUMENT,(a+=". ")+n+u)}function One(n,e){return n.some(function(t){return t.isEqual(e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _0=function(){function n(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}return Object.defineProperty(n.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ref",{get:function(){return new qn(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),n.prototype.exists=function(){return this._document!==null},n.prototype.data=function(){if(this._document){if(this._converter){var e=new x8e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},n.prototype.get=function(e){if(this._document){var t=this._document.data.field(aE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}},n}(),x8e=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ie(e,n),e.prototype.data=function(){return n.prototype.data.call(this)},e}(_0);function aE(n,e){return typeof e=="string"?$4(n,e):e instanceof pu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wh=function(){function n(e,t){this.hasPendingWrites=e,this.fromCache=t}return n.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},n}(),vl=function(n){function e(t,r,i,o,s,a){var u=this;return(u=n.call(this,t,r,i,o,a)||this)._firestore=t,u._firestoreImpl=t,u.metadata=s,u}return Ie(e,n),e.prototype.exists=function(){return n.prototype.exists.call(this)},e.prototype.data=function(t){if(t===void 0&&(t={}),this._document){if(this._converter){var r=new sy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(aE("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},e}(_0),sy=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ie(e,n),e.prototype.data=function(t){return t===void 0&&(t={}),n.prototype.data.call(this,t)},e}(vl),yc=function(){function n(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wh(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(n.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),n.prototype.forEach=function(e,t){var r=this;this._snapshot.docs.forEach(function(i){e.call(t,new sy(r._firestore,r._userDataWriter,i.key,i,new Wh(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},n.prototype.docChanges=function(e){e===void 0&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var o=0;return r._snapshot.docChanges.map(function(a){return{type:"added",doc:new sy(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Wh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}})}var s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(a){return i||a.type!==3}).map(function(a){var u=new sy(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Wh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(f=(s=s.add(a.doc)).indexOf(a.doc.key)),{type:D8e(a.type),doc:u,oldIndex:l,newIndex:f}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},n}();function D8e(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze()}}function Rne(n,e){return n instanceof vl&&e instanceof vl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof yc&&e instanceof yc&&n._firestore===e._firestore&&Ene(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mne(n){if(QS(n)&&n.explicitOrderBy.length===0)throw new le(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ib=function(){};function rc(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,i=e;r<i.length;r++){var o=i[r];n=o._apply(n)}return n}var L8e=function(n){function e(t,r,i){var o=this;return(o=n.call(this)||this).jc=t,o.Wc=r,o.Gc=i,o.type="where",o}return Ie(e,n),e.prototype._apply=function(t){var r=ep(t.firestore),i=function(o,s,a,u,l,f,h){var d;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new le(Y.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+f+"' queries on FieldPath.documentId().");if(f==="in"||f==="not-in"){Uz(h,f);for(var g=[],v=0,m=h;v<m.length;v++){var y=m[v];g.push(Hz(u,o,y))}d={arrayValue:{values:g}}}else d=Hz(u,o,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Uz(h,f),d=Tne(a,"where",h,f==="in"||f==="not-in");var b=ls.create(l,f,d);return function(C,E){if(E.g()){var D=c4(C);if(D!==null&&!D.isEqual(E.field))throw new le(Y.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+D.toString()+"' and '"+E.field.toString()+"'");var k=l4(C);k!==null&&Fne(C,E.field,k)}var I=function(T,A){for(var M=0,L=T.filters;M<L.length;M++){var F=L[M];if(A.indexOf(F.op)>=0)return F.op}return null}(C,function(T){switch(T){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(E.op));if(I!==null)throw I===E.op?new le(Y.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+E.op.toString()+"' filter."):new le(Y.INVALID_ARGUMENT,"Invalid query. You cannot use '"+E.op.toString()+"' filters with '"+I.toString()+"' filters.")}(o,b),b}(t._query,0,r,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Fo(t.firestore,t.converter,function(o,s){var a=o.filters.concat([s]);return new Pl(o.path,o.collectionGroup,o.explicitOrderBy.slice(),a,o.limit,o.limitType,o.startAt,o.endAt)}(t._query,i))},e}(Ib),k8e=function(n){function e(t,r){var i=this;return(i=n.call(this)||this).jc=t,i.zc=r,i.type="orderBy",i}return Ie(e,n),e.prototype._apply=function(t){var r=function(i,o,s){if(i.startAt!==null)throw new le(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new le(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var a=new Lg(o,s);return function(u,l){if(l4(u)===null){var f=c4(u);f!==null&&Fne(u,f,l.field)}}(i,a),a}(t._query,this.jc,this.zc);return new Fo(t.firestore,t.converter,function(i,o){var s=i.explicitOrderBy.concat([o]);return new Pl(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))},e}(Ib),Bz=function(n){function e(t,r,i){var o=this;return(o=n.call(this)||this).type=t,o.Hc=r,o.Jc=i,o}return Ie(e,n),e.prototype._apply=function(t){return new Fo(t.firestore,t.converter,cte(t._query,this.Hc,this.Jc))},e}(Ib),Wz=function(n){function e(t,r,i){var o=this;return(o=n.call(this)||this).type=t,o.Yc=r,o.Xc=i,o}return Ie(e,n),e.prototype._apply=function(t){var r=Pne(t,this.type,this.Yc,this.Xc);return new Fo(t.firestore,t.converter,function(i,o){return new Pl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(t._query,r))},e}(Ib),Vz=function(n){function e(t,r,i){var o=this;return(o=n.call(this)||this).type=t,o.Yc=r,o.Xc=i,o}return Ie(e,n),e.prototype._apply=function(t){var r=Pne(t,this.type,this.Yc,this.Xc);return new Fo(t.firestore,t.converter,function(i,o){return new Pl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(t._query,r))},e}(Ib);function Pne(n,e,t,r){if(t[0]=wt(t[0]),t[0]instanceof _0)return function(o,s,a,u,l){if(!u)throw new le(Y.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+a+"().");for(var f=[],h=0,d=cv(o);h<d.length;h++){var g=d[h];if(g.field.isKeyField())f.push(YS(s,u.key));else{var v=u.data.field(g.field);if(s4(v))throw new le(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){var m=g.field.canonicalString();throw new le(Y.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+m+"' (used as the orderBy) does not exist.")}f.push(v)}}return new h0(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);var i=ep(n.firestore);return function(o,s,a,u,l,f){var h=o.explicitOrderBy;if(l.length>h.length)throw new le(Y.INVALID_ARGUMENT,"Too many arguments provided to "+u+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var d=[],g=0;g<l.length;g++){var v=l[g];if(h[g].field.isKeyField()){if(typeof v!="string")throw new le(Y.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+u+"(), but got a "+typeof v);if(!f4(o)&&v.indexOf("/")!==-1)throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+u+"() must be a plain document ID, but '"+v+"' contains a slash.");var m=o.path.child(Yt.fromString(v));if(!Ze.isDocumentKey(m))throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+u+"() must result in a valid document path, but '"+m+"' is not because it contains an odd number of segments.");var y=new Ze(m);d.push(YS(s,y))}else{var b=Tne(a,u,v);d.push(b)}}return new h0(d,f)}(n._query,n.firestore._databaseId,i,e,t,r)}function Hz(n,e,t){if(typeof(t=wt(t))=="string"){if(t==="")throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!f4(e)&&t.indexOf("/")!==-1)throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var r=e.path.child(Yt.fromString(t));if(!Ze.isDocumentKey(r))throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return YS(n,new Ze(r))}if(t instanceof qn)return YS(n,t._key);throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Sx(t)+".")}function Uz(n,e){if(!Array.isArray(n)||n.length===0)throw new le(Y.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(n.length>10)throw new le(Y.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Fne(n,e,t){if(!t.isEqual(e))throw new le(Y.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+t.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K4=function(){function n(){}return n.prototype.convertValue=function(e,t){switch(t===void 0&&(t="none"),Cd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ze()}},n.prototype.convertObject=function(e,t){var r=this,i={};return Yd(e.fields,function(o,s){i[o]=r.convertValue(s,t)}),i},n.prototype.convertGeoPoint=function(e){return new Ex(mr(e.latitude),mr(e.longitude))},n.prototype.convertArray=function(e,t){var r=this;return(e.values||[]).map(function(i){return r.convertValue(i,t)})},n.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var r=ote(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(c0(e));default:return null}},n.prototype.convertTimestamp=function(e){var t=of(e);return new Po(t.seconds,t.nanos)},n.prototype.convertDocumentKey=function(e,t){var r=Yt.fromString(e);nt(Mte(r));var i=new oE(r.get(1),r.get(3)),o=new Ze(r.popFirst(5));return i.isEqual(t)||br("Document "+o+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),o},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(n,e,t){return n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e}var T8e=function(n){function e(t){var r=this;return(r=n.call(this)||this).firestore=t,r}return Ie(e,n),e.prototype.convertBytes=function(t){return new Id(t)},e.prototype.convertReference=function(t){var r=this.convertDocumentKey(t,this.firestore._databaseId);return new qn(this.firestore,null,r)},e}(K4),N8e=function(){function n(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ep(e)}return n.prototype.set=function(e,t,r){this._verifyNotCommitted();var i=bc(e,this._firestore),o=xx(i.converter,t,r),s=Ix(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Pi.none())),this},n.prototype.update=function(e,t,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var s,a=bc(e,this._firestore);return s=typeof(t=wt(t))=="string"||t instanceof pu?z4(this._dataReader,"WriteBatch.update",a._key,t,r,i):j4(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(s.toMutation(a._key,Pi.exists(!0))),this},n.prototype.delete=function(e){this._verifyNotCommitted();var t=bc(e,this._firestore);return this._mutations=this._mutations.concat(new Cb(t._key,Pi.none())),this},n.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},n.prototype._verifyNotCommitted=function(){if(this._committed)throw new le(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n,e){if((n=wt(n)).firestore!==e)throw new le(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var od=function(n){function e(t){var r=this;return(r=n.call(this)||this).firestore=t,r}return Ie(e,n),e.prototype.convertBytes=function(t){return new Id(t)},e.prototype.convertReference=function(t){var r=this.convertDocumentKey(t,this.firestore._databaseId);return new qn(this.firestore,null,r)},e}(K4);function jz(n,e,t){n=Kt(n,qn);var r=Kt(n.firestore,cr),i=xx(n.converter,e,t);return xb(r,[Ix(ep(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Pi.none())])}function zz(n,e,t){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];n=Kt(n,qn);var o=Kt(n.firestore,cr),s=ep(o);return xb(o,[(typeof(e=wt(e))=="string"||e instanceof pu?z4(s,"updateDoc",n._key,e,t,r):j4(s,"updateDoc",n._key,e)).toMutation(n._key,Pi.exists(!0))])}function Bne(n){for(var e,t,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];n=wt(n);var s={includeMetadataChanges:!1},a=0;typeof i[a]!="object"||Cv(i[a])||(s=i[a],a++);var u,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(Cv(i[a])){var d=i[a];i[a]=(e=d.next)===null||e===void 0?void 0:e.bind(d),i[a+1]=(t=d.error)===null||t===void 0?void 0:t.bind(d),i[a+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}if(n instanceof qn)l=Kt(n.firestore,cr),f=Qv(n._key.path),u={next:function(m){i[a]&&i[a](gM(l,n,m))},error:i[a+1],complete:i[a+2]};else{var g=Kt(n,Fo);l=Kt(g.firestore,cr),f=g._query;var v=new od(l);u={next:function(m){i[a]&&i[a](new yc(l,v,g,m))},error:i[a+1],complete:i[a+2]},Mne(n._query)}return function(m,y,b,C){var E=this,D=new wx(C),k=new T4(y,D,b);return m.asyncQueue.enqueueAndForget(function(){return U(E,void 0,void 0,function(){var I;return V(this,function(T){switch(T.label){case 0:return I=D4,[4,wv(m)];case 1:return[2,I.apply(void 0,[T.sent(),k])]}})})}),function(){D.Wo(),m.asyncQueue.enqueueAndForget(function(){return U(E,void 0,void 0,function(){var I;return V(this,function(T){switch(T.label){case 0:return I=L4,[4,wv(m)];case 1:return[2,I.apply(void 0,[T.sent(),k])]}})})})}}(Zr(l),f,h,u)}function xb(n,e){return function(t,r){var i=this,o=new Ui;return t.asyncQueue.enqueueAndForget(function(){return U(i,void 0,void 0,function(){var s;return V(this,function(a){switch(a.label){case 0:return s=j5e,[4,W4(t)];case 1:return[2,s.apply(void 0,[a.sent(),r,o])]}})})}),o.promise}(Zr(n),e)}function gM(n,e,t){var r=t.docs.get(e._key),i=new od(n);return new vl(n,i,e._key,r,new Wh(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A8e=function(n){function e(t,r){var i=this;return(i=n.call(this,t,r)||this)._firestore=t,i}return Ie(e,n),e.prototype.get=function(t){var r=this,i=bc(t,this._firestore),o=new od(this._firestore);return n.prototype.get.call(this,t).then(function(s){return new vl(r._firestore,o,i._key,s._document,new Wh(!1,!1),i.converter)})},e}(function(){function n(e,t){this._firestore=e,this._transaction=t,this._dataReader=ep(e)}return n.prototype.get=function(e){var t=this,r=bc(e,this._firestore),i=new T8e(this._firestore);return this._transaction.lookup([r._key]).then(function(o){if(!o||o.length!==1)return ze();var s=o[0];if(s.isFoundDocument())return new _0(t._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new _0(t._firestore,i,r._key,null,r.converter);throw ze()})},n.prototype.set=function(e,t,r){var i=bc(e,this._firestore),o=xx(i.converter,t,r),s=Ix(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this},n.prototype.update=function(e,t,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s,a=bc(e,this._firestore);return s=typeof(t=wt(t))=="string"||t instanceof pu?z4(this._dataReader,"Transaction.update",a._key,t,r,i):j4(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,s),this},n.prototype.delete=function(e){var t=bc(e,this._firestore);return this._transaction.delete(t._key),this},n}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(){if(typeof Uint8Array>"u")throw new le(Y.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function $z(){if(typeof atob>"u")throw new le(Y.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Wne=function(){function n(e){this._delegate=e}return n.fromBase64String=function(e){return $z(),new n(Id.fromBase64String(e))},n.fromUint8Array=function(e){return qz(),new n(Id.fromUint8Array(e))},n.prototype.toBase64=function(){return $z(),this._delegate.toBase64()},n.prototype.toUint8Array=function(){return qz(),this._delegate.toUint8Array()},n.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},n.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},n}(),O8e=function(){function n(){}return n.prototype.enableIndexedDbPersistence=function(e,t){return function(r,i){Fz(r=Kt(r,cr));var o=Zr(r),s=r._freezeSettings(),a=new dM;return Pz(o,a,new mne(a,s.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(e._delegate,{forceOwnership:t})},n.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(t){Fz(t=Kt(t,cr));var r=Zr(t),i=t._freezeSettings(),o=new dM;return Pz(r,o,new o8e(o,i.cacheSizeBytes))}(e._delegate)},n.prototype.clearIndexedDbPersistence=function(e){return function(t){var r=this;if(t._initialized&&!t._terminated)throw new le(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new Ui;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return U(r,void 0,void 0,function(){var o;return V(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(a){return U(this,void 0,void 0,function(){var u;return V(this,function(l){switch(l.label){case 0:return gv.yt()?(u=a+"main",[4,gv.delete(u)]):[2,Promise.resolve()];case 1:return l.sent(),[2]}})})}(w4(t._databaseId,t._persistenceKey))];case 1:return s.sent(),i.resolve(),[3,3];case 2:return o=s.sent(),i.reject(o),[3,3];case 3:return[2]}})})}),i.promise}(e._delegate)},n}(),G4=function(){function n(e,t,r){var i=this;this._delegate=t,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},e instanceof oE||(this.tu=e)}return Object.defineProperty(n.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),n.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||l0("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},n.prototype.useEmulator=function(e,t,r){r===void 0&&(r={}),function(i,o,s,a){var u;a===void 0&&(a={});var l=(i=Kt(i,m0))._getSettings();if(l.host!=="firestore.googleapis.com"&&l.host!==o&&l0("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},l),{host:o+":"+s,ssl:!1})),a.mockUserToken){var f,h;if(typeof a.mockUserToken=="string")f=a.mockUserToken,h=ci.MOCK_USER;else{f=rP(a.mockUserToken,(u=i._app)===null||u===void 0?void 0:u.options.projectId);var d=a.mockUserToken.sub||a.mockUserToken.user_id;if(!d)throw new le(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ci(d)}i._credentials=new f8e(new bne(f,h))}}(this._delegate,e,t,r)},n.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return U(t,void 0,void 0,function(){var r,i;return V(this,function(o){switch(o.label){case 0:return[4,xz(e)];case 1:return r=o.sent(),[4,Dz(e)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!0),function(s){var a=Ee(s);return a.Or.delete(0),Eb(a)}(i))]}})})})}(Zr(Kt(this._delegate,cr)))},n.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return U(t,void 0,void 0,function(){var r,i;return V(this,function(o){switch(o.label){case 0:return[4,xz(e)];case 1:return r=o.sent(),[4,Dz(e)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!1),function(s){return U(this,void 0,void 0,function(){var a;return V(this,function(u){switch(u.label){case 0:return(a=Ee(s)).Or.add(0),[4,em(a)];case 1:return u.sent(),a.Br.set("Offline"),[2]}})})}(i))]}})})})}(Zr(Kt(this._delegate,cr)))},n.prototype.enablePersistence=function(e){var t=!1,r=!1;return e&&wne("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",r=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},n.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},n.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},n.prototype.waitForPendingWrites=function(){return function(e){var t=this,r=new Ui;return e.asyncQueue.enqueueAndForget(function(){return U(t,void 0,void 0,function(){var i;return V(this,function(o){switch(o.label){case 0:return i=K5e,[4,W4(e)];case 1:return[2,i.apply(void 0,[o.sent(),r])]}})})}),r.promise}(Zr(Kt(this._delegate,cr)))},n.prototype.onSnapshotsInSync=function(e){return function(t,r){return function(i,o){var s=this,a=new wx(o);return i.asyncQueue.enqueueAndForget(function(){return U(s,void 0,void 0,function(){var u;return V(this,function(l){switch(l.label){case 0:return u=function(f,h){Ee(f).Gr.add(h),h.next()},[4,wv(i)];case 1:return[2,u.apply(void 0,[l.sent(),a])]}})})}),function(){a.Wo(),i.asyncQueue.enqueueAndForget(function(){return U(s,void 0,void 0,function(){var u;return V(this,function(l){switch(l.label){case 0:return u=function(f,h){Ee(f).Gr.delete(h)},[4,wv(i)];case 1:return[2,u.apply(void 0,[l.sent(),a])]}})})})}}(Zr(t=Kt(t,cr)),Cv(r)?r:{next:r})}(this._delegate,e)},Object.defineProperty(n.prototype,"app",{get:function(){if(!this.tu)throw new le(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),n.prototype.collection=function(e){try{return new uE(this,Cne(this._delegate,e))}catch(t){throw oo(t,"collection()","Firestore.collection()")}},n.prototype.doc=function(e){try{return new sd(this,v1(this._delegate,e))}catch(t){throw oo(t,"doc()","Firestore.doc()")}},n.prototype.collectionGroup=function(e){try{return new Db(this,function(t,r){if(t=Kt(t,m0),V4("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new le(Y.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Fo(t,null,function(i){return new Pl(Yt.emptyPath(),i)}(r))}(this._delegate,e))}catch(t){throw oo(t,"collectionGroup()","Firestore.collectionGroup()")}},n.prototype.runTransaction=function(e){var t=this;return function(r,i){return function(o,s){var a=this,u=new Ui;return o.asyncQueue.enqueueAndForget(function(){return U(a,void 0,void 0,function(){var l;return V(this,function(f){switch(f.label){case 0:return[4,function(h){return Cx(h).then(function(d){return d.datastore})}(o)];case 1:return l=f.sent(),new u8e(o.asyncQueue,l,s,u).run(),[2]}})})}),u.promise}(Zr(r),function(o){return i(new A8e(r,o))})}(this._delegate,function(r){return e(new Vne(t,r))})},n.prototype.batch=function(){var e=this;return Zr(this._delegate),new Hne(new N8e(this._delegate,function(t){return xb(e._delegate,t)}))},n.prototype.loadBundle=function(e){throw new le(Y.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},n.prototype.namedQuery=function(e){throw new le(Y.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},n}(),Dx=function(n){function e(t){var r=this;return(r=n.call(this)||this).firestore=t,r}return Ie(e,n),e.prototype.convertBytes=function(t){return new Wne(new Id(t))},e.prototype.convertReference=function(t){var r=this.convertDocumentKey(t,this.firestore._databaseId);return sd.eu(r,this.firestore,null)},e}(K4);function R8e(n){var e;e=n,Ia.setLogLevel(e)}var Vne=function(){function n(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Dx(e)}return n.prototype.get=function(e){var t=this,r=Vh(e);return this._delegate.get(r).then(function(i){return new y0(t._firestore,new vl(t._firestore._delegate,t._userDataWriter,i._key,i._document,i.metadata,r.converter))})},n.prototype.set=function(e,t,r){var i=Vh(e);return r?(H4("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this},n.prototype.update=function(e,t,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=Vh(e);return arguments.length===2?this._delegate.update(a,t):(i=this._delegate).update.apply(i,Ct([a,t,r],o)),this},n.prototype.delete=function(e){var t=Vh(e);return this._delegate.delete(t),this},n}(),Hne=function(){function n(e){this._delegate=e}return n.prototype.set=function(e,t,r){var i=Vh(e);return r?(H4("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this},n.prototype.update=function(e,t,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=Vh(e);return arguments.length===2?this._delegate.update(a,t):(i=this._delegate).update.apply(i,Ct([a,t,r],o)),this},n.prototype.delete=function(e){var t=Vh(e);return this._delegate.delete(t),this},n.prototype.commit=function(){return this._delegate.commit()},n}(),Lx=function(){function n(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}return n.prototype.fromFirestore=function(e,t){var r=new sy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new b0(this._firestore,r),t??{})},n.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},n.nu=function(e,t){var r=n.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(t);return o||(o=new n(e,new Dx(e),t),i.set(t,o)),o},n}();Lx.su=new WeakMap;var sd=function(){function n(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Dx(e)}return n.iu=function(e,t,r){if(e.length%2!=0)throw new le(Y.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new n(t,new qn(t._delegate,r,new Ze(e)))},n.eu=function(e,t,r){return new n(t,new qn(t._delegate,r,e))},Object.defineProperty(n.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new uE(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),n.prototype.collection=function(e){try{return new uE(this.firestore,Cne(this._delegate,e))}catch(t){throw oo(t,"collection()","DocumentReference.collection()")}},n.prototype.isEqual=function(e){return(e=wt(e))instanceof qn&&Sne(this._delegate,e)},n.prototype.set=function(e,t){t=H4("DocumentReference.set",t);try{return t?jz(this._delegate,e,t):jz(this._delegate,e)}catch(r){throw oo(r,"setDoc()","DocumentReference.set()")}},n.prototype.update=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?zz(this._delegate,e):zz.apply(void 0,Ct([this._delegate,e,t],r))}catch(o){throw oo(o,"updateDoc()","DocumentReference.update()")}},n.prototype.delete=function(){return xb(Kt((e=this._delegate).firestore,cr),[new Cb(e._key,Pi.none())]);var e},n.prototype.onSnapshot=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=Une(t),o=jne(t,function(s){return new y0(e.firestore,new vl(e.firestore._delegate,e._userDataWriter,s._key,s._document,s.metadata,e._delegate.converter))});return Bne(this._delegate,i,o)},n.prototype.get=function(e){var t=this;return((e==null?void 0:e.source)==="cache"?function(r){r=Kt(r,qn);var i=Kt(r.firestore,cr),o=Zr(i),s=new od(i);return function(a,u){var l=this,f=new Ui;return a.asyncQueue.enqueueAndForget(function(){return U(l,void 0,void 0,function(){var h;return V(this,function(d){switch(d.label){case 0:return h=function(g,v,m){return U(this,void 0,void 0,function(){var y,b;return V(this,function(C){switch(C.label){case 0:return C.trys.push([0,2,,3]),[4,function(E,D){var k=Ee(E);return k.persistence.runTransaction("read document","readonly",function(I){return k.Mn.mn(I,D)})}(g,v)];case 1:return(b=C.sent()).isFoundDocument()?m.resolve(b):b.isNoDocument()?m.resolve(null):m.reject(new le(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return y=C.sent(),b=rm(y,"Failed to get document '"+v+" from cache"),m.reject(b),[3,3];case 3:return[2]}})})},[4,B4(a)];case 1:return[2,h.apply(void 0,[d.sent(),u,f])]}})})}),f.promise}(o,r._key).then(function(a){return new vl(i,s,r._key,a,new Wh(a!==null&&a.hasLocalMutations,!0),r.converter)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(r){r=Kt(r,qn);var i=Kt(r.firestore,cr);return Lz(Zr(i),r._key,{source:"server"}).then(function(o){return gM(i,r,o)})}(this._delegate):function(r){r=Kt(r,qn);var i=Kt(r.firestore,cr);return Lz(Zr(i),r._key).then(function(o){return gM(i,r,o)})}(this._delegate)).then(function(r){return new y0(t.firestore,new vl(t.firestore._delegate,t._userDataWriter,r._key,r._document,r.metadata,t._delegate.converter))})},n.prototype.withConverter=function(e){return new n(this.firestore,e?this._delegate.withConverter(Lx.nu(this.firestore,e)):this._delegate.withConverter(null))},n}();function oo(n,e,t){return n.message=n.message.replace(e,t),n}function Une(n){for(var e=0,t=n;e<t.length;e++){var r=t[e];if(typeof r=="object"&&!Cv(r))return r}return{}}function jne(n,e){var t,r,i;return{next:function(o){i.next&&i.next(e(o))},error:(t=(i=Cv(n[0])?n[0]:Cv(n[1])?n[1]:typeof n[0]=="function"?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]}).error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var y0=function(){function n(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(n.prototype,"ref",{get:function(){return new sd(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),n.prototype.data=function(e){return this._delegate.data(e)},n.prototype.get=function(e,t){return this._delegate.get(e,t)},n.prototype.isEqual=function(e){return Rne(this._delegate,e._delegate)},n}(),b0=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ie(e,n),e.prototype.data=function(t){return this._delegate.data(t)},e}(y0),Db=function(){function n(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Dx(e)}return n.prototype.where=function(e,t,r){try{return new n(this.firestore,rc(this._delegate,function(i,o,s){var a=o,u=aE("where",i);return new L8e(u,a,s)}(e,t,r)))}catch(i){throw oo(i,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.orderBy=function(e,t){try{return new n(this.firestore,rc(this._delegate,function(r,i){i===void 0&&(i="asc");var o=i,s=aE("orderBy",r);return new k8e(s,o)}(e,t)))}catch(r){throw oo(r,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.limit=function(e){try{return new n(this.firestore,rc(this._delegate,function(t){return Rz("limit",t),new Bz("limit",t,"F")}(e)))}catch(t){throw oo(t,"limit()","Query.limit()")}},n.prototype.limitToLast=function(e){try{return new n(this.firestore,rc(this._delegate,function(t){return Rz("limitToLast",t),new Bz("limitToLast",t,"L")}(e)))}catch(t){throw oo(t,"limitToLast()","Query.limitToLast()")}},n.prototype.startAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new n(this.firestore,rc(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Wz("startAt",r,!0)}).apply(void 0,e)))}catch(r){throw oo(r,"startAt()","Query.startAt()")}},n.prototype.startAfter=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new n(this.firestore,rc(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Wz("startAfter",r,!1)}).apply(void 0,e)))}catch(r){throw oo(r,"startAfter()","Query.startAfter()")}},n.prototype.endBefore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new n(this.firestore,rc(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Vz("endBefore",r,!0)}).apply(void 0,e)))}catch(r){throw oo(r,"endBefore()","Query.endBefore()")}},n.prototype.endAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new n(this.firestore,rc(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Vz("endAt",r,!1)}).apply(void 0,e)))}catch(r){throw oo(r,"endAt()","Query.endAt()")}},n.prototype.isEqual=function(e){return Ene(this._delegate,e._delegate)},n.prototype.get=function(e){var t=this;return((e==null?void 0:e.source)==="cache"?function(r){r=Kt(r,Fo);var i=Kt(r.firestore,cr),o=Zr(i),s=new od(i);return function(a,u){var l=this,f=new Ui;return a.asyncQueue.enqueueAndForget(function(){return U(l,void 0,void 0,function(){var h;return V(this,function(d){switch(d.label){case 0:return h=function(g,v,m){return U(this,void 0,void 0,function(){var y,b,C,E,D;return V(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,nE(g,v,!0)];case 1:return D=k.sent(),y=new hne(v,D.Bn),b=y._o(D.documents),C=y.applyChanges(b,!1),m.resolve(C.snapshot),[3,3];case 2:return E=k.sent(),D=rm(E,"Failed to execute query '"+v+" against cache"),m.reject(D),[3,3];case 3:return[2]}})})},[4,B4(a)];case 1:return[2,h.apply(void 0,[d.sent(),u,f])]}})})}),f.promise}(o,r._query).then(function(a){return new yc(i,s,r,a)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(r){r=Kt(r,Fo);var i=Kt(r.firestore,cr),o=Zr(i),s=new od(i);return kz(o,r._query,{source:"server"}).then(function(a){return new yc(i,s,r,a)})}(this._delegate):function(r){r=Kt(r,Fo);var i=Kt(r.firestore,cr),o=Zr(i),s=new od(i);return Mne(r._query),kz(o,r._query).then(function(a){return new yc(i,s,r,a)})}(this._delegate)).then(function(r){return new vM(t.firestore,new yc(t.firestore._delegate,t._userDataWriter,t._delegate,r._snapshot))})},n.prototype.onSnapshot=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=Une(t),o=jne(t,function(s){return new vM(e.firestore,new yc(e.firestore._delegate,e._userDataWriter,e._delegate,s._snapshot))});return Bne(this._delegate,i,o)},n.prototype.withConverter=function(e){return new n(this.firestore,e?this._delegate.withConverter(Lx.nu(this.firestore,e)):this._delegate.withConverter(null))},n}(),M8e=function(){function n(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(n.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doc",{get:function(){return new b0(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),n}(),vM=function(){function n(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(n.prototype,"query",{get:function(){return new Db(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new b0(e._firestore,t)})},enumerable:!1,configurable:!0}),n.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map(function(r){return new M8e(t._firestore,r)})},n.prototype.forEach=function(e,t){var r=this;this._delegate.forEach(function(i){e.call(t,new b0(r._firestore,i))})},n.prototype.isEqual=function(e){return Rne(this._delegate,e._delegate)},n}(),uE=function(n){function e(t,r){var i=this;return(i=n.call(this,t,r)||this).firestore=t,i._delegate=r,i}return Ie(e,n),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new sd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new sd(this.firestore,t===void 0?v1(this._delegate):v1(this._delegate,t))}catch(r){throw oo(r,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var r=this;return function(i,o){var s=Kt(i.firestore,cr),a=v1(i),u=xx(i.converter,o);return xb(s,[Ix(ep(i.firestore),"addDoc",a._key,u,i.converter!==null,{}).toMutation(a._key,Pi.exists(!1))]).then(function(){return a})}(this._delegate,t).then(function(i){return new sd(r.firestore,i)})},e.prototype.isEqual=function(t){return Sne(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Lx.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Db);function Vh(n){return Kt(n,qn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P8e=function(){function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(pu.bind.apply(pu,Ct([void 0],e)))}return n.documentId=function(){return new n(Na.keyField().canonicalString())},n.prototype.isEqual=function(e){return(e=wt(e))instanceof pu&&this._delegate._internalPath.isEqual(e._internalPath)},n}(),F8e=function(){function n(e){this._delegate=e}return n.serverTimestamp=function(){var e=new w8e("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new n(e)},n.delete=function(){var e=new U4("deleteField");return e._methodName="FieldValue.delete",new n(e)},n.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new C8e("arrayUnion",i)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new n(r)},n.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new S8e("arrayRemove",i)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new n(r)},n.increment=function(e){var t=function(r){return new E8e("increment",r)}(e);return t._methodName="FieldValue.increment",new n(t)},n.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8e(n){return function(e,t){var r=Zr(e=Kt(e,cr)),i=new v8e;return function(o,s,a,u){var l=this,f=function(h,d){return function(g,v){return new s8e(g,v)}(function(g,v){if(g instanceof Uint8Array)return Iz(g,v);if(g instanceof ArrayBuffer)return Iz(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(typeof h=="string"?new TextEncoder().encode(h):h),d)}(a,Sb(s));o.asyncQueue.enqueueAndForget(function(){return U(l,void 0,void 0,function(){var h;return V(this,function(d){switch(d.label){case 0:return h=i8e,[4,W4(o)];case 1:return h.apply(void 0,[d.sent(),f,u]),[2]}})})})}(r,e._databaseId,t,i),i}(this._delegate,n)}function W8e(n){var e,t,r=this;return(e=this._delegate,t=n,function(i,o){var s=this;return i.asyncQueue.enqueue(function(){return U(s,void 0,void 0,function(){var a;return V(this,function(u){switch(u.label){case 0:return a=function(l,f){var h=Ee(l);return h.persistence.runTransaction("Get named query","readonly",function(d){return h.Ke.getNamedQuery(d,f)})},[4,B4(i)];case 1:return[2,a.apply(void 0,[u.sent(),o])]}})})})}(Zr(e=Kt(e,cr)),t).then(function(i){return i?new Fo(e,null,i.query):null})).then(function(i){return i?new Db(r,i):null})}var V8e={Firestore:G4,GeoPoint:Ex,Timestamp:Po,Blob:Wne,Transaction:Vne,WriteBatch:Hne,DocumentReference:sd,DocumentSnapshot:y0,Query:Db,QueryDocumentSnapshot:b0,QuerySnapshot:vM,CollectionReference:uE,FieldPath:P8e,FieldValue:F8e,setLogLevel:R8e,CACHE_SIZE_UNLIMITED:m8e};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8e(n){(function(e,t){e.INTERNAL.registerComponent(new Vi("firestore",function(r){var i=r.getProvider("app").getImmediate();return t(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},V8e)))})(n,function(e,t){return new G4(e,new cr(e,t),new O8e)}),n.registerVersion("@firebase/firestore","2.4.1")}H8e(He);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8e(n){n.prototype.loadBundle=B8e,n.prototype.namedQuery=W8e}U8e(G4);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kz={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kg=function(n){Ie(e,n);function e(t,r,i){var o=n.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=t,o.details=i,o}return e}(Error);function j8e(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function z8e(n,e,t){var r=j8e(n),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if(typeof a=="string"){if(!Kz[a])return new kg("internal","internal");r=Kz[a],i=a}var u=s.message;typeof u=="string"&&(i=u),o=s.details,o!==void 0&&(o=t.decode(o))}}catch{}return r==="ok"?null:new kg(r,i,o)}var q8e=function(){function n(e,t){var r=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(function(i){return r.auth=i},function(){}),this.messaging||t.get().then(function(i){return r.messaging=i},function(){})}return n.prototype.getAuthToken=function(){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return e=t.sent(),e?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},n.prototype.getInstanceIdToken=function(){return U(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},n.prototype.getContext=function(){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return e=r.sent(),[4,this.getInstanceIdToken()];case 2:return t=r.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $8e="type.googleapis.com/google.protobuf.Int64Value",K8e="type.googleapis.com/google.protobuf.UInt64Value";function Gz(n,e){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}var G8e=function(){function n(){}return n.prototype.encode=function(e){var t=this;if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(function(r){return t.encode(r)});if(typeof e=="function"||typeof e=="object")return Gz(e,function(r){return t.encode(r)});throw new Error("Data cannot be encoded in JSON: "+e)},n.prototype.decode=function(e){var t=this;if(e==null)return e;if(e["@type"])switch(e["@type"]){case $8e:case K8e:{var r=Number(e.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+e);return r}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(i){return t.decode(i)}):typeof e=="function"||typeof e=="object"?Gz(e,function(i){return t.decode(i)}):e},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8e(n){var e,t=new Promise(function(r,i){e=setTimeout(function(){i(new kg("deadline-exceeded","deadline-exceeded"))},n)});return{timer:e,promise:t}}var Yz=function(){function n(e,t,r,i,o,s){var a=this;o===void 0&&(o="us-central1"),this.app_=e,this.appCheckProvider=i,this.fetchImpl=s,this.serializer=new G8e,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new q8e(t,r),this.cancelAllRequests=new Promise(function(l){a.deleteService=function(){return l()}});try{var u=new URL(o);this.customDomain=u.origin,this.region="us-central1"}catch{this.customDomain=null,this.region=o}}return Object.defineProperty(n.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),n.prototype._url=function(e){var t=this.app_.options.projectId;if(this.emulatorOrigin!==null){var r=this.emulatorOrigin;return r+"/"+t+"/"+this.region+"/"+e}return this.customDomain!==null?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},n.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},n.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},n.prototype.httpsCallable=function(e,t){var r=this;return function(i){return r.call(e,i,t||{})}},n.prototype.postJSON=function(e,t,r){return U(this,void 0,void 0,function(){var i,o,s;return V(this,function(a){switch(a.label){case 0:return r["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:i=a.sent(),i!==null&&(r["X-Firebase-AppCheck"]=i),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:r})];case 3:return o=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:s=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,o.json()];case 7:return s=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:o.status,json:s}]}})})},n.prototype.getAppCheckToken=function(){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return e=this.appCheckProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:return t=r.sent(),[2,t.token];case 2:return[2,null]}})})},n.prototype.call=function(e,t,r){return U(this,void 0,void 0,function(){var i,o,s,a,u,l,f,h,d,g,v,m;return V(this,function(y){switch(y.label){case 0:return i=this._url(e),t=this.serializer.encode(t),o={data:t},s={},[4,this.contextProvider.getContext()];case 1:return a=y.sent(),a.authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=r.timeout||7e4,l=Y8e(u),f=l.timer,h=l.promise,[4,Promise.race([Zz(f,this.postJSON(i,o,s)),h,Zz(f,this.cancelAllRequests)])];case 2:if(d=y.sent(),!d)throw new kg("cancelled","Firebase Functions instance was deleted.");if(g=z8e(d.status,d.json,this.serializer),g)throw g;if(!d.json)throw new kg("internal","Response is not valid JSON object.");if(v=d.json.data,typeof v>"u"&&(v=d.json.result),typeof v>"u")throw new kg("internal","Response is missing data field.");return m=this.serializer.decode(v),[2,{data:m}]}})})},n}();function Zz(n,e){return U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:return[4,e];case 1:return t=r.sent(),clearTimeout(n),[2,t]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z8e="functions";function X8e(n,e){var t={Functions:Yz};function r(i,o){var s=o.instanceIdentifier,a=i.getProvider("app").getImmediate(),u=i.getProvider("auth-internal"),l=i.getProvider("app-check-internal"),f=i.getProvider("messaging");return new Yz(a,u,f,l,s,e)}n.INTERNAL.registerComponent(new Vi(Z8e,r,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}var Q8e="@firebase/functions",J8e="0.6.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */X8e(He,fetch.bind(self));He.registerVersion(Q8e,J8e);function eUe(n){return Array.prototype.slice.call(n)}function zne(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function kx(n,e,t){var r,i=new Promise(function(o,s){r=n[e].apply(n,t),zne(r).then(o,s)});return i.request=r,i}function tUe(n,e,t){var r=kx(n,e,t);return r.then(function(i){if(i)return new w0(i,r.request)})}function im(n,e,t){t.forEach(function(r){Object.defineProperty(n.prototype,r,{get:function(){return this[e][r]},set:function(i){this[e][r]=i}})})}function Y4(n,e,t,r){r.forEach(function(i){i in t.prototype&&(n.prototype[i]=function(){return kx(this[e],i,arguments)})})}function Tx(n,e,t,r){r.forEach(function(i){i in t.prototype&&(n.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})})}function qne(n,e,t,r){r.forEach(function(i){i in t.prototype&&(n.prototype[i]=function(){return tUe(this[e],i,arguments)})})}function np(n){this._index=n}im(np,"_index",["name","keyPath","multiEntry","unique"]);Y4(np,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);qne(np,"_index",IDBIndex,["openCursor","openKeyCursor"]);function w0(n,e){this._cursor=n,this._request=e}im(w0,"_cursor",["direction","key","primaryKey","value"]);Y4(w0,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(w0.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),zne(e._request).then(function(r){if(r)return new w0(r,e._request)})})})});function Fu(n){this._store=n}Fu.prototype.createIndex=function(){return new np(this._store.createIndex.apply(this._store,arguments))};Fu.prototype.index=function(){return new np(this._store.index.apply(this._store,arguments))};im(Fu,"_store",["name","keyPath","indexNames","autoIncrement"]);Y4(Fu,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);qne(Fu,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);Tx(Fu,"_store",IDBObjectStore,["deleteIndex"]);function Lb(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}Lb.prototype.objectStore=function(){return new Fu(this._tx.objectStore.apply(this._tx,arguments))};im(Lb,"_tx",["objectStoreNames","mode"]);Tx(Lb,"_tx",IDBTransaction,["abort"]);function Nx(n,e,t){this._db=n,this.oldVersion=e,this.transaction=new Lb(t)}Nx.prototype.createObjectStore=function(){return new Fu(this._db.createObjectStore.apply(this._db,arguments))};im(Nx,"_db",["name","version","objectStoreNames"]);Tx(Nx,"_db",IDBDatabase,["deleteObjectStore","close"]);function Ax(n){this._db=n}Ax.prototype.transaction=function(){return new Lb(this._db.transaction.apply(this._db,arguments))};im(Ax,"_db",["name","version","objectStoreNames"]);Tx(Ax,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(n){[Fu,np].forEach(function(e){n in e.prototype&&(e.prototype[n.replace("open","iterate")]=function(){var t=eUe(arguments),r=t[t.length-1],i=this._store||this._index,o=i[n].apply(i,t.slice(0,-1));o.onsuccess=function(){r(o.result)}})})});[np,Fu].forEach(function(n){n.prototype.getAll||(n.prototype.getAll=function(e,t){var r=this,i=[];return new Promise(function(o){r.iterateCursor(e,function(s){if(!s){o(i);return}if(i.push(s.value),t!==void 0&&i.length==t){o(i);return}s.continue()})})})});function Z4(n,e,t){var r=kx(indexedDB,"open",[n,e]),i=r.request;return i&&(i.onupgradeneeded=function(o){t&&t(new Nx(i.result,o.oldVersion,i.transaction))}),r.then(function(o){return new Ax(o)})}function AN(n){return kx(indexedDB,"deleteDatabase",[n])}var nUe="@firebase/installations",$ne="0.4.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kne=1e4,Gne="w:"+$ne,Yne="FIS_v2",rUe="https://firebaseinstallations.googleapis.com/v1",iUe=60*60*1e3,oUe="installations",sUe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ic,aUe=(ic={},ic["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ic["not-registered"]="Firebase Installation is not registered.",ic["installation-not-found"]="Firebase Installation not found.",ic["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',ic["app-offline"]="Could not process request. Application offline.",ic["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",ic),Ll=new Nl(oUe,sUe,aUe);function Zne(n){return n instanceof Lv&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(n){var e=n.projectId;return rUe+"/projects/"+e+"/installations"}function Xne(n){return{token:n.token,requestStatus:2,expiresIn:uUe(n.expiresIn),creationTime:Date.now()}}function Q4(n,e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return t=i.sent(),r=t.error,[2,Ll.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function Qne(n){var e=n.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Jne(n,e){var t=e.refreshToken,r=Qne(n);return r.append("Authorization",lUe(t)),r}function J4(n){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return e=t.sent(),e.status>=500&&e.status<600?[2,n()]:[2,e]}})})}function uUe(n){return Number(n.replace("s","000"))}function lUe(n){return Yne+" "+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cUe(n,e){var t=e.fid;return U(this,void 0,void 0,function(){var r,i,o,s,a,u,l;return V(this,function(f){switch(f.label){case 0:return r=X4(n),i=Qne(n),o={fid:t,authVersion:Yne,appId:n.appId,sdkVersion:Gne},s={method:"POST",headers:i,body:JSON.stringify(o)},[4,J4(function(){return fetch(r,s)})];case 1:return a=f.sent(),a.ok?[4,a.json()]:[3,3];case 2:return u=f.sent(),l={fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:Xne(u.authToken)},[2,l];case 3:return[4,Q4("Create Installation",a)];case 4:throw f.sent()}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ere(n){return new Promise(function(e){setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fUe(n){var e=btoa(String.fromCharCode.apply(String,Ct([],hi(n))));return e.replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hUe=/^[cdef][\w-]{21}$/,mM="";function dUe(){try{var n=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(n),n[0]=112+n[0]%16;var t=pUe(n);return hUe.test(t)?t:mM}catch{return mM}}function pUe(n){var e=fUe(n);return e.substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(n){return n.appName+"!"+n.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sv=new Map;function tre(n,e){var t=om(n);nre(t,e),mUe(t,e)}function gUe(n,e){rre();var t=om(n),r=Sv.get(t);r||(r=new Set,Sv.set(t,r)),r.add(e)}function vUe(n,e){var t=om(n),r=Sv.get(t);r&&(r.delete(e),r.size===0&&Sv.delete(t),ire())}function nre(n,e){var t,r,i=Sv.get(n);if(i)try{for(var o=ei(i),s=o.next();!s.done;s=o.next()){var a=s.value;a(e)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}function mUe(n,e){var t=rre();t&&t.postMessage({key:n,fid:e}),ire()}var Hh=null;function rre(){return!Hh&&"BroadcastChannel"in self&&(Hh=new BroadcastChannel("[Firebase] FID Change"),Hh.onmessage=function(n){nre(n.data.key,n.data.fid)}),Hh}function ire(){Sv.size===0&&Hh&&(Hh.close(),Hh=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _Ue="firebase-installations-database",yUe=1,xd="firebase-installations-store",ON=null;function eB(){return ON||(ON=Z4(_Ue,yUe,function(n){switch(n.oldVersion){case 0:n.createObjectStore(xd)}})),ON}function lE(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s;return V(this,function(a){switch(a.label){case 0:return t=om(n),[4,eB()];case 1:return r=a.sent(),i=r.transaction(xd,"readwrite"),o=i.objectStore(xd),[4,o.get(t)];case 2:return s=a.sent(),[4,o.put(e,t)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),(!s||s.fid!==e.fid)&&tre(n,e.fid),[2,e]}})})}function tB(n){return U(this,void 0,void 0,function(){var e,t,r;return V(this,function(i){switch(i.label){case 0:return e=om(n),[4,eB()];case 1:return t=i.sent(),r=t.transaction(xd,"readwrite"),[4,r.objectStore(xd).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function kb(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s,a;return V(this,function(u){switch(u.label){case 0:return t=om(n),[4,eB()];case 1:return r=u.sent(),i=r.transaction(xd,"readwrite"),o=i.objectStore(xd),[4,o.get(t)];case 2:return s=u.sent(),a=e(s),a!==void 0?[3,4]:[4,o.delete(t)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,t)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),a&&(!s||s.fid!==a.fid)&&tre(n,a.fid),[2,a]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(n){return U(this,void 0,void 0,function(){var e,t,r;return V(this,function(i){switch(i.label){case 0:return[4,kb(n,function(o){var s=bUe(o),a=wUe(n,s);return e=a.registrationPromise,a.installationEntry})];case 1:return t=i.sent(),t.fid!==mM?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:t,registrationPromise:e}]}})})}function bUe(n){var e=n||{fid:dUe(),registrationStatus:0};return ore(e)}function wUe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){var t=Promise.reject(Ll.create("app-offline"));return{installationEntry:e,registrationPromise:t}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=CUe(n,r);return{installationEntry:r,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:SUe(n)}:{installationEntry:e}}function CUe(n,e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,cUe(n,e)];case 1:return t=i.sent(),[2,lE(n,t)];case 2:return r=i.sent(),Zne(r)&&r.customData.serverCode===409?[4,tB(n)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,lE(n,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function SUe(n){return U(this,void 0,void 0,function(){var e,t,r,i;return V(this,function(o){switch(o.label){case 0:return[4,Xz(n)];case 1:e=o.sent(),o.label=2;case 2:return e.registrationStatus!==1?[3,5]:[4,ere(100)];case 3:return o.sent(),[4,Xz(n)];case 4:return e=o.sent(),[3,2];case 5:return e.registrationStatus!==0?[3,7]:[4,nB(n)];case 6:return t=o.sent(),r=t.installationEntry,i=t.registrationPromise,i?[2,i]:[2,r];case 7:return[2,e]}})})}function Xz(n){return kb(n,function(e){if(!e)throw Ll.create("installation-not-found");return ore(e)})}function ore(n){return EUe(n)?{fid:n.fid,registrationStatus:0}:n}function EUe(n){return n.registrationStatus===1&&n.registrationTime+Kne<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IUe(n,e){var t=n.appConfig,r=n.platformLoggerProvider;return U(this,void 0,void 0,function(){var i,o,s,a,u,l,f,h;return V(this,function(d){switch(d.label){case 0:return i=xUe(t,e),o=Jne(t,e),s=r.getImmediate({optional:!0}),s&&o.append("x-firebase-client",s.getPlatformInfoString()),a={installation:{sdkVersion:Gne}},u={method:"POST",headers:o,body:JSON.stringify(a)},[4,J4(function(){return fetch(i,u)})];case 1:return l=d.sent(),l.ok?[4,l.json()]:[3,3];case 2:return f=d.sent(),h=Xne(f),[2,h];case 3:return[4,Q4("Generate Auth Token",l)];case 4:throw d.sent()}})})}function xUe(n,e){var t=e.fid;return X4(n)+"/"+t+"/authTokens:generate"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(n,e){return e===void 0&&(e=!1),U(this,void 0,void 0,function(){var t,r,i,o;return V(this,function(s){switch(s.label){case 0:return[4,kb(n.appConfig,function(a){if(!sre(a))throw Ll.create("not-registered");var u=a.authToken;if(!e&&kUe(u))return a;if(u.requestStatus===1)return t=DUe(n,e),a;if(!navigator.onLine)throw Ll.create("app-offline");var l=NUe(a);return t=LUe(n,l),l})];case 1:return r=s.sent(),t?[4,t]:[3,3];case 2:return o=s.sent(),[3,4];case 3:o=r.authToken,s.label=4;case 4:return i=o,[2,i]}})})}function DUe(n,e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:return[4,Qz(n.appConfig)];case 1:t=i.sent(),i.label=2;case 2:return t.authToken.requestStatus!==1?[3,5]:[4,ere(100)];case 3:return i.sent(),[4,Qz(n.appConfig)];case 4:return t=i.sent(),[3,2];case 5:return r=t.authToken,r.requestStatus===0?[2,rB(n,e)]:[2,r]}})})}function Qz(n){return kb(n,function(e){if(!sre(e))throw Ll.create("not-registered");var t=e.authToken;return AUe(t)?Je(Je({},e),{authToken:{requestStatus:0}}):e})}function LUe(n,e){return U(this,void 0,void 0,function(){var t,i,r,i;return V(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,IUe(n,e)];case 1:return t=o.sent(),i=Je(Je({},e),{authToken:t}),[4,lE(n.appConfig,i)];case 2:return o.sent(),[2,t];case 3:return r=o.sent(),Zne(r)&&(r.customData.serverCode===401||r.customData.serverCode===404)?[4,tB(n.appConfig)]:[3,5];case 4:return o.sent(),[3,7];case 5:return i=Je(Je({},e),{authToken:{requestStatus:0}}),[4,lE(n.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}function sre(n){return n!==void 0&&n.registrationStatus===2}function kUe(n){return n.requestStatus===2&&!TUe(n)}function TUe(n){var e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+iUe}function NUe(n){var e={requestStatus:1,requestTime:Date.now()};return Je(Je({},n),{authToken:e})}function AUe(n){return n.requestStatus===1&&n.requestTime+Kne<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OUe(n){return U(this,void 0,void 0,function(){var e,t,r;return V(this,function(i){switch(i.label){case 0:return[4,nB(n.appConfig)];case 1:return e=i.sent(),t=e.installationEntry,r=e.registrationPromise,r?r.catch(console.error):rB(n).catch(console.error),[2,t.fid]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RUe(n,e){return e===void 0&&(e=!1),U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:return[4,MUe(n.appConfig)];case 1:return r.sent(),[4,rB(n,e)];case 2:return t=r.sent(),[2,t.token]}})})}function MUe(n){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return[4,nB(n)];case 1:return e=t.sent().registrationPromise,e?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PUe(n,e){return U(this,void 0,void 0,function(){var t,r,i,o;return V(this,function(s){switch(s.label){case 0:return t=FUe(n,e),r=Jne(n,e),i={method:"DELETE",headers:r},[4,J4(function(){return fetch(t,i)})];case 1:return o=s.sent(),o.ok?[3,3]:[4,Q4("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function FUe(n,e){var t=e.fid;return X4(n)+"/"+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BUe(n){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return e=n.appConfig,[4,kb(e,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(t=r.sent(),!t)return[3,6];if(t.registrationStatus!==1)return[3,2];throw Ll.create("delete-pending-registration");case 2:if(t.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw Ll.create("app-offline");case 3:return[4,PUe(e,t)];case 4:return r.sent(),[4,tB(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WUe(n,e){var t=n.appConfig;return gUe(t,e),function(){vUe(t,e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VUe(n){var e,t;if(!n||!n.options)throw RN("App Configuration");if(!n.name)throw RN("App Name");var r=["projectId","apiKey","appId"];try{for(var i=ei(r),o=i.next();!o.done;o=i.next()){var s=o.value;if(!n.options[s])throw RN(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function RN(n){return Ll.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HUe(n){var e="installations";n.INTERNAL.registerComponent(new Vi(e,function(t){var r=t.getProvider("app").getImmediate(),i=VUe(r),o=t.getProvider("platform-logger"),s={appConfig:i,platformLoggerProvider:o},a={app:r,getId:function(){return OUe(s)},getToken:function(u){return RUe(s,u)},delete:function(){return BUe(s)},onIdChange:function(u){return WUe(s,u)}};return a},"PUBLIC")),n.registerVersion(nUe,$ne)}HUe(He);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr,UUe=(kr={},kr["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',kr["only-available-in-window"]="This method is available in a Window context.",kr["only-available-in-sw"]="This method is available in a service worker context.",kr["permission-default"]="The notification permission was not granted and dismissed instead.",kr["permission-blocked"]="The notification permission was not granted and blocked instead.",kr["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",kr["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",kr["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",kr["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",kr["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",kr["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",kr["token-update-no-token"]="FCM returned no token when updating the user to push.",kr["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",kr["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",kr["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",kr["invalid-vapid-key"]="The public VAPID key must be a string.",kr["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",kr),fn=new Nl("messaging","Messaging",UUe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jUe="/firebase-messaging-sw.js",zUe="/firebase-cloud-messaging-push-scope",cE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qUe="https://fcmregistrations.googleapis.com/v1",are="FCM_MSG",$Ue="FirebaseMessaging: ",KUe="google.c.a.e",ure="google.c.a.c_id",GUe="google.c.a.ts",YUe="google.c.a.c_l",ZUe=1e3,XUe=3e3;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Dd;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Dd||(Dd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(n){var e=new Uint8Array(n),t=btoa(String.fromCharCode.apply(String,Ct([],hi(e))));return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function QUe(n){for(var e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MN="fcm_token_details_db",JUe=5,Jz="fcm_token_object_Store";function e9e(n){return U(this,void 0,void 0,function(){var e,t,r,i,o=this;return V(this,function(s){switch(s.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=s.sent(),t=e.map(function(a){return a.name}),!t.includes(MN))return[2,null];s.label=2;case 2:return r=null,[4,Z4(MN,JUe,function(a){return U(o,void 0,void 0,function(){var u,l,f,f,f,h;return V(this,function(d){switch(d.label){case 0:return a.oldVersion<2?[2]:a.objectStoreNames.contains(Jz)?(u=a.transaction.objectStore(Jz),[4,u.index("fcmSenderId").get(n)]):[2];case 1:return l=d.sent(),[4,u.clear()];case 2:if(d.sent(),!l)return[2];if(a.oldVersion===2){if(f=l,!f.auth||!f.p256dh||!f.endpoint)return[2];r={token:f.fcmToken,createTime:(h=f.createTime)!==null&&h!==void 0?h:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:Qu(f.vapidKey)}}}else a.oldVersion===3?(f=l,r={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Qu(f.auth),p256dh:Qu(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Qu(f.vapidKey)}}):a.oldVersion===4&&(f=l,r={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Qu(f.auth),p256dh:Qu(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Qu(f.vapidKey)}});return[2]}})})})];case 3:return i=s.sent(),i.close(),[4,AN(MN)];case 4:return s.sent(),[4,AN("fcm_vapid_details_db")];case 5:return s.sent(),[4,AN("undefined")];case 6:return s.sent(),[2,t9e(r)?r:null]}})})}function t9e(n){if(!n||!n.subscriptionOptions)return!1;var e=n.subscriptionOptions;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n9e="firebase-messaging-database",r9e=1,Ld="firebase-messaging-store",PN=null;function iB(){return PN||(PN=Z4(n9e,r9e,function(n){switch(n.oldVersion){case 0:n.createObjectStore(Ld)}})),PN}function fE(n){return U(this,void 0,void 0,function(){var e,t,r,i;return V(this,function(o){switch(o.label){case 0:return e=sB(n),[4,iB()];case 1:return t=o.sent(),[4,t.transaction(Ld).objectStore(Ld).get(e)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,e9e(n.appConfig.senderId)];case 4:return i=o.sent(),i?[4,oB(n,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}})})}function oB(n,e){return U(this,void 0,void 0,function(){var t,r,i;return V(this,function(o){switch(o.label){case 0:return t=sB(n),[4,iB()];case 1:return r=o.sent(),i=r.transaction(Ld,"readwrite"),[4,i.objectStore(Ld).put(e,t)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function i9e(n){return U(this,void 0,void 0,function(){var e,t,r;return V(this,function(i){switch(i.label){case 0:return e=sB(n),[4,iB()];case 1:return t=i.sent(),r=t.transaction(Ld,"readwrite"),[4,r.objectStore(Ld).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function sB(n){var e=n.appConfig;return e.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9e(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s,a,u;return V(this,function(l){switch(l.label){case 0:return[4,uB(n)];case 1:t=l.sent(),r=cre(e),i={method:"POST",headers:t,body:JSON.stringify(r)},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(aB(n.appConfig),i)];case 3:return s=l.sent(),[4,s.json()];case 4:return o=l.sent(),[3,6];case 5:throw a=l.sent(),fn.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,fn.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw fn.create("token-subscribe-no-token");return[2,o.token]}})})}function s9e(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s,a,u;return V(this,function(l){switch(l.label){case 0:return[4,uB(n)];case 1:t=l.sent(),r=cre(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(aB(n.appConfig)+"/"+e.token,i)];case 3:return s=l.sent(),[4,s.json()];case 4:return o=l.sent(),[3,6];case 5:throw a=l.sent(),fn.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,fn.create("token-update-failed",{errorInfo:u});if(!o.token)throw fn.create("token-update-no-token");return[2,o.token]}})})}function lre(n,e){return U(this,void 0,void 0,function(){var t,r,i,o,s,a;return V(this,function(u){switch(u.label){case 0:return[4,uB(n)];case 1:t=u.sent(),r={method:"DELETE",headers:t},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(aB(n.appConfig)+"/"+e,r)];case 3:return i=u.sent(),[4,i.json()];case 4:if(o=u.sent(),o.error)throw s=o.error.message,fn.create("token-unsubscribe-failed",{errorInfo:s});return[3,6];case 5:throw a=u.sent(),fn.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}})})}function aB(n){var e=n.projectId;return qUe+"/projects/"+e+"/registrations"}function uB(n){var e=n.appConfig,t=n.installations;return U(this,void 0,void 0,function(){var r;return V(this,function(i){switch(i.label){case 0:return[4,t.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function cre(n){var e=n.p256dh,t=n.auth,r=n.endpoint,i=n.vapidKey,o={web:{endpoint:r,auth:t,p256dh:e}};return i!==cE&&(o.web.applicationPubKey=i),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a9e=7*24*60*60*1e3;function _M(n,e,t){return U(this,void 0,void 0,function(){var r,i,o,s;return V(this,function(a){switch(a.label){case 0:if(Notification.permission!=="granted")throw fn.create("permission-blocked");return[4,l9e(e,t)];case 1:return r=a.sent(),[4,fE(n)];case 2:return i=a.sent(),o={vapidKey:t,swScope:e.scope,endpoint:r.endpoint,auth:Qu(r.getKey("auth")),p256dh:Qu(r.getKey("p256dh"))},i?[3,3]:[2,e7(n,o)];case 3:if(c9e(i.subscriptionOptions,o))return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,lre(n,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,e7(n,o)];case 8:return Date.now()>=i.createTime+a9e?[2,u9e({token:i.token,createTime:Date.now(),subscriptionOptions:o},n,e)]:[2,i.token];case 9:return[2]}})})}function ay(n,e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:return[4,fE(n)];case 1:return t=i.sent(),t?[4,lre(n,t.token)]:[3,4];case 2:return i.sent(),[4,i9e(n)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function u9e(n,e,t){return U(this,void 0,void 0,function(){var r,i,o;return V(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,s9e(e,n)];case 1:return r=s.sent(),i=Je(Je({},n),{token:r,createTime:Date.now()}),[4,oB(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,ay(e,t)];case 4:throw s.sent(),o;case 5:return[2]}})})}function e7(n,e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:return[4,o9e(n,e)];case 1:return t=i.sent(),r={token:t,createTime:Date.now(),subscriptionOptions:e},[4,oB(n,r)];case 2:return i.sent(),[2,r.token]}})})}function l9e(n,e){return U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return t=r.sent(),t?[2,t]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:QUe(e)})]}})})}function c9e(n,e){var t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9e(n){var e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcm_message_id};return h9e(e,n),d9e(e,n),p9e(e,n),e}function h9e(n,e){if(e.notification){n.notification={};var t=e.notification.title;t&&(n.notification.title=t);var r=e.notification.body;r&&(n.notification.body=r);var i=e.notification.image;i&&(n.notification.image=i)}}function d9e(n,e){e.data&&(n.data=e.data)}function p9e(n,e){if(e.fcmOptions){n.fcmOptions={};var t=e.fcmOptions.link;t&&(n.fcmOptions.link=t);var r=e.fcmOptions.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fre(n){return typeof n=="object"&&!!n&&ure in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(n){return new Promise(function(e){setTimeout(e,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g9e=function(){function n(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(t.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(t.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(t.onNotificationClick(r))})}return Object.defineProperty(n.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),n.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||typeof e!="function")throw fn.create("invalid-bg-handler");this.bgMessageHandler=e},n.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},n.prototype.getToken=function(){var e,t;return U(this,void 0,void 0,function(){var r;return V(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,fE(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(t=(e=r==null?void 0:r.subscriptionOptions)===null||e===void 0?void 0:e.vapidKey)!==null&&t!==void 0?t:cE,i.label=2;case 2:return[2,_M(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},n.prototype.deleteToken=function(){return ay(this.firebaseDependencies,self.registration)},n.prototype.requestPermission=function(){throw fn.create("only-available-in-window")},n.prototype.usePublicVapidKey=function(e){if(this.vapidKey!==null)throw fn.create("use-vapid-key-after-get-token");if(typeof e!="string"||e.length===0)throw fn.create("invalid-vapid-key");this.vapidKey=e},n.prototype.useServiceWorker=function(){throw fn.create("only-available-in-window")},n.prototype.onMessage=function(){throw fn.create("only-available-in-window")},n.prototype.onTokenRefresh=function(){throw fn.create("only-available-in-window")},n.prototype.onPush=function(e){return U(this,void 0,void 0,function(){var t,r,i,o;return V(this,function(s){switch(s.label){case 0:return t=m9e(e),t?[4,hre()]:(console.debug($Ue+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return r=s.sent(),y9e(r)?[2,b9e(r,t)]:(i=!1,t.notification?[4,w9e(v9e(t))]:[3,3]);case 2:s.sent(),i=!0,s.label=3;case 3:return i===!0&&this.isOnBackgroundMessageUsed===!1?[2]:(this.bgMessageHandler&&(o=f9e(t),typeof this.bgMessageHandler=="function"?this.bgMessageHandler(o):this.bgMessageHandler.next(o)),[4,t7(ZUe)]);case 4:return s.sent(),[2]}})})},n.prototype.onSubChange=function(e){var t,r;return U(this,void 0,void 0,function(){var i,o;return V(this,function(s){switch(s.label){case 0:return i=e.newSubscription,i?[3,2]:[4,ay(this.firebaseDependencies,self.registration)];case 1:return s.sent(),[2];case 2:return[4,fE(this.firebaseDependencies)];case 3:return o=s.sent(),[4,ay(this.firebaseDependencies,self.registration)];case 4:return s.sent(),[4,_M(this.firebaseDependencies,self.registration,(r=(t=o==null?void 0:o.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&r!==void 0?r:cE)];case 5:return s.sent(),[2]}})})},n.prototype.onNotificationClick=function(e){var t,r;return U(this,void 0,void 0,function(){var i,o,s,a,u;return V(this,function(l){switch(l.label){case 0:if(i=(r=(t=e.notification)===null||t===void 0?void 0:t.data)===null||r===void 0?void 0:r[are],i){if(e.action)return[2]}else return[2];return e.stopImmediatePropagation(),e.notification.close(),o=C9e(i),o?(s=new URL(o,self.location.href),a=new URL(self.location.origin),s.host!==a.host?[2]:[4,_9e(s)]):[2];case 1:return u=l.sent(),u?[3,4]:[4,self.clients.openWindow(o)];case 2:return u=l.sent(),[4,t7(XUe)];case 3:return l.sent(),[3,6];case 4:return[4,u.focus()];case 5:u=l.sent(),l.label=6;case 6:return u?(i.messageType=Dd.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,u.postMessage(i)]):[2]}})})},n}();function v9e(n){var e,t=Je({},n.notification);return t.data=(e={},e[are]=n,e),t}function m9e(n){var e=n.data;if(!e)return null;try{return e.json()}catch{return null}}function _9e(n){return U(this,void 0,void 0,function(){var e,t,r,i,o,s,a;return V(this,function(u){switch(u.label){case 0:return[4,hre()];case 1:e=u.sent();try{for(t=ei(e),r=t.next();!r.done;r=t.next())if(i=r.value,o=new URL(i.url,self.location.href),n.host===o.host)return[2,i]}catch(l){s={error:l}}finally{try{r&&!r.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}return[2,null]}})})}function y9e(n){return n.some(function(e){return e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://")})}function b9e(n,e){var t,r;e.isFirebaseMessaging=!0,e.messageType=Dd.PUSH_RECEIVED;try{for(var i=ei(n),o=i.next();!o.done;o=i.next()){var s=o.value;s.postMessage(e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}function hre(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function w9e(n){var e,t=n.actions,r=Notification.maxActions;return t&&r&&t.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification((e=n.title)!==null&&e!==void 0?e:"",n)}function C9e(n){var e,t,r,i=(t=(e=n.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&t!==void 0?t:(r=n.notification)===null||r===void 0?void 0:r.click_action;return i||(fre(n.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S9e=function(){function n(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return t.messageEventListener(r)})}return Object.defineProperty(n.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),n.prototype.messageEventListener=function(e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:return t=e.data,t.isFirebaseMessaging?(this.onMessageCallback&&t.messageType===Dd.PUSH_RECEIVED&&(typeof this.onMessageCallback=="function"?this.onMessageCallback(I9e(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),r=t.data,fre(r)&&r[KUe]==="1"?[4,this.logEvent(t.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.getVapidKey=function(){return this.vapidKey},n.prototype.getSwReg=function(){return this.swRegistration},n.prototype.getToken=function(e){return U(this,void 0,void 0,function(){return V(this,function(t){switch(t.label){case 0:return Notification.permission!=="default"?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if(Notification.permission!=="granted")throw fn.create("permission-blocked");return[4,this.updateVapidKey(e==null?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(e==null?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,_M(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},n.prototype.updateVapidKey=function(e){return U(this,void 0,void 0,function(){return V(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=cE),[2]})})},n.prototype.updateSwReg=function(e){return U(this,void 0,void 0,function(){return V(this,function(t){switch(t.label){case 0:return!e&&!this.swRegistration?[4,this.registerDefaultSw()]:[3,2];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},n.prototype.registerDefaultSw=function(){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register(jUe,{scope:zUe})];case 1:return e.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw t=r.sent(),fn.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}})})},n.prototype.deleteToken=function(){return U(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,ay(this.firebaseDependencies,this.swRegistration)]}})})},n.prototype.requestPermission=function(){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(e=t.sent(),e==="granted")return[2];throw e==="denied"?fn.create("permission-blocked"):fn.create("permission-default")}})})},n.prototype.usePublicVapidKey=function(e){if(this.vapidKey!==null)throw fn.create("use-vapid-key-after-get-token");if(typeof e!="string"||e.length===0)throw fn.create("invalid-vapid-key");this.vapidKey=e},n.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");if(this.swRegistration)throw fn.create("use-sw-after-get-token");this.swRegistration=e},n.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},n.prototype.setBackgroundMessageHandler=function(){throw fn.create("only-available-in-sw")},n.prototype.onBackgroundMessage=function(){throw fn.create("only-available-in-sw")},n.prototype.onTokenRefresh=function(){return function(){}},n.prototype.logEvent=function(e,t){return U(this,void 0,void 0,function(){var r,i;return V(this,function(o){switch(o.label){case 0:return r=E9e(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=o.sent(),i.logEvent(r,{message_id:t[ure],message_name:t[YUe],message_time:t[GUe],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},n}();function E9e(n){switch(n){case Dd.NOTIFICATION_CLICKED:return"notification_open";case Dd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function I9e(n){return delete n.messageType,delete n.isFirebaseMessaging,n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9e(n){var e,t;if(!n||!n.options)throw FN("App Configuration Object");if(!n.name)throw FN("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=n.options;try{for(var o=ei(r),s=o.next();!s.done;s=o.next()){var a=s.value;if(!i[a])throw FN(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return{appName:n.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function FN(n){return fn.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D9e="messaging";function L9e(n){var e=n.getProvider("app").getImmediate(),t=x9e(e),r=n.getProvider("installations").getImmediate(),i=n.getProvider("analytics-internal"),o={app:e,appConfig:t,installations:r,analyticsProvider:i};if(!dre())throw fn.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new g9e(o):new S9e(o)}var k9e={isSupported:dre};He.INTERNAL.registerComponent(new Vi(D9e,L9e,"PUBLIC").setServiceProps(k9e));function dre(){return self&&"ServiceWorkerGlobalScope"in self?N9e():T9e()}function T9e(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function N9e(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pre="firebasestorage.googleapis.com",gre="storageBucket",A9e=2*60*1e3,O9e=10*60*1e3,xr=function(n){Ie(e,n);function e(t,r){var i=n.call(this,BN(t),"Firebase Storage: "+r+" ("+BN(t)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return e.prototype._codeEquals=function(t){return BN(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+`
`+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(Lv);function BN(n){return"storage/"+n}function lB(){var n="An unknown error occurred, please check the error payload for server response.";return new xr("unknown",n)}function R9e(n){return new xr("object-not-found","Object '"+n+"' does not exist.")}function M9e(n){return new xr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function P9e(){var n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xr("unauthenticated",n)}function F9e(){return new xr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function B9e(n){return new xr("unauthorized","User does not have permission to access '"+n+"'.")}function W9e(){return new xr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function vre(){return new xr("canceled","User canceled the upload/download.")}function V9e(n){return new xr("invalid-url","Invalid URL '"+n+"'.")}function H9e(n){return new xr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}function U9e(){return new xr("no-default-bucket","No default bucket found. Did you set the '"+gre+"' property when initializing the app?")}function mre(){return new xr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function j9e(){return new xr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function z9e(){return new xr("no-download-url","The given file does not have any download URLs.")}function Tg(n){return new xr("invalid-argument",n)}function _re(){return new xr("app-deleted","The Firebase app was deleted.")}function yre(n){return new xr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uy(n,e){return new xr("invalid-format","String does not match format '"+n+"': "+e)}function OC(n){throw new xr("internal-error","Internal error: "+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9e(n){return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ms={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},WN=function(){function n(e,t){this.data=e,this.contentType=t||null}return n}();function bre(n,e){switch(n){case Ms.RAW:return new WN(wre(e));case Ms.BASE64:case Ms.BASE64URL:return new WN(Cre(n,e));case Ms.DATA_URL:return new WN(K9e(e),G9e(e))}throw lB()}function wre(n){for(var e=[],t=0;t<n.length;t++){var r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296){var i=t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320;if(!i)e.push(239,191,189);else{var o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function $9e(n){var e;try{e=decodeURIComponent(n)}catch{throw uy(Ms.DATA_URL,"Malformed data URL.")}return wre(e)}function Cre(n,e){switch(n){case Ms.BASE64:{var t=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(t||r){var i=t?"-":"_";throw uy(n,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case Ms.BASE64URL:{var o=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(o||s){var i=o?"+":"/";throw uy(n,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}}var a;try{a=q9e(e)}catch{throw uy(n,"Invalid character found")}for(var u=new Uint8Array(a.length),l=0;l<a.length;l++)u[l]=a.charCodeAt(l);return u}var Sre=function(){function n(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(t===null)throw uy(Ms.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=t[1]||null;r!=null&&(this.base64=Y9e(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}return n}();function K9e(n){var e=new Sre(n);return e.base64?Cre(Ms.BASE64,e.rest):$9e(e.rest)}function G9e(n){var e=new Sre(n);return e.contentType}function Y9e(n,e){var t=n.length>=e.length;return t?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z9e={STATE_CHANGED:"state_changed"},so={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function VN(n){switch(n){case"running":case"pausing":case"canceling":return so.RUNNING;case"paused":return so.PAUSED;case"success":return so.SUCCESS;case"canceled":return so.CANCELED;case"error":return so.ERROR;default:return so.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ad;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ad||(ad={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X9e=function(){function n(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ad.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=ad.ABORT,t()}),e.xhr_.addEventListener("error",function(){e.errorCode_=ad.NETWORK_ERROR,t()}),e.xhr_.addEventListener("load",function(){t()})})}return n.prototype.send=function(e,t,r,i){if(this.sent_)throw OC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(var o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},n.prototype.getErrorCode=function(){if(!this.sent_)throw OC("cannot .getErrorCode() before sending");return this.errorCode_},n.prototype.getStatus=function(){if(!this.sent_)throw OC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},n.prototype.getResponseText=function(){if(!this.sent_)throw OC("cannot .getResponseText() before sending");return this.xhr_.responseText},n.prototype.abort=function(){this.xhr_.abort()},n.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},n.prototype.addUploadProgressListener=function(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)},n.prototype.removeUploadProgressListener=function(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)},n}();function Q9e(){return new X9e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J9e=function(){function n(){}return n.prototype.createConnection=function(){return Q9e()},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ps=function(){function n(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(n.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!1,configurable:!0}),n.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},n.prototype.bucketOnlyServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"},n.makeFromBucketSpec=function(e,t){var r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw H9e(e)},n.makeFromUrl=function(e,t){var r=null,i="([A-Za-z0-9.\\-_]+)";function o(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}var s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(M){M.path_=decodeURIComponent(M.path)}for(var f="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",g=new RegExp("^https?://"+h+"/"+f+"/b/"+i+"/o"+d,"i"),v={bucket:1,path:3},m=t===pre?"(?:storage.googleapis.com|storage.cloud.google.com)":t,y="([^?#]*)",b=new RegExp("^https?://"+m+"/"+i+"/"+y,"i"),C={bucket:1,path:2},E=[{regex:a,indices:u,postModify:o},{regex:g,indices:v,postModify:l},{regex:b,indices:C,postModify:l}],D=0;D<E.length;D++){var k=E[D],I=k.regex.exec(e);if(I){var T=I[k.indices.bucket],A=I[k.indices.path];A||(A=""),r=new n(T,A),k.postModify(r);break}}if(r==null)throw V9e(e);return r},n}(),eje=function(){function n(e){this.promise_=Promise.reject(e)}return n.prototype.getPromise=function(){return this.promise_},n.prototype.cancel=function(e){},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tje(n,e,t){var r=1,i=null,o=!1,s=0;function a(){return s===2}var u=!1;function l(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];u||(u=!0,e.apply(null,v))}function f(v){i=setTimeout(function(){i=null,n(h,a())},v)}function h(v){for(var m=[],y=1;y<arguments.length;y++)m[y-1]=arguments[y];if(!u){if(v){l.call.apply(l,Ct([null,v],m));return}var b=a()||o;if(b){l.call.apply(l,Ct([null,v],m));return}r<64&&(r*=2);var C;s===1?(s=2,C=0):C=(r+Math.random())*1e3,f(C)}}var d=!1;function g(v){d||(d=!0,!u&&(i!==null?(v||(s=2),clearTimeout(i),f(0)):v||(s=1)))}return f(0),setTimeout(function(){o=!0,g(!0)},t),g}function nje(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rje(n){return n!==void 0}function ije(n){return typeof n=="function"}function oje(n){return typeof n=="object"&&!Array.isArray(n)}function Ox(n){return typeof n=="string"||n instanceof String}function n7(n){return cB()&&n instanceof Blob}function cB(){return typeof Blob<"u"}function yM(n,e,t,r){if(r<e)throw Tg("Invalid value for '"+n+"'. Expected "+e+" or greater.");if(r>t)throw Tg("Invalid value for '"+n+"'. Expected "+t+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n,e){var t=e.match(/^(\w+):\/\/.+/),r=t==null?void 0:t[1],i=e;return r==null&&(i="https://"+e),i+"/v0"+n}function Ere(n){var e=encodeURIComponent,t="?";for(var r in n)if(n.hasOwnProperty(r)){var i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sje=function(){function n(e,t,r,i,o,s,a,u,l,f,h){var d=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o.slice(),this.additionalRetryCodes_=s.slice(),this.callback_=a,this.errorCallback_=u,this.progressCallback_=f,this.timeout_=l,this.pool_=h,this.promise_=new Promise(function(g,v){d.resolve_=g,d.reject_=v,d.start_()})}return n.prototype.start_=function(){var e=this;function t(i,o){if(o){i(!1,new RC(!1,null,!0));return}var s=e.pool_.createConnection();e.pendingConnection_=s;function a(u){var l=u.loaded,f=u.lengthComputable?u.total:-1;e.progressCallback_!==null&&e.progressCallback_(l,f)}e.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(e.url_,e.method_,e.body_,e.headers_).then(function(){e.progressCallback_!==null&&s.removeUploadProgressListener(a),e.pendingConnection_=null;var u=s.getErrorCode()===ad.NO_ERROR,l=s.getStatus();if(!u||e.isRetryStatusCode_(l)){var f=s.getErrorCode()===ad.ABORT;i(!1,new RC(!1,null,f));return}var h=e.successCodes_.indexOf(l)!==-1;i(!0,new RC(h,s))})}function r(i,o){var s=e.resolve_,a=e.reject_,u=o.connection;if(o.wasSuccessCode)try{var l=e.callback_(u,u.getResponseText());rje(l)?s(l):s()}catch(h){a(h)}else if(u!==null){var f=lB();f.serverResponse=u.getResponseText(),e.errorCallback_?a(e.errorCallback_(u,f)):a(f)}else if(o.canceled){var f=e.appDelete_?_re():vre();a(f)}else{var f=W9e();a(f)}}this.canceled_?r(!1,new RC(!1,null,!0)):this.backoffId_=tje(t,r,this.timeout_)},n.prototype.getPromise=function(){return this.promise_},n.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nje(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()},n.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,r=[408,429],i=r.indexOf(e)!==-1,o=this.additionalRetryCodes_.indexOf(e)!==-1;return t||i||o},n}(),RC=function(){function n(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}return n}();function aje(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function uje(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lje(n,e){e&&(n["X-Firebase-GMPID"]=e)}function cje(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function fje(n,e,t,r,i,o){var s=Ere(n.urlParams),a=n.url+s,u=Object.assign({},n.headers);return lje(u,e),aje(u,t),uje(u,o),cje(u,r),new sje(a,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hje(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dje(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=hje();if(t!==void 0){for(var r=new t,i=0;i<n.length;i++)r.append(n[i]);return r.getBlob()}else{if(cB())return new Blob(n);throw new xr("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function pje(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fB=function(){function n(e,t){var r=0,i="";n7(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}return n.prototype.size=function(){return this.size_},n.prototype.type=function(){return this.type_},n.prototype.slice=function(e,t){if(n7(this.data_)){var r=this.data_,i=pje(r,e,t);return i===null?null:new n(i)}else{var o=new Uint8Array(this.data_.buffer,e,t-e);return new n(o,!0)}},n.getBlob=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(cB()){var r=e.map(function(u){return u instanceof n?u.data_:u});return new n(dje.apply(null,r))}else{var i=e.map(function(u){return Ox(u)?bre(Ms.RAW,u).data:u.data_}),o=0;i.forEach(function(u){o+=u.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(u){for(var l=0;l<u.length;l++)s[a++]=u[l]}),new n(s,!0)}},n.prototype.uploadData=function(){return this.data_},n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(n){var e;try{e=JSON.parse(n)}catch{return null}return oje(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gje(n){if(n.length===0)return null;var e=n.lastIndexOf("/");if(e===-1)return"";var t=n.slice(0,e);return t}function vje(n,e){var t=e.split("/").filter(function(r){return r.length>0}).join("/");return n.length===0?t:n+"/"+t}function Ire(n){var e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mje(n,e){return e}var Xi=function(){function n(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||mje}return n}(),MC=null;function _je(n){return!Ox(n)||n.length<2?n:Ire(n)}function Rx(){if(MC)return MC;var n=[];n.push(new Xi("bucket")),n.push(new Xi("generation")),n.push(new Xi("metageneration")),n.push(new Xi("name","fullPath",!0));function e(o,s){return _je(s)}var t=new Xi("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}var i=new Xi("size");return i.xform=r,n.push(i),n.push(new Xi("timeCreated")),n.push(new Xi("updated")),n.push(new Xi("md5Hash",null,!0)),n.push(new Xi("cacheControl",null,!0)),n.push(new Xi("contentDisposition",null,!0)),n.push(new Xi("contentEncoding",null,!0)),n.push(new Xi("contentLanguage",null,!0)),n.push(new Xi("contentType",null,!0)),n.push(new Xi("metadata","customMetadata",!0)),MC=n,MC}function yje(n,e){function t(){var r=n.bucket,i=n.fullPath,o=new Ps(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function bje(n,e,t){var r={};r.type="file";for(var i=t.length,o=0;o<i;o++){var s=t[o];r[s.local]=s.xform(r,e[s.server])}return yje(r,n),r}function xre(n,e,t){var r=hB(e);if(r===null)return null;var i=r;return bje(n,i,t)}function wje(n,e,t){var r=hB(e);if(r===null||!Ox(r.downloadTokens))return null;var i=r.downloadTokens;if(i.length===0)return null;var o=encodeURIComponent,s=i.split(","),a=s.map(function(u){var l=n.bucket,f=n.fullPath,h="/b/"+o(l)+"/o/"+o(f),d=Lf(h,t),g=Ere({alt:"media",token:u});return d+g});return a[0]}function dB(n,e){for(var t={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r7="prefixes",i7="items";function Cje(n,e,t){var r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[r7])for(var i=0,o=t[r7];i<o.length;i++){var s=o[i],a=s.replace(/\/$/,""),u=n._makeStorageReference(new Ps(e,a));r.prefixes.push(u)}if(t[i7])for(var l=0,f=t[i7];l<f.length;l++){var h=f[l],u=n._makeStorageReference(new Ps(e,h.name));r.items.push(u)}return r}function Sje(n,e,t){var r=hB(t);if(r===null)return null;var i=r;return Cje(n,e,i)}var Bl=function(){function n(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(n){if(!n)throw lB()}function Mx(n,e){function t(r,i){var o=xre(n,i,e);return gu(o!==null),o}return t}function Eje(n,e){function t(r,i){var o=Sje(n,e,i);return gu(o!==null),o}return t}function Ije(n,e){function t(r,i){var o=xre(n,i,e);return gu(o!==null),wje(o,i,n.host)}return t}function sm(n){function e(t,r){var i;return t.getStatus()===401?t.getResponseText().includes("Firebase App Check token is invalid")?i=F9e():i=P9e():t.getStatus()===402?i=M9e(n.bucket):t.getStatus()===403?i=B9e(n.path):i=r,i.serverResponse=r.serverResponse,i}return e}function Px(n){var e=sm(n);function t(r,i){var o=e(r,i);return r.getStatus()===404&&(o=R9e(n.path)),o.serverResponse=i.serverResponse,o}return t}function Dre(n,e,t){var r=e.fullServerUrl(),i=Lf(r,n.host),o="GET",s=n.maxOperationRetryTime,a=new Bl(i,o,Mx(n,t),s);return a.errorHandler=Px(e),a}function xje(n,e,t,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=e.bucketOnlyServerUrl(),a=Lf(s,n.host),u="GET",l=n.maxOperationRetryTime,f=new Bl(a,u,Eje(n,e.bucket),l);return f.urlParams=o,f.errorHandler=sm(e),f}function Dje(n,e,t){var r=e.fullServerUrl(),i=Lf(r,n.host),o="GET",s=n.maxOperationRetryTime,a=new Bl(i,o,Ije(n,t),s);return a.errorHandler=Px(e),a}function Lje(n,e,t,r){var i=e.fullServerUrl(),o=Lf(i,n.host),s="PATCH",a=dB(t,r),u={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,f=new Bl(o,s,Mx(n,r),l);return f.headers=u,f.body=a,f.errorHandler=Px(e),f}function kje(n,e){var t=e.fullServerUrl(),r=Lf(t,n.host),i="DELETE",o=n.maxOperationRetryTime;function s(u,l){}var a=new Bl(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=Px(e),a}function Tje(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Lre(n,e,t){var r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=Tje(null,e)),r}function Nje(n,e,t,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){for(var E="",D=0;D<2;D++)E=E+Math.random().toString().slice(2);return E}var u=a();s["Content-Type"]="multipart/related; boundary="+u;var l=Lre(e,r,i),f=dB(l,t),h="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",g=fB.getBlob(h,r,d);if(g===null)throw mre();var v={name:l.fullPath},m=Lf(o,n.host),y="POST",b=n.maxUploadRetryTime,C=new Bl(m,y,Mx(n,t),b);return C.urlParams=v,C.headers=s,C.body=g.uploadData(),C.errorHandler=sm(e),C}var hE=function(){function n(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}return n}();function pB(n,e){var t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{gu(!1)}var r=e||["active"];return gu(!!t&&r.indexOf(t)!==-1),t}function Aje(n,e,t,r,i){var o=e.bucketOnlyServerUrl(),s=Lre(e,r,i),a={name:s.fullPath},u=Lf(o,n.host),l="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=dB(s,t),d=n.maxUploadRetryTime;function g(m){pB(m);var y;try{y=m.getResponseHeader("X-Goog-Upload-URL")}catch{gu(!1)}return gu(Ox(y)),y}var v=new Bl(u,l,g,d);return v.urlParams=a,v.headers=f,v.body=h,v.errorHandler=sm(e),v}function Oje(n,e,t,r){var i={"X-Goog-Upload-Command":"query"};function o(l){var f=pB(l,["active","final"]),h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{gu(!1)}h||gu(!1);var d=Number(h);return gu(!isNaN(d)),new hE(d,r.size(),f==="final")}var s="POST",a=n.maxUploadRetryTime,u=new Bl(t,s,o,a);return u.headers=i,u.errorHandler=sm(e),u}var o7=256*1024;function Rje(n,e,t,r,i,o,s,a){var u=new hE(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw j9e();var l=u.total-u.current,f=l;i>0&&(f=Math.min(f,i));var h=u.current,d=h+f,g=f===l?"upload, finalize":"upload",v={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":""+u.current},m=r.slice(h,d);if(m===null)throw mre();function y(D,k){var I=pB(D,["active","final"]),T=u.current+f,A=r.size(),M;return I==="final"?M=Mx(e,o)(D,k):M=null,new hE(T,A,I==="final",M)}var b="POST",C=e.maxUploadRetryTime,E=new Bl(t,b,y,C);return E.headers=v,E.body=m.uploadData(),E.progressCallback=a||null,E.errorHandler=sm(n),E}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mje=function(){function n(e,t,r){var i=ije(e)||t!=null||r!=null;if(i)this.next=e,this.error=t,this.complete=r;else{var o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}return n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Promise.resolve().then(function(){return n.apply(void 0,e)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kre=function(){function n(e,t,r){var i=this;r===void 0&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Rx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(o){i._request=void 0,i._chunkMultiplier=1,o._codeEquals("canceled")?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=o,i._transition("error"))},this._metadataErrorHandler=function(o){i._request=void 0,o._codeEquals("canceled")?i.completeTransitions_():(i._error=o,i._transition("error"))},this._promise=new Promise(function(o,s){i._resolve=o,i._reject=s,i._start()}),this._promise.then(null,function(){})}return n.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(r){return e._updateProgress(t+r)}},n.prototype._shouldDoResumable=function(e){return e.size()>256*1024},n.prototype._start=function(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},n.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(r){var i=r[0],o=r[1];switch(t._state){case"running":e(i,o);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused");break}})},n.prototype._createResumable=function(){var e=this;this._resolveToken(function(t,r){var i=Aje(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),o=e._ref.storage._makeRequest(i,t,r);e._request=o,o.getPromise().then(function(s){e._request=void 0,e._uploadUrl=s,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})},n.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken(function(r,i){var o=Oje(e._ref.storage,e._ref._location,t,e._blob),s=e._ref.storage._makeRequest(o,r,i);e._request=s,s.getPromise().then(function(a){a=a,e._request=void 0,e._updateProgress(a.current),e._needToFetchStatus=!1,a.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})},n.prototype._continueUpload=function(){var e=this,t=o7*this._chunkMultiplier,r=new hE(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(o,s){var a;try{a=Rje(e._ref._location,e._ref.storage,i,e._blob,t,e._mappings,r,e._makeProgressCallback())}catch(l){e._error=l,e._transition("error");return}var u=e._ref.storage._makeRequest(a,o,s);e._request=u,u.getPromise().then(function(l){e._increaseMultiplier(),e._request=void 0,e._updateProgress(l.current),l.finalized?(e._metadata=l.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})},n.prototype._increaseMultiplier=function(){var e=o7*this._chunkMultiplier;e<32*1024*1024&&(this._chunkMultiplier*=2)},n.prototype._fetchMetadata=function(){var e=this;this._resolveToken(function(t,r){var i=Dre(e._ref.storage,e._ref._location,e._mappings),o=e._ref.storage._makeRequest(i,t,r);e._request=o,o.getPromise().then(function(s){e._request=void 0,e._metadata=s,e._transition("success")},e._metadataErrorHandler)})},n.prototype._oneShotUpload=function(){var e=this;this._resolveToken(function(t,r){var i=Nje(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),o=e._ref.storage._makeRequest(i,t,r);e._request=o,o.getPromise().then(function(s){e._request=void 0,e._metadata=s,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})},n.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},n.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":var t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=vre(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}},n.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(n.prototype,"snapshot",{get:function(){var e=VN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),n.prototype.on=function(e,t,r,i){var o=this,s=new Mje(t,r,i);return this._addObserver(s),function(){o._removeObserver(s)}},n.prototype.then=function(e,t){return this._promise.then(e,t)},n.prototype.catch=function(e){return this.then(null,e)},n.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},n.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)},n.prototype._notifyObservers=function(){var e=this;this._finishPromise();var t=this._observers.slice();t.forEach(function(r){e._notifyObserver(r)})},n.prototype._finishPromise=function(){if(this._resolve!==void 0){var e=!0;switch(VN(this._state)){case so.SUCCESS:$p(this._resolve.bind(null,this.snapshot))();break;case so.CANCELED:case so.ERROR:var t=this._reject;$p(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}},n.prototype._notifyObserver=function(e){var t=VN(this._state);switch(t){case so.RUNNING:case so.PAUSED:e.next&&$p(e.next.bind(e,this.snapshot))();break;case so.SUCCESS:e.complete&&$p(e.complete.bind(e))();break;case so.CANCELED:case so.ERROR:e.error&&$p(e.error.bind(e,this._error))();break;default:e.error&&$p(e.error.bind(e,this._error))()}},n.prototype.resume=function(){var e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e},n.prototype.pause=function(){var e=this._state==="running";return e&&this._transition("pausing"),e},n.prototype.cancel=function(){var e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fx=function(){function n(e,t){this._service=e,t instanceof Ps?this._location=t:this._location=Ps.makeFromUrl(t,e.host)}return n.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},n.prototype._newRef=function(e,t){return new n(e,t)},Object.defineProperty(n.prototype,"root",{get:function(){var e=new Ps(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return Ire(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var e=gje(this._location.path);if(e===null)return null;var t=new Ps(this._location.bucket,e);return new n(this._service,t)},enumerable:!1,configurable:!0}),n.prototype._throwIfRoot=function(e){if(this._location.path==="")throw yre(e)},n}();function Pje(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new kre(n,new fB(e),t)}function Fje(n){var e={prefixes:[],items:[]};return Tre(n,e).then(function(){return e})}function Tre(n,e,t){return U(this,void 0,void 0,function(){var r,i,o,s;return V(this,function(a){switch(a.label){case 0:return r={pageToken:t},[4,Nre(n,r)];case 1:return i=a.sent(),(o=e.prefixes).push.apply(o,i.prefixes),(s=e.items).push.apply(s,i.items),i.nextPageToken==null?[3,3]:[4,Tre(n,e,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Nre(n,e){return U(this,void 0,void 0,function(){var t,r;return V(this,function(i){switch(i.label){case 0:return e!=null&&typeof e.maxResults=="number"&&yM("options.maxResults",1,1e3,e.maxResults),t=e||{},r=xje(n.storage,n._location,"/",t.pageToken,t.maxResults),[4,n.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function Bje(n){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return n._throwIfRoot("getMetadata"),e=Dre(n.storage,n._location,Rx()),[4,n.storage.makeRequestWithTokens(e)];case 1:return[2,t.sent().getPromise()]}})})}function Wje(n,e){return U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:return n._throwIfRoot("updateMetadata"),t=Lje(n.storage,n._location,e,Rx()),[4,n.storage.makeRequestWithTokens(t)];case 1:return[2,r.sent().getPromise()]}})})}function Vje(n){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return n._throwIfRoot("getDownloadURL"),e=Dje(n.storage,n._location,Rx()),[4,n.storage.makeRequestWithTokens(e)];case 1:return[2,t.sent().getPromise().then(function(r){if(r===null)throw z9e();return r})]}})})}function Hje(n){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return n._throwIfRoot("deleteObject"),e=kje(n.storage,n._location),[4,n.storage.makeRequestWithTokens(e)];case 1:return[2,t.sent().getPromise()]}})})}function Are(n,e){var t=vje(n._location.path,e),r=new Ps(n._location.bucket,t);return new Fx(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(n){return/^[A-Za-z]+:\/\//.test(n)}function Uje(n,e){return new Fx(n,e)}function Ore(n,e){if(n instanceof Bx){var t=n;if(t._bucket==null)throw U9e();var r=new Fx(t,t._bucket);return e!=null?Ore(r,e):r}else return e!==void 0?Are(n,e):n}function jje(n,e){if(e&&bM(e)){if(n instanceof Bx)return Uje(n,e);throw Tg("To use ref(service, url), the first argument must be a Storage instance.")}else return Ore(n,e)}function s7(n,e){var t=e==null?void 0:e[gre];return t==null?null:Ps.makeFromBucketSpec(t,n)}function zje(n,e,t,r){r===void 0&&(r={}),n.host="http://"+e+":"+t;var i=r.mockUserToken;i&&(n._overrideAuthToken=typeof i=="string"?i:rP(i,n.app.options.projectId))}var Bx=function(){function n(e,t,r,i,o,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._pool=i,this._url=o,this._firebaseVersion=s,this._bucket=null,this._host=pre,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A9e,this._maxUploadRetryTime=O9e,this._requests=new Set,o!=null?this._bucket=Ps.makeFromBucketSpec(o,this._host):this._bucket=s7(this._host,this.app.options)}return Object.defineProperty(n.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,this._url!=null?this._bucket=Ps.makeFromBucketSpec(this._url,e):this._bucket=s7(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){yM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){yM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),n.prototype._getAuthToken=function(){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(e=this._authProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2]);case 1:if(t=r.sent(),t!==null)return[2,t.accessToken];r.label=2;case 2:return[2,null]}})})},n.prototype._getAppCheckToken=function(){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return e=this._appCheckProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:return t=r.sent(),[2,t.token];case 2:return[2,null]}})})},n.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear()),Promise.resolve()},n.prototype._makeStorageReference=function(e){return new Fx(this,e)},n.prototype._makeRequest=function(e,t,r){var i=this;if(this._deleted)return new eje(_re());var o=fje(e,this._appId,t,r,this._pool,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(function(){return i._requests.delete(o)},function(){return i._requests.delete(o)}),o},n.prototype.makeRequestWithTokens=function(e){return U(this,void 0,void 0,function(){var t,r,i;return V(this,function(o){switch(o.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=o.sent(),r=t[0],i=t[1],[2,this._makeRequest(e,r,i)]}})})},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qje(n,e,t){return n=wt(n),Pje(n,e,t)}function $je(n){return n=wt(n),Bje(n)}function Kje(n,e){return n=wt(n),Wje(n,e)}function Gje(n,e){return n=wt(n),Nre(n,e)}function Yje(n){return n=wt(n),Fje(n)}function Zje(n){return n=wt(n),Vje(n)}function Xje(n){return n=wt(n),Hje(n)}function a7(n,e){return n=wt(n),jje(n,e)}function Qje(n,e){return Are(n,e)}function Jje(n,e,t,r){r===void 0&&(r={}),zje(n,e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PC=function(){function n(e,t,r){this._delegate=e,this.task=t,this.ref=r}return Object.defineProperty(n.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u7=function(){function n(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(n.prototype,"snapshot",{get:function(){return new PC(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),n.prototype.then=function(e,t){var r=this;return this._delegate.then(function(i){if(e)return e(new PC(i,r,r._ref))},t)},n.prototype.on=function(e,t,r,i){var o=this,s=void 0;return t&&(typeof t=="function"?s=function(a){return t(new PC(a,o,o._ref))}:s={next:t.next?function(a){return t.next(new PC(a,o,o._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)},n}(),l7=function(){function n(e,t){this._delegate=e,this._service=t}return Object.defineProperty(n.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new C0(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new C0(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C0=function(){function n(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(n.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return this._delegate.toString()},n.prototype.child=function(e){var t=Qje(this._delegate,e);return new n(t,this.storage)},Object.defineProperty(n.prototype,"root",{get:function(){return new n(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var e=this._delegate.parent;return e==null?null:new n(e,this.storage)},enumerable:!1,configurable:!0}),n.prototype.put=function(e,t){return this._throwIfRoot("put"),new u7(qje(this._delegate,e,t),this)},n.prototype.putString=function(e,t,r){t===void 0&&(t=Ms.RAW),this._throwIfRoot("putString");var i=bre(t,e),o=Je({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new u7(new kre(this._delegate,new fB(i.data,!0),o),this)},n.prototype.listAll=function(){var e=this;return Yje(this._delegate).then(function(t){return new l7(t,e.storage)})},n.prototype.list=function(e){var t=this;return Gje(this._delegate,e||void 0).then(function(r){return new l7(r,t.storage)})},n.prototype.getMetadata=function(){return $je(this._delegate)},n.prototype.updateMetadata=function(e){return Kje(this._delegate,e)},n.prototype.getDownloadURL=function(){return Zje(this._delegate)},n.prototype.delete=function(){return this._throwIfRoot("delete"),Xje(this._delegate)},n.prototype._throwIfRoot=function(e){if(this._delegate._location.path==="")throw yre(e)},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eze=function(){function n(e,t){this.app=e,this._delegate=t}return Object.defineProperty(n.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),n.prototype.ref=function(e){if(bM(e))throw Tg("ref() expected a child path but got a URL, use refFromURL instead.");return new C0(a7(this._delegate,e),this)},n.prototype.refFromURL=function(e){if(!bM(e))throw Tg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ps.makeFromUrl(e,this._delegate.host)}catch{throw Tg("refFromUrl() expected a valid full URL but got an invalid one.")}return new C0(a7(this._delegate,e),this)},n.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},n.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},n.prototype.useEmulator=function(e,t,r){r===void 0&&(r={}),Jje(this._delegate,e,t,r)},n}(),tze="@firebase/storage",nze="0.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rze="storage";function ize(n,e){var t=e.instanceIdentifier,r=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal"),s=new eze(r,new Bx(r,i,o,new J9e,t,He.SDK_VERSION));return s}function oze(n){var e={TaskState:so,TaskEvent:Z9e,StringFormat:Ms,Storage:Bx,Reference:C0};n.INTERNAL.registerComponent(new Vi(rze,ize,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(tze,nze)}oze(He);var sze="@firebase/performance",Rre="0.4.18";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mre=Rre,aze="FB-PERF-TRACE-START",uze="FB-PERF-TRACE-STOP",wM="FB-PERF-TRACE-MEASURE",Pre="_wt_",Fre="_fp",Bre="_fcp",Wre="_fid",Vre="@firebase/performance/config",Hre="@firebase/performance/configexpire",lze="performance",Ure="Performance";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ai,cze=(ai={},ai["trace started"]="Trace {$traceName} was started before.",ai["trace stopped"]="Trace {$traceName} is not running.",ai["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",ai["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",ai["no window"]="Window is not available.",ai["no app id"]="App id is not available.",ai["no project id"]="Project id is not available.",ai["no api key"]="Api key is not available.",ai["invalid cc log"]="Attempted to queue invalid cc event",ai["FB not default"]="Performance can only start when Firebase app instance is the default one.",ai["RC response not ok"]="RC response is not ok",ai["invalid attribute name"]="Attribute name {$attributeName} is invalid.",ai["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",ai["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",ai["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",ai),Ni=new Nl(lze,Ure,cze);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kl=new Nd(Ure);kl.logLevel=Lt.INFO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HN,jre,Bi=function(){function n(e){if(this.window=e,!e)throw Ni.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return n.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},n.prototype.mark=function(e){!this.performance||!this.performance.mark||this.performance.mark(e)},n.prototype.measure=function(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)},n.prototype.getEntriesByType=function(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)},n.prototype.getEntriesByName=function(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)},n.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},n.prototype.requiredApisAvailable=function(){return!fetch||!Promise||!this.navigator||!this.navigator.cookieEnabled?(kl.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):k0()?!0:(kl.info("IndexedDB is not supported by current browswer"),!1)},n.prototype.setupObserver=function(e,t){if(this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var o=0,s=i.getEntries();o<s.length;o++){var a=s[o];t(a)}});r.observe({entryTypes:[e]})}},n.getInstance=function(){return HN===void 0&&(HN=new n(jre)),HN},n}();function fze(n){jre=n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7(n,e){var t=n.length-e.length;if(t<0||t>1)throw Ni.create("invalid String merger input");for(var r=[],i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UN,Mr=function(){function n(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=c7("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=c7("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return n.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw Ni.create("no app id");return e},n.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw Ni.create("no project id");return e},n.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw Ni.create("no api key");return e},n.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},n.getInstance=function(){return UN===void 0&&(UN=new n),UN},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zre;function hze(){var n=Mr.getInstance().installationsService.getId();return n.then(function(e){zre=e}),n}function gB(){return zre}function dze(){var n=Mr.getInstance().installationsService.getToken();return n.then(function(e){}),n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ng;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(Ng||(Ng={}));var pze=["firebase_","google_","ga_"],gze=new RegExp("^[a-zA-Z]\\w*$"),vze=40,mze=100;function _ze(){var n=Bi.getInstance().navigator;return"serviceWorker"in n?n.serviceWorker.controller?2:3:1}function qre(){var n=Bi.getInstance().document,e=n.visibilityState;switch(e){case"visible":return Ng.VISIBLE;case"hidden":return Ng.HIDDEN;default:return Ng.UNKNOWN}}function yze(){var n=Bi.getInstance().navigator,e=n.connection,t=e&&e.effectiveType;switch(t){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function bze(n){if(n.length===0||n.length>vze)return!1;var e=pze.some(function(t){return n.startsWith(t)});return!e&&!!n.match(gze)}function wze(n){return n.length!==0&&n.length<=mze}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cze="0.0.1",Sze={loggingEnabled:!0},Eze="FIREBASE_INSTALLATIONS_AUTH";function Ize(n){var e=xze();return e?(f7(e),Promise.resolve()):kze(n).then(f7).then(function(t){return Dze(t)},function(){})}function xze(){var n=Bi.getInstance().localStorage;if(n){var e=n.getItem(Hre);if(!(!e||!Tze(e))){var t=n.getItem(Vre);if(t)try{var r=JSON.parse(t);return r}catch{return}}}}function Dze(n){var e=Bi.getInstance().localStorage;!n||!e||(e.setItem(Vre,JSON.stringify(n)),e.setItem(Hre,String(Date.now()+Mr.getInstance().configTimeToLive*60*60*1e3)))}var Lze="Could not fetch config, will use default configs";function kze(n){return dze().then(function(e){var t=Mr.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+t+"/namespaces/fireperf:fetch?key="+Mr.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:Eze+" "+e},body:JSON.stringify({app_instance_id:n,app_instance_id_token:e,app_id:Mr.getInstance().getAppId(),app_version:Mre,sdk_version:Cze})});return fetch(i).then(function(o){if(o.ok)return o.json();throw Ni.create("RC response not ok")})}).catch(function(){kl.info(Lze)})}function f7(n){if(!n)return n;var e=Mr.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=Sze.loggingEnabled,t.fpr_log_source&&(e.logSource=Number(t.fpr_log_source)),t.fpr_log_endpoint_url&&(e.logEndPointUrl=t.fpr_log_endpoint_url),t.fpr_log_transport_key&&(e.transportKey=t.fpr_log_transport_key),t.fpr_vc_network_request_sampling_rate!==void 0&&(e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate)),t.fpr_vc_trace_sampling_rate!==void 0&&(e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=h7(e.tracesSamplingRate),e.logNetworkAfterSampling=h7(e.networkRequestsSamplingRate),n}function Tze(n){return Number(n)>Date.now()}function h7(n){return Math.random()<=n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vB=1,jN;function $re(){return vB=2,jN=jN||Aze(),jN}function Nze(){return vB===3}function Aze(){return Oze().then(function(){return hze()}).then(function(n){return Ize(n)}).then(function(){return d7()},function(){return d7()})}function Oze(){var n=Bi.getInstance().document;return new Promise(function(e){if(n&&n.readyState!=="complete"){var t=function(){n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function d7(){vB=3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mB=10*1e3,Rze=5.5*1e3,Kre=3,Mze=1e3,dE=Kre,Kc=[],p7=!1;function Pze(){p7||(Wx(Rze),p7=!0)}function Wx(n){setTimeout(function(){if(dE!==0){if(!Kc.length)return Wx(mB);Fze()}},n)}function Fze(){var n=Kc.splice(0,Mze),e=n.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Mr.getInstance().logSource,log_event:e};Bze(t,n).catch(function(){Kc=Ct(Ct([],n),Kc),dE--,kl.info("Tries left: "+dE+"."),Wx(mB)})}function Bze(n,e){return Wze(n).then(function(t){return t.ok||kl.info("Call to Firebase backend failed."),t.json()}).then(function(t){var r=Number(t.nextRequestWaitMillis),i=mB;isNaN(r)||(i=Math.max(r,i));var o=t.logResponseDetails;Array.isArray(o)&&o.length>0&&o[0].responseAction==="RETRY_REQUEST_LATER"&&(Kc=Ct(Ct([],e),Kc),kl.info("Retry transport request later.")),dE=Kre,Wx(i)})}function Wze(n){var e=Mr.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}function Vze(n){if(!n.eventTime||!n.message)throw Ni.create("invalid cc log");Kc=Ct(Ct([],Kc),[n])}function Hze(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.apply(void 0,e);Vze({message:r,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zN;function Gre(n,e){zN||(zN=Hze(jze)),zN(n,e)}function FC(n){var e=Mr.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||Bi.getInstance().requiredApisAvailable()&&(n.isAuto&&qre()!==Ng.VISIBLE||(Nze()?qN(n):$re().then(function(){return qN(n)},function(){return qN(n)})))}function qN(n){if(gB()){var e=Mr.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(function(){return Gre(n,1)},0)}}function Uze(n){var e=Mr.getInstance();if(e.instrumentationEnabled){var t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(function(){return Gre(n,0)},0)}}function jze(n,e){return e===0?zze(n):qze(n)}function zze(n){var e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:Yre(),network_request_metric:e};return JSON.stringify(t)}function qze(n){var e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);var t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);var r={application_info:Yre(),trace_metric:e};return JSON.stringify(r)}function Yre(){return{google_app_id:Mr.getInstance().getAppId(),app_instance_id:gB(),web_app_info:{sdk_version:Mre,page_url:Bi.getInstance().getUrl(),service_worker_status:_ze(),visibility_state:qre(),effective_connection_type:yze()},application_process_state:0}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $ze=100,Kze="_",Gze=[Fre,Bre,Wre];function Yze(n,e){return n.length===0||n.length>$ze?!1:e&&e.startsWith(Pre)&&Gze.indexOf(n)>-1||!n.startsWith(Kze)}function Zze(n){var e=Math.floor(n);return e<n&&kl.info("Metric value should be an Integer, setting the value as : "+e+"."),e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ly=function(){function n(e,t,r){t===void 0&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=Bi.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=aze+"-"+this.randomId+"-"+this.name,this.traceStopMark=uze+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||wM+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return n.prototype.start=function(){if(this.state!==1)throw Ni.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},n.prototype.stop=function(){if(this.state!==2)throw Ni.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),FC(this)},n.prototype.record=function(e,t,r){if(e<=0)throw Ni.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Ni.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Je({},r.attributes)),r&&r.metrics)for(var i=0,o=Object.keys(r.metrics);i<o.length;i++){var s=o[i];isNaN(Number(r.metrics[s]))||(this.counters[s]=Number(Math.floor(r.metrics[s])))}FC(this)},n.prototype.incrementMetric=function(e,t){t===void 0&&(t=1),this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},n.prototype.putMetric=function(e,t){if(Yze(e,this.name))this.counters[e]=Zze(t);else throw Ni.create("invalid custom metric name",{customMetricName:e})},n.prototype.getMetric=function(e){return this.counters[e]||0},n.prototype.putAttribute=function(e,t){var r=bze(e),i=wze(t);if(r&&i){this.customAttributes[e]=t;return}if(!r)throw Ni.create("invalid attribute name",{attributeName:e});if(!i)throw Ni.create("invalid attribute value",{attributeValue:t})},n.prototype.getAttribute=function(e){return this.customAttributes[e]},n.prototype.removeAttribute=function(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]},n.prototype.getAttributes=function(){return Je({},this.customAttributes)},n.prototype.setStartTime=function(e){this.startTimeUs=e},n.prototype.setDuration=function(e){this.durationUs=e},n.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))},n.createOobTrace=function(e,t,r){var i=Bi.getInstance().getUrl();if(i){var o=new n(Pre+i,!0),s=Math.floor(Bi.getInstance().getTimeOrigin()*1e3);o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(e[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(e[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(e[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(e[0].loadEventEnd*1e3)));var a="first-paint",u="first-contentful-paint";if(t){var l=t.find(function(h){return h.name===a});l&&l.startTime&&o.putMetric(Fre,Math.floor(l.startTime*1e3));var f=t.find(function(h){return h.name===u});f&&f.startTime&&o.putMetric(Bre,Math.floor(f.startTime*1e3)),r&&o.putMetric(Wre,Math.floor(r*1e3))}FC(o)}},n.createUserTimingTrace=function(e){var t=new n(e,!1,e);FC(t)},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(n){var e=n;if(!(!e||e.responseStart===void 0)){var t=Bi.getInstance().getTimeOrigin(),r=Math.floor((e.startTime+t)*1e3),i=e.responseStart?Math.floor((e.responseStart-e.startTime)*1e3):void 0,o=Math.floor((e.responseEnd-e.startTime)*1e3),s=e.name&&e.name.split("?")[0],a={url:s,responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Uze(a)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xze=5e3;function v7(){gB()&&(setTimeout(function(){return Jze()},0),setTimeout(function(){return Qze()},0),setTimeout(function(){return e7e()},0))}function Qze(){for(var n=Bi.getInstance(),e=n.getEntriesByType("resource"),t=0,r=e;t<r.length;t++){var i=r[t];g7(i)}n.setupObserver("resource",g7)}function Jze(){var n=Bi.getInstance(),e=n.getEntriesByType("navigation"),t=n.getEntriesByType("paint");if(n.onFirstInputDelay){var r=setTimeout(function(){ly.createOobTrace(e,t),r=void 0},Xze);n.onFirstInputDelay(function(i){r&&(clearTimeout(r),ly.createOobTrace(e,t,i))})}else ly.createOobTrace(e,t)}function e7e(){for(var n=Bi.getInstance(),e=n.getEntriesByType("measure"),t=0,r=e;t<r.length;t++){var i=r[t];m7(i)}n.setupObserver("measure",m7)}function m7(n){var e=n.name;e.substring(0,wM.length)!==wM&&ly.createUserTimingTrace(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t7e=function(){function n(e){this.app=e,Bi.getInstance().requiredApisAvailable()&&sP().then(function(t){t&&(Pze(),$re().then(v7,v7))}).catch(function(t){kl.info("Environment doesn't support IndexedDB: "+t)})}return n.prototype.trace=function(e){return new ly(e)},Object.defineProperty(n.prototype,"instrumentationEnabled",{get:function(){return Mr.getInstance().instrumentationEnabled},set:function(e){Mr.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataCollectionEnabled",{get:function(){return Mr.getInstance().dataCollectionEnabled},set:function(e){Mr.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n7e="[DEFAULT]";function r7e(n){var e=function(t,r){if(t.name!==n7e)throw Ni.create("FB not default");if(typeof window>"u")throw Ni.create("no window");return fze(window),Mr.getInstance().firebaseAppInstance=t,Mr.getInstance().installationsService=r,new t7e(t)};n.INTERNAL.registerComponent(new Vi("performance",function(t){var r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();return e(r,i)},"PUBLIC")),n.registerVersion(sze,Rre)}r7e(He);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i7e="firebase_id",o7e="origin",s7e=60*1e3,a7e="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zre="https://www.googletagmanager.com/gtag/js",Wi;(function(n){n.EVENT="event",n.SET="set",n.CONFIG="config"})(Wi||(Wi={}));var CM;(function(n){n.ADD_SHIPPING_INFO="add_shipping_info",n.ADD_PAYMENT_INFO="add_payment_info",n.ADD_TO_CART="add_to_cart",n.ADD_TO_WISHLIST="add_to_wishlist",n.BEGIN_CHECKOUT="begin_checkout",n.CHECKOUT_PROGRESS="checkout_progress",n.EXCEPTION="exception",n.GENERATE_LEAD="generate_lead",n.LOGIN="login",n.PAGE_VIEW="page_view",n.PURCHASE="purchase",n.REFUND="refund",n.REMOVE_FROM_CART="remove_from_cart",n.SCREEN_VIEW="screen_view",n.SEARCH="search",n.SELECT_CONTENT="select_content",n.SELECT_ITEM="select_item",n.SELECT_PROMOTION="select_promotion",n.SET_CHECKOUT_OPTION="set_checkout_option",n.SHARE="share",n.SIGN_UP="sign_up",n.TIMING_COMPLETE="timing_complete",n.VIEW_CART="view_cart",n.VIEW_ITEM="view_item",n.VIEW_ITEM_LIST="view_item_list",n.VIEW_PROMOTION="view_promotion",n.VIEW_SEARCH_RESULTS="view_search_results"})(CM||(CM={}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7e(n,e,t,r,i){return U(this,void 0,void 0,function(){var o,s;return V(this,function(a){switch(a.label){case 0:return i&&i.global?(n(Wi.EVENT,t,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Je(Je({},r),{send_to:o}),n(Wi.EVENT,t,s),a.label=3;case 3:return[2]}})})}function l7e(n,e,t,r){return U(this,void 0,void 0,function(){var i;return V(this,function(o){switch(o.label){case 0:return r&&r.global?(n(Wi.SET,{screen_name:t}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),n(Wi.CONFIG,i,{update:!0,screen_name:t}),o.label=3;case 3:return[2]}})})}function c7e(n,e,t,r){return U(this,void 0,void 0,function(){var i;return V(this,function(o){switch(o.label){case 0:return r&&r.global?(n(Wi.SET,{user_id:t}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),n(Wi.CONFIG,i,{update:!0,user_id:t}),o.label=3;case 3:return[2]}})})}function f7e(n,e,t,r){return U(this,void 0,void 0,function(){var i,o,s,a,u;return V(this,function(l){switch(l.label){case 0:if(!(r&&r.global))return[3,1];for(i={},o=0,s=Object.keys(t);o<s.length;o++)a=s[o],i["user_properties."+a]=t[a];return n(Wi.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=l.sent(),n(Wi.CONFIG,u,{update:!0,user_properties:t}),l.label=3;case 3:return[2]}})})}function h7e(n,e){return U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:return[4,n];case 1:return t=r.sent(),window["ga-disable-"+t]=!e,[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi=new Nd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7e(n,e){var t=document.createElement("script");t.src=Zre+"?l="+n+"&id="+e,t.async=!0,document.head.appendChild(t)}function p7e(n){var e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function g7e(n,e,t,r,i,o){return U(this,void 0,void 0,function(){var s,a,u,l;return V(this,function(f){switch(f.label){case 0:s=r[i],f.label=1;case 1:return f.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return f.sent(),[3,6];case 3:return[4,Promise.all(t)];case 4:return a=f.sent(),u=a.find(function(h){return h.measurementId===i}),u?[4,e[u.appId]]:[3,6];case 5:f.sent(),f.label=6;case 6:return[3,8];case 7:return l=f.sent(),fi.error(l),[3,8];case 8:return n(Wi.CONFIG,i,o),[2]}})})}function v7e(n,e,t,r,i){return U(this,void 0,void 0,function(){var o,s,a,u,l,f,h,d,g;return V(this,function(v){switch(v.label){case 0:return v.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(t)]):[3,2];case 1:for(a=v.sent(),u=function(m){var y=a.find(function(C){return C.measurementId===m}),b=y&&e[y.appId];if(b)o.push(b);else return o=[],"break"},l=0,f=s;l<f.length&&(h=f[l],d=u(h),d!=="break");l++);v.label=2;case 2:return o.length===0&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return v.sent(),n(Wi.EVENT,r,i||{}),[3,5];case 4:return g=v.sent(),fi.error(g),[3,5];case 5:return[2]}})})}function m7e(n,e,t,r){function i(o,s,a){return U(this,void 0,void 0,function(){var u;return V(this,function(l){switch(l.label){case 0:return l.trys.push([0,6,,7]),o!==Wi.EVENT?[3,2]:[4,v7e(n,e,t,s,a)];case 1:return l.sent(),[3,5];case 2:return o!==Wi.CONFIG?[3,4]:[4,g7e(n,e,t,r,s,a)];case 3:return l.sent(),[3,5];case 4:n(Wi.SET,s),l.label=5;case 5:return[3,7];case 6:return u=l.sent(),fi.error(u),[3,7];case 7:return[2]}})})}return i}function _7e(n,e,t,r,i){var o=function(){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=m7e(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function y7e(){for(var n=window.document.getElementsByTagName("script"),e=0,t=Object.values(n);e<t.length;e++){var r=t[e];if(r.src&&r.src.includes(Zre))return r}return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ra,b7e=(ra={},ra["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",ra["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",ra["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",ra["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ra["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ra["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",ra["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",ra["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',ra["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',ra),Ws=new Nl("analytics","Analytics",b7e);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w7e=30,C7e=1e3,S7e=function(){function n(e,t){e===void 0&&(e={}),t===void 0&&(t=C7e),this.throttleMetadata=e,this.intervalMillis=t}return n.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},n.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},n.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},n}(),Xre=new S7e;function E7e(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function I7e(n){var e;return U(this,void 0,void 0,function(){var t,r,i,o,s,a,u;return V(this,function(l){switch(l.label){case 0:return t=n.appId,r=n.apiKey,i={method:"GET",headers:E7e(r)},o=a7e.replace("{app-id}",t),[4,fetch(o,i)];case 1:if(s=l.sent(),!(s.status!==200&&s.status!==304))return[3,6];a="",l.label=2;case 2:return l.trys.push([2,4,,5]),[4,s.json()];case 3:return u=l.sent(),!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message),[3,5];case 4:return l.sent(),[3,5];case 5:throw Ws.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}})})}function x7e(n,e,t){return e===void 0&&(e=Xre),U(this,void 0,void 0,function(){var r,i,o,s,a,u,l=this;return V(this,function(f){if(r=n.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw Ws.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw Ws.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new k7e,setTimeout(function(){return U(l,void 0,void 0,function(){return V(this,function(h){return u.abort(),[2]})})},s7e),[2,Qre({appId:i,apiKey:o,measurementId:s},a,u,e)]})})}function Qre(n,e,t,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return r===void 0&&(r=Xre),U(this,void 0,void 0,function(){var s,a,u,l,f,h,d;return V(this,function(g){switch(g.label){case 0:s=n.appId,a=n.measurementId,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,D7e(t,i)];case 2:return g.sent(),[3,4];case 3:if(u=g.sent(),a)return fi.warn("Timed out fetching this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+a)+(' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]")),[2,{appId:s,measurementId:a}];throw u;case 4:return g.trys.push([4,6,,7]),[4,I7e(n)];case 5:return l=g.sent(),r.deleteThrottleMetadata(s),[2,l];case 6:if(f=g.sent(),!L7e(f)){if(r.deleteThrottleMetadata(s),a)return fi.warn("Failed to fetch this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+a)+(' provided in the "measurementId" field in the local Firebase config. ['+f.message+"]")),[2,{appId:s,measurementId:a}];throw f}return h=Number(f.customData.httpStatus)===503?hA(o,r.intervalMillis,w7e):hA(o,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(s,d),fi.debug("Calling attemptFetch again in "+h+" millis"),[2,Qre(n,d,t,r)];case 7:return[2]}})})}function D7e(n,e){return new Promise(function(t,r){var i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(function(){clearTimeout(o),r(Ws.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function L7e(n){if(!(n instanceof Lv)||!n.customData)return!1;var e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var k7e=function(){function n(){this.listeners=[]}return n.prototype.addEventListener=function(e){this.listeners.push(e)},n.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7e(){return U(this,void 0,void 0,function(){var n;return V(this,function(e){switch(e.label){case 0:return k0()?[3,1]:(fi.warn(Ws.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,sP()];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),fi.warn(Ws.create("indexeddb-unavailable",{errorInfo:n}).message),[2,!1];case 4:return[2,!0]}})})}function N7e(n,e,t,r,i,o){return U(this,void 0,void 0,function(){var s,a,u,l,f,h,d;return V(this,function(g){switch(g.label){case 0:return s=x7e(n),s.then(function(v){t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&fi.warn("The measurement ID in the local Firebase config ("+n.options.measurementId+")"+(" does not match the measurement ID fetched from the server ("+v.measurementId+").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(v){return fi.error(v)}),e.push(s),a=T7e().then(function(v){if(v)return r.getId()}),[4,Promise.all([s,a])];case 1:return u=g.sent(),l=u[0],f=u[1],y7e()||d7e(o,l.measurementId),i("js",new Date),h=(d={},d[o7e]="firebase",d.update=!0,d),f!=null&&(h[i7e]=f),i(Wi.CONFIG,l.measurementId,h),[2,l.measurementId]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $u={},_7=[],y7={},m1="dataLayer",Jre="gtag",b7,b_,SM=!1;function A7e(n){if(SM)throw Ws.create("already-initialized");n.dataLayerName&&(m1=n.dataLayerName),n.gtagName&&(Jre=n.gtagName)}function O7e(){var n=[];if(oP()&&n.push("This is a browser extension environment."),o$()||n.push("Cookies are not available."),n.length>0){var e=n.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),t=Ws.create("invalid-analytics-context",{errorInfo:e});fi.warn(t.message)}}function R7e(n,e){O7e();var t=n.options.appId;if(!t)throw Ws.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)fi.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+(" measurement ID for this Firebase app. Falling back to the measurement ID "+n.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw Ws.create("no-api-key");if($u[t]!=null)throw Ws.create("already-exists",{id:t});if(!SM){p7e(m1);var r=_7e($u,_7,y7,m1,Jre),i=r.wrappedGtag,o=r.gtagCore;b_=i,b7=o,SM=!0}$u[t]=N7e(n,_7,y7,e,b7,m1);var s={app:n,logEvent:function(a,u,l){u7e(b_,$u[t],a,u,l).catch(function(f){return fi.error(f)})},setCurrentScreen:function(a,u){l7e(b_,$u[t],a,u).catch(function(l){return fi.error(l)})},setUserId:function(a,u){c7e(b_,$u[t],a,u).catch(function(l){return fi.error(l)})},setUserProperties:function(a,u){f7e(b_,$u[t],a,u).catch(function(l){return fi.error(l)})},setAnalyticsCollectionEnabled:function(a){h7e($u[t],a).catch(function(u){return fi.error(u)})},INTERNAL:{delete:function(){return delete $u[t],Promise.resolve()}}};return s}var M7e="@firebase/analytics",P7e="0.6.18",w7="analytics";function F7e(n){n.INTERNAL.registerComponent(new Vi(w7,function(t){var r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();return R7e(r,i)},"PUBLIC").setServiceProps({settings:A7e,EventName:CM,isSupported:B7e})),n.INTERNAL.registerComponent(new Vi("analytics-internal",e,"PRIVATE")),n.registerVersion(M7e,P7e);function e(t){try{var r=t.getProvider(w7).getImmediate();return{logEvent:r.logEvent}}catch(i){throw Ws.create("interop-component-reg-failed",{reason:i})}}}F7e(He);function B7e(){return U(this,void 0,void 0,function(){var n;return V(this,function(e){switch(e.label){case 0:if(oP())return[2,!1];if(!o$())return[2,!1];if(!k0())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,sP()];case 2:return n=e.sent(),[2,n];case 3:return e.sent(),[2,!1];case 4:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W7e=function(){function n(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}return n.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-t,i=r<=e;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+e+".")+(" Is cache hit: "+i+".")),i},n.prototype.fetch=function(e){return U(this,void 0,void 0,function(){var t,r,i,o,s;return V(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),r=t[0],i=t[1],i&&this.isCachedDataFresh(e.cacheMaxAgeMillis,r)?[2,i]:(e.eTag=i&&i.eTag,[4,this.client.fetch(e)]);case 2:return o=a.sent(),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],o.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(s)];case 3:return a.sent(),[2,o]}})})},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qi,V7e=(Qi={},Qi["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Qi["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Qi["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Qi["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Qi["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Qi["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Qi["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Qi["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Qi["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Qi["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Qi["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Qi["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Qi["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Qi),Fs=new Nl("remoteconfig","Remote Config",V7e);function H7e(n,e){return n instanceof Lv&&n.code.indexOf(e)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7e(n){return n===void 0&&(n=navigator),n.languages&&n.languages[0]||n.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j7e=function(){function n(e,t,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}return n.prototype.fetch=function(e){return U(this,void 0,void 0,function(){var t,r,i,o,s,a,u,l,f,h,d,g,v,m,y,b,C,E,D;return V(this,function(k){switch(k.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=k.sent(),r=t[0],i=t[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:U7e()},l={method:"POST",headers:a,body:JSON.stringify(u)},f=fetch(s,l),h=new Promise(function(I,T){e.signal.addEventListener(function(){var A=new Error("The operation was aborted.");A.name="AbortError",T(A)})}),k.label=2;case 2:return k.trys.push([2,5,,6]),[4,Promise.race([f,h])];case 3:return k.sent(),[4,f];case 4:return d=k.sent(),[3,6];case 5:throw g=k.sent(),v="fetch-client-network",g.name==="AbortError"&&(v="fetch-timeout"),Fs.create(v,{originalErrorMessage:g.message});case 6:if(m=d.status,y=d.headers.get("ETag")||void 0,d.status!==200)return[3,11];E=void 0,k.label=7;case 7:return k.trys.push([7,9,,10]),[4,d.json()];case 8:return E=k.sent(),[3,10];case 9:throw D=k.sent(),Fs.create("fetch-client-parse",{originalErrorMessage:D.message});case 10:b=E.entries,C=E.state,k.label=11;case 11:if(C==="INSTANCE_STATE_UNSPECIFIED"?m=500:C==="NO_CHANGE"?m=304:(C==="NO_TEMPLATE"||C==="EMPTY_CONFIG")&&(b={}),m!==304&&m!==200)throw Fs.create("fetch-status",{httpStatus:m});return[2,{status:m,eTag:y,config:b}]}})})},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z7e=function(){function n(){this.listeners=[]}return n.prototype.addEventListener=function(e){this.listeners.push(e)},n.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q7e=!1,$7e="",C7=0,K7e=["1","true","t","yes","y","on"],$N=function(){function n(e,t){t===void 0&&(t=$7e),this._source=e,this._value=t}return n.prototype.asString=function(){return this._value},n.prototype.asBoolean=function(){return this._source==="static"?q7e:K7e.indexOf(this._value.toLowerCase())>=0},n.prototype.asNumber=function(){if(this._source==="static")return C7;var e=Number(this._value);return isNaN(e)&&(e=C7),e},n.prototype.getSource=function(){return this._source},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G7e=60*1e3,Y7e=12*60*60*1e3,Z7e=function(){function n(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:G7e,minimumFetchIntervalMillis:Y7e},this.defaultConfig={}}return n.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=Lt.DEBUG;break;case"silent":this._logger.logLevel=Lt.SILENT;break;default:this._logger.logLevel=Lt.ERROR}},Object.defineProperty(n.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),n.prototype.activate=function(){return U(this,void 0,void 0,function(){var e,t,r;return V(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=i.sent(),t=e[0],r=e[1],!t||!t.config||!t.eTag||t.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])];case 2:return i.sent(),[2,!0]}})})},n.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){e._isInitializationComplete=!0})),this._initializePromise},n.prototype.fetch=function(){return U(this,void 0,void 0,function(){var e,t,r,i=this;return V(this,function(o){switch(o.label){case 0:e=new z7e,setTimeout(function(){return U(i,void 0,void 0,function(){return V(this,function(s){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return o.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return o.sent(),[3,6];case 4:return t=o.sent(),r=H7e(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw o.sent(),t;case 6:return[2]}})})},n.prototype.fetchAndActivate=function(){return U(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}})})},n.prototype.getAll=function(){var e=this;return X7e(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,r){return t[r]=e.getValue(r),t},{})},n.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},n.prototype.getNumber=function(e){return this.getValue(e).asNumber()},n.prototype.getString=function(e){return this.getValue(e).asString()},n.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&t[e]!==void 0?new $N("remote",t[e]):this.defaultConfig&&this.defaultConfig[e]!==void 0?new $N("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new $N("static"))},n}();function X7e(n,e){return n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(Je(Je({},n),e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(n,e){var t=n.target.error||void 0;return Fs.create(e,{originalErrorMessage:t&&t.message})}var wh="app_namespace_store",Q7e="firebase_remote_config",J7e=1;function eqe(){return new Promise(function(n,e){var t=indexedDB.open(Q7e,J7e);t.onerror=function(r){e(_1(r,"storage-open"))},t.onsuccess=function(r){n(r.target.result)},t.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(wh,{keyPath:"compositeKey"})}}})}var tqe=function(){function n(e,t,r,i){i===void 0&&(i=eqe()),this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}return n.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},n.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},n.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},n.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},n.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},n.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},n.prototype.getActiveConfig=function(){return this.get("active_config")},n.prototype.setActiveConfig=function(e){return this.set("active_config",e)},n.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},n.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},n.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},n.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},n.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},n.prototype.get=function(e){return U(this,void 0,void 0,function(){var t,r=this;return V(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return t=i.sent(),[2,new Promise(function(o,s){var a=t.transaction([wh],"readonly"),u=a.objectStore(wh),l=r.createCompositeKey(e);try{var f=u.get(l);f.onerror=function(h){s(_1(h,"storage-get"))},f.onsuccess=function(h){var d=h.target.result;o(d?d.value:void 0)}}catch(h){s(Fs.create("storage-get",{originalErrorMessage:h&&h.message}))}})]}})})},n.prototype.set=function(e,t){return U(this,void 0,void 0,function(){var r,i=this;return V(this,function(o){switch(o.label){case 0:return[4,this.openDbPromise];case 1:return r=o.sent(),[2,new Promise(function(s,a){var u=r.transaction([wh],"readwrite"),l=u.objectStore(wh),f=i.createCompositeKey(e);try{var h=l.put({compositeKey:f,value:t});h.onerror=function(d){a(_1(d,"storage-set"))},h.onsuccess=function(){s()}}catch(d){a(Fs.create("storage-set",{originalErrorMessage:d&&d.message}))}})]}})})},n.prototype.delete=function(e){return U(this,void 0,void 0,function(){var t,r=this;return V(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return t=i.sent(),[2,new Promise(function(o,s){var a=t.transaction([wh],"readwrite"),u=a.objectStore(wh),l=r.createCompositeKey(e);try{var f=u.delete(l);f.onerror=function(h){s(_1(h,"storage-delete"))},f.onsuccess=function(){o()}}catch(h){s(Fs.create("storage-delete",{originalErrorMessage:h&&h.message}))}})]}})})},n.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nqe=function(){function n(e){this.storage=e}return n.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},n.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},n.prototype.getActiveConfig=function(){return this.activeConfig},n.prototype.loadFromStorage=function(){return U(this,void 0,void 0,function(){var e,t,r,i,o,s;return V(this,function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return i=a.sent(),i&&(this.lastFetchStatus=i),[4,t];case 2:return o=a.sent(),o&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return s=a.sent(),s&&(this.activeConfig=s),[2]}})})},n.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},n.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},n.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},n}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rqe(n,e){return new Promise(function(t,r){var i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(function(){clearTimeout(o),r(Fs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function iqe(n){if(!(n instanceof Lv)||!n.customData)return!1;var e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var oqe=function(){function n(e,t){this.client=e,this.storage=t}return n.prototype.fetch=function(e){return U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}})})},n.prototype.attemptFetch=function(e,t){var r=t.throttleEndTimeMillis,i=t.backoffCount;return U(this,void 0,void 0,function(){var o,s,a;return V(this,function(u){switch(u.label){case 0:return[4,rqe(e.signal,r)];case 1:u.sent(),u.label=2;case 2:return u.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return o=u.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return u.sent(),[2,o];case 5:if(s=u.sent(),!iqe(s))throw s;return a={throttleEndTimeMillis:Date.now()+hA(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(a)];case 6:return u.sent(),[2,this.attemptFetch(e,a)];case 7:return[2]}})})},n}(),S7="@firebase/remote-config",sqe="0.1.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aqe(n){n.INTERNAL.registerComponent(new Vi("remoteConfig",e,"PUBLIC").setMultipleInstances(!0)),n.registerVersion(S7,sqe);function e(t,r){var i=r.instanceIdentifier,o=t.getProvider("app").getImmediate(),s=t.getProvider("installations").getImmediate();if(typeof window>"u")throw Fs.create("registration-window");var a=o.options,u=a.projectId,l=a.apiKey,f=a.appId;if(!u)throw Fs.create("registration-project-id");if(!l)throw Fs.create("registration-api-key");if(!f)throw Fs.create("registration-app-id");i=i||"firebase";var h=new tqe(f,o.name,i),d=new nqe(h),g=new Nd(S7);g.logLevel=Lt.ERROR;var v=new j7e(s,n.SDK_VERSION,i,u,l,f),m=new oqe(v,h),y=new W7e(m,h,d,g),b=new Z7e(o,y,d,h,g);return b.ensureInitialized(),b}}aqe(He);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ia,uqe=(ia={},ia["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",ia["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",ia["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",ia["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",ia["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",ia["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",ia["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",ia["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",ia["recaptcha-error"]="ReCAPTCHA error.",ia),cs=new Nl("appCheck","AppCheck",uqe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eie=new Map,lqe={activated:!1,tokenObservers:[]},cqe={enabled:!1};function _o(n){return eie.get(n)||lqe}function vu(n,e){eie.set(n,e)}function _B(){return cqe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tie="https://content-firebaseappcheck.googleapis.com/v1beta",fqe="exchangeRecaptchaToken",hqe="exchangeDebugToken",E7={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dqe=function(){function n(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}return n.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},n.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},n.prototype.isRunning=function(){return!!this.pending},n.prototype.process=function(e){return U(this,void 0,void 0,function(){var t;return V(this,function(r){switch(r.label){case 0:this.stop(),r.label=1;case 1:return r.trys.push([1,6,,7]),this.pending=new Qr,[4,pqe(this.getNextRun(e))];case 2:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return r.sent(),this.pending=new Qr,[4,this.operation()];case 4:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return r.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return t=r.sent(),this.retryPolicy(t)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}})})},n.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},n}();function pqe(n){return new Promise(function(e){setTimeout(e,n)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(){return self.grecaptcha}function nie(n){if(!_o(n).activated)throw cs.create("use-before-activation",{appName:n.name})}function gqe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n==="x"?e:e&3|8;return t.toString(16)})}function vqe(n){return TE.encodeString(JSON.stringify(n),!1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rie(n,e){var t=n.url,r=n.body;return U(this,void 0,void 0,function(){var i,o,s,a,u,l,f,h,d,g;return V(this,function(v){switch(v.label){case 0:i={"Content-Type":"application/json"},o=e.getImmediate({optional:!0}),o&&(i["X-Firebase-Client"]=o.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:i},v.label=1;case 1:return v.trys.push([1,3,,4]),[4,fetch(t,s)];case 2:return a=v.sent(),[3,4];case 3:throw u=v.sent(),cs.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(a.status!==200)throw cs.create("fetch-status-error",{httpStatus:a.status});v.label=5;case 5:return v.trys.push([5,7,,8]),[4,a.json()];case 6:return l=v.sent(),[3,8];case 7:throw f=v.sent(),cs.create("fetch-parse-error",{originalErrorMessage:f.message});case 8:if(h=l.ttl.match(/^([\d.]+)(s)$/),!h||!h[2]||isNaN(Number(h[1])))throw cs.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+("format: "+l.ttl)});return d=Number(h[1])*1e3,g=Date.now(),[2,{token:l.attestationToken,expireTimeMillis:g+d,issuedAtTimeMillis:g}]}})})}function mqe(n,e){var t=n.options,r=t.projectId,i=t.appId,o=t.apiKey;return{url:tie+"/projects/"+r+"/apps/"+i+":"+fqe+"?key="+o,body:{recaptcha_token:e}}}function _qe(n,e){var t=n.options,r=t.projectId,i=t.appId,o=t.apiKey;return{url:tie+"/projects/"+r+"/apps/"+i+":"+hqe+"?key="+o,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yqe="firebase-app-check-database",bqe=1,S0="firebase-app-check-store",iie="debug-token",BC=null;function oie(){return BC||(BC=new Promise(function(n,e){try{var t=indexedDB.open(yqe,bqe);t.onsuccess=function(r){n(r.target.result)},t.onerror=function(r){var i;e(cs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(S0,{keyPath:"compositeKey"})}}}catch(r){e(cs.create("storage-open",{originalErrorMessage:r.message}))}}),BC)}function wqe(n){return aie(uie(n))}function Cqe(n,e){return sie(uie(n),e)}function Sqe(n){return sie(iie,n)}function Eqe(){return aie(iie)}function sie(n,e){return U(this,void 0,void 0,function(){var t,r,i,o;return V(this,function(s){switch(s.label){case 0:return[4,oie()];case 1:return t=s.sent(),r=t.transaction(S0,"readwrite"),i=r.objectStore(S0),o=i.put({compositeKey:n,value:e}),[2,new Promise(function(a,u){o.onsuccess=function(l){a()},r.onerror=function(l){var f;u(cs.create("storage-set",{originalErrorMessage:(f=l.target.error)===null||f===void 0?void 0:f.message}))}})]}})})}function aie(n){return U(this,void 0,void 0,function(){var e,t,r,i;return V(this,function(o){switch(o.label){case 0:return[4,oie()];case 1:return e=o.sent(),t=e.transaction(S0,"readonly"),r=t.objectStore(S0),i=r.get(n),[2,new Promise(function(s,a){i.onsuccess=function(u){var l=u.target.result;s(l?l.value:void 0)},t.onerror=function(u){var l;a(cs.create("storage-get",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})]}})})}function uie(n){return n.options.appId+"-"+n.name}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vx=new Nd("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iqe(n){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:if(!k0())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,wqe(n)];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),Vx.warn("Failed to read token from indexeddb. Error: "+t),[3,4];case 4:return[2,e];case 5:return[2,void 0]}})})}function x7(n,e){return k0()?Cqe(n,e).catch(function(t){Vx.warn("Failed to write token to indexeddb. Error: "+t)}):Promise.resolve()}function xqe(){return U(this,void 0,void 0,function(){var n,e;return V(this,function(t){switch(t.label){case 0:n=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Eqe()];case 2:return n=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return n?[2,n]:(e=gqe(),Sqe(e).catch(function(r){return Vx.warn("Failed to persist debug token to indexeddb. Error: "+r)}),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dqe(){var n=_B();return n.enabled}function Lqe(){return U(this,void 0,void 0,function(){var n;return V(this,function(e){if(n=_B(),n.enabled&&n.token)return[2,n.token.promise];throw Error(`
            Can't get debug token in production mode.
        `)})})}function kqe(){var n=ope();if(!(typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&n.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)){var e=_B();e.enabled=!0;var t=new Qr;e.token=t,typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?t.resolve(n.FIREBASE_APPCHECK_DEBUG_TOKEN):t.resolve(xqe())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tqe={error:"UNKNOWN_ERROR"};function pE(n,e,t){return t===void 0&&(t=!1),U(this,void 0,void 0,function(){var r,i,o,s,a,u,l,f,h,d;return V(this,function(g){switch(g.label){case 0:return nie(n),r=_o(n),i=r.token,o=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:s=g.sent(),s&&E0(s)&&(i=s,vu(n,Je(Je({},r),{token:i})),D7(n,{token:i.token})),g.label=2;case 2:return!t&&i&&E0(i)?[2,{token:i.token}]:Dqe()?(u=rie,l=_qe,f=[n],[4,Lqe()]):[3,6];case 3:return[4,u.apply(void 0,[l.apply(void 0,f.concat([g.sent()])),e])];case 4:return a=g.sent(),[4,x7(n,a)];case 5:return g.sent(),vu(n,Je(Je({},r),{token:a})),[2,{token:a.token}];case 6:return g.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=g.sent(),[3,9];case 8:return h=g.sent(),Vx.error(h),o=h,[3,9];case 9:return i?[3,10]:(d=Aqe(o),[3,12]);case 10:return d={token:i.token},vu(n,Je(Je({},r),{token:i})),[4,x7(n,i)];case 11:g.sent(),g.label=12;case 12:return D7(n,d),[2,d]}})})}function lie(n,e,t,r,i){var o=_o(n),s={next:r,error:i,type:t},a=Je(Je({},o),{tokenObservers:Ct(Ct([],o.tokenObservers),[s])});if(!a.tokenRefresher){var u=Nqe(n,e);a.tokenRefresher=u}if(!a.tokenRefresher.isRunning()&&o.isTokenAutoRefreshEnabled&&a.tokenRefresher.start(),o.token&&E0(o.token)){var l=o.token;Promise.resolve().then(function(){return r({token:l.token})}).catch(function(){})}else o.token==null&&o.cachedTokenPromise.then(function(f){f&&E0(f)&&r({token:f.token})}).catch(function(){});vu(n,a)}function yB(n,e){var t=_o(n),r=t.tokenObservers.filter(function(i){return i.next!==e});r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),vu(n,Je(Je({},t),{tokenObservers:r}))}function Nqe(n,e){var t=this;return new dqe(function(){return U(t,void 0,void 0,function(){var r,i;return V(this,function(o){switch(o.label){case 0:return r=_o(n),r.token?[3,2]:[4,pE(n,e)];case 1:return i=o.sent(),[3,4];case 2:return[4,pE(n,e,!0)];case 3:i=o.sent(),o.label=4;case 4:if(i.error)throw i.error;return[2]}})})},function(){return!0},function(){var r=_o(n);if(r.token){var i=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5,o=r.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,o),Math.max(0,i-Date.now())}else return 0},E7.RETRIAL_MIN_WAIT,E7.RETRIAL_MAX_WAIT)}function D7(n,e){for(var t=_o(n).tokenObservers,r=0,i=t;r<i.length;r++){var o=i[r];try{o.type==="EXTERNAL"&&e.error!=null?o.error(e.error):o.next(e)}catch{}}}function E0(n){return n.expireTimeMillis-Date.now()>0}function Aqe(n){return{token:vqe(Tqe),error:n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oqe="https://www.google.com/recaptcha/api.js";function Rqe(n,e){var t=_o(n),r=new Qr;vu(n,Je(Je({},t),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+n.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var s=I7();return s?s.ready(function(){L7(n,e,s,i),r.resolve(s)}):Pqe(function(){var a=I7();if(!a)throw new Error("no recaptcha");a.ready(function(){L7(n,e,a,i),r.resolve(a)})}),r.promise}function Mqe(n){return U(this,void 0,void 0,function(){var e,t;return V(this,function(r){switch(r.label){case 0:return nie(n),e=_o(n).reCAPTCHAState,[4,e.initialized.promise];case 1:return t=r.sent(),[2,new Promise(function(i,o){var s=_o(n).reCAPTCHAState;t.ready(function(){i(t.execute(s.widgetId,{action:"fire_app_check"}))})})]}})})}function L7(n,e,t,r){var i=t.render(r,{sitekey:e,size:"invisible"}),o=_o(n);vu(n,Je(Je({},o),{reCAPTCHAState:Je(Je({},o.reCAPTCHAState),{widgetId:i})}))}function Pqe(n){var e=document.createElement("script");e.src=""+Oqe,e.onload=n,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EM=function(){function n(e){this._siteKey=e}return n.prototype.getToken=function(){return U(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw cs.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Mqe(this._app)];case 2:return e=t.sent(),[3,4];case 3:throw t.sent(),cs.create("recaptcha-error");case 4:return[2,rie(mqe(this._app,e),this._platformLoggerProvider)]}})})},n.prototype.initialize=function(e,t){this._app=e,this._platformLoggerProvider=t,Rqe(e,this._siteKey).catch(function(){})},n}(),IM=function(){function n(e){this._customProviderOptions=e}return n.prototype.getToken=function(){return U(this,void 0,void 0,function(){var e,t,r;return V(this,function(i){switch(i.label){case 0:if(!this._app)throw cs.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=i.sent(),t=lpe(e.token),r=t!==null&&t<Date.now()&&t>0?t*1e3:Date.now(),[2,Je(Je({},e),{issuedAtTimeMillis:r})]}})})},n.prototype.initialize=function(e){this._app=e},n}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fqe(n,e,t,r){var i=_o(n);if(i.activated)throw cs.create("already-activated",{appName:n.name});var o=Je(Je({},i),{activated:!0});o.cachedTokenPromise=Iqe(n).then(function(s){return s&&E0(s)&&vu(n,Je(Je({},_o(n)),{token:s})),s}),typeof e=="string"?o.provider=new EM(e):e instanceof EM||e instanceof IM?o.provider=e:o.provider=new IM({getToken:e.getToken}),o.isTokenAutoRefreshEnabled=r===void 0?n.automaticDataCollectionEnabled:r,vu(n,o),o.provider.initialize(n,t)}function Bqe(n,e){var t=_o(n);t.tokenRefresher&&(e===!0?t.tokenRefresher.start():t.tokenRefresher.stop()),vu(n,Je(Je({},t),{isTokenAutoRefreshEnabled:e}))}function Wqe(n,e,t){return U(this,void 0,void 0,function(){var r;return V(this,function(i){switch(i.label){case 0:return[4,pE(n,e,t)];case 1:if(r=i.sent(),r.error)throw r.error;return[2,{token:r.token}]}})})}function Vqe(n,e,t,r,i){var o=function(){},s=function(){};return t.next!=null?o=t.next.bind(t):o=t,t.error!=null?s=t.error.bind(t):r&&(s=r),lie(n,e,"EXTERNAL",o,s),function(){return yB(n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hqe(n,e){return{app:n,activate:function(t,r){return Fqe(n,t,e,r)},setTokenAutoRefreshEnabled:function(t){return Bqe(n,t)},getToken:function(t){return Wqe(n,e,t)},onTokenChanged:function(t,r,i){return Vqe(n,e,t,r)},INTERNAL:{delete:function(){for(var t=_o(n).tokenObservers,r=0,i=t;r<i.length;r++){var o=i[r];yB(n,o.next)}return Promise.resolve()}}}}function Uqe(n,e){return{getToken:function(t){return pE(n,e,t)},addTokenListener:function(t){return lie(n,e,"INTERNAL",t)},removeTokenListener:function(t){return yB(n,t)}}}var jqe="@firebase/app-check",zqe="0.3.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qqe="appCheck",k7="app-check-internal";function $qe(n){n.INTERNAL.registerComponent(new Vi(qqe,function(e){var t=e.getProvider("app").getImmediate(),r=e.getProvider("platform-logger");return Hqe(t,r)},"PUBLIC").setServiceProps({ReCaptchaV3Provider:EM,CustomProvider:IM}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,r){var i=e.getProvider(k7);i.initialize()})),n.INTERNAL.registerComponent(new Vi(k7,function(e){var t=e.getProvider("app").getImmediate(),r=e.getProvider("platform-logger");return Uqe(t,r)},"PUBLIC").setInstantiationMode("EXPLICIT")),n.registerVersion(jqe,zqe)}$qe(He);kqe();var Kqe="firebase",cie="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */He.registerVersion(Kqe,cie,"app");He.SDK_VERSION=cie;var Gqe="firebase",Yqe="8.10.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);He.registerVersion(Gqe,Yqe);const Zqe=be("input",{type:"text",name:"email"},null,-1),Xqe=be("input",{type:"password",name:"password"},null,-1),Qqe=be("input",{type:"submit",value:"login"},null,-1),Jqe=[Zqe,Xqe,Qqe],e$e=Iv({__name:"FirePadComponent",props:{onChange:{type:Function}},setup(n){const e=n,t=Nc(),r=Nc(),i=Nc(),o=["#817","#ed0","#09c","#4d8","#639","#639"],s=He.initializeApp({apiKey:"AIzaSyAyX5rW5aNUHRuc7GNlxF3oOTeZk1YRof0",databaseURL:"https://editor-de-boletines-41cae-default-rtdb.firebaseio.com/"});let a,u,l;function f(){var h,d,g;a=xg.create(t.value,{language:"markdown",minimap:{enabled:!1},wordWrap:"on"}),a.onDidChangeModelContent(()=>e.onChange(a.getValue())),u=VVe(s.database().ref("/boletin"),a,{userName:(d=(h=l.user)==null?void 0:h.email)==null?void 0:d.split("@")[0],userColor:o[Math.floor(Math.random()*o.length)],userId:(g=l.user)==null?void 0:g.uid})}return UM(async()=>{const h=r.value;h&&(h.onsubmit=async d=>{var g;d.preventDefault();try{l=await s.auth().signInWithEmailAndPassword(h.email.value,h.password.value),f(),h.reset(),(g=i.value)==null||g.close()}catch{console.log("Invalid credentials"),console.log("AUTH",l)}})}),zM(()=>{u.dispose()}),(h,d)=>(lf(),Td(Ns,null,[be("dialog",{open:"",ref_key:"dialogRef",ref:i},[be("form",{ref_key:"formRef",ref:r},Jqe,512)],512),be("div",{id:"monaco",ref_key:"monacoWrapperRef",ref:t},null,512)],64))}}),t$e={class:"wrapper"},n$e={class:"input"},r$e={class:"newsletter_wrapper"},i$e={id:"u_body"},o$e=be("a",{name:"top",id:"top"},null,-1),s$e={class:"container"},a$e=be("tr",null,[be("td",null,[be("hr")])],-1),u$e=be("tr",null,[be("td",null,[be("br"),be("br"),be("a",{href:"#top"},"Volver al tope de la pgina")])],-1),l$e=Iv({__name:"NewsLetter",setup(n){const e=Vs({linkify:!0,breaks:!0}).use(xde),t=Nc(""),r=Nc("https://sukhada.dhamma.org/fotos/2024/03/cabezal.jpg"),i=new Date,o=new Intl.DateTimeFormat("es-AR",{month:"long"}).format(i),s=i.getFullYear(),a=Nc(`${o} ${s}`);async function u(l){try{t.value=e.render(l)}catch(f){console.error("Error rendering markdown",f)}}return(l,f)=>(lf(),Td("div",t$e,[be("div",n$e,[cH(be("input",{type:"text","onUpdate:modelValue":f[0]||(f[0]=h=>r.value=h),placeholder:"Imagen de encabezado"},null,512),[[OH,r.value]]),cH(be("input",{type:"text","onUpdate:modelValue":f[1]||(f[1]=h=>a.value=h),placeholder:"Fecha"},null,512),[[OH,a.value]]),ko(e$e,{onChange:u})]),be("div",r$e,[be("table",i$e,[o$e,be("tbody",null,[be("tr",null,[be("td",s$e,[be("table",null,[be("thead",null,[ko(Ode,{"img-url":r.value,date:a.value},null,8,["img-url","date"])]),be("tbody",null,[ko(zde,{html:t.value},null,8,["html"]),a$e,ko(Xde),ko(Mde,{html:t.value},null,8,["html"]),u$e])])])])]),be("tfoot",null,[ko(Hde)])])])]))}}),c$e=Iv({__name:"App",setup(n){return(e,t)=>(lf(),Vle(l$e))}});Ice(c$e).mount("#app");
